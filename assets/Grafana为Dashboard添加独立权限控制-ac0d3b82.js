import{_ as m}from"./ValaxyMain.vue_vue_type_style_index_0_lang-fa7e3bd6.js";import{_ as h,c,w as s,o as u,b as a,d as e,e as o,r as t,f as p,p as g}from"./app-c9a35e04.js";import"./YunFooter.vue_vue_type_script_setup_true_lang-aee502c7.js";import"./YunCard.vue_vue_type_style_index_0_lang-68a832c1.js";import"./YunPageHeader.vue_vue_type_script_setup_true_lang-1a130fa6.js";const Q=JSON.parse('{"title":"Grafana为Dashboard添加独立权限控制","description":"","frontmatter":{"title":"Grafana为Dashboard添加独立权限控制","categories":"Grafana","tags":["Grafana权限控制"],"date":"2022-09-30T14:07:17.000Z"},"headers":[{"level":2,"title":"权限概览","slug":"权限概览","link":"#权限概览","children":[]},{"level":2,"title":"Dashboard和Folder权限","slug":"dashboard和folder权限","link":"#dashboard和folder权限","children":[{"level":3,"title":"添加Team","slug":"添加team","link":"#添加team","children":[]}]}],"relativePath":"pages/posts/Grafana为Dashboard添加独立权限控制.md","path":"/Users/vlinux/vlinux/blog/valaxy/vlinux.github.io/pages/posts/Grafana为Dashboard添加独立权限控制.md","lastUpdated":1671090556000}'),d=JSON.parse('{"title":"Grafana为Dashboard添加独立权限控制","description":"","frontmatter":{"title":"Grafana为Dashboard添加独立权限控制","categories":"Grafana","tags":["Grafana权限控制"],"date":"2022-09-30T14:07:17.000Z"},"headers":[{"level":2,"title":"权限概览","slug":"权限概览","link":"#权限概览","children":[]},{"level":2,"title":"Dashboard和Folder权限","slug":"dashboard和folder权限","link":"#dashboard和folder权限","children":[{"level":3,"title":"添加Team","slug":"添加team","link":"#添加team","children":[]}]}],"relativePath":"pages/posts/Grafana为Dashboard添加独立权限控制.md","path":"/Users/vlinux/vlinux/blog/valaxy/vlinux.github.io/pages/posts/Grafana为Dashboard添加独立权限控制.md","lastUpdated":1671090556000}'),f={name:"pages/posts/Grafana为Dashboard添加独立权限控制.md",data(){return{data:d,frontmatter:d.frontmatter}},setup(){g("pageData",d)}},_=a("p",null,"Grafana作为一款开源的度量分析与可视化套件，已经得到了大家的认可并被广泛使用，他可用于基础设施的时序监控数据展示，应用程序数据分析可视化，另外在包括气象、家庭自动化和过程控制等其他领域也使用广泛。Grafana支持Mysql、Elasticsearch、Prometheus、InfluxDB等众多数据源，每个数据源都有一个特定的查询编辑器，可以根据自己的业务需要，撰写多种表达式，绘制多种数据展示图表。但有时你绘制的图表信息，如若涉及敏感信息，不想被所有人看到的时候，该怎么办呢？",-1),b={id:"权限概览",tabindex:"-1"},v=a("p",null,"假如你的Grafana接入了登陆控制，无论是采用Grafana自带的权限控制，还是启用了Ldap认证，默认情况下Dashboard对所有人的权限都是可读的；总结Grafana的用户权限受以下几方面因素影响：",-1),w=a("ul",null,[a("li",null,[a("code",null,"Organization Role"),e(" (Admin, Editor, Viewer)；即全局组织角色")]),a("li",null,[e("Via "),a("code",null,"Team"),e(" memberships where the Team has been assigned specific permissions. 即小组权限")]),a("li",null,[e("Via permissions assigned directly to user (on "),a("code",null,"folders"),e(", "),a("code",null,"dashboards"),e(", "),a("code",null,"data sources"),e("). 即针对Folder、Dashboard、Data Source特意为某用户分配的权限")]),a("li",null,"The Grafana Admin (i.e. Super Admin) user flag. 超级管理员权限")],-1),x=a("p",null,[e("为单个Dashboard配置独立权限控制，可在”Dashboard settings”–> “Permissions”–>“Add Permission”，为某用户或小组添加权限；同时Dashboard的权限是继承自所在"),a("strong",null,"Folder"),e("的权限，所以你会看到部分已有权限后面有一个小锁的标志，代表权限不能修改，如若修改，只能通过修改对应Folder的权限；也就是说，"),a("strong",null,"所谓Grafana Dashboard的权限控制，即Folder(文件夹)的权限控制"),e("；")],-1),D=a("p",null,[a("img",{src:"https://cos.vlinux.cn/www-vlinux-cn-blog-img/38f3429a32fc5fc.jpg#mirages-width=800&mirages-height=222&mirages-cdn-type=5",alt:"img"})],-1),T={id:"dashboard和folder权限",tabindex:"-1"},G=a("p",null,"为某个Dashboard添加权限控制的操作示例",-1),y=a("p",null,[a("img",{src:"https://cos.vlinux.cn/www-vlinux-cn-blog-img/ee4865322bfa686.jpg#mirages-width=800&mirages-height=340&mirages-cdn-type=5",alt:"img"})],-1),$=a("p",null,[e("如上图所示，在"),a("code",null,"Folder"),e("的"),a("code",null,"Manage"),e("配置项中，可以在这里删除此文件夹的默认角色，然后针对某个用户或小组自定义权限；")],-1),F={id:"添加team",tabindex:"-1"},V=a("p",null,[a("code",null,"Configuration"),e("-> "),a("code",null,"Teams"),e("–> "),a("code",null,"Add Team"),e("，输入Team名称，即可创建一个新Team；这里我创建了一个名为：“TestReadOnly”的新Team；")],-1),j=a("p",null,[a("img",{src:"https://cos.vlinux.cn/www-vlinux-cn-blog-img/9dd85b57cf27cd7.jpg#mirages-width=800&mirages-height=234&mirages-cdn-type=5",alt:"img"})],-1),A=a("p",null,"添加Team User",-1),O=a("p",null,[e("鼠标点击刚才创建好的Team，"),a("code",null,"Team Members"),e("处"),a("code",null,"Add member"),e("可添加用户到此Team中：")],-1),k=a("p",null,[a("img",{src:"https://cos.vlinux.cn/www-vlinux-cn-blog-img/a12a79454f48fcd.jpg#mirages-width=800&mirages-height=332&mirages-cdn-type=5",alt:"img"})],-1),E={id:"为team配置dashboard权限",tabindex:"-1"},R=a("p",null,[e("找到"),a("code",null,"Dashboard settings"),e("或文件夹管理，找到"),a("code",null,"Permissions"),e("配置，"),a("code",null,"Add Permission"),e("添加权限，给‘“TestReadOnly”组添加“View”的权限，其他权限删除；这样配置后，"),a("strong",null,"“TestReadyOnly”组中的用户将具有只读权限，而不在此组中的用户则无权限访问"),e("(超级管理员用户的权限不可删除)；配置”Edit”等权限的方法与此类似。")],-1),P=a("p",null,[a("img",{src:"https://cos.vlinux.cn/www-vlinux-cn-blog-img/ac8a3b58bcb53c1.jpg#mirages-width=800&mirages-height=288&mirages-cdn-type=5",alt:"img"})],-1),N=a("p",null,"权限级别",-1),S=a("p",null,[e("Grafana的权限级别主要有三种："),a("strong",null,"Admin"),e(" > "),a("strong",null,"Edit"),e(" > "),a("strong",null,"View")],-1),U=a("p",null,[a("strong",null,"注意事项：")],-1),X=a("ol",null,[a("li",null,[e("不能覆盖具有"),a("code",null,"组织管理员"),e("角色的用户权限")]),a("li",null,"如果存在具有较高权限级别的规规存在，则低权限级别的权限规则将不生效")],-1),B=a("p",null,[e("比如，这里存在一个文件夹FolderX，如果该文件夹对所有人只读且不可编辑，那么你可以定义一个只读Team，假设名为”ReadOnly”；你已经将包括“xujpxm”在内的几个用户添加到“ReadOnly”组中；这时你将”ReadOnly” Team赋予FolderX文件夹“View”权限，同时删除了“Edit”/”Admin”权限；那么这时在“ReadOnly” Team里的用户将对FolderX文件夹只可读，不可编辑；正常情况下到这一步针对单个文件夹的权限控制已经达到。但需要注意的是，假设“xujpxm”用户也具有管理员权限，权限级别高于“View”，根据"),a("code",null,"注意事项"),e("1，所以”xujpxm”用户对“FolderX“”文件夹还是可编辑和管理的；第二种情况，假如还有一个“EditGroup” Team，FolderX赋予了其“Edit”权限，但同时用户“xujpxm”(非超级管理员用户)也在其中，那么这时该用户对此文件夹同时有“Edit”和“View”权限，根据"),a("code",null,"注意事项2"),e("，”xujpxm”用户对此文件夹拥有的是应该“Edit”权限。")],-1);function M(n,C,J,L,i,Z){const l=p,r=m;return u(),c(r,{frontmatter:i.frontmatter,data:i.data},{"main-content-md":s(()=>[_,a("h2",b,[e("权限概览 "),o(l,{class:"header-anchor",href:"#权限概览","aria-hidden":"true"},{default:s(()=>[e("#")]),_:1})]),v,w,x,D,a("h2",T,[e("Dashboard和Folder权限 "),o(l,{class:"header-anchor",href:"#dashboard和folder权限","aria-hidden":"true"},{default:s(()=>[e("#")]),_:1})]),G,y,$,a("h3",F,[e("添加Team "),o(l,{class:"header-anchor",href:"#添加team","aria-hidden":"true"},{default:s(()=>[e("#")]),_:1})]),V,j,A,O,k,a("h4",E,[e("为Team配置Dashboard权限 "),o(l,{class:"header-anchor",href:"#为team配置dashboard权限","aria-hidden":"true"},{default:s(()=>[e("#")]),_:1})]),R,P,N,S,U,X,B]),"main-header":s(()=>[t(n.$slots,"main-header")]),"main-header-after":s(()=>[t(n.$slots,"main-header-after")]),"main-nav":s(()=>[t(n.$slots,"main-nav")]),"main-content":s(()=>[t(n.$slots,"main-content")]),"main-content-after":s(()=>[t(n.$slots,"main-content-after")]),"main-nav-before":s(()=>[t(n.$slots,"main-nav-before")]),"main-nav-after":s(()=>[t(n.$slots,"main-nav-after")]),comment:s(()=>[t(n.$slots,"comment")]),footer:s(()=>[t(n.$slots,"footer")]),aside:s(()=>[t(n.$slots,"aside")]),"aside-custom":s(()=>[t(n.$slots,"aside-custom")]),default:s(()=>[t(n.$slots,"default")]),_:3},8,["frontmatter","data"])}const W=h(f,[["render",M]]);export{Q as __pageData,W as default};
