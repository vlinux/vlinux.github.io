import{_ as r}from"./ValaxyMain.vue_vue_type_style_index_0_lang.1aa046e0.js";import{_ as d,c,w as t,o as h,r as l,g as e,R as n,p as _}from"./app.f8763b1f.js";import"./YunFooter.vue_vue_type_script_setup_true_lang.9e45df7a.js";import"./YunCard.vue_vue_type_style_index_0_lang.ee20fc38.js";import"./YunPageHeader.vue_vue_type_script_setup_true_lang.3a09cd11.js";const ia=JSON.parse('{"title":"ELK\u65E5\u5FD7\u6536\u96C6\u7CFB\u7EDF\u6982\u62EC","description":"","frontmatter":{"title":"ELK\u65E5\u5FD7\u6536\u96C6\u7CFB\u7EDF\u6982\u62EC","categories":"DevOps","tags":["ELK","filebeat","Kibana","\u65E5\u5FD7\u6536\u96C6"],"date":"2020-03-11T09:45:00.000Z"},"headers":[{"level":2,"title":"3.1 \u5B98\u65B9\u5730\u5740","slug":"_3-1-\u5B98\u65B9\u5730\u5740","link":"#_3-1-\u5B98\u65B9\u5730\u5740","children":[]},{"level":2,"title":"3.2 \u5B89\u88C5\u914D\u7F6Ejava","slug":"_3-2-\u5B89\u88C5\u914D\u7F6Ejava","link":"#_3-2-\u5B89\u88C5\u914D\u7F6Ejava","children":[]},{"level":2,"title":"3.3 \u66F4\u65B0\u65F6\u95F4","slug":"_3-3-\u66F4\u65B0\u65F6\u95F4","link":"#_3-3-\u66F4\u65B0\u65F6\u95F4","children":[]},{"level":2,"title":"3.4 \u5B89\u88C5\u914D\u7F6Eelasticsearch","slug":"_3-4-\u5B89\u88C5\u914D\u7F6Eelasticsearch","link":"#_3-4-\u5B89\u88C5\u914D\u7F6Eelasticsearch","children":[{"level":3,"title":"3.4.1 \u76F8\u5173\u914D\u7F6E\u76EE\u5F55\u53CA\u914D\u7F6E\u6587\u4EF6","slug":"_3-4-1-\u76F8\u5173\u914D\u7F6E\u76EE\u5F55\u53CA\u914D\u7F6E\u6587\u4EF6","link":"#_3-4-1-\u76F8\u5173\u914D\u7F6E\u76EE\u5F55\u53CA\u914D\u7F6E\u6587\u4EF6","children":[]},{"level":3,"title":"3.4.2 ES\u914D\u7F6E\u6587\u4EF6\u89E3\u8BFB","slug":"_3-4-2-es\u914D\u7F6E\u6587\u4EF6\u89E3\u8BFB","link":"#_3-4-2-es\u914D\u7F6E\u6587\u4EF6\u89E3\u8BFB","children":[]},{"level":3,"title":"3.4.3 \u542F\u52A8\u5931\u8D25\u62A5\u9519","slug":"_3-4-3-\u542F\u52A8\u5931\u8D25\u62A5\u9519","link":"#_3-4-3-\u542F\u52A8\u5931\u8D25\u62A5\u9519","children":[]},{"level":3,"title":"3.4.4 \u9501\u5B9A\u5185\u5B58\u5931\u8D25\u89E3\u51B3\u65B9\u6848","slug":"_3-4-4-\u9501\u5B9A\u5185\u5B58\u5931\u8D25\u89E3\u51B3\u65B9\u6848","link":"#_3-4-4-\u9501\u5B9A\u5185\u5B58\u5931\u8D25\u89E3\u51B3\u65B9\u6848","children":[]},{"level":3,"title":"3.4.5 \u68C0\u67E5\u542F\u52A8\u662F\u5426\u6210\u529F","slug":"_3-4-5-\u68C0\u67E5\u542F\u52A8\u662F\u5426\u6210\u529F","link":"#_3-4-5-\u68C0\u67E5\u542F\u52A8\u662F\u5426\u6210\u529F","children":[]}]},{"level":2,"title":"3.5 \u670D\u52A1\u6A21\u5F0F\u5B89\u88C5\u914D\u7F6Ees-head\u63D2\u4EF6","slug":"_3-5-\u670D\u52A1\u6A21\u5F0F\u5B89\u88C5\u914D\u7F6Ees-head\u63D2\u4EF6","link":"#_3-5-\u670D\u52A1\u6A21\u5F0F\u5B89\u88C5\u914D\u7F6Ees-head\u63D2\u4EF6","children":[{"level":3,"title":"3.5.1 \u63D2\u4EF6\u5B98\u65B9\u5730\u5740","slug":"_3-5-1-\u63D2\u4EF6\u5B98\u65B9\u5730\u5740","link":"#_3-5-1-\u63D2\u4EF6\u5B98\u65B9\u5730\u5740","children":[]},{"level":3,"title":"3.5.2 \u4F7F\u7528docker\u90E8\u7F72elasticsearch-head","slug":"_3-5-2-\u4F7F\u7528docker\u90E8\u7F72elasticsearch-head","link":"#_3-5-2-\u4F7F\u7528docker\u90E8\u7F72elasticsearch-head","children":[]},{"level":3,"title":"3.5.3 \u4F7F\u7528nodejs\u7F16\u8BD1\u5B89\u88C5","slug":"_3-5-3-\u4F7F\u7528nodejs\u7F16\u8BD1\u5B89\u88C5","link":"#_3-5-3-\u4F7F\u7528nodejs\u7F16\u8BD1\u5B89\u88C5","children":[]},{"level":3,"title":"3.5.4 \u4FEE\u6539ES\u914D\u7F6E\u6587\u4EF6\u652F\u6301\u8DE8\u57DF","slug":"_3-5-4-\u4FEE\u6539es\u914D\u7F6E\u6587\u4EF6\u652F\u6301\u8DE8\u57DF","link":"#_3-5-4-\u4FEE\u6539es\u914D\u7F6E\u6587\u4EF6\u652F\u6301\u8DE8\u57DF","children":[]},{"level":3,"title":"3.5.5 \u7F51\u9875\u8BBF\u95EE","slug":"_3-5-5-\u7F51\u9875\u8BBF\u95EE","link":"#_3-5-5-\u7F51\u9875\u8BBF\u95EE","children":[]}]},{"level":2,"title":"3.6 \u8C37\u6B4C\u6D4F\u89C8\u5668\u63D2\u4EF6\u5F62\u5F0F\u5B89\u88C5es-head","slug":"_3-6-\u8C37\u6B4C\u6D4F\u89C8\u5668\u63D2\u4EF6\u5F62\u5F0F\u5B89\u88C5es-head","link":"#_3-6-\u8C37\u6B4C\u6D4F\u89C8\u5668\u63D2\u4EF6\u5F62\u5F0F\u5B89\u88C5es-head","children":[]},{"level":2,"title":"3.7 \u5B89\u88C5\u914D\u7F6Ekibana","slug":"_3-7-\u5B89\u88C5\u914D\u7F6Ekibana","link":"#_3-7-\u5B89\u88C5\u914D\u7F6Ekibana","children":[{"level":3,"title":"3.7.1 \u5B89\u88C5\u914D\u7F6Ekibana","slug":"_3-7-1-\u5B89\u88C5\u914D\u7F6Ekibana","link":"#_3-7-1-\u5B89\u88C5\u914D\u7F6Ekibana","children":[]}]},{"level":2,"title":"3.8 \u5B89\u88C5filebeat\u548Clogstash","slug":"_3-8-\u5B89\u88C5filebeat\u548Clogstash","link":"#_3-8-\u5B89\u88C5filebeat\u548Clogstash","children":[]},{"level":2,"title":"3.9 docker\u5B89\u88C5elk","slug":"_3-9-docker\u5B89\u88C5elk","link":"#_3-9-docker\u5B89\u88C5elk","children":[]},{"level":2,"title":"4.1 \u6536\u96C6nginx\u65E5\u5FD7","slug":"_4-1-\u6536\u96C6nginx\u65E5\u5FD7","link":"#_4-1-\u6536\u96C6nginx\u65E5\u5FD7","children":[{"level":3,"title":"4.1.1 \u5B89\u88C5nginx\u548Cab\u5DE5\u5177","slug":"_4-1-1-\u5B89\u88C5nginx\u548Cab\u5DE5\u5177","link":"#_4-1-1-\u5B89\u88C5nginx\u548Cab\u5DE5\u5177","children":[]},{"level":3,"title":"4.1.2 \u542F\u52A8\u6D4B\u8BD5","slug":"_4-1-2-\u542F\u52A8\u6D4B\u8BD5","link":"#_4-1-2-\u542F\u52A8\u6D4B\u8BD5","children":[]},{"level":3,"title":"4.1.3 \u67E5\u770B\u65E5\u5FD7","slug":"_4-1-3-\u67E5\u770B\u65E5\u5FD7","link":"#_4-1-3-\u67E5\u770B\u65E5\u5FD7","children":[]},{"level":3,"title":"4.1.4 \u914D\u7F6Efilebeat\u6536\u96C6\u666E\u901A\u65E5\u5FD7","slug":"_4-1-4-\u914D\u7F6Efilebeat\u6536\u96C6\u666E\u901A\u65E5\u5FD7","link":"#_4-1-4-\u914D\u7F6Efilebeat\u6536\u96C6\u666E\u901A\u65E5\u5FD7","children":[]},{"level":3,"title":"4.1.5 kibana\u914D\u7F6E","slug":"_4-1-5-kibana\u914D\u7F6E","link":"#_4-1-5-kibana\u914D\u7F6E","children":[]},{"level":3,"title":"4.1.6 \u4FEE\u6539nginx\u65E5\u5FD7\u4E3Ajson\u683C\u5F0F","slug":"_4-1-6-\u4FEE\u6539nginx\u65E5\u5FD7\u4E3Ajson\u683C\u5F0F","link":"#_4-1-6-\u4FEE\u6539nginx\u65E5\u5FD7\u4E3Ajson\u683C\u5F0F","children":[]},{"level":3,"title":"4.1.7 \u67E5\u770B\u65E5\u5FD7\u662F\u5426\u4E3Ajson\u683C\u5F0F","slug":"_4-1-7-\u67E5\u770B\u65E5\u5FD7\u662F\u5426\u4E3Ajson\u683C\u5F0F","link":"#_4-1-7-\u67E5\u770B\u65E5\u5FD7\u662F\u5426\u4E3Ajson\u683C\u5F0F","children":[]},{"level":3,"title":"4.1.8 \u6536\u96C6\u591A\u4E2A\u65E5\u5FD7\u5E76\u5206\u7C7B\u521B\u5EFA\u7D22\u5F15","slug":"_4-1-8-\u6536\u96C6\u591A\u4E2A\u65E5\u5FD7\u5E76\u5206\u7C7B\u521B\u5EFA\u7D22\u5F15","link":"#_4-1-8-\u6536\u96C6\u591A\u4E2A\u65E5\u5FD7\u5E76\u5206\u7C7B\u521B\u5EFA\u7D22\u5F15","children":[]}]},{"level":2,"title":"4.2 \u6536\u96C6tomcat\u65E5\u5FD7","slug":"_4-2-\u6536\u96C6tomcat\u65E5\u5FD7","link":"#_4-2-\u6536\u96C6tomcat\u65E5\u5FD7","children":[{"level":3,"title":"4.2.1 \u5B89\u88C5tomcat","slug":"_4-2-1-\u5B89\u88C5tomcat","link":"#_4-2-1-\u5B89\u88C5tomcat","children":[]},{"level":3,"title":"4.2.2 \u542F\u52A8\u68C0\u67E5","slug":"_4-2-2-\u542F\u52A8\u68C0\u67E5","link":"#_4-2-2-\u542F\u52A8\u68C0\u67E5","children":[]},{"level":3,"title":"4.2.3 \u8BBF\u95EE\u6D4B\u8BD5","slug":"_4-2-3-\u8BBF\u95EE\u6D4B\u8BD5","link":"#_4-2-3-\u8BBF\u95EE\u6D4B\u8BD5","children":[]},{"level":3,"title":"4.2.4 \u4FEE\u6539\u65E5\u5FD7\u4E3Ajson\u683C\u5F0F","slug":"_4-2-4-\u4FEE\u6539\u65E5\u5FD7\u4E3Ajson\u683C\u5F0F","link":"#_4-2-4-\u4FEE\u6539\u65E5\u5FD7\u4E3Ajson\u683C\u5F0F","children":[]},{"level":3,"title":"4.2.5 \u91CD\u542F\u786E\u8BA4\u65E5\u5FD7\u662F\u5426\u4E3Ajson\u683C\u5F0F","slug":"_4-2-5-\u91CD\u542F\u786E\u8BA4\u65E5\u5FD7\u662F\u5426\u4E3Ajson\u683C\u5F0F","link":"#_4-2-5-\u91CD\u542F\u786E\u8BA4\u65E5\u5FD7\u662F\u5426\u4E3Ajson\u683C\u5F0F","children":[]},{"level":3,"title":"4.2.6 filebeat\u914D\u7F6E","slug":"_4-2-6-filebeat\u914D\u7F6E","link":"#_4-2-6-filebeat\u914D\u7F6E","children":[]},{"level":3,"title":"4.2.7 \u914D\u7F6Etomcat\u6536\u96C6\u591A\u4E2A\u57DF\u540D\u7684\u65E5\u5FD7","slug":"_4-2-7-\u914D\u7F6Etomcat\u6536\u96C6\u591A\u4E2A\u57DF\u540D\u7684\u65E5\u5FD7","link":"#_4-2-7-\u914D\u7F6Etomcat\u6536\u96C6\u591A\u4E2A\u57DF\u540D\u7684\u65E5\u5FD7","children":[]}]},{"level":2,"title":"4.3 \u6536\u96C6java\u65E5\u5FD7","slug":"_4-3-\u6536\u96C6java\u65E5\u5FD7","link":"#_4-3-\u6536\u96C6java\u65E5\u5FD7","children":[{"level":3,"title":"4.3.1 \u5B98\u65B9\u5730\u5740","slug":"_4-3-1-\u5B98\u65B9\u5730\u5740","link":"#_4-3-1-\u5B98\u65B9\u5730\u5740","children":[]},{"level":3,"title":"4.3.2 filebeat\u914D\u7F6E","slug":"_4-3-2-filebeat\u914D\u7F6E","link":"#_4-3-2-filebeat\u914D\u7F6E","children":[]}]},{"level":2,"title":"4.4 \u6536\u96C6docker\u65E5\u5FD7","slug":"_4-4-\u6536\u96C6docker\u65E5\u5FD7","link":"#_4-4-\u6536\u96C6docker\u65E5\u5FD7","children":[{"level":3,"title":"4.4.1 \u5B89\u88C5docker","slug":"_4-4-1-\u5B89\u88C5docker","link":"#_4-4-1-\u5B89\u88C5docker","children":[]},{"level":3,"title":"4.4.2 \u8FD0\u884Cnginx\u955C\u50CF","slug":"_4-4-2-\u8FD0\u884Cnginx\u955C\u50CF","link":"#_4-4-2-\u8FD0\u884Cnginx\u955C\u50CF","children":[]},{"level":3,"title":"4.4.3 \u914D\u7F6Efilebeat\u6536\u96C6\u5355\u4E2Adocker\u65E5\u5FD7","slug":"_4-4-3-\u914D\u7F6Efilebeat\u6536\u96C6\u5355\u4E2Adocker\u65E5\u5FD7","link":"#_4-4-3-\u914D\u7F6Efilebeat\u6536\u96C6\u5355\u4E2Adocker\u65E5\u5FD7","children":[]},{"level":3,"title":"4.4.4 \u4F7F\u7528\u901A\u914D\u7B26\u6536\u96C6\u6240\u6709\u5BB9\u5668\u7684\u65E5\u5FD7","slug":"_4-4-4-\u4F7F\u7528\u901A\u914D\u7B26\u6536\u96C6\u6240\u6709\u5BB9\u5668\u7684\u65E5\u5FD7","link":"#_4-4-4-\u4F7F\u7528\u901A\u914D\u7B26\u6536\u96C6\u6240\u6709\u5BB9\u5668\u7684\u65E5\u5FD7","children":[]},{"level":3,"title":"4.4.5 \u914D\u7F6Efilebeat\u901A\u8FC7\u6807\u7B7E\u6536\u96C6\u591A\u4E2A\u5BB9\u5668\u65E5\u5FD7","slug":"_4-4-5-\u914D\u7F6Efilebeat\u901A\u8FC7\u6807\u7B7E\u6536\u96C6\u591A\u4E2A\u5BB9\u5668\u65E5\u5FD7","link":"#_4-4-5-\u914D\u7F6Efilebeat\u901A\u8FC7\u6807\u7B7E\u6536\u96C6\u591A\u4E2A\u5BB9\u5668\u65E5\u5FD7","children":[]},{"level":3,"title":"4.4.6 \u914D\u7F6Efilebeat\u901A\u8FC7\u670D\u52A1\u7C7B\u578B\u548C\u65E5\u5FD7\u7C7B\u578B\u591A\u6761\u4EF6\u521B\u5EFA\u4E0D\u540C\u7D22\u5F15","slug":"_4-4-6-\u914D\u7F6Efilebeat\u901A\u8FC7\u670D\u52A1\u7C7B\u578B\u548C\u65E5\u5FD7\u7C7B\u578B\u591A\u6761\u4EF6\u521B\u5EFA\u4E0D\u540C\u7D22\u5F15","link":"#_4-4-6-\u914D\u7F6Efilebeat\u901A\u8FC7\u670D\u52A1\u7C7B\u578B\u548C\u65E5\u5FD7\u7C7B\u578B\u591A\u6761\u4EF6\u521B\u5EFA\u4E0D\u540C\u7D22\u5F15","children":[]},{"level":3,"title":"4.4.7 \u9A8C\u8BC1\u63D0\u4EA4\u65B0\u955C\u50CF\u8FD0\u884C\u540E\u65E5\u5FD7\u6536\u96C6\u60C5\u51B5","slug":"_4-4-7-\u9A8C\u8BC1\u63D0\u4EA4\u65B0\u955C\u50CF\u8FD0\u884C\u540E\u65E5\u5FD7\u6536\u96C6\u60C5\u51B5","link":"#_4-4-7-\u9A8C\u8BC1\u63D0\u4EA4\u65B0\u955C\u50CF\u8FD0\u884C\u540E\u65E5\u5FD7\u6536\u96C6\u60C5\u51B5","children":[]},{"level":3,"title":"4.4.8 \u4FEE\u6539docker\u5BB9\u5668\u5185\u65E5\u5FD7\u7C7B\u578B\u4E3Ajson","slug":"_4-4-8-\u4FEE\u6539docker\u5BB9\u5668\u5185\u65E5\u5FD7\u7C7B\u578B\u4E3Ajson","link":"#_4-4-8-\u4FEE\u6539docker\u5BB9\u5668\u5185\u65E5\u5FD7\u7C7B\u578B\u4E3Ajson","children":[]}]},{"level":2,"title":"5.1 \u5B98\u65B9\u7F51\u5740","slug":"_5-1-\u5B98\u65B9\u7F51\u5740","link":"#_5-1-\u5B98\u65B9\u7F51\u5740","children":[]},{"level":2,"title":"5.2 \u4F7F\u7528\u6A21\u7248\u914D\u7F6Enginx\u6B63\u5E38\u65E5\u5FD7","slug":"_5-2-\u4F7F\u7528\u6A21\u7248\u914D\u7F6Enginx\u6B63\u5E38\u65E5\u5FD7","link":"#_5-2-\u4F7F\u7528\u6A21\u7248\u914D\u7F6Enginx\u6B63\u5E38\u65E5\u5FD7","children":[{"level":3,"title":"5.2.1 filebeat\u914D\u7F6E\u6587\u4EF6","slug":"_5-2-1-filebeat\u914D\u7F6E\u6587\u4EF6","link":"#_5-2-1-filebeat\u914D\u7F6E\u6587\u4EF6","children":[]},{"level":3,"title":"5.2.2 filebeat modules\u914D\u7F6E","slug":"_5-2-2-filebeat-modules\u914D\u7F6E","link":"#_5-2-2-filebeat-modules\u914D\u7F6E","children":[]}]},{"level":2,"title":"5.3 \u4F7F\u7528\u6A21\u5757\u6536\u96C6\u7CFB\u7EDF\u65E5\u5FD7message\u548Csecure\u65E5\u5FD7","slug":"_5-3-\u4F7F\u7528\u6A21\u5757\u6536\u96C6\u7CFB\u7EDF\u65E5\u5FD7message\u548Csecure\u65E5\u5FD7","link":"#_5-3-\u4F7F\u7528\u6A21\u5757\u6536\u96C6\u7CFB\u7EDF\u65E5\u5FD7message\u548Csecure\u65E5\u5FD7","children":[]},{"level":2,"title":"5.4 \u5BFC\u5165kibana\u89C6\u56FE","slug":"_5-4-\u5BFC\u5165kibana\u89C6\u56FE","link":"#_5-4-\u5BFC\u5165kibana\u89C6\u56FE","children":[]},{"level":2,"title":"5.5 \u4F7F\u7528\u6A21\u5757\u6536\u96C6mysql\u65E5\u5FD7\u548C\u6162\u65E5\u5FD7","slug":"_5-5-\u4F7F\u7528\u6A21\u5757\u6536\u96C6mysql\u65E5\u5FD7\u548C\u6162\u65E5\u5FD7","link":"#_5-5-\u4F7F\u7528\u6A21\u5757\u6536\u96C6mysql\u65E5\u5FD7\u548C\u6162\u65E5\u5FD7","children":[]},{"level":2,"title":"5.6 \u4F7F\u7528\u6A21\u5757\u6536\u96C6mongo\u65E5\u5FD7\u548Credis\u65E5\u5FD7","slug":"_5-6-\u4F7F\u7528\u6A21\u5757\u6536\u96C6mongo\u65E5\u5FD7\u548Credis\u65E5\u5FD7","link":"#_5-6-\u4F7F\u7528\u6A21\u5757\u6536\u96C6mongo\u65E5\u5FD7\u548Credis\u65E5\u5FD7","children":[]},{"level":2,"title":"6.1 \u4F7F\u7528\u5355\u53F0redis\u4F5C\u4E3A\u7F13\u5B58","slug":"_6-1-\u4F7F\u7528\u5355\u53F0redis\u4F5C\u4E3A\u7F13\u5B58","link":"#_6-1-\u4F7F\u7528\u5355\u53F0redis\u4F5C\u4E3A\u7F13\u5B58","children":[{"level":3,"title":"6.1.1 \u5B89\u88C5\u542F\u52A8\u6D4B\u8BD5redis","slug":"_6-1-1-\u5B89\u88C5\u542F\u52A8\u6D4B\u8BD5redis","link":"#_6-1-1-\u5B89\u88C5\u542F\u52A8\u6D4B\u8BD5redis","children":[]},{"level":3,"title":"6.1.2 \u914D\u7F6Enginx\u7684json\u65E5\u5FD7","slug":"_6-1-2-\u914D\u7F6Enginx\u7684json\u65E5\u5FD7","link":"#_6-1-2-\u914D\u7F6Enginx\u7684json\u65E5\u5FD7","children":[]},{"level":3,"title":"6.1.3 \u914D\u7F6Efilebeat\u5199\u5165\u5230\u4E0D\u540C\u7684key\u4E2D","slug":"_6-1-3-\u914D\u7F6Efilebeat\u5199\u5165\u5230\u4E0D\u540C\u7684key\u4E2D","link":"#_6-1-3-\u914D\u7F6Efilebeat\u5199\u5165\u5230\u4E0D\u540C\u7684key\u4E2D","children":[]},{"level":3,"title":"6.1.4 \u914D\u7F6Elogstash\u8BFB\u53D6\u4E0D\u540C\u7684key","slug":"_6-1-4-\u914D\u7F6Elogstash\u8BFB\u53D6\u4E0D\u540C\u7684key","link":"#_6-1-4-\u914D\u7F6Elogstash\u8BFB\u53D6\u4E0D\u540C\u7684key","children":[]},{"level":3,"title":"6.1.5 filebeat\u6536\u96C6\u65E5\u5FD7\u5199\u5165\u5230\u4E00\u4E2Akey\u4E2D","slug":"_6-1-5-filebeat\u6536\u96C6\u65E5\u5FD7\u5199\u5165\u5230\u4E00\u4E2Akey\u4E2D","link":"#_6-1-5-filebeat\u6536\u96C6\u65E5\u5FD7\u5199\u5165\u5230\u4E00\u4E2Akey\u4E2D","children":[]},{"level":3,"title":"6.1.6 logstash\u6839\u636Etag\u533A\u5206\u4E00\u4E2Akey\u91CC\u7684\u4E0D\u540C\u65E5\u5FD7","slug":"_6-1-6-logstash\u6839\u636Etag\u533A\u5206\u4E00\u4E2Akey\u91CC\u7684\u4E0D\u540C\u65E5\u5FD7","link":"#_6-1-6-logstash\u6839\u636Etag\u533A\u5206\u4E00\u4E2Akey\u91CC\u7684\u4E0D\u540C\u65E5\u5FD7","children":[]}]},{"level":2,"title":"6.2 \u4F7F\u7528nginx+keepalived\u4EE3\u7406\u591A\u53F0redis","slug":"_6-2-\u4F7F\u7528nginx-keepalived\u4EE3\u7406\u591A\u53F0redis","link":"#_6-2-\u4F7F\u7528nginx-keepalived\u4EE3\u7406\u591A\u53F0redis","children":[{"level":3,"title":"6.2.1 \u89E3\u51B3\u65B9\u6848\u4ECB\u7ECD","slug":"_6-2-1-\u89E3\u51B3\u65B9\u6848\u4ECB\u7ECD","link":"#_6-2-1-\u89E3\u51B3\u65B9\u6848\u4ECB\u7ECD","children":[]},{"level":3,"title":"6.2.2 nginx\u914D\u7F6E\u6587\u4EF6","slug":"_6-2-2-nginx\u914D\u7F6E\u6587\u4EF6","link":"#_6-2-2-nginx\u914D\u7F6E\u6587\u4EF6","children":[]},{"level":3,"title":"6.2.3 redis\u914D\u7F6E","slug":"_6-2-3-redis\u914D\u7F6E","link":"#_6-2-3-redis\u914D\u7F6E","children":[]},{"level":3,"title":"6.2.4 \u6A21\u62DF\u6545\u969C\u6D4B\u8BD5","slug":"_6-2-4-\u6A21\u62DF\u6545\u969C\u6D4B\u8BD5","link":"#_6-2-4-\u6A21\u62DF\u6545\u969C\u6D4B\u8BD5","children":[]},{"level":3,"title":"6.2.5 logstash\u914D\u7F6E","slug":"_6-2-5-logstash\u914D\u7F6E","link":"#_6-2-5-logstash\u914D\u7F6E","children":[]},{"level":3,"title":"6.2.6 \u4F7F\u7528supervisor\u6279\u91CF\u7BA1\u7406\u591A\u4E2Alogstash\u8FDB\u7A0B","slug":"_6-2-6-\u4F7F\u7528supervisor\u6279\u91CF\u7BA1\u7406\u591A\u4E2Alogstash\u8FDB\u7A0B","link":"#_6-2-6-\u4F7F\u7528supervisor\u6279\u91CF\u7BA1\u7406\u591A\u4E2Alogstash\u8FDB\u7A0B","children":[]}]},{"level":2,"title":"6.3 \u4F7F\u7528kafka\u4F5C\u4E3A\u7F13\u5B58","slug":"_6-3-\u4F7F\u7528kafka\u4F5C\u4E3A\u7F13\u5B58","link":"#_6-3-\u4F7F\u7528kafka\u4F5C\u4E3A\u7F13\u5B58","children":[{"level":3,"title":"6.3.1 \u4ECB\u7ECD","slug":"_6-3-1-\u4ECB\u7ECD","link":"#_6-3-1-\u4ECB\u7ECD","children":[]},{"level":3,"title":"6.3.2 zookeeper\u5B89\u88C5\u914D\u7F6E","slug":"_6-3-2-zookeeper\u5B89\u88C5\u914D\u7F6E","link":"#_6-3-2-zookeeper\u5B89\u88C5\u914D\u7F6E","children":[]},{"level":3,"title":"6.3.3 kafka\u5B89\u88C5\u914D\u7F6E","slug":"_6-3-3-kafka\u5B89\u88C5\u914D\u7F6E","link":"#_6-3-3-kafka\u5B89\u88C5\u914D\u7F6E","children":[]},{"level":3,"title":"6.3.4 kafka\u96C6\u7FA4\u6536\u53D1\u6D88\u606F\u6D4B\u8BD5","slug":"_6-3-4-kafka\u96C6\u7FA4\u6536\u53D1\u6D88\u606F\u6D4B\u8BD5","link":"#_6-3-4-kafka\u96C6\u7FA4\u6536\u53D1\u6D88\u606F\u6D4B\u8BD5","children":[]},{"level":3,"title":"6.3.5 filebeat\u914D\u7F6E","slug":"_6-3-5-filebeat\u914D\u7F6E","link":"#_6-3-5-filebeat\u914D\u7F6E","children":[]},{"level":3,"title":"6.3.6 logstash\u914D\u7F6E","slug":"_6-3-6-logstash\u914D\u7F6E","link":"#_6-3-6-logstash\u914D\u7F6E","children":[]}]}],"relativePath":"pages/posts/ELK\u65E5\u5FD7\u6536\u96C6\u7CFB\u7EDF\u6982\u62EC.md","path":"/Users/vlinux/vlinux/blog/valaxy/valaxy-vlinux/pages/posts/ELK\u65E5\u5FD7\u6536\u96C6\u7CFB\u7EDF\u6982\u62EC.md","lastUpdated":0}'),a=JSON.parse('{"title":"ELK\u65E5\u5FD7\u6536\u96C6\u7CFB\u7EDF\u6982\u62EC","description":"","frontmatter":{"title":"ELK\u65E5\u5FD7\u6536\u96C6\u7CFB\u7EDF\u6982\u62EC","categories":"DevOps","tags":["ELK","filebeat","Kibana","\u65E5\u5FD7\u6536\u96C6"],"date":"2020-03-11T09:45:00.000Z"},"headers":[{"level":2,"title":"3.1 \u5B98\u65B9\u5730\u5740","slug":"_3-1-\u5B98\u65B9\u5730\u5740","link":"#_3-1-\u5B98\u65B9\u5730\u5740","children":[]},{"level":2,"title":"3.2 \u5B89\u88C5\u914D\u7F6Ejava","slug":"_3-2-\u5B89\u88C5\u914D\u7F6Ejava","link":"#_3-2-\u5B89\u88C5\u914D\u7F6Ejava","children":[]},{"level":2,"title":"3.3 \u66F4\u65B0\u65F6\u95F4","slug":"_3-3-\u66F4\u65B0\u65F6\u95F4","link":"#_3-3-\u66F4\u65B0\u65F6\u95F4","children":[]},{"level":2,"title":"3.4 \u5B89\u88C5\u914D\u7F6Eelasticsearch","slug":"_3-4-\u5B89\u88C5\u914D\u7F6Eelasticsearch","link":"#_3-4-\u5B89\u88C5\u914D\u7F6Eelasticsearch","children":[{"level":3,"title":"3.4.1 \u76F8\u5173\u914D\u7F6E\u76EE\u5F55\u53CA\u914D\u7F6E\u6587\u4EF6","slug":"_3-4-1-\u76F8\u5173\u914D\u7F6E\u76EE\u5F55\u53CA\u914D\u7F6E\u6587\u4EF6","link":"#_3-4-1-\u76F8\u5173\u914D\u7F6E\u76EE\u5F55\u53CA\u914D\u7F6E\u6587\u4EF6","children":[]},{"level":3,"title":"3.4.2 ES\u914D\u7F6E\u6587\u4EF6\u89E3\u8BFB","slug":"_3-4-2-es\u914D\u7F6E\u6587\u4EF6\u89E3\u8BFB","link":"#_3-4-2-es\u914D\u7F6E\u6587\u4EF6\u89E3\u8BFB","children":[]},{"level":3,"title":"3.4.3 \u542F\u52A8\u5931\u8D25\u62A5\u9519","slug":"_3-4-3-\u542F\u52A8\u5931\u8D25\u62A5\u9519","link":"#_3-4-3-\u542F\u52A8\u5931\u8D25\u62A5\u9519","children":[]},{"level":3,"title":"3.4.4 \u9501\u5B9A\u5185\u5B58\u5931\u8D25\u89E3\u51B3\u65B9\u6848","slug":"_3-4-4-\u9501\u5B9A\u5185\u5B58\u5931\u8D25\u89E3\u51B3\u65B9\u6848","link":"#_3-4-4-\u9501\u5B9A\u5185\u5B58\u5931\u8D25\u89E3\u51B3\u65B9\u6848","children":[]},{"level":3,"title":"3.4.5 \u68C0\u67E5\u542F\u52A8\u662F\u5426\u6210\u529F","slug":"_3-4-5-\u68C0\u67E5\u542F\u52A8\u662F\u5426\u6210\u529F","link":"#_3-4-5-\u68C0\u67E5\u542F\u52A8\u662F\u5426\u6210\u529F","children":[]}]},{"level":2,"title":"3.5 \u670D\u52A1\u6A21\u5F0F\u5B89\u88C5\u914D\u7F6Ees-head\u63D2\u4EF6","slug":"_3-5-\u670D\u52A1\u6A21\u5F0F\u5B89\u88C5\u914D\u7F6Ees-head\u63D2\u4EF6","link":"#_3-5-\u670D\u52A1\u6A21\u5F0F\u5B89\u88C5\u914D\u7F6Ees-head\u63D2\u4EF6","children":[{"level":3,"title":"3.5.1 \u63D2\u4EF6\u5B98\u65B9\u5730\u5740","slug":"_3-5-1-\u63D2\u4EF6\u5B98\u65B9\u5730\u5740","link":"#_3-5-1-\u63D2\u4EF6\u5B98\u65B9\u5730\u5740","children":[]},{"level":3,"title":"3.5.2 \u4F7F\u7528docker\u90E8\u7F72elasticsearch-head","slug":"_3-5-2-\u4F7F\u7528docker\u90E8\u7F72elasticsearch-head","link":"#_3-5-2-\u4F7F\u7528docker\u90E8\u7F72elasticsearch-head","children":[]},{"level":3,"title":"3.5.3 \u4F7F\u7528nodejs\u7F16\u8BD1\u5B89\u88C5","slug":"_3-5-3-\u4F7F\u7528nodejs\u7F16\u8BD1\u5B89\u88C5","link":"#_3-5-3-\u4F7F\u7528nodejs\u7F16\u8BD1\u5B89\u88C5","children":[]},{"level":3,"title":"3.5.4 \u4FEE\u6539ES\u914D\u7F6E\u6587\u4EF6\u652F\u6301\u8DE8\u57DF","slug":"_3-5-4-\u4FEE\u6539es\u914D\u7F6E\u6587\u4EF6\u652F\u6301\u8DE8\u57DF","link":"#_3-5-4-\u4FEE\u6539es\u914D\u7F6E\u6587\u4EF6\u652F\u6301\u8DE8\u57DF","children":[]},{"level":3,"title":"3.5.5 \u7F51\u9875\u8BBF\u95EE","slug":"_3-5-5-\u7F51\u9875\u8BBF\u95EE","link":"#_3-5-5-\u7F51\u9875\u8BBF\u95EE","children":[]}]},{"level":2,"title":"3.6 \u8C37\u6B4C\u6D4F\u89C8\u5668\u63D2\u4EF6\u5F62\u5F0F\u5B89\u88C5es-head","slug":"_3-6-\u8C37\u6B4C\u6D4F\u89C8\u5668\u63D2\u4EF6\u5F62\u5F0F\u5B89\u88C5es-head","link":"#_3-6-\u8C37\u6B4C\u6D4F\u89C8\u5668\u63D2\u4EF6\u5F62\u5F0F\u5B89\u88C5es-head","children":[]},{"level":2,"title":"3.7 \u5B89\u88C5\u914D\u7F6Ekibana","slug":"_3-7-\u5B89\u88C5\u914D\u7F6Ekibana","link":"#_3-7-\u5B89\u88C5\u914D\u7F6Ekibana","children":[{"level":3,"title":"3.7.1 \u5B89\u88C5\u914D\u7F6Ekibana","slug":"_3-7-1-\u5B89\u88C5\u914D\u7F6Ekibana","link":"#_3-7-1-\u5B89\u88C5\u914D\u7F6Ekibana","children":[]}]},{"level":2,"title":"3.8 \u5B89\u88C5filebeat\u548Clogstash","slug":"_3-8-\u5B89\u88C5filebeat\u548Clogstash","link":"#_3-8-\u5B89\u88C5filebeat\u548Clogstash","children":[]},{"level":2,"title":"3.9 docker\u5B89\u88C5elk","slug":"_3-9-docker\u5B89\u88C5elk","link":"#_3-9-docker\u5B89\u88C5elk","children":[]},{"level":2,"title":"4.1 \u6536\u96C6nginx\u65E5\u5FD7","slug":"_4-1-\u6536\u96C6nginx\u65E5\u5FD7","link":"#_4-1-\u6536\u96C6nginx\u65E5\u5FD7","children":[{"level":3,"title":"4.1.1 \u5B89\u88C5nginx\u548Cab\u5DE5\u5177","slug":"_4-1-1-\u5B89\u88C5nginx\u548Cab\u5DE5\u5177","link":"#_4-1-1-\u5B89\u88C5nginx\u548Cab\u5DE5\u5177","children":[]},{"level":3,"title":"4.1.2 \u542F\u52A8\u6D4B\u8BD5","slug":"_4-1-2-\u542F\u52A8\u6D4B\u8BD5","link":"#_4-1-2-\u542F\u52A8\u6D4B\u8BD5","children":[]},{"level":3,"title":"4.1.3 \u67E5\u770B\u65E5\u5FD7","slug":"_4-1-3-\u67E5\u770B\u65E5\u5FD7","link":"#_4-1-3-\u67E5\u770B\u65E5\u5FD7","children":[]},{"level":3,"title":"4.1.4 \u914D\u7F6Efilebeat\u6536\u96C6\u666E\u901A\u65E5\u5FD7","slug":"_4-1-4-\u914D\u7F6Efilebeat\u6536\u96C6\u666E\u901A\u65E5\u5FD7","link":"#_4-1-4-\u914D\u7F6Efilebeat\u6536\u96C6\u666E\u901A\u65E5\u5FD7","children":[]},{"level":3,"title":"4.1.5 kibana\u914D\u7F6E","slug":"_4-1-5-kibana\u914D\u7F6E","link":"#_4-1-5-kibana\u914D\u7F6E","children":[]},{"level":3,"title":"4.1.6 \u4FEE\u6539nginx\u65E5\u5FD7\u4E3Ajson\u683C\u5F0F","slug":"_4-1-6-\u4FEE\u6539nginx\u65E5\u5FD7\u4E3Ajson\u683C\u5F0F","link":"#_4-1-6-\u4FEE\u6539nginx\u65E5\u5FD7\u4E3Ajson\u683C\u5F0F","children":[]},{"level":3,"title":"4.1.7 \u67E5\u770B\u65E5\u5FD7\u662F\u5426\u4E3Ajson\u683C\u5F0F","slug":"_4-1-7-\u67E5\u770B\u65E5\u5FD7\u662F\u5426\u4E3Ajson\u683C\u5F0F","link":"#_4-1-7-\u67E5\u770B\u65E5\u5FD7\u662F\u5426\u4E3Ajson\u683C\u5F0F","children":[]},{"level":3,"title":"4.1.8 \u6536\u96C6\u591A\u4E2A\u65E5\u5FD7\u5E76\u5206\u7C7B\u521B\u5EFA\u7D22\u5F15","slug":"_4-1-8-\u6536\u96C6\u591A\u4E2A\u65E5\u5FD7\u5E76\u5206\u7C7B\u521B\u5EFA\u7D22\u5F15","link":"#_4-1-8-\u6536\u96C6\u591A\u4E2A\u65E5\u5FD7\u5E76\u5206\u7C7B\u521B\u5EFA\u7D22\u5F15","children":[]}]},{"level":2,"title":"4.2 \u6536\u96C6tomcat\u65E5\u5FD7","slug":"_4-2-\u6536\u96C6tomcat\u65E5\u5FD7","link":"#_4-2-\u6536\u96C6tomcat\u65E5\u5FD7","children":[{"level":3,"title":"4.2.1 \u5B89\u88C5tomcat","slug":"_4-2-1-\u5B89\u88C5tomcat","link":"#_4-2-1-\u5B89\u88C5tomcat","children":[]},{"level":3,"title":"4.2.2 \u542F\u52A8\u68C0\u67E5","slug":"_4-2-2-\u542F\u52A8\u68C0\u67E5","link":"#_4-2-2-\u542F\u52A8\u68C0\u67E5","children":[]},{"level":3,"title":"4.2.3 \u8BBF\u95EE\u6D4B\u8BD5","slug":"_4-2-3-\u8BBF\u95EE\u6D4B\u8BD5","link":"#_4-2-3-\u8BBF\u95EE\u6D4B\u8BD5","children":[]},{"level":3,"title":"4.2.4 \u4FEE\u6539\u65E5\u5FD7\u4E3Ajson\u683C\u5F0F","slug":"_4-2-4-\u4FEE\u6539\u65E5\u5FD7\u4E3Ajson\u683C\u5F0F","link":"#_4-2-4-\u4FEE\u6539\u65E5\u5FD7\u4E3Ajson\u683C\u5F0F","children":[]},{"level":3,"title":"4.2.5 \u91CD\u542F\u786E\u8BA4\u65E5\u5FD7\u662F\u5426\u4E3Ajson\u683C\u5F0F","slug":"_4-2-5-\u91CD\u542F\u786E\u8BA4\u65E5\u5FD7\u662F\u5426\u4E3Ajson\u683C\u5F0F","link":"#_4-2-5-\u91CD\u542F\u786E\u8BA4\u65E5\u5FD7\u662F\u5426\u4E3Ajson\u683C\u5F0F","children":[]},{"level":3,"title":"4.2.6 filebeat\u914D\u7F6E","slug":"_4-2-6-filebeat\u914D\u7F6E","link":"#_4-2-6-filebeat\u914D\u7F6E","children":[]},{"level":3,"title":"4.2.7 \u914D\u7F6Etomcat\u6536\u96C6\u591A\u4E2A\u57DF\u540D\u7684\u65E5\u5FD7","slug":"_4-2-7-\u914D\u7F6Etomcat\u6536\u96C6\u591A\u4E2A\u57DF\u540D\u7684\u65E5\u5FD7","link":"#_4-2-7-\u914D\u7F6Etomcat\u6536\u96C6\u591A\u4E2A\u57DF\u540D\u7684\u65E5\u5FD7","children":[]}]},{"level":2,"title":"4.3 \u6536\u96C6java\u65E5\u5FD7","slug":"_4-3-\u6536\u96C6java\u65E5\u5FD7","link":"#_4-3-\u6536\u96C6java\u65E5\u5FD7","children":[{"level":3,"title":"4.3.1 \u5B98\u65B9\u5730\u5740","slug":"_4-3-1-\u5B98\u65B9\u5730\u5740","link":"#_4-3-1-\u5B98\u65B9\u5730\u5740","children":[]},{"level":3,"title":"4.3.2 filebeat\u914D\u7F6E","slug":"_4-3-2-filebeat\u914D\u7F6E","link":"#_4-3-2-filebeat\u914D\u7F6E","children":[]}]},{"level":2,"title":"4.4 \u6536\u96C6docker\u65E5\u5FD7","slug":"_4-4-\u6536\u96C6docker\u65E5\u5FD7","link":"#_4-4-\u6536\u96C6docker\u65E5\u5FD7","children":[{"level":3,"title":"4.4.1 \u5B89\u88C5docker","slug":"_4-4-1-\u5B89\u88C5docker","link":"#_4-4-1-\u5B89\u88C5docker","children":[]},{"level":3,"title":"4.4.2 \u8FD0\u884Cnginx\u955C\u50CF","slug":"_4-4-2-\u8FD0\u884Cnginx\u955C\u50CF","link":"#_4-4-2-\u8FD0\u884Cnginx\u955C\u50CF","children":[]},{"level":3,"title":"4.4.3 \u914D\u7F6Efilebeat\u6536\u96C6\u5355\u4E2Adocker\u65E5\u5FD7","slug":"_4-4-3-\u914D\u7F6Efilebeat\u6536\u96C6\u5355\u4E2Adocker\u65E5\u5FD7","link":"#_4-4-3-\u914D\u7F6Efilebeat\u6536\u96C6\u5355\u4E2Adocker\u65E5\u5FD7","children":[]},{"level":3,"title":"4.4.4 \u4F7F\u7528\u901A\u914D\u7B26\u6536\u96C6\u6240\u6709\u5BB9\u5668\u7684\u65E5\u5FD7","slug":"_4-4-4-\u4F7F\u7528\u901A\u914D\u7B26\u6536\u96C6\u6240\u6709\u5BB9\u5668\u7684\u65E5\u5FD7","link":"#_4-4-4-\u4F7F\u7528\u901A\u914D\u7B26\u6536\u96C6\u6240\u6709\u5BB9\u5668\u7684\u65E5\u5FD7","children":[]},{"level":3,"title":"4.4.5 \u914D\u7F6Efilebeat\u901A\u8FC7\u6807\u7B7E\u6536\u96C6\u591A\u4E2A\u5BB9\u5668\u65E5\u5FD7","slug":"_4-4-5-\u914D\u7F6Efilebeat\u901A\u8FC7\u6807\u7B7E\u6536\u96C6\u591A\u4E2A\u5BB9\u5668\u65E5\u5FD7","link":"#_4-4-5-\u914D\u7F6Efilebeat\u901A\u8FC7\u6807\u7B7E\u6536\u96C6\u591A\u4E2A\u5BB9\u5668\u65E5\u5FD7","children":[]},{"level":3,"title":"4.4.6 \u914D\u7F6Efilebeat\u901A\u8FC7\u670D\u52A1\u7C7B\u578B\u548C\u65E5\u5FD7\u7C7B\u578B\u591A\u6761\u4EF6\u521B\u5EFA\u4E0D\u540C\u7D22\u5F15","slug":"_4-4-6-\u914D\u7F6Efilebeat\u901A\u8FC7\u670D\u52A1\u7C7B\u578B\u548C\u65E5\u5FD7\u7C7B\u578B\u591A\u6761\u4EF6\u521B\u5EFA\u4E0D\u540C\u7D22\u5F15","link":"#_4-4-6-\u914D\u7F6Efilebeat\u901A\u8FC7\u670D\u52A1\u7C7B\u578B\u548C\u65E5\u5FD7\u7C7B\u578B\u591A\u6761\u4EF6\u521B\u5EFA\u4E0D\u540C\u7D22\u5F15","children":[]},{"level":3,"title":"4.4.7 \u9A8C\u8BC1\u63D0\u4EA4\u65B0\u955C\u50CF\u8FD0\u884C\u540E\u65E5\u5FD7\u6536\u96C6\u60C5\u51B5","slug":"_4-4-7-\u9A8C\u8BC1\u63D0\u4EA4\u65B0\u955C\u50CF\u8FD0\u884C\u540E\u65E5\u5FD7\u6536\u96C6\u60C5\u51B5","link":"#_4-4-7-\u9A8C\u8BC1\u63D0\u4EA4\u65B0\u955C\u50CF\u8FD0\u884C\u540E\u65E5\u5FD7\u6536\u96C6\u60C5\u51B5","children":[]},{"level":3,"title":"4.4.8 \u4FEE\u6539docker\u5BB9\u5668\u5185\u65E5\u5FD7\u7C7B\u578B\u4E3Ajson","slug":"_4-4-8-\u4FEE\u6539docker\u5BB9\u5668\u5185\u65E5\u5FD7\u7C7B\u578B\u4E3Ajson","link":"#_4-4-8-\u4FEE\u6539docker\u5BB9\u5668\u5185\u65E5\u5FD7\u7C7B\u578B\u4E3Ajson","children":[]}]},{"level":2,"title":"5.1 \u5B98\u65B9\u7F51\u5740","slug":"_5-1-\u5B98\u65B9\u7F51\u5740","link":"#_5-1-\u5B98\u65B9\u7F51\u5740","children":[]},{"level":2,"title":"5.2 \u4F7F\u7528\u6A21\u7248\u914D\u7F6Enginx\u6B63\u5E38\u65E5\u5FD7","slug":"_5-2-\u4F7F\u7528\u6A21\u7248\u914D\u7F6Enginx\u6B63\u5E38\u65E5\u5FD7","link":"#_5-2-\u4F7F\u7528\u6A21\u7248\u914D\u7F6Enginx\u6B63\u5E38\u65E5\u5FD7","children":[{"level":3,"title":"5.2.1 filebeat\u914D\u7F6E\u6587\u4EF6","slug":"_5-2-1-filebeat\u914D\u7F6E\u6587\u4EF6","link":"#_5-2-1-filebeat\u914D\u7F6E\u6587\u4EF6","children":[]},{"level":3,"title":"5.2.2 filebeat modules\u914D\u7F6E","slug":"_5-2-2-filebeat-modules\u914D\u7F6E","link":"#_5-2-2-filebeat-modules\u914D\u7F6E","children":[]}]},{"level":2,"title":"5.3 \u4F7F\u7528\u6A21\u5757\u6536\u96C6\u7CFB\u7EDF\u65E5\u5FD7message\u548Csecure\u65E5\u5FD7","slug":"_5-3-\u4F7F\u7528\u6A21\u5757\u6536\u96C6\u7CFB\u7EDF\u65E5\u5FD7message\u548Csecure\u65E5\u5FD7","link":"#_5-3-\u4F7F\u7528\u6A21\u5757\u6536\u96C6\u7CFB\u7EDF\u65E5\u5FD7message\u548Csecure\u65E5\u5FD7","children":[]},{"level":2,"title":"5.4 \u5BFC\u5165kibana\u89C6\u56FE","slug":"_5-4-\u5BFC\u5165kibana\u89C6\u56FE","link":"#_5-4-\u5BFC\u5165kibana\u89C6\u56FE","children":[]},{"level":2,"title":"5.5 \u4F7F\u7528\u6A21\u5757\u6536\u96C6mysql\u65E5\u5FD7\u548C\u6162\u65E5\u5FD7","slug":"_5-5-\u4F7F\u7528\u6A21\u5757\u6536\u96C6mysql\u65E5\u5FD7\u548C\u6162\u65E5\u5FD7","link":"#_5-5-\u4F7F\u7528\u6A21\u5757\u6536\u96C6mysql\u65E5\u5FD7\u548C\u6162\u65E5\u5FD7","children":[]},{"level":2,"title":"5.6 \u4F7F\u7528\u6A21\u5757\u6536\u96C6mongo\u65E5\u5FD7\u548Credis\u65E5\u5FD7","slug":"_5-6-\u4F7F\u7528\u6A21\u5757\u6536\u96C6mongo\u65E5\u5FD7\u548Credis\u65E5\u5FD7","link":"#_5-6-\u4F7F\u7528\u6A21\u5757\u6536\u96C6mongo\u65E5\u5FD7\u548Credis\u65E5\u5FD7","children":[]},{"level":2,"title":"6.1 \u4F7F\u7528\u5355\u53F0redis\u4F5C\u4E3A\u7F13\u5B58","slug":"_6-1-\u4F7F\u7528\u5355\u53F0redis\u4F5C\u4E3A\u7F13\u5B58","link":"#_6-1-\u4F7F\u7528\u5355\u53F0redis\u4F5C\u4E3A\u7F13\u5B58","children":[{"level":3,"title":"6.1.1 \u5B89\u88C5\u542F\u52A8\u6D4B\u8BD5redis","slug":"_6-1-1-\u5B89\u88C5\u542F\u52A8\u6D4B\u8BD5redis","link":"#_6-1-1-\u5B89\u88C5\u542F\u52A8\u6D4B\u8BD5redis","children":[]},{"level":3,"title":"6.1.2 \u914D\u7F6Enginx\u7684json\u65E5\u5FD7","slug":"_6-1-2-\u914D\u7F6Enginx\u7684json\u65E5\u5FD7","link":"#_6-1-2-\u914D\u7F6Enginx\u7684json\u65E5\u5FD7","children":[]},{"level":3,"title":"6.1.3 \u914D\u7F6Efilebeat\u5199\u5165\u5230\u4E0D\u540C\u7684key\u4E2D","slug":"_6-1-3-\u914D\u7F6Efilebeat\u5199\u5165\u5230\u4E0D\u540C\u7684key\u4E2D","link":"#_6-1-3-\u914D\u7F6Efilebeat\u5199\u5165\u5230\u4E0D\u540C\u7684key\u4E2D","children":[]},{"level":3,"title":"6.1.4 \u914D\u7F6Elogstash\u8BFB\u53D6\u4E0D\u540C\u7684key","slug":"_6-1-4-\u914D\u7F6Elogstash\u8BFB\u53D6\u4E0D\u540C\u7684key","link":"#_6-1-4-\u914D\u7F6Elogstash\u8BFB\u53D6\u4E0D\u540C\u7684key","children":[]},{"level":3,"title":"6.1.5 filebeat\u6536\u96C6\u65E5\u5FD7\u5199\u5165\u5230\u4E00\u4E2Akey\u4E2D","slug":"_6-1-5-filebeat\u6536\u96C6\u65E5\u5FD7\u5199\u5165\u5230\u4E00\u4E2Akey\u4E2D","link":"#_6-1-5-filebeat\u6536\u96C6\u65E5\u5FD7\u5199\u5165\u5230\u4E00\u4E2Akey\u4E2D","children":[]},{"level":3,"title":"6.1.6 logstash\u6839\u636Etag\u533A\u5206\u4E00\u4E2Akey\u91CC\u7684\u4E0D\u540C\u65E5\u5FD7","slug":"_6-1-6-logstash\u6839\u636Etag\u533A\u5206\u4E00\u4E2Akey\u91CC\u7684\u4E0D\u540C\u65E5\u5FD7","link":"#_6-1-6-logstash\u6839\u636Etag\u533A\u5206\u4E00\u4E2Akey\u91CC\u7684\u4E0D\u540C\u65E5\u5FD7","children":[]}]},{"level":2,"title":"6.2 \u4F7F\u7528nginx+keepalived\u4EE3\u7406\u591A\u53F0redis","slug":"_6-2-\u4F7F\u7528nginx-keepalived\u4EE3\u7406\u591A\u53F0redis","link":"#_6-2-\u4F7F\u7528nginx-keepalived\u4EE3\u7406\u591A\u53F0redis","children":[{"level":3,"title":"6.2.1 \u89E3\u51B3\u65B9\u6848\u4ECB\u7ECD","slug":"_6-2-1-\u89E3\u51B3\u65B9\u6848\u4ECB\u7ECD","link":"#_6-2-1-\u89E3\u51B3\u65B9\u6848\u4ECB\u7ECD","children":[]},{"level":3,"title":"6.2.2 nginx\u914D\u7F6E\u6587\u4EF6","slug":"_6-2-2-nginx\u914D\u7F6E\u6587\u4EF6","link":"#_6-2-2-nginx\u914D\u7F6E\u6587\u4EF6","children":[]},{"level":3,"title":"6.2.3 redis\u914D\u7F6E","slug":"_6-2-3-redis\u914D\u7F6E","link":"#_6-2-3-redis\u914D\u7F6E","children":[]},{"level":3,"title":"6.2.4 \u6A21\u62DF\u6545\u969C\u6D4B\u8BD5","slug":"_6-2-4-\u6A21\u62DF\u6545\u969C\u6D4B\u8BD5","link":"#_6-2-4-\u6A21\u62DF\u6545\u969C\u6D4B\u8BD5","children":[]},{"level":3,"title":"6.2.5 logstash\u914D\u7F6E","slug":"_6-2-5-logstash\u914D\u7F6E","link":"#_6-2-5-logstash\u914D\u7F6E","children":[]},{"level":3,"title":"6.2.6 \u4F7F\u7528supervisor\u6279\u91CF\u7BA1\u7406\u591A\u4E2Alogstash\u8FDB\u7A0B","slug":"_6-2-6-\u4F7F\u7528supervisor\u6279\u91CF\u7BA1\u7406\u591A\u4E2Alogstash\u8FDB\u7A0B","link":"#_6-2-6-\u4F7F\u7528supervisor\u6279\u91CF\u7BA1\u7406\u591A\u4E2Alogstash\u8FDB\u7A0B","children":[]}]},{"level":2,"title":"6.3 \u4F7F\u7528kafka\u4F5C\u4E3A\u7F13\u5B58","slug":"_6-3-\u4F7F\u7528kafka\u4F5C\u4E3A\u7F13\u5B58","link":"#_6-3-\u4F7F\u7528kafka\u4F5C\u4E3A\u7F13\u5B58","children":[{"level":3,"title":"6.3.1 \u4ECB\u7ECD","slug":"_6-3-1-\u4ECB\u7ECD","link":"#_6-3-1-\u4ECB\u7ECD","children":[]},{"level":3,"title":"6.3.2 zookeeper\u5B89\u88C5\u914D\u7F6E","slug":"_6-3-2-zookeeper\u5B89\u88C5\u914D\u7F6E","link":"#_6-3-2-zookeeper\u5B89\u88C5\u914D\u7F6E","children":[]},{"level":3,"title":"6.3.3 kafka\u5B89\u88C5\u914D\u7F6E","slug":"_6-3-3-kafka\u5B89\u88C5\u914D\u7F6E","link":"#_6-3-3-kafka\u5B89\u88C5\u914D\u7F6E","children":[]},{"level":3,"title":"6.3.4 kafka\u96C6\u7FA4\u6536\u53D1\u6D88\u606F\u6D4B\u8BD5","slug":"_6-3-4-kafka\u96C6\u7FA4\u6536\u53D1\u6D88\u606F\u6D4B\u8BD5","link":"#_6-3-4-kafka\u96C6\u7FA4\u6536\u53D1\u6D88\u606F\u6D4B\u8BD5","children":[]},{"level":3,"title":"6.3.5 filebeat\u914D\u7F6E","slug":"_6-3-5-filebeat\u914D\u7F6E","link":"#_6-3-5-filebeat\u914D\u7F6E","children":[]},{"level":3,"title":"6.3.6 logstash\u914D\u7F6E","slug":"_6-3-6-logstash\u914D\u7F6E","link":"#_6-3-6-logstash\u914D\u7F6E","children":[]}]}],"relativePath":"pages/posts/ELK\u65E5\u5FD7\u6536\u96C6\u7CFB\u7EDF\u6982\u62EC.md","path":"/Users/vlinux/vlinux/blog/valaxy/valaxy-vlinux/pages/posts/ELK\u65E5\u5FD7\u6536\u96C6\u7CFB\u7EDF\u6982\u62EC.md","lastUpdated":0}'),u={name:"pages/posts/ELK\u65E5\u5FD7\u6536\u96C6\u7CFB\u7EDF\u6982\u62EC.md",data(){return{data:a,frontmatter:a.frontmatter}},setup(){_("pageData",a)}},p=e("table",null,[e("thead",null,[e("tr",null,[e("th",null,"ELK\u6536\u96C6\u65E5\u5FD7")])]),e("tbody",null,[e("tr",null,[e("td",null,[e("strong",null,"\u4F5C\u8005\uFF1AAndu"),n(),e("strong",null,"2019/6/30")])]),e("tr",null,[e("td",null,"\u7CBE\u534E\u6587\u7AE0")]),e("tr",null,[e("td")])])],-1),g=e("h1",{id:"\u7B2C1\u7AE0-elk\u4ECB\u7ECD",tabindex:"-1"},[n("\u7B2C1\u7AE0 ELK\u4ECB\u7ECD "),e("a",{class:"header-anchor",href:"#\u7B2C1\u7AE0-elk\u4ECB\u7ECD","aria-hidden":"true"},"#")],-1),m=e("p",null,"\u6CA1\u6709\u65E5\u5FD7\u6536\u96C6\u5E73\u53F0\u7684\u65F6\u5019\u5982\u4F55\u5206\u6790\u65E5\u5FD7\uFF1F\u4EC0\u4E48\u662FELK/EFLK? ELK\u7684\u6570\u636E\u6D41\u8F6C\u6D41\u7A0B?",-1),f=e("p",null,"\u5B98\u65B9\u6F14\u793A\u5730\u5740\uFF1A",-1),b=e("p",null,[e("a",{href:"https://demo.elastic.co/",target:"_blank",rel:"noreferrer"},"https://demo.elastic.co/")],-1),k=e("h1",{id:"\u7B2C2\u7AE0-\u65E5\u5FD7\u6536\u96C6\u5206\u7C7B",tabindex:"-1"},[n("\u7B2C2\u7AE0 \u65E5\u5FD7\u6536\u96C6\u5206\u7C7B "),e("a",{class:"header-anchor",href:"#\u7B2C2\u7AE0-\u65E5\u5FD7\u6536\u96C6\u5206\u7C7B","aria-hidden":"true"},"#")],-1),v=e("p",null,"\u4EE3\u7406\u5C42\uFF1Anginx,haproxy",-1),x=e("p",null,"web\u5C42\uFF1Anginx,tomcat",-1),y=e("p",null,"\u6570\u636E\u5E93\u5C42\uFF1Amysql,redis,mongo,elasticsearch",-1),w=e("p",null,"\u64CD\u4F5C\u7CFB\u7EDF\u5C42\uFF1Asource,message",-1),j=e("h1",{id:"\u7B2C3\u7AE0-\u5B89\u88C5\u90E8\u7F72elk",tabindex:"-1"},[n("\u7B2C3\u7AE0 \u5B89\u88C5\u90E8\u7F72ELK "),e("a",{class:"header-anchor",href:"#\u7B2C3\u7AE0-\u5B89\u88C5\u90E8\u7F72elk","aria-hidden":"true"},"#")],-1),A=e("h2",{id:"_3-1-\u5B98\u65B9\u5730\u5740",tabindex:"-1"},[n("3.1 \u5B98\u65B9\u5730\u5740 "),e("a",{class:"header-anchor",href:"#_3-1-\u5B98\u65B9\u5730\u5740","aria-hidden":"true"},"#")],-1),E=e("p",null,[e("a",{href:"https://www.elastic.co/guide/index.html",target:"_blank",rel:"noreferrer"},"https://www.elastic.co/guide/index.html")],-1),M=e("h2",{id:"_3-2-\u5B89\u88C5\u914D\u7F6Ejava",tabindex:"-1"},[n("3.2 \u5B89\u88C5\u914D\u7F6Ejava "),e("a",{class:"header-anchor",href:"#_3-2-\u5B89\u88C5\u914D\u7F6Ejava","aria-hidden":"true"},"#")],-1),q=e("pre",null,[e("code",null,`[root@Andu ~]# yum install java-1.8.0-openjdk.x86_64 -y[[A1\\]](#_msocom_1) 

[root@Andu ~]# java -version 

openjdk version "1.8.0_212"

OpenJDK Runtime Environment (build 1.8.0_212-b04)

OpenJDK 64-Bit Server VM (build 25.212-b04, mixed mode)
`)],-1),T=e("h2",{id:"_3-3-\u66F4\u65B0\u65F6\u95F4",tabindex:"-1"},[n("3.3 \u66F4\u65B0\u65F6\u95F4 "),e("a",{class:"header-anchor",href:"#_3-3-\u66F4\u65B0\u65F6\u95F4","aria-hidden":"true"},"#")],-1),S=e("pre",null,[e("code",null,`yum install ntpdate -y

ntpdate time1.aliyun.com[[A2\\]](#_msocom_2) 
`)],-1),$=e("h2",{id:"_3-4-\u5B89\u88C5\u914D\u7F6Eelasticsearch",tabindex:"-1"},[n("3.4 \u5B89\u88C5\u914D\u7F6Eelasticsearch "),e("a",{class:"header-anchor",href:"#_3-4-\u5B89\u88C5\u914D\u7F6Eelasticsearch","aria-hidden":"true"},"#")],-1),L=e("pre",null,[e("code",null,`[root@Andu ~]# mkdir /data/soft/ -p

[root@Andu ~]# cd /data/soft/

[root@Andu soft]# rz

[root@Andu soft]# ll

\u603B\u7528\u91CF 506120

-rw-r--r-- 1 root root 114059630 2\u6708 25 11:09 elasticsearch-6.6.0.rpm

-rw-r--r-- 1 root root 36581177 4\u6708 27 12:29 elasticsearch-head.tar.gz

-rw-r--r-- 1 root root 11790119 2\u6708 25 11:08 filebeat-6.6.0-x86_64.rpm

-rw-r--r-- 1 root root 185123116 2\u6708 25 11:11 kibana-6.6.0-x86_64.rpm

-rw-r--r-- 1 root root 170703770 2\u6708 25 11:38 logstash-6.6.0.rpm

[root@Andu soft]# rpm -ivh elasticsearch-6.6.0.rpm 

\u8B66\u544A\uFF1Aelasticsearch-6.6.0.rpm: \u5934V4 RSA/SHA512 Signature, \u5BC6\u94A5 ID d88e42b4: NOKEY

\u51C6\u5907\u4E2D...             ################################# [100%]

Creating elasticsearch group... OK

Creating elasticsearch user... OK

\u6B63\u5728\u5347\u7EA7/\u5B89\u88C5...

  1:elasticsearch-0:6.6.0-1     ################################# [100%]

\\### NOT starting on installation, please execute the following statements to configure elasticsearch service to start automatically using systemd

 sudo systemctl daemon-reload

 sudo systemctl enable elasticsearch.service

\\### You can start elasticsearch service by executing

 sudo systemctl start elasticsearch.serviceCreated elasticsearch keystore in /etc/elasticsearch
`)],-1),K=e("h3",{id:"_3-4-1-\u76F8\u5173\u914D\u7F6E\u76EE\u5F55\u53CA\u914D\u7F6E\u6587\u4EF6",tabindex:"-1"},[n("3.4.1 \u76F8\u5173\u914D\u7F6E\u76EE\u5F55\u53CA\u914D\u7F6E\u6587\u4EF6 "),e("a",{class:"header-anchor",href:"#_3-4-1-\u76F8\u5173\u914D\u7F6E\u76EE\u5F55\u53CA\u914D\u7F6E\u6587\u4EF6","aria-hidden":"true"},"#")],-1),I=e("pre",null,[e("code",null,`[root@Andu ~]# rpm -qc elasticsearch 

/etc/elasticsearch/elasticsearch.yml

/etc/elasticsearch/jvm.options

/etc/elasticsearch/log4j2.properties

/etc/elasticsearch/role_mapping.yml

/etc/elasticsearch/roles.yml

/etc/elasticsearch/users

/etc/elasticsearch/users_roles

/etc/init.d/elasticsearch

/etc/sysconfig/elasticsearch

/usr/lib/sysctl.d/elasticsearch.conf

/usr/lib/systemd/system/elasticsearch.service
`)],-1),O=e("h3",{id:"_3-4-2-es\u914D\u7F6E\u6587\u4EF6\u89E3\u8BFB",tabindex:"-1"},[n("3.4.2 ES\u914D\u7F6E\u6587\u4EF6\u89E3\u8BFB "),e("a",{class:"header-anchor",href:"#_3-4-2-es\u914D\u7F6E\u6587\u4EF6\u89E3\u8BFB","aria-hidden":"true"},"#")],-1),C=e("pre",null,[e("code",null,`[root@Andu soft]# vim /etc/elasticsearch/elasticsearch.yml

[root@Andu soft]# grep ^[a-z] /etc/elasticsearch/elasticsearch.yml 

node.name: node-1

path.data: /var/lib/elasticsearch[[A3\\]](#_msocom_3) 

path.logs: /var/log/elasticsearch[[A4\\]](#_msocom_4) 

bootstrap.memory_lock: true[[A5\\]](#_msocom_5) 

network.host: 192.168.10.66,127.0.0.1[[A6\\]](#_msocom_6) 

http.port: 9200[[A7\\]](#_msocom_7) 

[root@Andu soft]# systemctl daemon-reload

[root@Andu soft]# systemctl enable elasticsearch.service

Created symlink from /etc/systemd/system/multi-user.target.wants/elasticsearch.service to /usr/lib/systemd/system/elasticsearch.service.

[root@Andu soft]# systemctl start elasticsearch.service
`)],-1),z=e("h3",{id:"_3-4-3-\u542F\u52A8\u5931\u8D25\u62A5\u9519",tabindex:"-1"},[n("3.4.3 \u542F\u52A8\u5931\u8D25\u62A5\u9519 "),e("a",{class:"header-anchor",href:"#_3-4-3-\u542F\u52A8\u5931\u8D25\u62A5\u9519","aria-hidden":"true"},"#")],-1),N=e("p",null,"\u6B64\u65F6\u542F\u52A8\u4F1A\u53D1\u73B0\u5931\u8D25\uFF0C\u539F\u56E0\u662F\u5185\u5B58\u9501\u5B9A\u5931\u8D25",-1),D=e("pre",null,[e("code",null,`[2019-05-12T14:39:58,764][ERROR][o.e.b.Bootstrap     ] [node-1] node validation exception

[1] bootstrap checks failed

[1]: memory locking requested for elasticsearch process but memory is not locked
`)],-1),R=e("h3",{id:"_3-4-4-\u9501\u5B9A\u5185\u5B58\u5931\u8D25\u89E3\u51B3\u65B9\u6848",tabindex:"-1"},[n("3.4.4 \u9501\u5B9A\u5185\u5B58\u5931\u8D25\u89E3\u51B3\u65B9\u6848 "),e("a",{class:"header-anchor",href:"#_3-4-4-\u9501\u5B9A\u5185\u5B58\u5931\u8D25\u89E3\u51B3\u65B9\u6848","aria-hidden":"true"},"#")],-1),P=e("p",null,"\u5B98\u65B9\u89E3\u51B3\u65B9\u6848",-1),B=e("pre",null,[e("code",null,`https://www.elastic.co/guide/en/elasticsearch/reference/6.4/setup-configuration-memory.html

https://www.elastic.co/guide/en/elasticsearch/reference/6.4/setting-system-settings.html#sysconfig

\\### \u4FEE\u6539\u542F\u52A8\u914D\u7F6E\u6587\u4EF6

vim /usr/lib/systemd/system/elasticsearch.service



\\### \u589E\u52A0\u5982\u4E0B\u53C2\u6570

[Service]

LimitMEMLOCK=infinity



\\### \u91CD\u65B0\u542F\u52A8

systemctl daemon-reload



systemctl restart elasticsearch
`)],-1),G=e("h3",{id:"_3-4-5-\u68C0\u67E5\u542F\u52A8\u662F\u5426\u6210\u529F",tabindex:"-1"},[n("3.4.5 \u68C0\u67E5\u542F\u52A8\u662F\u5426\u6210\u529F "),e("a",{class:"header-anchor",href:"#_3-4-5-\u68C0\u67E5\u542F\u52A8\u662F\u5426\u6210\u529F","aria-hidden":"true"},"#")],-1),U=e("pre",null,[e("code",null,`  [root@Andu ~]# netstat -lntup|grep 9200
    
    tcp6    0   0 192.168.10.66:9200   :::*          LISTEN   15824/java     
    
    tcp6    0   0 127.0.0.1:9200     :::*          LISTEN   15824/java
    
    [root@Andu ~]# curl localhost:9200   
    
    {
    
     "name" : "node-1",
    
     "cluster_name" : "elasticsearch",
    
     "cluster_uuid" : "As5ZlEQ2Syq0ktLL0hg5XA",
    
     "version" : {
    
      "number" : "6.6.0",
    
      "build_flavor" : "default",
    
      "build_type" : "rpm",
    
      "build_hash" : "a9861f4",
    
      "build_date" : "2019-01-24T11:27:09.439740Z",
    
      "build_snapshot" : false,
    
      "lucene_version" : "7.6.0",
    
      "minimum_wire_compatibility_version" : "5.6.0",
    
      "minimum_index_compatibility_version" : "5.0.0"
    
     },
    
     "tagline" : "You Know, for Search"
    
    }
`)],-1),H=e("h2",{id:"_3-5-\u670D\u52A1\u6A21\u5F0F\u5B89\u88C5\u914D\u7F6Ees-head\u63D2\u4EF6",tabindex:"-1"},[n("3.5 \u670D\u52A1\u6A21\u5F0F\u5B89\u88C5\u914D\u7F6Ees-head\u63D2\u4EF6 "),e("a",{class:"header-anchor",href:"#_3-5-\u670D\u52A1\u6A21\u5F0F\u5B89\u88C5\u914D\u7F6Ees-head\u63D2\u4EF6","aria-hidden":"true"},"#")],-1),V=e("h3",{id:"_3-5-1-\u63D2\u4EF6\u5B98\u65B9\u5730\u5740",tabindex:"-1"},[n("3.5.1 \u63D2\u4EF6\u5B98\u65B9\u5730\u5740 "),e("a",{class:"header-anchor",href:"#_3-5-1-\u63D2\u4EF6\u5B98\u65B9\u5730\u5740","aria-hidden":"true"},"#")],-1),Z=e("p",null,[e("a",{href:"https://github.com/mobz/elasticsearch-head",target:"_blank",rel:"noreferrer"},"https://github.com/mobz/elasticsearch-head")],-1),J=e("h3",{id:"_3-5-2-\u4F7F\u7528docker\u90E8\u7F72elasticsearch-head",tabindex:"-1"},[n("3.5.2 \u4F7F\u7528docker\u90E8\u7F72elasticsearch-head "),e("a",{class:"header-anchor",href:"#_3-5-2-\u4F7F\u7528docker\u90E8\u7F72elasticsearch-head","aria-hidden":"true"},"#")],-1),X=e("pre",null,[e("code",null,`docker pull alivv/elasticsearch-head

docker run --name es-head -p 9100:9100 -dit alivv/elasticsearch-head
`)],-1),F=e("h3",{id:"_3-5-3-\u4F7F\u7528nodejs\u7F16\u8BD1\u5B89\u88C5",tabindex:"-1"},[n("3.5.3 \u4F7F\u7528nodejs\u7F16\u8BD1\u5B89\u88C5 "),e("a",{class:"header-anchor",href:"#_3-5-3-\u4F7F\u7528nodejs\u7F16\u8BD1\u5B89\u88C5","aria-hidden":"true"},"#")],-1),Y=e("p",null,"\u5B98\u7F51\u5730\u5740",-1),Q=e("p",null,[e("a",{href:"https://nodejs.org/en/download/package-manager/",target:"_blank",rel:"noreferrer"},"https://nodejs.org/en/download/package-manager/")],-1),W=e("p",null,[e("a",{href:"https://nodejs.org/dist/latest-v10.x/",target:"_blank",rel:"noreferrer"},"https://nodejs.org/dist/latest-v10.x/")],-1),ee=e("p",null,[e("a",{href:"http://npm.taobao.org",target:"_blank",rel:"noreferrer"},"http://npm.taobao.org")],-1),ne=e("p",null,"\u4E0B\u8F7D\u5B89\u88C5",-1),te=e("pre",null,[e("code",null,`yum install nodejs npm openssl screen -y



node -v

npm -v

npm install -g cnpm --registry=https://registry.npm.taobao.org

cd /opt/             

git clone git://github.com/mobz/elasticsearch-head.git

cd elasticsearch-head/



cnpm install

screen -S es-head

cnpm run start

Ctrl+A+D
`)],-1),se=e("h3",{id:"_3-5-4-\u4FEE\u6539es\u914D\u7F6E\u6587\u4EF6\u652F\u6301\u8DE8\u57DF",tabindex:"-1"},[n("3.5.4 \u4FEE\u6539ES\u914D\u7F6E\u6587\u4EF6\u652F\u6301\u8DE8\u57DF "),e("a",{class:"header-anchor",href:"#_3-5-4-\u4FEE\u6539es\u914D\u7F6E\u6587\u4EF6\u652F\u6301\u8DE8\u57DF","aria-hidden":"true"},"#")],-1),le=e("p",null,"\u5B98\u65B9\u8BF4\u660E\uFF1A",-1),ae=e("p",null,[e("a",{href:"https://www.elastic.co/guide/en/elasticsearch/reference/6.6/modules-http.html",target:"_blank",rel:"noreferrer"},"https://www.elastic.co/guide/en/elasticsearch/reference/6.6/modules-http.html")],-1),ie=e("p",null,"\u914D\u7F6E\u53C2\u6570\uFF1A",-1),oe=e("pre",null,[e("code",null,`http.cors.enabled: true 

http.cors.allow-origin: "*"
`)],-1),re=e("h3",{id:"_3-5-5-\u7F51\u9875\u8BBF\u95EE",tabindex:"-1"},[n("3.5.5 \u7F51\u9875\u8BBF\u95EE "),e("a",{class:"header-anchor",href:"#_3-5-5-\u7F51\u9875\u8BBF\u95EE","aria-hidden":"true"},"#")],-1),de=e("pre",null,[e("code",null,`IP\u5730\u5740:9200/9100
`)],-1),ce=e("h2",{id:"_3-6-\u8C37\u6B4C\u6D4F\u89C8\u5668\u63D2\u4EF6\u5F62\u5F0F\u5B89\u88C5es-head",tabindex:"-1"},[n("3.6 \u8C37\u6B4C\u6D4F\u89C8\u5668\u63D2\u4EF6\u5F62\u5F0F\u5B89\u88C5es-head "),e("a",{class:"header-anchor",href:"#_3-6-\u8C37\u6B4C\u6D4F\u89C8\u5668\u63D2\u4EF6\u5F62\u5F0F\u5B89\u88C5es-head","aria-hidden":"true"},"#")],-1),he=e("p",null,'[tip type="info"] \u4F7F\u7528\u670D\u52A1\u6A21\u5F0F\u5B89\u88C5es-head\u63D2\u4EF6\u8FC7\u7A0B\u6BD4\u8F83\u7E41\u7410\uFF0C\u7F51\u7EDC\u4E0D\u597D\u7684\u65F6\u5019\u8FD8\u4F1A\u7ECF\u5E38\u5361\u4F4F\uFF0C\u5E78\u8FD0\u7684\u662Fes-head\u63D2\u4EF6\u5B98\u65B9\u8FD8\u63D0\u4F9B\u4E86\u53E6\u5916\u4E00\u79CD\u66F4\u7B80\u4FBF\u7684\u65B9\u5F0F\uFF0C\u5C31\u662Fgoogle chrome\u7684\u63D2\u4EF6 [/tip]',-1),_e=e("p",null,'[collapse title="\u4F18\u52BF"] 1.\u514D\u5B89\u88C5\uFF0C\u76F4\u63A5\u4E0B\u8F7D\u63D2\u4EF6\u5B89\u88C5\u5728\u6D4F\u89C8\u5668\u5373\u53EF',-1),ue=e("p",null,"2.\u53EA\u8981\u6D4F\u89C8\u5668\u548C\u670D\u52A1\u5668\u53EF\u4EE5\u901A\u4FE1\u5C31\u80FD\u4F7F\u7528",-1),pe=e("p",null,"[/collapse]",-1),ge=e("h2",{id:"_3-7-\u5B89\u88C5\u914D\u7F6Ekibana",tabindex:"-1"},[n("3.7 \u5B89\u88C5\u914D\u7F6Ekibana "),e("a",{class:"header-anchor",href:"#_3-7-\u5B89\u88C5\u914D\u7F6Ekibana","aria-hidden":"true"},"#")],-1),me=e("h3",{id:"_3-7-1-\u5B89\u88C5\u914D\u7F6Ekibana",tabindex:"-1"},[n("3.7.1 \u5B89\u88C5\u914D\u7F6Ekibana "),e("a",{class:"header-anchor",href:"#_3-7-1-\u5B89\u88C5\u914D\u7F6Ekibana","aria-hidden":"true"},"#")],-1),fe=e("pre",null,[e("code",null,`[root@Andu soft]# rpm -ivh kibana-6.6.0-x86_64.rpm

[root@Andu soft]# grep "^[a-z]" /etc/kibana/kibana.yml

server.port: 5601

server.host: "192.168.10.66"

elasticsearch.hosts: ["http://localhost:9200"]

kibana.index: ".kibana

[root@Andu soft]# systemctl start kibana

[root@Andu soft]# systemctl status kibana

[root@Andu soft]# netstat -lntup|grep 5601

tcp    0   0 192.168.10.66:5601   0.0.0.0:*        LISTEN   16442/node
`)],-1),be=e("h2",{id:"_3-8-\u5B89\u88C5filebeat\u548Clogstash",tabindex:"-1"},[n("3.8 \u5B89\u88C5filebeat\u548Clogstash "),e("a",{class:"header-anchor",href:"#_3-8-\u5B89\u88C5filebeat\u548Clogstash","aria-hidden":"true"},"#")],-1),ke=e("pre",null,[e("code",null,`rpm -ivh filebeat-6.6.0-x86_64.rpm

rpm -ivh logstash-6.6.0.rpm 
`)],-1),ve=e("h2",{id:"_3-9-docker\u5B89\u88C5elk",tabindex:"-1"},[n("3.9 docker\u5B89\u88C5elk "),e("a",{class:"header-anchor",href:"#_3-9-docker\u5B89\u88C5elk","aria-hidden":"true"},"#")],-1),xe=e("pre",null,[e("code",null,`version: '3'

services:

 elasticsearch:

  image: elasticsearch:v1

  container_name: elasticsearch

  environment:

   \\- cluster.name=docker-cluster

   \\- bootstrap.memory_lock=true

   \\- "ES_JAVA_OPTS=-Xms8g -Xmx8g"

   \\- "discovery.zen.ping.unicast.hosts=elasticsearch"

  ulimits:

   memlock:

\u200B    soft: -1

\u200B    hard: -1

  volumes:

   \\- /data/docker_es_data:/usr/share/elasticsearch/data

  ports:

   \\- 19200:9200

  networks:

   \\- esnet

 elasticsearch-head:

  image: elasticsearch-head:v1

  container_name: elasticsearch-head

  ports:

   \\- 19100:9100

  networks:

   \\- esnet

 kibana:

  image: kibana:v1

  container_name: kibana

  environment:

   \\- ELASTICSEARCH_URL="http://elasticsearch:9200"

   \\- kibana.index=".kibana"

  ports:

   \\- 15601:5601

  networks:

   \\- esnet

 logstash:

  image: logstash:v1

  container_name: logstash 

  environment:

   \\- ELASTICSEARCH_URL="http://elasticsearch:9200"

  ports:

   \\- 16379:6379

  networks:

   \\- esnet

networks:

 esnet:
`)],-1),ye=e("h1",{id:"\u7B2C4\u7AE0-\u4F7F\u7528filebeat\u914D\u7F6E\u65E5\u5FD7\u6536\u96C6",tabindex:"-1"},[n("\u7B2C4\u7AE0 \u4F7F\u7528filebeat\u914D\u7F6E\u65E5\u5FD7\u6536\u96C6 "),e("a",{class:"header-anchor",href:"#\u7B2C4\u7AE0-\u4F7F\u7528filebeat\u914D\u7F6E\u65E5\u5FD7\u6536\u96C6","aria-hidden":"true"},"#")],-1),we=e("h2",{id:"_4-1-\u6536\u96C6nginx\u65E5\u5FD7",tabindex:"-1"},[n("4.1 \u6536\u96C6nginx\u65E5\u5FD7 "),e("a",{class:"header-anchor",href:"#_4-1-\u6536\u96C6nginx\u65E5\u5FD7","aria-hidden":"true"},"#")],-1),je=e("h3",{id:"_4-1-1-\u5B89\u88C5nginx\u548Cab\u5DE5\u5177",tabindex:"-1"},[n("4.1.1 \u5B89\u88C5nginx\u548Cab\u5DE5\u5177 "),e("a",{class:"header-anchor",href:"#_4-1-1-\u5B89\u88C5nginx\u548Cab\u5DE5\u5177","aria-hidden":"true"},"#")],-1),Ae=e("pre",null,[e("code",null,`[root@Andu ~]# yum install nginx httpd-tools -y
`)],-1),Ee=e("h3",{id:"_4-1-2-\u542F\u52A8\u6D4B\u8BD5",tabindex:"-1"},[n("4.1.2 \u542F\u52A8\u6D4B\u8BD5 "),e("a",{class:"header-anchor",href:"#_4-1-2-\u542F\u52A8\u6D4B\u8BD5","aria-hidden":"true"},"#")],-1),Me=e("pre",null,[e("code",null,`[root@Andu ~]#  wget -O /etc/yum.repos.d/epel.repo http://mirrors.aliyun.com/repo/epel-7.repo

[root@Andu ~]# systemctl start nginx

[root@Andu ~]# netstat -lntup|grep nginx

tcp    0   0 0.0.0.0:80       0.0.0.0:*        LISTEN   1888/nginx: master 

tcp6    0   0 :::80          :::*          LISTEN   1888/nginx: master

[root@Andu ~]# ab -c 10 -n 100 192.168.10.66/

[root@Andu ~]# ab -c 10 -n 100 192.168.10.66/test.html
`)],-1),qe=e("h3",{id:"_4-1-3-\u67E5\u770B\u65E5\u5FD7",tabindex:"-1"},[n("4.1.3 \u67E5\u770B\u65E5\u5FD7 "),e("a",{class:"header-anchor",href:"#_4-1-3-\u67E5\u770B\u65E5\u5FD7","aria-hidden":"true"},"#")],-1),Te=e("pre",null,[e("code",null,`[root@Andu ~]# tail -f /var/log/nginx/access.log 

192.168.10.66 - - [13/May/2019:00:24:02 +0800] "GET /test.html HTTP/1.0" 404 3650 "-" "ApacheBench/2.3" "-"

192.168.10.66 - - [13/May/2019:00:24:02 +0800] "GET /test.html HTTP/1.0" 404 3650 "-" "ApacheBench/2.3" "-"

.......................................
`)],-1),Se=e("h3",{id:"_4-1-4-\u914D\u7F6Efilebeat\u6536\u96C6\u666E\u901A\u65E5\u5FD7",tabindex:"-1"},[n("4.1.4 \u914D\u7F6Efilebeat\u6536\u96C6\u666E\u901A\u65E5\u5FD7 "),e("a",{class:"header-anchor",href:"#_4-1-4-\u914D\u7F6Efilebeat\u6536\u96C6\u666E\u901A\u65E5\u5FD7","aria-hidden":"true"},"#")],-1),$e=e("p",null,"\u76F8\u5173\u7F51\u5740",-1),Le=e("p",null,[e("a",{href:"https://www.elastic.co/guide/en/beats/filebeat/7.x/filebeat-input-log.html",target:"_blank",rel:"noreferrer"},"https://www.elastic.co/guide/en/beats/filebeat/7.x/filebeat-input-log.html")],-1),Ke=e("p",null,[e("a",{href:"https://www.elastic.co/guide/en/beats/filebeat/7.x/configuration-template.html",target:"_blank",rel:"noreferrer"},"https://www.elastic.co/guide/en/beats/filebeat/7.x/configuration-template.html")],-1),Ie=e("p",null,[e("a",{href:"https://www.elastic.co/guide/en/beats/filebeat/7.x/configuration-template.html",target:"_blank",rel:"noreferrer"},"https://www.elastic.co/guide/en/beats/filebeat/7.x/configuration-template.html")],-1),Oe=e("p",null,"\u6B63\u786E\u914D\u7F6E",-1),Ce=e("pre",null,[e("code",null,`filebeat.inputs:

\\- type: log

 enabled: true

 paths:

  \\- /var/log/nginx/access.log

 json.keys_under_root: true

 json.overwrite_keys: true

 

setup.kibana:

 host: "192.168.10.66:5601"

 

output.elasticsearch:

 hosts: ["192.168.10.66:9200"]

 index: "nginx-%{[beat.version]}-%{+yyyy.MM}"

setup.template.name: "nginx"

setup.template.pattern: "nginx-*"

setup.template.enabled: false

setup.template.overwrite: true
`)],-1),ze=e("h3",{id:"_4-1-5-kibana\u914D\u7F6E",tabindex:"-1"},[n("4.1.5 kibana\u914D\u7F6E "),e("a",{class:"header-anchor",href:"#_4-1-5-kibana\u914D\u7F6E","aria-hidden":"true"},"#")],-1),Ne=e("pre",null,[e("code",null,`management-->index patterns-->nginx-->@timestamp
`)],-1),De=e("h3",{id:"_4-1-6-\u4FEE\u6539nginx\u65E5\u5FD7\u4E3Ajson\u683C\u5F0F",tabindex:"-1"},[n("4.1.6 \u4FEE\u6539nginx\u65E5\u5FD7\u4E3Ajson\u683C\u5F0F "),e("a",{class:"header-anchor",href:"#_4-1-6-\u4FEE\u6539nginx\u65E5\u5FD7\u4E3Ajson\u683C\u5F0F","aria-hidden":"true"},"#")],-1),Re=e("pre",null,[e("code",null,` log_format main '{ "time_local": "$time_local", '

\u200B              '"remote_addr": "$remote_addr", '

\u200B              '"referer": "$http_referer", '

\u200B              '"request": "$request", '

\u200B              '"status": $status, '

\u200B              '"bytes": $body_bytes_sent, '

\u200B              '"agent": "$http_user_agent", '

\u200B              '"x_forwarded": "$http_x_forwarded_for", '

\u200B              '"up_addr": "$upstream_addr",'

\u200B              '"up_host": "$upstream_http_host",'

\u200B              '"upstream_time": "$upstream_response_time",'

\u200B              '"request_time": "$request_time"'

  ' }';
`)],-1),Pe=e("h3",{id:"_4-1-7-\u67E5\u770B\u65E5\u5FD7\u662F\u5426\u4E3Ajson\u683C\u5F0F",tabindex:"-1"},[n("4.1.7 \u67E5\u770B\u65E5\u5FD7\u662F\u5426\u4E3Ajson\u683C\u5F0F "),e("a",{class:"header-anchor",href:"#_4-1-7-\u67E5\u770B\u65E5\u5FD7\u662F\u5426\u4E3Ajson\u683C\u5F0F","aria-hidden":"true"},"#")],-1),Be=e("pre",null,[e("code",null,`[root@Andu ~]# tail -f /var/log/nginx/access.log  

{ "time_local": "13/May/2019:00:30:51 +0800", "remote_addr": "192.168.10.66", "referer": "-", "request": "GET /test.html HTTP/1.0", "status": 404, "bytes": 3650, "agent": "ApacheBench/2.3", "x_forwarded": "-", "up_addr": "-","up_host": "-","upstream_time": "-","request_time": "0.000" }

{ "time_local": "13/May/2019:00:30:51 +0800", "remote_addr": "192.168.10.66", "referer": "-", "request": "GET /test.html HTTP/1.0", "status": 404, "bytes": 3650, "agent": "ApacheBench/2.3", "x_forwarded": "-", "up_addr": "-","up_host": "-","upstream_time": "-","request_time": "0.000" }
`)],-1),Ge=e("h3",{id:"_4-1-8-\u6536\u96C6\u591A\u4E2A\u65E5\u5FD7\u5E76\u5206\u7C7B\u521B\u5EFA\u7D22\u5F15",tabindex:"-1"},[n("4.1.8 \u6536\u96C6\u591A\u4E2A\u65E5\u5FD7\u5E76\u5206\u7C7B\u521B\u5EFA\u7D22\u5F15 "),e("a",{class:"header-anchor",href:"#_4-1-8-\u6536\u96C6\u591A\u4E2A\u65E5\u5FD7\u5E76\u5206\u7C7B\u521B\u5EFA\u7D22\u5F15","aria-hidden":"true"},"#")],-1),Ue=e("p",null,'[tip type="info"] filebeat\u914D\u7F6E [/tip]',-1),He=e("pre",null,[e("code",null,`[root@Andu filebeat]# cat filebeat.yml 

filebeat.inputs:

\\- type: log

 enabled: true 

 paths:

  \\- /var/log/nginx/access.log

 json.keys_under_root: true

 json.overwrite_keys: true

 tags: ["access"]

\\- type: log

 enabled: true 

 paths:

  \\- /var/log/nginx/error.log

 tags: ["error"]

setup.template.settings:

 index.number_of_shards: 3

setup.kibana:

 host: "192.168.10.66:5601"

output.elasticsearch:

 hosts: ["localhost:9200"]

 indices:

  \\- index: "nginx_access-%{[beat.version]}-%{+yyyy.MM.dd}"

   when.contains:

\u200B    tags: "access"

  \\- index: "nginx_error-%{[beat.version]}-%{+yyyy.MM.dd}"

   when.contains:

\u200B    tags: "error"

setup.template.name: "nginx"

setup.template.pattern: "nginx_*"

setup.template.enabled: false

setup.template.overwrite: true
`)],-1),Ve=e("h2",{id:"_4-2-\u6536\u96C6tomcat\u65E5\u5FD7",tabindex:"-1"},[n("4.2 \u6536\u96C6tomcat\u65E5\u5FD7 "),e("a",{class:"header-anchor",href:"#_4-2-\u6536\u96C6tomcat\u65E5\u5FD7","aria-hidden":"true"},"#")],-1),Ze=e("h3",{id:"_4-2-1-\u5B89\u88C5tomcat",tabindex:"-1"},[n("4.2.1 \u5B89\u88C5tomcat "),e("a",{class:"header-anchor",href:"#_4-2-1-\u5B89\u88C5tomcat","aria-hidden":"true"},"#")],-1),Je=e("pre",null,[e("code",null,`yum install tomcat tomcat-webapps tomcat-admin-webapps tomcat-docs-webapp tomcat-javadoc -y
`)],-1),Xe=e("h3",{id:"_4-2-2-\u542F\u52A8\u68C0\u67E5",tabindex:"-1"},[n("4.2.2 \u542F\u52A8\u68C0\u67E5 "),e("a",{class:"header-anchor",href:"#_4-2-2-\u542F\u52A8\u68C0\u67E5","aria-hidden":"true"},"#")],-1),Fe=e("pre",null,[e("code",null,`[root@Andu ~]# systemctl start tomcat

[root@Andu ~]# systemctl status tomcat

[root@Andu ~]# lsof -i:8080

COMMAND  PID  USER  FD  TYPE DEVICE SIZE/OFF NODE NAME

java  18915 tomcat  49u IPv6 61950   0t0 TCP *:webcache (LISTEN)
`)],-1),Ye=e("h3",{id:"_4-2-3-\u8BBF\u95EE\u6D4B\u8BD5",tabindex:"-1"},[n("4.2.3 \u8BBF\u95EE\u6D4B\u8BD5 "),e("a",{class:"header-anchor",href:"#_4-2-3-\u8BBF\u95EE\u6D4B\u8BD5","aria-hidden":"true"},"#")],-1),Qe=e("h3",{id:"_4-2-4-\u4FEE\u6539\u65E5\u5FD7\u4E3Ajson\u683C\u5F0F",tabindex:"-1"},[n("4.2.4 \u4FEE\u6539\u65E5\u5FD7\u4E3Ajson\u683C\u5F0F "),e("a",{class:"header-anchor",href:"#_4-2-4-\u4FEE\u6539\u65E5\u5FD7\u4E3Ajson\u683C\u5F0F","aria-hidden":"true"},"#")],-1),We=e("pre",null,[e("code",null,`[root@Andu ~]# vim /etc/tomcat/server.xml

[root@Andu ~]# cat -n /etc/tomcat/server.xml

\\----------------

  137     <Valve className="org.apache.catalina.valves.AccessLogValve" directory="logs"

  138         prefix="localhost_access_log." suffix=".txt"

  139         pattern="{&quot;clientip&quot;:&quot;%h&quot;,&quot;ClientUser&quot;:&quot;%l&quot;,&quot;authenticated&quot;:&quot;%u&quot;,&quot;AccessTime&quot;:&quot;%t&quot;,&quot;method&quot;:&quot;%r&quot;,&quot;status&quot;:&quot;%s&quot;,&quot;SendBytes&quot;:&quot;%b&quot;,&quot;Query?string&quot;:&quot;%q&quot;,&quot;partner&quot;:&quot;%{Referer}i&quot;,&quot;AgentVersion&quot;:&quot;%{User-Agent}i&quot;}"/>

\\----------------
`)],-1),en=e("h3",{id:"_4-2-5-\u91CD\u542F\u786E\u8BA4\u65E5\u5FD7\u662F\u5426\u4E3Ajson\u683C\u5F0F",tabindex:"-1"},[n("4.2.5 \u91CD\u542F\u786E\u8BA4\u65E5\u5FD7\u662F\u5426\u4E3Ajson\u683C\u5F0F "),e("a",{class:"header-anchor",href:"#_4-2-5-\u91CD\u542F\u786E\u8BA4\u65E5\u5FD7\u662F\u5426\u4E3Ajson\u683C\u5F0F","aria-hidden":"true"},"#")],-1),nn=e("pre",null,[e("code",null,`[root@Andu ~]# systemctl restart tomcat

[root@Andu ~]# tail -f /var/log/tomcat/localhost_access_log.2019-05-13.txt 

{"clientip":"192.168.47.1","ClientUser":"-","authenticated":"-","AccessTime":"[13/May/2019:13:18:03 +0800]","method":"GET /docs/images/tomcat.gif HTTP/1.1","status":"200","SendBytes":"2066","Query?string":"","partner":"http://192.168.10.66:8080/docs/realm-howto.html","AgentVersion":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.109 Safari/537.36"}
`)],-1),tn=e("p",null,"\u5728\u7EBF\u89E3\u6790\u6D4B\u8BD5\u6B63\u786E",-1),sn=e("h3",{id:"_4-2-6-filebeat\u914D\u7F6E",tabindex:"-1"},[n("4.2.6 filebeat\u914D\u7F6E "),e("a",{class:"header-anchor",href:"#_4-2-6-filebeat\u914D\u7F6E","aria-hidden":"true"},"#")],-1),ln=e("pre",null,[e("code",null,`[root@Andu ~]# cat /etc/filebeat/filebeat.yml 

filebeat.inputs:

\\- type: log

 enabled: true 

 paths:

  \\- /var/log/tomcat/localhost_access_log*

 json.keys_under_root: true

 json.overwrite_keys: true

tags: ["tomcat"][[A16\\]](#_msocom_16) 

setup.kibana:

 host: "192.168.10.66:5601"

output.elasticsearch:

 hosts: ["localhost:9200"]

 index: "tomcat-%{[beat.version]}-%{+yyyy.MM.dd}"

 when.contains:

\u200B    tags: "tomcat"

setup.template.name: "tomcat"

setup.template.pattern: "tomcatn-*"

setup.template.enabled: false

setup.template.overwrite: true[[A17\\]](#_msocom_17) 
`)],-1),an=e("p",null,'[tip type="success"] \u4EB2\u6D4B\u53EF\u7528\u914D\u7F6E\u4E3A\u5982\u4E0B [/tip]',-1),on=e("pre",null,[e("code",null,`filebeat.inputs:

\\#################tomcat#############

\\- type: log

 enabled: true

 paths:

  \\- /var/log/tomcat/localhost_access_log.*.txt

 json.keys_under_root: true

 json.overwrite_keys: true

\\#################output#############

setup.kibana:

 host: "192.168.10.66:5601"

output.elasticsearch:

 hosts: ["192.168.10.66:9200"]

 indices:

  \\- index: "tomcat-access-%{[beat.version]}-%{+yyyy.MM}"

setup.template.name: "tomcat"

setup.template.pattern: "tomcat-*"

setup.template.enabled: false

setup.template.overwrite: true
`)],-1),rn=e("h3",{id:"_4-2-7-\u914D\u7F6Etomcat\u6536\u96C6\u591A\u4E2A\u57DF\u540D\u7684\u65E5\u5FD7",tabindex:"-1"},[n("4.2.7 \u914D\u7F6Etomcat\u6536\u96C6\u591A\u4E2A\u57DF\u540D\u7684\u65E5\u5FD7 "),e("a",{class:"header-anchor",href:"#_4-2-7-\u914D\u7F6Etomcat\u6536\u96C6\u591A\u4E2A\u57DF\u540D\u7684\u65E5\u5FD7","aria-hidden":"true"},"#")],-1),dn=e("p",null,"\u914D\u7F6E\u591A\u4E2Ahost\u6807\u7B7E",-1),cn=e("h2",{id:"_4-3-\u6536\u96C6java\u65E5\u5FD7",tabindex:"-1"},[n("4.3 \u6536\u96C6java\u65E5\u5FD7 "),e("a",{class:"header-anchor",href:"#_4-3-\u6536\u96C6java\u65E5\u5FD7","aria-hidden":"true"},"#")],-1),hn=e("h3",{id:"_4-3-1-\u5B98\u65B9\u5730\u5740",tabindex:"-1"},[n("4.3.1 \u5B98\u65B9\u5730\u5740 "),e("a",{class:"header-anchor",href:"#_4-3-1-\u5B98\u65B9\u5730\u5740","aria-hidden":"true"},"#")],-1),_n=e("p",null,[e("a",{href:"https://www.elastic.co/guide/en/beats/filebeat/6.6/multiline-examples.html",target:"_blank",rel:"noreferrer"},"https://www.elastic.co/guide/en/beats/filebeat/6.6/multiline-examples.html")],-1),un=e("p",null,"\u56E0\u4E3Ajava\u65E5\u5FD7\u7684\u8F93\u51FA\u4FE1\u606F\u975E\u5E38\u591A\uFF0C\u9700\u8981\u5C06\u591A\u884C\u62FC\u6210\u4E00\u4E2A\u4E8B\u4EF6\uFF0C\u6240\u4EE5\u9700\u8981\u591A\u884C\u5339\u914D\u6A21\u5F0F",-1),pn=e("p",null,"\u56E0\u4E3Aelasticsearch\u672C\u8EAB\u5C31\u662Fjava\u5F00\u53D1\u7684\uFF0C\u6240\u4EE5\u6211\u4EEC\u53EF\u4EE5\u76F4\u63A5\u6536\u96C6ES\u7684\u65E5\u5FD7",-1),gn=e("h3",{id:"_4-3-2-filebeat\u914D\u7F6E",tabindex:"-1"},[n("4.3.2 filebeat\u914D\u7F6E "),e("a",{class:"header-anchor",href:"#_4-3-2-filebeat\u914D\u7F6E","aria-hidden":"true"},"#")],-1),mn=e("pre",null,[e("code",null,`[root@Andu ~]# cat /etc/filebeat/filebeat.yml    

filebeat.inputs:

\\- type: log

 enabled: true 

 paths:

  \\- /var/log/elasticsearch/elasticsearch.log

 multiline.pattern: '^\\['

 multiline.negate: true

 multiline.match: after

setup.kibana:

 host: "192.168.10.66:5601"

output.elasticsearch:

 hosts: ["localhost:9200"]

 index: "es-%{[beat.version]}-%{+yyyy.MM.dd}"

setup.template.name: "es"

setup.template.pattern: "es-*"

setup.template.enabled: false

setup.template.overwrite: true
`)],-1),fn=e("h2",{id:"_4-4-\u6536\u96C6docker\u65E5\u5FD7",tabindex:"-1"},[n("4.4 \u6536\u96C6docker\u65E5\u5FD7 "),e("a",{class:"header-anchor",href:"#_4-4-\u6536\u96C6docker\u65E5\u5FD7","aria-hidden":"true"},"#")],-1),bn=e("h3",{id:"_4-4-1-\u5B89\u88C5docker",tabindex:"-1"},[n("4.4.1 \u5B89\u88C5docker "),e("a",{class:"header-anchor",href:"#_4-4-1-\u5B89\u88C5docker","aria-hidden":"true"},"#")],-1),kn=e("pre",null,[e("code",null,`rm -fr /etc/yum.repos.d/local.repo

curl -o /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo

wget -O /etc/yum.repos.d/docker-ce.repo https://mirrors.ustc.edu.cn/docker-ce/linux/centos/docker-ce.repo

sed -i 's#download.docker.com#mirrors.tuna.tsinghua.edu.cn/docker-ce#g' /etc/yum.repos.d/docker-ce.repo

yum install docker-ce -y

systemctl start docker

vi /etc/docker/daemon.json

{

 "registry-mirrors": ["https://registry.docker-cn.com"]

 }

systemctl restart docker
`)],-1),vn=e("h3",{id:"_4-4-2-\u8FD0\u884Cnginx\u955C\u50CF",tabindex:"-1"},[n("4.4.2 \u8FD0\u884Cnginx\u955C\u50CF "),e("a",{class:"header-anchor",href:"#_4-4-2-\u8FD0\u884Cnginx\u955C\u50CF","aria-hidden":"true"},"#")],-1),xn=e("pre",null,[e("code",null,`docker pull nginx

docker run --name nginx -p 80:80 -d nginx

docker ps

docker logs -f nginx
`)],-1),yn=e("h3",{id:"_4-4-3-\u914D\u7F6Efilebeat\u6536\u96C6\u5355\u4E2Adocker\u65E5\u5FD7",tabindex:"-1"},[n("4.4.3 \u914D\u7F6Efilebeat\u6536\u96C6\u5355\u4E2Adocker\u65E5\u5FD7 "),e("a",{class:"header-anchor",href:"#_4-4-3-\u914D\u7F6Efilebeat\u6536\u96C6\u5355\u4E2Adocker\u65E5\u5FD7","aria-hidden":"true"},"#")],-1),wn=e("p",null,"\u5B98\u65B9\u4ECB\u7ECD\uFF1A",-1),jn=e("p",null,[e("a",{href:"https://www.elastic.co/guide/en/beats/filebeat/6.7/filebeat-input-docker.html",target:"_blank",rel:"noreferrer"},"https://www.elastic.co/guide/en/beats/filebeat/6.7/filebeat-input-docker.html")],-1),An=e("p",null,"\u9996\u5148\u67E5\u770Bdocker\u5BB9\u5668\u7684ID",-1),En=e("pre",null,[e("code",null,`docker inspect nginx-test|grep -w "Id"
`)],-1),Mn=e("p",null,"\u914D\u7F6E\u6587\u4EF6",-1),qn=e("pre",null,[e("code",null,`filebeat.inputs:

\\- type: docker

 containers.ids: 

  \\- '2338d5038f7a2eac96d84d6cf424fb1829bd754ec5e0df944bdd29ba6d61a54e'

 tags: ["docker-nginx"] 

output.elasticsearch:

 hosts: ["localhost:9200"]

 index: "docker-nginx-%{[beat.version]}-%{+yyyy.MM.dd}"

setup.template.name: "docker"

setup.template.pattern: "docker-*"

setup.template.enabled: false

setup.template.overwrite: true
`)],-1),Tn=e("h3",{id:"_4-4-4-\u4F7F\u7528\u901A\u914D\u7B26\u6536\u96C6\u6240\u6709\u5BB9\u5668\u7684\u65E5\u5FD7",tabindex:"-1"},[n("4.4.4 \u4F7F\u7528\u901A\u914D\u7B26\u6536\u96C6\u6240\u6709\u5BB9\u5668\u7684\u65E5\u5FD7 "),e("a",{class:"header-anchor",href:"#_4-4-4-\u4F7F\u7528\u901A\u914D\u7B26\u6536\u96C6\u6240\u6709\u5BB9\u5668\u7684\u65E5\u5FD7","aria-hidden":"true"},"#")],-1),Sn=e("p",null,"\u65B0\u7248\u672C\u7684filebeat\u589E\u52A0\u4E86\u6536\u96C6\u591A\u4E2A\u5BB9\u5668\u7684\u65E5\u5FD7\u7684\u9009\u9879",-1),$n=e("p",null,[e("a",{href:"https://www.elastic.co/guide/en/beats/filebeat/7.2/filebeat-input-container.html",target:"_blank",rel:"noreferrer"},"https://www.elastic.co/guide/en/beats/filebeat/7.2/filebeat-input-container.html")],-1),Ln=e("h3",{id:"_4-4-5-\u914D\u7F6Efilebeat\u901A\u8FC7\u6807\u7B7E\u6536\u96C6\u591A\u4E2A\u5BB9\u5668\u65E5\u5FD7",tabindex:"-1"},[n("4.4.5 \u914D\u7F6Efilebeat\u901A\u8FC7\u6807\u7B7E\u6536\u96C6\u591A\u4E2A\u5BB9\u5668\u65E5\u5FD7 "),e("a",{class:"header-anchor",href:"#_4-4-5-\u914D\u7F6Efilebeat\u901A\u8FC7\u6807\u7B7E\u6536\u96C6\u591A\u4E2A\u5BB9\u5668\u65E5\u5FD7","aria-hidden":"true"},"#")],-1),Kn=e("p",null,"\u5047\u5982\u6211\u4EEC\u6709\u591A\u4E2Adocker\u955C\u50CF\u6216\u8005\u91CD\u65B0\u63D0\u4EA4\u4E86\u65B0\u955C\u50CF\uFF0C\u90A3\u4E48\u76F4\u63A5\u6307\u5B9AID\u7684\u5C31\u4E0D\u662F\u592A\u65B9\u4FBF\u4E86\u3002",-1),In=e("p",null,"\u6211\u4EEC\u4ECE\u5F53\u524D\u7684\u5BB9\u5668\u63D0\u4EA4\u4E00\u4E2A\u65B0\u7684\u955C\u50CF\u5E76\u4E14\u8FD0\u884C\u8D77\u6765",-1),On=e("pre",null,[e("code",null,`docker commit nginx nginx:v2

docker images

docker run --name nginx -p 8080:80 -d nginx:v2
`)],-1),Cn=e("p",null,"\u6B64\u65F6\u6211\u4EEC\u7684\u5BB9\u5668\u76EE\u5F55\u4E0B\u5C31\u6709\u4E86\u4E24\u4E2A\u4E0D\u540C\u7684\u5BB9\u5668\u76EE\u5F55",-1),zn=e("pre",null,[e("code",null,`[root@elk-176 containers]# ls /var/lib/docker/containers/         

2338d5038f7a2eac96d84d6cf424fb1829bd754ec5e0df944bdd29ba6d61a54e 3bb5250e7e50a4ed8d1fae7a43d3bf4294864ac4e0af125ae5231cd9bd76b914
`)],-1),Nn=e("p",null,"\u5982\u679C\u76F4\u63A5\u914D\u7F6Efilebeat\u5B58\u5230es\u91CC\u672C\u53F0\u673A\u5668\u6240\u6709\u7684\u5BB9\u5668\u65E5\u5FD7\u90FD\u4F1A\u6DF7\u5728\u4E00\u8D77\u6CA1\u6709\u529E\u6CD5\u533A\u5206",-1),Dn=e("p",null,"\u591A\u5BB9\u5668\u65E5\u5FD7\u6536\u96C6\u5904\u7406\uFF1A",-1),Rn=e("p",null,"\u5176\u5B9E\u6536\u96C6\u7684\u65E5\u5FD7\u672C\u8D28\u6765\u8BF4\u8FD8\u662F\u6587\u4EF6\uFF0C\u800C\u8FD9\u4E2A\u65E5\u5FD7\u662F\u4EE5\u5BB9\u5668-json.log\u547D\u540D\u5B58\u653E\u5728\u9ED8\u8BA4\u76EE\u5F55\u4E0B\u7684json\u683C\u5F0F\u7684\u6587\u4EF6\uFF1A",-1),Pn=e("pre",null,[e("code",null,`[root@elk-176 ~]# head -1 /var/lib/docker/containers/2338d5038f7a2eac96d84d6cf424fb1829bd754ec5e0df944bdd29ba6d61a54e/2338d5038f7a2eac96d84d6cf424fb1829bd754ec5e0df944bdd29ba6d61a54e-json.log

{"log":"192.168.47.1 - - [23/May/2019:19:12:04 +0000] \\"GET / HTTP/1.1\\" 200 612 \\"-\\" \\"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/74.0.3729.157 Safari/537.36\\" \\"-\\"\\n","stream":"stdout","time":"2019-05-23T19:12:04.939212514Z"}
`)],-1),Bn=e("p",null,"\u4F46\u662F\u6BCF\u4E2A\u5BB9\u5668\u7684ID\u90FD\u4E0D\u4E00\u6837\uFF0C\u4E3A\u4E86\u533A\u5206\u4E0D\u540C\u670D\u52A1\u8FD0\u884C\u7684\u4E0D\u540C\u5BB9\u5668\uFF0C\u53EF\u4EE5\u4F7F\u7528docker-compose\u901A\u8FC7\u7ED9\u5BB9\u5668\u6DFB\u52A0labels\u6807\u7B7E\u6765\u4F5C\u4E3A\u533A\u5206",-1),Gn=e("p",null,"\u7136\u540Efilbeat\u628A\u5BB9\u5668\u65E5\u5FD7\u5F53\u4F5C\u666E\u901A\u7684json\u683C\u5F0F\u6765\u89E3\u6790\u5E76\u4F20\u8F93\u5230es",-1),Un=e("p",null,"\u64CD\u4F5C\u6B65\u9AA4\uFF1A",-1),Hn=e("p",null,"1.\u5B89\u88C5docker-compose",-1),Vn=e("pre",null,[e("code",null,`yum install -y python2-pip
`)],-1),Zn=e("p",null,"2.\u8FD9\u91CC\u4F7F\u7528pip\u5B89\u88C5\uFF0C\u9ED8\u8BA4\u6E90\u4E3A\u56FD\u5916\uFF0C\u53EF\u4EE5\u4F7F\u7528\u56FD\u5185\u52A0\u901F\uFF0C\u76F8\u5173\u7F51\u7AD9",-1),Jn=e("p",null,[e("a",{href:"https://mirrors.tuna.tsinghua.edu.cn/help/pypi/",target:"_blank",rel:"noreferrer"},"https://mirrors.tuna.tsinghua.edu.cn/help/pypi/")],-1),Xn=e("p",null,"pip\u52A0\u901F\u64CD\u4F5C\u547D\u4EE4",-1),Fn=e("pre",null,[e("code",null,`pip install -i https://pypi.tuna.tsinghua.edu.cn/simple pip -U

pip config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple
`)],-1),Yn=e("p",null,"3.\u7EE7\u7EED\u5B89\u88C5docker-compose",-1),Qn=e("pre",null,[e("code",null,`pip install docker-compose
`)],-1),Wn=e("p",null,"4.\u68C0\u67E5",-1),et=e("pre",null,[e("code",null,`docker-compose version
`)],-1),nt=e("p",null,"5.\u7F16\u5199docker-compose.yml",-1),tt=e("pre",null,[e("code",null,`[root@elk-176 ~]# cat docker-compose.yml 

version: '3'

services:

 nginx:

  image: nginx:v2
`)],-1),st=e("p",null,"# \u8BBE\u7F6Elabels",-1),lt=e("pre",null,[e("code",null,` labels:

   service: nginx

  \\# logging\u8BBE\u7F6E\u589E\u52A0labels.service

  logging:

   options:

\u200B    labels: "service"

  ports:

   \\- "8080:80"

 db:

  image: nginx:latest

  \\# \u8BBE\u7F6Elabels

  labels:

   service: db 

  \\# logging\u8BBE\u7F6E\u589E\u52A0labels.service

  logging:

   options:

\u200B    labels: "service"

  ports:

   \\- "80:80"
`)],-1),at=e("p",null,"6.\u6E05\u7406\u955C\u50CF",-1),it=e("pre",null,[e("code",null,`docker ps -a|awk 'NR>1{print "docker rm",$1}'|bash
`)],-1),ot=e("p",null,"7.\u8FD0\u884Cdocker-compose.yml",-1),rt=e("pre",null,[e("code",null,`docker-compose up -d
`)],-1),dt=e("p",null,"8.\u68C0\u67E5\u65E5\u5FD7\u662F\u5426\u589E\u52A0\u4E86lable\u6807\u7B7E",-1),ct=e("pre",null,[e("code",null,`[root@elk-176 ~]# tail -1 /var/lib/docker/containers/b2c1f4f7f5a2967fe7d12c1db124ae41f009ec663c71608575a4773beb6ca5f8/b2c1f4f7f5a2967fe7d12c1db124ae41f009ec663c71608575a4773beb6ca5f8-json.log

{"log":"192.168.47.1 - - [23/May/2019:13:22:32 +0000] \\"GET / HTTP/1.1\\" 304 0 \\"-\\" \\"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/74.0.3729.157 Safari/537.36\\" \\"-\\"\\n","stream":"stdout","attrs":{"service":"nginx"},"time":"2019-05-23T13:22:32.478708392Z"}
`)],-1),ht=e("p",null,"9.\u914D\u7F6Efilebeat",-1),_t=e("pre",null,[e("code",null,`[root@elk-176 ~]# cat /etc/filebeat/filebeat.yml   

filebeat.inputs:

\\- type: log

 enabled: true 

 paths:

  \\- /var/lib/docker/containers/*/*-json.log

 json.keys_under_root: true

 json.overwrite_keys: true

output.elasticsearch:

 hosts: ["192.168.10.66:9200"]

 indices:

  \\- index: "docker-nginx-%{[beat.version]}-%{+yyyy.MM.dd}"

   when.contains:

\u200B    attrs.service: "nginx"

  \\- index: "docker-db-%{[beat.version]}-%{+yyyy.MM.dd}"

   when.contains:

\u200B    attrs.service: "db"

setup.template.name: "docker"

setup.template.pattern: "docker-*"

setup.template.enabled: false

setup.template.overwrite: true
`)],-1),ut=e("h3",{id:"_4-4-6-\u914D\u7F6Efilebeat\u901A\u8FC7\u670D\u52A1\u7C7B\u578B\u548C\u65E5\u5FD7\u7C7B\u578B\u591A\u6761\u4EF6\u521B\u5EFA\u4E0D\u540C\u7D22\u5F15",tabindex:"-1"},[n("4.4.6 \u914D\u7F6Efilebeat\u901A\u8FC7\u670D\u52A1\u7C7B\u578B\u548C\u65E5\u5FD7\u7C7B\u578B\u591A\u6761\u4EF6\u521B\u5EFA\u4E0D\u540C\u7D22\u5F15 "),e("a",{class:"header-anchor",href:"#_4-4-6-\u914D\u7F6Efilebeat\u901A\u8FC7\u670D\u52A1\u7C7B\u578B\u548C\u65E5\u5FD7\u7C7B\u578B\u591A\u6761\u4EF6\u521B\u5EFA\u4E0D\u540C\u7D22\u5F15","aria-hidden":"true"},"#")],-1),pt=e("p",null,"\u76EE\u524D\u4E3A\u6B62\uFF0C\u5DF2\u7ECF\u53EF\u4EE5\u6309\u670D\u52A1\u6765\u6536\u96C6\u65E5\u5FD7\u4E86\uFF0C\u4F46\u662F\u9519\u8BEF\u65E5\u5FD7\u548C\u6B63\u786E\u65E5\u5FD7\u6DF7\u5728\u4E86\u4E00\u8D77\uFF0C\u4E0D\u597D\u533A\u5206\uFF0C\u6240\u4EE5\u53EF\u4EE5\u8FDB\u4E00\u6B65\u8FDB\u884C\u6761\u4EF6\u5224\u65AD\uFF0C\u6839\u636E\u670D\u52A1\u548C\u65E5\u5FD7\u7C7B\u578B\u521B\u5EFA\u4E0D\u540C\u7684\u7D22\u5F15",-1),gt=e("p",null,"filebeat\u914D\u7F6E\u6587\u4EF6",-1),mt=e("pre",null,[e("code",null,`[root@elk-176 ~]# cat /etc/filebeat/filebeat.yml     

filebeat.inputs:

\\- type: log

 enabled: true 

 paths:

  \\- /var/lib/docker/containers/*/*-json.log

 json.keys_under_root: true

 json.overwrite_keys: true

output.elasticsearch:

 hosts: ["192.168.10.66:9200"]

 indices:

  \\- index: "docker-nginx-access-%{[beat.version]}-%{+yyyy.MM.dd}"

   when.contains:

\u200B     attrs.service: "nginx"

\u200B     stream: "stdout"

  \\- index: "docker-nginx-error-%{[beat.version]}-%{+yyyy.MM.dd}"

   when.contains:

\u200B     attrs.service: "nginx"

\u200B     stream: "stderr"

  \\- index: "docker-db-access-%{[beat.version]}-%{+yyyy.MM.dd}"

   when.contains:

\u200B     attrs.service: "db"

\u200B     stream: "stdout"

  \\- index: "docker-db-error-%{[beat.version]}-%{+yyyy.MM.dd}"

   when.contains:

\u200B     attrs.service: "db"

\u200B     stream: "stderr"

setup.template.name: "docker"

setup.template.pattern: "docker-*"

setup.template.enabled: false

setup.template.overwrite: true
`)],-1),ft=e("h3",{id:"_4-4-7-\u9A8C\u8BC1\u63D0\u4EA4\u65B0\u955C\u50CF\u8FD0\u884C\u540E\u65E5\u5FD7\u6536\u96C6\u60C5\u51B5",tabindex:"-1"},[n("4.4.7 \u9A8C\u8BC1\u63D0\u4EA4\u65B0\u955C\u50CF\u8FD0\u884C\u540E\u65E5\u5FD7\u6536\u96C6\u60C5\u51B5 "),e("a",{class:"header-anchor",href:"#_4-4-7-\u9A8C\u8BC1\u63D0\u4EA4\u65B0\u955C\u50CF\u8FD0\u884C\u540E\u65E5\u5FD7\u6536\u96C6\u60C5\u51B5","aria-hidden":"true"},"#")],-1),bt=e("p",null,"1.\u63D0\u4EA4\u65B0\u955C\u50CF",-1),kt=e("pre",null,[e("code",null,`[root@elk-176 ~]# docker ps -a

CONTAINER ID    IMAGE        COMMAND         CREATED       STATUS           PORTS        NAMES

f92f4d747584    nginx:latest    "nginx -g 'daemon of\u2026"  45 minutes ago   Exited (0) 51 seconds ago            root_db_1

b2c1f4f7f5a2    nginx:v2      "nginx -g 'daemon of\u2026"  45 minutes ago   Exited (0) 51 seconds ago            root_nginx_1

[root@elk-176 ~]# docker commit root_nginx_1 nginx:v3     

sha256:4457e2b7afc719ef185c75c02031b11c1407efe2e2e57b85f0c9347d04a9ff00

[root@elk-176 ~]# docker commit root_db_1 nginx:v4

sha256:a7e8d8b3290c817194956aa06fc486ef928853121d9c6224fd64fe759c967dda

[root@elk-176 ~]# docker images

REPOSITORY     TAG         IMAGE ID      CREATED       SIZE

nginx        v4          a7e8d8b3290c    35 seconds ago   109MB

nginx        v3         4457e2b7afc7    45 seconds ago   109MB

nginx        v2         c181c6355cd9    2 hours ago     109MB

nginx        latest        53f3fd8007f7    2 weeks ago     109MB
`)],-1),vt=e("p",null,"2.\u4FEE\u6539\u5E76\u8FD0\u884Cdocker-compose",-1),xt=e("pre",null,[e("code",null,`[root@elk-176 ~]# cat docker-compose.yml 

version: '3'

services:

 nginx:

  image: nginx:v3

  \\# \u8BBE\u7F6Elabels

  labels:

   service: nginx

  \\# logging\u8BBE\u7F6E\u589E\u52A0labels.service

  logging:

   options:

\u200B    labels: "service"

  ports:

   \\- "8080:80"

 db:

  image: nginx:v4

  \\# \u8BBE\u7F6Elabels

  labels:

   service: db 

  \\# logging\u8BBE\u7F6E\u589E\u52A0labels.service

  logging:

   options:

\u200B    labels: "service"

  ports:

   \\- "80:80"

[root@elk-176 ~]# docker-compose up -d

Starting root_nginx_1 ... 

Starting root_nginx_1 ... done

Starting root_db_1  ... done

[root@elk-176 ~]# docker ps

CONTAINER ID    IMAGE        COMMAND         CREATED       STATUS       PORTS         NAMES

04308aa3928b    nginx:v4       "nginx -g 'daemon of\u2026"  30 seconds ago   Up 1 second     0.0.0.0:80->80/tcp   root_db_1

49d2e2210e6f    nginx:v3       "nginx -g 'daemon of\u2026"  30 seconds ago   Up 1 second     0.0.0.0:8080->80/tcp  root_nginx_1
`)],-1),yt=e("p",null,"3.\u8BBF\u95EE\u5E76\u67E5\u770B\u662F\u5426\u6709\u65B0\u6570\u636E\u751F\u6210",-1),wt=e("pre",null,[e("code",null,`curl logcalhost/zhangya.html

curl logcalhost:8080/zhangya.html
`)],-1),jt=e("p",null,"4.\u7ECF\u8FC7\u67E5\u770B\u53D1\u73B0\u5DF2\u7ECF\u6210\u529F\u6536\u96C6\u5230\u4E86\u65E5\u5FD7\uFF0C\u8FD9\u6837\u6211\u4EEC\u5C31\u505A\u5230\u4E86\u4E0D\u7528\u4FEE\u6539filebeat\u914D\u7F6E\u6587\u4EF6\u4E5F\u53EF\u4EE5\u6301\u7EED\u7684\u6536\u96C6\u65B0\u955C\u50CF\u7684\u65E5\u5FD7\u5E76\u6309\u5206\u7C7B\u521B\u5EFA\u4E0D\u540C\u7684\u7D22\u5F15",-1),At=e("h3",{id:"_4-4-8-\u4FEE\u6539docker\u5BB9\u5668\u5185\u65E5\u5FD7\u7C7B\u578B\u4E3Ajson",tabindex:"-1"},[n("4.4.8 \u4FEE\u6539docker\u5BB9\u5668\u5185\u65E5\u5FD7\u7C7B\u578B\u4E3Ajson "),e("a",{class:"header-anchor",href:"#_4-4-8-\u4FEE\u6539docker\u5BB9\u5668\u5185\u65E5\u5FD7\u7C7B\u578B\u4E3Ajson","aria-hidden":"true"},"#")],-1),Et=e("p",null,"\u521A\u624D\u6536\u96C6\u7684docker\u5185\u7684\u65E5\u5FD7\u7C7B\u578B\u4E3A\u666E\u901A\u683C\u5F0F\uFF0C\u5982\u679C\u6211\u4EEC\u4FEE\u6539\u4E3Ajson\u683C\u5F0F\u4F1A\u5982\u4F55\u5462\uFF1F",-1),Mt=e("h1",{id:"\u7B2C5\u7AE0-\u4F7F\u7528filledeat-modules\u914D\u7F6E",tabindex:"-1"},[n("\u7B2C5\u7AE0 \u4F7F\u7528filledeat modules\u914D\u7F6E "),e("a",{class:"header-anchor",href:"#\u7B2C5\u7AE0-\u4F7F\u7528filledeat-modules\u914D\u7F6E","aria-hidden":"true"},"#")],-1),qt=e("h2",{id:"_5-1-\u5B98\u65B9\u7F51\u5740",tabindex:"-1"},[n("5.1 \u5B98\u65B9\u7F51\u5740 "),e("a",{class:"header-anchor",href:"#_5-1-\u5B98\u65B9\u7F51\u5740","aria-hidden":"true"},"#")],-1),Tt=e("p",null,[e("a",{href:"https://www.elastic.co/guide/en/beats/filebeat/6.6/configuration-filebeat-modules.html",target:"_blank",rel:"noreferrer"},"https://www.elastic.co/guide/en/beats/filebeat/6.6/configuration-filebeat-modules.html")],-1),St=e("h2",{id:"_5-2-\u4F7F\u7528\u6A21\u7248\u914D\u7F6Enginx\u6B63\u5E38\u65E5\u5FD7",tabindex:"-1"},[n("5.2 \u4F7F\u7528\u6A21\u7248\u914D\u7F6Enginx\u6B63\u5E38\u65E5\u5FD7 "),e("a",{class:"header-anchor",href:"#_5-2-\u4F7F\u7528\u6A21\u7248\u914D\u7F6Enginx\u6B63\u5E38\u65E5\u5FD7","aria-hidden":"true"},"#")],-1),$t=e("p",null,"\u793E\u533A\u8BBA\u575B\uFF1A",-1),Lt=e("p",null,[e("a",{href:"https://discuss.elastic.co/t/filebeat-module-custom-index/181350",target:"_blank",rel:"noreferrer"},"https://discuss.elastic.co/t/filebeat-module-custom-index/181350")],-1),Kt=e("h3",{id:"_5-2-1-filebeat\u914D\u7F6E\u6587\u4EF6",tabindex:"-1"},[n("5.2.1 filebeat\u914D\u7F6E\u6587\u4EF6 "),e("a",{class:"header-anchor",href:"#_5-2-1-filebeat\u914D\u7F6E\u6587\u4EF6","aria-hidden":"true"},"#")],-1),It=e("pre",null,[e("code",null,`[root@Andu ~]# cat /etc/filebeat/filebeat.yml 

filebeat.config.modules:

 path: \${path.config}/modules.d/*.yml

 reload.enabled: true

setup.kibana:

 host: "192.168.10.66:5601"

output.elasticsearch:

 hosts: ["localhost:9200"]

 indices:

  \\- index: "nginx_access-%{[beat.version]}-%{+yyyy.MM.dd}"

   when.contains:

\u200B    fileset.name: "access"

  \\- index: "nginx_error-%{[beat.version]}-%{+yyyy.MM.dd}"

   when.contains:

\u200B    fileset.name: "error"

setup.template.name: "nginx"

setup.template.pattern: "nginx_*"

setup.template.enabled: false

setup.template.overwrite: true
`)],-1),Ot=e("h3",{id:"_5-2-2-filebeat-modules\u914D\u7F6E",tabindex:"-1"},[n("5.2.2 filebeat modules\u914D\u7F6E "),e("a",{class:"header-anchor",href:"#_5-2-2-filebeat-modules\u914D\u7F6E","aria-hidden":"true"},"#")],-1),Ct=e("p",null,"\u4F7F\u7528nginx\u6A21\u7248\u914D\u7F6E\u9700\u8981\u5B89\u88C52\u4E2A\u63D2\u4EF6\uFF0C\u9ED8\u8BA4\u4ECE\u5B98\u7F51\u4E0B\u8F7D\u901F\u5EA6\u592A\u6162\uFF0C\u53EF\u4EE5\u63D0\u524D\u4E0B\u8F7D\u7136\u540E\u79BB\u7EBF\u5B89\u88C5",-1),zt=e("p",null,[e("a",{href:"https://www.elastic.co/guide/en/elasticsearch/plugins/6.6/ingest-geoip.html",target:"_blank",rel:"noreferrer"},"https://www.elastic.co/guide/en/elasticsearch/plugins/6.6/ingest-geoip.html")],-1),Nt=e("p",null,[e("a",{href:"https://www.elastic.co/guide/en/elasticsearch/plugins/6.6/plugin-management-custom-url.html",target:"_blank",rel:"noreferrer"},"https://www.elastic.co/guide/en/elasticsearch/plugins/6.6/plugin-management-custom-url.html")],-1),Dt=e("p",null,"\u5728\u7EBF\u5B89\u88C5\uFF1A",-1),Rt=e("pre",null,[e("code",null,`[root@Andu ~]# /usr/share/elasticsearch/bin/elasticsearch-plugin install ingest-user-agent

[root@Andu ~]# /usr/share/elasticsearch/bin/elasticsearch-plugin install ingest-geoip
`)],-1),Pt=e("p",null,"\u79BB\u7EBF\u4E0B\u8F7D\u5B89\u88C5\uFF1A",-1),Bt=e("pre",null,[e("code",null,`[root@Andu ~]# wget https://artifacts.elastic.co/downloads/elasticsearch-plugins/ingest-user-agent/ingest-user-agent-6.6.0.zip

[root@Andu ~]# wget https://artifacts.elastic.co/downloads/elasticsearch-plugins/ingest-geoip/ingest-geoip-6.6.0.zip

[root@Andu ~]# /usr/share/elasticsearch/bin/elasticsearch-plugin install file:///root/ingest-geoip-6.6.0.zip 

[root@Andu ~]# /usr/share/elasticsearch/bin/elasticsearch-plugin install file:///root/ingest-user-agent-6.6.0.zip 
`)],-1),Gt=e("p",null,"\u6FC0\u6D3Bnginx\u6A21\u5757\uFF1A",-1),Ut=e("pre",null,[e("code",null,`[root@Andu ~]# filebeat modules enable nginx      

[root@Andu ~]# egrep -v "#|^$" /etc/filebeat/modules.d/nginx.yml    

\\- module: nginx

 access:

  enabled: true

  var.paths: ["/var/log/nginx/access.log"]

 error:

  enabled: true

  var.paths: ["/var/log/nginx/error.log"
`)],-1),Ht=e("p",null,"\u6CE8\u610F\uFF1A6.7\u4E4B\u540E\u8FD9\u4E24\u4E2A\u63D2\u4EF6\u9ED8\u8BA4\u96C6\u6210\u5230\u4E86elasticsearch\uFF0C\u4E0D\u9700\u8981\u5355\u72EC\u5B89\u88C5\u4E86",-1),Vt=e("h2",{id:"_5-3-\u4F7F\u7528\u6A21\u5757\u6536\u96C6\u7CFB\u7EDF\u65E5\u5FD7message\u548Csecure\u65E5\u5FD7",tabindex:"-1"},[n("5.3 \u4F7F\u7528\u6A21\u5757\u6536\u96C6\u7CFB\u7EDF\u65E5\u5FD7message\u548Csecure\u65E5\u5FD7 "),e("a",{class:"header-anchor",href:"#_5-3-\u4F7F\u7528\u6A21\u5757\u6536\u96C6\u7CFB\u7EDF\u65E5\u5FD7message\u548Csecure\u65E5\u5FD7","aria-hidden":"true"},"#")],-1),Zt=e("p",null,"\u5982\u679C\u4E0D\u9700\u8981\u8F6C\u6362\uFF0C\u4E5F\u53EF\u4EE5\u76F4\u63A5\u6309\u666E\u901A\u65E5\u5FD7\u6A21\u5F0F\u6536\u96C6message\u548Csecure\u65E5\u5FD7",-1),Jt=e("h2",{id:"_5-4-\u5BFC\u5165kibana\u89C6\u56FE",tabindex:"-1"},[n("5.4 \u5BFC\u5165kibana\u89C6\u56FE "),e("a",{class:"header-anchor",href:"#_5-4-\u5BFC\u5165kibana\u89C6\u56FE","aria-hidden":"true"},"#")],-1),Xt=e("p",null,"\u9ED8\u8BA4\u5982\u679C\u4F7F\u7528filbeat\u6A21\u7248\u5BFC\u5165\u89C6\u56FE\u4F1A\u628A\u6240\u6709\u7684\u670D\u52A1\u90FD\u5BFC\u5165\u8FDB\u53BB,\u800C\u6211\u4EEC\u5B9E\u9645\u4E0A\u5E76\u4E0D\u9700\u8981\u8FD9\u4E48\u591A\u89C6\u56FE\uFF0C",-1),Ft=e("p",null,"\u800C\u4E14\u9ED8\u8BA4\u7684\u89C6\u56FE\u6A21\u7248\u53EA\u80FD\u5339\u914Dfilebeat-*\u5F00\u5934\u7684\u7D22\u5F15\uFF0C\u6240\u4EE5\u8FD9\u91CC\u6211\u4EEC\u67092\u4E2A\u9700\u8981\u9700\u8981\u89E3\u51B3\uFF1A",-1),Yt=e("p",null,"1.\u901A\u8FC7\u4E00\u5B9A\u5904\u7406\u53EA\u5BFC\u5165\u6211\u4EEC\u9700\u8981\u7684\u6A21\u7248",-1),Qt=e("p",null,"2.\u5BFC\u5165\u7684\u89C6\u56FE\u6A21\u7248\u7D22\u5F15\u540D\u79F0\u53EF\u4EE5\u81EA\u5B9A\u4E49",-1),Wt=e("p",null,"\u89E3\u51B3\u65B9\u6CD5\uFF1A",-1),es=e("p",null,"1.\u5907\u4EFD\u4E00\u4EFDfilebeat\u7684kibana\u89C6\u56FE\uFF0C\u5220\u9664\u4E0D\u9700\u8981\u7684\u89C6\u56FE\u6A21\u7248\u6587\u4EF6",-1),ns=e("p",null,"2.\u4FEE\u6539\u89C6\u56FE\u6587\u4EF6\u91CC\u9ED8\u8BA4\u7684\u7D22\u5F15\u540D\u79F0\u4E3A\u6211\u4EEC\u9700\u8981\u7684\u7D22\u5F15\u540D\u79F0",-1),ts=e("pre",null,[e("code",null,`cp -a /usr/share/filebeat/kibana /root

find . -type f ! -name "*nginx*"|xargs rm -rf

sed -i 's#filebeat\\-\\*#nginx\\-\\*#g' Filebeat-nginx-overview.json 
`)],-1),ss=e("p",null,"\u66FF\u6362\u7D22\u5F15\u540D\u79F0",-1),ls=e("pre",null,[e("code",null,`filebeat setup --dashboards -E setup.dashboards.directory=/root/kibana/
`)],-1),as=e("h2",{id:"_5-5-\u4F7F\u7528\u6A21\u5757\u6536\u96C6mysql\u65E5\u5FD7\u548C\u6162\u65E5\u5FD7",tabindex:"-1"},[n("5.5 \u4F7F\u7528\u6A21\u5757\u6536\u96C6mysql\u65E5\u5FD7\u548C\u6162\u65E5\u5FD7 "),e("a",{class:"header-anchor",href:"#_5-5-\u4F7F\u7528\u6A21\u5757\u6536\u96C6mysql\u65E5\u5FD7\u548C\u6162\u65E5\u5FD7","aria-hidden":"true"},"#")],-1),is=e("h2",{id:"_5-6-\u4F7F\u7528\u6A21\u5757\u6536\u96C6mongo\u65E5\u5FD7\u548Credis\u65E5\u5FD7",tabindex:"-1"},[n("5.6 \u4F7F\u7528\u6A21\u5757\u6536\u96C6mongo\u65E5\u5FD7\u548Credis\u65E5\u5FD7 "),e("a",{class:"header-anchor",href:"#_5-6-\u4F7F\u7528\u6A21\u5757\u6536\u96C6mongo\u65E5\u5FD7\u548Credis\u65E5\u5FD7","aria-hidden":"true"},"#")],-1),os=e("h1",{id:"\u7B2C6\u7AE0-\u4F7F\u7528\u7F13\u5B58\u6536\u96C6\u65E5\u5FD7",tabindex:"-1"},[n("\u7B2C6\u7AE0 \u4F7F\u7528\u7F13\u5B58\u6536\u96C6\u65E5\u5FD7 "),e("a",{class:"header-anchor",href:"#\u7B2C6\u7AE0-\u4F7F\u7528\u7F13\u5B58\u6536\u96C6\u65E5\u5FD7","aria-hidden":"true"},"#")],-1),rs=e("p",null,"\u5F53\u65E5\u5FD7\u7684\u6570\u91CF\u975E\u5E38\u591A\u7684\u65F6\u5019\uFF0C\u53EF\u80FD\u9700\u8981\u5F15\u5165\u7F13\u5B58\u5C42\u4F5C\u4E3A\u4E34\u65F6\u5B58\u50A8\u6570\u636E\u7684\u5730\u65B9\uFF0C\u9632\u6B62\u56E0\u4E3AES\u5904\u7406\u4E0D\u8FC7\u6765\u5BFC\u81F4\u65E5\u5FD7\u4E22\u5931\u7684\u60C5\u51B5\u3002",-1),ds=e("p",null,"filebeat\u652F\u6301\u5C06\u65E5\u5FD7\u53D1\u9001\u5230redis\u6216\u8005kafka\u4F5C\u4E3A\u6D88\u606F\u961F\u5217\u7F13\u5B58\u3002",-1),cs=e("p",null,"\u4F46\u662F\u4F7F\u7528\u4E86\u7F13\u5B58\u5C42\uFF0C\u5C31\u4E0D\u80FD\u4F7F\u7528\u6A21\u7248\u6765\u914D\u7F6E\u65E5\u5FD7\u6536\u96C6\u4E86\u3002",-1),hs=e("p",null,"\u6240\u4EE5\u6700\u597D\u65E5\u5FD7\u662Fjson\u683C\u5F0F",-1),_s=e("h2",{id:"_6-1-\u4F7F\u7528\u5355\u53F0redis\u4F5C\u4E3A\u7F13\u5B58",tabindex:"-1"},[n("6.1 \u4F7F\u7528\u5355\u53F0redis\u4F5C\u4E3A\u7F13\u5B58 "),e("a",{class:"header-anchor",href:"#_6-1-\u4F7F\u7528\u5355\u53F0redis\u4F5C\u4E3A\u7F13\u5B58","aria-hidden":"true"},"#")],-1),us=e("p",null,"\u8FD9\u91CC\u9700\u8981\u8BF4\u660E\uFF0C\u5982\u679C\u4F7F\u7528redis\u4F5C\u4E3A\u7F13\u5B58",-1),ps=e("p",null,"\u53EF\u4EE5\u5C06\u4E0D\u540C\u7684\u65E5\u5FD7\u7C7B\u578B\u5355\u72EC\u5199\u6210\u4E00\u4E2A\u952E\uFF0C\u8FD9\u6837\u597D\u5904\u662F\u6E05\u6670\uFF0C\u4F46\u662F\u7F3A\u70B9\u662Flogstash\u5199\u8D77\u6765\u8D77\u6765\u590D\u6742",-1),gs=e("p",null,"\u4E5F\u53EF\u4EE5\u5C06\u6240\u6709\u7684\u65E5\u5FD7\u5168\u90E8\u5199\u5165\u5230\u4E00\u4E2A\u952E\u4E2D\uFF0C\u7136\u540E\u9760\u540E\u7AEF\u7684logstash\u53BB\u8FC7\u6EE4\u5904\u7406\u3002",-1),ms=e("h3",{id:"_6-1-1-\u5B89\u88C5\u542F\u52A8\u6D4B\u8BD5redis",tabindex:"-1"},[n("6.1.1 \u5B89\u88C5\u542F\u52A8\u6D4B\u8BD5redis "),e("a",{class:"header-anchor",href:"#_6-1-1-\u5B89\u88C5\u542F\u52A8\u6D4B\u8BD5redis","aria-hidden":"true"},"#")],-1),fs=e("pre",null,[e("code",null,`[root@Andu ~]# yum install redis -y

[root@Andu ~]# systemctl status redis

[root@Andu ~]# redis-cli 

127.0.0.1:6379> set k1 v1

OK

127.0.0.1:6379> GEt k1

"v1"

127.0.0.1:6379>
`)],-1),bs=e("h3",{id:"_6-1-2-\u914D\u7F6Enginx\u7684json\u65E5\u5FD7",tabindex:"-1"},[n("6.1.2 \u914D\u7F6Enginx\u7684json\u65E5\u5FD7 "),e("a",{class:"header-anchor",href:"#_6-1-2-\u914D\u7F6Enginx\u7684json\u65E5\u5FD7","aria-hidden":"true"},"#")],-1),ks=e("p",null,"\u5C06nginx\u7684\u65E5\u5FD7\u8C03\u6574\u4E3Ajson\u683C\u5F0F",-1),vs=e("pre",null,[e("code",null,`  log_format json '{ "time_local": "$time_local", '

\u200B              '"remote_addr": "$remote_addr", '

\u200B              '"referer": "$http_referer", '

\u200B              '"request": "$request", '

\u200B              '"status": $status, '

\u200B              '"bytes": $body_bytes_sent, '

\u200B              '"agent": "$http_user_agent", '

\u200B              '"x_forwarded": "$http_x_forwarded_for", '

\u200B              '"up_addr": "$upstream_addr",'

\u200B              '"up_host": "$upstream_http_host",'

\u200B              '"upstream_time": "$upstream_response_time",'

\u200B              '"request_time": "$request_time"' ' }';
`)],-1),xs=e("h3",{id:"_6-1-3-\u914D\u7F6Efilebeat\u5199\u5165\u5230\u4E0D\u540C\u7684key\u4E2D",tabindex:"-1"},[n("6.1.3 \u914D\u7F6Efilebeat\u5199\u5165\u5230\u4E0D\u540C\u7684key\u4E2D "),e("a",{class:"header-anchor",href:"#_6-1-3-\u914D\u7F6Efilebeat\u5199\u5165\u5230\u4E0D\u540C\u7684key\u4E2D","aria-hidden":"true"},"#")],-1),ys=e("pre",null,[e("code",null,`[root@Andu ~]# cat /etc/filebeat/filebeat.yml 

filebeat.inputs:

\\- type: log

 enabled: true 

 paths:

  \\- /var/log/nginx/access.log

 json.keys_under_root: true

 json.overwrite_keys: true

 tags: ["access"]

\\- type: log

 enabled: true 

 paths:

  \\- /var/log/nginx/error.log

 tags: ["error"]

setup.template.settings:

 index.number_of_shards: 3

setup.kibana:

 host: "192.168.10.66:5601"

output.redis:

 hosts: ["localhost"]

 keys:

  \\- key: "nginx_access"  

   when.contains:

\u200B    tags: "access"

  \\- key: "nginx_error"

   when.contains:

\u200B    tags: "error"
`)],-1),ws=e("h3",{id:"_6-1-4-\u914D\u7F6Elogstash\u8BFB\u53D6\u4E0D\u540C\u7684key",tabindex:"-1"},[n("6.1.4 \u914D\u7F6Elogstash\u8BFB\u53D6\u4E0D\u540C\u7684key "),e("a",{class:"header-anchor",href:"#_6-1-4-\u914D\u7F6Elogstash\u8BFB\u53D6\u4E0D\u540C\u7684key","aria-hidden":"true"},"#")],-1),js=e("pre",null,[e("code",null,`[root@Andu ~]# cat /etc/logstash/conf.d/redis.conf  

input {

 redis {

  host => "127.0.0.1"

  port => "6379"

  db => "0"

  key => "nginx_access"

  data_type => "list"

 }

 redis {

  host => "127.0.0.1"

  port => "6379"

  db => "0"

  key => "nginx_error"

  data_type => "list"

 }

}

 

filter {

 mutate {

  convert => ["upstream_time", "float"]

  convert => ["request_time", "float"]

 }

}

 

output {

  stdout {}

  if "access" in [tags] {

   elasticsearch {

\u200B    hosts => "http://localhost:9200"

\u200B    manage_template => false

\u200B    index => "nginx_access-%{+yyyy.MM.dd}"

   }

  }

  if "error" in [tags] {

   elasticsearch {

\u200B    hosts => "http://localhost:9200"

\u200B    manage_template => false

\u200B    index => "nginx_error-%{+yyyy.MM.dd}"

   }

  }

}
`)],-1),As=e("h3",{id:"_6-1-5-filebeat\u6536\u96C6\u65E5\u5FD7\u5199\u5165\u5230\u4E00\u4E2Akey\u4E2D",tabindex:"-1"},[n("6.1.5 filebeat\u6536\u96C6\u65E5\u5FD7\u5199\u5165\u5230\u4E00\u4E2Akey\u4E2D "),e("a",{class:"header-anchor",href:"#_6-1-5-filebeat\u6536\u96C6\u65E5\u5FD7\u5199\u5165\u5230\u4E00\u4E2Akey\u4E2D","aria-hidden":"true"},"#")],-1),Es=e("pre",null,[e("code",null,`[root@Andu ~]# cat /etc/filebeat/filebeat.yml 

filebeat.inputs:

\\- type: log

 enabled: true 

 paths:

  \\- /var/log/nginx/access.log

 json.keys_under_root: true

 json.overwrite_keys: true

 tags: ["access"]

\\- type: log

 enabled: true 

 paths:

  \\- /var/log/nginx/error.log

 tags: ["error"]

setup.template.settings:

 index.number_of_shards: 3

setup.kibana:

 host: "192.168.10.66:5601"

output.redis:

 hosts: ["localhost"]

 key: "filebeat"
`)],-1),Ms=e("h3",{id:"_6-1-6-logstash\u6839\u636Etag\u533A\u5206\u4E00\u4E2Akey\u91CC\u7684\u4E0D\u540C\u65E5\u5FD7",tabindex:"-1"},[n("6.1.6 logstash\u6839\u636Etag\u533A\u5206\u4E00\u4E2Akey\u91CC\u7684\u4E0D\u540C\u65E5\u5FD7 "),e("a",{class:"header-anchor",href:"#_6-1-6-logstash\u6839\u636Etag\u533A\u5206\u4E00\u4E2Akey\u91CC\u7684\u4E0D\u540C\u65E5\u5FD7","aria-hidden":"true"},"#")],-1),qs=e("p",null,"[root@Andu ~]# cat /etc/logstash/conf.d/redis.conf",-1),Ts=e("pre",null,[e("code",null,`input {

 redis {

  host => "127.0.0.1"

  port => "6379"

  db => "0"

  key => "filebeat"

  data_type => "list"

 }

}

filter {

 mutate {

  convert => ["upstream_time", "float"]

  convert => ["request_time", "float"]

 }

}

output {

  if "access" in [tags] {

   elasticsearch {

\u200B    hosts => "http://localhost:9200"

\u200B    manage_template => false

\u200B    index => "nginx_access-%{+yyyy.MM.dd}"

   }

  }

  if "error" in [tags] {

   elasticsearch {

\u200B    hosts => "http://localhost:9200"

\u200B    manage_template => false

\u200B    index => "nginx_error-%{+yyyy.MM.dd}"

   }

  }

}
`)],-1),Ss=e("h2",{id:"_6-2-\u4F7F\u7528nginx-keepalived\u4EE3\u7406\u591A\u53F0redis",tabindex:"-1"},[n("6.2 \u4F7F\u7528nginx+keepalived\u4EE3\u7406\u591A\u53F0redis "),e("a",{class:"header-anchor",href:"#_6-2-\u4F7F\u7528nginx-keepalived\u4EE3\u7406\u591A\u53F0redis","aria-hidden":"true"},"#")],-1),$s=e("h3",{id:"_6-2-1-\u89E3\u51B3\u65B9\u6848\u4ECB\u7ECD",tabindex:"-1"},[n("6.2.1 \u89E3\u51B3\u65B9\u6848\u4ECB\u7ECD "),e("a",{class:"header-anchor",href:"#_6-2-1-\u89E3\u51B3\u65B9\u6848\u4ECB\u7ECD","aria-hidden":"true"},"#")],-1),Ls=e("p",null,"\u4E0A\u9762\u6211\u4EEC\u5B9E\u9A8C\u4E86\u5355\u53F0redis\u4F5C\u4E3A\u6536\u96C6\u65E5\u5FD7\u7684\u7F13\u5B58\u5C42\uFF0C\u4F46\u662F\u5355\u53F0redis\u5B58\u5728\u4E00\u4E2A\u95EE\u9898\uFF0C\u5C31\u662F\u5355\u70B9\u6545\u969C",-1),Ks=e("p",null,"\u867D\u7136\u53EF\u4EE5\u505A\u6301\u4E45\u5316\u5904\u7406\uFF0C\u4F46\u662F\u52A0\u5165\u670D\u52A1\u5668\u574F\u6389\u6216\u8005\u4FEE\u590D\u65F6\u95F4\u672A\u77E5\u7684\u60C5\u51B5\u4E0B\u8FD8\u662F\u6709\u53EF\u80FD\u4F1A\u4E22\u6570\u636E\u3002",-1),Is=e("p",null,"redis\u96C6\u7FA4\u65B9\u6848\u6709\u54E8\u5175\u548C\u96C6\u7FA4\uFF0C\u4F46\u53EF\u60DC\u7684\u662Ffilebeat\u548Clogstash\u90FD\u4E0D\u652F\u6301\u8FD9\u4E24\u79CD\u65B9\u6848\u3002",-1),Os=e("p",null,"\u4E0D\u8FC7\u5229\u7528\u6211\u4EEC\u76EE\u524D\u6240\u5B66\u7684\u77E5\u8BC6\u5B8C\u5168\u53EF\u4EE5\u89E3\u51B3\u8FD9\u4E2A\u95EE\u9898\uFF0C\u867D\u7136\u4E0D\u662F\u5F7B\u5E95\u89E3\u51B3\uFF0C\u4F46\u662F\u5DF2\u7ECF\u5F88\u597D\u4E86",-1),Cs=e("p",null,"\u65B9\u6848\u5982\u4E0B\uFF1A",-1),zs=e("p",null,"1.\u4F7F\u7528nginx+keepalived\u53CD\u5411\u4EE3\u7406\u8D1F\u8F7D\u5747\u8861\u5230\u540E\u9762\u7684\u591A\u53F0redis",-1),Ns=e("p",null,"2.\u8003\u8651\u5230redis\u6545\u969C\u5207\u6362\u4E2D\u6570\u636E\u4E00\u81F4\u6027\u7684\u95EE\u9898\uFF0C\u6240\u4EE5\u6700\u597D\u6211\u4EEC\u53EA\u4F7F\u75282\u53F0redis,\u5E76\u4E14\u53EA\u5DE5\u4F5C\u4E00\u53F0\uFF0C\u53E6\u5916\u4E00\u53F0\u4F5C\u4E3Abackup\uFF0C\u53EA\u6709\u7B2C\u4E00\u53F0\u574F\u6389\u540E\uFF0C\u7B2C\u4E8C\u53F0\u624D\u4F1A\u5DE5\u4F5C\u3002",-1),Ds=e("p",null,"3.filebeat\u7684oputut\u7684redis\u5730\u5740\u4E3Akeepalived\u7684\u865A\u62DFIP",-1),Rs=e("p",null,"4.logstash\u53EF\u4EE5\u542F\u52A8\u591A\u4E2A\u8282\u70B9\u6765\u52A0\u901F\u8BFB\u53D6redis\u7684\u6570\u636E",-1),Ps=e("p",null,"5.\u540E\u7AEF\u53EF\u4EE5\u91C7\u7528\u591A\u53F0es\u96C6\u7FA4\u6765\u505A\u652F\u6491",-1),Bs=e("h3",{id:"_6-2-2-nginx\u914D\u7F6E\u6587\u4EF6",tabindex:"-1"},[n("6.2.2 nginx\u914D\u7F6E\u6587\u4EF6 "),e("a",{class:"header-anchor",href:"#_6-2-2-nginx\u914D\u7F6E\u6587\u4EF6","aria-hidden":"true"},"#")],-1),Gs=e("p",null,"\u6CE8\u610F\uFF1A\u6DFB\u52A0stream\u6A21\u5757\uFF0C\u8981\u5728nginx.conf\u91CC\u6700\u540E\u6DFB\u52A0\uFF0C\u800C\u4E0D\u662F\u5728conf.d\u91CC\u9762\u6DFB\u52A0\u5B50\u914D\u7F6E",-1),Us=e("pre",null,[e("code",null,`[root@lb02 ~]# cat /etc/nginx/nginx.conf

..........................

stream {

 upstream redis {

   server 10.0.0.51:6381 max_fails=2 fail_timeout=10s;

   server 10.0.0.51:6382 max_fails=2 fail_timeout=10s backup;

 }

 

 server {

\u200B     listen 6379;

\u200B     proxy_connect_timeout 1s;

\u200B     proxy_timeout 3s;

\u200B     proxy_pass redis;

 }

}
`)],-1),Hs=e("h3",{id:"_6-2-3-redis\u914D\u7F6E",tabindex:"-1"},[n("6.2.3 redis\u914D\u7F6E "),e("a",{class:"header-anchor",href:"#_6-2-3-redis\u914D\u7F6E","aria-hidden":"true"},"#")],-1),Vs=e("pre",null,[e("code",null,`[root@db01 /opt/redis_6381/conf]# cat /opt/redis_6381/conf/redis_6381.conf       

bind 10.0.0.51

port 6381

daemonize yes

pidfile /opt/redis_6381/pid/redis_6381.pid

logfile /opt/redis_6381/logs/redis_6381.log

databases 16

save 900 1

save 300 10

save 60 10000

stop-writes-on-bgsave-error yes

rdbcompression yes

rdbchecksum yes

dbfilename redis_6381.rdb

dir /data/redis_6381
`)],-1),Zs=e("h3",{id:"_6-2-4-\u6A21\u62DF\u6545\u969C\u6D4B\u8BD5",tabindex:"-1"},[n("6.2.4 \u6A21\u62DF\u6545\u969C\u6D4B\u8BD5 "),e("a",{class:"header-anchor",href:"#_6-2-4-\u6A21\u62DF\u6545\u969C\u6D4B\u8BD5","aria-hidden":"true"},"#")],-1),Js=e("h3",{id:"_6-2-5-logstash\u914D\u7F6E",tabindex:"-1"},[n("6.2.5 logstash\u914D\u7F6E "),e("a",{class:"header-anchor",href:"#_6-2-5-logstash\u914D\u7F6E","aria-hidden":"true"},"#")],-1),Xs=e("h3",{id:"_6-2-6-\u4F7F\u7528supervisor\u6279\u91CF\u7BA1\u7406\u591A\u4E2Alogstash\u8FDB\u7A0B",tabindex:"-1"},[n("6.2.6 \u4F7F\u7528supervisor\u6279\u91CF\u7BA1\u7406\u591A\u4E2Alogstash\u8FDB\u7A0B "),e("a",{class:"header-anchor",href:"#_6-2-6-\u4F7F\u7528supervisor\u6279\u91CF\u7BA1\u7406\u591A\u4E2Alogstash\u8FDB\u7A0B","aria-hidden":"true"},"#")],-1),Fs=e("h2",{id:"_6-3-\u4F7F\u7528kafka\u4F5C\u4E3A\u7F13\u5B58",tabindex:"-1"},[n("6.3 \u4F7F\u7528kafka\u4F5C\u4E3A\u7F13\u5B58 "),e("a",{class:"header-anchor",href:"#_6-3-\u4F7F\u7528kafka\u4F5C\u4E3A\u7F13\u5B58","aria-hidden":"true"},"#")],-1),Ys=e("h3",{id:"_6-3-1-\u4ECB\u7ECD",tabindex:"-1"},[n("6.3.1 \u4ECB\u7ECD "),e("a",{class:"header-anchor",href:"#_6-3-1-\u4ECB\u7ECD","aria-hidden":"true"},"#")],-1),Qs=e("h3",{id:"_6-3-2-zookeeper\u5B89\u88C5\u914D\u7F6E",tabindex:"-1"},[n("6.3.2 zookeeper\u5B89\u88C5\u914D\u7F6E "),e("a",{class:"header-anchor",href:"#_6-3-2-zookeeper\u5B89\u88C5\u914D\u7F6E","aria-hidden":"true"},"#")],-1),Ws=e("h3",{id:"_6-3-3-kafka\u5B89\u88C5\u914D\u7F6E",tabindex:"-1"},[n("6.3.3 kafka\u5B89\u88C5\u914D\u7F6E "),e("a",{class:"header-anchor",href:"#_6-3-3-kafka\u5B89\u88C5\u914D\u7F6E","aria-hidden":"true"},"#")],-1),el=e("h3",{id:"_6-3-4-kafka\u96C6\u7FA4\u6536\u53D1\u6D88\u606F\u6D4B\u8BD5",tabindex:"-1"},[n("6.3.4 kafka\u96C6\u7FA4\u6536\u53D1\u6D88\u606F\u6D4B\u8BD5 "),e("a",{class:"header-anchor",href:"#_6-3-4-kafka\u96C6\u7FA4\u6536\u53D1\u6D88\u606F\u6D4B\u8BD5","aria-hidden":"true"},"#")],-1),nl=e("h3",{id:"_6-3-5-filebeat\u914D\u7F6E",tabindex:"-1"},[n("6.3.5 filebeat\u914D\u7F6E "),e("a",{class:"header-anchor",href:"#_6-3-5-filebeat\u914D\u7F6E","aria-hidden":"true"},"#")],-1),tl=e("pre",null,[e("code",null,`[root@kafka-175 conf.d]# cat /etc/filebeat/filebeat.yml 

filebeat.inputs:

\\- type: log

 enabled: true 

 paths:

  \\- /var/log/nginx/access.log

 json.keys_under_root: true

 json.overwrite_keys: true

 tags: ["access"]

\\- type: log

 enabled: true 

 paths:

  \\- /var/log/nginx/error.log

 tags: ["error"]

setup.template.settings:

 index.number_of_shards: 3

setup.kibana:

 host: "192.168.10.66:5601"

output.kafka:

 hosts: ["192.168.10.66:9092","192.168.47.176:9092","192.168.47.177:9092"]

 topic: elklog
`)],-1),sl=e("h3",{id:"_6-3-6-logstash\u914D\u7F6E",tabindex:"-1"},[n("6.3.6 logstash\u914D\u7F6E "),e("a",{class:"header-anchor",href:"#_6-3-6-logstash\u914D\u7F6E","aria-hidden":"true"},"#")],-1),ll=e("pre",null,[e("code",null,`[root@kafka-175 conf.d]# cat /etc/logstash/conf.d/kafka.conf

input{

 kafka{

  bootstrap_servers=>"192.168.10.66:9092"

  topics=>["elklog"]

  group_id=>"logstash"

  codec => "json"

 }

}

filter {

 mutate {

  convert => ["upstream_time", "float"]                                                            

  convert => ["request_time", "float"]

 }

}

output {

  if "access" in [tags] {

   elasticsearch {

\u200B    hosts => "http://localhost:9200"

\u200B    manage_template => false

\u200B    index => "nginx_access-%{+yyyy.MM.dd}"

   }

  }

  if "error" in [tags] {

   elasticsearch {

\u200B    hosts => "http://localhost:9200"

\u200B    manage_template => false

\u200B    index => "nginx_error-%{+yyyy.MM.dd}"

   }

  }

}
`)],-1),al=e("h1",{id:"\u7B2C7\u7AE0-\u914D\u7F6Elogstash\u540C\u6B65mysql\u6570\u636E",tabindex:"-1"},[n("\u7B2C7\u7AE0 \u914D\u7F6Elogstash\u540C\u6B65mysql\u6570\u636E "),e("a",{class:"header-anchor",href:"#\u7B2C7\u7AE0-\u914D\u7F6Elogstash\u540C\u6B65mysql\u6570\u636E","aria-hidden":"true"},"#")],-1),il=e("p",null,"\u7565",-1),ol=e("h1",{id:"\u7B2C8\u7AE0-kibana\u753B\u56FE\u5C55\u793A",tabindex:"-1"},[n("\u7B2C8\u7AE0 kibana\u753B\u56FE\u5C55\u793A "),e("a",{class:"header-anchor",href:"#\u7B2C8\u7AE0-kibana\u753B\u56FE\u5C55\u793A","aria-hidden":"true"},"#")],-1),rl=e("p",null,"\u7565",-1),dl=e("h1",{id:"\u7B2C9\u7AE0-grafana\u753B\u56FE\u5C55\u793A",tabindex:"-1"},[n("\u7B2C9\u7AE0 grafana\u753B\u56FE\u5C55\u793A "),e("a",{class:"header-anchor",href:"#\u7B2C9\u7AE0-grafana\u753B\u56FE\u5C55\u793A","aria-hidden":"true"},"#")],-1),cl=e("p",null,"\u9664\u4E86kibana\u5916\uFF0Cgrafana\u4E5F\u652F\u6301\u4ECEes\u8C03\u53D6\u6570\u636E\u5E76\u5C55\u793A",-1),hl=e("p",null,[e("a",{href:"https://grafana.com/docs/features/datasources/elasticsearch/#using-elasticsearch-in-grafana",target:"_blank",rel:"noreferrer"},"https://grafana.com/docs/features/datasources/elasticsearch/#using-elasticsearch-in-grafana")],-1),_l=e("h1",{id:"\u7B2C10\u7AE0-\u5982\u4F55\u5728\u516C\u53F8\u63A8\u5E7Felk\u9879\u76EE",tabindex:"-1"},[n("\u7B2C10\u7AE0 \u5982\u4F55\u5728\u516C\u53F8\u63A8\u5E7FELK\u9879\u76EE "),e("a",{class:"header-anchor",href:"#\u7B2C10\u7AE0-\u5982\u4F55\u5728\u516C\u53F8\u63A8\u5E7Felk\u9879\u76EE","aria-hidden":"true"},"#")],-1),ul=e("p",null,"\u5982\u4F55\u5728\u516C\u53F8\u63A8\u5E7FELK\u7684\u9879\u76EE",-1),pl=e("p",null,"1.\u4F18\u5148\u8868\u8FBE\u51FA\u5BF9\u5176\u4ED6\u4EBA\u5E26\u6765\u7684\u4FBF\u5229\u548C\u597D\u5904",-1),gl=e("p",null,"- \u9886\u5BFC",-1),ml=e("p",null,"- \u5F00\u53D1",-1),fl=e("p",null,"- \u6D4B\u8BD5",-1),bl=e("p",null,"- DBA",-1),kl=e("p",null,"-- \u4EE5\u540E\u4F60\u81EA\u5DF1\u76F8\u67E5\u4EC0\u4E48\u6570\u636E\u90FD\u53EF\u4EE5\u76F4\u63A5\u67E5",-1),vl=e("p",null,"-- \u4EE5\u524D\u63D2\u4E2A\u65E5\u5FD7\u8FD0\u7EF4\u5F97\u67E510\u5206\u949F\uFF0C\u73B0\u5728\u4F60\u53EA\u8981\u70B9\u51E0\u4E0B\u9F20\u6807\u5C31ok\u4E86",-1),xl=e("p",null,"-- \u6211\u4E13\u95E8\u4E3A\u4F60\u4EEC\u90E8\u95E8\u5B9A\u5236\u4E86\u4E00\u4E2A\u56FE\u5F62\u9762\u677F\uFF0C\u4F60\u770B\u770B\u6548\u679C\uFF0C\u6709\u5565\u4E0D\u6EE1\u610F\u7684\u5C3D\u7BA1\u8BF4\uFF0C\u6211\u4F18\u5148\u7ED9\u4F60\u4EEC\u90E8\u95E8\u89E3\u51B3",-1),yl=e("p",null,"2.\u5BF9\u4E8E\u8FD0\u7EF4\u6765\u8BF4\uFF0Cjson\u65E5\u5FD7\u66F4\u53CB\u597D",-1),wl=e("p",null,"- \u544A\u8BC9\u9886\u5BFC\uFF0Cjson\u683C\u5F0F\u66F4\u53CB\u597D\uFF0C\u505A\u51FA\u6D4B\u8BD5\u73AF\u5883\uFF0C\u5E76\u7ED9\u9886\u5BFC\u6F14\u793Ajson\u683C\u5F0F\u4F18\u70B9",-1),jl=e("p",null,"- \u63D0\u524D\u7EDF\u8BA1\u597D\u5230\u5E95\u9700\u8981\u6536\u96C6\u54EA\u4E9B\u65E5\u5FD7",-1),Al=e("p",null,"- \u8981\u6C42\u80FD\u8F6C\u6210json\u7684\u5C31\u8F6C\u6210json",-1),El=e("p",null,"- \u81EA\u5DF1\u6539\u4E0D\u4E86\u7684\uFF0C\u7ED9\u9886\u5BFC\u8BF4\uFF0C\u8BA9\u5F00\u53D1\u6539\u6210json\u683C\u5F0F",-1),Ml=e("p",null,"- \u90A3\u884C\uFF0C\u9886\u5BFC\u4F60\u770B\uFF0C\u5982\u679C\u4E0D\u6539\u6210json\uFF0C\u5C31\u53EA\u80FD\u662F\u8FD9\u4E2A\u6548\u679C\u4E86\uFF0C\u540E\u7EED\u7684\u65B0\u9700\u6C42\uFF0C\u53EF\u80FD\u5C31\u6EE1\u8DB3\u4E0D\u4E86\u4E86",-1),ql=e("p",null,"- \u5E76\u4E0D\u662F\u8BF4\u6240\u6709\u65E5\u5FD7\uFF0C\u5FC5\u987B\u662Fjson",-1),Tl=e("p",null,"3.\u63A8\u5E7F\u6F14\u793A",-1),Sl=e("p",null,"- \u63D0\u524D\u90FD\u51C6\u5907\u597D\u6587\u6863\u548Cppt\u8FD8\u6709\u6D4B\u8BD5\u73AF\u5883",-1),$l=e("p",null,"- \u4E00\u5B9A\u8981\u5BF9\u6BD4\u4F20\u7EDF\u5206\u6790\u65E5\u5FD7\u548CELK\u4E4B\u540E\u5E26\u6765\u7684\u5DE8\u5927\u6539\u53D8",-1),Ll=e("h1",{id:"\u7B2C11\u7AE0-\u9762\u8BD5\u95EE\u9898",tabindex:"-1"},[n("\u7B2C11\u7AE0 \u9762\u8BD5\u95EE\u9898 "),e("a",{class:"header-anchor",href:"#\u7B2C11\u7AE0-\u9762\u8BD5\u95EE\u9898","aria-hidden":"true"},"#")],-1),Kl=e("hr",null,null,-1),Il=e("p",null,[n("["),e("a",{href:"#_msoanchor_1"},"A1]"),n("ELK\u6BCF\u4E2A\u7EC4\u4EF6\u90FD\u9700\u8981JAVA\u73AF\u5883")],-1),Ol=e("p",null,[n("["),e("a",{href:"#_msoanchor_2"},"A2]"),n("\u642D\u5EFA\u7FA4\u96C6\u4E00\u5B9A\u8981\u540C\u6B65\u65F6\u95F4")],-1),Cl=e("p",null,[n("["),e("a",{href:"#_msoanchor_3"},"A3]"),n("\u6570\u636E\u5E93\u5B58\u50A8\u76EE\u5F55")],-1),zl=e("p",null,[n("["),e("a",{href:"#_msoanchor_4"},"A4]"),n("\u65E5\u5FD7\u6587\u4EF6\u5B58\u50A8\u4F4D\u7F6E")],-1),Nl=e("p",null,[n("["),e("a",{href:"#_msoanchor_5"},"A5]"),n("\u9501\u5B9A\u5185\u5B58")],-1),Dl=e("p",null,[n("["),e("a",{href:"#_msoanchor_6"},"A6]"),n("\u76D1\u542C\u5730\u5740\uFF0C\u6700\u597D\u6DFB\u52A0\u4E0A\u672C\u673A\u5730\u5740")],-1),Rl=e("p",null,[n("["),e("a",{href:"#_msoanchor_7"},"A7]"),n("\u76D1\u542C\u7AEF\u53E3")],-1),Pl=e("p",null,[n("["),e("a",{href:"#_msoanchor_8"},"A8]"),n("\u914D\u7F6Efilebeat\u652F\u6301json\u683C\u5F0F\u4F20\u8F93\u5230Es")],-1),Bl=e("p",null,[n("["),e("a",{href:"#_msoanchor_9"},"A9]"),n("\u4FEE\u6539\u7D22\u5F15\u540D\u79F0\uFF0C\u63A8\u8350\u4EE5\u6708\u4EFD\u7ED3\u5C3E\uFF0C\u56E0\u4E3AKibana\u652F\u6301\u6708\u4EFD")],-1),Gl=e("p",null,[n("["),e("a",{href:"#_msoanchor_10"},"A10]"),n("\u5173\u95ED\u9ED8\u8BA4\u6A21\u677F\u7D22\u5F15")],-1),Ul=e("p",null,[n("["),e("a",{href:"#_msoanchor_11"},"A11]"),n("\u5F15\u7528\u8BBE\u7F6E\u7D22\u5F15")],-1),Hl=e("p",null,[n("["),e("a",{href:"#_msoanchor_13"},"A13]"),n("\u5B9A\u4E49JSON\u952E\u503C\u5BF9\uFF0C\u4F7F\u5F97ES\u8BFB\u6570\u636E\u66F4\u52A0\u660E\u663E\u7D22\u5F15\u66F4\u52A0\u5965\u91CC\u7ED9")],-1),Vl=e("p",null,[n("["),e("a",{href:"#_msoanchor_14"},"A14]"),n("\u5B9A\u4E49\u9519\u8BEF\u65E5\u5FD7\u5B58\u653E\u76EE\u5F55\uFF0Ctags\u6307\u5B9A\u4E0B\u65B9\u53EF\u6307\u5B9A\u6761\u4EF6\uFF0C\u53EF\u4EE5\u662F\u952E\u503C\u91CC\u5F97\u4EFB\u4F55\u4E00\u79CD\u3002")],-1),Zl=e("p",null,[n("["),e("a",{href:"#_msoanchor_15"},"A15]"),n("\u5F53tags\u662Ferror\u7684\u65F6\u5019\u6536\u96C6\u65E5\u5FD7\u7B80\u76F4\u4E0D\u8981\u5965\u91CC\u7ED9")],-1),Jl=e("p",null,[n("["),e("a",{href:"#_msoanchor_16"},"A16]"),n("\u5982\u679C\u53EA\u76D1\u542C\u4E00\u4E2A\u670D\u52A1\u4E0D\u7528\u6DFB\u52A0\u6761\u4EF6\uFF1A\u5B9A\u4E49\u6761\u4EF6")],-1),Xl=e("p",null,[n("["),e("a",{href:"#_msoanchor_17"},"A17]"),n("\u4E0D\u7528\u7EA0\u7ED3\u6BCF\u6DFB\u52A0\u4E00\u79CD\u670D\u52A1\u5C31\u8981\u8BE5\u540D\u79F0 \u53EA\u8981\u4E4B\u524D\u6539\u8FC7\uFF0C\u5C31\u53EF\u4EE5\u4E0D\u7528\u4FEE\u6539\u5C31\u53EF\u4EE5\u4F7F\u7528")],-1);function Fl(s,Yl,Ql,Wl,i,ea){const o=r;return h(),c(o,{frontmatter:i.frontmatter,data:i.data},{"main-content-md":t(()=>[p,g,m,f,b,k,v,x,y,w,j,A,E,M,q,T,S,$,L,K,I,O,C,z,N,D,R,P,B,G,U,H,V,Z,J,X,F,Y,Q,W,ee,ne,te,se,le,ae,ie,oe,re,de,ce,he,_e,ue,pe,ge,me,fe,be,ke,ve,xe,ye,we,je,Ae,Ee,Me,qe,Te,Se,$e,Le,Ke,Ie,Oe,Ce,ze,Ne,De,Re,Pe,Be,Ge,Ue,He,Ve,Ze,Je,Xe,Fe,Ye,Qe,We,en,nn,tn,sn,ln,an,on,rn,dn,cn,hn,_n,un,pn,gn,mn,fn,bn,kn,vn,xn,yn,wn,jn,An,En,Mn,qn,Tn,Sn,$n,Ln,Kn,In,On,Cn,zn,Nn,Dn,Rn,Pn,Bn,Gn,Un,Hn,Vn,Zn,Jn,Xn,Fn,Yn,Qn,Wn,et,nt,tt,st,lt,at,it,ot,rt,dt,ct,ht,_t,ut,pt,gt,mt,ft,bt,kt,vt,xt,yt,wt,jt,At,Et,Mt,qt,Tt,St,$t,Lt,Kt,It,Ot,Ct,zt,Nt,Dt,Rt,Pt,Bt,Gt,Ut,Ht,Vt,Zt,Jt,Xt,Ft,Yt,Qt,Wt,es,ns,ts,ss,ls,as,is,os,rs,ds,cs,hs,_s,us,ps,gs,ms,fs,bs,ks,vs,xs,ys,ws,js,As,Es,Ms,qs,Ts,Ss,$s,Ls,Ks,Is,Os,Cs,zs,Ns,Ds,Rs,Ps,Bs,Gs,Us,Hs,Vs,Zs,Js,Xs,Fs,Ys,Qs,Ws,el,nl,tl,sl,ll,al,il,ol,rl,dl,cl,hl,_l,ul,pl,gl,ml,fl,bl,kl,vl,xl,yl,wl,jl,Al,El,Ml,ql,Tl,Sl,$l,Ll,Kl,Il,Ol,Cl,zl,Nl,Dl,Rl,Pl,Bl,Gl,Ul,Hl,Vl,Zl,Jl,Xl]),"main-header":t(()=>[l(s.$slots,"main-header")]),"main-header-after":t(()=>[l(s.$slots,"main-header-after")]),"main-nav":t(()=>[l(s.$slots,"main-nav")]),"main-content":t(()=>[l(s.$slots,"main-content")]),"main-content-after":t(()=>[l(s.$slots,"main-content-after")]),"main-nav-before":t(()=>[l(s.$slots,"main-nav-before")]),"main-nav-after":t(()=>[l(s.$slots,"main-nav-after")]),comment:t(()=>[l(s.$slots,"comment")]),footer:t(()=>[l(s.$slots,"footer")]),aside:t(()=>[l(s.$slots,"aside")]),"aside-custom":t(()=>[l(s.$slots,"aside-custom")]),default:t(()=>[l(s.$slots,"default")]),_:3},8,["frontmatter","data"])}const oa=d(u,[["render",Fl]]);export{ia as __pageData,oa as default};
