import{_ as r}from"./ValaxyMain.vue_vue_type_style_index_0_lang-ff623c6a.js";import{_ as y,c as D,w as o,o as A,b as s,U as l,q as a,r as t,W as i,p as F}from"./app-4a4ffc33.js";import"./YunFooter.vue_vue_type_script_setup_true_lang-8f14011c.js";import"./YunCard.vue_vue_type_style_index_0_lang-44a49504.js";import"./YunPageHeader.vue_vue_type_script_setup_true_lang-4581fd4f.js";const Ql=JSON.parse('{"title":"Iptables防火墙机制","description":"","frontmatter":{"title":"Iptables防火墙机制","categories":"Linux技术","tags":["iptables"],"date":"2023-03-20T10:42:00.000Z"},"headers":[{"level":2,"title":"1.iptables是什么？","slug":"_1-iptables是什么？","link":"#_1-iptables是什么？","children":[]},{"level":2,"title":"2.iptables企业应用场景","slug":"_2-iptables企业应用场景","link":"#_2-iptables企业应用场景","children":[]},{"level":2,"title":"3.商用防火墙品牌","slug":"_3-商用防火墙品牌","link":"#_3-商用防火墙品牌","children":[]},{"level":2,"title":"1.表与链对应关系","slug":"_1-表与链对应关系","link":"#_1-表与链对应关系","children":[]},{"level":2,"title":"2.FILTER表","slug":"_2-filter表","link":"#_2-filter表","children":[]},{"level":2,"title":"3.NAT表","slug":"_3-nat表","link":"#_3-nat表","children":[]},{"level":2,"title":"1.安装iptables管理命令","slug":"_1-安装iptables管理命令","link":"#_1-安装iptables管理命令","children":[]},{"level":2,"title":"2.加载防火墙的内核模块","slug":"_2-加载防火墙的内核模块","link":"#_2-加载防火墙的内核模块","children":[]},{"level":2,"title":"3.启动防火墙","slug":"_3-启动防火墙","link":"#_3-启动防火墙","children":[]},{"level":2,"title":"1.查看防火墙规则","slug":"_1-查看防火墙规则","link":"#_1-查看防火墙规则","children":[]},{"level":2,"title":"2.清除防火墙规则","slug":"_2-清除防火墙规则","link":"#_2-清除防火墙规则","children":[]},{"level":2,"title":"3.添加防火墙规则","slug":"_3-添加防火墙规则","link":"#_3-添加防火墙规则","children":[]},{"level":2,"title":"4.网络连接状态","slug":"_4-网络连接状态","link":"#_4-网络连接状态","children":[]},{"level":2,"title":"4.删除某个规则","slug":"_4-删除某个规则","link":"#_4-删除某个规则","children":[]},{"level":2,"title":"1.禁止某个端口访问","slug":"_1-禁止某个端口访问","link":"#_1-禁止某个端口访问","children":[]},{"level":2,"title":"2.禁止某个IP访问","slug":"_2-禁止某个ip访问","link":"#_2-禁止某个ip访问","children":[]},{"level":2,"title":"3.禁止除跳板机以外的IP访问","slug":"_3-禁止除跳板机以外的ip访问","link":"#_3-禁止除跳板机以外的ip访问","children":[]},{"level":2,"title":"4.匹配端口范围","slug":"_4-匹配端口范围","link":"#_4-匹配端口范围","children":[]},{"level":2,"title":"5.匹配ICMP类型","slug":"_5-匹配icmp类型","link":"#_5-匹配icmp类型","children":[]},{"level":2,"title":"6.练习题","slug":"_6-练习题","link":"#_6-练习题","children":[]},{"level":2,"title":"1.部署一个安全的防火墙","slug":"_1-部署一个安全的防火墙","link":"#_1-部署一个安全的防火墙","children":[]},{"level":2,"title":"2.局域网共享上网","slug":"_2-局域网共享上网","link":"#_2-局域网共享上网","children":[]},{"level":2,"title":"3.端口映射","slug":"_3-端口映射","link":"#_3-端口映射","children":[]},{"level":2,"title":"4.IP映射","slug":"_4-ip映射","link":"#_4-ip映射","children":[]}],"relativePath":"pages/posts/Iptables防火墙机制.md","path":"/Users/vlinux/vlinux/blog/valaxy/vlinux.github.io/pages/posts/Iptables防火墙机制.md","lastUpdated":1679902831000}'),p=JSON.parse('{"title":"Iptables防火墙机制","description":"","frontmatter":{"title":"Iptables防火墙机制","categories":"Linux技术","tags":["iptables"],"date":"2023-03-20T10:42:00.000Z"},"headers":[{"level":2,"title":"1.iptables是什么？","slug":"_1-iptables是什么？","link":"#_1-iptables是什么？","children":[]},{"level":2,"title":"2.iptables企业应用场景","slug":"_2-iptables企业应用场景","link":"#_2-iptables企业应用场景","children":[]},{"level":2,"title":"3.商用防火墙品牌","slug":"_3-商用防火墙品牌","link":"#_3-商用防火墙品牌","children":[]},{"level":2,"title":"1.表与链对应关系","slug":"_1-表与链对应关系","link":"#_1-表与链对应关系","children":[]},{"level":2,"title":"2.FILTER表","slug":"_2-filter表","link":"#_2-filter表","children":[]},{"level":2,"title":"3.NAT表","slug":"_3-nat表","link":"#_3-nat表","children":[]},{"level":2,"title":"1.安装iptables管理命令","slug":"_1-安装iptables管理命令","link":"#_1-安装iptables管理命令","children":[]},{"level":2,"title":"2.加载防火墙的内核模块","slug":"_2-加载防火墙的内核模块","link":"#_2-加载防火墙的内核模块","children":[]},{"level":2,"title":"3.启动防火墙","slug":"_3-启动防火墙","link":"#_3-启动防火墙","children":[]},{"level":2,"title":"1.查看防火墙规则","slug":"_1-查看防火墙规则","link":"#_1-查看防火墙规则","children":[]},{"level":2,"title":"2.清除防火墙规则","slug":"_2-清除防火墙规则","link":"#_2-清除防火墙规则","children":[]},{"level":2,"title":"3.添加防火墙规则","slug":"_3-添加防火墙规则","link":"#_3-添加防火墙规则","children":[]},{"level":2,"title":"4.网络连接状态","slug":"_4-网络连接状态","link":"#_4-网络连接状态","children":[]},{"level":2,"title":"4.删除某个规则","slug":"_4-删除某个规则","link":"#_4-删除某个规则","children":[]},{"level":2,"title":"1.禁止某个端口访问","slug":"_1-禁止某个端口访问","link":"#_1-禁止某个端口访问","children":[]},{"level":2,"title":"2.禁止某个IP访问","slug":"_2-禁止某个ip访问","link":"#_2-禁止某个ip访问","children":[]},{"level":2,"title":"3.禁止除跳板机以外的IP访问","slug":"_3-禁止除跳板机以外的ip访问","link":"#_3-禁止除跳板机以外的ip访问","children":[]},{"level":2,"title":"4.匹配端口范围","slug":"_4-匹配端口范围","link":"#_4-匹配端口范围","children":[]},{"level":2,"title":"5.匹配ICMP类型","slug":"_5-匹配icmp类型","link":"#_5-匹配icmp类型","children":[]},{"level":2,"title":"6.练习题","slug":"_6-练习题","link":"#_6-练习题","children":[]},{"level":2,"title":"1.部署一个安全的防火墙","slug":"_1-部署一个安全的防火墙","link":"#_1-部署一个安全的防火墙","children":[]},{"level":2,"title":"2.局域网共享上网","slug":"_2-局域网共享上网","link":"#_2-局域网共享上网","children":[]},{"level":2,"title":"3.端口映射","slug":"_3-端口映射","link":"#_3-端口映射","children":[]},{"level":2,"title":"4.IP映射","slug":"_4-ip映射","link":"#_4-ip映射","children":[]}],"relativePath":"pages/posts/Iptables防火墙机制.md","path":"/Users/vlinux/vlinux/blog/valaxy/vlinux.github.io/pages/posts/Iptables防火墙机制.md","lastUpdated":1679902831000}'),d={name:"pages/posts/Iptables防火墙机制.md",data(){return{data:p,frontmatter:p.frontmatter}},setup(){F("pageData",p)}},_={id:"第1章-iptables介绍",tabindex:"-1"},h={id:"_1-iptables是什么？",tabindex:"-1"},E=s("p",null,"iptables是开源的基于数据包过滤的防火墙工具。",-1),u={id:"_2-iptables企业应用场景",tabindex:"-1"},B=s("p",null,"1、主机防火墙（filter表的INPUT链）。 2、局域网共享上网(nat表的POSTROUTING链)。半个路由器，NAT功能。 3、端口及IP映射(nat表的PREROUTING链)，硬防的NAT功能。 4、IP一对一映射。",-1),b={id:"_3-商用防火墙品牌",tabindex:"-1"},P=s("p",null,"华为 深信服 思科 H3C Juniper 天融信 飞塔 网康 绿盟科技 金盾",-1),g={id:"第2章-iptables工作流程",tabindex:"-1"},T=s("p",null,"iptables是采用数据包过滤机制工作的，所以它会对请求的数据包的包头数据进行分析，并根据我们预先设定的规则进行匹配来决定是否可以进入主机。 1.防火墙是一层层过滤的。实际是按照配置规则的顺序从上到下，从前到后进行过滤的。 2.如果匹配上了规则，即明确表明是阻止还是通过，此时数据包就不在向下匹配新规则了。 3.如果所有规则中没有明确表明是阻止还是通过这个数据包，也就是没有匹配上规则，向下进行匹配，直到匹配默认规则得到明确的阻止还是通过。 4.防火墙的默认规则是对应链的所有的规则执行完以后才会执行的（最后执行的规则）。",-1),m={id:"第3章-iptables四表五链",tabindex:"-1"},f={id:"_1-表与链对应关系",tabindex:"-1"},I=s("p",null,"实际iptables包含4张表和五个链，但主要记住两张表即可filter和nat表即可。",-1),v=s("p",null,[s("img",{src:"https://cos.vlinux.cn/www-vlinux-cn-blog-img/14248468-58da03a179b40672.png",alt:"img"})],-1),N={id:"_2-filter表",tabindex:"-1"},R=s("p",null,[s("img",{src:"https://cos.vlinux.cn/www-vlinux-cn-blog-img/14248468-b418ec2a196015e8-20230327153700601.png",alt:"img"})],-1),O={id:"_3-nat表",tabindex:"-1"},U=s("p",null,[s("img",{src:"https://cos.vlinux.cn/www-vlinux-cn-blog-img/14248468-1f52b22fab1683cd-20230327153805334.png",alt:"img"})],-1),k={id:"第4章-iptables工作原理示意图",tabindex:"-1"},j=s("p",null,[s("img",{src:"https://cos.vlinux.cn/www-vlinux-cn-blog-img/14248468-432aae0a08179e38-20230327153822388.png",alt:"img"})],-1),x=s("p",null,[s("img",{src:"https://cos.vlinux.cn/www-vlinux-cn-blog-img/14248468-d6bea13f8f11f33a-20230327153837198.png",alt:"img"})],-1),w={id:"第5章-iptables环境准备",tabindex:"-1"},W={id:"_1-安装iptables管理命令",tabindex:"-1"},L=s("div",{class:"language-csharp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#FFCB6B"}},"root@m01"),s("span",{style:{color:"#A6ACCD"}}," ~"),s("span",{style:{color:"#89DDFF"}},"]"),s("span",{style:{color:"#A6ACCD"}},"# yum install iptables"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"services "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"y")]),l(`
`),s("span",{class:"line"})])])],-1),S={id:"_2-加载防火墙的内核模块",tabindex:"-1"},$=s("div",{class:"language-bash"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"modprobe"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"ip_tables")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"modprobe"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"iptable_filter")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"modprobe"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"iptable_nat")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"modprobe"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"ip_conntrack")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"modprobe"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"ip_conntrack_ftp")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"modprobe"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"ip_nat_ftp")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"modprobe"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"ipt_state")]),l(`
`),s("span",{class:"line"})])])],-1),G=s("p",null,"查看已加载的模块",-1),M=s("div",{class:"language-csharp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#FFCB6B"}},"root@m01"),s("span",{style:{color:"#A6ACCD"}}," ~"),s("span",{style:{color:"#89DDFF"}},"]"),s("span",{style:{color:"#A6ACCD"}},"# lsmod "),s("span",{style:{color:"#89DDFF"}},"|"),s("span",{style:{color:"#A6ACCD"}},"egrep "),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"filter|nat|ipt"),s("span",{style:{color:"#89DDFF"}},"'")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"ipt_REJECT             "),s("span",{style:{color:"#F78C6C"}},"12541"),s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#F78C6C"}},"0"),s("span",{style:{color:"#A6ACCD"}}," ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"nf_nat_ftp             "),s("span",{style:{color:"#F78C6C"}},"12770"),s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#F78C6C"}},"0"),s("span",{style:{color:"#A6ACCD"}}," ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"nf_conntrack_ftp       "),s("span",{style:{color:"#F78C6C"}},"18638"),s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#F78C6C"}},"1"),s("span",{style:{color:"#A6ACCD"}}," nf_nat_ftp")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"iptable_filter         "),s("span",{style:{color:"#F78C6C"}},"12810"),s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#F78C6C"}},"0"),s("span",{style:{color:"#A6ACCD"}}," ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"xt_nat                 "),s("span",{style:{color:"#F78C6C"}},"12681"),s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#F78C6C"}},"3"),s("span",{style:{color:"#A6ACCD"}}," ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"iptable_nat            "),s("span",{style:{color:"#F78C6C"}},"12875"),s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#F78C6C"}},"1"),s("span",{style:{color:"#A6ACCD"}}," ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"nf_nat_ipv4            "),s("span",{style:{color:"#F78C6C"}},"14115"),s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#F78C6C"}},"1"),s("span",{style:{color:"#A6ACCD"}}," iptable_nat")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"nf_nat                 "),s("span",{style:{color:"#F78C6C"}},"26146"),s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#F78C6C"}},"3"),s("span",{style:{color:"#A6ACCD"}}," nf_nat_ftp,nf_nat_ipv4,xt_nat")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"nf_conntrack          "),s("span",{style:{color:"#F78C6C"}},"105745"),s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#F78C6C"}},"7"),s("span",{style:{color:"#A6ACCD"}}," nf_nat_ftp,nf_nat,xt_state,nf_nat_ipv4,xt_conntrack,nf_conntrack_ftp,nf_conntrack_ipv4")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"ip_tables              "),s("span",{style:{color:"#F78C6C"}},"27240"),s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#F78C6C"}},"2"),s("span",{style:{color:"#A6ACCD"}}," iptable_filter,iptable_nat")]),l(`
`),s("span",{class:"line"})])])],-1),V={id:"_3-启动防火墙",tabindex:"-1"},X=s("p",null,"首先停止firewalld",-1),Z=s("div",{class:"language-bash"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"systemctl"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"stop"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"firewalld")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"systemctl"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"disable"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"firewalld")]),l(`
`),s("span",{class:"line"})])])],-1),J=s("p",null,"开启iptables",-1),z=s("div",{class:"language-css"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"systemctl start iptables"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#FFCB6B"}},"service")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"systemctl enable iptables"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#FFCB6B"}},"service")]),l(`
`),s("span",{class:"line"})])])],-1),Y={id:"第6章-iptables基本操作命令",tabindex:"-1"},q={id:"_1-查看防火墙规则",tabindex:"-1"},H=s("div",{class:"language-bash"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#A6ACCD"}},"root@m01 "),s("span",{style:{color:"#89DDFF"}},"~]"),s("span",{style:{color:"#A6ACCD"}},"# iptables -nL")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"Chain"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"INPUT"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#FFCB6B"}},"policy"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"ACCEPT"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"target"),s("span",{style:{color:"#A6ACCD"}},"     "),s("span",{style:{color:"#C3E88D"}},"prot"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"opt"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"source"),s("span",{style:{color:"#A6ACCD"}},"               "),s("span",{style:{color:"#C3E88D"}},"destination"),s("span",{style:{color:"#A6ACCD"}},"         ")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"Chain"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"FORWARD"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#FFCB6B"}},"policy"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"ACCEPT"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"target"),s("span",{style:{color:"#A6ACCD"}},"     "),s("span",{style:{color:"#C3E88D"}},"prot"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"opt"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"source"),s("span",{style:{color:"#A6ACCD"}},"               "),s("span",{style:{color:"#C3E88D"}},"destination"),s("span",{style:{color:"#A6ACCD"}},"         ")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"Chain"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"OUTPUT"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#FFCB6B"}},"policy"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"ACCEPT"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"target"),s("span",{style:{color:"#A6ACCD"}},"     "),s("span",{style:{color:"#C3E88D"}},"prot"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"opt"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"source"),s("span",{style:{color:"#A6ACCD"}},"               "),s("span",{style:{color:"#C3E88D"}},"destination"),s("span",{style:{color:"#A6ACCD"}}," ")]),l(`
`),s("span",{class:"line"})])])],-1),K={id:"_2-清除防火墙规则",tabindex:"-1"},Q=s("p",null,"iptables -F <- 清除所有规则，不会处理默认的规则 iptables -X <- 删除用户自定义的链 iptables -Z <- 链的计数器清零（数据包计数器与数据包字节计数器）",-1),ss={id:"_3-添加防火墙规则",tabindex:"-1"},ls=s("p",null,"iptables -t <-指定表d(efault: `filter') iptables -A <-把规则添加到指定的链上，默认添加到最后一行。 iptables -I <-插入规则，默认插入到第一行(封IP)。 iptables -D <-删除链上的规则",-1),os={id:"_4-网络连接状态",tabindex:"-1"},es=s("p",null,"NEW：已经或将启动新的连接 ESTABLISHED：已建立的连接 RELATED：正在启动的新连接 INVALID：非法或无法识别的",-1),as={id:"_4-删除某个规则",tabindex:"-1"},ns=s("p",null,"iptables -nL --line-numbers 查看规则号码 iptables -D INPUT 1 删除指定链上的指定序号",-1),ts=s("div",{class:"language-bash"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"iptables"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"A"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"INPUT"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-p"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"tcp"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-m"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"state"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"--dport"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"22"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-j"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"DROP")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"iptables"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-nL")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"iptables"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-nL"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"--line-numbers")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"iptables"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-D"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"INPUT"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"1")]),l(`
`),s("span",{class:"line"})])])],-1),ps={id:"第7章-iptables实战",tabindex:"-1"},cs={id:"_1-禁止某个端口访问",tabindex:"-1"},Cs=s("div",{class:"language-swift"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"iptables "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"t filter "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"A INPUT "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"p tcp "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"dport "),s("span",{style:{color:"#F78C6C"}},"22"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"j DROP")]),l(`
`),s("span",{class:"line"})])])],-1),rs=s("p",null,"规则解释：",-1),ys=s("div",{class:"language-bash"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"-p"),s("span",{style:{color:"#A6ACCD"}},"       "),s("span",{style:{color:"#676E95","font-style":"italic"}},"#<==指定过滤的协议-p（tcp,udp,icmp,all）")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"--dport"),s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#676E95","font-style":"italic"}},"#<==指定目标端口（用户请求的端口）。")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"-j"),s("span",{style:{color:"#A6ACCD"}},"       "),s("span",{style:{color:"#676E95","font-style":"italic"}},"#<==对规则的具体处理方法（ACCEPT,DROP,REJECT,SNAT/DNAT)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"--sport"),s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#676E95","font-style":"italic"}},"#<==指定源端口。")]),l(`
`),s("span",{class:"line"})])])],-1),Ds={id:"_2-禁止某个ip访问",tabindex:"-1"},As=s("div",{class:"language-bash"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"iptables"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-I"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"INPUT"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-p"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"tcp"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-s"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"10.0.0.253"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-i"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"eth0"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-j"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"DROP")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"iptables"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-A"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"INPUT"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-p"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"tcp"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"!"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-s"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"10.0.0.1"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-i"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"eth0"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-j"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"DROP")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"iptables"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-A"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"INPUT"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-p"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"tcp"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"!"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-s"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"10.0.0.0/"),s("span",{style:{color:"#F78C6C"}},"24"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-i"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"eth0"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-j"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"DROP")]),l(`
`),s("span",{class:"line"})])])],-1),is=s("p",null,"规则解释：",-1),Fs=s("div",{class:"language-bash"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"-s"),s("span",{style:{color:"#A6ACCD"}},"       "),s("span",{style:{color:"#676E95","font-style":"italic"}},"#<==指定源地址或网段（192.168.1.0/24）。 ! 取反。")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"-d"),s("span",{style:{color:"#A6ACCD"}},"       "),s("span",{style:{color:"#676E95","font-style":"italic"}},"#<==指定目的地址（nat表prerouting）。")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"-i"),s("span",{style:{color:"#A6ACCD"}},"       "),s("span",{style:{color:"#676E95","font-style":"italic"}},"#<==进入的网络接口（eth0,eth1）。")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"-o"),s("span",{style:{color:"#A6ACCD"}},"       "),s("span",{style:{color:"#676E95","font-style":"italic"}},"#<==出去的网络接口（eth0,eth1）。")]),l(`
`),s("span",{class:"line"})])])],-1),ds={id:"_3-禁止除跳板机以外的ip访问",tabindex:"-1"},_s=s("div",{class:"language-css"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"iptables -I "),s("span",{style:{color:"#FFCB6B"}},"INPUT"),s("span",{style:{color:"#A6ACCD"}}," -p tcp ! -s 10"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#FFCB6B"}},"0"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#FFCB6B"}},"0"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#FFCB6B"}},"1"),s("span",{style:{color:"#A6ACCD"}}," -j DROP")]),l(`
`),s("span",{class:"line"})])])],-1),hs={id:"_4-匹配端口范围",tabindex:"-1"},Es=s("div",{class:"language-bash"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"iptables"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-I"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"INPUT"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-p"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"tcp"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-m"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"multiport"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"--dport"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"21"),s("span",{style:{color:"#C3E88D"}},","),s("span",{style:{color:"#F78C6C"}},"22"),s("span",{style:{color:"#C3E88D"}},","),s("span",{style:{color:"#F78C6C"}},"23"),s("span",{style:{color:"#C3E88D"}},","),s("span",{style:{color:"#F78C6C"}},"24"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-j"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"DROP")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"iptables"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-I"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"INPUT"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-p"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"tcp"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"--dport"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"3306"),s("span",{style:{color:"#C3E88D"}},":"),s("span",{style:{color:"#F78C6C"}},"8809"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-j"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"ACCEPT")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"iptables"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-I"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"INPUT"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-p"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"tcp"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"--dport"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"18"),s("span",{style:{color:"#C3E88D"}},":"),s("span",{style:{color:"#F78C6C"}},"80"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-j"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"DROP"),s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#676E95","font-style":"italic"}},"#<==最佳")]),l(`
`),s("span",{class:"line"})])])],-1),us={id:"_5-匹配icmp类型",tabindex:"-1"},Bs=s("div",{class:"language-tsx"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"iptables "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"A INPUT "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"p icmp "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"icmp"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"type "),s("span",{style:{color:"#F78C6C"}},"8")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"例：iptables "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"A INPUT "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"p icmp "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"icmp"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"type "),s("span",{style:{color:"#F78C6C"}},"8"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"j DROP")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"iptables "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"A INPUT "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"p icmp "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"m icmp "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"icmp"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#C792EA"}},"type"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"any"),s("span",{style:{color:"#A6ACCD"}}," -j ACCEPT")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"iptables -A FORWARD -s 192.168.1.0/24 -p icmp -m icmp --icmp-type any -j ACCEPT")]),l(`
`),s("span",{class:"line"})])])],-1),bs={id:"_6-练习题",tabindex:"-1"},Ps=s("p",null,"1、封掉10.0.0.7",-1),gs=s("div",{class:"language-css"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"iptables -I "),s("span",{style:{color:"#FFCB6B"}},"INPUT"),s("span",{style:{color:"#A6ACCD"}}," -s 10"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#FFCB6B"}},"0"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#FFCB6B"}},"0"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#FFCB6B"}},"7"),s("span",{style:{color:"#A6ACCD"}}," -j DROP")]),l(`
`),s("span",{class:"line"})])])],-1),Ts=s("p",null,"2、让10.0.0.7和SSH客户端（10.0.0.1）服务器可以Ping，其它的不能Ping",-1),ms=s("div",{class:"language-css"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"iptables -I "),s("span",{style:{color:"#FFCB6B"}},"INPUT"),s("span",{style:{color:"#A6ACCD"}}," -p icmp --icmp-type 8 -s 10"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#FFCB6B"}},"0"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#FFCB6B"}},"0"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#FFCB6B"}},"7"),s("span",{style:{color:"#A6ACCD"}}," -j ACCEPT")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"iptables -I "),s("span",{style:{color:"#FFCB6B"}},"INPUT"),s("span",{style:{color:"#A6ACCD"}}," 2 -p icmp ! -s 10"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#FFCB6B"}},"0"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#FFCB6B"}},"0"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#FFCB6B"}},"1"),s("span",{style:{color:"#A6ACCD"}}," --icmp-type 8 -j DROP")]),l(`
`),s("span",{class:"line"})])])],-1),fs=s("p",null,"3、封掉3306端口",-1),Is=s("div",{class:"language-bash"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"iptables"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-I"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"INPUT"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-p"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"tcp"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"--dport"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"3306"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-j"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"DROP")]),l(`
`),s("span",{class:"line"})])])],-1),vs={id:"第8章-iptables企业案例",tabindex:"-1"},Ns={id:"_1-部署一个安全的防火墙",tabindex:"-1"},Rs=s("p",null,"两种思想：针对默认规则而言。 逛公园：黑名单 1、默认规则默认是允许的状态。 看电影：白名单 2、默认规则默认是不允许的状态。更安全。 看电影的思想更安全。 实战部署：",-1),Os=s("div",{class:"language-csharp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#FFCB6B"}},"root@m01"),s("span",{style:{color:"#A6ACCD"}}," ~"),s("span",{style:{color:"#89DDFF"}},"]"),s("span",{style:{color:"#A6ACCD"}},"# iptables "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"F")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#FFCB6B"}},"root@m01"),s("span",{style:{color:"#A6ACCD"}}," ~"),s("span",{style:{color:"#89DDFF"}},"]"),s("span",{style:{color:"#A6ACCD"}},"# iptables "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"X")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#FFCB6B"}},"root@m01"),s("span",{style:{color:"#A6ACCD"}}," ~"),s("span",{style:{color:"#89DDFF"}},"]"),s("span",{style:{color:"#A6ACCD"}},"# iptables "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"Z")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#FFCB6B"}},"root@m01"),s("span",{style:{color:"#A6ACCD"}}," ~"),s("span",{style:{color:"#89DDFF"}},"]"),s("span",{style:{color:"#A6ACCD"}},"# iptables "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"A INPUT "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"p tcp "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"m multiport "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"dport "),s("span",{style:{color:"#F78C6C"}},"80"),s("span",{style:{color:"#A6ACCD"}},","),s("span",{style:{color:"#F78C6C"}},"443"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"j ACCEPT")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#FFCB6B"}},"root@m01"),s("span",{style:{color:"#A6ACCD"}}," ~"),s("span",{style:{color:"#89DDFF"}},"]"),s("span",{style:{color:"#A6ACCD"}},"# iptables "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"A INPUT "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"p tcp "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"dport "),s("span",{style:{color:"#F78C6C"}},"22"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"j ACCEPT")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#FFCB6B"}},"root@m01"),s("span",{style:{color:"#A6ACCD"}}," ~"),s("span",{style:{color:"#89DDFF"}},"]"),s("span",{style:{color:"#A6ACCD"}},"# iptables "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"A INPUT "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"s 10.0.0.0"),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#F78C6C"}},"24"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"j ACCEPT")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#FFCB6B"}},"root@m01"),s("span",{style:{color:"#A6ACCD"}}," ~"),s("span",{style:{color:"#89DDFF"}},"]"),s("span",{style:{color:"#A6ACCD"}},"# iptables "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"A INPUT "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"s 172.16.1.0"),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#F78C6C"}},"24"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"j ACCEPT")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#FFCB6B"}},"root@m01"),s("span",{style:{color:"#A6ACCD"}}," ~"),s("span",{style:{color:"#89DDFF"}},"]"),s("span",{style:{color:"#A6ACCD"}},"# iptables "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"A INPUT "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"i lo "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"j ACCEPT")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#FFCB6B"}},"root@m01"),s("span",{style:{color:"#A6ACCD"}}," ~"),s("span",{style:{color:"#89DDFF"}},"]"),s("span",{style:{color:"#A6ACCD"}},"# iptables "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"P INPUT DROP")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#FFCB6B"}},"root@m01"),s("span",{style:{color:"#A6ACCD"}}," ~"),s("span",{style:{color:"#89DDFF"}},"]"),s("span",{style:{color:"#A6ACCD"}},"# iptables "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"P FORWARD DROP")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#FFCB6B"}},"root@m01"),s("span",{style:{color:"#A6ACCD"}}," ~"),s("span",{style:{color:"#89DDFF"}},"]"),s("span",{style:{color:"#A6ACCD"}},"# iptables "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"P OUTPUT ACCEPT")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#FFCB6B"}},"root@m01"),s("span",{style:{color:"#A6ACCD"}}," ~"),s("span",{style:{color:"#89DDFF"}},"]"),s("span",{style:{color:"#A6ACCD"}},"# iptables "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"nL")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"Chain"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"INPUT"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#FFCB6B"}},"policy"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"DROP"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"target     prot opt source               destination         ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"ACCEPT     tcp  --  0.0.0.0/0            0.0.0.0/0            multiport dports 80,443")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"ACCEPT     tcp  --  0.0.0.0/0            0.0.0.0/0            tcp dpt:22")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"ACCEPT     all  --  10.0.0.0/24          0.0.0.0/0           ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"ACCEPT     all  --  172.16.1.0/24        0.0.0.0/0           ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"ACCEPT     all  --  0.0.0.0/0            0.0.0.0/0           ")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Chain FORWARD "),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#FFCB6B"}},"policy"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"DROP"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"target     prot opt source               destination         ")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Chain OUTPUT "),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#FFCB6B"}},"policy"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"ACCEPT"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"target     prot opt source               destination  ")]),l(`
`),s("span",{class:"line"})])])],-1),Us=s("p",null,"命令集合：",-1),ks=s("div",{class:"language-bash"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"iptables"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-F")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"iptables"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-X")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"iptables"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-Z")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"iptables"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-A"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"INPUT"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-p"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"tcp"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-m"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"multiport"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"--dport"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"80"),s("span",{style:{color:"#C3E88D"}},","),s("span",{style:{color:"#F78C6C"}},"443"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-j"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"ACCEPT")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"iptables"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-A"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"INPUT"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-p"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"tcp"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"--dport"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"22"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-j"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"ACCEPT")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"iptables"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-A"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"INPUT"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-s"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"10.0.1.0/"),s("span",{style:{color:"#F78C6C"}},"24"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-j"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"ACCEPT")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"iptables"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-A"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"INPUT"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-s"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"172.16.1.0/"),s("span",{style:{color:"#F78C6C"}},"24"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-j"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"ACCEPT")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"iptables"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-A"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"INPUT"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-i"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"lo"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-j"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"ACCEPT")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"iptables"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-P"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"INPUT"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"DROP")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"iptables"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-P"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"FORWARD"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"DROP")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"iptables"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-P"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"OUTPUT"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"ACCEPT")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"iptables"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-nL")]),l(`
`),s("span",{class:"line"})])])],-1),js={id:"_2-局域网共享上网",tabindex:"-1"},xs=s("p",null,"实验环境： m01: 共享上网网关出口 web01: 只有内网地址，网关指向m01 实验步骤： m01操作",-1),ws=s("div",{class:"language-bash"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"iptables"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-t"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"nat"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-A"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"POSTROUTING"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-s"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"172.16.1.0/"),s("span",{style:{color:"#F78C6C"}},"24"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-j"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"SNAT"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"--to-source"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"10.0.0.61")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#82AAFF"}},"echo"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"net.ipv4.ip_forward = 1"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},">>"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"/etc/sysctl.conf")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"sysctl"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-p")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"iptables"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-F")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"iptables"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-X")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"iptables"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-Z")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"iptables"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-A"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"INPUT"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-p"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"tcp"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-m"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"multiport"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"--dport"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"80"),s("span",{style:{color:"#C3E88D"}},","),s("span",{style:{color:"#F78C6C"}},"443"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-j"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"ACCEPT")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"iptables"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-A"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"INPUT"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-p"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"tcp"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"--dport"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"22"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-j"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"ACCEPT")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"iptables"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-A"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"INPUT"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-s"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"10.0.1.0/"),s("span",{style:{color:"#F78C6C"}},"24"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-j"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"ACCEPT")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"iptables"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-A"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"INPUT"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-s"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"172.16.1.0/"),s("span",{style:{color:"#F78C6C"}},"24"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-j"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"ACCEPT")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"iptables"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-A"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"INPUT"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-i"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"lo"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-j"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"ACCEPT")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"iptables"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-P"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"INPUT"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"DROP")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"iptables"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-P"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"FORWARD"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"DROP")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"iptables"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-P"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"OUTPUT"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"ACCEPT")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"iptables"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-A"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"FORWARD"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-i"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"eth1"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-s"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"172.16.1.0/"),s("span",{style:{color:"#F78C6C"}},"24"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-j"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"ACCEPT")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"iptables"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-A"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"FORWARD"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-o"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"eth0"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-s"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"172.16.1.0/"),s("span",{style:{color:"#F78C6C"}},"24"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-j"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"ACCEPT")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"iptables"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-A"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"FORWARD"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-i"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"eth0"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-d"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"172.16.1.0/"),s("span",{style:{color:"#F78C6C"}},"24"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-j"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"ACCEPT")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"iptables"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-A"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"FORWARD"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-o"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"eth1"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-d"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"172.16.1.0/"),s("span",{style:{color:"#F78C6C"}},"24"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-j"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"ACCEPT")]),l(`
`),s("span",{class:"line"})])])],-1),Ws=s("p",null,"web01操作：",-1),Ls=s("div",{class:"language-csharp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#FFCB6B"}},"root@web01"),s("span",{style:{color:"#A6ACCD"}}," ~"),s("span",{style:{color:"#89DDFF"}},"]"),s("span",{style:{color:"#A6ACCD"}},"# cat "),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"etc"),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"sysconfig"),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"network"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"scripts"),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"ifcfg"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"eth0")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"TYPE"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}},"Ethernet")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"BOOTPROTO"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}},"none")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"DEFROUTE"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}},"yes")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"NAME"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}},"eth0")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"DEVICE"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}},"eth0")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"ONBOOT"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}},"no")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"IPADDR"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}},"10.0.0.7")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"PREFIX"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#F78C6C"}},"24")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"GATEWAY"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}},"10.0.0.2")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"DNS1"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}},"10.0.0.2")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#FFCB6B"}},"root@web01"),s("span",{style:{color:"#A6ACCD"}}," ~"),s("span",{style:{color:"#89DDFF"}},"]"),s("span",{style:{color:"#A6ACCD"}},"# cat "),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"etc"),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"sysconfig"),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"network"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"scripts"),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"ifcfg"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"eth1")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"TYPE"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}},"Ethernet")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"BOOTPROTO"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}},"none")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"DEFROUTE"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}},"yes")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"NAME"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}},"eth1")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"DEVICE"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}},"eth1")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"ONBOOT"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}},"yes")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"IPADDR"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}},"172.16.1.7")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"GATEWAY"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}},"172.16.1.61")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"PREFIX"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#F78C6C"}},"24")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"DNS1"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}},"10.0.0.2")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#FFCB6B"}},"root@web01"),s("span",{style:{color:"#A6ACCD"}}," ~"),s("span",{style:{color:"#89DDFF"}},"]"),s("span",{style:{color:"#A6ACCD"}},"# systemctl restart network ")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#FFCB6B"}},"root@web01"),s("span",{style:{color:"#A6ACCD"}}," ~"),s("span",{style:{color:"#89DDFF"}},"]"),s("span",{style:{color:"#A6ACCD"}},"# ip r")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"default via 172.16.1.61 dev eth1  proto "),s("span",{style:{color:"#C792EA"}},"static"),s("span",{style:{color:"#A6ACCD"}},"  metric "),s("span",{style:{color:"#F78C6C"}},"100"),s("span",{style:{color:"#A6ACCD"}}," ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"172.16.1.0"),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#F78C6C"}},"24"),s("span",{style:{color:"#A6ACCD"}}," dev eth1  proto kernel  scope link  src 172.16.1.7  metric "),s("span",{style:{color:"#F78C6C"}},"100"),s("span",{style:{color:"#A6ACCD"}}," ")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#FFCB6B"}},"root@web01"),s("span",{style:{color:"#A6ACCD"}}," ~"),s("span",{style:{color:"#89DDFF"}},"]"),s("span",{style:{color:"#A6ACCD"}},"# cat "),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"etc"),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"resolv"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#A6ACCD"}},"conf    ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"nameserver 10.0.1.2")]),l(`
`),s("span",{class:"line"})])])],-1),Ss=s("p",null,"web01测试访问外网：",-1),$s=s("div",{class:"language-csharp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#FFCB6B"}},"root@web01"),s("span",{style:{color:"#A6ACCD"}}," ~"),s("span",{style:{color:"#89DDFF"}},"]"),s("span",{style:{color:"#A6ACCD"}},"# ping www"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#A6ACCD"}},"baidu"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#A6ACCD"}},"com")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"PING"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"www"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#FFCB6B"}},"a"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#FFCB6B"}},"shifen"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"com"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#A6ACCD"}},"14.215.177.39"),s("span",{style:{color:"#89DDFF"}},")"),s("span",{style:{color:"#A6ACCD"}}," 56"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#A6ACCD"}},"84"),s("span",{style:{color:"#89DDFF"}},")"),s("span",{style:{color:"#A6ACCD"}}," bytes of data.")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"64 bytes from 14.215.177.39: icmp_seq=1 ttl=127 time=7.70 ms")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"64 bytes from 14.215.177.39: icmp_seq=2 ttl=127 time=8.92 ms")]),l(`
`),s("span",{class:"line"})])])],-1),Gs={id:"_3-端口映射",tabindex:"-1"},Ms=s("p",null,"m01操作：",-1),Vs=s("div",{class:"language-css"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"iptables -t nat -A PREROUTING -d 10"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#FFCB6B"}},"0"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#FFCB6B"}},"1"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#FFCB6B"}},"61"),s("span",{style:{color:"#A6ACCD"}}," -p tcp --dport 9000 -j DNAT --to-destination 172"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#FFCB6B"}},"16"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#FFCB6B"}},"1"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#FFCB6B"}},"7"),s("span",{style:{color:"#A6ACCD"}},":22")]),l(`
`),s("span",{class:"line"})])])],-1),Xs=s("p",null,"命令拆解：",-1),Zs=s("div",{class:"language-css"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"表：nat")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"链：PREROUTING")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"目标IP：10"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#FFCB6B"}},"0"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#FFCB6B"}},"1"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#FFCB6B"}},"61")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"目标端口：9000")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"协议：tcp")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"动作：DNAT")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"目标IP：172"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#FFCB6B"}},"16"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#FFCB6B"}},"1"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#FFCB6B"}},"7")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"目标端口：22")]),l(`
`),s("span",{class:"line"})])])],-1),Js=s("p",null,"访问测试:",-1),zs=s("div",{class:"language-csharp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"zhangyadeMacBook"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#FFCB6B"}},"Pro"),s("span",{style:{color:"#89DDFF"}},":~"),s("span",{style:{color:"#A6ACCD"}}," zhangya$ ssh root@10.0.1.61 "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"p "),s("span",{style:{color:"#F78C6C"}},"9000")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"root@10.0.1.61"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"s password:")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Last "),s("span",{style:{color:"#FFCB6B"}},"login"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#A6ACCD"}}," Tue Aug "),s("span",{style:{color:"#F78C6C"}},"20"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"09"),s("span",{style:{color:"#A6ACCD"}},":"),s("span",{style:{color:"#F78C6C"}},"38"),s("span",{style:{color:"#A6ACCD"}},":"),s("span",{style:{color:"#F78C6C"}},"42"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"2019"),s("span",{style:{color:"#A6ACCD"}}," from 172.16.1.51")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#FFCB6B"}},"root@web01"),s("span",{style:{color:"#A6ACCD"}}," ~"),s("span",{style:{color:"#89DDFF"}},"]"),s("span",{style:{color:"#A6ACCD"}},"#")]),l(`
`),s("span",{class:"line"})])])],-1),Ys={id:"_4-ip映射",tabindex:"-1"},qs=s("div",{class:"language-bash"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#A6ACCD"}},"root@m01 "),s("span",{style:{color:"#89DDFF"}},"~]"),s("span",{style:{color:"#A6ACCD"}},"# ip a add 10.0.1.62/"),s("span",{style:{color:"#F78C6C"}},"24"),s("span",{style:{color:"#A6ACCD"}}," dev eth0 label eth0:"),s("span",{style:{color:"#F78C6C"}},"0")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#A6ACCD"}},"root@m01 "),s("span",{style:{color:"#89DDFF"}},"~]"),s("span",{style:{color:"#A6ACCD"}},"# iptables -t nat -A PREROUTING -d 10.0.1.62 -j DNAT --to-destination 172.16.1.7")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#A6ACCD"}},"root@m01 "),s("span",{style:{color:"#89DDFF"}},"~]"),s("span",{style:{color:"#A6ACCD"}},"# iptables -nL -t nat")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"Chain"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"PREROUTING"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#FFCB6B"}},"policy"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"ACCEPT"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"target"),s("span",{style:{color:"#A6ACCD"}},"     "),s("span",{style:{color:"#C3E88D"}},"prot"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"opt"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"source"),s("span",{style:{color:"#A6ACCD"}},"               "),s("span",{style:{color:"#C3E88D"}},"destination"),s("span",{style:{color:"#A6ACCD"}},"         ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"DNAT"),s("span",{style:{color:"#A6ACCD"}},"       "),s("span",{style:{color:"#C3E88D"}},"tcp"),s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#C3E88D"}},"--"),s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#C3E88D"}},"0.0.0.0/"),s("span",{style:{color:"#F78C6C"}},"0"),s("span",{style:{color:"#A6ACCD"}},"            "),s("span",{style:{color:"#C3E88D"}},"10.0.1.61"),s("span",{style:{color:"#A6ACCD"}},"            "),s("span",{style:{color:"#C3E88D"}},"tcp"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"dpt:"),s("span",{style:{color:"#F78C6C"}},"9000"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"to:172.16.1.7:"),s("span",{style:{color:"#F78C6C"}},"22")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"DNAT"),s("span",{style:{color:"#A6ACCD"}},"       "),s("span",{style:{color:"#C3E88D"}},"all"),s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#C3E88D"}},"--"),s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#C3E88D"}},"0.0.0.0/"),s("span",{style:{color:"#F78C6C"}},"0"),s("span",{style:{color:"#A6ACCD"}},"            "),s("span",{style:{color:"#C3E88D"}},"10.0.1.62"),s("span",{style:{color:"#A6ACCD"}},"            "),s("span",{style:{color:"#C3E88D"}},"to:172.16.1.7")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"Chain"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"INPUT"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#FFCB6B"}},"policy"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"ACCEPT"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"target"),s("span",{style:{color:"#A6ACCD"}},"     "),s("span",{style:{color:"#C3E88D"}},"prot"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"opt"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"source"),s("span",{style:{color:"#A6ACCD"}},"               "),s("span",{style:{color:"#C3E88D"}},"destination"),s("span",{style:{color:"#A6ACCD"}},"         ")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"Chain"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"OUTPUT"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#FFCB6B"}},"policy"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"ACCEPT"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"target"),s("span",{style:{color:"#A6ACCD"}},"     "),s("span",{style:{color:"#C3E88D"}},"prot"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"opt"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"source"),s("span",{style:{color:"#A6ACCD"}},"               "),s("span",{style:{color:"#C3E88D"}},"destination"),s("span",{style:{color:"#A6ACCD"}},"         ")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"Chain"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"POSTROUTING"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#FFCB6B"}},"policy"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"ACCEPT"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"target"),s("span",{style:{color:"#A6ACCD"}},"     "),s("span",{style:{color:"#C3E88D"}},"prot"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"opt"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"source"),s("span",{style:{color:"#A6ACCD"}},"               "),s("span",{style:{color:"#C3E88D"}},"destination"),s("span",{style:{color:"#A6ACCD"}},"         ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"SNAT"),s("span",{style:{color:"#A6ACCD"}},"       "),s("span",{style:{color:"#C3E88D"}},"all"),s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#C3E88D"}},"--"),s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#C3E88D"}},"172.16.1.0/"),s("span",{style:{color:"#F78C6C"}},"24"),s("span",{style:{color:"#A6ACCD"}},"        "),s("span",{style:{color:"#C3E88D"}},"0.0.0.0/"),s("span",{style:{color:"#F78C6C"}},"0"),s("span",{style:{color:"#A6ACCD"}},"            "),s("span",{style:{color:"#C3E88D"}},"to:10.0.1.61")]),l(`
`),s("span",{class:"line"})])])],-1),Hs=s("p",null,"测试访问：",-1),Ks=s("div",{class:"language-csharp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"zhangyadeMacBook"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#FFCB6B"}},"Pro"),s("span",{style:{color:"#89DDFF"}},":~"),s("span",{style:{color:"#A6ACCD"}}," zhangya$ ssh root@10.0.1.62")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"root@10.0.1.62"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"s password:")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Last "),s("span",{style:{color:"#FFCB6B"}},"login"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#A6ACCD"}}," Wed Aug "),s("span",{style:{color:"#F78C6C"}},"21"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"13"),s("span",{style:{color:"#A6ACCD"}},":"),s("span",{style:{color:"#F78C6C"}},"30"),s("span",{style:{color:"#A6ACCD"}},":"),s("span",{style:{color:"#F78C6C"}},"04"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"2019"),s("span",{style:{color:"#A6ACCD"}}," from 10.0.1.1")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#FFCB6B"}},"root@web01"),s("span",{style:{color:"#A6ACCD"}}," ~"),s("span",{style:{color:"#89DDFF"}},"]"),s("span",{style:{color:"#A6ACCD"}},"# hostname")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"web01")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#FFCB6B"}},"root@web01"),s("span",{style:{color:"#A6ACCD"}}," ~"),s("span",{style:{color:"#89DDFF"}},"]"),s("span",{style:{color:"#A6ACCD"}},"#")]),l(`
`),s("span",{class:"line"})])])],-1),Qs={id:"第9章-iptables规则保存",tabindex:"-1"},sl=s("p",null,"iptables-save > 20190821 #将防火墙规则保存到文件中 iptables-save #将防火墙规则保存到配置文件中，防止重启后失效 iptables-restore < 20190821 #从配置文件里载入防火墙配置",-1),ll={id:"第10章-iptables防坑指南",tabindex:"-1"},ol=s("p",null,"1.修改之前先导出备份一份 2.修改的时候小心别把自己关在外面 3.可以现在定时任务里添加一条定时清空的规则，等测试没问题再取消定时任务",-1),el={id:"第11章-课堂笔记",tabindex:"-1"},al=s("p",null,"1.从上往下依次匹配 2.一但匹配上,就不在往下匹配了 3.默认规则,默认的情况,默认规则是放行所有",-1),nl=s("p",null,"-A INPUT -p tcp -m state --state NEW -m tcp --dport 22 -j ACCEPT",-1),tl=s("p",null,"-A INPUT :把这条规则添加到INPUT链的最后一行 -p tcp :指定协议为tcp -m state --state NEW :匹配TCP的连接状态 -m tcp --dport 22 :匹配TCP协议的目标端口 -j ACCEPT :执行动作 放行",-1),pl=s("p",null,"iptables A INPUT -p tcp -m state --dport 22 -j DROP 禁止一个数据包: tcp协议 访问的端口是22",-1),cl=s("p",null,"iptables -A INPUT -p tcp --dport 22 -j DROP iptables -nL iptables -nL --line-numbers iptables -D INPUT 1",-1),Cl=s("p",null,"禁止源地址是10.0.0.7的主机访问22端口 iptables -A INPUT -p tcp -s 10.0.0.7 --dport 22 -j DROP",-1),rl=s("p",null,"禁止源地址是10.0.0.7的主机访问任何端口 iptables -A INPUT -p tcp -s 10.0.0.7 -j DROP",-1),yl=s("p",null,"禁止源地址是10.0.0.8的主机访问80端口 iptables -A INPUT -p tcp -s 10.0.0.8 --dport 80 -j DROP",-1),Dl=s("p",null,"禁止除了10.0.0.7以外的地址访问80端口 iptables -A INPUT -p tcp ! -s 10.0.0.7 --dport 80 -j DROP",-1),Al=s("p",null,"2条规则冲突,会以谁先谁为准 iptables -I INPUT -p tcp -s 10.0.0.7 --dport 22 -j ACCEPT iptables -I INPUT -p tcp -s 10.0.0.7 --dport 22 -j DROP",-1),il=s("p",null,"禁止10.0.0.7访问22和80端口 iptables -I INPUT -p tcp -s 10.0.0.7 -m multiport --dport 22,80 -j DROP",-1),Fl=s("p",null,"禁止10.0.0.7访问22到100之间的所有端口 iptables -A INPUT -p tcp -s 10.0.0.7 --dport 22:100 -j DROP",-1),dl=s("p",null,"禁止所有主机ping iptables -A INPUT -p icmp --icmp-type 8 -j DROP",-1),_l=s("p",null,"放行10.0.0.7可以ping iptables -I INPUT 2 -p icmp --icmp-type 8 -s 10.0.0.7 -j ACCEPT",-1),hl=s("p",null,"只允许10.0.0.7可以ping ACCEPT icmp -- 10.0.0.7 0.0.0.0/0 icmptype 8 DROP icmp -- 0.0.0.0/0 0.0.0.0/0 icmptype 8",-1),El=s("p",null,"等同于上一条,优化版,只要不是10.0.0.7就不允许ping iptables -I INPUT -p icmp --icmp-type 8 ! -s 10.0.0.7 -j DROP",-1),ul=s("p",null,"优先级: 匹配频次最高的条件放前面",-1),Bl=s("p",null,"100次 80 90 22 10",-1),bl=s("p",null,"安全策略: 一种是广场上巡逻的人,默认认为大家都是安全的,只有通缉令上的人需要关注 一种是火车进站安检,默认所有人都是不安全的,只有有票的人才放行",-1),Pl=s("p",null,"iptables -F iptables -X iptables -Z iptables -A INPUT -p tcp -m multiport --dport 80,443 -j ACCEPT iptables -A INPUT -p tcp --dport 22 -j ACCEPT iptables -A INPUT -s 10.0.0.0/24 -j ACCEPT iptables -A INPUT -s 172.16.1.0/24 -j ACCEPT iptables -A INPUT -i lo -j ACCEPT iptables -P INPUT DROP iptables -P FORWARD DROP iptables -P OUTPUT ACCEPT iptables -nL",-1),gl=s("p",null,"共享上网 iptables -t nat -A POSTROUTING -s 172.16.1.0/24 -j SNAT --to-source 10.0.0.61",-1),Tl=s("p",null,"-t nat :NAT表 -A POSTROUTING :POSTROUTING链 -s 172.16.1.0/24 :源地址172.16.1.0/24 -j SNAT :SNAT 改写源地址 --to-source 10.0.0.61 :将源地址改写成10.0.0.61",-1),ml=s("p",null,"172.16.1.7发给百度的数据包格式 源端口: 80 目的端口: 80 源IP: 172.16.1.7 目的IP: 百度的IP 网关: 172.16.1.61",-1),fl=s("p",null,"如果172.16.1.7想上网,需要改成如下的包格式",-1),Il=s("p",null,"10.0.0.61访问百度 源端口: 80 目的端口: 80 源IP: 10.0.0.61 目的IP: 百度的IP 网关: 10.0.0.2",-1),vl=s("p",null,"天坑 如果你的默认规则设置了拒绝所有，又执行了清除规则的语句-F 那就意味着，所有的请求全部都拒绝了 原因是-F不会改变默认规则",-1),Nl=s("p",null,"[root@web01 ~]# iptables -nL Chain INPUT (policy DROP) target prot opt source destination",-1),Rl=s("p",null,"Chain FORWARD (policy DROP) target prot opt source destination",-1),Ol=s("p",null,"Chain OUTPUT (policy ACCEPT) target prot opt source destination",-1),Ul=s("p",null,"解决： 物理机： 1.去机房自己清空 2.让机房的人重启服务器，前提条件是规则没有写入配置里 云服务器： 直接通过控制台恢复",-1),kl=s("p",null,"如何避免： 1.测试规则之前，先写个定时任务，每隔5分钟重启一次iptables",-1),jl=s("p",null,"FORWARD链默认为DROP的时候共享上网失效 解决方法： 第一种，添加2条规则 iptables -A FORWARD -s 172.16.1.0/24 -j ACCEPT iptables -A FORWARD -d 172.16.1.0/24 -j ACCEPT 第二种：修改FORWARD链默认规则为ACCEPT iptables -P FORWARD ACCEPT",-1),xl=s("p",null,"端口映射： 访问10.0.0.61的9000端口，跳转到172.16.1.7的22端口",-1),wl=s("p",null,"访问10.0.0.61的9000端口的数据包格式 源端口: 9000 目的端口: 9000 源IP: 10.0.0.1 目的IP: 10.0.0.61",-1),Wl=s("p",null,"源端口: 22 目的端口: 22 源IP: 10.0.0.1 目的IP: 172.16.1.7:22",-1),Ll=s("p",null,"iptables -t nat -A PREROUTING -d 10.0.0.61 -p tcp --dport 9000 -j DNAT --to-destination 172.16.1.7:22 注意： 改写数据包的目标IP和端口 用到的是PREROUTING链",-1),Sl=s("p",null,"IP映射： ip a add 10.0.1.62/24 dev eth0 label eth0:0 iptables -t nat -A PREROUTING -d 10.0.1.62 -j DNAT --to-destination 172.16.1.7",-1),$l=s("p",null,"保存命令： iptables-save iptables-save > iptables_m01 iptables-restore < iptables_m01 iptables-save > /etc/sysconfig/iptables",-1),Gl=s("p",null,"摘录自张导简书",-1);function Ml(n,Vl,Xl,Zl,c,Jl){const e=i,C=r;return A(),D(C,{frontmatter:c.frontmatter,data:c.data},{"main-content-md":o(()=>[s("h1",_,[l("第1章 iptables介绍 "),a(e,{class:"header-anchor",href:"#第1章-iptables介绍","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),s("h2",h,[l("1.iptables是什么？ "),a(e,{class:"header-anchor",href:"#_1-iptables是什么？","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),E,s("h2",u,[l("2.iptables企业应用场景 "),a(e,{class:"header-anchor",href:"#_2-iptables企业应用场景","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),B,s("h2",b,[l("3.商用防火墙品牌 "),a(e,{class:"header-anchor",href:"#_3-商用防火墙品牌","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),P,s("h1",g,[l("第2章 iptables工作流程 "),a(e,{class:"header-anchor",href:"#第2章-iptables工作流程","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),T,s("h1",m,[l("第3章 iptables四表五链 "),a(e,{class:"header-anchor",href:"#第3章-iptables四表五链","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),s("h2",f,[l("1.表与链对应关系 "),a(e,{class:"header-anchor",href:"#_1-表与链对应关系","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),I,v,s("h2",N,[l("2.FILTER表 "),a(e,{class:"header-anchor",href:"#_2-filter表","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),R,s("h2",O,[l("3.NAT表 "),a(e,{class:"header-anchor",href:"#_3-nat表","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),U,s("h1",k,[l("第4章 iptables工作原理示意图 "),a(e,{class:"header-anchor",href:"#第4章-iptables工作原理示意图","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),j,x,s("h1",w,[l("第5章 iptables环境准备 "),a(e,{class:"header-anchor",href:"#第5章-iptables环境准备","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),s("h2",W,[l("1.安装iptables管理命令 "),a(e,{class:"header-anchor",href:"#_1-安装iptables管理命令","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),L,s("h2",S,[l("2.加载防火墙的内核模块 "),a(e,{class:"header-anchor",href:"#_2-加载防火墙的内核模块","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),$,G,M,s("h2",V,[l("3.启动防火墙 "),a(e,{class:"header-anchor",href:"#_3-启动防火墙","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),X,Z,J,z,s("h1",Y,[l("第6章 iptables基本操作命令 "),a(e,{class:"header-anchor",href:"#第6章-iptables基本操作命令","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),s("h2",q,[l("1.查看防火墙规则 "),a(e,{class:"header-anchor",href:"#_1-查看防火墙规则","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),H,s("h2",K,[l("2.清除防火墙规则 "),a(e,{class:"header-anchor",href:"#_2-清除防火墙规则","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),Q,s("h2",ss,[l("3.添加防火墙规则 "),a(e,{class:"header-anchor",href:"#_3-添加防火墙规则","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),ls,s("h2",os,[l("4.网络连接状态 "),a(e,{class:"header-anchor",href:"#_4-网络连接状态","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),es,s("h2",as,[l("4.删除某个规则 "),a(e,{class:"header-anchor",href:"#_4-删除某个规则","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),ns,ts,s("h1",ps,[l("第7章 iptables实战 "),a(e,{class:"header-anchor",href:"#第7章-iptables实战","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),s("h2",cs,[l("1.禁止某个端口访问 "),a(e,{class:"header-anchor",href:"#_1-禁止某个端口访问","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),Cs,rs,ys,s("h2",Ds,[l("2.禁止某个IP访问 "),a(e,{class:"header-anchor",href:"#_2-禁止某个ip访问","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),As,is,Fs,s("h2",ds,[l("3.禁止除跳板机以外的IP访问 "),a(e,{class:"header-anchor",href:"#_3-禁止除跳板机以外的ip访问","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),_s,s("h2",hs,[l("4.匹配端口范围 "),a(e,{class:"header-anchor",href:"#_4-匹配端口范围","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),Es,s("h2",us,[l("5.匹配ICMP类型 "),a(e,{class:"header-anchor",href:"#_5-匹配icmp类型","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),Bs,s("h2",bs,[l("6.练习题 "),a(e,{class:"header-anchor",href:"#_6-练习题","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),Ps,gs,Ts,ms,fs,Is,s("h1",vs,[l("第8章 iptables企业案例 "),a(e,{class:"header-anchor",href:"#第8章-iptables企业案例","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),s("h2",Ns,[l("1.部署一个安全的防火墙 "),a(e,{class:"header-anchor",href:"#_1-部署一个安全的防火墙","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),Rs,Os,Us,ks,s("h2",js,[l("2.局域网共享上网 "),a(e,{class:"header-anchor",href:"#_2-局域网共享上网","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),xs,ws,Ws,Ls,Ss,$s,s("h2",Gs,[l("3.端口映射 "),a(e,{class:"header-anchor",href:"#_3-端口映射","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),Ms,Vs,Xs,Zs,Js,zs,s("h2",Ys,[l("4.IP映射 "),a(e,{class:"header-anchor",href:"#_4-ip映射","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),qs,Hs,Ks,s("h1",Qs,[l("第9章 iptables规则保存 "),a(e,{class:"header-anchor",href:"#第9章-iptables规则保存","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),sl,s("h1",ll,[l("第10章 iptables防坑指南 "),a(e,{class:"header-anchor",href:"#第10章-iptables防坑指南","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),ol,s("h1",el,[l("第11章 课堂笔记 "),a(e,{class:"header-anchor",href:"#第11章-课堂笔记","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),al,nl,tl,pl,cl,Cl,rl,yl,Dl,Al,il,Fl,dl,_l,hl,El,ul,Bl,bl,Pl,gl,Tl,ml,fl,Il,vl,Nl,Rl,Ol,Ul,kl,jl,xl,wl,Wl,Ll,Sl,$l,Gl]),"main-header":o(()=>[t(n.$slots,"main-header")]),"main-header-after":o(()=>[t(n.$slots,"main-header-after")]),"main-nav":o(()=>[t(n.$slots,"main-nav")]),"main-content":o(()=>[t(n.$slots,"main-content")]),"main-content-after":o(()=>[t(n.$slots,"main-content-after")]),"main-nav-before":o(()=>[t(n.$slots,"main-nav-before")]),"main-nav-after":o(()=>[t(n.$slots,"main-nav-after")]),comment:o(()=>[t(n.$slots,"comment")]),footer:o(()=>[t(n.$slots,"footer")]),aside:o(()=>[t(n.$slots,"aside")]),"aside-custom":o(()=>[t(n.$slots,"aside-custom")]),default:o(()=>[t(n.$slots,"default")]),_:3},8,["frontmatter","data"])}const so=y(d,[["render",Ml]]);export{Ql as __pageData,so as default};
