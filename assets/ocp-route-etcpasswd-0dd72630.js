import{_ as i}from"./ValaxyMain.vue_vue_type_style_index_0_lang-e7d89830.js";import{_ as y,c as D,w as o,o as C,a as d,b as l,d as s,e as a,r as t,f as u,p as F}from"./app-4d89398e.js";import"./YunFooter.vue_vue_type_script_setup_true_lang-2ca9ab31.js";import"./YunCard.vue_vue_type_style_index_0_lang-4f49289b.js";import"./YunPageHeader.vue_vue_type_script_setup_true_lang-a8598bd1.js";const el=JSON.parse('{"title":"OpenShift Route 敏感路径拦截实战笔记","description":"","frontmatter":{"title":"OpenShift Route 敏感路径拦截实战笔记","date":"2025-04-16T15:36:50.000Z","updated":"2025-04-16T15:36:50.000Z","tags":"OCP","categories":"Linux技术","end":false},"headers":[{"level":2,"title":"背景","slug":"背景","link":"#背景","children":[]},{"level":2,"title":"问题分析","slug":"问题分析","link":"#问题分析","children":[]},{"level":2,"title":"探索历程","slug":"探索历程","link":"#探索历程","children":[{"level":3,"title":"错误尝试：HAProxy 注解拦截","slug":"错误尝试：haproxy-注解拦截","link":"#错误尝试：haproxy-注解拦截","children":[]}]},{"level":2,"title":"最终方案：多 Route 拦截","slug":"最终方案：多-route-拦截","link":"#最终方案：多-route-拦截","children":[{"level":3,"title":"配置步骤","slug":"配置步骤","link":"#配置步骤","children":[]}]},{"level":2,"title":"验证方法","slug":"验证方法","link":"#验证方法","children":[]},{"level":2,"title":"总结与反思","slug":"总结与反思","link":"#总结与反思","children":[]}],"relativePath":"pages/posts/ocp-route-etcpasswd.md","path":"/Users/vlinux/vlinux/blog/valaxy/vlinux.github.io/pages/posts/ocp-route-etcpasswd.md","lastUpdated":1744789224000}'),r=JSON.parse('{"title":"OpenShift Route 敏感路径拦截实战笔记","description":"","frontmatter":{"title":"OpenShift Route 敏感路径拦截实战笔记","date":"2025-04-16T15:36:50.000Z","updated":"2025-04-16T15:36:50.000Z","tags":"OCP","categories":"Linux技术","end":false},"headers":[{"level":2,"title":"背景","slug":"背景","link":"#背景","children":[]},{"level":2,"title":"问题分析","slug":"问题分析","link":"#问题分析","children":[]},{"level":2,"title":"探索历程","slug":"探索历程","link":"#探索历程","children":[{"level":3,"title":"错误尝试：HAProxy 注解拦截","slug":"错误尝试：haproxy-注解拦截","link":"#错误尝试：haproxy-注解拦截","children":[]}]},{"level":2,"title":"最终方案：多 Route 拦截","slug":"最终方案：多-route-拦截","link":"#最终方案：多-route-拦截","children":[{"level":3,"title":"配置步骤","slug":"配置步骤","link":"#配置步骤","children":[]}]},{"level":2,"title":"验证方法","slug":"验证方法","link":"#验证方法","children":[]},{"level":2,"title":"总结与反思","slug":"总结与反思","link":"#总结与反思","children":[]}],"relativePath":"pages/posts/ocp-route-etcpasswd.md","path":"/Users/vlinux/vlinux/blog/valaxy/vlinux.github.io/pages/posts/ocp-route-etcpasswd.md","lastUpdated":1744789224000}'),A={name:"pages/posts/ocp-route-etcpasswd.md",data(){return{data:r,frontmatter:r.frontmatter}},setup(){F("pageData",r)}},h=l("p",null,[s("在 OpenShift 环境中，我们遇到一个安全需求："),l("strong",null,[s("拦截 "),l("code",null,"/etc/passwd"),s(" 等敏感路径的访问请求")]),s("，防止路径遍历攻击。最初尝试直接在 Route 中配置正则表达式拦截，但发现 OpenShift Route 原生不支持类似 "),l("code",null,"haproxy.router.openshift.io/deny-regex"),s(" 的注解。经过多次探索，最终通过 "),l("strong",null,"多 Route 组合方案"),s(" 成功实现目标。")],-1),f={id:"openshift-route-敏感路径拦截实战笔记",tabindex:"-1"},_={id:"背景",tabindex:"-1"},m=l("hr",null,null,-1),g={id:"问题分析",tabindex:"-1"},v=l("ol",null,[l("li",null,[l("strong",null,"需求场景"),s("： "),l("ul",null,[l("li",null,[s("拦截直接访问 "),l("code",null,"/etc/passwd"),s(" 的请求。")]),l("li",null,[s("防御路径遍历攻击（如 "),l("code",null,"/foo/../etc/passwd"),s("）。")])])]),l("li",null,[l("strong",null,"技术限制"),s("： "),l("ul",null,[l("li",null,"OpenShift Route 不支持正则表达式拦截。"),l("li",null,"应用层（如 Nginx）未配置路径过滤，导致请求穿透到后端。")])])],-1),x=l("hr",null,null,-1),E={id:"探索历程",tabindex:"-1"},k={id:"错误尝试：haproxy-注解拦截",tabindex:"-1"},b=l("p",null,[s("最初误以为 OpenShift Route 支持 "),l("code",null,"haproxy.router.openshift.io/deny-regex"),s("，但该注解实际不存在。"),l("strong",null,"失败原因"),s("：")],-1),R=l("ul",null,[l("li",null,"OpenShift Route 基于 HAProxy，但其配置抽象层未开放复杂正则匹配。")],-1),S=l("p",null,[l("strong",null,"问题"),s("：需调整集群入口架构，与现有 Route 方案不兼容。")],-1),w=l("hr",null,null,-1),$={id:"最终方案：多-route-拦截",tabindex:"-1"},O=l("p",null,[s("通过 "),l("strong",null,"精确匹配敏感路径"),s(" 并指向无效服务，实现请求拦截。")],-1),P={id:"配置步骤",tabindex:"-1"},B={id:"_1-主-route（处理正常请求）",tabindex:"-1"},N=l("div",{class:"language-yaml"},[l("span",{class:"copy"}),l("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[l("code",null,[l("span",{class:"line"},[l("span",{style:{color:"#F07178"}},"apiVersion"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"route.openshift.io/v1")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#F07178"}},"kind"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"Route")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#F07178"}},"metadata"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"  "),l("span",{style:{color:"#F07178"}},"name"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"*"),l("span",{style:{color:"#A6ACCD"}},"**")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#F07178"}},"spec"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"  "),l("span",{style:{color:"#F07178"}},"host"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"*"),l("span",{style:{color:"#A6ACCD"}},"**")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"  "),l("span",{style:{color:"#F07178"}},"path"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"/")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"  "),l("span",{style:{color:"#F07178"}},"to"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#F07178"}},"kind"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"Service")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#F07178"}},"name"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"*"),l("span",{style:{color:"#A6ACCD"}},"**  "),l("span",{style:{color:"#676E95","font-style":"italic"}},"# 正常业务服务")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#F07178"}},"weight"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#F78C6C"}},"100")]),s(`
`),l("span",{class:"line"})])])],-1),V={id:"_2-拦截-route（精确匹配敏感路径）",tabindex:"-1"},T=l("div",{class:"language-yaml"},[l("span",{class:"copy"}),l("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[l("code",null,[l("span",{class:"line"},[l("span",{style:{color:"#F07178"}},"apiVersion"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"route.openshift.io/v1")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#F07178"}},"kind"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"Route")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#F07178"}},"metadata"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"  "),l("span",{style:{color:"#F07178"}},"name"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"*"),l("span",{style:{color:"#A6ACCD"}},"**")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#F07178"}},"spec"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"  "),l("span",{style:{color:"#F07178"}},"host"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"*"),l("span",{style:{color:"#A6ACCD"}},"**")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"  "),l("span",{style:{color:"#F07178"}},"path"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"/etc/passwd"),l("span",{style:{color:"#A6ACCD"}},"        "),l("span",{style:{color:"#676E95","font-style":"italic"}},"# 精确匹配路径")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"  "),l("span",{style:{color:"#F07178"}},"to"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#F07178"}},"kind"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"Service")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#F07178"}},"name"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"invalid-service"),l("span",{style:{color:"#A6ACCD"}},"  "),l("span",{style:{color:"#676E95","font-style":"italic"}},"# 不存在或返回错误的服务")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#F07178"}},"weight"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#F78C6C"}},"100")]),s(`
`),l("span",{class:"line"})])])],-1),H={id:"_3-静态错误服务（可选）",tabindex:"-1"},M=l("p",null,"若需返回 403，可部署专用服务：",-1),U=l("div",{class:"language-yaml"},[l("span",{class:"copy"}),l("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[l("code",null,[l("span",{class:"line"},[l("span",{style:{color:"#F07178"}},"apiVersion"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"apps/v1")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#F07178"}},"kind"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"Deployment")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#F07178"}},"metadata"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"  "),l("span",{style:{color:"#F07178"}},"name"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"error-service")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#F07178"}},"spec"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"  "),l("span",{style:{color:"#F07178"}},"template"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#F07178"}},"spec"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"      "),l("span",{style:{color:"#F07178"}},"containers"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"      "),l("span",{style:{color:"#89DDFF"}},"-"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#F07178"}},"name"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"nginx")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        "),l("span",{style:{color:"#F07178"}},"image"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"nginx")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        "),l("span",{style:{color:"#F07178"}},"volumeMounts"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        "),l("span",{style:{color:"#89DDFF"}},"-"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#F07178"}},"name"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"config")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"          "),l("span",{style:{color:"#F07178"}},"mountPath"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"/etc/nginx/conf.d")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"      "),l("span",{style:{color:"#F07178"}},"volumes"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"      "),l("span",{style:{color:"#89DDFF"}},"-"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#F07178"}},"name"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"config")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        "),l("span",{style:{color:"#F07178"}},"configMap"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"          "),l("span",{style:{color:"#F07178"}},"name"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"error-config"),l("span",{style:{color:"#A6ACCD"}},"  "),l("span",{style:{color:"#676E95","font-style":"italic"}},"# 包含返回 403 的 Nginx 配置")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#FFCB6B"}},"---")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#F07178"}},"apiVersion"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"v1")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#F07178"}},"kind"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"Service")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#F07178"}},"metadata"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"  "),l("span",{style:{color:"#F07178"}},"name"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"error-service")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#F07178"}},"spec"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"  "),l("span",{style:{color:"#F07178"}},"ports"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"  "),l("span",{style:{color:"#89DDFF"}},"-"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#F07178"}},"port"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#F78C6C"}},"80")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#F07178"}},"targetPort"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#F78C6C"}},"80")]),s(`
`),l("span",{class:"line"})])])],-1),Z=l("hr",null,null,-1),L={id:"验证方法",tabindex:"-1"},J=l("div",{class:"language-bash"},[l("span",{class:"copy"}),l("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[l("code",null,[l("span",{class:"line"},[l("span",{style:{color:"#676E95","font-style":"italic"}},"# 测试敏感路径")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#FFCB6B"}},"curl"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"-v"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"http://"),l("span",{style:{color:"#A6ACCD"}},"*******"),l("span",{style:{color:"#C3E88D"}},"/etc/passwd")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#676E95","font-style":"italic"}},"# 预期结果：HTTP 503（无效服务）或 403（静态错误服务）")]),s(`
`),l("span",{class:"line"}),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#676E95","font-style":"italic"}},"# 查看 HAProxy 日志")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#FFCB6B"}},"oc"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"logs"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"-n"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"openshift-ingress"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"<"),l("span",{style:{color:"#C3E88D"}},"router-po"),l("span",{style:{color:"#A6ACCD"}},"d"),l("span",{style:{color:"#89DDFF"}},">"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"|"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#FFCB6B"}},"grep"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},'"'),l("span",{style:{color:"#C3E88D"}},"etc/passwd"),l("span",{style:{color:"#89DDFF"}},'"')]),s(`
`),l("span",{class:"line"})])])],-1),j=l("hr",null,null,-1),q={id:"总结与反思",tabindex:"-1"},z=l("ol",null,[l("li",null,[l("strong",null,"OpenShift Route 的限制"),s("： "),l("ul",null,[l("li",null,"不支持正则表达式拦截，需通过多 Route 组合实现。"),l("li",null,[s("复杂场景建议结合 "),l("strong",null,"Service Mesh"),s(" 或 "),l("strong",null,"应用层拦截"),s("。")])])]),l("li",null,[l("strong",null,"防御纵深"),s("： "),l("ul",null,[l("li",null,[l("strong",null,"入口层"),s("：Route 拦截已知攻击模式。")]),l("li",null,[l("strong",null,"应用层"),s("：Nginx 配置过滤敏感路径。")]),l("li",null,[l("strong",null,"容器层"),s("：非 root 用户 + 只读文件系统。")])])]),l("li",null,[l("strong",null,"经验教训"),s("： "),l("ul",null,[l("li",null,"验证技术方案时需严格依赖官方文档。"),l("li",null,"安全防护需多层互补，避免单点失效。")])])],-1);function G(e,I,K,Q,c,W){const n=u,p=i;return C(),D(p,{frontmatter:c.frontmatter,data:c.data},{"main-content-md":o(()=>[h,d(" more "),l("h1",f,[s("OpenShift Route 敏感路径拦截实战笔记 "),a(n,{class:"header-anchor",href:"#openshift-route-敏感路径拦截实战笔记","aria-hidden":"true"},{default:o(()=>[s("#")]),_:1})]),l("h2",_,[s("背景 "),a(n,{class:"header-anchor",href:"#背景","aria-hidden":"true"},{default:o(()=>[s("#")]),_:1})]),m,l("h2",g,[s("问题分析 "),a(n,{class:"header-anchor",href:"#问题分析","aria-hidden":"true"},{default:o(()=>[s("#")]),_:1})]),v,x,l("h2",E,[s("探索历程 "),a(n,{class:"header-anchor",href:"#探索历程","aria-hidden":"true"},{default:o(()=>[s("#")]),_:1})]),l("h3",k,[s("错误尝试：HAProxy 注解拦截 "),a(n,{class:"header-anchor",href:"#错误尝试：haproxy-注解拦截","aria-hidden":"true"},{default:o(()=>[s("#")]),_:1})]),b,R,S,w,l("h2",$,[s("最终方案：多 Route 拦截 "),a(n,{class:"header-anchor",href:"#最终方案：多-route-拦截","aria-hidden":"true"},{default:o(()=>[s("#")]),_:1})]),O,l("h3",P,[s("配置步骤 "),a(n,{class:"header-anchor",href:"#配置步骤","aria-hidden":"true"},{default:o(()=>[s("#")]),_:1})]),l("h4",B,[s("1. 主 Route（处理正常请求） "),a(n,{class:"header-anchor",href:"#_1-主-route（处理正常请求）","aria-hidden":"true"},{default:o(()=>[s("#")]),_:1})]),N,l("h4",V,[s("2. 拦截 Route（精确匹配敏感路径） "),a(n,{class:"header-anchor",href:"#_2-拦截-route（精确匹配敏感路径）","aria-hidden":"true"},{default:o(()=>[s("#")]),_:1})]),T,l("h4",H,[s("3. 静态错误服务（可选） "),a(n,{class:"header-anchor",href:"#_3-静态错误服务（可选）","aria-hidden":"true"},{default:o(()=>[s("#")]),_:1})]),M,U,Z,l("h2",L,[s("验证方法 "),a(n,{class:"header-anchor",href:"#验证方法","aria-hidden":"true"},{default:o(()=>[s("#")]),_:1})]),J,j,l("h2",q,[s("总结与反思 "),a(n,{class:"header-anchor",href:"#总结与反思","aria-hidden":"true"},{default:o(()=>[s("#")]),_:1})]),z]),"main-header":o(()=>[t(e.$slots,"main-header")]),"main-header-after":o(()=>[t(e.$slots,"main-header-after")]),"main-nav":o(()=>[t(e.$slots,"main-nav")]),"main-content":o(()=>[t(e.$slots,"main-content")]),"main-content-after":o(()=>[t(e.$slots,"main-content-after")]),"main-nav-before":o(()=>[t(e.$slots,"main-nav-before")]),"main-nav-after":o(()=>[t(e.$slots,"main-nav-after")]),comment:o(()=>[t(e.$slots,"comment")]),footer:o(()=>[t(e.$slots,"footer")]),aside:o(()=>[t(e.$slots,"aside")]),"aside-custom":o(()=>[t(e.$slots,"aside-custom")]),default:o(()=>[t(e.$slots,"default")]),_:3},8,["frontmatter","data"])}const nl=y(A,[["render",G]]);export{el as __pageData,nl as default};
