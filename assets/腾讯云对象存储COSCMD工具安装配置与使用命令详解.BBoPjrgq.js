import{_ as p}from"./ValaxyMain.vue_vue_type_style_index_0_lang.CdMcCuLR.js";import"./chunks/@vueuse/motion.BITvz5PP.js";import{e as g,u as y,a as F}from"./chunks/vue-router.Cro35QNm.js";import{aa as u,ap as l,ag as a,af as t,ai as s,P as f,ab as m,a1 as C}from"./framework.GHZxz7jq.js";import"./index.mH_NH_pU.js";import"./chunks/dayjs.BldX5ftQ.js";import"./chunks/vue-i18n.C7V8WoQZ.js";import"./chunks/pinia.BfAlK2F6.js";import"./chunks/nprogress.BZwbcB2O.js";/* empty css                    */import"./YunComment.vue_vue_type_style_index_0_lang.BaL1KWr8.js";import"./index.C5okkQwF.js";import"./YunPageHeader.vue_vue_type_script_setup_true_lang.fblE3Fel.js";import"./post.Dy68RlFi.js";const x=g("/posts/腾讯云对象存储COSCMD工具安装配置与使用命令详解",async e=>JSON.parse('{"title":"腾讯云对象存储COSCMD工具安装配置与使用命令详解","description":"","frontmatter":{"title":"腾讯云对象存储COSCMD工具安装配置与使用命令详解","categories":"Linux技术","tags":["COS","COSCMD"],"date":"2021-01-22 09:37:00"},"headers":[],"relativePath":"pages/posts/腾讯云对象存储COSCMD工具安装配置与使用命令详解.md","lastUpdated":null}'),{lazy:(e,n)=>e.name===n.name}),T={__name:"腾讯云对象存储COSCMD工具安装配置与使用命令详解",setup(e,{expose:n}){const{data:r}=x(),k=F(),o=y(),h=Object.assign(o.meta.frontmatter||{},r.value?.frontmatter||{});return k.currentRoute.value.data=r.value,C("valaxy:frontmatter",h),globalThis.$frontmatter=h,n({frontmatter:{title:"腾讯云对象存储COSCMD工具安装配置与使用命令详解",categories:"Linux技术",tags:["COS","COSCMD"],date:"2021-01-22 09:37:00"}}),(i,d)=>{const c=p;return m(),u(c,{frontmatter:f(h)},{"main-content-md":l(()=>[...d[0]||(d[0]=[t("h2",{id:"前言",tabindex:"-1"},[s("前言 "),t("a",{class:"header-anchor",href:"#前言","aria-label":'Permalink to "前言"'},"​")],-1),t("p",null,"COSCMD 工具是一款腾讯云 COS 的命令行操作工具,能方便的在 Linux 服务器上管理对象存储 COS 中的桶文件,支持上传文件,文件夹,下载文件,文件夹,以及删除功能.配合更详细的参数例如 md5 比对,跳过,删除等可以很方便的配置定时备份服务器上的文件到 COS 中.本文将简单介绍在 Linux 系统中的安装,配置和常规上传下载命令,更详细的用法请参考下文中的相关参考链接.",-1),t("hr",null,null,-1),t("h2",{id:"安装",tabindex:"-1"},[s("安装 "),t("a",{class:"header-anchor",href:"#安装","aria-label":'Permalink to "安装"'},"​")],-1),t("h3",{id:"环境依赖",tabindex:"-1"},[s("环境依赖 "),t("a",{class:"header-anchor",href:"#环境依赖","aria-label":'Permalink to "环境依赖"'},"​")],-1),t("ul",null,[t("li",null,"Python 2.7/3.5/3.6"),t("li",null,"最新版本的 pip")],-1),t("h3",{id:"安装命令",tabindex:"-1"},[s("安装命令 "),t("a",{class:"header-anchor",href:"#安装命令","aria-label":'Permalink to "安装命令"'},"​")],-1),t("div",{class:"language-shell"},[t("button",{title:"Copy code",class:"copy"}),t("span",{class:"lang"},"shell"),t("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[t("code",{"v-pre":""},[t("span",{class:"line"},[t("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"yum"),t("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -y"),t("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," install"),t("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," python-pip")]),s(`
`),t("span",{class:"line"},[t("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"python"),t("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -m"),t("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," pip"),t("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," install"),t("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --upgrade"),t("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," pip"),t("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ")]),s(`
`),t("span",{class:"line"},[t("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"pip"),t("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," install"),t("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -I"),t("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," requests")]),s(`
`),t("span",{class:"line"},[t("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"pip"),t("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," install"),t("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," coscmd")])])]),t("button",{class:"code-block-unfold-btn"})],-1),t("p",null,[t("strong",null,"常见参数配置说明如下：")],-1),t("table",null,[t("thead",null,[t("tr",null,[t("th",{style:{"text-align":"left"}},"选项"),t("th",{style:{"text-align":"left"}},"参数说明"),t("th",{style:{"text-align":"left"}},"有效值"),t("th",{style:{"text-align":"left"}},"是否必选")])]),t("tbody",null,[t("tr",null,[t("td",{style:{"text-align":"left"}},"-a"),t("td",{style:{"text-align":"left"}},[s("密钥 ID 请前往 "),t("a",{href:"https://console.cloud.tencent.com/cam/capi",target:"_blank",rel:"noreferrer"},"API 密钥控制台"),s(" 获取")]),t("td",{style:{"text-align":"left"}},"字符串"),t("td",{style:{"text-align":"left"}},"是")]),t("tr",null,[t("td",{style:{"text-align":"left"}},"-s"),t("td",{style:{"text-align":"left"}},[s("密钥 Key 请前往 "),t("a",{href:"https://console.cloud.tencent.com/cam/capi",target:"_blank",rel:"noreferrer"},"API 密钥控制台"),s(" 获取")]),t("td",{style:{"text-align":"left"}},"字符串"),t("td",{style:{"text-align":"left"}},"是")]),t("tr",null,[t("td",{style:{"text-align":"left"}},"-t"),t("td",{style:{"text-align":"left"}},"临时密钥 token，当使用临时密钥时需要配置，设置 x-cos-security-token 头部"),t("td",{style:{"text-align":"left"}},"字符串"),t("td",{style:{"text-align":"left"}},"否")]),t("tr",null,[t("td",{style:{"text-align":"left"}},"-b"),t("td",{style:{"text-align":"left"}},[s("指定的存储桶名称，存储桶的命名格式为 BucketName-APPID，请参见 "),t("a",{href:"https://cloud.tencent.com/document/product/436/13312#.E5.AD.98.E5.82.A8.E6.A1.B6.E5.91.BD.E5.90.8D.E8.A7.84.E8.8C.83",target:"_blank",rel:"noreferrer"},"命名规范"),s("。初次配置使用时，您需要在 COS 控制台创建一个存储桶，用于配置工具")]),t("td",{style:{"text-align":"left"}},"字符串"),t("td",{style:{"text-align":"left"}},"是")]),t("tr",null,[t("td",{style:{"text-align":"left"}},"-r"),t("td",{style:{"text-align":"left"}},[s("存储桶所在地域，请参见 "),t("a",{href:"https://cloud.tencent.com/doc/product/436/6224",target:"_blank",rel:"noreferrer"},"地域和访问域名")]),t("td",{style:{"text-align":"left"}},"字符串"),t("td",{style:{"text-align":"left"}},"是")]),t("tr",null,[t("td",{style:{"text-align":"left"}},"-e"),t("td",{style:{"text-align":"left"}},[s("设置请求的 ENDPOINT，设置 ENDPOINT 参数后，REGION 参数会失效。当您使用的是默认域名，则此处配置格式为"),t("code",null,"cos.<region>.myqcloud.com"),s("；当您使用全球加速域名，则配置为"),t("code",null,"cos.accelerate.myqcloud.com")]),t("td",{style:{"text-align":"left"}},"字符串"),t("td",{style:{"text-align":"left"}},"否")]),t("tr",null,[t("td",{style:{"text-align":"left"}},"-m"),t("td",{style:{"text-align":"left"}},"多线程操作的最大线程数（默认为5，范围为1 - 30）"),t("td",{style:{"text-align":"left"}},"数字"),t("td",{style:{"text-align":"left"}},"否")]),t("tr",null,[t("td",{style:{"text-align":"left"}},"-p"),t("td",{style:{"text-align":"left"}},"分块操作的单块大小（单位MB，默认为1MB，范围为1 - 1000）"),t("td",{style:{"text-align":"left"}},"数字"),t("td",{style:{"text-align":"left"}},"否")]),t("tr",null,[t("td",{style:{"text-align":"left"}},"–do-not-use-ssl"),t("td",{style:{"text-align":"left"}},"使用 HTTP 协议，而不使用 HTTPS"),t("td",{style:{"text-align":"left"}},"字符串"),t("td",{style:{"text-align":"left"}},"否")]),t("tr",null,[t("td",{style:{"text-align":"left"}},"–anonymous"),t("td",{style:{"text-align":"left"}},"匿名操作（不携带签名）"),t("td",{style:{"text-align":"left"}},"字符串"),t("td",{style:{"text-align":"left"}},"否")])])],-1),t("h2",{id:"配置",tabindex:"-1"},[s("配置 "),t("a",{class:"header-anchor",href:"#配置","aria-label":'Permalink to "配置"'},"​")],-1),t("h3",{id:"获取存储桶信息",tabindex:"-1"},[s("获取存储桶信息 "),t("a",{class:"header-anchor",href:"#获取存储桶信息","aria-label":'Permalink to "获取存储桶信息"'},"​")],-1),t("h4",{id:"登录腾讯云-控制台-对象存储-存储桶获取相关信息",tabindex:"-1"},[s("登录腾讯云 - 控制台 - 对象存储 - 存储桶获取相关信息 "),t("a",{class:"header-anchor",href:"#登录腾讯云-控制台-对象存储-存储桶获取相关信息","aria-label":'Permalink to "登录腾讯云 - 控制台 - 对象存储 - 存储桶获取相关信息"'},"​")],-1),t("ul",null,[t("li",null,[s("BucketName-APPID : "),t("code",null,"test-1250000000"),s(" 为存储桶名称")]),t("li",null,[s("区域地址 : "),t("code",null,"https://cos.ap-shanghai.myqcloud.com"),s(" 存储桶所在的区域域名.")])],-1),t("h4",{id:"登录腾讯云-控制台-访问管理",tabindex:"-1"},[s("登录腾讯云 - 控制台 - 访问管理 "),t("a",{class:"header-anchor",href:"#登录腾讯云-控制台-访问管理","aria-label":'Permalink to "登录腾讯云 - 控制台 - 访问管理"'},"​")],-1),t("p",null,[s("创建子账号并赋予 COS 相关权限,生成"),t("code",null,"SecretId"),s("和"),t("code",null,"SecretKey"),s(".")],-1),t("ul",null,[t("li",null,"SecretId : XXXXXX"),t("li",null,"SecretKey : XXXXXX")],-1),t("h3",{id:"配置密钥",tabindex:"-1"},[s("配置密钥 "),t("a",{class:"header-anchor",href:"#配置密钥","aria-label":'Permalink to "配置密钥"'},"​")],-1),t("div",{class:"language-shell"},[t("button",{title:"Copy code",class:"copy"}),t("span",{class:"lang"},"shell"),t("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[t("code",{"v-pre":""},[t("span",{class:"line"},[t("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"coscmd"),t("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," config"),t("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -a"),t("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," Axxxxxxxxxxxxxx"),t("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -s"),t("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," xxxxxxxxxxxxxxxxx"),t("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -b"),t("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," test-1250000000"),t("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -r"),t("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," ap-shanghai")])])]),t("button",{class:"code-block-unfold-btn"})],-1),t("p",null,'命令执行成功后默认会在家目录下生成隐藏文件.cos.conf [tip type="info" title="多存储桶命令配置"] 您可以使用coscmd命令的-c参数，指定相应的文件进行一系列的相关操作。如果不指定，以Centos7.6系统为例，默认读取/root/.cos.conf文件中的对象存储配置进行操作 [/tip]',-1),t("h2",{id:"命令",tabindex:"-1"},[s("命令 "),t("a",{class:"header-anchor",href:"#命令","aria-label":'Permalink to "命令"'},"​")],-1),t("h3",{id:"参数",tabindex:"-1"},[s("参数 "),t("a",{class:"header-anchor",href:"#参数","aria-label":'Permalink to "参数"'},"​")],-1),t("div",{class:"language-shell"},[t("button",{title:"Copy code",class:"copy"}),t("span",{class:"lang"},"shell"),t("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[t("code",{"v-pre":""},[t("span",{class:"line"},[t("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"-f")]),s(`
`),t("span",{class:"line"},[t("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 强制跳过提示")]),s(`
`),t("span",{class:"line"},[t("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"-r")]),s(`
`),t("span",{class:"line"},[t("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 递归子目录")]),s(`
`),t("span",{class:"line"},[t("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"-s")]),s(`
`),t("span",{class:"line"},[t("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 比对 md5")]),s(`
`),t("span",{class:"line"},[t("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"--delete")]),s(`
`),t("span",{class:"line"},[t("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 对比并删除文件")]),s(`
`),t("span",{class:"line"},[t("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"--ignore")]),s(`
`),t("span",{class:"line"},[t("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 忽略文件或文件夹,支持 *.* 或文件夹路径.")])])]),t("button",{class:"code-block-unfold-btn"})],-1),t("h3",{id:"下载文件-文件夹",tabindex:"-1"},[s("下载文件 / 文件夹 "),t("a",{class:"header-anchor",href:"#下载文件-文件夹","aria-label":'Permalink to "下载文件 / 文件夹"'},"​")],-1),t("div",{class:"language-shell"},[t("button",{title:"Copy code",class:"copy"}),t("span",{class:"lang"},"shell"),t("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[t("code",{"v-pre":""},[t("span",{class:"line"},[t("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"coscmd"),t("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," download"),t("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -f"),t("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -s"),t("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /test/test.txt"),t("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /data/")]),s(`
`),t("span",{class:"line"},[t("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 下载文件")]),s(`
`),t("span",{class:"line"},[t("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"coscmd"),t("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," download"),t("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -rf"),t("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -s"),t("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --delete"),t("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /test"),t("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /data/")]),s(`
`),t("span",{class:"line"},[t("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 下载文件夹")]),s(`
`),t("span",{class:"line"},[t("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 结尾含 / 则下载桶中 /test 整个目录至本地 /data 目录之下,路径为 /data/test")]),s(`
`),t("span",{class:"line"},[t("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 结尾不含 / 则下载桶中 /test 目录内所有子目录和文件至本地 /data 目录之下")])])]),t("button",{class:"code-block-unfold-btn"})],-1),t("h3",{id:"上传文件-文件夹",tabindex:"-1"},[s("上传文件 / 文件夹 "),t("a",{class:"header-anchor",href:"#上传文件-文件夹","aria-label":'Permalink to "上传文件 / 文件夹"'},"​")],-1),t("div",{class:"language-shell"},[t("button",{title:"Copy code",class:"copy"}),t("span",{class:"lang"},"shell"),t("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[t("code",{"v-pre":""},[t("span",{class:"line"},[t("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"coscmd"),t("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," upload"),t("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -f"),t("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -s"),t("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /test/test.txt"),t("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /data/")]),s(`
`),t("span",{class:"line"},[t("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 上传文件")]),s(`
`),t("span",{class:"line"},[t("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"coscmd"),t("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," upload"),t("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -rf"),t("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -s"),t("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --delete"),t("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /test"),t("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /data/")]),s(`
`),t("span",{class:"line"},[t("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 上传文件夹")]),s(`
`),t("span",{class:"line"},[t("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 结尾含 / 则上传本地 /test 整个目录至桶中 /data 目录之下,路径为 /data/test")]),s(`
`),t("span",{class:"line"},[t("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 结尾不含 / 则上传本地 /test 目录内所有子目录和文件至桶中 /data 目录之下")])])]),t("button",{class:"code-block-unfold-btn"})],-1),t("hr",null,null,-1),t("h2",{id:"结语",tabindex:"-1"},[s("结语 "),t("a",{class:"header-anchor",href:"#结语","aria-label":'Permalink to "结语"'},"​")],-1),t("p",null,"推荐当服务器也是腾讯云时,可以创建与服务器同区域的对象存储,此时两者为内网传输速度,并且 COS 不计下行流量,搭配 crontab 做定时备份任务非常高效稳定.",-1),t("h2",{id:"参考",tabindex:"-1"},[s("参考 "),t("a",{class:"header-anchor",href:"#参考","aria-label":'Permalink to "参考"'},"​")],-1),t("p",null,[t("a",{href:"https://www.ioiox.com/archives/110.html",target:"_blank",rel:"noreferrer"},"https://www.ioiox.com/archives/110.html")],-1),t("p",null,[t("a",{href:"https://cloud.tencent.com/document/product/436/10976",target:"_blank",rel:"noreferrer"},"https://cloud.tencent.com/document/product/436/10976")],-1)])]),"main-header":l(()=>[a(i.$slots,"main-header")]),"main-header-after":l(()=>[a(i.$slots,"main-header-after")]),"main-nav":l(()=>[a(i.$slots,"main-nav")]),"main-content-before":l(()=>[a(i.$slots,"main-content-before")]),"main-content":l(()=>[a(i.$slots,"main-content")]),"main-content-after":l(()=>[a(i.$slots,"main-content-after")]),"main-nav-before":l(()=>[a(i.$slots,"main-nav-before")]),"main-nav-after":l(()=>[a(i.$slots,"main-nav-after")]),comment:l(()=>[a(i.$slots,"comment")]),footer:l(()=>[a(i.$slots,"footer")]),aside:l(()=>[a(i.$slots,"aside")]),"aside-custom":l(()=>[a(i.$slots,"aside-custom")]),default:l(()=>[a(i.$slots,"default")]),_:3},8,["frontmatter"])}}};export{T as default,x as usePageData};
