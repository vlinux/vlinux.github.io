import{_ as d}from"./ValaxyMain.vue_vue_type_style_index_0_lang.CWk9_bhA.js";import"./chunks/@vueuse/motion.BITvz5PP.js";import{e as g,u as c,a as y}from"./chunks/vue-router._WIYEsQP.js";import{aa as E,ap as a,ag as t,af as s,ai as i,P as u,ab as C,a1 as B}from"./framework.GHZxz7jq.js";import"./index.BOmfoNni.js";import"./chunks/dayjs.BldX5ftQ.js";import"./chunks/vue-i18n.C7V8WoQZ.js";import"./chunks/pinia.BfAlK2F6.js";import"./chunks/nprogress.BZwbcB2O.js";/* empty css                    */import"./YunComment.vue_vue_type_style_index_0_lang.Scn_mnTZ.js";import"./index.C5okkQwF.js";import"./YunPageHeader.vue_vue_type_script_setup_true_lang.fblE3Fel.js";import"./post.DOTZsJyO.js";const m=g("/posts/Registrator+Consul+Consul-template+HaProxy实现动态修改Haproty配置文件",async h=>JSON.parse('{"title":"Registrator+Consul+Consul-template+HaProxy实现动态修改Haproty配置文件","description":"","frontmatter":{"title":"Registrator+Consul+Consul-template+HaProxy实现动态修改Haproty配置文件","categories":"自动注册","tags":["Registrator+Consul+Consul-template+HaProxy"],"date":"2020-09-16 16:26:00"},"headers":[],"relativePath":"pages/posts/Registrator+Consul+Consul-template+HaProxy实现动态修改Haproty配置文件.md","lastUpdated":null}'),{lazy:(h,n)=>h.name===n.name}),j={__name:"Registrator+Consul+Consul-template+HaProxy实现动态修改Haproty配置文件",setup(h,{expose:n}){const{data:e}=m(),p=y(),o=c(),k=Object.assign(o.meta.frontmatter||{},e.value?.frontmatter||{});return p.currentRoute.value.data=e.value,B("valaxy:frontmatter",k),globalThis.$frontmatter=k,n({frontmatter:{title:"Registrator+Consul+Consul-template+HaProxy实现动态修改Haproty配置文件",categories:"自动注册",tags:["Registrator+Consul+Consul-template+HaProxy"],date:"2020-09-16 16:26:00"}}),(l,r)=>{const F=d;return C(),E(F,{frontmatter:u(k)},{"main-content-md":a(()=>[...r[0]||(r[0]=[s("h1",{id:"registrator-consul-consul-template-haproxy实现动态修改haproty配置文件",tabindex:"-1"},[i("Registrator+Consul+Consul-template+HaProxy实现动态修改Haproty配置文件 "),s("a",{class:"header-anchor",href:"#registrator-consul-consul-template-haproxy实现动态修改haproty配置文件","aria-label":'Permalink to "Registrator+Consul+Consul-template+HaProxy实现动态修改Haproty配置文件"'},"​")],-1),s("p",null,[s("strong",null,"实现需求：")],-1),s("p",null,"用Haproxy做负载均衡，手动方式在配置文件中添加或删除节点服务器信息，比较麻烦。",-1),s("p",null,"通过Registrator收集需要注册到Consul作为Haproxy节点服务器的信息，然后注册到Consul key/value。",-1),s("p",null,"Consul-template去Consul key/value中读取信息,然后自动修改Haproxy配置文件，并重载Haproxy。不需要修改haproxy.cfg。",-1),s("p",null,[s("strong",null,"集群环境：")],-1),s("figure",null,[s("img",{src:"https://cdn.jsdelivr.net/gh/kococ/TYPECHO_IMG/mu77/wKioL1ePH8TyP4vwAAA_diaQRtU606.png",alt:"wKioL1ePH8TyP4vwAAA_diaQRtU606",loading:"lazy",decoding:"async"})],-1),s("p",null,"Postil：Mesos集群搭建过程此处省略",-1),s("p",null,"关闭selinux和防火墙",-1),s("div",{class:"language-bash"},[s("button",{title:"Copy code",class:"copy"}),s("span",{class:"lang"},"bash"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"setenforce"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sed"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -i"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," 's/SELINUX=enforcing/SELINUX=disabled/'"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /etc/selinux/config")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"systemctl"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," stop"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," firewalld"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," && "),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"systemctl"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," disable"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," firewalld")])])]),s("button",{class:"code-block-unfold-btn"})],-1),s("p",null,"ZK-server",-1),s("div",{class:"language-bash"},[s("button",{title:"Copy code",class:"copy"}),s("span",{class:"lang"},"bash"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"容器来做consul：")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"获取Consul-server镜像")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"[root@zk-server "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"~"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"]# docker pull docker.io/gliderlabs/consul-server")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"启动Consul-server")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"[root@zk-server "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"~"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"]# docker run -d --name"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"consul"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," --net"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"host"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," docker.io/gliderlabs/consul-server"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -bootstrap"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -bind=192.168.200.8")])])]),s("button",{class:"code-block-unfold-btn"})],-1),s("p",null,"宿主机来做consul",-1),s("p",null,"下载consul包，并解压",-1),s("div",{class:"language-bash"},[s("button",{title:"Copy code",class:"copy"}),s("span",{class:"lang"},"bash"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"[root@zk-server "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"~"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"]# wget https://releases.hashicorp.com/consul/0.6.4/consul_0.6.4_linux_386.zip")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"[root@zk-server "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"~"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"]# unzip consul_0.6.4_linux_386.zip")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"[root@zk-server "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"~"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"]# mv consul /usr/bin/")])])]),s("button",{class:"code-block-unfold-btn"})],-1),s("p",null,"下载consul-template包，并解压",-1),s("div",{class:"language-bash"},[s("button",{title:"Copy code",class:"copy"}),s("span",{class:"lang"},"bash"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"[root@zk-server "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"~"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"]# wget https://releases.hashicorp.com/consul-template/0.15.0/consul-template_0.15.0_linux_386.zip")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"[root@zk-server "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"~"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"]# unzip consul-template_0.15.0_linux_386.zip")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"[root@zk-server "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"~"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"]# mv consul-template /usr/bin/")])])]),s("button",{class:"code-block-unfold-btn"})],-1),s("p",null,"安装HaProxy并启动",-1),s("div",{class:"language-bash"},[s("button",{title:"Copy code",class:"copy"}),s("span",{class:"lang"},"bash"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"[root@zk-server "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"~"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"]# yum -y install haproxy")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"[root@zk-server "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"~"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"]# systemctl start haproxy")])])]),s("button",{class:"code-block-unfold-btn"})],-1),s("p",null,"创建consul服务器配置目录",-1),s("div",{class:"language-bash"},[s("button",{title:"Copy code",class:"copy"}),s("span",{class:"lang"},"bash"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"[root@zk-server "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"~"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"]# mkdir /config")])])]),s("button",{class:"code-block-unfold-btn"})],-1),s("p",null,"编写agent和server的json文件",-1),s("div",{class:"language-bash"},[s("button",{title:"Copy code",class:"copy"}),s("span",{class:"lang"},"bash"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"[root@zk-server "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"~"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"]# vi /config/agent.json ")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"添加内容如下：")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},'        "client_addr"'),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},":"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "0.0.0.0",')]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},'        "data_dir"'),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},":"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "/data",')]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},'        "leave_on_terminate"'),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},":"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," true"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},",")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},'        "dns_config"'),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},":"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," {")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},'                "allow_stale"'),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},":"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," true"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},",")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},'                "max_stale"'),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},":"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "1s"')]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"[root@zk-server "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"~"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"]# vi /config/server.json")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"添加内容如下：")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},'        "ui"'),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},":"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," true"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},",")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},'        "dns_config"'),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},":"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," {")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},'                "allow_stale"'),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},":"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," false")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),s("button",{class:"code-block-unfold-btn"})],-1),s("p",null,"启动consul单节点服务器，当然，你consul服务器节点多的话也可以做consul集群。",-1),s("div",{class:"language-bash"},[s("button",{title:"Copy code",class:"copy"}),s("span",{class:"lang"},"bash"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"[root@zk-server "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"~"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"]# consul agent -server -config-dir"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"/config"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," -bootstrap"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -bind=192.168.200.8"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," &")])])]),s("button",{class:"code-block-unfold-btn"})],-1),s("p",null,"Postil：可用consul members 查看consul集群节点",-1),s("p",null,"Slave1-server",-1),s("p",null,"获取Registrator镜像",-1),s("div",{class:"language-bash"},[s("button",{title:"Copy code",class:"copy"}),s("span",{class:"lang"},"bash"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"[root@slave1 "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"~"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"]# docker pull gliderlabs/registrator:latest")])])]),s("button",{class:"code-block-unfold-btn"})],-1),s("p",null,"启动Registrator",-1),s("p",null,"Postil：这种启动方式是注册到Consul的key/value",-1),s("div",{class:"language-bash"},[s("button",{title:"Copy code",class:"copy"}),s("span",{class:"lang"},"bash"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"[root@slave1 "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"~"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"]# docker run -d --restart"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"always"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," --name"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"registrator"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," --net"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"host"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," --volume"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"/var/run/docker.sock:/tmp/docker.sock"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," docker.io/gliderlabs/registrator"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -ip"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 192.168.200.10"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," consulkv://192.168.200.8:8500/hello")])])]),s("button",{class:"code-block-unfold-btn"})],-1),s("p",null,"Postil：-ip后面跟registration 所属的主机 IP, 一定要设置此属性, 否则服务IP会显示为127.0.0.1",-1),s("p",null,"测试Registrator是否把本机容器注册到Consul key/value",-1),s("p",null,"启动个容器",-1),s("div",{class:"language-bash"},[s("button",{title:"Copy code",class:"copy"}),s("span",{class:"lang"},"bash"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"[root@slave1 "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"~"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"]# docker run -d -P --name"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"test"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," --net"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"bridge"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," p_w_picpath/nginx")])])]),s("button",{class:"code-block-unfold-btn"})],-1),s("p",null,"进入Consul UI界面查看",-1),s("p",null,[s("a",{href:"http://192.168.200.8:8500/ui/#/dc1/kv/",target:"_blank",rel:"noreferrer"},"http://192.168.200.8:8500/ui/#/dc1/kv/")],-1),s("figure",null,[s("img",{src:"https://cdn.jsdelivr.net/gh/kococ/TYPECHO_IMG/mu77/wKioL1eN2n-BKahmAAAlbgipA10864.png",alt:"wKioL1eN2n-BKahmAAAlbgipA10864",loading:"lazy",decoding:"async"})],-1),s("p",null,"ZK-server",-1),s("p",null,"创建consul配置目录",-1),s("div",{class:"language-bash"},[s("button",{title:"Copy code",class:"copy"}),s("span",{class:"lang"},"bash"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"[root@zk-server "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"~"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"]# mkdir -p /data/cfg/consul")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"[root@zk-server "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"~"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"]# vi /data/cfg/consul/tmpl.json")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"添加内容如下：")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"consul"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," ="),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "127.0.0.1:8500"')]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"template"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," {")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"  source"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," ="),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "/etc/haproxy/haproxy.ctmpl"')]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"  destination"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," ="),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "/etc/haproxy/haproxy.cfg"')]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"  command"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," ="),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "systemctl reload haproxy"')]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),s("button",{class:"code-block-unfold-btn"})],-1),s("p",null,"编写haproxy模版",-1),s("div",{class:"language-bash"},[s("button",{title:"Copy code",class:"copy"}),s("span",{class:"lang"},"bash"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"[root@zk-server "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"~"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"]# vi /etc/haproxy/haproxy.ctmpl")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"添加内容如下：")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"global")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"    log"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"         127.0.0.1"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," local2")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"    chroot"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"      /var/lib/haproxy")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"    pidfile"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"     /var/run/haproxy.pid")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"    maxconn"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"     4000")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"    user"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"        haproxy")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"    group"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"       haproxy")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"    daemon")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    # turn on stats unix socket")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"    stats"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," socket"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /var/lib/haproxy/stats")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"defaults")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"    mode"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"                    http")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"    log"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"                     global")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"    option"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"                  httplog")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"    option"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"                  dontlognull")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"    option"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," http-server-close")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"    option"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," forwardfor"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"       except"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," 127.0.0.0/8")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"    option"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"                  redispatch")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"    retries"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"                 3")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"    timeout"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," http-request"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"    10s")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"    timeout"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," queue"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"           1m")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"    timeout"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," connect"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"         10s")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"    timeout"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," client"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"          1m")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"    timeout"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," server"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"          1m")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"    timeout"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," http-keep-alive"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," 10s")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"    timeout"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," check"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"           10s")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"    maxconn"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"                 3000")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"frontend"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"  main"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," *"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},":80")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"    acl"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," url_static"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"       path_beg"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"       -i"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /static"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /p_w_picpaths"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /javascript"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /stylesheets")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"    acl"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," url_static"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"       path_end"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"       -i"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," .jpg"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," .gif"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," .png"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," .css"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," .js")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"    use_backend"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," static"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"          if"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," url_static")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"    default_backend"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"             app")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"backend"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," static")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"    balance"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"     roundrobin")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"    server"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"      static"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," 127.0.0.1:4331"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," check")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"backend"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," app")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"    balance"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"     roundrobin")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'     {{range $key, $pairs := tree "hello/" | byKey}}{{range $serverid, $pair := $pairs}}')]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"     server"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," app"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," ``"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"."),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"`"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Value"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"`"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," check"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," inter"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 2000"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," fall"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 3"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," weight"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," `end``end`")])])]),s("button",{class:"code-block-unfold-btn"})],-1),s("p",null,"启动consul-template",-1),s("div",{class:"language-bash"},[s("button",{title:"Copy code",class:"copy"}),s("span",{class:"lang"},"bash"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"[root@zk-server "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"~"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"]#consul-template -config /data/cfg/consul/tmpl.json "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},">"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," consul-template.out "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"2>&1"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," &")])])]),s("button",{class:"code-block-unfold-btn"})],-1),s("p",null,"用marathon启动一个nginx容器，看registrator是否注册到consul,然后看consul-template是否自动添加了这个后端服务器到/etc/haproxy/haproxy.cfg",-1),s("figure",null,[s("a",{href:"https://s5.51cto.com/wyfs02/M01/84/5A/wKiom1eN29Ch92f1AAAn-FZu8sk782.png",target:"_blank",rel:"noreferrer"},[s("img",{src:"https://cdn.jsdelivr.net/gh/kococ/TYPECHO_IMG/mu77/wKiom1eN29Ch92f1AAAn-FZu8sk782.png",alt:"wKiom1eN29Ch92f1AAAn-FZu8sk782.png",loading:"lazy",decoding:"async"})])],-1),s("figure",null,[s("a",{href:"https://s5.51cto.com/wyfs02/M01/84/59/wKioL1eN29DSwwZMAABEjcHBKnE132.png",target:"_blank",rel:"noreferrer"},[s("img",{src:"https://cdn.jsdelivr.net/gh/kococ/TYPECHO_IMG/mu77/wKioL1eN29DSwwZMAABEjcHBKnE132.png",alt:"wKioL1eN29DSwwZMAABEjcHBKnE132.png",loading:"lazy",decoding:"async"})])],-1),s("figure",null,[s("a",{href:"https://s2.51cto.com/wyfs02/M01/84/5A/wKiom1eN29HBhfyIAAFS6Sq96qE500.png",target:"_blank",rel:"noreferrer"},[s("img",{src:"https://cdn.jsdelivr.net/gh/kococ/TYPECHO_IMG/mu77/wKiom1eN29HBhfyIAAFS6Sq96qE500.png",alt:"wKiom1eN29HBhfyIAAFS6Sq96qE500.png",loading:"lazy",decoding:"async"})])],-1),s("p",null,"访问HaProxy_IP",-1),s("figure",null,[s("a",{href:"https://s4.51cto.com/wyfs02/M02/84/59/wKioL1eN2_DwH-usAABMZxBsa6s864.png",target:"_blank",rel:"noreferrer"},[s("img",{src:"https://cdn.jsdelivr.net/gh/kococ/TYPECHO_IMG/mu77/wKioL1eN2_DwH-usAABMZxBsa6s864.png",alt:"wKioL1eN2_DwH-usAABMZxBsa6s864.png",loading:"lazy",decoding:"async"})])],-1)])]),"main-header":a(()=>[t(l.$slots,"main-header")]),"main-header-after":a(()=>[t(l.$slots,"main-header-after")]),"main-nav":a(()=>[t(l.$slots,"main-nav")]),"main-content-before":a(()=>[t(l.$slots,"main-content-before")]),"main-content":a(()=>[t(l.$slots,"main-content")]),"main-content-after":a(()=>[t(l.$slots,"main-content-after")]),"main-nav-before":a(()=>[t(l.$slots,"main-nav-before")]),"main-nav-after":a(()=>[t(l.$slots,"main-nav-after")]),comment:a(()=>[t(l.$slots,"comment")]),footer:a(()=>[t(l.$slots,"footer")]),aside:a(()=>[t(l.$slots,"aside")]),"aside-custom":a(()=>[t(l.$slots,"aside-custom")]),default:a(()=>[t(l.$slots,"default")]),_:3},8,["frontmatter"])}}};export{j as default,m as usePageData};
