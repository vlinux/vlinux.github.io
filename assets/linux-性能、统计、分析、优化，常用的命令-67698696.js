import{_ as r}from"./ValaxyMain.vue_vue_type_style_index_0_lang-e99d3f99.js";import{_ as A,c as C,w as n,o as d,b as s,d as l,e,r as o,f as u,p as h}from"./app-24c8f26b.js";import"./YunFooter.vue_vue_type_script_setup_true_lang-d5aa7215.js";import"./YunCard.vue_vue_type_style_index_0_lang-07a61ffe.js";import"./YunPageHeader.vue_vue_type_script_setup_true_lang-7ae0f4ad.js";const vl=JSON.parse('{"title":"linux 性能、统计、分析、优化，常用的命令","description":"","frontmatter":{"title":"linux 性能、统计、分析、优化，常用的命令","categories":"Linux技术","tags":["基础命令"],"date":"2020-08-27T16:26:08.000Z"},"headers":[{"level":3,"title":"uptime","slug":"uptime","link":"#uptime","children":[]},{"level":3,"title":"ps","slug":"ps","link":"#ps","children":[]},{"level":3,"title":"pstree","slug":"pstree","link":"#pstree","children":[]},{"level":3,"title":"free","slug":"free","link":"#free","children":[]},{"level":3,"title":"mpstat","slug":"mpstat","link":"#mpstat","children":[]},{"level":3,"title":"vmstat","slug":"vmstat","link":"#vmstat","children":[]},{"level":3,"title":"ss","slug":"ss","link":"#ss","children":[]},{"level":3,"title":"sar","slug":"sar","link":"#sar","children":[]},{"level":3,"title":"numastat","slug":"numastat","link":"#numastat","children":[]},{"level":3,"title":"pmap","slug":"pmap","link":"#pmap","children":[]},{"level":3,"title":"tcpdump 和 wireshark","slug":"tcpdump-和-wireshark","link":"#tcpdump-和-wireshark","children":[]},{"level":3,"title":"tcpdump","slug":"tcpdump","link":"#tcpdump","children":[]},{"level":3,"title":"wireshark","slug":"wireshark","link":"#wireshark","children":[]},{"level":3,"title":"strace","slug":"strace","link":"#strace","children":[]},{"level":3,"title":"ltrace","slug":"ltrace","link":"#ltrace","children":[]},{"level":3,"title":"gnuplot","slug":"gnuplot","link":"#gnuplot","children":[]}],"relativePath":"pages/posts/linux-性能、统计、分析、优化，常用的命令.md","path":"/Users/vlinux/vlinux/blog/valaxy/vlinux.github.io/pages/posts/linux-性能、统计、分析、优化，常用的命令.md","lastUpdated":1671090556000}'),c=JSON.parse('{"title":"linux 性能、统计、分析、优化，常用的命令","description":"","frontmatter":{"title":"linux 性能、统计、分析、优化，常用的命令","categories":"Linux技术","tags":["基础命令"],"date":"2020-08-27T16:26:08.000Z"},"headers":[{"level":3,"title":"uptime","slug":"uptime","link":"#uptime","children":[]},{"level":3,"title":"ps","slug":"ps","link":"#ps","children":[]},{"level":3,"title":"pstree","slug":"pstree","link":"#pstree","children":[]},{"level":3,"title":"free","slug":"free","link":"#free","children":[]},{"level":3,"title":"mpstat","slug":"mpstat","link":"#mpstat","children":[]},{"level":3,"title":"vmstat","slug":"vmstat","link":"#vmstat","children":[]},{"level":3,"title":"ss","slug":"ss","link":"#ss","children":[]},{"level":3,"title":"sar","slug":"sar","link":"#sar","children":[]},{"level":3,"title":"numastat","slug":"numastat","link":"#numastat","children":[]},{"level":3,"title":"pmap","slug":"pmap","link":"#pmap","children":[]},{"level":3,"title":"tcpdump 和 wireshark","slug":"tcpdump-和-wireshark","link":"#tcpdump-和-wireshark","children":[]},{"level":3,"title":"tcpdump","slug":"tcpdump","link":"#tcpdump","children":[]},{"level":3,"title":"wireshark","slug":"wireshark","link":"#wireshark","children":[]},{"level":3,"title":"strace","slug":"strace","link":"#strace","children":[]},{"level":3,"title":"ltrace","slug":"ltrace","link":"#ltrace","children":[]},{"level":3,"title":"gnuplot","slug":"gnuplot","link":"#gnuplot","children":[]}],"relativePath":"pages/posts/linux-性能、统计、分析、优化，常用的命令.md","path":"/Users/vlinux/vlinux/blog/valaxy/vlinux.github.io/pages/posts/linux-性能、统计、分析、优化，常用的命令.md","lastUpdated":1671090556000}'),y={name:"pages/posts/linux-性能、统计、分析、优化，常用的命令.md",data(){return{data:c,frontmatter:c.frontmatter}},setup(){h("pageData",c)}},m={id:"uptime",tabindex:"-1"},_=s("p",null,"显示当前时间、系统已经运行多长时间，当前有多少用户登录，过去一段时间平均负载",-1),D=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@Email ~]# uptime ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}}," 14:03:56 up 48 days, 15:25,  1 user,  load average: 0.16, 0.42, 0.25")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),g={id:"ps",tabindex:"-1"},f=s("p",null,"仅显示nginx进程可以输入 ps -C nginx",-1),x=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@Email ~]# ps -C nginx")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  PID TTY          TIME CMD")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"23549 ?        00:00:00 nginx")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"23550 ?        00:00:00 nginx")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),v=s("blockquote",null,[s("p",null,"仅显示nginx进程ID，可以输入 ps -C nginx -o pid（必须小写）=")],-1),k=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@Email ~]# ps -C nginx -o pid=")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"23549")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"23550")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),b=s("blockquote",null,[s("p",null,"查看线程信息， ps -L PID")],-1),E=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@Email ~]# ps -C nginx -o pid=")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"23549")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"23550")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),P={id:"pstree",tabindex:"-1"},w=s("p",null,"以树形结构显示运行的进程，部署软件时可以看到具体运行的哪一步，哪一个命令",-1),N=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@Email ~]# pstree -p")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"systemd(1)─┬─AliYunDun(9334)─┬─{AliYunDun}(9335)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"           │                 ├─{AliYunDun}(9336)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"           │                 ├─{AliYunDun}(9352)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"           │                 ├─{AliYunDun}(9353)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"           ├─AliYunDunUpdate(8252)─┬─{AliYunDunUpdate}(8253)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"           │                       ├─{AliYunDunUpdate}(8254)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"           │                       └─{AliYunDunUpdate}(8256)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),L={id:"free",tabindex:"-1"},U=s("p",null,"显示内存区域中使用了多少内存 free -ml",-1),M=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@Email ~]# free -ml")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"              total        used        free      shared  buff/cache   available")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Mem:           1839         416         353          96        1069        1124")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Low:           1839        1485         353")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"High:             0           0           0")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Swap:             0           0           0")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),T=s("blockquote",null,[s("p",null,"查看 /proc/buddyinfo 还可以确定每个区域内有多少内存块可用，每一列的数量意味着可用的分页数量")],-1),F=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@Email ~]# cat /proc/buddyinfo ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Node 0, zone      DMA     27     15     15     10      5      2      3      3      0      2      0 ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Node 0, zone    DMA32     25    636   1349   1147    896    587    338    141      0      0      0 ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),I={id:"mpstat",tabindex:"-1"},S=s("p",null,"显示在多处理器服务器上每个可用CPU的相关统计信息，从CPU0开始。还会报告所有CPU的全局平均活动，mpstat工具是sysstat软件包的一部分",-1),O=s("p",null,"每隔1s采集一次数据，共采集4次： mpstat 1（interval） 4（count）",-1),R=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@Email ~]# mpstat 1 4")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Linux 3.10.0-514.26.2.el7.x86_64 (Email)     04/15/2020  _x86_64_    (1 CPU)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"02:26:25 PM  CPU    %usr   %nice    %sys %iowait    %irq   %soft  %steal  %guest  %gnice   %idle")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"02:26:26 PM  all    0.99    0.00    0.99    0.00    0.00    0.00    0.00    0.00    0.00   98.02")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"02:26:27 PM  all    1.01    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00   98.99")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"02:26:28 PM  all    1.00    0.00    1.00    0.00    0.00    0.00    0.00    0.00    0.00   98.00")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"02:26:29 PM  all    0.00    0.00    1.00    0.00    0.00    0.00    0.00    0.00    0.00   99.00")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Average:     all    0.75    0.00    0.75    0.00    0.00    0.00    0.00    0.00    0.00   98.50")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),z=s("blockquote",null,[s("p",null,"对于多处理器可以加 -P 选择CPU，如选择CPU0，mpstat -P 0 1 4")],-1),G=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@Email ~]# mpstat -P 0 1 4")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Linux 3.10.0-514.26.2.el7.x86_64 (Email)     04/15/2020  _x86_64_    (1 CPU)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"02:29:08 PM  CPU    %usr   %nice    %sys %iowait    %irq   %soft  %steal  %guest  %gnice   %idle")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"02:29:09 PM    0    0.00    0.00    1.01    0.00    0.00    0.00    0.00    0.00    0.00   98.99")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"02:29:10 PM    0    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00  100.00")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"02:29:11 PM    0    1.01    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00   98.99")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"02:29:12 PM    0    0.99    0.00    0.99    0.00    0.00    0.00    0.00    0.00    0.00   98.02")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Average:       0    0.50    0.00    0.50    0.00    0.00    0.00    0.00    0.00    0.00   98.99")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),q={id:"vmstat",tabindex:"-1"},$=s("p",null,"用来报告关于进程，内存，分页，块IO，中断，CPU活动信息 vmstat 1(每隔1s输出)",-1),Y=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@Email ~]# vmstat 1")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"procs -----------memory---------- ---swap-- -----io---- -system-- ------cpu-----")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}}," r  b   swpd   free   buff  cache   si   so    bi    bo   in   cs us sy id wa st")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}}," 2  0      0 360320 109288 990168    0    0  4535    58    7    6  3  1 93  3  0")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}}," 0  0      0 360180 109288 990200    0    0     0     0  375 1065  1  0 99  0  0")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}}," 0  0      0 360180 109288 990200    0    0     0     0  326  994  1  1 98  0  0")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}}," 0  0      0 360180 109288 990200    0    0     0     0  334 1014  1  0 99  0  0")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}}," 0  0      0 360180 109288 990200    0    0     0     0  338 1018  0  1 99  0  0")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}}," 0  0      0 360180 109288 990200    0    0     0     0  330 1002  1  0 99  0  0")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}}," 0  0      0 360180 109296 990196    0    0     0    20  374 1072  1  1 97  1  0")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}}," 0  0      0 360180 109296 990204    0    0     0     0  343 1017  0  0 100  0  0")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}}," 0  0      0 360180 109296 990204    0    0     0     0  346 1030  1  1 98  0  0")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"...........")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),V=s("p",null,"第一行产生的报告是自上次重启之后的平均值",-1),Z=s("blockquote",null,[s("p",null,"以磁盘模式输出 vmstat -d 1 1")],-1),Q=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@Email ~]# vmstat -d 1 1")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"disk- ------------reads------------ ------------writes----------- -----IO------")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"       total merged sectors      ms  total merged sectors      ms    cur    sec")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"vda   245180755 290549 37927585746 2125938376 5820122 5747763 482611704 66760652      0 133137")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),H=s("blockquote",null,[s("p",null,"以分区模式输出 vmstat -p /dev/sda1 1 10")],-1),X=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@Email ~]# vmstat -p /dev/vda1 1 4")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"vda1          reads   read sectors  writes    requested writes")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"           245180653 37927582522    5738051  482612272")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"           245180653 37927582522    5738051  482612272")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"           245180653 37927582522    5738051  482612272")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"           245180653 37927582522    5738051  482612272")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),W={id:"ss",tabindex:"-1"},K=s("p",null,"显示所有 TCP socket ：ss -t -a",-1),B=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@Email ~]# ss -t -a")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"State       Recv-Q Send-Q                   Local Address:Port                                    Peer Address:Port                ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"LISTEN      0      50                                   *:mysql                                              *:*                    ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"LISTEN      0      511                                  *:http                                               *:*                    ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"LISTEN      0      128                                  *:ssh                                                *:*                    ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"LISTEN      0      1024                         127.0.0.1:socks                                              *:*                    ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"LISTEN      0      1                            127.0.0.1:mxi                                                *:*  ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),j=s("blockquote",null,[s("p",null,"显示所有 UDP socket ： ss -u -a")],-1),J=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"State       Recv-Q Send-Q                   Local Address:Port                                    Peer Address:Port                ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"UNCONN      0      0                            127.0.0.1:socks                                              *:*                    ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"UNCONN      0      0                                    *:bootpc                                             *:*                    ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"UNCONN      0      0                         172.24.54.44:ntp                                                *:*                    ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"UNCONN      0      0                            127.0.0.1:ntp                                                *:*                    ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"UNCONN      0      0                                    *:ntp                                                *:*      ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),ss=s("blockquote",null,[s("p",null,"显示已经建立的ssh连接")],-1),ls=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@Email ~]# ss -o state established sport = :22")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Netid Recv-Q Send-Q                      Local Address:Port                                       Peer Address:Port                ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"tcp   0      248                          172.24.54.44:ssh                                       88.91.42.228:5552                  timer:on,197ms,0")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),ns={id:"sar",tabindex:"-1"},as=s("p",null,"用来收集、报告、保存系统活动信息，sysstat包的一部分 一般来说，系统已经默认为我们准备好了自动化作业 /etc/cron.d/sysstat",-1),es=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@Email ~]# cat /etc/cron.d/sysstat ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# Run system activity accounting tool every 10 minutes")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"*/10 * * * * root /usr/lib64/sa/sa1 1 1")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# 0 * * * * root /usr/lib64/sa/sa1 600 6 &")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# Generate a daily summary of process accounting at 23:53")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"53 23 * * * root /usr/lib64/sa/sa2 -A")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),ts=s("blockquote",null,[s("p",null,"提取15号的磁盘信息")],-1),os=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"root@Email ~]# sar -f /var/log/sa/sa15 （saX X为统计时的日期） -d")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),cs=s("p",null,"sar命令作用很多，可以参考其他博客",-1),is={id:"numastat",tabindex:"-1"},ps=s("p",null,"为进程和操作系统显示每个NUMA节点的内存统计信息",-1),rs=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@Email ~]# numastat ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"                           node0")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"numa_hit              8549224367")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"numa_miss                      0")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"numa_foreign                   0")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"interleave_hit             14087")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"local_node            8549224367")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"other_node                     0")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),As={id:"pmap",tabindex:"-1"},Cs=s("p",null,"用来报告一个进程或多个进程的内存映射，可以使用这个工具确定系统是如何为服务器上的进程分配内存的",-1),ds=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@Email ~]# ps -C nginx")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  PID TTY          TIME CMD")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"23549 ?        00:00:00 nginx")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"23550 ?        00:00:00 nginx")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@Email ~] # pmap -d 23549 23549:   nginx: master process /usr/sbin/nginx Address           Kbytes Mode  Offset           Device    Mapping 00007f7989c1f000      20 r-x-- 0000000000000000 0fd:00001 nginx.so 00007f7989c24000    2048 ----- 0000000000005000 0fd:00001 nginx.so 00007f7989e26000     152 r-x-- 0000000000000000 0fd:00001 ngx_stream_module.so 00007f7989e4c000    2044 ----- 0000000000026000 0fd:00001 ngx_stream_module.so 00007f798a04b000       4 r---- 0000000000025000 0fd:00001 ngx_stream_module.so ...... 00007ffde65e7000       8 r-x-- 0000000000000000 000:00000   [ anon ] ffffffffff600000       4 r-x-- 0000000000000000 000:00000   [ anon ] mapped: 120900K    writeable/private: 2448K    shared: 4K ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),us={id:"tcpdump-和-wireshark",tabindex:"-1"},hs=s("p",null,"用来捕捉和分析流量的两个工具，在linux下使用libpcap库可以捕获数据包",-1),ys={id:"tcpdump",tabindex:"-1"},ms=s("p",null,"捕获http数据",-1),_s=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@Email ~]# tcpdump -i eth0 -nn port 80")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"tcpdump: verbose output suppressed, use -v or -vv for full protocol decode")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"listening on eth0, link-type EN10MB (Ethernet), capture size 65535 bytes")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"15:13:17.463903 IP 132.24.54.44.34584 > 100.100.30.26.80: Flags [P.], seq 1188473272:1188474570, ack 2089985175, win 2494, length 1298")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"15:13:17.488506 IP 110.100.30.26.80 > 172.24.54.44.34584: Flags [.], ack 1298, win 24567, length 0")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"15:13:18.389400 IP 132.24.54.44.34584 > 100.100.30.26.80: Flags [P.], seq 1298:1948, ack 1, win 2494, length 650")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"15:13:18.413997 IP 120.100.30.26.80 > 172.234.54.44.34584: Flags [.], ack 1948, win 24571, length 0")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},".....")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"62 packets captured")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"62 packets received by filter")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"0 packets dropped by kernel")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Ds=s("p",null,"如果没有 -c 选项 tcpdump 将持续捕捉数据包，直到SIGINT或SIGTERM（kill）信号来中断他",-1),gs=s("blockquote",null,[s("p",null,"显示在eth0接口所捕获到的相关 192.168.1.100的icmp数据包")],-1),fs=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@Email ~]# tcpdump -i eth0 -nn -icmp and host 192.168.1.100")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),xs={id:"wireshark",tabindex:"-1"},vs=s("p",null,"图形化工具",-1),ks={id:"strace",tabindex:"-1"},bs=s("p",null,"用来追踪系统调用和信号，可以很方便的诊断和解决出现的问题 跟踪 cat 命令",-1),Es=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@Email ~]# strace cat /tmp/file ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'execve("/usr/bin/cat", ["cat", "/tmp/file"], [/* 23 vars */]) = 0')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"brk(0)                                  = 0x190f000")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"mmap(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7fbd2732f000")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'access("/etc/ld.so.preload", R_OK)      = -1 ENOENT (No such file or directory)')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'open("/etc/ld.so.cache", O_RDONLY|O_CLOEXEC) = 3')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"fstat(3, {st_mode=S_IFREG|0644, st_size=50649, ...}) = 0")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"mmap(NULL, 50649, PROT_READ, MAP_PRIVATE, 3, 0) = ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"............")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"fstat(3, {st_mode=S_IFREG|0644, st_size=106075056, ...}) = 0")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"mmap(NULL, 106075056, PROT_READ, MAP_PRIVATE, 3, 0) = 0x7fbd20817000")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"close(3)                                = 0")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"fstat(1, {st_mode=S_IFCHR|0620, st_rdev=makedev(136, 0), ...}) = 0")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'open("/tmp/file", O_RDONLY)             = 3')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"fstat(3, {st_mode=S_IFREG|0644, st_size=2, ...}) = 0")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"fadvise64(3, 0, 0, POSIX_FADV_SEQUENTIAL) = 0")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'read(3, "1\\n", 65536)                   = 2')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'write(1, "1\\n", 21')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},")                      = 2")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'read(3, "", 65536)                      = 0')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"close(3)                                = 0")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"close(1)                                = 0")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"close(2)                                = 0")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"exit_group(0)                           = ?")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"+++ exited with 0 +++")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Ps=s("blockquote",null,[s("p",null,"还有另一个有趣的用途，可以报告执行一个命令每个系统调用在内核中所消耗时间，使用 -c 选项")],-1),ws=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@Email ~]# strace -c cat /tmp/file ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"1")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"% time     seconds  usecs/call     calls    errors syscall")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"------ ----------- ----------- --------- --------- ----------------")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}}," 27.78    0.000015           4         4           open")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}}," 16.67    0.000009           1         8           mmap")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}}," 12.96    0.000007           2         4           mprotect")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  9.26    0.000005           5         1           write")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  7.41    0.000004           1         3           read")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  5.56    0.000003           1         5           fstat")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  5.56    0.000003           3         1           munmap")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  5.56    0.000003           3         1           execve")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  3.70    0.000002           2         1         1 access")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  1.85    0.000001           0         6           close")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  1.85    0.000001           0         4           brk")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  1.85    0.000001           1         1           fadvise64")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  0.00    0.000000           0         1           arch_prctl")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"------ ----------- ----------- --------- --------- ----------------")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"100.00    0.000054                    40         1 total")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Ns={id:"ltrace",tabindex:"-1"},Ls=s("p",null,"一个库的调用跟踪程序，strace的输出十分相似，只不过跟踪的是库调用",-1),Us=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@Email ~]# ltrace cat /tmp/file ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"__libc_start_main(0x401a20, 2, 0x7ffcd8746458, 0x408ca0 <unfinished ...>")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"getpagesize()                                                                     = 4096")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},`strrchr("cat", '/')                                                               = nil`)]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'setlocale(LC_ALL, "")                                                             = "en_US.UTF-8"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'bindtextdomain("coreutils", "/usr/share/locale")                                  = "/usr/share/locale"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'textdomain("coreutils")                                                           = "coreutils"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"__cxa_atexit(0x4029f0, 0, 0, 0x736c6974756572)             ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},".......                      ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"malloc(69631)                                                                     = 0x2553030")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"fflush(0x7f8cf18771c0)                                                            = 0")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"fclose(0x7f8cf18771c0)                                                            = 0")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"+++ exited (status 0) +++")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Ms=s("p",null,"跟踪cat命令",-1),Ts={id:"gnuplot",tabindex:"-1"},Fs=s("p",null,"命令行绘图工具 我们可以通过两种方法操作gnuplot 一种是交互式",-1),Is=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@Email ~]# gnuplot")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    G N U P L O T")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    Version 4.6 patchlevel 2    last modified 2013-03-14 ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    Build System: Linux x86_64")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    Copyright (C) 1986-1993, 1998, 2004, 2007-2013")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    Thomas Williams, Colin Kelley and many others")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    gnuplot home:     http://www.gnuplot.info")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'    faq, bugs, etc:   type "help FAQ"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},`    immediate help:   type "help"  (plot window: hit 'h')`)]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Terminal type set to 'x11'")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"gnuplot> ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Ss=s("p",null,"第二种是将gnuplot的指令写入到一个文件中，使用gnuplot执行这个文件，这样方便调试和修改。",-1),Os={id:"示例一",tabindex:"-1"},Rs=s("strong",null,"示例一",-1),zs=s("p",null,[s("strong",null,"线性趋势图"),l(" 使用sar命令分析统计数据")],-1),Gs=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"LANG=C sar -f /var/log/sa/sa15 > /tmp/cpu.txt")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),qs=s("p",null,"LANG=C 使sar输出的时间为24小时制 删除 cpu.txt 中空行和数据无关的字符，只保留分析数据",-1),$s=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@Email ~]# cat !$")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"cat /tmp/cpu.txt")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"14:50:02        all      0.83      0.00      0.64      0.01      0.00     98.52")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"15:10:01        all      3.77      0.00      1.00      0.19      0.00     95.04")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"15:20:01        all      0.72      0.00      0.58      0.01      0.00     98.69")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"15:30:01        all      0.62      0.00      0.49      0.01      0.00     98.88")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"15:40:01        all      1.22      0.00      0.64      0.08      0.00     98.06")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Ys=s("p",null,"在此文件中，第一列的时间选作X轴，y轴选择第三列（%user）、第五列（%system）、第六列（%iowait）",-1),Vs=s("blockquote",null,[s("p",null,"编写gnuplot指令文件 cpu.gnuplot 内容如下：")],-1),Zs=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@Email ~]# vim /tmp/cpu.gnuplot ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"set xdata time #设置x轴数据为时间")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'set timefmt "%H:%M:%S" #设置时间格式')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"set xlabel 'TIME' #设置x轴标签为TIME")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"set ylabel 'CPU' #设置y轴便签为CPU")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"set term png size 1300,800 #设置图片大小")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'set output "/tmp/cpu.png" #设置平面图保存位置')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"plot \\")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"'/tmp/cpu.txt' using 1:3 title '%US' with lines, \\")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"'/tmp/cpu.txt' using 1:5 title '%SY' with lines, \\")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"'/tmp/cpu.txt' using 1:6 title '%WA' with lines #绘制图片")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Qs=s("p",null,"执行",-1),Hs=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@Email ~]# gnuplot /tmp/cpu.gnuplot ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Xs=s("p",null,"使用xshell的可以用sz导出图片",-1),Ws=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@Email ~]# sz /tmp/cpu.png ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Ks=s("p",null,"得到下图",-1),Bs=s("p",null,[s("img",{src:"https://img-blog.csdnimg.cn/2020041516400134.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyMTg0Njk5,size_16,color_FFFFFF,t_70",alt:"在这里插入图片描述"})],-1),js={id:"示例二",tabindex:"-1"},Js=s("strong",null,"示例二",-1),sl=s("p",null,[s("strong",null,"柱状趋势图"),l(" 编写gnuplot指令文件 cpu.gnuplot 内容如下：")],-1),ll=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"vim /tmp/cpu.gnuplot ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"set term png size 1300,800")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'set output "/tmp/cpu.png"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"set grid")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"set style data histograms")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"set style fill solid 1.00 border -1")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"plot \\")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"'/tmp/cpu.txt' using 3:xtic(1) title '%US'")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"set grid")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),nl=s("p",null,"执行",-1),al=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@Email ~]# gnuplot /tmp/cpu.gnuplot ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),el=s("p",null,"使用xshell的可以用sz导出图片",-1),tl=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@Email ~]# sz /tmp/cpu.png ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),ol=s("p",null,"得到下图：",-1),cl=s("p",null,[s("img",{src:"https://img-blog.csdnimg.cn/20200415163945660.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyMTg0Njk5,size_16,color_FFFFFF,t_70",alt:"在这里插入图片描述"})],-1),il=s("blockquote",null,[s("p",null,[s("strong",null,"多柱状趋势图"),l(" 编写gnuplot指令文件 cpu.gnuplot 内容如下：")])],-1),pl=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"set term png size 1300,800")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'set output "/tmp/cpu.png"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"set grid")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"set style data histograms")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"set style fill solid 1.00 border -1")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"plot \\")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"'/tmp/cpu.txt' using 3:xtic(1) title '%US', \\")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"'/tmp/cpu.txt' using 5:xtic(1) title '%SY', \\")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"'/tmp/cpu.txt' using 6:xtic(1) title '%WA' \\")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),rl=s("p",null,"得到以下图形：",-1),Al=s("p",null,[s("img",{src:"https://img-blog.csdnimg.cn/20200415163922120.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyMTg0Njk5,size_16,color_FFFFFF,t_70",alt:"在这里插入图片描述"})],-1),Cl=s("p",null,"END",-1);function dl(t,ul,hl,yl,i,ml){const a=u,p=r;return d(),C(p,{frontmatter:i.frontmatter,data:i.data},{"main-content-md":n(()=>[s("h3",m,[l("uptime "),e(a,{class:"header-anchor",href:"#uptime","aria-hidden":"true"},{default:n(()=>[l("#")]),_:1})]),_,D,s("h3",g,[l("ps "),e(a,{class:"header-anchor",href:"#ps","aria-hidden":"true"},{default:n(()=>[l("#")]),_:1})]),f,x,v,k,b,E,s("h3",P,[l("pstree "),e(a,{class:"header-anchor",href:"#pstree","aria-hidden":"true"},{default:n(()=>[l("#")]),_:1})]),w,N,s("h3",L,[l("free "),e(a,{class:"header-anchor",href:"#free","aria-hidden":"true"},{default:n(()=>[l("#")]),_:1})]),U,M,T,F,s("h3",I,[l("mpstat "),e(a,{class:"header-anchor",href:"#mpstat","aria-hidden":"true"},{default:n(()=>[l("#")]),_:1})]),S,O,R,z,G,s("h3",q,[l("vmstat "),e(a,{class:"header-anchor",href:"#vmstat","aria-hidden":"true"},{default:n(()=>[l("#")]),_:1})]),$,Y,V,Z,Q,H,X,s("h3",W,[l("ss "),e(a,{class:"header-anchor",href:"#ss","aria-hidden":"true"},{default:n(()=>[l("#")]),_:1})]),K,B,j,J,ss,ls,s("h3",ns,[l("sar "),e(a,{class:"header-anchor",href:"#sar","aria-hidden":"true"},{default:n(()=>[l("#")]),_:1})]),as,es,ts,os,cs,s("h3",is,[l("numastat "),e(a,{class:"header-anchor",href:"#numastat","aria-hidden":"true"},{default:n(()=>[l("#")]),_:1})]),ps,rs,s("h3",As,[l("pmap "),e(a,{class:"header-anchor",href:"#pmap","aria-hidden":"true"},{default:n(()=>[l("#")]),_:1})]),Cs,ds,s("h3",us,[l("tcpdump 和 wireshark "),e(a,{class:"header-anchor",href:"#tcpdump-和-wireshark","aria-hidden":"true"},{default:n(()=>[l("#")]),_:1})]),hs,s("h3",ys,[l("tcpdump "),e(a,{class:"header-anchor",href:"#tcpdump","aria-hidden":"true"},{default:n(()=>[l("#")]),_:1})]),ms,_s,Ds,gs,fs,s("h3",xs,[l("wireshark "),e(a,{class:"header-anchor",href:"#wireshark","aria-hidden":"true"},{default:n(()=>[l("#")]),_:1})]),vs,s("h3",ks,[l("strace "),e(a,{class:"header-anchor",href:"#strace","aria-hidden":"true"},{default:n(()=>[l("#")]),_:1})]),bs,Es,Ps,ws,s("h3",Ns,[l("ltrace "),e(a,{class:"header-anchor",href:"#ltrace","aria-hidden":"true"},{default:n(()=>[l("#")]),_:1})]),Ls,Us,Ms,s("h3",Ts,[l("gnuplot "),e(a,{class:"header-anchor",href:"#gnuplot","aria-hidden":"true"},{default:n(()=>[l("#")]),_:1})]),Fs,Is,Ss,s("h4",Os,[Rs,l(),e(a,{class:"header-anchor",href:"#示例一","aria-hidden":"true"},{default:n(()=>[l("#")]),_:1})]),zs,Gs,qs,$s,Ys,Vs,Zs,Qs,Hs,Xs,Ws,Ks,Bs,s("h4",js,[Js,l(),e(a,{class:"header-anchor",href:"#示例二","aria-hidden":"true"},{default:n(()=>[l("#")]),_:1})]),sl,ll,nl,al,el,tl,ol,cl,il,pl,rl,Al,Cl]),"main-header":n(()=>[o(t.$slots,"main-header")]),"main-header-after":n(()=>[o(t.$slots,"main-header-after")]),"main-nav":n(()=>[o(t.$slots,"main-nav")]),"main-content":n(()=>[o(t.$slots,"main-content")]),"main-content-after":n(()=>[o(t.$slots,"main-content-after")]),"main-nav-before":n(()=>[o(t.$slots,"main-nav-before")]),"main-nav-after":n(()=>[o(t.$slots,"main-nav-after")]),comment:n(()=>[o(t.$slots,"comment")]),footer:n(()=>[o(t.$slots,"footer")]),aside:n(()=>[o(t.$slots,"aside")]),"aside-custom":n(()=>[o(t.$slots,"aside-custom")]),default:n(()=>[o(t.$slots,"default")]),_:3},8,["frontmatter","data"])}const kl=A(y,[["render",dl]]);export{vl as __pageData,kl as default};
