import{_ as p}from"./ValaxyMain.vue_vue_type_style_index_0_lang-0662cb8e.js";import{_ as y,c as C,w as a,o as D,b as s,d as l,e as n,r as t,f as d,p as f}from"./app-79ddcd9b.js";import"./YunFooter.vue_vue_type_script_setup_true_lang-ffbb3f5a.js";import"./YunCard.vue_vue_type_style_index_0_lang-9812589a.js";import"./YunPageHeader.vue_vue_type_script_setup_true_lang-7ab74174.js";const Vs=JSON.parse('{"title":"Telegraf+InfluxDB+Grafana+Docker搭建服务器监控平台","description":"","frontmatter":{"title":"Telegraf+InfluxDB+Grafana+Docker搭建服务器监控平台","categories":"Grafana","tags":["Telegraf+InfluxDB+Grafana+Docker"],"date":"2021-01-13T14:02:00.000Z"},"headers":[{"level":2,"title":"写在前面","slug":"写在前面","link":"#写在前面","children":[]},{"level":2,"title":"设计部署","slug":"设计部署","link":"#设计部署","children":[{"level":3,"title":"1 部署InfluxDB","slug":"_1-部署influxdb","link":"#_1-部署influxdb","children":[]},{"level":3,"title":"2 安装Telegraf","slug":"_2-安装telegraf","link":"#_2-安装telegraf","children":[]},{"level":3,"title":"部署Grafana","slug":"部署grafana","link":"#部署grafana","children":[]},{"level":3,"title":"Grafana绘图示例","slug":"grafana绘图示例","link":"#grafana绘图示例","children":[]},{"level":3,"title":"引用Grafana官网模板","slug":"引用grafana官网模板","link":"#引用grafana官网模板","children":[]}]}],"relativePath":"pages/posts/Telegraf+InfluxDB+Grafana+Docker搭建服务器监控平台.md","path":"/Users/vlinux/vlinux/blog/valaxy/vlinux.github.io/pages/posts/Telegraf+InfluxDB+Grafana+Docker搭建服务器监控平台.md","lastUpdated":1675833042000}'),c=JSON.parse('{"title":"Telegraf+InfluxDB+Grafana+Docker搭建服务器监控平台","description":"","frontmatter":{"title":"Telegraf+InfluxDB+Grafana+Docker搭建服务器监控平台","categories":"Grafana","tags":["Telegraf+InfluxDB+Grafana+Docker"],"date":"2021-01-13T14:02:00.000Z"},"headers":[{"level":2,"title":"写在前面","slug":"写在前面","link":"#写在前面","children":[]},{"level":2,"title":"设计部署","slug":"设计部署","link":"#设计部署","children":[{"level":3,"title":"1 部署InfluxDB","slug":"_1-部署influxdb","link":"#_1-部署influxdb","children":[]},{"level":3,"title":"2 安装Telegraf","slug":"_2-安装telegraf","link":"#_2-安装telegraf","children":[]},{"level":3,"title":"部署Grafana","slug":"部署grafana","link":"#部署grafana","children":[]},{"level":3,"title":"Grafana绘图示例","slug":"grafana绘图示例","link":"#grafana绘图示例","children":[]},{"level":3,"title":"引用Grafana官网模板","slug":"引用grafana官网模板","link":"#引用grafana官网模板","children":[]}]}],"relativePath":"pages/posts/Telegraf+InfluxDB+Grafana+Docker搭建服务器监控平台.md","path":"/Users/vlinux/vlinux/blog/valaxy/vlinux.github.io/pages/posts/Telegraf+InfluxDB+Grafana+Docker搭建服务器监控平台.md","lastUpdated":1675833042000}'),A={name:"pages/posts/Telegraf+InfluxDB+Grafana+Docker搭建服务器监控平台.md",data(){return{data:c,frontmatter:c.frontmatter}},setup(){f("pageData",c)}},u={id:"telegraf-influxdb-grafana-docker搭建服务器监控平台",tabindex:"-1"},g={id:"写在前面",tabindex:"-1"},h=s("p",null,"因为监控Docker的事情头疼了很久,终于找到了这个很适合业务需求的方案.(我知道你们肯定想说,那么多监控docker的方案都不能使用吗?答案是:可能会使用,但我是FW)",-1),_=s("p",null,"要搭建服务器监控平台，总共分三步： 第一步，数据采集； 第二步，数据存储； 第三步，数据可视化。",-1),m=s("p",null,"其中，数据存储连接数据采集与数据可视化，是非常重要的中间环节。本文选择了时序数据库InfluxDB。",-1),F=s("strong",null,"时间序列数据库",-1),E=s("p",null,"Grafana从早期版本就对InfluxDB有着完善的支持。",-1),b=s("p",null,[s("strong",null,"最终平台的方案："),s("strong",null,"Telegraf(数据采集)+InfluxDB（数据存储）+Grafana（数据可视化）==>Docker(监控Docker相关业务)。")],-1),x={id:"设计部署",tabindex:"-1"},k=s("p",null,"当然你也可以选择我下面给出的一键安装Docker.适用范围Centos 7.2-7.8,需提前准备epel源",-1),B=s("div",{class:"language-bash"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"curl"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-fsSL"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"https://get.docker.com"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"|"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"bash"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-s"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"docker"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"--mirror"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"Aliyun")]),l(`
`),s("span",{class:"line"})])])],-1),v={id:"_1-部署influxdb",tabindex:"-1"},w=s("div",{class:"language-bash"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"docker"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"pull"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"influxdb:1.6.5")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"docker"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"run"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-d"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-p"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"8086"),s("span",{style:{color:"#C3E88D"}},":"),s("span",{style:{color:"#F78C6C"}},"8086"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"--name=influxdb"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"influxdb:1.6.5")]),l(`
`),s("span",{class:"line"})])])],-1),T=s("p",null,"以上命令dcoker会自动从仓库下载最新版本的influxdb镜像，后台运行一个名为influxdb的容器并映射主机8086端口到容器8086端口。",-1),G=s("p",null,"若想将数据存储到宿主机而非容器内，可使用以下命令启动挂载本地目录到容器内。",-1),I=s("div",{class:"language-bash"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"# $pwd为当前工作目录，可替换为其它宿主机目录")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"docker"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"run"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-d"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-p"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"8086"),s("span",{style:{color:"#C3E88D"}},":"),s("span",{style:{color:"#F78C6C"}},"8086"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-v"),s("span",{style:{color:"#A6ACCD"}}," $PWD"),s("span",{style:{color:"#C3E88D"}},":/var/lib/influxdb"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"--name=influxdb"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"influxdb")]),l(`
`),s("span",{class:"line"})])])],-1),S=s("p",null,"启动InfluxDB容器后，通过http接口访问进行测试。",-1),P=s("div",{class:"language-bash"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"curl"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-G"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"http://localhost:"),s("span",{style:{color:"#F78C6C"}},"8086"),s("span",{style:{color:"#C3E88D"}},"/query"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"--data-urlencode"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"q=show databases"),s("span",{style:{color:"#89DDFF"}},'"')]),l(`
`),s("span",{class:"line"})])])],-1),$=s("p",null,"若influxdb运行正常，则会返回如下结果：",-1),U=s("div",{class:"language-bash"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},'# 链接查询参数为show databases 数据库会返回所有的数据库名，新安装的influxdb默认只有一个"_internal"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"# 数据库。")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"{"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"results"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#A6ACCD"}},":"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#A6ACCD"}},"{"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"statement_id"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#A6ACCD"}},":"),s("span",{style:{color:"#F78C6C"}},"0"),s("span",{style:{color:"#A6ACCD"}},","),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"series"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#A6ACCD"}},":"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#A6ACCD"}},"{"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"name"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#A6ACCD"}},":"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"databases"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#A6ACCD"}},","),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"columns"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#A6ACCD"}},":"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"name"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#89DDFF"}},"]"),s("span",{style:{color:"#A6ACCD"}},","),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"values"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#A6ACCD"}},":"),s("span",{style:{color:"#89DDFF"}},"[["),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"_internal"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#89DDFF"}},"]"),s("span",{style:{color:"#A6ACCD"}},","),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"telegraf"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#89DDFF"}},"]]"),s("span",{style:{color:"#A6ACCD"}},"}"),s("span",{style:{color:"#89DDFF"}},"]"),s("span",{style:{color:"#A6ACCD"}},"}"),s("span",{style:{color:"#89DDFF"}},"]}")]),l(`
`),s("span",{class:"line"})])])],-1),H={id:"influxdb容器管理",tabindex:"-1"},L=s("div",{class:"language-bash"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"# 启动")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"docker"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"start"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"influxdb")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"# 停止")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"docker"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"stop"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"influxdb")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"# 重启")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"docker"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"restart"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"influxdb")]),l(`
`),s("span",{class:"line"})])])],-1),O=s("hr",null,null,-1),j={id:"_2-安装telegraf",tabindex:"-1"},N={id:"下载安装",tabindex:"-1"},V=s("p",null,"Telegraf为了方便配置调试，选择直接在宿主机安装。",-1),W=s("div",{class:"language-bash"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"# 以CentOS为例")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"# 下载Telegraf")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"wget"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"https://dl.influxdata.com/telegraf/releases/telegraf-1.6.3-1.x86_64.rpm")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"# 安装Telegraf")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"sudo"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"yum"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"localinstall"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"telegraf-1.6.3-1.x86_64.rpm")]),l(`
`),s("span",{class:"line"})])])],-1),q={id:"配置telegraf",tabindex:"-1"},M=s("p",null,[l("用户可修改Telegraf配置文件进行采集项的配置。配置文件默认位于"),s("code",null,"/etc/telegraf/telegraf.conf"),l("。 在本文方案中，需要配置数据输出项（输出到influxdb），其它项使用telegraf默认即可。")],-1),R=s("p",null,"按照示例配置influxdb url、database名称",-1),z=s("div",{class:"language-bash"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"###############################################################################")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"#                            OUTPUT PLUGINS                                   #")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"###############################################################################")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"# Configuration for sending metrics to InfluxDB")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"[["),s("span",{style:{color:"#A6ACCD"}},"outputs.influxdb"),s("span",{style:{color:"#89DDFF"}},"]]")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#676E95","font-style":"italic"}},"## The full HTTP or UDP URL for your InfluxDB instance.")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#676E95","font-style":"italic"}},"##")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#676E95","font-style":"italic"}},"## Multiple URLs can be specified for a single cluster, only ONE of the")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#676E95","font-style":"italic"}},"## urls will be written to each interval.")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#676E95","font-style":"italic"}},'# urls = ["unix:///var/run/influxdb.sock"]')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#676E95","font-style":"italic"}},'# urls = ["udp://127.0.0.1:8089"]')]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#676E95","font-style":"italic"}},"# influxdb http地址，由于是宿主机直接安装，直接访问本地8086端口即可。")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#FFCB6B"}},"urls"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"http://127.0.0.1:8086"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#89DDFF"}},"]")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#676E95","font-style":"italic"}},"## The target database for metrics; will be created as needed.")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#676E95","font-style":"italic"}},'# 数据库名，不存在会自动创建，默认"telegraf"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#FFCB6B"}},"database"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"telegraf"),s("span",{style:{color:"#89DDFF"}},'"')]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#676E95","font-style":"italic"}},"## If true, no CREATE DATABASE queries will be sent.  Set to true when using")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#676E95","font-style":"italic"}},"## Telegraf with a user without permissions to create databases or when the")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#676E95","font-style":"italic"}},"## database already exists.")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#676E95","font-style":"italic"}},"# 跳过创建数据库")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#FFCB6B"}},"skip_database_creation"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"false")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#676E95","font-style":"italic"}},"## Name of existing retention policy to write to.  Empty string writes to")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#676E95","font-style":"italic"}},"## the default retention policy.")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#676E95","font-style":"italic"}},'# retention_policy = ""')]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#676E95","font-style":"italic"}},'## Write consistency (clusters only), can be: "any", "one", "quorum", "all"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#676E95","font-style":"italic"}},'# write_consistency = "any"')]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#676E95","font-style":"italic"}},"## Timeout for HTTP messages.")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#676E95","font-style":"italic"}},"# 超时时间")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#FFCB6B"}},"timeout"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"5s"),s("span",{style:{color:"#89DDFF"}},'"')]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#676E95","font-style":"italic"}},"## HTTP Basic Auth")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#676E95","font-style":"italic"}},'# username = "telegraf"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#676E95","font-style":"italic"}},'# password = "metricsmetricsmetricsmetrics"')]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#676E95","font-style":"italic"}},"## HTTP User-Agent")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#676E95","font-style":"italic"}},'# user_agent = "telegraf"')]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#676E95","font-style":"italic"}},"## UDP payload size is the maximum packet size to send.")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#676E95","font-style":"italic"}},"# udp_payload = 512")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#676E95","font-style":"italic"}},"## Optional SSL Config")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#676E95","font-style":"italic"}},'# ssl_ca = "/etc/telegraf/ca.pem"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#676E95","font-style":"italic"}},'# ssl_cert = "/etc/telegraf/cert.pem"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#676E95","font-style":"italic"}},'# ssl_key = "/etc/telegraf/key.pem"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#676E95","font-style":"italic"}},"## Use SSL but skip chain & host verification")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#676E95","font-style":"italic"}},"# insecure_skip_verify = false")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#676E95","font-style":"italic"}},"## HTTP Proxy override, if unset values the standard proxy environment")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#676E95","font-style":"italic"}},"## variables are consulted to determine which proxy, if any, should be used.")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#676E95","font-style":"italic"}},'# http_proxy = "http://corporate.proxy:3128"')]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#676E95","font-style":"italic"}},"## Additional HTTP headers")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#676E95","font-style":"italic"}},'# http_headers = {"X-Special-Header" = "Special-Value"}')]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#676E95","font-style":"italic"}},'## HTTP Content-Encoding for write request body, can be set to "gzip" to')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#676E95","font-style":"italic"}},'## compress body or "identity" to apply no encoding.')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#676E95","font-style":"italic"}},'# content_encoding = "identity"')]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#676E95","font-style":"italic"}},"## When true, Telegraf will output unsigned integers as unsigned values,")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#676E95","font-style":"italic"}},'## i.e.: "42u".  You will need a version of InfluxDB supporting unsigned')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#676E95","font-style":"italic"}},"## integer values.  Enabling this option will result in field type errors if")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#676E95","font-style":"italic"}},"## existing data has been written.")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#676E95","font-style":"italic"}},"# influx_uint_support = false")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#89DDFF"}},"[["),s("span",{style:{color:"#A6ACCD"}},"inputs.docker"),s("span",{style:{color:"#89DDFF"}},"]]")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#676E95","font-style":"italic"}},"###指定本机docker运行时sock文件")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#FFCB6B"}},"endpoint"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"unix:///var/run/docker.sock"),s("span",{style:{color:"#89DDFF"}},'"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#676E95","font-style":"italic"}},"###设置为true以收集集群度量")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#676E95","font-style":"italic"}},"###如果使用docker-compose或者docker-swarm需要用到")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#FFCB6B"}},"gather_services"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"false")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#676E95","font-style":"italic"}},"###排除容器名等配置")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#FFCB6B"}},"container_name_include"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"[]")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#FFCB6B"}},"container_name_exclude"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"[]")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#676E95","font-style":"italic"}},"###Docker统计信息超时时间")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#FFCB6B"}},"timeout"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"5s"),s("span",{style:{color:"#89DDFF"}},'"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#676E95","font-style":"italic"}},"###包含和排除docker标签,空数组包含所有标签")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#676E95","font-style":"italic"}},"###哪些环境变量，我们应该作为一个标签使用＃tag_env = “ JAVA_HOME ”，“ HEAP_SIZE ” ] ＃＃可选TLS配置＃ tls_ca = “/etc/telegraf/ca.pem” ＃ TLS_CERT = “/etc/telegraf/cert.pem” ＃ TLS_KEY = “/etc/telegraf/key.pem”")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#FFCB6B"}},"docker_label_include"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"[]")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#FFCB6B"}},"docker_label_exclude"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"[]")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#676E95","font-style":"italic"}},"###每个容器的IO报告")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#FFCB6B"}},"perdevice"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"true")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#676E95","font-style":"italic"}},"###每个容器的总IO和网络统计信息")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#FFCB6B"}},"total"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"false")]),l(`
`),s("span",{class:"line"})])])],-1),J={id:"启动telegraf",tabindex:"-1"},Z=s("p",null,'[tip type="danger" title="注意telegraf权限问题"] 确保telegraf程序正常访问docker.sock [/tip]',-1),Y=s("div",{class:"language-bash"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"# 启动")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"usermod"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-aG"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"docker"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"telegraf")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"systemctl"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"start"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"telegraf")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"# 停止")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"systemctl"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"stop"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"telegraf")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"# 重启")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"systemctl"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"restart"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"telegraf")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"# 查看服务状态")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"systemctl"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"status"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"telegraf")]),l(`
`),s("span",{class:"line"})])])],-1),K=s("hr",null,null,-1),X={id:"部署grafana",tabindex:"-1"},Q=s("p",null,"Grafana同样采用官方docker镜像进行快速部署。",-1),ss=s("div",{class:"language-bash"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"docker"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"run"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-d"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-p"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"3000"),s("span",{style:{color:"#C3E88D"}},":"),s("span",{style:{color:"#F78C6C"}},"3000"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"--name=grafana"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"grafana/grafana")]),l(`
`),s("span",{class:"line"})])])],-1),ls=s("p",null,"以上命令docker会拉取最新版grafana镜像，运行名为grafana的容器，并映射宿主机3000端口。",-1),as=s("p",null,[l("初次启动，grafana会创建数据库，时间稍长，稍后即可访问"),s("code",null,"http://localhost:3000"),l("打开grafana登录页面。 输入默认用户名密码登录（admin）。")],-1),es=s("p",null,"你可以自行创建仪表盘,当然也可以引用Grafana官网已经创建好的模板,毕竟你走过的路可能别人早就走过好几遍了.",-1),ns={id:"grafana绘图示例",tabindex:"-1"},os=s("p",null,[s("img",{src:"https://cos.vlinux.cn/www-vlinux-cn-blog-img/gitee-backup/img-master/image/70.jpg",alt:"img1"})],-1),ts=s("p",null,"按照主页向导完成初次配置。",-1),cs=s("p",null,[s("img",{src:"https://cos.vlinux.cn/www-vlinux-cn-blog-img/gitee-backup/img-master/image/71.jpg",alt:"img2"})],-1),rs={id:"_1-添加数据源",tabindex:"-1"},is=s("p",null,"点击添加数据源，按照下图配置选择influxdb添加一个influxdb数据源。",-1),ps=s("p",null,"url需配置成正确的宿主机ip和端口（防火墙需放行8086），若不想暴露数据库端口，可换成influxdb容器的ip地址（需自行进入容器查看，容器重启后可能会发生变化）避免数据库暴露至公网。",-1),ys=s("p",null,"InfluxDB Details需填写数据名（默认telegraf）、用户名和密码（默认均为root）。",-1),Cs=s("p",null,[l("填写完成后，点击"),s("code",null,"Save&Test"),l("按钮，若访问正常，会出现"),s("code",null,"Data source is working"),l("提示，否则请检查配置内容以及网络（防火墙）。")],-1),Ds=s("p",null,[s("img",{src:"https://cos.vlinux.cn/www-vlinux-cn-blog-img/gitee-backup/img-master/image/72.jpg",alt:"img3"})],-1),ds=s("p",null,[s("img",{src:"https://cos.vlinux.cn/www-vlinux-cn-blog-img/gitee-backup/img-master/image/79.jpg",alt:"img4"})],-1),fs=s("hr",null,null,-1),As={id:"添加仪表板",tabindex:"-1"},us=s("p",null,[l("返回主页，点击添加仪表板按钮添加新仪表板，点击"),s("code",null,"Graph"),l("创建一个Graph Panel。 "),s("img",{src:"https://cos.vlinux.cn/www-vlinux-cn-blog-img/gitee-backup/img-master/image/80.jpg",alt:"img5"})],-1),gs=s("p",null,[l("点击标题展开菜单，选择"),s("code",null,"Edit"),l("进入面板编辑。")],-1),hs=s("p",null,[s("img",{src:"https://cos.vlinux.cn/www-vlinux-cn-blog-img/gitee-backup/img-master/image/75.jpg",alt:"img6"})],-1),_s=s("p",null,[l("选择"),s("code",null,"Metrics"),l("选项卡配置面板数据。")],-1),ms=s("p",null,"如图示配置可显示一条CPU-total的数据曲线。",-1),Fs=s("p",null,[s("img",{src:"https://cos.vlinux.cn/www-vlinux-cn-blog-img/gitee-backup/img-master/image/76.jpg",alt:"img7"})],-1),Es=s("p",null,"还可添加多条查询，同时在一个panel显示多条曲线。",-1),bs=s("p",null,[s("img",{src:"https://cos.vlinux.cn/www-vlinux-cn-blog-img/gitee-backup/img-master/image/77.jpg",alt:"img8"})],-1),xs=s("p",null,"配置完成后点击上方保存按钮保存仪表板。",-1),ks={id:"引用grafana官网模板",tabindex:"-1"},Bs=s("p",null,[s("img",{src:"https://cos.vlinux.cn/www-vlinux-cn-blog-img/gitee-backup/img-master/image/image-20201117101720227.png",alt:"image-20201117101720227"})],-1),vs=s("p",null,[s("img",{src:"https://cos.vlinux.cn/www-vlinux-cn-blog-img/gitee-backup/img-master/image/image-20201117102348557.png",alt:"image-20201117102348557"})],-1),ws=s("p",null,[s("img",{src:"https://cos.vlinux.cn/www-vlinux-cn-blog-img/gitee-backup/img-master/image/image-20201117102511029.png",alt:"image-20201117102511029"})],-1),Ts=s("p",null,[s("img",{src:"https://cos.vlinux.cn/www-vlinux-cn-blog-img/gitee-backup/img-master/image/cascascascascas.png",alt:"cascascascascas"})],-1),Gs=s("p",null,"就写到这里.欢迎大佬补充.",-1);function Is(o,Ss,Ps,$s,r,Us){const e=d,i=p;return D(),C(i,{frontmatter:r.frontmatter,data:r.data},{"main-content-md":a(()=>[s("h1",u,[l("Telegraf+InfluxDB+Grafana+Docker搭建服务器监控平台 "),n(e,{class:"header-anchor",href:"#telegraf-influxdb-grafana-docker搭建服务器监控平台","aria-hidden":"true"},{default:a(()=>[l("#")]),_:1})]),s("h2",g,[l("写在前面 "),n(e,{class:"header-anchor",href:"#写在前面","aria-hidden":"true"},{default:a(()=>[l("#")]),_:1})]),h,_,m,s("p",null,[l("InfluxDB是一款优秀的"),F,l("，适合存储设备性能、日志、物联网传感器等带时间戳的数据。能轻松处理高写入和高查询负载（数据采集与数据可视化非常常见的场景）。具体介绍请参阅InfluxDB官方文档："),n(e,{href:"https://docs.influxdata.com/influxdb/%E3%80%82",target:"_blank",rel:"noreferrer"},{default:a(()=>[l("https://docs.influxdata.com/influxdb/。")]),_:1})]),s("p",null,[l("数据采集方面有非常多的选择，~~你甚至可以自己开发一个。~~这里为了方便直接选择Influxdata官方出品的采集工具Telegraf ，毕竟是全家桶产品。Telegraf详情介绍："),n(e,{href:"https://docs.influxdata.com/telegraf/",target:"_blank",rel:"noreferrer"},{default:a(()=>[l("https://docs.influxdata.com/telegraf")]),_:1}),l("。")]),s("p",null,[l("可视化方面选择了超高颜值、功能强大的开源可视化利器Gafana，具体颜值有多高，功能有多强大，本文就不再赘述了，直接上官网："),n(e,{href:"https://grafana.com/grafana/dashboards",target:"_blank",rel:"noreferrer"},{default:a(()=>[l("https://grafana.com/grafana/dashboards")]),_:1}),l("。")]),s("p",null,[s("strong",null,[l("原博主甚至还给Grafana做了一下中文的本地汉化："),n(e,{href:"https://github.com/WangHL0927/grafana-chinese%E3%80%82",target:"_blank",rel:"noreferrer"},{default:a(()=>[l("https://github.com/WangHL0927/grafana-chinese。")]),_:1})])]),E,b,s("h2",x,[l("设计部署 "),n(e,{class:"header-anchor",href:"#设计部署","aria-hidden":"true"},{default:a(()=>[l("#")]),_:1})]),s("p",null,[l("InfluxDB与Grafana直接使用官方容器进行部署，方便快捷。服务器需先安装Docker，具体步骤参考本站文章"),n(e,{href:"https://kococ.cn/posts/39421/",target:"_blank",rel:"noreferrer"},{default:a(()=>[l("CentOS7安装Docker")]),_:1}),l("。")]),k,B,s("h3",v,[l("1 部署InfluxDB "),n(e,{class:"header-anchor",href:"#_1-部署influxdb","aria-hidden":"true"},{default:a(()=>[l("#")]),_:1})]),w,T,G,I,S,P,$,U,s("h4",H,[l("influxdb容器管理 "),n(e,{class:"header-anchor",href:"#influxdb容器管理","aria-hidden":"true"},{default:a(()=>[l("#")]),_:1})]),L,O,s("h3",j,[l("2 安装Telegraf "),n(e,{class:"header-anchor",href:"#_2-安装telegraf","aria-hidden":"true"},{default:a(()=>[l("#")]),_:1})]),s("h4",N,[l("下载安装 "),n(e,{class:"header-anchor",href:"#下载安装","aria-hidden":"true"},{default:a(()=>[l("#")]),_:1})]),V,W,s("h4",q,[l("配置Telegraf "),n(e,{class:"header-anchor",href:"#配置telegraf","aria-hidden":"true"},{default:a(()=>[l("#")]),_:1})]),M,R,z,s("p",null,[l("Telegraf提供的采集内容非常丰富，将相应配置项取消注释并重启Telegraf即可生效。其它更多配置项请参考Telegraf官方文档："),n(e,{href:"https://docs.influxdata.com/telegraf",target:"_blank",rel:"noreferrer"},{default:a(()=>[l("https://docs.influxdata.com/telegraf")]),_:1})]),s("h4",J,[l("启动Telegraf "),n(e,{class:"header-anchor",href:"#启动telegraf","aria-hidden":"true"},{default:a(()=>[l("#")]),_:1})]),Z,Y,K,s("h3",X,[l("部署Grafana "),n(e,{class:"header-anchor",href:"#部署grafana","aria-hidden":"true"},{default:a(()=>[l("#")]),_:1})]),Q,ss,ls,as,es,s("h3",ns,[l("Grafana绘图示例 "),n(e,{class:"header-anchor",href:"#grafana绘图示例","aria-hidden":"true"},{default:a(()=>[l("#")]),_:1})]),os,ts,cs,s("h4",rs,[l("1 添加数据源 "),n(e,{class:"header-anchor",href:"#_1-添加数据源","aria-hidden":"true"},{default:a(()=>[l("#")]),_:1})]),is,ps,ys,Cs,Ds,ds,fs,s("h4",As,[l("添加仪表板 "),n(e,{class:"header-anchor",href:"#添加仪表板","aria-hidden":"true"},{default:a(()=>[l("#")]),_:1})]),us,gs,hs,_s,ms,Fs,Es,bs,xs,s("p",null,[l("Grafana详细的使用方法请参考官方文档："),n(e,{href:"http://docs.grafana.org/%E6%88%96%E5%85%B6%E5%AE%83%E6%95%99%E7%A8%8B%E3%80%82",target:"_blank",rel:"noreferrer"},{default:a(()=>[l("http://docs.grafana.org/或其它教程。")]),_:1})]),s("h3",ks,[l("引用Grafana官网模板 "),n(e,{class:"header-anchor",href:"#引用grafana官网模板","aria-hidden":"true"},{default:a(()=>[l("#")]),_:1})]),Bs,vs,ws,Ts,Gs]),"main-header":a(()=>[t(o.$slots,"main-header")]),"main-header-after":a(()=>[t(o.$slots,"main-header-after")]),"main-nav":a(()=>[t(o.$slots,"main-nav")]),"main-content":a(()=>[t(o.$slots,"main-content")]),"main-content-after":a(()=>[t(o.$slots,"main-content-after")]),"main-nav-before":a(()=>[t(o.$slots,"main-nav-before")]),"main-nav-after":a(()=>[t(o.$slots,"main-nav-after")]),comment:a(()=>[t(o.$slots,"comment")]),footer:a(()=>[t(o.$slots,"footer")]),aside:a(()=>[t(o.$slots,"aside")]),"aside-custom":a(()=>[t(o.$slots,"aside-custom")]),default:a(()=>[t(o.$slots,"default")]),_:3},8,["frontmatter","data"])}const Ws=y(A,[["render",Is]]);export{Vs as __pageData,Ws as default};
