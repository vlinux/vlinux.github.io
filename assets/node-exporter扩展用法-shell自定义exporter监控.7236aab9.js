import{_ as c}from"./ValaxyMain.vue_vue_type_style_index_0_lang.31b49385.js";import{_ as p,c as i,w as l,o as d,r as n,g as e,R as s,p as _}from"./app.85dbdf03.js";import"./YunFooter.vue_vue_type_script_setup_true_lang.426092c2.js";import"./YunCard.vue_vue_type_style_index_0_lang.588ddec5.js";import"./YunPageHeader.vue_vue_type_script_setup_true_lang.a154f674.js";const H=JSON.parse('{"title":"node-exporter\u6269\u5C55\u7528\u6CD5-shell\u81EA\u5B9A\u4E49exporter\u76D1\u63A7","description":"","frontmatter":{"title":"node-exporter\u6269\u5C55\u7528\u6CD5-shell\u81EA\u5B9A\u4E49exporter\u76D1\u63A7","categories":"Prometheus","tags":["\u81EA\u5B9A\u4E49exporter"],"date":"2019-11-20T11:08:00.000Z"},"headers":[{"level":2,"title":"\u6DFB\u52A0\u53D6\u503C\u811A\u672C","slug":"\u6DFB\u52A0\u53D6\u503C\u811A\u672C","link":"#\u6DFB\u52A0\u53D6\u503C\u811A\u672C","children":[]},{"level":2,"title":"\u8BBE\u7F6E\u5B9A\u65F6\u4EFB\u52A1","slug":"\u8BBE\u7F6E\u5B9A\u65F6\u4EFB\u52A1","link":"#\u8BBE\u7F6E\u5B9A\u65F6\u4EFB\u52A1","children":[]},{"level":2,"title":"\u6DFB\u52A0\u542F\u52A8\u53C2\u6570","slug":"\u6DFB\u52A0\u542F\u52A8\u53C2\u6570","link":"#\u6DFB\u52A0\u542F\u52A8\u53C2\u6570","children":[]},{"level":2,"title":"\u9A8C\u8BC1","slug":"\u9A8C\u8BC1","link":"#\u9A8C\u8BC1","children":[]}],"relativePath":"pages/posts/node-exporter\u6269\u5C55\u7528\u6CD5-shell\u81EA\u5B9A\u4E49exporter\u76D1\u63A7.md","path":"/Users/vlinux/vlinux/blog/valaxy/valaxy-vlinux/pages/posts/node-exporter\u6269\u5C55\u7528\u6CD5-shell\u81EA\u5B9A\u4E49exporter\u76D1\u63A7.md","lastUpdated":0}'),a=JSON.parse('{"title":"node-exporter\u6269\u5C55\u7528\u6CD5-shell\u81EA\u5B9A\u4E49exporter\u76D1\u63A7","description":"","frontmatter":{"title":"node-exporter\u6269\u5C55\u7528\u6CD5-shell\u81EA\u5B9A\u4E49exporter\u76D1\u63A7","categories":"Prometheus","tags":["\u81EA\u5B9A\u4E49exporter"],"date":"2019-11-20T11:08:00.000Z"},"headers":[{"level":2,"title":"\u6DFB\u52A0\u53D6\u503C\u811A\u672C","slug":"\u6DFB\u52A0\u53D6\u503C\u811A\u672C","link":"#\u6DFB\u52A0\u53D6\u503C\u811A\u672C","children":[]},{"level":2,"title":"\u8BBE\u7F6E\u5B9A\u65F6\u4EFB\u52A1","slug":"\u8BBE\u7F6E\u5B9A\u65F6\u4EFB\u52A1","link":"#\u8BBE\u7F6E\u5B9A\u65F6\u4EFB\u52A1","children":[]},{"level":2,"title":"\u6DFB\u52A0\u542F\u52A8\u53C2\u6570","slug":"\u6DFB\u52A0\u542F\u52A8\u53C2\u6570","link":"#\u6DFB\u52A0\u542F\u52A8\u53C2\u6570","children":[]},{"level":2,"title":"\u9A8C\u8BC1","slug":"\u9A8C\u8BC1","link":"#\u9A8C\u8BC1","children":[]}],"relativePath":"pages/posts/node-exporter\u6269\u5C55\u7528\u6CD5-shell\u81EA\u5B9A\u4E49exporter\u76D1\u63A7.md","path":"/Users/vlinux/vlinux/blog/valaxy/valaxy-vlinux/pages/posts/node-exporter\u6269\u5C55\u7528\u6CD5-shell\u81EA\u5B9A\u4E49exporter\u76D1\u63A7.md","lastUpdated":0}'),h={name:"pages/posts/node-exporter\u6269\u5C55\u7528\u6CD5-shell\u81EA\u5B9A\u4E49exporter\u76D1\u63A7.md",data(){return{data:a,frontmatter:a.frontmatter}},setup(){_("pageData",a)}},u=e("blockquote",null,[e("p",null,"\u5F53Prometheus\u7684node_exporter\u4E2D\u6CA1\u6709\u6211\u4EEC\u9700\u8981\u7684\u4E00\u4E9B\u76D1\u63A7\u9879\u65F6\uFF0C\u5C31\u53EF\u4EE5\u4F7F\u7528\u81EA\u5B9A\u4E49exporter\u7684\u6269\u5C55\u529F\u80FD\uFF0C\u4F46\u662F\u5BF9\u4E8E\u90A3\u4E9B\u5F00\u53D1\u80FD\u529B\u7A0D\u5FAE\u5F31\u4E00\u4E9B\u7684\u670B\u53CB\uFF08\u7279\u6307\u6211\uFF09\uFF0C\u5982\u679C\u4F60\u4F1Ashell\u811A\u672C\u7684\u7F16\u5199\uFF0C\u6700\u57FA\u7840\u7684awk\u8BED\u6CD5\uFF0C\u90A3\u4E48\u4F60\u4E5F\u53EF\u4EE5\u8FDB\u884C\u81EA\u5B9A\u4E49exporter\uFF0C\u8FD9\u5C31\u9700\u8981\u501F\u52A9Node-exporter\u5B9E\u73B0\u4E86\u3002")],-1),y=e("p",null,[s("*"),e("em",null,[s("node_exporter \u53EF\u5728\u542F\u52A8\u65F6\u6307\u5B9A\u8DEF\u5F84\uFF0C\u5E76\u5C06\u8BE5\u8DEF\u5F84\u4E0B\u7684 "),e("em",null,".prom \u8BC6\u522B\u4E3A\u76D1\u63A7\u6570\u636E\u6587\u4EF6\u3002")])],-1),C=e("h2",{id:"\u6DFB\u52A0\u53D6\u503C\u811A\u672C",tabindex:"-1"},[s("\u6DFB\u52A0\u53D6\u503C\u811A\u672C "),e("a",{class:"header-anchor",href:"#\u6DFB\u52A0\u53D6\u503C\u811A\u672C","aria-hidden":"true"},"#")],-1),m=e("div",{class:"language-"},[e("span",{class:"copy"}),e("pre",null,[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},"[root@one tmp]# cat /data/exporter/key/key_runner ")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},"#! /bin/bash")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}})]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},'echo Logical_CPU_core_total  `cat /proc/cpuinfo| grep "processor"| wc -l`')]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},"echo logined_users_total     `who | wc -l`;")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},"echo procs_total `ps aux|wc -l`")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},"echo procs_zombie       `ps axo pid=,stat=|grep Z|wc -l`")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}})])])])],-1),A=e("p",null,"\u6267\u884C\u6548\u679C",-1),D=e("div",{class:"language-"},[e("span",{class:"copy"}),e("pre",null,[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},"[root@one key]# bash  key_runner")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},"Logical_CPU_core_total 2")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},"logined_users_total 1")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},"procs_total 148")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},"procs_zombie 0")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}})])])])],-1),x=e("h2",{id:"\u8BBE\u7F6E\u5B9A\u65F6\u4EFB\u52A1",tabindex:"-1"},[s("\u8BBE\u7F6E\u5B9A\u65F6\u4EFB\u52A1 "),e("a",{class:"header-anchor",href:"#\u8BBE\u7F6E\u5B9A\u65F6\u4EFB\u52A1","aria-hidden":"true"},"#")],-1),g=e("blockquote",null,[e("p",null,"\u6BCF\u5206\u949F\u6267\u884C\u4E00\u6B21")],-1),f=e("div",{class:"language-"},[e("span",{class:"copy"}),e("pre",null,[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},"* * * * * bash /usr/local/node_exporter/key/key_runner > /usr/local/node_exporter/key/key.prom")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}})])])])],-1),v=e("h2",{id:"\u6DFB\u52A0\u542F\u52A8\u53C2\u6570",tabindex:"-1"},[s("\u6DFB\u52A0\u542F\u52A8\u53C2\u6570 "),e("a",{class:"header-anchor",href:"#\u6DFB\u52A0\u542F\u52A8\u53C2\u6570","aria-hidden":"true"},"#")],-1),k=e("p",null,"\u542F\u52A8node_exporter\uFF0C\u6307\u5B9A\u65B0\u52A0key\u503C\u7684prom\u8DEF\u5F84",-1),b=e("div",{class:"language-"},[e("span",{class:"copy"}),e("pre",null,[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},"./node_exporter --collector.textfile.directory=/usr/local/node_exporter-0.16/key")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}})])])])],-1),P=e("p",null,"\u5982\u679C\u4F60\u662FDocker\u542F\u52A8\uFF0C\u8BF7\u8003\u8651\u4F7F\u7528\u4E0B\u9762\u8FD9\u6761\u547D\u4EE4.",-1),$=e("div",{class:"language-bash"},[e("span",{class:"copy"}),e("pre",null,[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},"docker run -d   --net="),e("span",{style:{color:"#89DDFF"}},'"'),e("span",{style:{color:"#C3E88D"}},"host"),e("span",{style:{color:"#89DDFF"}},'"'),e("span",{style:{color:"#A6ACCD"}},"   --pid="),e("span",{style:{color:"#89DDFF"}},'"'),e("span",{style:{color:"#C3E88D"}},"host"),e("span",{style:{color:"#89DDFF"}},'"'),e("span",{style:{color:"#A6ACCD"}},"   --name=node-exporter   -v "),e("span",{style:{color:"#89DDFF"}},'"'),e("span",{style:{color:"#C3E88D"}},"/:/host:ro"),e("span",{style:{color:"#89DDFF"}},'"'),e("span",{style:{color:"#A6ACCD"}},"  quay.io/prometheus/node-exporter   --path.rootfs /host  --collector.textfile.directory=/host/data/exporter/key/")]),s(`
`),e("span",{class:"line"})])])],-1),E=e("h2",{id:"\u9A8C\u8BC1",tabindex:"-1"},[s("\u9A8C\u8BC1 "),e("a",{class:"header-anchor",href:"#\u9A8C\u8BC1","aria-hidden":"true"},"#")],-1),F=e("p",null,"\u67E5\u770Bmetrics\u503C\u662F\u5426\u65B0\u589E\u4E86\u8BE5\u76D1\u63A7\u9879",-1),U=e("div",{class:"language-"},[e("span",{class:"copy"}),e("pre",null,[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},'[root@one key]# curl 127.0.0.1:9100/metrics|grep -E "Logical_CPU_core_total|logined_users_total|procs_total|procs_zombie"')]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},"# TYPE Logical_CPU_core_total untyped")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},"Logical_CPU_core_total 2")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},"# HELP logined_users_total Metric read from /usr/local/node_exporter/key/key.prom")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},"# TYPE logined_users_total untyped")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},"logined_users_total 1")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},"# HELP procs_total Metric read from /usr/local/node_exporter/key/key.prom")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},"# TYPE procs_total untyped")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},"procs_total 151")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},"# HELP procs_zombie Metric read from /usr/local/node_exporter/key/key.prom")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},"# TYPE procs_zombie untyped")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},"procs_zombie 0")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}})])])])],-1);function w(o,L,T,z,t,N){const r=c;return d(),i(r,{frontmatter:t.frontmatter,data:t.data},{"main-content-md":l(()=>[u,y,C,m,A,D,x,g,f,v,k,b,P,$,E,F,U]),"main-header":l(()=>[n(o.$slots,"main-header")]),"main-header-after":l(()=>[n(o.$slots,"main-header-after")]),"main-nav":l(()=>[n(o.$slots,"main-nav")]),"main-content":l(()=>[n(o.$slots,"main-content")]),"main-content-after":l(()=>[n(o.$slots,"main-content-after")]),"main-nav-before":l(()=>[n(o.$slots,"main-nav-before")]),"main-nav-after":l(()=>[n(o.$slots,"main-nav-after")]),comment:l(()=>[n(o.$slots,"comment")]),footer:l(()=>[n(o.$slots,"footer")]),aside:l(()=>[n(o.$slots,"aside")]),"aside-custom":l(()=>[n(o.$slots,"aside-custom")]),default:l(()=>[n(o.$slots,"default")]),_:3},8,["frontmatter","data"])}const V=p(h,[["render",w]]);export{H as __pageData,V as default};
