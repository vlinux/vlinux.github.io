import{_ as p}from"./ValaxyMain.vue_vue_type_style_index_0_lang-befed7fa.js";import{_ as i,c as D,w as e,o as y,a as r,r as a,b as s,U as l,p as C}from"./app-d79bb61a.js";import"./YunFooter.vue_vue_type_script_setup_true_lang-8b4b5bea.js";import"./YunCard.vue_vue_type_style_index_0_lang-fed46e2f.js";import"./YunPageHeader.vue_vue_type_script_setup_true_lang-20b8fbac.js";const O=JSON.parse('{"title":"","description":"","frontmatter":{"title":{"[object Object]":null},"date":{"[object Object]":null},"updated":{"[object Object]":null},"tags":"coredns","categories":"Kubernetes"},"headers":[],"relativePath":"pages/posts/edit-coredns-config-hosts.md","path":"/Users/vlinux/vlinux/blog/valaxy/vlinux.github.io/pages/posts/edit-coredns-config-hosts.md","lastUpdated":1675748491000}'),n=JSON.parse('{"title":"","description":"","frontmatter":{"title":{"[object Object]":null},"date":{"[object Object]":null},"updated":{"[object Object]":null},"tags":"coredns","categories":"Kubernetes"},"headers":[],"relativePath":"pages/posts/edit-coredns-config-hosts.md","path":"/Users/vlinux/vlinux/blog/valaxy/vlinux.github.io/pages/posts/edit-coredns-config-hosts.md","lastUpdated":1675748491000}'),d={name:"pages/posts/edit-coredns-config-hosts.md",data(){return{data:n,frontmatter:n.frontmatter}},setup(){C("pageData",n)}},m=s("p",null,"在日常运维Kubernetes中经常会遇到很多网络问题，比如在一个Pod中常常需要访问一些业务域名，或者别的集群的域名，如果想要解决那就要搭建一整套DNS系统，来让所有集群跟环境统一使用，但这样未免太麻烦，有时候我们只是想简单的实现Pod能把这个域名解析到某个IP即可，我记得Coredns支持自定义Hosts文件，在配置更新后，Pod可以优先使用coredns定义好的hosts，话不多说，开始修改。",-1),F=s("hr",null,null,-1),A=s("p",null,"直接编辑coredns的cm更改即可",-1),u=s("div",{class:"language-bash"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"kubectl"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"edit"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"cm"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-n"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"kube-system"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"coredns")]),l(`
`),s("span",{class:"line"})])])],-1),h=s("div",{class:"language-yaml"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"apiVersion"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"v1")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"data"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#F07178"}},"Corefile"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"|"),s("span",{style:{color:"#C792EA"}},"-")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C3E88D"}},"    .:5353 {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C3E88D"}},"        bind {$POD_IP}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C3E88D"}},"        cache 30")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C3E88D"}},"        errors")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C3E88D"}},"        health {$POD_IP}:8080")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C3E88D"}},"        kubernetes cluster.local in-addr.arpa ip6.arpa {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C3E88D"}},"          pods insecure")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C3E88D"}},"          fallthrough in-addr.arpa ip6.arpa")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C3E88D"}},"        }")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C3E88D"}},"        #加入下方hosts字段即可")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C3E88D"}},"        hosts {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C3E88D"}},"          192.168.1.1 www.example.com")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C3E88D"}},"          fallthrough")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C3E88D"}},"        }")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C3E88D"}},"        loadbalance round_robin")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C3E88D"}},"        prometheus {$POD_IP}:9153")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C3E88D"}},"        forward . /etc/resolv.conf")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C3E88D"}},"        reload")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C3E88D"}},"    }")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"kind"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"ConfigMap")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"metadata"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#F07178"}},"labels"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    "),s("span",{style:{color:"#F07178"}},"app"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"coredns")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    "),s("span",{style:{color:"#F07178"}},"k8s-app"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"coredns")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    "),s("span",{style:{color:"#F07178"}},"kubernetes.io/cluster-service"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"true"),s("span",{style:{color:"#89DDFF"}},'"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    "),s("span",{style:{color:"#F07178"}},"kubernetes.io/name"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"CoreDNS")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    "),s("span",{style:{color:"#F07178"}},"release"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"cceaddon-coredns")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#F07178"}},"name"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"coredns")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#F07178"}},"namespace"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"kube-system")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#F07178"}},"resourceVersion"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"460"),s("span",{style:{color:"#89DDFF"}},'"')]),l(`
`),s("span",{class:"line"})])])],-1);function f(o,E,b,g,t,v){const c=p;return y(),D(c,{frontmatter:t.frontmatter,data:t.data},{"main-content-md":e(()=>[m,r(" more "),F,A,u,h,r(" Q.E.D. ")]),"main-header":e(()=>[a(o.$slots,"main-header")]),"main-header-after":e(()=>[a(o.$slots,"main-header-after")]),"main-nav":e(()=>[a(o.$slots,"main-nav")]),"main-content":e(()=>[a(o.$slots,"main-content")]),"main-content-after":e(()=>[a(o.$slots,"main-content-after")]),"main-nav-before":e(()=>[a(o.$slots,"main-nav-before")]),"main-nav-after":e(()=>[a(o.$slots,"main-nav-after")]),comment:e(()=>[a(o.$slots,"comment")]),footer:e(()=>[a(o.$slots,"footer")]),aside:e(()=>[a(o.$slots,"aside")]),"aside-custom":e(()=>[a(o.$slots,"aside-custom")]),default:e(()=>[a(o.$slots,"default")]),_:3},8,["frontmatter","data"])}const N=i(d,[["render",f]]);export{O as __pageData,N as default};
