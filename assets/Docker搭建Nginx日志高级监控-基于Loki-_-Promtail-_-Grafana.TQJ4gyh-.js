import{_ as c}from"./ValaxyMain.vue_vue_type_style_index_0_lang.Bth_JSAQ.js";import"./chunks/@vueuse/motion.BITvz5PP.js";import{e as d,u as F,a as u}from"./chunks/vue-router.DpP0leKZ.js";import{aa as m,ap as a,ag as n,af as i,ai as s,P as y,ab as b,a1 as C}from"./framework.GHZxz7jq.js";import"./index.Di1n2b66.js";import"./chunks/dayjs.BldX5ftQ.js";import"./chunks/vue-i18n.C7V8WoQZ.js";import"./chunks/pinia.BfAlK2F6.js";import"./chunks/nprogress.BZwbcB2O.js";/* empty css                    */import"./YunComment.vue_vue_type_style_index_0_lang.BWywLGB4.js";import"./index.C5okkQwF.js";import"./YunPageHeader.vue_vue_type_script_setup_true_lang.fblE3Fel.js";import"./post.DoKt6roH.js";const E=d("/posts/Docker搭建Nginx日志高级监控-基于Loki-+-Promtail-+-Grafana",async e=>JSON.parse('{"title":"Docker搭建Nginx日志高级监控-基于Loki + Promtail + Grafana","description":"","frontmatter":{"title":"Docker搭建Nginx日志高级监控-基于Loki + Promtail + Grafana","categories":"监控分析","tags":["Loki"],"date":"2021-06-30 14:55:35"},"headers":[],"relativePath":"pages/posts/Docker搭建Nginx日志高级监控-基于Loki-+-Promtail-+-Grafana.md","lastUpdated":null}'),{lazy:(e,t)=>e.name===t.name}),z={__name:"Docker搭建Nginx日志高级监控-基于Loki-+-Promtail-+-Grafana",setup(e,{expose:t}){const{data:r}=E(),o=u(),p=F(),h=Object.assign(p.meta.frontmatter||{},r.value?.frontmatter||{});return o.currentRoute.value.data=r.value,C("valaxy:frontmatter",h),globalThis.$frontmatter=h,t({frontmatter:{title:"Docker搭建Nginx日志高级监控-基于Loki + Promtail + Grafana",categories:"监控分析",tags:["Loki"],date:"2021-06-30 14:55:35"}}),(l,k)=>{const g=c;return b(),m(g,{frontmatter:y(h)},{"main-content-md":a(()=>[...k[0]||(k[0]=[i("h1",{id:"手把手搭建nginx日志高级监控-——-基于loki-promtail-grafana",tabindex:"-1"},[s("手把手搭建Nginx日志高级监控 —— 基于Loki + Promtail + Grafana "),i("a",{class:"header-anchor",href:"#手把手搭建nginx日志高级监控-——-基于loki-promtail-grafana","aria-label":'Permalink to "手把手搭建Nginx日志高级监控 —— 基于Loki + Promtail + Grafana"'},"​")],-1),i("blockquote",null,[i("p",null,"参考官方文档："),i("p",null,[s("Loki: "),i("a",{href:"https://grafana.com/docs/loki/latest/",target:"_blank",rel:"noreferrer"},"https://grafana.com/docs/loki/latest/")]),i("p",null,[s("Grafana Loki V2 Dashboard for Nginx "),i("a",{href:"https://grafana.com/grafana/dashboards/12559?pg=dashboards&plcmt=featured-main",target:"_blank",rel:"noreferrer"},"https://grafana.com/grafana/dashboards/12559?pg=dashboards&plcmt=featured-main")])],-1),i("p",null,"日志收集效果截图：",-1),i("figure",null,[i("img",{src:"https://cos.vlinux.cn/www-vlinux-cn-blog-img/gitee-backup/img-master/image/12345678.png",alt:"12345678",loading:"lazy",decoding:"async"})],-1),i("figure",null,[i("img",{src:"https://cos.vlinux.cn/www-vlinux-cn-blog-img/gitee-backup/img-master/image/23456.png",alt:"23456",loading:"lazy",decoding:"async"})],-1),i("h1",{id:"_1-loki-promtail简介",tabindex:"-1"},[s("1. Loki + Promtail简介 "),i("a",{class:"header-anchor",href:"#_1-loki-promtail简介","aria-label":'Permalink to "1. Loki + Promtail简介"'},"​")],-1),i("p",null,"官网有说明。",-1),i("p",null,"简单理解，",-1),i("p",null,"Loki是个日志监控系统，可用来分析日志，并提供给Grafana进行图形化展示。",-1),i("p",null,"Promtail是个日志转发的代理，用于给Loki提供日志数据的。",-1),i("h1",{id:"_2-loki-promtail下载并安装启动",tabindex:"-1"},[s("2. Loki + Promtail下载并安装启动 "),i("a",{class:"header-anchor",href:"#_2-loki-promtail下载并安装启动","aria-label":'Permalink to "2. Loki + Promtail下载并安装启动"'},"​")],-1),i("div",{class:"language-shell"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"shell"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"wget"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," https://github.com/grafana/loki/blob/main/cmd/loki/loki-local-config.yaml"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -O"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," loki-config.yaml")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"docker"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," run"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --name"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," loki"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -v"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," $("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"pwd"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},":/mnt/config"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -p"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," 3100:3100"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," grafana/loki:2.1.0"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -config.file=/mnt/config/loki-config.yaml")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"wget"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," https://github.com/grafana/loki/blob/main/clients/cmd/promtail/promtail-docker-config.yaml"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -O"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," promtail-config.yaml")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"docker"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," run"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --name"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," promtail"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -v"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," $("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"pwd"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},":/mnt/config"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -v"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /usr/local/nginx/logs:/usr/local/nginx/logs"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," grafana/promtail:2.1.0"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -config.file=/mnt/config/promtail-config.yaml")])])]),i("button",{class:"code-block-unfold-btn"})],-1),i("blockquote",null,[i("p",null,"脚本来自官网，容器启动后先停止，然后修改配置文件")],-1),i("h1",{id:"_3-修改nginx配置",tabindex:"-1"},[s("3. 修改Nginx配置 "),i("a",{class:"header-anchor",href:"#_3-修改nginx配置","aria-label":'Permalink to "3. 修改Nginx配置"'},"​")],-1),i("div",{class:"language-"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"}),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",null,"log_format json_analytics '{'")]),s(`
`),i("span",{class:"line"},[i("span",null,`                            '"msec": "$msec", ' # request unixtime in seconds with a milliseconds resolution`)]),s(`
`),i("span",{class:"line"},[i("span",null,`                            '"connection": "$connection", ' # connection serial number`)]),s(`
`),i("span",{class:"line"},[i("span",null,`                            '"connection_requests": "$connection_requests", ' # number of requests made in connection`)]),s(`
`),i("span",{class:"line"},[i("span",null,`                    '"pid": "$pid", ' # process pid`)]),s(`
`),i("span",{class:"line"},[i("span",null,`                    '"request_id": "$request_id", ' # the unique request id`)]),s(`
`),i("span",{class:"line"},[i("span",null,`                    '"request_length": "$request_length", ' # request length (including headers and body)`)]),s(`
`),i("span",{class:"line"},[i("span",null,`                    '"remote_addr": "$remote_addr", ' # client IP`)]),s(`
`),i("span",{class:"line"},[i("span",null,`                    '"remote_user": "$remote_user", ' # client HTTP username`)]),s(`
`),i("span",{class:"line"},[i("span",null,`                    '"remote_port": "$remote_port", ' # client port`)]),s(`
`),i("span",{class:"line"},[i("span",null,`                    '"time_local": "$time_local", '`)]),s(`
`),i("span",{class:"line"},[i("span",null,`                    '"time_iso8601": "$time_iso8601", ' # local time in the ISO 8601 standard format`)]),s(`
`),i("span",{class:"line"},[i("span",null,`                    '"request": "$request", ' # full path no arguments if the request`)]),s(`
`),i("span",{class:"line"},[i("span",null,`                    '"request_uri": "$request_uri", ' # full path and arguments if the request`)]),s(`
`),i("span",{class:"line"},[i("span",null,`                    '"args": "$args", ' # args`)]),s(`
`),i("span",{class:"line"},[i("span",null,`                    '"status": "$status", ' # response status code`)]),s(`
`),i("span",{class:"line"},[i("span",null,`                    '"body_bytes_sent": "$body_bytes_sent", ' # the number of body bytes exclude headers sent to a client`)]),s(`
`),i("span",{class:"line"},[i("span",null,`                    '"bytes_sent": "$bytes_sent", ' # the number of bytes sent to a client`)]),s(`
`),i("span",{class:"line"},[i("span",null,`                    '"http_referer": "$http_referer", ' # HTTP referer`)]),s(`
`),i("span",{class:"line"},[i("span",null,`                    '"http_user_agent": "$http_user_agent", ' # user agent`)]),s(`
`),i("span",{class:"line"},[i("span",null,`                    '"http_x_forwarded_for": "$http_x_forwarded_for", ' # http_x_forwarded_for`)]),s(`
`),i("span",{class:"line"},[i("span",null,`                    '"http_host": "$http_host", ' # the request Host: header`)]),s(`
`),i("span",{class:"line"},[i("span",null,`                    '"server_name": "$server_name", ' # the name of the vhost serving the request`)]),s(`
`),i("span",{class:"line"},[i("span",null,`                    '"request_time": "$request_time", ' # request processing time in seconds with msec resolution`)]),s(`
`),i("span",{class:"line"},[i("span",null,`                    '"upstream": "$upstream_addr", ' # upstream backend server for proxied requests`)]),s(`
`),i("span",{class:"line"},[i("span",null,`                    '"upstream_connect_time": "$upstream_connect_time", ' # upstream handshake time incl. TLS`)]),s(`
`),i("span",{class:"line"},[i("span",null,`                    '"upstream_header_time": "$upstream_header_time", ' # time spent receiving upstream headers`)]),s(`
`),i("span",{class:"line"},[i("span",null,`                    '"upstream_response_time": "$upstream_response_time", ' # time spend receiving upstream body`)]),s(`
`),i("span",{class:"line"},[i("span",null,`                    '"upstream_response_length": "$upstream_response_length", ' # upstream response length`)]),s(`
`),i("span",{class:"line"},[i("span",null,`                    '"upstream_cache_status": "$upstream_cache_status", ' # cache HIT/MISS where applicable`)]),s(`
`),i("span",{class:"line"},[i("span",null,`                    '"ssl_protocol": "$ssl_protocol", ' # TLS protocol`)]),s(`
`),i("span",{class:"line"},[i("span",null,`                    '"ssl_cipher": "$ssl_cipher", ' # TLS cipher`)]),s(`
`),i("span",{class:"line"},[i("span",null,`                    '"scheme": "$scheme", ' # http or https`)]),s(`
`),i("span",{class:"line"},[i("span",null,`                    '"request_method": "$request_method", ' # request method`)]),s(`
`),i("span",{class:"line"},[i("span",null,`                    '"server_protocol": "$server_protocol", ' # request protocol, like HTTP/1.1 or HTTP/2.0`)]),s(`
`),i("span",{class:"line"},[i("span",null,`                    '"pipe": "$pipe", ' # "p" if request was pipelined, "." otherwise`)]),s(`
`),i("span",{class:"line"},[i("span",null,`                    '"gzip_ratio": "$gzip_ratio", '`)]),s(`
`),i("span",{class:"line"},[i("span",null,`                    '"http_cf_ray": "$http_cf_ray"'`)]),s(`
`),i("span",{class:"line"},[i("span",null,"                    '}';")]),s(`
`),i("span",{class:"line"},[i("span",null,"access_log logs/json_access.log json_analytics;")])])]),i("button",{class:"code-block-unfold-btn"})],-1),i("blockquote",null,[i("p",null,"这一步是将Nginx输出的日志文件进行格式化")],-1),i("h1",{id:"_4-修改promtail配置",tabindex:"-1"},[s("4. 修改Promtail配置 "),i("a",{class:"header-anchor",href:"#_4-修改promtail配置","aria-label":'Permalink to "4. 修改Promtail配置"'},"​")],-1),i("div",{class:"language-yaml"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"yaml"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"server"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"  http_listen_port"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"  grpc_listen_port"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"positions"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"  filename"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"/tmp/positions.yaml")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"clients"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  - "),i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"url"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"http://172.17.0.4:3100/loki/api/v1/push"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"  # Loki日志推送地址")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"scrape_configs"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  - "),i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"job_name"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"system")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    #pipeline_stages:")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    #- replace:")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    #    expression: '(?:[0-9]{1,3}\\.){3}([0-9]{1,3})'")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    #    replace: '***'")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"    static_configs"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"      - "),i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"targets"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"          - "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"localhost"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," # 根据官方文档，这里只能是localhost")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"        labels"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"          job"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"nginx_access_log")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"          agent"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"promtail")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"          __path__"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"/usr/local/nginx/logs/json_access.log"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"  # 需要上传的日志地址。")])])]),i("button",{class:"code-block-unfold-btn"})],-1),i("h1",{id:"_5-重启loki-promtail容器",tabindex:"-1"},[s("5. 重启Loki+Promtail容器 "),i("a",{class:"header-anchor",href:"#_5-重启loki-promtail容器","aria-label":'Permalink to "5. 重启Loki+Promtail容器"'},"​")],-1),i("div",{class:"language-shell"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"shell"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"docker"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," restart"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," loki"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"docker"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," restart"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," promtail")])])]),i("button",{class:"code-block-unfold-btn"})],-1),i("h1",{id:"_6-配置grafana数据源",tabindex:"-1"},[s("6. 配置Grafana数据源 "),i("a",{class:"header-anchor",href:"#_6-配置grafana数据源","aria-label":'Permalink to "6. 配置Grafana数据源"'},"​")],-1),i("figure",null,[i("img",{src:"https://cos.vlinux.cn/www-vlinux-cn-blog-img/gitee-backup/img-master/image/20210630142131.png",alt:"image-20210630142131562",loading:"lazy",decoding:"async"})],-1),i("h1",{id:"_7-配置grafana模版",tabindex:"-1"},[s("7. 配置Grafana模版 "),i("a",{class:"header-anchor",href:"#_7-配置grafana模版","aria-label":'Permalink to "7. 配置Grafana模版"'},"​")],-1),i("p",null,"模版ID：12559",-1),i("p",null,"非常装逼，非常热门",-1),i("p",null,"导入方法与本博客多篇日志收集Grafana导入方法相同",-1),i("figure",null,[i("img",{src:"https://cos.vlinux.cn/www-vlinux-cn-blog-img/gitee-backup/img-master/image/20210630142256.png",alt:"image-20210630142256248",loading:"lazy",decoding:"async"})],-1),i("h1",{id:"_8-查看面板",tabindex:"-1"},[s("8. 查看面板 "),i("a",{class:"header-anchor",href:"#_8-查看面板","aria-label":'Permalink to "8. 查看面板"'},"​")],-1),i("figure",null,[i("img",{src:"https://cos.vlinux.cn/www-vlinux-cn-blog-img/gitee-backup/img-master/image/20210630142558.png",alt:"image-20210630142558503",loading:"lazy",decoding:"async"})],-1),i("figure",null,[i("img",{src:"https://cos.vlinux.cn/www-vlinux-cn-blog-img/gitee-backup/img-master/image/20210630142622.png",alt:"image-20210630142622826",loading:"lazy",decoding:"async"})],-1),i("p",null,"插件因素显示不全请自行安装，grafana-cli plugins install *****",-1),i("h1",{id:"_9-可查看指标",tabindex:"-1"},[s("9. 可查看指标 "),i("a",{class:"header-anchor",href:"#_9-可查看指标","aria-label":'Permalink to "9. 可查看指标"'},"​")],-1),i("ul",null,[i("li",null,"总请求量"),i("li",null,"状态码 2xx,3xx,5xx请求量"),i("li",null,"流量情况"),i("li",null,"请求明细"),i("li",null,"百分之95请求响应时间"),i("li",null,"最大请求IP"),i("li",null,"最大请求路径")],-1),i("h1",{id:"_10-国家面板",tabindex:"-1"},[s("10. 国家面板 "),i("a",{class:"header-anchor",href:"#_10-国家面板","aria-label":'Permalink to "10. 国家面板"'},"​")],-1),i("p",null,"Country面板无数据，是因为Grafana没有地图面板插件，且Nginx默认没有开启国家城市过滤。",-1),i("p",null,[i("strong",null,"文章最下面进行操作")],-1),i("h1",{id:"_11-资源消耗",tabindex:"-1"},[s("11. 资源消耗 "),i("a",{class:"header-anchor",href:"#_11-资源消耗","aria-label":'Permalink to "11. 资源消耗"'},"​")],-1),i("figure",null,[i("img",{src:"https://cos.vlinux.cn/www-vlinux-cn-blog-img/gitee-backup/img-master/image/20210630143102.png",alt:"image-20210630143102322",loading:"lazy",decoding:"async"})],-1),i("p",null,"就这资源消耗，还要啥自行车？要啥ELK？",-1),i("hr",null,null,-1),i("h2",{id:"ngin添加geoip模块",tabindex:"-1"},[s("Ngin添加GeoIP模块 "),i("a",{class:"header-anchor",href:"#ngin添加geoip模块","aria-label":'Permalink to "Ngin添加GeoIP模块"'},"​")],-1),i("h2",{id:"_1-1-停止现有nginx",tabindex:"-1"},[s("1.1 停止现有Nginx "),i("a",{class:"header-anchor",href:"#_1-1-停止现有nginx","aria-label":'Permalink to "1.1 停止现有Nginx"'},"​")],-1),i("div",{class:"language-bash"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"bash"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"./nginx"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -s"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," stop")])])]),i("button",{class:"code-block-unfold-btn"})],-1),i("h2",{id:"_1-2-带geoip重新编译nginx",tabindex:"-1"},[s("1.2 带GeoIP重新编译Nginx "),i("a",{class:"header-anchor",href:"#_1-2-带geoip重新编译nginx","aria-label":'Permalink to "1.2 带GeoIP重新编译Nginx"'},"​")],-1),i("h3",{id:"_1-2-1-下载geoip依赖",tabindex:"-1"},[s("1.2.1 下载GeoIP依赖 "),i("a",{class:"header-anchor",href:"#_1-2-1-下载geoip依赖","aria-label":'Permalink to "1.2.1 下载GeoIP依赖"'},"​")],-1),i("div",{class:"language-bash"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"bash"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," apt"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," install"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," libgeoip1"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," libgeoip-dev"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," geoip-bin")])])]),i("button",{class:"code-block-unfold-btn"})],-1),i("p",null,"github文档如下",-1),i("figure",null,[i("img",{src:"https://cos.vlinux.cn/www-vlinux-cn-blog-img/gitee-backup/img-master/image/20210630143344.png",alt:"img",loading:"lazy",decoding:"async"})],-1),i("h3",{id:"_1-2-2-进入nginx-sbin目录查看现有nginx模块依赖",tabindex:"-1"},[s("1.2.2 进入nginx/sbin目录查看现有nginx模块依赖 "),i("a",{class:"header-anchor",href:"#_1-2-2-进入nginx-sbin目录查看现有nginx模块依赖","aria-label":'Permalink to "1.2.2 进入nginx/sbin目录查看现有nginx模块依赖"'},"​")],-1),i("div",{class:"language-bash"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"bash"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"./nginx"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -V")])])]),i("button",{class:"code-block-unfold-btn"})],-1),i("figure",null,[i("img",{src:"https://cos.vlinux.cn/www-vlinux-cn-blog-img/gitee-backup/img-master/image/20210630143504.png",alt:"image-20210630143504540",loading:"lazy",decoding:"async"})],-1),i("p",null,"如上图，将红线位置拷贝，用于添加模块重新编译",-1),i("h3",{id:"_1-2-3-添加geoip模块重新编译",tabindex:"-1"},[s("1.2.3 添加geoip模块重新编译 "),i("a",{class:"header-anchor",href:"#_1-2-3-添加geoip模块重新编译","aria-label":'Permalink to "1.2.3 添加geoip模块重新编译"'},"​")],-1),i("div",{class:"language-shell"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"shell"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"./configure"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --prefix=/usr/local/nginx"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --with-http_gzip_static_module"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," \\")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --with-http_stub_status_module"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --with-http_ssl_module"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --with-pcre"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --with-file-aio"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," \\")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --with-http_realip_module"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --with-http_geoip_module"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --add-module=/usr/local/nginx-module-vts-master")])])]),i("button",{class:"code-block-unfold-btn"})],-1),i("div",{class:"language-shell"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"shell"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"make"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," && "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"make"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," install")])])]),i("button",{class:"code-block-unfold-btn"})],-1),i("h3",{id:"_1-2-4-执行命令-查看geoip是否编译成功",tabindex:"-1"},[s("1.2.4 执行命令，查看geoip是否编译成功 "),i("a",{class:"header-anchor",href:"#_1-2-4-执行命令-查看geoip是否编译成功","aria-label":'Permalink to "1.2.4 执行命令，查看geoip是否编译成功"'},"​")],-1),i("div",{class:"language-"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"}),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",null,"nginx -V")])])]),i("button",{class:"code-block-unfold-btn"})],-1),i("p",null,"带 --with-http_geoip_module 即编译成功",-1),i("h2",{id:"_1-3-查看geoip-dat位置",tabindex:"-1"},[s("1.3. 查看GeoIP.dat位置 "),i("a",{class:"header-anchor",href:"#_1-3-查看geoip-dat位置","aria-label":'Permalink to "1.3. 查看GeoIP.dat位置"'},"​")],-1),i("div",{class:"language-shell"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"shell"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"root@daicytest01:/usr/local/nginx/sbin#"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," whereis"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," GeoIP")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"GeoIP:"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /usr/include/GeoIP.h"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /usr/share/GeoIP")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"root@daicytest01:/usr/share/GeoIP#"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," ls"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -al")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"total"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 10012")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"drwxr-xr-x"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"   2"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," root"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," root"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"    4096"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," Feb"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 17"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," 22:14"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," .")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"drwxr-xr-x"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 121"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," root"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," root"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"    4096"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," Feb"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 17"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," 22:14"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," ..")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"-rw-r--r--"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"   1"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," root"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," root"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 2099217"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," Jan"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 23"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"  2020"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," GeoIP.dat")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"-rw-r--r--"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"   1"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," root"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," root"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 8138841"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," Jan"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 23"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"  2020"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," GeoIPv6.dat")])])]),i("button",{class:"code-block-unfold-btn"})],-1),i("h2",{id:"_1-4-修改nginx配置文件",tabindex:"-1"},[s("1.4. 修改nginx配置文件 "),i("a",{class:"header-anchor",href:"#_1-4-修改nginx配置文件","aria-label":'Permalink to "1.4. 修改nginx配置文件"'},"​")],-1),i("div",{class:"language-bash"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"bash"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 添加国家模块配置")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," geoip_country"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /usr/share/GeoIP/GeoIP.dat"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")])])]),i("button",{class:"code-block-unfold-btn"})],-1),i("h2",{id:"_1-5-重启nginx",tabindex:"-1"},[s("1.5. 重启nginx "),i("a",{class:"header-anchor",href:"#_1-5-重启nginx","aria-label":'Permalink to "1.5. 重启nginx"'},"​")],-1),i("div",{class:"language-shell"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"shell"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"nginx"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -s"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," reload")])])]),i("button",{class:"code-block-unfold-btn"})],-1),i("h2",{id:"_1-6-查看大图",tabindex:"-1"},[s("1.6. 查看大图 "),i("a",{class:"header-anchor",href:"#_1-6-查看大图","aria-label":'Permalink to "1.6. 查看大图"'},"​")],-1),i("figure",null,[i("img",{src:"https://cos.vlinux.cn/www-vlinux-cn-blog-img/gitee-backup/img-master/image/20210630144706.png",alt:"img",loading:"lazy",decoding:"async"})],-1),i("h2",{id:"_1-7-监控日志支持正则匹配",tabindex:"-1"},[s("1.7. 监控日志支持正则匹配 "),i("a",{class:"header-anchor",href:"#_1-7-监控日志支持正则匹配","aria-label":'Permalink to "1.7. 监控日志支持正则匹配"'},"​")],-1),i("div",{class:"language-bash"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"bash"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"root@daicytest01:/usr/local/nginx/logs#"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," ls")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"access.log"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"  error.log"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"  json_access.log"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"  json_access.log.2021-02-17"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"  nginx.pid")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"root@daicytest01:/usr/local/loki+promtail#"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," vim"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," promtail-config.yaml"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  ")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"  static_configs:")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"      -"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," targets:")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"          -"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," localhost")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        labels:")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"          job:"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," nginx_access_log")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"          agent:"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," promtail")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"          __path__:"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /usr/local/nginx/logs/"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"*"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"json_access.log"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"*")])])]),i("button",{class:"code-block-unfold-btn"})],-1)])]),"main-header":a(()=>[n(l.$slots,"main-header")]),"main-header-after":a(()=>[n(l.$slots,"main-header-after")]),"main-nav":a(()=>[n(l.$slots,"main-nav")]),"main-content-before":a(()=>[n(l.$slots,"main-content-before")]),"main-content":a(()=>[n(l.$slots,"main-content")]),"main-content-after":a(()=>[n(l.$slots,"main-content-after")]),"main-nav-before":a(()=>[n(l.$slots,"main-nav-before")]),"main-nav-after":a(()=>[n(l.$slots,"main-nav-after")]),comment:a(()=>[n(l.$slots,"comment")]),footer:a(()=>[n(l.$slots,"footer")]),aside:a(()=>[n(l.$slots,"aside")]),"aside-custom":a(()=>[n(l.$slots,"aside-custom")]),default:a(()=>[n(l.$slots,"default")]),_:3},8,["frontmatter"])}}};export{z as default,E as usePageData};
