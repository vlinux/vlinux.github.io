import{_ as c}from"./ValaxyMain-d9bd66f5.js";import{_ as p,p as i,c as d,w as n,o as C,r as l,b as s,R as e}from"./app-382fc2a2.js";import"./YunFooter-4df6b533.js";import"./YunCard-b4e8f33f.js";import"./YunPageHeader-82b6e544.js";const x=JSON.parse('{"title":"kubernetes coredns添加自定义DNS解析记录","description":"","frontmatter":{"title":"kubernetes coredns添加自定义DNS解析记录","categories":"Kubernetes","tags":["Kubernetes","coredns"],"date":"2022-02-25T10:10:18.000Z"},"headers":[],"relativePath":"pages/posts/kubernetes-coredns添加自定义DNS解析记录.md","path":"/Users/vlinux/vlinux/blog/valaxy/vlinux.github.io/pages/posts/kubernetes-coredns添加自定义DNS解析记录.md","lastUpdated":1671090556000}'),o=JSON.parse('{"title":"kubernetes coredns添加自定义DNS解析记录","description":"","frontmatter":{"title":"kubernetes coredns添加自定义DNS解析记录","categories":"Kubernetes","tags":["Kubernetes","coredns"],"date":"2022-02-25T10:10:18.000Z"},"headers":[],"relativePath":"pages/posts/kubernetes-coredns添加自定义DNS解析记录.md","path":"/Users/vlinux/vlinux/blog/valaxy/vlinux.github.io/pages/posts/kubernetes-coredns添加自定义DNS解析记录.md","lastUpdated":1671090556000}'),u={name:"pages/posts/kubernetes-coredns添加自定义DNS解析记录.md",data(){return{data:o,frontmatter:o.frontmatter}},setup(){i("pageData",o)}},D=s("h1",{id:"kubernetes-coredns-添加自定义dns解析记录",tabindex:"-1"},[e("kubernetes coredns 添加自定义DNS解析记录 "),s("a",{class:"header-anchor",href:"#kubernetes-coredns-添加自定义dns解析记录","aria-hidden":"true"},"#")],-1),A=s("blockquote",null,[s("p",null,[e("coredns 自带 hosts 插件， 允许像配置 hosts 一样配置自定义 DNS 解析，修改 "),s("code",null,"kube-system"),e(" 中 "),s("code",null,"configMap"),e(" 的 "),s("code",null,"coredns"),e(" 添加如下设置即可")])],-1),y=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}}," hosts {")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        172.21.91.28 cache.redis")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        172.21.91.28 persistent.redis")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"          ")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        fallthrough")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    }")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),m=s("p",null,"修改后文件如下",-1),h=s("div",{class:"language-yaml"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#C3E88D"}},".:53 {")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    "),s("span",{style:{color:"#C3E88D"}},"errors")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    "),s("span",{style:{color:"#C3E88D"}},"health")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    "),s("span",{style:{color:"#C3E88D"}},"kubernetes cluster.local in-addr.arpa ip6.arpa {")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"       "),s("span",{style:{color:"#C3E88D"}},"pods insecure")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"       "),s("span",{style:{color:"#C3E88D"}},"upstream")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"       "),s("span",{style:{color:"#C3E88D"}},"fallthrough in-addr.arpa ip6.arpa")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    }")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    "),s("span",{style:{color:"#C3E88D"}},"hosts {")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        "),s("span",{style:{color:"#C3E88D"}},"172.21.91.28 cache.redis")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        "),s("span",{style:{color:"#C3E88D"}},"172.21.91.28 persistent.redis")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"          ")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        "),s("span",{style:{color:"#C3E88D"}},"fallthrough")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    }")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    "),s("span",{style:{color:"#C3E88D"}},"prometheus :9153")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    "),s("span",{style:{color:"#C3E88D"}},"proxy . /etc/resolv.conf")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    "),s("span",{style:{color:"#C3E88D"}},"cache 30")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    "),s("span",{style:{color:"#C3E88D"}},"loop")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    "),s("span",{style:{color:"#C3E88D"}},"reload")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    "),s("span",{style:{color:"#C3E88D"}},"loadbalance")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"}")]),e(`
`),s("span",{class:"line"})])])],-1);function f(a,b,_,g,t,v){const r=c;return C(),d(r,{frontmatter:t.frontmatter,data:t.data},{"main-content-md":n(()=>[D,A,y,m,h]),"main-header":n(()=>[l(a.$slots,"main-header")]),"main-header-after":n(()=>[l(a.$slots,"main-header-after")]),"main-nav":n(()=>[l(a.$slots,"main-nav")]),"main-content":n(()=>[l(a.$slots,"main-content")]),"main-content-after":n(()=>[l(a.$slots,"main-content-after")]),"main-nav-before":n(()=>[l(a.$slots,"main-nav-before")]),"main-nav-after":n(()=>[l(a.$slots,"main-nav-after")]),comment:n(()=>[l(a.$slots,"comment")]),footer:n(()=>[l(a.$slots,"footer")]),aside:n(()=>[l(a.$slots,"aside")]),"aside-custom":n(()=>[l(a.$slots,"aside-custom")]),default:n(()=>[l(a.$slots,"default")]),_:3},8,["frontmatter","data"])}const U=p(u,[["render",f],["__file","/Users/vlinux/vlinux/blog/valaxy/vlinux.github.io/pages/posts/kubernetes-coredns添加自定义DNS解析记录.md"]]);export{x as __pageData,U as default};
