import{_ as i}from"./ValaxyMain.vue_vue_type_style_index_0_lang-c11501fc.js";import{_ as u,c as p,w as s,o as y,b as l,U as n,q as o,r as a,W as h,p as _}from"./app-2aa69260.js";import"./YunFooter.vue_vue_type_script_setup_true_lang-38a76163.js";import"./YunCard.vue_vue_type_style_index_0_lang-10fff83e.js";import"./YunPageHeader.vue_vue_type_script_setup_true_lang-b98db666.js";const pn=JSON.parse('{"title":"Linux find 命令详解","description":"","frontmatter":{"title":"Linux find 命令详解","categories":"Linux技术","tags":["基础命令"],"date":"2020-09-29T17:56:20.000Z"},"headers":[],"relativePath":"pages/posts/Linux-find-命令详解.md","path":"/Users/vlinux/vlinux/blog/valaxy/vlinux.github.io/pages/posts/Linux-find-命令详解.md","lastUpdated":1671090556000}'),r=JSON.parse('{"title":"Linux find 命令详解","description":"","frontmatter":{"title":"Linux find 命令详解","categories":"Linux技术","tags":["基础命令"],"date":"2020-09-29T17:56:20.000Z"},"headers":[],"relativePath":"pages/posts/Linux-find-命令详解.md","path":"/Users/vlinux/vlinux/blog/valaxy/vlinux.github.io/pages/posts/Linux-find-命令详解.md","lastUpdated":1671090556000}'),A={name:"pages/posts/Linux-find-命令详解.md",data(){return{data:r,frontmatter:r.frontmatter}},setup(){_("pageData",r)}},D=l("blockquote",null,[l("p",null,[n("Linux 上的 "),l("code",null,"find"),n(" 命令是 "),l("code",null,"findutil"),n(" 软件包的一部分，一般已经默认集成在了几乎所有的发行版中。 find 命令有非常大的灵活性，可以向其指定丰富的搜索条件（如"),l("strong",null,"文件权限"),n("、"),l("strong",null,"属主"),n("、"),l("strong",null,"属组"),n("、"),l("strong",null,"文件类型"),n("、"),l("strong",null,"日期"),n("和"),l("strong",null,"大小"),n("等）来定位系统中的文件和目录。 此外，find 还支持对搜索到的结果进行多种类型的"),l("strong",null,"命令"),n("操作。")])],-1),f={id:"一、简介",tabindex:"-1"},F=l("p",null,[n("find 命令的基本结构如下： "),l("code",null,"find [paths] [expression] [actions]")],-1),C=l("p",null,[n("find 命令接受一个或多个"),l("strong",null,"路径"),n("（"),l("em",null,"paths"),n("）作为搜索范围，并在该路径下"),l("strong",null,"递归"),n("地搜索。即检索完指定的目录后，还会对该目录下的子目录进行检索，以及子目录下的子目录。。。直到到达目录树底部。")],-1),m=l("p",null,[n("默认情况下（不带任何搜索条件），find 命令会返回指定目录下的"),l("strong",null,"所有文件"),n("，所以常常需要通过特定的 "),l("code",null,"expression"),n(" 对结果进行"),l("strong",null,"筛选"),n("。")],-1),g=l("p",null,[n("find 命令默认的 "),l("code",null,"action"),n(" 是将所有检索结果打印至标准输出。可以通过自定义 "),l("code",null,"action"),n(" ，让 find 命令对搜索到的结果执行特定的操作。")],-1),x=l("p",null,"这里先不做详细解释，简单地测试下 find 命令：",-1),b=l("ol",null,[l("li",null,"有如下结构的示例目录 directory")],-1),v=l("div",{class:"language-ruby"},[l("span",{class:"copy"}),l("pre",{class:"shiki material-palenight"},[l("code",null,[l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"$ tree directory")]),n(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"directory")]),n(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"├── file1")]),n(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"├── file2")]),n(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"├── "),l("span",{style:{color:"#82AAFF"}},"sub"),l("span",{style:{color:"#89DDFF"}},"-"),l("span",{style:{color:"#A6ACCD"}},"dir1")]),n(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"│   ├── file1")]),n(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"│   ├── file2")]),n(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"│   └── file3")]),n(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"└── "),l("span",{style:{color:"#82AAFF"}},"sub"),l("span",{style:{color:"#89DDFF"}},"-"),l("span",{style:{color:"#A6ACCD"}},"dir2")]),n(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    ├── file2")]),n(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    └── "),l("span",{style:{color:"#82AAFF"}},"sub"),l("span",{style:{color:"#89DDFF"}},"-"),l("span",{style:{color:"#A6ACCD"}},"subdir1")]),n(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        └── file1")]),n(`
`),l("span",{class:"line"}),n(`
`),l("span",{class:"line"},[l("span",{style:{color:"#F78C6C"}},"3"),l("span",{style:{color:"#A6ACCD"}}," directories"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#F78C6C"}},"7"),l("span",{style:{color:"#A6ACCD"}}," files")]),n(`
`),l("span",{class:"line"})])])],-1),$=l("ol",null,[l("li",null,"默认的 find 命令会列出该目录下的所有文件")],-1),L=l("div",{class:"language-ruby"},[l("span",{class:"copy"}),l("pre",{class:"shiki material-palenight"},[l("code",null,[l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"$ find directory")]),n(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"directory")]),n(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"directory"),l("span",{style:{color:"#89DDFF"}},"/"),l("span",{style:{color:"#82AAFF"}},"sub"),l("span",{style:{color:"#89DDFF"}},"-"),l("span",{style:{color:"#A6ACCD"}},"dir1")]),n(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"directory"),l("span",{style:{color:"#89DDFF"}},"/"),l("span",{style:{color:"#82AAFF"}},"sub"),l("span",{style:{color:"#89DDFF"}},"-"),l("span",{style:{color:"#A6ACCD"}},"dir1"),l("span",{style:{color:"#89DDFF"}},"/"),l("span",{style:{color:"#A6ACCD"}},"file3")]),n(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"directory"),l("span",{style:{color:"#89DDFF"}},"/"),l("span",{style:{color:"#82AAFF"}},"sub"),l("span",{style:{color:"#89DDFF"}},"-"),l("span",{style:{color:"#A6ACCD"}},"dir1"),l("span",{style:{color:"#89DDFF"}},"/"),l("span",{style:{color:"#A6ACCD"}},"file2")]),n(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"directory"),l("span",{style:{color:"#89DDFF"}},"/"),l("span",{style:{color:"#82AAFF"}},"sub"),l("span",{style:{color:"#89DDFF"}},"-"),l("span",{style:{color:"#A6ACCD"}},"dir1"),l("span",{style:{color:"#89DDFF"}},"/"),l("span",{style:{color:"#A6ACCD"}},"file1")]),n(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"directory"),l("span",{style:{color:"#89DDFF"}},"/"),l("span",{style:{color:"#A6ACCD"}},"file2")]),n(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"directory"),l("span",{style:{color:"#89DDFF"}},"/"),l("span",{style:{color:"#82AAFF"}},"sub"),l("span",{style:{color:"#89DDFF"}},"-"),l("span",{style:{color:"#A6ACCD"}},"dir2")]),n(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"directory"),l("span",{style:{color:"#89DDFF"}},"/"),l("span",{style:{color:"#82AAFF"}},"sub"),l("span",{style:{color:"#89DDFF"}},"-"),l("span",{style:{color:"#A6ACCD"}},"dir2"),l("span",{style:{color:"#89DDFF"}},"/"),l("span",{style:{color:"#A6ACCD"}},"file2")]),n(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"directory"),l("span",{style:{color:"#89DDFF"}},"/"),l("span",{style:{color:"#82AAFF"}},"sub"),l("span",{style:{color:"#89DDFF"}},"-"),l("span",{style:{color:"#A6ACCD"}},"dir2"),l("span",{style:{color:"#89DDFF"}},"/"),l("span",{style:{color:"#82AAFF"}},"sub"),l("span",{style:{color:"#89DDFF"}},"-"),l("span",{style:{color:"#A6ACCD"}},"subdir1")]),n(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"directory"),l("span",{style:{color:"#89DDFF"}},"/"),l("span",{style:{color:"#82AAFF"}},"sub"),l("span",{style:{color:"#89DDFF"}},"-"),l("span",{style:{color:"#A6ACCD"}},"dir2"),l("span",{style:{color:"#89DDFF"}},"/"),l("span",{style:{color:"#82AAFF"}},"sub"),l("span",{style:{color:"#89DDFF"}},"-"),l("span",{style:{color:"#A6ACCD"}},"subdir1"),l("span",{style:{color:"#89DDFF"}},"/"),l("span",{style:{color:"#A6ACCD"}},"file1")]),n(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"directory"),l("span",{style:{color:"#89DDFF"}},"/"),l("span",{style:{color:"#A6ACCD"}},"file1")]),n(`
`),l("span",{class:"line"})])])],-1),z=l("ol",null,[l("li",null,"为 find 命令指定 expression 以筛选出特定的文件")],-1),k=l("div",{class:"language-ruby"},[l("span",{class:"copy"}),l("pre",{class:"shiki material-palenight"},[l("code",null,[l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"$ find directory "),l("span",{style:{color:"#89DDFF"}},"-"),l("span",{style:{color:"#A6ACCD"}},"name file2")]),n(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"directory"),l("span",{style:{color:"#89DDFF"}},"/"),l("span",{style:{color:"#82AAFF"}},"sub"),l("span",{style:{color:"#89DDFF"}},"-"),l("span",{style:{color:"#A6ACCD"}},"dir1"),l("span",{style:{color:"#89DDFF"}},"/"),l("span",{style:{color:"#A6ACCD"}},"file2")]),n(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"directory"),l("span",{style:{color:"#89DDFF"}},"/"),l("span",{style:{color:"#A6ACCD"}},"file2")]),n(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"directory"),l("span",{style:{color:"#89DDFF"}},"/"),l("span",{style:{color:"#82AAFF"}},"sub"),l("span",{style:{color:"#89DDFF"}},"-"),l("span",{style:{color:"#A6ACCD"}},"dir2"),l("span",{style:{color:"#89DDFF"}},"/"),l("span",{style:{color:"#A6ACCD"}},"file2")]),n(`
`),l("span",{class:"line"})])])],-1),M=l("ol",null,[l("li",null,[n("为 find 命令指定特殊的 action（此处 "),l("code",null,"-delete"),n(" 表示删除搜索结果）")])],-1),w=l("div",{class:"language-ruby"},[l("span",{class:"copy"}),l("pre",{class:"shiki material-palenight"},[l("code",null,[l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"$ find directory "),l("span",{style:{color:"#89DDFF"}},"-"),l("span",{style:{color:"#A6ACCD"}},"name file2 "),l("span",{style:{color:"#89DDFF"}},"-"),l("span",{style:{color:"#A6ACCD"}},"delete")]),n(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"$ find directory")]),n(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"directory")]),n(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"directory"),l("span",{style:{color:"#89DDFF"}},"/"),l("span",{style:{color:"#82AAFF"}},"sub"),l("span",{style:{color:"#89DDFF"}},"-"),l("span",{style:{color:"#A6ACCD"}},"dir1")]),n(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"directory"),l("span",{style:{color:"#89DDFF"}},"/"),l("span",{style:{color:"#82AAFF"}},"sub"),l("span",{style:{color:"#89DDFF"}},"-"),l("span",{style:{color:"#A6ACCD"}},"dir1"),l("span",{style:{color:"#89DDFF"}},"/"),l("span",{style:{color:"#A6ACCD"}},"file3")]),n(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"directory"),l("span",{style:{color:"#89DDFF"}},"/"),l("span",{style:{color:"#82AAFF"}},"sub"),l("span",{style:{color:"#89DDFF"}},"-"),l("span",{style:{color:"#A6ACCD"}},"dir1"),l("span",{style:{color:"#89DDFF"}},"/"),l("span",{style:{color:"#A6ACCD"}},"file1")]),n(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"directory"),l("span",{style:{color:"#89DDFF"}},"/"),l("span",{style:{color:"#82AAFF"}},"sub"),l("span",{style:{color:"#89DDFF"}},"-"),l("span",{style:{color:"#A6ACCD"}},"dir2")]),n(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"directory"),l("span",{style:{color:"#89DDFF"}},"/"),l("span",{style:{color:"#82AAFF"}},"sub"),l("span",{style:{color:"#89DDFF"}},"-"),l("span",{style:{color:"#A6ACCD"}},"dir2"),l("span",{style:{color:"#89DDFF"}},"/"),l("span",{style:{color:"#82AAFF"}},"sub"),l("span",{style:{color:"#89DDFF"}},"-"),l("span",{style:{color:"#A6ACCD"}},"subdir1")]),n(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"directory"),l("span",{style:{color:"#89DDFF"}},"/"),l("span",{style:{color:"#82AAFF"}},"sub"),l("span",{style:{color:"#89DDFF"}},"-"),l("span",{style:{color:"#A6ACCD"}},"dir2"),l("span",{style:{color:"#89DDFF"}},"/"),l("span",{style:{color:"#82AAFF"}},"sub"),l("span",{style:{color:"#89DDFF"}},"-"),l("span",{style:{color:"#A6ACCD"}},"subdir1"),l("span",{style:{color:"#89DDFF"}},"/"),l("span",{style:{color:"#A6ACCD"}},"file1")]),n(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"directory"),l("span",{style:{color:"#89DDFF"}},"/"),l("span",{style:{color:"#A6ACCD"}},"file1")]),n(`
`),l("span",{class:"line"})])])],-1),G={id:"二、搜索条件（expression）",tabindex:"-1"},P={id:"_1-根据文件名检索",tabindex:"-1"},N=l("p",null,[n("find 命令中的 "),l("code",null,"-name"),n(" 选项可以根据文件名称进行检索（"),l("strong",null,"区分大小写"),n("）。如需要忽略文件名中的大小写，可以使用 "),l("code",null,"-iname"),n(" 选项。")],-1),S=l("p",null,[l("code",null,"-name"),n(" 和 "),l("code",null,"-iname"),n(" 两个选项都支持 "),l("strong",null,"wildcards"),n(" 。如：")],-1),U=l("ul",null,[l("li",null,[l("code",null,"?"),n(" 可以表示任意一个单一的符号")]),l("li",null,[l("code",null,"*"),n(" 可以表示任意数量（包括 0）的未知符号")])],-1),B=l("p",null,[l("code",null,"find /usr -name '*.txt'"),n(" 查找 /usr 目录下所有文件名以 "),l("code",null,".txt"),n(" 结尾的文件 "),l("code",null,"find /usr -name '????'"),n(" 查找 /usr 目录下所有文件名刚好为 4 个字符的文件")],-1),T=l("p",null,[n("有些时候，你需要在搜索时匹配某个文件或目录的"),l("strong",null,"完整路径"),n("，而不仅仅是匹配文件名。可以使用 "),l("code",null,"-path"),n(" 或 "),l("code",null,"-ipath"),n(" 选项。")],-1),V=l("p",null,[n("如查找 /usr 下所有文件名以 "),l("code",null,".txt"),n(" 结尾的文件或目录，且该文件的父目录必须是 "),l("code",null,"src"),n("。可以使用以下命令： "),l("code",null,"find /usr -path '*/src/*.txt'")],-1),q={id:"_2-根据文件类型检索",tabindex:"-1"},J=l("p",null,[n("如果只想搜索得到文件"),l("strong",null,"或"),n("目录，即不想它们同时出现在结果中。可以使用 "),l("code",null,"-type"),n(" 选项指定文件类型。")],-1),O=l("p",null,[l("code",null,"-type"),n(" 选项最常用的参数如下：")],-1),Z=l("ul",null,[l("li",null,"f: 文件"),l("li",null,"d: 目录"),l("li",null,"l: 符号链接")],-1),K=l("p",null,[l("code",null,"find /usr -type d -name 'python*'"),n(" 检索 /usr 下所有文件名以 "),l("code",null,"python"),n(" 开头的"),l("strong",null,"目录")],-1),W={id:"_3-检索空文件",tabindex:"-1"},j=l("p",null,[n("find 命令支持 "),l("code",null,"-empty"),n(" 选项用来检索"),l("strong",null,"为空"),n("的文件或目录。空文件即文件里没有任何内容，空目录即目录中没有任何文件或子目录。")],-1),E=l("p",null,[l("code",null,"find ~ -type d -empty"),n(" 检索用户主目录下所有的空目录")],-1),H={id:"_4-反义匹配",tabindex:"-1"},I=l("p",null,[n("find 命令也允许用户对当前的匹配条件进行**“反义”"),l("strong",null,"（类似于"),n("逻辑非**操作）。")],-1),Q=l("p",null,[n("如需要检索 /usr 下所有文件名"),l("strong",null,"不"),n("以 "),l("code",null,".txt"),n(" 为后缀的文件。可以使用以下命令： "),l("code",null,"find /usr -type f ! -name '*.txt'")],-1),R=l("p",null,[n("也可以“翻转”任何其他的筛选条件，如： "),l("code",null,"find /usr -type f ! -empty"),n(" 检索 /usr 下所有内容不为空的文件")],-1),X={id:"_5-根据文件的所属权检索",tabindex:"-1"},Y=l("p",null,[n("为了检索归属于特定用户的文件或目录，可以使用 "),l("code",null,"-user"),n(" 选项。")],-1),ll=l("p",null,[l("code",null,"find / -type f -user starky"),n(" 检索根目录下所有属主为 starky 的文件")],-1),nl=l("p",null,[n("类似于 "),l("code",null,"-user"),n("选项，"),l("code",null,"-group"),n(" 选项则可以根据文件或目录的"),l("strong",null,"属组"),n("进行检索。")],-1),sl={id:"_6-根据时间日期进行检索",tabindex:"-1"},el=l("p",null,"有些时候，需要根据文件创建或修改的时间进行检索。",-1),ol=l("p",null,"Linux 系统中，与文件相关联的时间参数有以下三种：",-1),tl=l("ul",null,[l("li",null,"修改时间（Modification time）：最后一次文件内容有过更改的时间点"),l("li",null,"访问时间（Access time）：最后一次文件有被读取过的时间点"),l("li",null,[n("变更时间（Change time）：最后一次文件有被"),l("strong",null,"变更"),n("过的时间点（如内容被修改，或权限等 metadata 被修改）")])],-1),al=l("p",null,[n("与此对应的是 find 命令中的 "),l("code",null,"-mtime"),n("，"),l("code",null,"-atime"),n(" 和 "),l("code",null,"-ctime"),n(" 三个选项。")],-1),rl=l("p",null,"这三个选项的使用遵循以下示例中的规则：",-1),cl=l("ul",null,[l("li",null,[l("code",null,"-mtime 2"),n("：该文件 2 天前被修改过")]),l("li",null,[l("code",null,"-mtime -2"),n("：该文件 2 天"),l("strong",null,"以内"),n("被修改过")]),l("li",null,[l("code",null,"-mtime +2"),n("：该文件距离上次修改已经"),l("strong",null,"超过"),n(" 2 天时间")])],-1),dl=l("p",null,[l("code",null,"find /usr -type f -mtime 2"),n(" 检索 /usr 下两天前被修改过的文件")],-1),il=l("p",null,[n("如果觉得 "),l("code",null,"-mtime"),n(" 等选项以"),l("strong",null,"天"),n("为单位时间有点长，还可以使用 "),l("code",null,"-mmin"),n("，"),l("code",null,"-amin"),n("，"),l("code",null,"-cmin"),n(" 三个选项： "),l("code",null,"find /usr -type f -mtime +50 -mtime -100"),n(" 检索 /usr 下 50 到 100 天之前修改过的文件 "),l("code",null,"find /usr -type f -mtime 2 -amin 5"),n(" 检索 /usr 下两天前被修改过且 5 分钟前又读取过的文件")],-1),ul={id:"_7-根据文件大小检索",tabindex:"-1"},pl=l("p",null,[l("code",null,"-size"),n(" 选项允许用户通过文件大小进行搜索（只适用于文件，目录没有大小……）。")],-1),yl=l("p",null,"表示文件大小的单位由以下字符组成：",-1),hl=l("ul",null,[l("li",null,[l("code",null,"c"),n("：字节")]),l("li",null,[l("code",null,"k"),n("：Kb")]),l("li",null,[l("code",null,"M"),n("：Mb")]),l("li",null,[l("code",null,"G"),n("：Gb")])],-1),_l=l("p",null,[n("另外，还可以使用 "),l("code",null,"+"),n(" 或 "),l("code",null,"-"),n(" 符号表示"),l("strong",null,"大于"),n("或"),l("strong",null,"小于"),n("当前条件。")],-1),Al=l("p",null,[l("code",null,"find / -size +1G"),n(" 检索文件大小高于 1 GB 的文件")],-1),Dl={id:"_8-根据文件权限检索",tabindex:"-1"},fl=l("p",null,[n("find 命令可以使用 "),l("code",null,"-perm"),n(" 选项以文件权限为依据进行搜索。")],-1),Fl={id:"使用符号形式",tabindex:"-1"},Cl=l("p",null,[n("如需要检索 /usr 目录下权限为 "),l("code",null,"rwxr-xr-x"),n(" 的文件，可以使用以下命令： "),l("code",null,"find /usr -perm u=rwx,g=rx,o=rx")],-1),ml=l("p",null,[n("搜索 /usr 目录下所有权限为 "),l("code",null,"r-xr-xr-x"),n("（即系统中的所有用户都只有读写权限）的文件和目录，可以使用以下命令： "),l("code",null,"find /usr -perm a=rx")],-1),gl=l("p",null,[n("很多时候，我们只想匹配文件权限的一个"),l("strong",null,"子集"),n("。比如，检索可以直接被任何用户执行的文件，即只关心文件的执行权限，而不用管其读写权限是什么。")],-1),xl=l("p",null,[n("上述的需求可以通过以下命令实现："),l("code",null,"find / -type f -perm /a=x"),n(" 其中 "),l("code",null,"a=x"),n(" 前面的 "),l("code",null,"/"),n(" 符号即用来表示只匹配权限的某个子集（执行权限），而不用关心其他权限的具体设置。")],-1),bl={id:"使用数字形式",tabindex:"-1"},vl=l("p",null,[l("code",null,"-perm"),n(" 选项也支持数字形式的文件权限标记。")],-1),$l=l("p",null,[l("code",null,"find /usr -perm 644"),n(" 搜索 /usr 目录下权限为 "),l("strong",null,"644"),n("（即 "),l("code",null,"rwxr-xr-x"),n("）的文件")],-1),Ll={id:"_9-限制遍历的层数",tabindex:"-1"},zl=l("p",null,[n("find 命令默认是以"),l("strong",null,"递归"),n("的方式检索项目的，这有时候会导致得到的结果数量非常巨大。可以使用 "),l("code",null,"-maxdepth"),n(" 限制 find 命令递归的层数。")],-1),kl=l("p",null,[l("code",null,"find / -maxdepth 3"),n(" 搜索时向下递归的层数最大为 3")],-1),Ml={id:"_10-逻辑组合",tabindex:"-1"},wl=l("p",null,[n("在之前的例子中有出现多个搜索条件的"),l("strong",null,"组合"),n("以及对某个搜索条件的"),l("strong",null,"反转"),n("。 实际上 find 命令支持 "),l("strong",null,"“and”"),n(" 和 "),l("strong",null,"“or”"),n(" 两种逻辑运算，对应的命令选项分别是 "),l("code",null,"-a"),n(" 和 "),l("code",null,"-o"),n("。通过这两个选项可以对搜索条件进行更复杂的组合。")],-1),Gl=l("p",null,[n("此外还可以使用"),l("strong",null,"小括号"),n("对搜索条件进行"),l("strong",null,"分组"),n("。注意 "),l("code",null,"find"),n(" 命令中的小括号常需要用"),l("strong",null,"单引号"),n("包裹起来。因小括号在 Shell 中有特殊的含义。")],-1),Pl=l("p",null,[n("如检索 /usr 下文件名以 "),l("code",null,"python"),n(" 开头且类型为目录的文件 "),l("code",null,"find /usr -type d -name 'python*'")],-1),Nl=l("p",null,[n("该命令等同于： "),l("code",null,"find /usr -type d -a -name 'python*'")],-1),Sl=l("p",null,[n("更复杂的组合形式如： "),l("code",null,"find / '(' -mmin -5 -o -mtime +50 ')' -a -type f")],-1),Ul={id:"三、对搜索结果执行命令",tabindex:"-1"},Bl={id:"_1-删除文件",tabindex:"-1"},Tl=l("p",null,[l("code",null,"-delete"),n(" 选项可以用来删除搜索到的文件和目录。")],-1),Vl=l("p",null,[n("如删除 home 目录下所有的空目录： "),l("code",null,"find ~ -type d -empty -delete")],-1),ql={id:"_2-执行自定义命令",tabindex:"-1"},Jl=l("p",null,[l("code",null,"-exec"),n(" 选项可以对搜索到的结果执行特定的命令。")],-1),Ol=l("p",null,[n("如需要将 home 目录下所有的 MP3 音频文件复制到移动存储设备（假设路径是 "),l("code",null,"/media/MyDrive"),n("），可使用下面的命令： "),l("code",null,"find ~ -type f -name '*.mp3' -exec cp {} /media/MyDrive ';'")],-1),Zl=l("p",null,[n("其中的"),l("strong",null,"大括号"),n("（"),l("code",null,"{}"),n("）作为检索到的文件的 "),l("strong",null,"占位符"),n(" ，而分号（ "),l("code",null,";"),n("）作为命令结束的标志。因为分号是 Shell 中有特殊含义的符号，所以需要使用单引号括起来。 每当 find 命令检索到一个符合条件的文件，会使用其完整路径取代命令中的 "),l("code",null,"{}"),n("，然后执行 "),l("code",null,"-exec"),n(" 后面的命令一次。")],-1),Kl=l("p",null,[n("另一个很重要的用法是，在多个文件中检索某个指定的字符串。 如在用户主目录下的所有文件中检索字符串 "),l("code",null,"hello"),n(" ，可以使用如下命令： "),l("code",null,"find ~ -type f -exec grep -l hello {} ';'")],-1),Wl={id:"exec-选项中的-符号",tabindex:"-1"},jl=l("p",null,[n("创建 Gzip 格式的压缩文件的命令为："),l("code",null,"tar -czvf filename.tar.gz <list of files>")],-1),El=l("p",null,[n("现在假设需要将用户主目录下所有的 MP3 文件添加到压缩包 "),l("code",null,"music.tar.gz"),n(" 中，直观的感觉是，其命令应为如下形式： "),l("code",null,"find ~ -type f -name '*.mp3' -exec tar -czvf music.tar.gz {} ';'")],-1),Hl=l("p",null,[n("实际情况是，这样得到的 "),l("code",null,"music.tar.gz"),n(" 其实只包含一个 MP3 文件。 原因是 find 命令"),l("strong",null,"每次"),n("发现一个音频文件，都会再执行一次 "),l("code",null,"-exec"),n(" 选项后面的压缩命令。导致先前生成的压缩包被覆盖。")],-1),Il=l("p",null,[n("可以先让 find 命令检索出所有符合条件的音频文件，再将得到的"),l("strong",null,"文件列表"),n("传递给后面的压缩命令。完整的命令如下： "),l("code",null,"find ~ -type f -name '*.mp3' -exec tar -czvf music.tar.gz {} +")],-1),Ql={id:"显示文件信息",tabindex:"-1"},Rl=l("p",null,[n("如果想浏览搜索到的文件（目录）的详细信息（如权限和大小等），可以直接使用 "),l("code",null,"-ls"),n(" 选项。")],-1),Xl=l("p",null,[l("code",null,"find / -type file -size +1G -ls"),n(" 浏览所有 1G 以上大小的文件的详细信息")],-1),Yl={id:"四、常用参数汇总",tabindex:"-1"},ln=l("table",null,[l("thead",null,[l("tr",null,[l("th",null,"参数"),l("th",null,"解析")])]),l("tbody",null,[l("tr",null,[l("td",null,[n("-atime "),l("em",null,"n[smhdw]")]),l("td",null,"距离文件上次被访问时的时间间隔")]),l("tr",null,[l("td",null,[n("-ctime "),l("em",null,"n[smhdw]")]),l("td",null,"距离文件创建时的时间间隔")]),l("tr",null,[l("td",null,"-delete"),l("td",null,"删除检索到的文件")]),l("tr",null,[l("td",null,[n("-depth "),l("em",null,"n")]),l("td",null,"检索深度为 n 的文件，即位于指定目录以下 n 层的文件")]),l("tr",null,[l("td",null,"-empty"),l("td",null,"检索空文件或空目录")]),l("tr",null,[l("td",null,[n("-fstype "),l("em",null,"type")]),l("td",null,"指定文件所在的文件系统的类型")]),l("tr",null,[l("td",null,[n("-group "),l("em",null,"gname")]),l("td",null,"指定文件的属组")]),l("tr",null,[l("td",null,[n("-iname "),l("em",null,"pattern")]),l("td",null,[n("同 "),l("code",null,"-name"),n("，忽略大小写")])]),l("tr",null,[l("td",null,[n("-ipath "),l("em",null,"pattern")]),l("td",null,[n("同 "),l("code",null,"-path"),n("，忽略大小写")])]),l("tr",null,[l("td",null,"-ls"),l("td",null,"打印搜索到的文件的详细信息")]),l("tr",null,[l("td",null,[n("-maxdepth "),l("em",null,"n")]),l("td",null,"指定递归的最大层数为 n")]),l("tr",null,[l("td",null,[n("-mtime "),l("em",null,"n[smhdw]")]),l("td",null,"距离文件上次发生变更时的时间间隔")]),l("tr",null,[l("td",null,[n("-name "),l("em",null,"pattern")]),l("td",null,[n("搜索时使用 "),l("code",null,"pattern"),n(" 对文件名进行匹配")])]),l("tr",null,[l("td",null,[n("-path "),l("em",null,"pattern")]),l("td",null,[n("搜索时使用 "),l("code",null,"pattern"),n(" 对文件路径进行匹配")])]),l("tr",null,[l("td",null,[n("-perm "),l("em",null,"mode")]),l("td",null,"根据文件权限搜索")]),l("tr",null,[l("td",null,[n("-size "),l("em",null,"n[ckMGTP]")]),l("td",null,"根据文件大小搜索")]),l("tr",null,[l("td",null,[n("-type "),l("em",null,"t")]),l("td",null,"根据文件类型搜索")]),l("tr",null,[l("td",null,[n("-user "),l("em",null,"uname")]),l("td",null,"指定文件的属主")])])],-1);function nn(t,sn,en,on,c,tn){const e=h,d=i;return y(),p(d,{frontmatter:c.frontmatter,data:c.data},{"main-content-md":s(()=>[D,l("h4",f,[n("一、简介 "),o(e,{class:"header-anchor",href:"#一、简介","aria-hidden":"true"},{default:s(()=>[n("#")]),_:1})]),F,C,m,g,x,b,v,$,L,z,k,M,w,l("h4",G,[n("二、搜索条件（expression） "),o(e,{class:"header-anchor",href:"#二、搜索条件（expression）","aria-hidden":"true"},{default:s(()=>[n("#")]),_:1})]),l("h5",P,[n("1. 根据文件名检索 "),o(e,{class:"header-anchor",href:"#_1-根据文件名检索","aria-hidden":"true"},{default:s(()=>[n("#")]),_:1})]),N,S,U,B,T,V,l("h5",q,[n("2. 根据文件类型检索 "),o(e,{class:"header-anchor",href:"#_2-根据文件类型检索","aria-hidden":"true"},{default:s(()=>[n("#")]),_:1})]),J,O,Z,K,l("h5",W,[n("3. 检索空文件 "),o(e,{class:"header-anchor",href:"#_3-检索空文件","aria-hidden":"true"},{default:s(()=>[n("#")]),_:1})]),j,E,l("h5",H,[n("4. 反义匹配 "),o(e,{class:"header-anchor",href:"#_4-反义匹配","aria-hidden":"true"},{default:s(()=>[n("#")]),_:1})]),I,Q,R,l("h5",X,[n("5. 根据文件的所属权检索 "),o(e,{class:"header-anchor",href:"#_5-根据文件的所属权检索","aria-hidden":"true"},{default:s(()=>[n("#")]),_:1})]),Y,ll,nl,l("h5",sl,[n("6. 根据时间日期进行检索 "),o(e,{class:"header-anchor",href:"#_6-根据时间日期进行检索","aria-hidden":"true"},{default:s(()=>[n("#")]),_:1})]),el,ol,tl,al,rl,cl,dl,il,l("h5",ul,[n("7. 根据文件大小检索 "),o(e,{class:"header-anchor",href:"#_7-根据文件大小检索","aria-hidden":"true"},{default:s(()=>[n("#")]),_:1})]),pl,yl,hl,_l,Al,l("h5",Dl,[n("8. 根据文件权限检索 "),o(e,{class:"header-anchor",href:"#_8-根据文件权限检索","aria-hidden":"true"},{default:s(()=>[n("#")]),_:1})]),fl,l("h6",Fl,[n("使用符号形式 "),o(e,{class:"header-anchor",href:"#使用符号形式","aria-hidden":"true"},{default:s(()=>[n("#")]),_:1})]),Cl,ml,gl,xl,l("h6",bl,[n("使用数字形式 "),o(e,{class:"header-anchor",href:"#使用数字形式","aria-hidden":"true"},{default:s(()=>[n("#")]),_:1})]),vl,$l,l("h5",Ll,[n("9. 限制遍历的层数 "),o(e,{class:"header-anchor",href:"#_9-限制遍历的层数","aria-hidden":"true"},{default:s(()=>[n("#")]),_:1})]),zl,kl,l("h5",Ml,[n("10. 逻辑组合 "),o(e,{class:"header-anchor",href:"#_10-逻辑组合","aria-hidden":"true"},{default:s(()=>[n("#")]),_:1})]),wl,Gl,Pl,Nl,Sl,l("h4",Ul,[n("三、对搜索结果执行命令 "),o(e,{class:"header-anchor",href:"#三、对搜索结果执行命令","aria-hidden":"true"},{default:s(()=>[n("#")]),_:1})]),l("h5",Bl,[n("1. 删除文件 "),o(e,{class:"header-anchor",href:"#_1-删除文件","aria-hidden":"true"},{default:s(()=>[n("#")]),_:1})]),Tl,Vl,l("h5",ql,[n("2. 执行自定义命令 "),o(e,{class:"header-anchor",href:"#_2-执行自定义命令","aria-hidden":"true"},{default:s(()=>[n("#")]),_:1})]),Jl,Ol,Zl,Kl,l("h6",Wl,[n("-exec 选项中的 + 符号 "),o(e,{class:"header-anchor",href:"#exec-选项中的-符号","aria-hidden":"true"},{default:s(()=>[n("#")]),_:1})]),jl,El,Hl,Il,l("h6",Ql,[n("显示文件信息 "),o(e,{class:"header-anchor",href:"#显示文件信息","aria-hidden":"true"},{default:s(()=>[n("#")]),_:1})]),Rl,Xl,l("h4",Yl,[n("四、常用参数汇总 "),o(e,{class:"header-anchor",href:"#四、常用参数汇总","aria-hidden":"true"},{default:s(()=>[n("#")]),_:1})]),ln]),"main-header":s(()=>[a(t.$slots,"main-header")]),"main-header-after":s(()=>[a(t.$slots,"main-header-after")]),"main-nav":s(()=>[a(t.$slots,"main-nav")]),"main-content":s(()=>[a(t.$slots,"main-content")]),"main-content-after":s(()=>[a(t.$slots,"main-content-after")]),"main-nav-before":s(()=>[a(t.$slots,"main-nav-before")]),"main-nav-after":s(()=>[a(t.$slots,"main-nav-after")]),comment:s(()=>[a(t.$slots,"comment")]),footer:s(()=>[a(t.$slots,"footer")]),aside:s(()=>[a(t.$slots,"aside")]),"aside-custom":s(()=>[a(t.$slots,"aside-custom")]),default:s(()=>[a(t.$slots,"default")]),_:3},8,["frontmatter","data"])}const yn=u(A,[["render",nn]]);export{pn as __pageData,yn as default};
