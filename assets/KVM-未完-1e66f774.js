import{_ as p}from"./ValaxyMain.vue_vue_type_style_index_0_lang-5378ee09.js";import{_ as d,c as D,w as e,o as h,b as s,U as l,q as n,r as t,W as C,p as y}from"./app-66a727e0.js";import"./YunFooter.vue_vue_type_script_setup_true_lang-d0a0ac9d.js";import"./YunCard.vue_vue_type_style_index_0_lang-28bca03a.js";import"./YunPageHeader.vue_vue_type_script_setup_true_lang-2b33be47.js";const ve=JSON.parse('{"title":"KVM-未完","description":"","frontmatter":{"title":"KVM-未完","categories":"DevOps","tags":["KVM"],"date":"2020-03-19T15:26:00.000Z"},"headers":[{"level":2,"title":"1.VM虚拟机开启CPU虚拟化功能","slug":"_1-vm虚拟机开启cpu虚拟化功能","link":"#_1-vm虚拟机开启cpu虚拟化功能","children":[]},{"level":2,"title":"2.安装软件","slug":"_2-安装软件","link":"#_2-安装软件","children":[]},{"level":2,"title":"3.创建虚拟机","slug":"_3-创建虚拟机","link":"#_3-创建虚拟机","children":[]},{"level":2,"title":"4.连接虚拟机","slug":"_4-连接虚拟机","link":"#_4-连接虚拟机","children":[]},{"level":2,"title":"1.查看虚拟机","slug":"_1-查看虚拟机","link":"#_1-查看虚拟机","children":[]},{"level":2,"title":"2.启动虚拟机","slug":"_2-启动虚拟机","link":"#_2-启动虚拟机","children":[]},{"level":2,"title":"3.重启虚拟机","slug":"_3-重启虚拟机","link":"#_3-重启虚拟机","children":[]},{"level":2,"title":"4.关闭虚拟机","slug":"_4-关闭虚拟机","link":"#_4-关闭虚拟机","children":[]},{"level":2,"title":"5.查看配置文件","slug":"_5-查看配置文件","link":"#_5-查看配置文件","children":[]},{"level":2,"title":"6.导出配置文件","slug":"_6-导出配置文件","link":"#_6-导出配置文件","children":[]},{"level":2,"title":"7.删除虚拟机","slug":"_7-删除虚拟机","link":"#_7-删除虚拟机","children":[]},{"level":2,"title":"8.导入虚拟机","slug":"_8-导入虚拟机","link":"#_8-导入虚拟机","children":[]},{"level":2,"title":"9.虚拟机重命名","slug":"_9-虚拟机重命名","link":"#_9-虚拟机重命名","children":[]},{"level":2,"title":"10.主机挂起","slug":"_10-主机挂起","link":"#_10-主机挂起","children":[]},{"level":2,"title":"11.恢复主机","slug":"_11-恢复主机","link":"#_11-恢复主机","children":[]},{"level":2,"title":"12.kvm虚拟机开机启动","slug":"_12-kvm虚拟机开机启动","link":"#_12-kvm虚拟机开机启动","children":[]},{"level":2,"title":"13.小项目：","slug":"_13-小项目：","link":"#_13-小项目：","children":[{"level":3,"title":"13.1.停止要迁移的虚拟机","slug":"_13-1-停止要迁移的虚拟机","link":"#_13-1-停止要迁移的虚拟机","children":[]},{"level":3,"title":"13.2.创建数据目录并移动磁盘文件","slug":"_13-2-创建数据目录并移动磁盘文件","link":"#_13-2-创建数据目录并移动磁盘文件","children":[]},{"level":3,"title":"13.3.使用edit命令修改配置文件","slug":"_13-3-使用edit命令修改配置文件","link":"#_13-3-使用edit命令修改配置文件","children":[]},{"level":3,"title":"13.4.启动虚拟机","slug":"_13-4-启动虚拟机","link":"#_13-4-启动虚拟机","children":[]}]},{"level":2,"title":"1.VNC","slug":"_1-vnc","link":"#_1-vnc","children":[]},{"level":2,"title":"2.SSH","slug":"_2-ssh","link":"#_2-ssh","children":[]},{"level":2,"title":"3.console显示","slug":"_3-console显示","link":"#_3-console显示","children":[]},{"level":2,"title":"1.虚拟机磁盘格式介绍","slug":"_1-虚拟机磁盘格式介绍","link":"#_1-虚拟机磁盘格式介绍","children":[]},{"level":2,"title":"2.查看磁盘信息","slug":"_2-查看磁盘信息","link":"#_2-查看磁盘信息","children":[]},{"level":2,"title":"3.创建磁盘","slug":"_3-创建磁盘","link":"#_3-创建磁盘","children":[]},{"level":2,"title":"4.查看磁盘信息","slug":"_4-查看磁盘信息","link":"#_4-查看磁盘信息","children":[]},{"level":2,"title":"5.调整磁盘容量: 只能加不能减","slug":"_5-调整磁盘容量-只能加不能减","link":"#_5-调整磁盘容量-只能加不能减","children":[]},{"level":2,"title":"6.磁盘格式转换","slug":"_6-磁盘格式转换","link":"#_6-磁盘格式转换","children":[{"level":3,"title":"6.1.将虚拟机关机","slug":"_6-1-将虚拟机关机","link":"#_6-1-将虚拟机关机","children":[]},{"level":3,"title":"6.2.转换磁盘格式","slug":"_6-2-转换磁盘格式","link":"#_6-2-转换磁盘格式","children":[]},{"level":3,"title":"6.3.编辑配置文件修改为qcow2格式","slug":"_6-3-编辑配置文件修改为qcow2格式","link":"#_6-3-编辑配置文件修改为qcow2格式","children":[]},{"level":3,"title":"6.4.重新启动","slug":"_6-4-重新启动","link":"#_6-4-重新启动","children":[]}]},{"level":2,"title":"1.查看快照","slug":"_1-查看快照","link":"#_1-查看快照","children":[]},{"level":2,"title":"2.创建快照","slug":"_2-创建快照","link":"#_2-创建快照","children":[]},{"level":2,"title":"3.恢复快照","slug":"_3-恢复快照","link":"#_3-恢复快照","children":[]},{"level":2,"title":"4.删除快照","slug":"_4-删除快照","link":"#_4-删除快照","children":[]},{"level":2,"title":"1.完整克隆","slug":"_1-完整克隆","link":"#_1-完整克隆","children":[]},{"level":2,"title":"2.链接克隆","slug":"_2-链接克隆","link":"#_2-链接克隆","children":[{"level":3,"title":"2.1 生成虚拟机磁盘文件","slug":"_2-1-生成虚拟机磁盘文件","link":"#_2-1-生成虚拟机磁盘文件","children":[]},{"level":3,"title":"2.2 查看磁盘信息","slug":"_2-2-查看磁盘信息","link":"#_2-2-查看磁盘信息","children":[]},{"level":3,"title":"2.3 生成虚拟机配置文件","slug":"_2-3-生成虚拟机配置文件","link":"#_2-3-生成虚拟机配置文件","children":[]},{"level":3,"title":"2.3 导入配置文件","slug":"_2-3-导入配置文件","link":"#_2-3-导入配置文件","children":[]},{"level":3,"title":"2.4 启动虚拟机","slug":"_2-4-启动虚拟机","link":"#_2-4-启动虚拟机","children":[]}]},{"level":2,"title":"1.创建桥接网卡","slug":"_1-创建桥接网卡","link":"#_1-创建桥接网卡","children":[]},{"level":2,"title":"2.连接克隆新磁盘","slug":"_2-连接克隆新磁盘","link":"#_2-连接克隆新磁盘","children":[]},{"level":2,"title":"3.创建新虚拟机","slug":"_3-创建新虚拟机","link":"#_3-创建新虚拟机","children":[]},{"level":2,"title":"4.登录虚拟机查看网卡信息","slug":"_4-登录虚拟机查看网卡信息","link":"#_4-登录虚拟机查看网卡信息","children":[]},{"level":2,"title":"5.在其他主机ping测试","slug":"_5-在其他主机ping测试","link":"#_5-在其他主机ping测试","children":[]},{"level":2,"title":"1.热添加硬盘","slug":"_1-热添加硬盘","link":"#_1-热添加硬盘","children":[{"level":3,"title":"1.1 创建磁盘","slug":"_1-1-创建磁盘","link":"#_1-1-创建磁盘","children":[]},{"level":3,"title":"1.2 临时生效添加","slug":"_1-2-临时生效添加","link":"#_1-2-临时生效添加","children":[]},{"level":3,"title":"1.3 虚拟机格式化并挂载","slug":"_1-3-虚拟机格式化并挂载","link":"#_1-3-虚拟机格式化并挂载","children":[]},{"level":3,"title":"1.4 永久生效添加","slug":"_1-4-永久生效添加","link":"#_1-4-永久生效添加","children":[]}]},{"level":2,"title":"2.剥离磁盘","slug":"_2-剥离磁盘","link":"#_2-剥离磁盘","children":[{"level":3,"title":"2.1 临时剥离","slug":"_2-1-临时剥离","link":"#_2-1-临时剥离","children":[]},{"level":3,"title":"2.2 永久剥离","slug":"_2-2-永久剥离","link":"#_2-2-永久剥离","children":[]}]},{"level":2,"title":"3.调整磁盘大小","slug":"_3-调整磁盘大小","link":"#_3-调整磁盘大小","children":[{"level":3,"title":"3.1 调整磁盘大小","slug":"_3-1-调整磁盘大小","link":"#_3-1-调整磁盘大小","children":[]},{"level":3,"title":"3.2 添加到虚拟机并查看","slug":"_3-2-添加到虚拟机并查看","link":"#_3-2-添加到虚拟机并查看","children":[]},{"level":3,"title":"3.3 调整磁盘信息","slug":"_3-3-调整磁盘信息","link":"#_3-3-调整磁盘信息","children":[]}]},{"level":2,"title":"1.临时添加","slug":"_1-临时添加","link":"#_1-临时添加","children":[]},{"level":2,"title":"2.永久生效","slug":"_2-永久生效","link":"#_2-永久生效","children":[]},{"level":2,"title":"3,临时剥离","slug":"_3-临时剥离","link":"#_3-临时剥离","children":[]},{"level":2,"title":"4.永久剥离","slug":"_4-永久剥离","link":"#_4-永久剥离","children":[]},{"level":2,"title":"1.创建虚拟机时直接添加最大内存参数","slug":"_1-创建虚拟机时直接添加最大内存参数","link":"#_1-创建虚拟机时直接添加最大内存参数","children":[]},{"level":2,"title":"2.如果创建虚拟机的时候没有设置最大内存限制，执行如下操作添加配置","slug":"_2-如果创建虚拟机的时候没有设置最大内存限制，执行如下操作添加配置","link":"#_2-如果创建虚拟机的时候没有设置最大内存限制，执行如下操作添加配置","children":[]},{"level":2,"title":"3.临时添加","slug":"_3-临时添加","link":"#_3-临时添加","children":[]},{"level":2,"title":"4.永久增大内存","slug":"_4-永久增大内存","link":"#_4-永久增大内存","children":[]},{"level":2,"title":"1.编辑配置文件","slug":"_1-编辑配置文件","link":"#_1-编辑配置文件","children":[]},{"level":2,"title":"2.添加cpu核数","slug":"_2-添加cpu核数","link":"#_2-添加cpu核数","children":[]},{"level":2,"title":"3.永久添加cpu核数","slug":"_3-永久添加cpu核数","link":"#_3-永久添加cpu核数","children":[]}],"relativePath":"pages/posts/KVM-未完.md","path":"/Users/vlinux/vlinux/blog/valaxy/vlinux.github.io/pages/posts/KVM-未完.md","lastUpdated":1671091756000}'),c=JSON.parse('{"title":"KVM-未完","description":"","frontmatter":{"title":"KVM-未完","categories":"DevOps","tags":["KVM"],"date":"2020-03-19T15:26:00.000Z"},"headers":[{"level":2,"title":"1.VM虚拟机开启CPU虚拟化功能","slug":"_1-vm虚拟机开启cpu虚拟化功能","link":"#_1-vm虚拟机开启cpu虚拟化功能","children":[]},{"level":2,"title":"2.安装软件","slug":"_2-安装软件","link":"#_2-安装软件","children":[]},{"level":2,"title":"3.创建虚拟机","slug":"_3-创建虚拟机","link":"#_3-创建虚拟机","children":[]},{"level":2,"title":"4.连接虚拟机","slug":"_4-连接虚拟机","link":"#_4-连接虚拟机","children":[]},{"level":2,"title":"1.查看虚拟机","slug":"_1-查看虚拟机","link":"#_1-查看虚拟机","children":[]},{"level":2,"title":"2.启动虚拟机","slug":"_2-启动虚拟机","link":"#_2-启动虚拟机","children":[]},{"level":2,"title":"3.重启虚拟机","slug":"_3-重启虚拟机","link":"#_3-重启虚拟机","children":[]},{"level":2,"title":"4.关闭虚拟机","slug":"_4-关闭虚拟机","link":"#_4-关闭虚拟机","children":[]},{"level":2,"title":"5.查看配置文件","slug":"_5-查看配置文件","link":"#_5-查看配置文件","children":[]},{"level":2,"title":"6.导出配置文件","slug":"_6-导出配置文件","link":"#_6-导出配置文件","children":[]},{"level":2,"title":"7.删除虚拟机","slug":"_7-删除虚拟机","link":"#_7-删除虚拟机","children":[]},{"level":2,"title":"8.导入虚拟机","slug":"_8-导入虚拟机","link":"#_8-导入虚拟机","children":[]},{"level":2,"title":"9.虚拟机重命名","slug":"_9-虚拟机重命名","link":"#_9-虚拟机重命名","children":[]},{"level":2,"title":"10.主机挂起","slug":"_10-主机挂起","link":"#_10-主机挂起","children":[]},{"level":2,"title":"11.恢复主机","slug":"_11-恢复主机","link":"#_11-恢复主机","children":[]},{"level":2,"title":"12.kvm虚拟机开机启动","slug":"_12-kvm虚拟机开机启动","link":"#_12-kvm虚拟机开机启动","children":[]},{"level":2,"title":"13.小项目：","slug":"_13-小项目：","link":"#_13-小项目：","children":[{"level":3,"title":"13.1.停止要迁移的虚拟机","slug":"_13-1-停止要迁移的虚拟机","link":"#_13-1-停止要迁移的虚拟机","children":[]},{"level":3,"title":"13.2.创建数据目录并移动磁盘文件","slug":"_13-2-创建数据目录并移动磁盘文件","link":"#_13-2-创建数据目录并移动磁盘文件","children":[]},{"level":3,"title":"13.3.使用edit命令修改配置文件","slug":"_13-3-使用edit命令修改配置文件","link":"#_13-3-使用edit命令修改配置文件","children":[]},{"level":3,"title":"13.4.启动虚拟机","slug":"_13-4-启动虚拟机","link":"#_13-4-启动虚拟机","children":[]}]},{"level":2,"title":"1.VNC","slug":"_1-vnc","link":"#_1-vnc","children":[]},{"level":2,"title":"2.SSH","slug":"_2-ssh","link":"#_2-ssh","children":[]},{"level":2,"title":"3.console显示","slug":"_3-console显示","link":"#_3-console显示","children":[]},{"level":2,"title":"1.虚拟机磁盘格式介绍","slug":"_1-虚拟机磁盘格式介绍","link":"#_1-虚拟机磁盘格式介绍","children":[]},{"level":2,"title":"2.查看磁盘信息","slug":"_2-查看磁盘信息","link":"#_2-查看磁盘信息","children":[]},{"level":2,"title":"3.创建磁盘","slug":"_3-创建磁盘","link":"#_3-创建磁盘","children":[]},{"level":2,"title":"4.查看磁盘信息","slug":"_4-查看磁盘信息","link":"#_4-查看磁盘信息","children":[]},{"level":2,"title":"5.调整磁盘容量: 只能加不能减","slug":"_5-调整磁盘容量-只能加不能减","link":"#_5-调整磁盘容量-只能加不能减","children":[]},{"level":2,"title":"6.磁盘格式转换","slug":"_6-磁盘格式转换","link":"#_6-磁盘格式转换","children":[{"level":3,"title":"6.1.将虚拟机关机","slug":"_6-1-将虚拟机关机","link":"#_6-1-将虚拟机关机","children":[]},{"level":3,"title":"6.2.转换磁盘格式","slug":"_6-2-转换磁盘格式","link":"#_6-2-转换磁盘格式","children":[]},{"level":3,"title":"6.3.编辑配置文件修改为qcow2格式","slug":"_6-3-编辑配置文件修改为qcow2格式","link":"#_6-3-编辑配置文件修改为qcow2格式","children":[]},{"level":3,"title":"6.4.重新启动","slug":"_6-4-重新启动","link":"#_6-4-重新启动","children":[]}]},{"level":2,"title":"1.查看快照","slug":"_1-查看快照","link":"#_1-查看快照","children":[]},{"level":2,"title":"2.创建快照","slug":"_2-创建快照","link":"#_2-创建快照","children":[]},{"level":2,"title":"3.恢复快照","slug":"_3-恢复快照","link":"#_3-恢复快照","children":[]},{"level":2,"title":"4.删除快照","slug":"_4-删除快照","link":"#_4-删除快照","children":[]},{"level":2,"title":"1.完整克隆","slug":"_1-完整克隆","link":"#_1-完整克隆","children":[]},{"level":2,"title":"2.链接克隆","slug":"_2-链接克隆","link":"#_2-链接克隆","children":[{"level":3,"title":"2.1 生成虚拟机磁盘文件","slug":"_2-1-生成虚拟机磁盘文件","link":"#_2-1-生成虚拟机磁盘文件","children":[]},{"level":3,"title":"2.2 查看磁盘信息","slug":"_2-2-查看磁盘信息","link":"#_2-2-查看磁盘信息","children":[]},{"level":3,"title":"2.3 生成虚拟机配置文件","slug":"_2-3-生成虚拟机配置文件","link":"#_2-3-生成虚拟机配置文件","children":[]},{"level":3,"title":"2.3 导入配置文件","slug":"_2-3-导入配置文件","link":"#_2-3-导入配置文件","children":[]},{"level":3,"title":"2.4 启动虚拟机","slug":"_2-4-启动虚拟机","link":"#_2-4-启动虚拟机","children":[]}]},{"level":2,"title":"1.创建桥接网卡","slug":"_1-创建桥接网卡","link":"#_1-创建桥接网卡","children":[]},{"level":2,"title":"2.连接克隆新磁盘","slug":"_2-连接克隆新磁盘","link":"#_2-连接克隆新磁盘","children":[]},{"level":2,"title":"3.创建新虚拟机","slug":"_3-创建新虚拟机","link":"#_3-创建新虚拟机","children":[]},{"level":2,"title":"4.登录虚拟机查看网卡信息","slug":"_4-登录虚拟机查看网卡信息","link":"#_4-登录虚拟机查看网卡信息","children":[]},{"level":2,"title":"5.在其他主机ping测试","slug":"_5-在其他主机ping测试","link":"#_5-在其他主机ping测试","children":[]},{"level":2,"title":"1.热添加硬盘","slug":"_1-热添加硬盘","link":"#_1-热添加硬盘","children":[{"level":3,"title":"1.1 创建磁盘","slug":"_1-1-创建磁盘","link":"#_1-1-创建磁盘","children":[]},{"level":3,"title":"1.2 临时生效添加","slug":"_1-2-临时生效添加","link":"#_1-2-临时生效添加","children":[]},{"level":3,"title":"1.3 虚拟机格式化并挂载","slug":"_1-3-虚拟机格式化并挂载","link":"#_1-3-虚拟机格式化并挂载","children":[]},{"level":3,"title":"1.4 永久生效添加","slug":"_1-4-永久生效添加","link":"#_1-4-永久生效添加","children":[]}]},{"level":2,"title":"2.剥离磁盘","slug":"_2-剥离磁盘","link":"#_2-剥离磁盘","children":[{"level":3,"title":"2.1 临时剥离","slug":"_2-1-临时剥离","link":"#_2-1-临时剥离","children":[]},{"level":3,"title":"2.2 永久剥离","slug":"_2-2-永久剥离","link":"#_2-2-永久剥离","children":[]}]},{"level":2,"title":"3.调整磁盘大小","slug":"_3-调整磁盘大小","link":"#_3-调整磁盘大小","children":[{"level":3,"title":"3.1 调整磁盘大小","slug":"_3-1-调整磁盘大小","link":"#_3-1-调整磁盘大小","children":[]},{"level":3,"title":"3.2 添加到虚拟机并查看","slug":"_3-2-添加到虚拟机并查看","link":"#_3-2-添加到虚拟机并查看","children":[]},{"level":3,"title":"3.3 调整磁盘信息","slug":"_3-3-调整磁盘信息","link":"#_3-3-调整磁盘信息","children":[]}]},{"level":2,"title":"1.临时添加","slug":"_1-临时添加","link":"#_1-临时添加","children":[]},{"level":2,"title":"2.永久生效","slug":"_2-永久生效","link":"#_2-永久生效","children":[]},{"level":2,"title":"3,临时剥离","slug":"_3-临时剥离","link":"#_3-临时剥离","children":[]},{"level":2,"title":"4.永久剥离","slug":"_4-永久剥离","link":"#_4-永久剥离","children":[]},{"level":2,"title":"1.创建虚拟机时直接添加最大内存参数","slug":"_1-创建虚拟机时直接添加最大内存参数","link":"#_1-创建虚拟机时直接添加最大内存参数","children":[]},{"level":2,"title":"2.如果创建虚拟机的时候没有设置最大内存限制，执行如下操作添加配置","slug":"_2-如果创建虚拟机的时候没有设置最大内存限制，执行如下操作添加配置","link":"#_2-如果创建虚拟机的时候没有设置最大内存限制，执行如下操作添加配置","children":[]},{"level":2,"title":"3.临时添加","slug":"_3-临时添加","link":"#_3-临时添加","children":[]},{"level":2,"title":"4.永久增大内存","slug":"_4-永久增大内存","link":"#_4-永久增大内存","children":[]},{"level":2,"title":"1.编辑配置文件","slug":"_1-编辑配置文件","link":"#_1-编辑配置文件","children":[]},{"level":2,"title":"2.添加cpu核数","slug":"_2-添加cpu核数","link":"#_2-添加cpu核数","children":[]},{"level":2,"title":"3.永久添加cpu核数","slug":"_3-永久添加cpu核数","link":"#_3-永久添加cpu核数","children":[]}],"relativePath":"pages/posts/KVM-未完.md","path":"/Users/vlinux/vlinux/blog/valaxy/vlinux.github.io/pages/posts/KVM-未完.md","lastUpdated":1671091756000}'),_={name:"pages/posts/KVM-未完.md",data(){return{data:c,frontmatter:c.frontmatter}},setup(){y("pageData",c)}},A={id:"第1章-kvm介绍",tabindex:"-1"},F={id:"第2章-创建一个kvm虚拟机",tabindex:"-1"},u={id:"_1-vm虚拟机开启cpu虚拟化功能",tabindex:"-1"},g=s("p",null,"设置-处理器-虚拟化",-1),v={id:"_2-安装软件",tabindex:"-1"},k=s("div",{class:"language-bash"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"yum"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"install"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"libvirt"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"virt-install"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"qemu-kvm"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-y")]),l(`
`),s("span",{class:"line"})])])],-1),f={id:"_3-创建虚拟机",tabindex:"-1"},m=s("div",{class:"language-go"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"systemctl start libvirtd"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#A6ACCD"}},"service ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"systemctl status libvirtd"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#A6ACCD"}},"service")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virt"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"install "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"virt"),s("span",{style:{color:"#89DDFF"}},"-type"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"kvm"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"os"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"type"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}},"linux "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"os"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"variant rhel7 "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"name centos7 "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"memory "),s("span",{style:{color:"#F78C6C"}},"1024"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"vcpus "),s("span",{style:{color:"#F78C6C"}},"1"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"disk "),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"opt"),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"centos7"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#A6ACCD"}},"raw"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}},"format"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}},"raw"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}},"size"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#F78C6C"}},"10"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"cdrom "),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"opt"),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"CentOS"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#F78C6C"}},"7"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"x86_64"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"DVD"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"1810.iso "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"network network"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"default"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"graphics vnc"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}},"listen"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}},"0.0.0.0 "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"noautoconsole")]),l(`
`),s("span",{class:"line"})])])],-1),b={id:"_4-连接虚拟机",tabindex:"-1"},B=s("p",null,"安装VNC工具连接",-1),x={id:"第3章-kvm常用管理命令",tabindex:"-1"},E={id:"_1-查看虚拟机",tabindex:"-1"},w=s("div",{class:"language-cpp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh list")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh list "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"all")]),l(`
`),s("span",{class:"line"})])])],-1),q={id:"_2-启动虚拟机",tabindex:"-1"},V=s("div",{class:"language-bash"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"virsh"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"start"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"centos7")]),l(`
`),s("span",{class:"line"})])])],-1),M={id:"_3-重启虚拟机",tabindex:"-1"},K=s("div",{class:"language-bash"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"virsh"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"reboot"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"centos7")]),l(`
`),s("span",{class:"line"})])])],-1),$={id:"_4-关闭虚拟机",tabindex:"-1"},S=s("div",{class:"language-bash"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"virsh"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"shutdown"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"centos7")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"virsh"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"destroy"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"centos7")]),l(`
`),s("span",{class:"line"})])])],-1),N={id:"_5-查看配置文件",tabindex:"-1"},U=s("div",{class:"language-bash"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"virsh"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"dumpxml"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"centos7")]),l(`
`),s("span",{class:"line"})])])],-1),O={id:"_6-导出配置文件",tabindex:"-1"},P=s("div",{class:"language-css"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh dumpxml centos7 "),s("span",{style:{color:"#89DDFF"}},">"),s("span",{style:{color:"#A6ACCD"}}," centos7"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#FFCB6B"}},"xml")]),l(`
`),s("span",{class:"line"})])])],-1),j={id:"_7-删除虚拟机",tabindex:"-1"},T=s("div",{class:"language-bash"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"virsh"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"destroy"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"centos7")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"virsh"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"undefine"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"centos7")]),l(`
`),s("span",{class:"line"})])])],-1),z={id:"_8-导入虚拟机",tabindex:"-1"},G=s("div",{class:"language-css"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh define centos7"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#FFCB6B"}},"xml")]),l(`
`),s("span",{class:"line"})])])],-1),H={id:"_9-虚拟机重命名",tabindex:"-1"},L=s("div",{class:"language-bash"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"virsh"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"domrename"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"panghu"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"shouhu")]),l(`
`),s("span",{class:"line"})])])],-1),J={id:"_10-主机挂起",tabindex:"-1"},Z=s("div",{class:"language-bash"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"virsh"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"suspend"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"centos7")]),l(`
`),s("span",{class:"line"})])])],-1),W={id:"_11-恢复主机",tabindex:"-1"},I=s("div",{class:"language-bash"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"virsh"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"resume"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"centos7")]),l(`
`),s("span",{class:"line"})])])],-1),Q={id:"_12-kvm虚拟机开机启动",tabindex:"-1"},R=s("div",{class:"language-bash"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"virsh"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"autostart"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"centos7")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"ll"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"/etc/libvirt/qemu/autostart/")]),l(`
`),s("span",{class:"line"})])])],-1),X={id:"_13-小项目：",tabindex:"-1"},Y=s("p",null,"把虚拟机磁盘迁移到/data目录并且启动",-1),ss={id:"_13-1-停止要迁移的虚拟机",tabindex:"-1"},ls=s("div",{class:"language-bash"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"virsh"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"shutdown"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"centos7")]),l(`
`),s("span",{class:"line"})])])],-1),es={id:"_13-2-创建数据目录并移动磁盘文件",tabindex:"-1"},as=s("div",{class:"language-kotlin"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"mkdir "),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#C792EA"}},"data"),s("span",{style:{color:"#A6ACCD"}}," ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"mv "),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"opt"),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"centos7"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#A6ACCD"}},"raw "),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#C792EA"}},"data"),s("span",{style:{color:"#A6ACCD"}}," ")]),l(`
`),s("span",{class:"line"})])])],-1),ns={id:"_13-3-使用edit命令修改配置文件",tabindex:"-1"},os=s("div",{class:"language-bash"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"virsh"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"edit"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"centos7")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"--------------------")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#82AAFF"}},"source"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"file="),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"/data/centos7.raw"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#A6ACCD"}},"/"),s("span",{style:{color:"#89DDFF"}},">")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"--------------------")]),l(`
`),s("span",{class:"line"})])])],-1),ts={id:"_13-4-启动虚拟机",tabindex:"-1"},cs=s("div",{class:"language-cpp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh start centos7")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh list ")]),l(`
`),s("span",{class:"line"})])])],-1),rs={id:"第4章-kvm连接方式",tabindex:"-1"},is={id:"_1-vnc",tabindex:"-1"},ps=s("div",{class:"language-bash"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"virsh"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"vncdisplay"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"centos7")]),l(`
`),s("span",{class:"line"})])])],-1),ds={id:"_2-ssh",tabindex:"-1"},Ds=s("div",{class:"language-css"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"ssh 192"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#FFCB6B"}},"168"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#FFCB6B"}},"122"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#FFCB6B"}},"77")]),l(`
`),s("span",{class:"line"})])])],-1),hs={id:"_3-console显示",tabindex:"-1"},Cs=s("p",null,"登录进需要开启console的虚拟机并添加参数",-1),ys=s("div",{class:"language-jsx"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"ssh "),s("span",{style:{color:"#F78C6C"}},"192.168"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F78C6C"}},"122.77")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"grubby "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"update"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"kernel"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}},"ALL "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"args"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"console=ttyS0,115200n8"),s("span",{style:{color:"#89DDFF"}},'"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"grep "),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"115200"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"boot"),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"grub2"),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"grub"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#A6ACCD"}},"cfg ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"reboot")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh destroy centos7")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh start centos7")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh console centos7")]),l(`
`),s("span",{class:"line"})])])],-1),_s=s("p",null,"退出",-1),As=s("div",{class:"language-bash"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"ctrl"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"+"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"]")]),l(`
`),s("span",{class:"line"})])])],-1),Fs={id:"第5章-kvm磁盘管理",tabindex:"-1"},us={id:"_1-虚拟机磁盘格式介绍",tabindex:"-1"},gs=s("div",{class:"language-bash"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"raw：不支持做快照，性能好")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"qcow2：支持快照，性能不如raw好")]),l(`
`),s("span",{class:"line"})])])],-1),vs={id:"_2-查看磁盘信息",tabindex:"-1"},ks=s("div",{class:"language-css"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"qemu-img"),s("span",{style:{color:"#A6ACCD"}}," info centos7"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#FFCB6B"}},"raw"),s("span",{style:{color:"#A6ACCD"}}," ")]),l(`
`),s("span",{class:"line"})])])],-1),fs={id:"_3-创建磁盘",tabindex:"-1"},ms=s("div",{class:"language-kotlin"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"qemu"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"img create "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"f qcow2 "),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#C792EA"}},"data"),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"centos7"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#A6ACCD"}},"qcow2 1G")]),l(`
`),s("span",{class:"line"})])])],-1),bs={id:"_4-查看磁盘信息",tabindex:"-1"},Bs=s("div",{class:"language-css"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"qemu-img"),s("span",{style:{color:"#A6ACCD"}}," info centos7"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#FFCB6B"}},"qcow2")]),l(`
`),s("span",{class:"line"})])])],-1),xs={id:"_5-调整磁盘容量-只能加不能减",tabindex:"-1"},Es=s("div",{class:"language-kotlin"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"qemu"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"img resize "),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#C792EA"}},"data"),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"centos7"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#A6ACCD"}},"qcow2 1T")]),l(`
`),s("span",{class:"line"})])])],-1),ws={id:"_6-磁盘格式转换",tabindex:"-1"},qs={id:"_6-1-将虚拟机关机",tabindex:"-1"},Vs=s("div",{class:"language-bash"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"virsh"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"destroy"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"centos7")]),l(`
`),s("span",{class:"line"})])])],-1),Ms={id:"_6-2-转换磁盘格式",tabindex:"-1"},Ks=s("div",{class:"language-css"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"qemu-img"),s("span",{style:{color:"#A6ACCD"}}," convert -f raw -O qcow2 centos7"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#FFCB6B"}},"raw"),s("span",{style:{color:"#A6ACCD"}}," centos7"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#FFCB6B"}},"qcow2"),s("span",{style:{color:"#A6ACCD"}},"  ")]),l(`
`),s("span",{class:"line"})])])],-1),$s={id:"_6-3-编辑配置文件修改为qcow2格式",tabindex:"-1"},Ss=s("div",{class:"language-bash"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"virsh"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"edit"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"centos7")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"------------------------------------------")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"      "),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#FFCB6B"}},"driver"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"name="),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"qemu"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"type="),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"qcow2"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#A6ACCD"}},"/"),s("span",{style:{color:"#89DDFF"}},">")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"      "),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#82AAFF"}},"source"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"file="),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"/opt/centos7.qcow2"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#A6ACCD"}},"/"),s("span",{style:{color:"#89DDFF"}},">")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"------------------------------------------")]),l(`
`),s("span",{class:"line"})])])],-1),Ns={id:"_6-4-重新启动",tabindex:"-1"},Us=s("div",{class:"language-jsx"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh start centos7")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh console centos7")]),l(`
`),s("span",{class:"line"})])])],-1),Os={id:"第6章-kvm快照管理",tabindex:"-1"},Ps={id:"_1-查看快照",tabindex:"-1"},js=s("div",{class:"language-cpp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh snapshot"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"list centos7")]),l(`
`),s("span",{class:"line"})])])],-1),Ts={id:"_2-创建快照",tabindex:"-1"},zs=s("div",{class:"language-php"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh snapshot"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"create"),s("span",{style:{color:"#89DDFF"}},"-as"),s("span",{style:{color:"#A6ACCD"}}," centos7 snap1")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh snapshot"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"list centos7")]),l(`
`),s("span",{class:"line"})])])],-1),Gs={id:"_3-恢复快照",tabindex:"-1"},Hs=s("div",{class:"language-bash"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"virsh"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"snapshot-revert"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"centos7"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"snap1")]),l(`
`),s("span",{class:"line"})])])],-1),Ls={id:"_4-删除快照",tabindex:"-1"},Js=s("div",{class:"language-cpp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh snapshot"),s("span",{style:{color:"#89DDFF"}},"-delete"),s("span",{style:{color:"#A6ACCD"}}," centos7 snap1")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh snapshot"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"list centos7")]),l(`
`),s("span",{class:"line"})])])],-1),Zs={id:"第7章-kvm克隆虚拟机",tabindex:"-1"},Ws={id:"_1-完整克隆",tabindex:"-1"},Is=s("div",{class:"language-php"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh shutdown centos7")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virt"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#F78C6C"}},"clone"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"auto"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#F78C6C"}},"clone"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"o centos7 "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"n centos7"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"backup")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh list "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"all")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh dumpxml web"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"blog"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"backup "),s("span",{style:{color:"#89DDFF"}},"|"),s("span",{style:{color:"#A6ACCD"}},"grep "),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"qcow2"),s("span",{style:{color:"#89DDFF"}},'"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh snapshot"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"list centos7")]),l(`
`),s("span",{class:"line"})])])],-1),Qs={id:"_2-链接克隆",tabindex:"-1"},Rs={id:"_2-1-生成虚拟机磁盘文件",tabindex:"-1"},Xs=s("div",{class:"language-css"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"qemu-img"),s("span",{style:{color:"#A6ACCD"}}," create -f qcow2 -b centos7"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#FFCB6B"}},"qcow2"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"centos7-clone"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#FFCB6B"}},"qcow2"),s("span",{style:{color:"#A6ACCD"}}," ")]),l(`
`),s("span",{class:"line"})])])],-1),Ys={id:"_2-2-查看磁盘信息",tabindex:"-1"},sl=s("div",{class:"language-css"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"qemu-img"),s("span",{style:{color:"#A6ACCD"}}," info "),s("span",{style:{color:"#FFCB6B"}},"centos7-clone"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#FFCB6B"}},"qcow2"),s("span",{style:{color:"#A6ACCD"}}," ")]),l(`
`),s("span",{class:"line"})])])],-1),ll={id:"_2-3-生成虚拟机配置文件",tabindex:"-1"},el=s("div",{class:"language-php"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh dumpxml centos7 "),s("span",{style:{color:"#89DDFF"}},">"),s("span",{style:{color:"#A6ACCD"}}," centos7"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#F78C6C"}},"clone"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#A6ACCD"}},"xml")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"sed "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"i "),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"/uuid/d"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#A6ACCD"}}," centos7"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#F78C6C"}},"clone"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#A6ACCD"}},"xml")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"sed "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"i "),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"/mac address/d"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#A6ACCD"}}," centos7"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#F78C6C"}},"clone"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#A6ACCD"}},"xml")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"sed "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"i "),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"s#centos7.qcow2#centos7-clone.qcow2#g"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#A6ACCD"}}," centos7"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#F78C6C"}},"clone"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#A6ACCD"}},"xml")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"sed "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"i "),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"/\\<nam/s#centos7#centos7-clone#g"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#A6ACCD"}}," centos7"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#F78C6C"}},"clone"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#A6ACCD"}},"xml")]),l(`
`),s("span",{class:"line"})])])],-1),al={id:"_2-3-导入配置文件",tabindex:"-1"},nl=s("div",{class:"language-php"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh define centos7"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#F78C6C"}},"clone"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#A6ACCD"}},"xml ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh list "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"all ")]),l(`
`),s("span",{class:"line"})])])],-1),ol={id:"_2-4-启动虚拟机",tabindex:"-1"},tl=s("div",{class:"language-php"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh start centos7"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#F78C6C"}},"clone")]),l(`
`),s("span",{class:"line"})])])],-1),cl={id:"第8章-kvm桥接网络",tabindex:"-1"},rl={id:"_1-创建桥接网卡",tabindex:"-1"},il=s("div",{class:"language-bash"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"virsh"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"iface-bridge"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"eth0"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"br0")]),l(`
`),s("span",{class:"line"})])])],-1),pl={id:"_2-连接克隆新磁盘",tabindex:"-1"},dl=s("div",{class:"language-bash"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#82AAFF"}},"cd"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"/opt")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"qemu-img"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"create"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-f"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"qcow2"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-b"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"centos7.qcow2"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"bridge.qcow2")]),l(`
`),s("span",{class:"line"})])])],-1),Dl={id:"_3-创建新虚拟机",tabindex:"-1"},hl=s("div",{class:"language-go"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virt"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"install "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"virt"),s("span",{style:{color:"#89DDFF"}},"-type"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"kvm"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"os"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"type"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}},"linux "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"os"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"variant rhel7 "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"name centos7"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"bridge "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"memory "),s("span",{style:{color:"#F78C6C"}},"1024"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"vcpus "),s("span",{style:{color:"#F78C6C"}},"1"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"disk "),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"opt"),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"bridge"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#A6ACCD"}},"qcow2 "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"boot hd "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"network bridge"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}},"br0 "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"graphics vnc"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}},"listen"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}},"0.0.0.0 "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"noautoconsole")]),l(`
`),s("span",{class:"line"})])])],-1),Cl={id:"_4-登录虚拟机查看网卡信息",tabindex:"-1"},yl=s("div",{class:"language-jsx"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh console centos7"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"bridge")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"ip a")]),l(`
`),s("span",{class:"line"})])])],-1),_l={id:"_5-在其他主机ping测试",tabindex:"-1"},Al=s("div",{class:"language-bash"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"ping"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"xxxx")]),l(`
`),s("span",{class:"line"})])])],-1),Fl={id:"第9章-kvm虚拟机热添加磁盘",tabindex:"-1"},ul={id:"_1-热添加硬盘",tabindex:"-1"},gl={id:"_1-1-创建磁盘",tabindex:"-1"},vl=s("div",{class:"language-csharp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"qemu"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"img create "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"f qcow2 centos7"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"add"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#A6ACCD"}},"qcow2 10G")]),l(`
`),s("span",{class:"line"})])])],-1),kl={id:"_1-2-临时生效添加",tabindex:"-1"},fl=s("div",{class:"language-csharp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh attach"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"disk centos7 "),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"opt"),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"centos7"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"add"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#A6ACCD"}},"qcow2 vdb "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"subdriver qcow2")]),l(`
`),s("span",{class:"line"})])])],-1),ml={id:"_1-3-虚拟机格式化并挂载",tabindex:"-1"},bl=s("div",{class:"language-jsx"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh console centos7")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"fdisk "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"l")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"mkfs"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#A6ACCD"}},"xfs "),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"dev"),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"vdb")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"mount  "),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"dev"),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"vdb  "),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"mnt"),s("span",{style:{color:"#89DDFF"}},"/")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"df "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"h")]),l(`
`),s("span",{class:"line"})])])],-1),Bl={id:"_1-4-永久生效添加",tabindex:"-1"},xl=s("div",{class:"language-csharp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh attach"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"disk centos7 "),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"opt"),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"centos7"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"add"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#A6ACCD"}},"qcow2 vdb "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"subdriver qcow2")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh attach"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"disk centos7 "),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"opt"),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"centos7"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"add"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#A6ACCD"}},"qcow2 vdb "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"subdriver qcow2 "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"config")]),l(`
`),s("span",{class:"line"})])])],-1),El={id:"_2-剥离磁盘",tabindex:"-1"},wl={id:"_2-1-临时剥离",tabindex:"-1"},ql=s("div",{class:"language-bash"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"virsh"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"detach-disk"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"centos7"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"vdb")]),l(`
`),s("span",{class:"line"})])])],-1),Vl={id:"_2-2-永久剥离",tabindex:"-1"},Ml=s("div",{class:"language-bash"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"virsh"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"detach-disk"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"centos7"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"vdb")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"virsh"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"detach-disk"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"centos7"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"vdb"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"--config")]),l(`
`),s("span",{class:"line"})])])],-1),Kl={id:"_3-调整磁盘大小",tabindex:"-1"},$l={id:"_3-1-调整磁盘大小",tabindex:"-1"},Sl=s("div",{class:"language-csharp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"qemu"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"img info "),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"opt"),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"centos7"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"add"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#A6ACCD"}},"qcow2")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"qemu"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"img resize "),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"opt"),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"centos7"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"add"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#A6ACCD"}},"qcow2 "),s("span",{style:{color:"#89DDFF"}},"+"),s("span",{style:{color:"#A6ACCD"}},"10G")]),l(`
`),s("span",{class:"line"})])])],-1),Nl={id:"_3-2-添加到虚拟机并查看",tabindex:"-1"},Ul=s("div",{class:"language-csharp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh attach"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"disk centos7 "),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"opt"),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"centos7"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"add"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#A6ACCD"}},"qcow2 vdb "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"subdriver qcow2")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh console centos7")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"fdisk "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"l "),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"dev"),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"vdb")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"mount "),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"dev"),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"vdb "),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"mnt"),s("span",{style:{color:"#89DDFF"}},"/")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"df "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"h"),s("span",{style:{color:"#89DDFF"}},"|"),s("span",{style:{color:"#A6ACCD"}},"tail "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#F78C6C"}},"1"),s("span",{style:{color:"#A6ACCD"}}," ")]),l(`
`),s("span",{class:"line"})])])],-1),Ol={id:"_3-3-调整磁盘信息",tabindex:"-1"},Pl=s("div",{class:"language-bash"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"xfs_growfs"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"/dev/vdb")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"df"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-h"),s("span",{style:{color:"#89DDFF"}},"|"),s("span",{style:{color:"#FFCB6B"}},"tail"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-1")]),l(`
`),s("span",{class:"line"})])])],-1),jl={id:"第10章-kvm热添加网卡",tabindex:"-1"},Tl={id:"_1-临时添加",tabindex:"-1"},zl=s("div",{class:"language-css"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh "),s("span",{style:{color:"#FFCB6B"}},"attach-interface"),s("span",{style:{color:"#A6ACCD"}}," centos7 --type bridge --mac 52:54:00:b1:b5:8a --source br0 --model virtio detachinterface")]),l(`
`),s("span",{class:"line"})])])],-1),Gl={id:"_2-永久生效",tabindex:"-1"},Hl=s("div",{class:"language-css"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh "),s("span",{style:{color:"#FFCB6B"}},"attach-interface"),s("span",{style:{color:"#A6ACCD"}}," centos7 --type bridge --mac 52:54:00:b1:b5:8a --source br0 --model virtio detachinterface --config ")]),l(`
`),s("span",{class:"line"})])])],-1),Ll={id:"_3-临时剥离",tabindex:"-1"},Jl=s("div",{class:"language-kotlin"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh detach"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#C792EA"}},"interface"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"centos7"),s("span",{style:{color:"#A6ACCD"}}," bridge")]),l(`
`),s("span",{class:"line"})])])],-1),Zl={id:"_4-永久剥离",tabindex:"-1"},Wl=s("div",{class:"language-kotlin"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh detach"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#C792EA"}},"interface"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"centos7"),s("span",{style:{color:"#A6ACCD"}}," bridge")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh detach"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#C792EA"}},"interface"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"centos7"),s("span",{style:{color:"#A6ACCD"}}," bridge "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"config")]),l(`
`),s("span",{class:"line"})])])],-1),Il={id:"第11章-kvm热添加内存",tabindex:"-1"},Ql={id:"_1-创建虚拟机时直接添加最大内存参数",tabindex:"-1"},Rl=s("div",{class:"language-go"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virt"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"install "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"virt"),s("span",{style:{color:"#89DDFF"}},"-type"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"kvm"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"os"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"type"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}},"linux "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"os"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"variant rhel7 "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"name centos7 "),s("span",{style:{color:"#89DDFF"}},"--")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"memory 512"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}},"maxmemory"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#F78C6C"}},"2048"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"vcpus "),s("span",{style:{color:"#F78C6C"}},"1"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"disk "),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"opt"),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"centos7"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#A6ACCD"}},"qcow2 "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"boot hd "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"network bridge"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}},"br0 "),s("span",{style:{color:"#89DDFF"}},"--")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"graphics vnc"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}},"listen"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}},"0.0.0.0 "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"noautoconsole")]),l(`
`),s("span",{class:"line"})])])],-1),Xl={id:"_2-如果创建虚拟机的时候没有设置最大内存限制，执行如下操作添加配置",tabindex:"-1"},Yl=s("div",{class:"language-cpp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh destroy centos7")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh setmaxmem centos7 "),s("span",{style:{color:"#F78C6C"}},"4096M")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh start centos7 ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh console centos7")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"free "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"h ")]),l(`
`),s("span",{class:"line"})])])],-1),se={id:"_3-临时添加",tabindex:"-1"},le=s("div",{class:"language-cpp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh setmem centos7 "),s("span",{style:{color:"#F78C6C"}},"2048M"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"live ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh console centos7")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"free "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"h ")]),l(`
`),s("span",{class:"line"})])])],-1),ee={id:"_4-永久增大内存",tabindex:"-1"},ae=s("div",{class:"language-cpp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh setmem centos7 "),s("span",{style:{color:"#F78C6C"}},"2048M"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"config")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh console centos7")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"free "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"h ")]),l(`
`),s("span",{class:"line"})])])],-1),ne={id:"第12章-kvm冷添加cpu",tabindex:"-1"},oe={id:"_1-编辑配置文件",tabindex:"-1"},te=s("div",{class:"language-jsx"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh edit centos7")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"------------------------------------------------")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#F07178"}},"vcpu"),s("span",{style:{color:"#89DDFF"}}," "),s("span",{style:{color:"#C792EA"}},"placement"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"static"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}}," "),s("span",{style:{color:"#C792EA"}},"current"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"2"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},">"),s("span",{style:{color:"#A6ACCD"}},"4"),s("span",{style:{color:"#89DDFF"}},"</"),s("span",{style:{color:"#F07178"}},"vcpu"),s("span",{style:{color:"#89DDFF"}},">")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"------------------------------------------------")]),l(`
`),s("span",{class:"line"})])])],-1),ce={id:"_2-添加cpu核数",tabindex:"-1"},re=s("div",{class:"language-bash"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"virsh"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"setvcpus"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"centos7"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"4"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"--live"),s("span",{style:{color:"#A6ACCD"}}," ")]),l(`
`),s("span",{class:"line"})])])],-1),ie={id:"_3-永久添加cpu核数",tabindex:"-1"},pe=s("div",{class:"language-bash"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"setvcpus"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"centos7"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"4"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"--config")]),l(`
`),s("span",{class:"line"})])])],-1);function de(o,De,he,Ce,r,ye){const a=C,i=p;return h(),D(i,{frontmatter:r.frontmatter,data:r.data},{"main-content-md":e(()=>[s("h1",A,[l("第1章 KVM介绍 "),n(a,{class:"header-anchor",href:"#第1章-kvm介绍","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),s("h1",F,[l("第2章 创建一个KVM虚拟机 "),n(a,{class:"header-anchor",href:"#第2章-创建一个kvm虚拟机","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),s("h2",u,[l("1.VM虚拟机开启CPU虚拟化功能 "),n(a,{class:"header-anchor",href:"#_1-vm虚拟机开启cpu虚拟化功能","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),g,s("h2",v,[l("2.安装软件 "),n(a,{class:"header-anchor",href:"#_2-安装软件","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),k,s("h2",f,[l("3.创建虚拟机 "),n(a,{class:"header-anchor",href:"#_3-创建虚拟机","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),m,s("h2",b,[l("4.连接虚拟机 "),n(a,{class:"header-anchor",href:"#_4-连接虚拟机","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),B,s("h1",x,[l("第3章 KVM常用管理命令 "),n(a,{class:"header-anchor",href:"#第3章-kvm常用管理命令","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),s("h2",E,[l("1.查看虚拟机 "),n(a,{class:"header-anchor",href:"#_1-查看虚拟机","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),w,s("h2",q,[l("2.启动虚拟机 "),n(a,{class:"header-anchor",href:"#_2-启动虚拟机","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),V,s("h2",M,[l("3.重启虚拟机 "),n(a,{class:"header-anchor",href:"#_3-重启虚拟机","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),K,s("h2",$,[l("4.关闭虚拟机 "),n(a,{class:"header-anchor",href:"#_4-关闭虚拟机","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),S,s("h2",N,[l("5.查看配置文件 "),n(a,{class:"header-anchor",href:"#_5-查看配置文件","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),U,s("h2",O,[l("6.导出配置文件 "),n(a,{class:"header-anchor",href:"#_6-导出配置文件","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),P,s("h2",j,[l("7.删除虚拟机 "),n(a,{class:"header-anchor",href:"#_7-删除虚拟机","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),T,s("h2",z,[l("8.导入虚拟机 "),n(a,{class:"header-anchor",href:"#_8-导入虚拟机","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),G,s("h2",H,[l("9.虚拟机重命名 "),n(a,{class:"header-anchor",href:"#_9-虚拟机重命名","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),L,s("h2",J,[l("10.主机挂起 "),n(a,{class:"header-anchor",href:"#_10-主机挂起","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),Z,s("h2",W,[l("11.恢复主机 "),n(a,{class:"header-anchor",href:"#_11-恢复主机","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),I,s("h2",Q,[l("12.kvm虚拟机开机启动 "),n(a,{class:"header-anchor",href:"#_12-kvm虚拟机开机启动","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),R,s("h2",X,[l("13.小项目： "),n(a,{class:"header-anchor",href:"#_13-小项目：","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),Y,s("h3",ss,[l("13.1.停止要迁移的虚拟机 "),n(a,{class:"header-anchor",href:"#_13-1-停止要迁移的虚拟机","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),ls,s("h3",es,[l("13.2.创建数据目录并移动磁盘文件 "),n(a,{class:"header-anchor",href:"#_13-2-创建数据目录并移动磁盘文件","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),as,s("h3",ns,[l("13.3.使用edit命令修改配置文件 "),n(a,{class:"header-anchor",href:"#_13-3-使用edit命令修改配置文件","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),os,s("h3",ts,[l("13.4.启动虚拟机 "),n(a,{class:"header-anchor",href:"#_13-4-启动虚拟机","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),cs,s("h1",rs,[l("第4章 KVM连接方式 "),n(a,{class:"header-anchor",href:"#第4章-kvm连接方式","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),s("h2",is,[l("1.VNC "),n(a,{class:"header-anchor",href:"#_1-vnc","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),ps,s("h2",ds,[l("2.SSH "),n(a,{class:"header-anchor",href:"#_2-ssh","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),Ds,s("h2",hs,[l("3.console显示 "),n(a,{class:"header-anchor",href:"#_3-console显示","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),Cs,ys,_s,As,s("h1",Fs,[l("第5章 KVM磁盘管理 "),n(a,{class:"header-anchor",href:"#第5章-kvm磁盘管理","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),s("h2",us,[l("1.虚拟机磁盘格式介绍 "),n(a,{class:"header-anchor",href:"#_1-虚拟机磁盘格式介绍","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),gs,s("h2",vs,[l("2.查看磁盘信息 "),n(a,{class:"header-anchor",href:"#_2-查看磁盘信息","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),ks,s("h2",fs,[l("3.创建磁盘 "),n(a,{class:"header-anchor",href:"#_3-创建磁盘","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),ms,s("h2",bs,[l("4.查看磁盘信息 "),n(a,{class:"header-anchor",href:"#_4-查看磁盘信息","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),Bs,s("h2",xs,[l("5.调整磁盘容量: 只能加不能减 "),n(a,{class:"header-anchor",href:"#_5-调整磁盘容量-只能加不能减","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),Es,s("h2",ws,[l("6.磁盘格式转换 "),n(a,{class:"header-anchor",href:"#_6-磁盘格式转换","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),s("h3",qs,[l("6.1.将虚拟机关机 "),n(a,{class:"header-anchor",href:"#_6-1-将虚拟机关机","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),Vs,s("h3",Ms,[l("6.2.转换磁盘格式 "),n(a,{class:"header-anchor",href:"#_6-2-转换磁盘格式","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),Ks,s("h3",$s,[l("6.3.编辑配置文件修改为qcow2格式 "),n(a,{class:"header-anchor",href:"#_6-3-编辑配置文件修改为qcow2格式","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),Ss,s("h3",Ns,[l("6.4.重新启动 "),n(a,{class:"header-anchor",href:"#_6-4-重新启动","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),Us,s("h1",Os,[l("第6章 KVM快照管理 "),n(a,{class:"header-anchor",href:"#第6章-kvm快照管理","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),s("h2",Ps,[l("1.查看快照 "),n(a,{class:"header-anchor",href:"#_1-查看快照","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),js,s("h2",Ts,[l("2.创建快照 "),n(a,{class:"header-anchor",href:"#_2-创建快照","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),zs,s("h2",Gs,[l("3.恢复快照 "),n(a,{class:"header-anchor",href:"#_3-恢复快照","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),Hs,s("h2",Ls,[l("4.删除快照 "),n(a,{class:"header-anchor",href:"#_4-删除快照","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),Js,s("h1",Zs,[l("第7章 KVM克隆虚拟机 "),n(a,{class:"header-anchor",href:"#第7章-kvm克隆虚拟机","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),s("h2",Ws,[l("1.完整克隆 "),n(a,{class:"header-anchor",href:"#_1-完整克隆","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),Is,s("h2",Qs,[l("2.链接克隆 "),n(a,{class:"header-anchor",href:"#_2-链接克隆","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),s("h3",Rs,[l("2.1 生成虚拟机磁盘文件 "),n(a,{class:"header-anchor",href:"#_2-1-生成虚拟机磁盘文件","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),Xs,s("h3",Ys,[l("2.2 查看磁盘信息 "),n(a,{class:"header-anchor",href:"#_2-2-查看磁盘信息","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),sl,s("h3",ll,[l("2.3 生成虚拟机配置文件 "),n(a,{class:"header-anchor",href:"#_2-3-生成虚拟机配置文件","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),el,s("h3",al,[l("2.3 导入配置文件 "),n(a,{class:"header-anchor",href:"#_2-3-导入配置文件","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),nl,s("h3",ol,[l("2.4 启动虚拟机 "),n(a,{class:"header-anchor",href:"#_2-4-启动虚拟机","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),tl,s("h1",cl,[l("第8章 KVM桥接网络 "),n(a,{class:"header-anchor",href:"#第8章-kvm桥接网络","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),s("h2",rl,[l("1.创建桥接网卡 "),n(a,{class:"header-anchor",href:"#_1-创建桥接网卡","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),il,s("h2",pl,[l("2.连接克隆新磁盘 "),n(a,{class:"header-anchor",href:"#_2-连接克隆新磁盘","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),dl,s("h2",Dl,[l("3.创建新虚拟机 "),n(a,{class:"header-anchor",href:"#_3-创建新虚拟机","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),hl,s("h2",Cl,[l("4.登录虚拟机查看网卡信息 "),n(a,{class:"header-anchor",href:"#_4-登录虚拟机查看网卡信息","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),yl,s("h2",_l,[l("5.在其他主机ping测试 "),n(a,{class:"header-anchor",href:"#_5-在其他主机ping测试","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),Al,s("h1",Fl,[l("第9章 KVM虚拟机热添加磁盘 "),n(a,{class:"header-anchor",href:"#第9章-kvm虚拟机热添加磁盘","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),s("h2",ul,[l("1.热添加硬盘 "),n(a,{class:"header-anchor",href:"#_1-热添加硬盘","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),s("h3",gl,[l("1.1 创建磁盘 "),n(a,{class:"header-anchor",href:"#_1-1-创建磁盘","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),vl,s("h3",kl,[l("1.2 临时生效添加 "),n(a,{class:"header-anchor",href:"#_1-2-临时生效添加","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),fl,s("h3",ml,[l("1.3 虚拟机格式化并挂载 "),n(a,{class:"header-anchor",href:"#_1-3-虚拟机格式化并挂载","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),bl,s("h3",Bl,[l("1.4 永久生效添加 "),n(a,{class:"header-anchor",href:"#_1-4-永久生效添加","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),xl,s("h2",El,[l("2.剥离磁盘 "),n(a,{class:"header-anchor",href:"#_2-剥离磁盘","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),s("h3",wl,[l("2.1 临时剥离 "),n(a,{class:"header-anchor",href:"#_2-1-临时剥离","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),ql,s("h3",Vl,[l("2.2 永久剥离 "),n(a,{class:"header-anchor",href:"#_2-2-永久剥离","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),Ml,s("h2",Kl,[l("3.调整磁盘大小 "),n(a,{class:"header-anchor",href:"#_3-调整磁盘大小","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),s("h3",$l,[l("3.1 调整磁盘大小 "),n(a,{class:"header-anchor",href:"#_3-1-调整磁盘大小","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),Sl,s("h3",Nl,[l("3.2 添加到虚拟机并查看 "),n(a,{class:"header-anchor",href:"#_3-2-添加到虚拟机并查看","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),Ul,s("h3",Ol,[l("3.3 调整磁盘信息 "),n(a,{class:"header-anchor",href:"#_3-3-调整磁盘信息","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),Pl,s("h1",jl,[l("第10章 KVM热添加网卡 "),n(a,{class:"header-anchor",href:"#第10章-kvm热添加网卡","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),s("h2",Tl,[l("1.临时添加 "),n(a,{class:"header-anchor",href:"#_1-临时添加","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),zl,s("h2",Gl,[l("2.永久生效 "),n(a,{class:"header-anchor",href:"#_2-永久生效","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),Hl,s("h2",Ll,[l("3,临时剥离 "),n(a,{class:"header-anchor",href:"#_3-临时剥离","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),Jl,s("h2",Zl,[l("4.永久剥离 "),n(a,{class:"header-anchor",href:"#_4-永久剥离","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),Wl,s("h1",Il,[l("第11章 KVM热添加内存 "),n(a,{class:"header-anchor",href:"#第11章-kvm热添加内存","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),s("h2",Ql,[l("1.创建虚拟机时直接添加最大内存参数 "),n(a,{class:"header-anchor",href:"#_1-创建虚拟机时直接添加最大内存参数","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),Rl,s("h2",Xl,[l("2.如果创建虚拟机的时候没有设置最大内存限制，执行如下操作添加配置 "),n(a,{class:"header-anchor",href:"#_2-如果创建虚拟机的时候没有设置最大内存限制，执行如下操作添加配置","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),Yl,s("h2",se,[l("3.临时添加 "),n(a,{class:"header-anchor",href:"#_3-临时添加","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),le,s("h2",ee,[l("4.永久增大内存 "),n(a,{class:"header-anchor",href:"#_4-永久增大内存","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),ae,s("h1",ne,[l("第12章 KVM冷添加CPU "),n(a,{class:"header-anchor",href:"#第12章-kvm冷添加cpu","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),s("h2",oe,[l("1.编辑配置文件 "),n(a,{class:"header-anchor",href:"#_1-编辑配置文件","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),te,s("h2",ce,[l("2.添加cpu核数 "),n(a,{class:"header-anchor",href:"#_2-添加cpu核数","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),re,s("h2",ie,[l("3.永久添加cpu核数 "),n(a,{class:"header-anchor",href:"#_3-永久添加cpu核数","aria-hidden":"true"},{default:e(()=>[l("#")]),_:1})]),pe]),"main-header":e(()=>[t(o.$slots,"main-header")]),"main-header-after":e(()=>[t(o.$slots,"main-header-after")]),"main-nav":e(()=>[t(o.$slots,"main-nav")]),"main-content":e(()=>[t(o.$slots,"main-content")]),"main-content-after":e(()=>[t(o.$slots,"main-content-after")]),"main-nav-before":e(()=>[t(o.$slots,"main-nav-before")]),"main-nav-after":e(()=>[t(o.$slots,"main-nav-after")]),comment:e(()=>[t(o.$slots,"comment")]),footer:e(()=>[t(o.$slots,"footer")]),aside:e(()=>[t(o.$slots,"aside")]),"aside-custom":e(()=>[t(o.$slots,"aside-custom")]),default:e(()=>[t(o.$slots,"default")]),_:3},8,["frontmatter","data"])}const ke=d(_,[["render",de]]);export{ve as __pageData,ke as default};
