import{_ as m}from"./ValaxyMain.vue_vue_type_style_index_0_lang.CdMcCuLR.js";import"./chunks/@vueuse/motion.BITvz5PP.js";import{e as h,u as b,a as y}from"./chunks/vue-router.Cro35QNm.js";import{aa as g,ap as n,ag as t,af as l,ai as a,P as f,ab as v,a1 as k}from"./framework.GHZxz7jq.js";import"./index.mH_NH_pU.js";import"./chunks/dayjs.BldX5ftQ.js";import"./chunks/vue-i18n.C7V8WoQZ.js";import"./chunks/pinia.BfAlK2F6.js";import"./chunks/nprogress.BZwbcB2O.js";/* empty css                    */import"./YunComment.vue_vue_type_style_index_0_lang.BaL1KWr8.js";import"./index.C5okkQwF.js";import"./YunPageHeader.vue_vue_type_script_setup_true_lang.fblE3Fel.js";import"./post.Dy68RlFi.js";const P=h("/posts/mac-dev-django-mysql",async s=>JSON.parse('{"title":"MacOS下配置Python + MySQL开发环境","description":"","frontmatter":{"layout":"post","title":"MacOS下配置Python + MySQL开发环境","tags":["Python"],"categories":"Python","date":"2025-08-25 16:52:47"},"headers":[],"relativePath":"pages/posts/mac-dev-django-mysql.md","lastUpdated":null}'),{lazy:(s,i)=>s.name===i.name}),N={__name:"mac-dev-django-mysql",setup(s,{expose:i}){const{data:r}=P(),p=y(),d=b(),o=Object.assign(d.meta.frontmatter||{},r.value?.frontmatter||{});return p.currentRoute.value.data=r.value,k("valaxy:frontmatter",o),globalThis.$frontmatter=o,i({frontmatter:{layout:"post",title:"MacOS下配置Python + MySQL开发环境",tags:["Python"],categories:"Python",date:"2025-08-25 16:52:47"}}),(e,c)=>{const u=m;return v(),g(u,{frontmatter:f(o)},{"main-content-md":n(()=>[...c[0]||(c[0]=[l("h2",{id:"🔍-问题背景",tabindex:"-1"},[a("🔍 问题背景 "),l("a",{class:"header-anchor",href:"#🔍-问题背景","aria-label":'Permalink to "🔍 问题背景"'},"​")],-1),l("p",null,[a("在 Apple Silicon 芯片的 Mac 上使用 Python 连接 MySQL 数据库时，经常遇到 "),l("code",null,"NameError: name '_mysql' is not defined"),a("错误。经过多次实践，我找到了100%有效的解决方案。")],-1),l("h2",{id:"✅-已验证的解决方案",tabindex:"-1"},[a("✅ 已验证的解决方案 "),l("a",{class:"header-anchor",href:"#✅-已验证的解决方案","aria-label":'Permalink to "✅ 已验证的解决方案"'},"​")],-1),l("h3",{id:"_1-完全清理旧环境",tabindex:"-1"},[a("1. 完全清理旧环境 "),l("a",{class:"header-anchor",href:"#_1-完全清理旧环境","aria-label":'Permalink to "1. 完全清理旧环境"'},"​")],-1),l("div",{class:"language-"},[l("button",{title:"Copy code",class:"copy"}),l("span",{class:"lang"}),l("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[l("code",{"v-pre":""},[l("span",{class:"line"},[l("span",null,"deactivate")]),a(`
`),l("span",{class:"line"},[l("span",null,"rm -rf ~/vlinux/dazhong/backend/venv")]),a(`
`),l("span",{class:"line"},[l("span",null,"pip cache purge")]),a(`
`),l("span",{class:"line"},[l("span",null,"brew uninstall --force mysql mysql-client")]),a(`
`),l("span",{class:"line"},[l("span",null,"brew cleanup")])])]),l("button",{class:"code-block-unfold-btn"})],-1),l("h3",{id:"_2-安装arm原生mysql客户端",tabindex:"-1"},[a("2. 安装ARM原生MySQL客户端 "),l("a",{class:"header-anchor",href:"#_2-安装arm原生mysql客户端","aria-label":'Permalink to "2. 安装ARM原生MySQL客户端"'},"​")],-1),l("div",{class:"language-"},[l("button",{title:"Copy code",class:"copy"}),l("span",{class:"lang"}),l("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[l("code",{"v-pre":""},[l("span",{class:"line"},[l("span",null,"arch -arm64 brew install mysql-client")])])]),l("button",{class:"code-block-unfold-btn"})],-1),l("h3",{id:"_3-创建纯净虚拟环境",tabindex:"-1"},[a("3. 创建纯净虚拟环境 "),l("a",{class:"header-anchor",href:"#_3-创建纯净虚拟环境","aria-label":'Permalink to "3. 创建纯净虚拟环境"'},"​")],-1),l("div",{class:"language-"},[l("button",{title:"Copy code",class:"copy"}),l("span",{class:"lang"}),l("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[l("code",{"v-pre":""},[l("span",{class:"line"},[l("span",null,"python3 -m venv venv")]),a(`
`),l("span",{class:"line"},[l("span",null,"source venv/bin/activate")])])]),l("button",{class:"code-block-unfold-btn"})],-1),l("h3",{id:"_4-特殊编译安装mysqlclient",tabindex:"-1"},[a("4. 特殊编译安装mysqlclient "),l("a",{class:"header-anchor",href:"#_4-特殊编译安装mysqlclient","aria-label":'Permalink to "4. 特殊编译安装mysqlclient"'},"​")],-1),l("div",{class:"language-"},[l("button",{title:"Copy code",class:"copy"}),l("span",{class:"lang"}),l("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[l("code",{"v-pre":""},[l("span",{class:"line"},[l("span",null,"pip install --no-cache-dir --force-reinstall --no-binary :all: \\")]),a(`
`),l("span",{class:"line"},[l("span",null,"  --global-option=build_ext \\")]),a(`
`),l("span",{class:"line"},[l("span",null,'  --global-option="-I$(brew --prefix mysql-client)/include/mysql" \\')]),a(`
`),l("span",{class:"line"},[l("span",null,'  --global-option="-L$(brew --prefix mysql-client)/lib" \\')]),a(`
`),l("span",{class:"line"},[l("span",null,"  mysqlclient==2.1.1")])])]),l("button",{class:"code-block-unfold-btn"})],-1),l("h3",{id:"_5-验证安装",tabindex:"-1"},[a("5. 验证安装 "),l("a",{class:"header-anchor",href:"#_5-验证安装","aria-label":'Permalink to "5. 验证安装"'},"​")],-1),l("div",{class:"language-"},[l("button",{title:"Copy code",class:"copy"}),l("span",{class:"lang"}),l("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[l("code",{"v-pre":""},[l("span",{class:"line"},[l("span",null,"# 检查动态库链接")]),a(`
`),l("span",{class:"line"},[l("span",null,`otool -L $(python -c "import MySQLdb; print(MySQLdb.__file__)").replace('__init__.py', '_mysql*.so')`)]),a(`
`),l("span",{class:"line"},[l("span")]),a(`
`),l("span",{class:"line"},[l("span",null,"# 测试导入")]),a(`
`),l("span",{class:"line"},[l("span",null,`python -c "import MySQLdb; from MySQLdb import _mysql; print('Success!')"`)])])]),l("button",{class:"code-block-unfold-btn"})],-1),l("h2",{id:"📝-关键点说明",tabindex:"-1"},[a("📝 关键点说明 "),l("a",{class:"header-anchor",href:"#📝-关键点说明","aria-label":'Permalink to "📝 关键点说明"'},"​")],-1),l("ol",null,[l("li",null,[l("p",null,[l("strong",null,"必须使用ARM原生编译"),a("：通过 "),l("code",null,"arch -arm64"),a("确保所有组件都是原生ARM版本")])]),l("li",null,[l("p",null,[l("strong",null,"精准指定编译路径"),a("："),l("code",null,"--global-option"),a("参数确保编译器找到正确的头文件和库")])]),l("li",null,[l("p",null,[l("strong",null,"完全清理环境"),a("：避免旧版本残留导致冲突")])])],-1),l("h2",{id:"💡-技术原理",tabindex:"-1"},[a("💡 技术原理 "),l("a",{class:"header-anchor",href:"#💡-技术原理","aria-label":'Permalink to "💡 技术原理"'},"​")],-1),l("table",null,[l("thead",null,[l("tr",null,[l("th",{style:{"text-align":"center"}},"问题"),l("th",{style:{"text-align":"center"}},"解决方案"),l("th",{style:{"text-align":"center"}},"原理")])]),l("tbody",null,[l("tr",null,[l("td",{style:{"text-align":"center"}},"架构不匹配"),l("td",{style:{"text-align":"center"}},"使用ARM原生brew安装"),l("td",{style:{"text-align":"center"}},"避免Rosetta转译导致的兼容性问题")]),l("tr",null,[l("td",{style:{"text-align":"center"}},"动态库链接错误"),l("td",{style:{"text-align":"center"}},"精确指定编译路径"),l("td",{style:{"text-align":"center"}},"确保生成正确的动态库依赖关系")]),l("tr",null,[l("td",{style:{"text-align":"center"}},"版本冲突"),l("td",{style:{"text-align":"center"}},"固定mysqlclient==2.1.1"),l("td",{style:{"text-align":"center"}},"使用经过验证的稳定版本")])])],-1),l("h2",{id:"⚠️-注意事项",tabindex:"-1"},[a("⚠️ 注意事项 "),l("a",{class:"header-anchor",href:"#⚠️-注意事项","aria-label":'Permalink to "⚠️ 注意事项"'},"​")],-1),l("ol",null,[l("li",null,[l("p",null,"确保终端未使用Rosetta模式")]),l("li",null,[l("p",null,"所有操作完成后重启终端")]),l("li",null,[l("p",null,"使用VS Code时需要完全重启（不只是关闭窗口）")])],-1),l("h2",{id:"🌟-成功验证输出示例",tabindex:"-1"},[a("🌟 成功验证输出示例 "),l("a",{class:"header-anchor",href:"#🌟-成功验证输出示例","aria-label":'Permalink to "🌟 成功验证输出示例"'},"​")],-1),l("div",{class:"language-"},[l("button",{title:"Copy code",class:"copy"}),l("span",{class:"lang"}),l("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[l("code",{"v-pre":""},[l("span",{class:"line"},[l("span",null,"# 动态库检查")]),a(`
`),l("span",{class:"line"},[l("span",null,"/opt/homebrew/opt/mysql-client/lib/libmysqlclient.24.dylib")]),a(`
`),l("span",{class:"line"},[l("span")]),a(`
`),l("span",{class:"line"},[l("span",null,"# Python测试")]),a(`
`),l("span",{class:"line"},[l("span",null,"Success!")])])]),l("button",{class:"code-block-unfold-btn"})],-1),l("blockquote",null,[l("p",null,"经实测，该方法在以下环境验证通过："),l("ul",null,[l("li",null,[l("p",null,"MacBook Pro M1 Pro / macOS 13.4")]),l("li",null,[l("p",null,"Python 3.9.6")]),l("li",null,[l("p",null,"MySQL 8.0.34")]),l("li",null,[l("p",null,"mysqlclient 2.1.1")])])],-1)])]),"main-header":n(()=>[t(e.$slots,"main-header")]),"main-header-after":n(()=>[t(e.$slots,"main-header-after")]),"main-nav":n(()=>[t(e.$slots,"main-nav")]),"main-content-before":n(()=>[t(e.$slots,"main-content-before")]),"main-content":n(()=>[t(e.$slots,"main-content")]),"main-content-after":n(()=>[t(e.$slots,"main-content-after")]),"main-nav-before":n(()=>[t(e.$slots,"main-nav-before")]),"main-nav-after":n(()=>[t(e.$slots,"main-nav-after")]),comment:n(()=>[t(e.$slots,"comment")]),footer:n(()=>[t(e.$slots,"footer")]),aside:n(()=>[t(e.$slots,"aside")]),"aside-custom":n(()=>[t(e.$slots,"aside-custom")]),default:n(()=>[t(e.$slots,"default")]),_:3},8,["frontmatter"])}}};export{N as default,P as usePageData};
