import{_ as i}from"./ValaxyMain-3652fbf7.js";import{_ as c,p,c as d,w as l,o as h,r as a,b as s,R as e}from"./app-096d6a25.js";import"./YunFooter-3373f0a7.js";import"./YunCard-56d4c4e2.js";import"./YunPageHeader-4c29e8a4.js";const es=JSON.parse('{"title":"Harbor部署总结","description":"","frontmatter":{"title":"Harbor部署总结","categories":"DevOps","tags":["Harbor"],"date":"2021-01-13T14:14:44.000Z"},"headers":[{"level":3,"title":"简介概述","slug":"简介概述","link":"#简介概述","children":[]},{"level":3,"title":"部署条件","slug":"部署条件","link":"#部署条件","children":[]},{"level":3,"title":"部署","slug":"部署","link":"#部署","children":[]},{"level":3,"title":"基本使用","slug":"基本使用","link":"#基本使用","children":[]}],"relativePath":"pages/posts/Harbor部署总结.md","path":"/Users/vlinux/vlinux/blog/valaxy/vlinux.github.io/pages/posts/Harbor部署总结.md","lastUpdated":1671090556000}'),o=JSON.parse('{"title":"Harbor部署总结","description":"","frontmatter":{"title":"Harbor部署总结","categories":"DevOps","tags":["Harbor"],"date":"2021-01-13T14:14:44.000Z"},"headers":[{"level":3,"title":"简介概述","slug":"简介概述","link":"#简介概述","children":[]},{"level":3,"title":"部署条件","slug":"部署条件","link":"#部署条件","children":[]},{"level":3,"title":"部署","slug":"部署","link":"#部署","children":[]},{"level":3,"title":"基本使用","slug":"基本使用","link":"#基本使用","children":[]}],"relativePath":"pages/posts/Harbor部署总结.md","path":"/Users/vlinux/vlinux/blog/valaxy/vlinux.github.io/pages/posts/Harbor部署总结.md","lastUpdated":1671090556000}'),u={name:"pages/posts/Harbor部署总结.md",data(){return{data:o,frontmatter:o.frontmatter}},setup(){p("pageData",o)}},_=s("h1",{id:"harbor部署总结",tabindex:"-1"},[e("Harbor部署总结 "),s("a",{class:"header-anchor",href:"#harbor部署总结","aria-hidden":"true"},"#")],-1),m=s("h3",{id:"简介概述",tabindex:"-1"},[e("简介概述 "),s("a",{class:"header-anchor",href:"#简介概述","aria-hidden":"true"},"#")],-1),g=s("p",null,"Harbor是由VMWare公司开源的容器镜像仓库。事实上，Harbor是在Docker Registry上进行了相应的企业级扩展，",-1),b=s("p",null,"从而获得了更加广泛的应用，这些新的企业级特性包括：管理用户界面，基于角色的访问控制 ，AD/LDAP集成以及",-1),C=s("p",null,"审计日志等，足以满足基本企业需求。",-1),A=s("p",null,[e("官方："),s("a",{href:"https://goharbor.io/",target:"_blank",rel:"noreferrer"},"https://goharbor.io/")],-1),y=s("p",null,[e("Github："),s("a",{href:"https://github.com/goharbor/harbor",target:"_blank",rel:"noreferrer"},"https://github.com/goharbor/harbor")],-1),f=s("h3",{id:"部署条件",tabindex:"-1"},[e("部署条件 "),s("a",{class:"header-anchor",href:"#部署条件","aria-hidden":"true"},"#")],-1),v=s("p",null,[s("strong",null,"服务器硬件配置：")],-1),D=s("p",null,"• 最低要求：CPU2核/内存4G/硬盘40GB",-1),k=s("p",null,"• 推荐：CPU4核/内存8G/硬盘160GB",-1),H=s("p",null,[s("strong",null,"软件：")],-1),$=s("p",null,"• Docker CE 17.06版本+",-1),x=s("p",null,"• Docker Compose 1.18版本+",-1),U=s("p",null,[s("strong",null,"Harbor安装有2种方式：")],-1),P=s("p",null,"• 在线安装：从Docker Hub下载Harbor相关镜像，因此安装软件包非常小",-1),B=s("p",null,"• 离线安装：安装包包含部署的相关镜像，因此安装包比较大",-1),G=s("h3",{id:"部署",tabindex:"-1"},[e("部署 "),s("a",{class:"header-anchor",href:"#部署","aria-hidden":"true"},"#")],-1),T=s("p",null,[s("strong",null,"1、先安装Docker和Docker Compose")],-1),N=s("p",null,[s("a",{href:"https://github.com/docker/compose/releases",target:"_blank",rel:"noreferrer"},"https://github.com/docker/compose/releases")],-1),O=s("p",null,[s("strong",null,"2、部署Harbor HTTP")],-1),V=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# tar zxvf harbor-offline-installer-v*.tgz")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# cd harbor")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# cp harbor.yml.tmpl harbor.yml")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# vi harbor.yml")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"hostname: reg.ctnrs.com")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"https: # 先注释https相关配置")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"harbor_admin_password: Harbor12345")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# ./prepare")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# ./install.sh")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),w=s("h3",{id:"基本使用",tabindex:"-1"},[e("基本使用 "),s("a",{class:"header-anchor",href:"#基本使用","aria-hidden":"true"},"#")],-1),S=s("p",null,[s("strong",null,"1、配置http镜像仓库可信任")],-1),z=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# vi /etc/docker/daemon.json ")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'{"insecure-registries":["reg.ctnrs.com"]}')]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# systemctl restart docker")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),J=s("p",null,[s("strong",null,"2、打标签")],-1),M=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# docker tag centos:7 reg.ctnrs.com/library/centos:7")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),R=s("p",null,[s("strong",null,"3、上传")],-1),Z=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# docker push reg.ctnrs.com/library/centos:7")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),j=s("p",null,[s("strong",null,"4、下载")],-1),E=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# docker pull reg.ctnrs.com/library/centos:7")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1);function L(n,W,q,F,t,I){const r=i;return h(),d(r,{frontmatter:t.frontmatter,data:t.data},{"main-content-md":l(()=>[_,m,g,b,C,A,y,f,v,D,k,H,$,x,U,P,B,G,T,N,O,V,w,S,z,J,M,R,Z,j,E]),"main-header":l(()=>[a(n.$slots,"main-header")]),"main-header-after":l(()=>[a(n.$slots,"main-header-after")]),"main-nav":l(()=>[a(n.$slots,"main-nav")]),"main-content":l(()=>[a(n.$slots,"main-content")]),"main-content-after":l(()=>[a(n.$slots,"main-content-after")]),"main-nav-before":l(()=>[a(n.$slots,"main-nav-before")]),"main-nav-after":l(()=>[a(n.$slots,"main-nav-after")]),comment:l(()=>[a(n.$slots,"comment")]),footer:l(()=>[a(n.$slots,"footer")]),aside:l(()=>[a(n.$slots,"aside")]),"aside-custom":l(()=>[a(n.$slots,"aside-custom")]),default:l(()=>[a(n.$slots,"default")]),_:3},8,["frontmatter","data"])}const ls=c(u,[["render",L],["__file","/Users/vlinux/vlinux/blog/valaxy/vlinux.github.io/pages/posts/Harbor部署总结.md"]]);export{es as __pageData,ls as default};
