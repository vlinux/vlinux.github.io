import{_ as a}from"./ValaxyMain.vue_vue_type_style_index_0_lang.DBuGQqdy.js";import"./chunks/@vueuse/motion.BITvz5PP.js";import{e as x,u as y,a as f}from"./chunks/vue-router.BxaDuBsg.js";import{aa as w,ap as r,ag as t,af as l,ae as v,ai as o,P as A,ab as b,a1 as j}from"./framework.GHZxz7jq.js";import"./index.DpUV-Spk.js";import"./chunks/dayjs.BldX5ftQ.js";import"./chunks/vue-i18n.C7V8WoQZ.js";import"./chunks/pinia.BfAlK2F6.js";import"./chunks/nprogress.BZwbcB2O.js";/* empty css                    */import"./YunComment.vue_vue_type_style_index_0_lang.MEbNDp3K.js";import"./index.C5okkQwF.js";import"./YunPageHeader.vue_vue_type_script_setup_true_lang.fblE3Fel.js";import"./post.CjbzLuOT.js";const P=x("/posts/Jumpserver安装使用",async u=>JSON.parse('{"title":"Jumpserver安装使用","description":"","frontmatter":{"title":"Jumpserver安装使用","categories":"Linux技术","tags":["Jumpserver","跳板机","堡垒机"],"date":"2020-02-21 23:39:00"},"headers":[],"relativePath":"pages/posts/Jumpserver安装使用.md","lastUpdated":null}'),{lazy:(u,p)=>u.name===p.name}),M={__name:"Jumpserver安装使用",setup(u,{expose:p}){const{data:g}=P(),e=f(),m=y(),i=Object.assign(m.meta.frontmatter||{},g.value?.frontmatter||{});return e.currentRoute.value.data=g.value,j("valaxy:frontmatter",i),globalThis.$frontmatter=i,p({frontmatter:{title:"Jumpserver安装使用",categories:"Linux技术",tags:["Jumpserver","跳板机","堡垒机"],date:"2020-02-21 23:39:00"}}),(s,n)=>{const d=a;return b(),w(d,{frontmatter:A(i)},{"main-content-md":r(()=>[n[0]||(n[0]=l("h1",{id:"xo-1-jumpserver堡垒机概述-部署jumpserver运行环境",tabindex:"-1"},[o("xo.1 Jumpserver堡垒机概述-部署Jumpserver运行环境 "),l("a",{class:"header-anchor",href:"#xo-1-jumpserver堡垒机概述-部署jumpserver运行环境","aria-label":'Permalink to "xo.1 Jumpserver堡垒机概述-部署Jumpserver运行环境"'},"​")],-1)),n[1]||(n[1]=l("h2",{id:"xo-1-1-跳板机概述",tabindex:"-1"},[o("xo.1.1 跳板机概述： "),l("a",{class:"header-anchor",href:"#xo-1-1-跳板机概述","aria-label":'Permalink to "xo.1.1 跳板机概述："'},"​")],-1)),n[2]||(n[2]=l("p",null,[l("strong",null,"跳板机就是一台服务器，开发或运维人员在维护过程中首先要统一登录到这台服务器，然后再登录到目标设备进行维护和操作；")],-1)),n[3]||(n[3]=l("figure",null,[l("img",{src:"https://www.xoxoyun.cn/usr/uploads/2020/02/2075287634.png",alt:"!img(file:///C:/Users/dell/AppData/Local/Temp/msohtmlclip1/01/clip_image002.jpg)",loading:"lazy",decoding:"async"})],-1)),n[4]||(n[4]=l("p",null,[l("strong",null,"跳板机缺点：没有实现对运维人员操作行为的控制和审计，使用跳板机的过程中还是会出现误操作、违规操作导致的事故，一旦出现操作事故很难快速定位到原因和责任人；")],-1)),n[5]||(n[5]=l("p",null,[l("strong",null,"堡垒机概述：")],-1)),n[6]||(n[6]=l("p",null,[l("strong",null,"堡垒机，即在一个特定的网络环境下，为了保障网络和数据不受来自外部和内部用户的入侵和破坏，而运用各种技术手段实时收集和监控网络环境中每一个组成部分的系统状态、安全事件、网络活动，以便集中报警、及时处理及审计定责。")],-1)),n[7]||(n[7]=l("p",null,[l("strong",null,"总结：堡垒机比跳板机多了实时收集、监控网络环境、集中报警等功能。")],-1)),n[8]||(n[8]=l("p",null,[l("strong",null,"Jumpserver****概述：")],-1)),n[9]||(n[9]=l("p",null,[l("strong",null,"Jumpserver****是一款使用Python, Django开发的开源跳板机系统, 为互联网企业提供了认证，授权，审计，自动化运维等功能。")],-1)),n[10]||(n[10]=l("p",null,[l("strong",null,"官方网址"),o("**： "),l("a",{href:"http://www.jumpserver.org",target:"_blank",rel:"noreferrer"},"http://www.jumpserver.org"),o("**")],-1)),n[11]||(n[11]=l("figure",null,[l("img",{src:"https://www.xoxoyun.cn/usr/uploads/2020/02/60833568.png",alt:"!img(file:///C:/Users/dell/AppData/Local/Temp/msohtmlclip1/01/clip_image004.jpg)",loading:"lazy",decoding:"async"})],-1)),n[12]||(n[12]=l("p",null,[l("strong",null,"jumpserver****堡垒机组件说明：")],-1)),n[13]||(n[13]=l("p",null,[l("strong",null,"1"),o("**、Jumpserver：**")],-1)),n[14]||(n[14]=l("p",null,[l("strong",null,"现指 Jumpserver 管理后台，是核心组件（Core）, 使用 Django Class Based View 风格开发，支持 Restful API。")],-1)),n[15]||(n[15]=l("p",null,[l("strong",null,"2"),o("**、Coco：**")],-1)),n[16]||(n[16]=l("p",null,[l("strong",null,"实现了 SSH Server 和 Web Terminal Server 的组件，提供 SSH 和 WebSocket 接口, 使用 Paramiko 和 Flask 开发。")],-1)),n[17]||(n[17]=l("p",null,[l("strong",null,"3"),o("**、Luna：**")],-1)),n[18]||(n[18]=l("p",null,[l("strong",null,"现在是 Web Terminal 前端，计划前端页面都由该项目提供，Jumpserver 只提供 API，不再负责后台渲染html等。")],-1)),n[19]||(n[19]=l("h1",{id:"实验所需软件包-file-href-http-cloud-xoxoyun-cn-index-php-share-folder-user-1-sid-tyzerash-jumpserver所需包-file",tabindex:"-1"},[o('实验所需软件包[file href="'),l("a",{href:"http://cloud.xoxoyun.cn/index.php?share/folder&user=1&sid=tYZErASh",target:"_blank",rel:"noreferrer"},"http://cloud.xoxoyun.cn/index.php?share/folder&user=1&sid=tYZErASh"),o('"]Jumpserver所需包[/file] '),l("a",{class:"header-anchor",href:"#实验所需软件包-file-href-http-cloud-xoxoyun-cn-index-php-share-folder-user-1-sid-tyzerash-jumpserver所需包-file","aria-label":'Permalink to "实验所需软件包[file href="http://cloud.xoxoyun.cn/index.php?share/folder&user=1&sid=tYZErASh"]Jumpserver所需包[/file]"'},"​")],-1)),n[20]||(n[20]=l("h2",{id:"xo-1-2-部署jumpserver运行环境",tabindex:"-1"},[o("xo.1.2 部署Jumpserver运行环境 "),l("a",{class:"header-anchor",href:"#xo-1-2-部署jumpserver运行环境","aria-label":'Permalink to "xo.1.2 部署Jumpserver运行环境"'},"​")],-1)),n[21]||(n[21]=l("p",null,[l("strong",null,"实验环境：")],-1)),n[22]||(n[22]=l("p",null,[l("strong",null,"Andu66.cn IP : 192.168.10.66 jumpserver****服务端")],-1)),n[23]||(n[23]=l("p",null,[l("strong",null,"Andu101.cn IP"),o("**：192.168.10.101 资源，被管理的服务器**")],-1)),n[24]||(n[24]=l("figure",null,[l("img",{src:"https://www.xoxoyun.cn/usr/uploads/2020/02/887254899.png",alt:"!img(file:///C:/Users/dell/AppData/Local/Temp/msohtmlclip1/01/clip_image006.jpg)",loading:"lazy",decoding:"async"})],-1)),n[25]||(n[25]=l("p",null,[l("strong",null,"上传依赖的软件到到Linux系统上（因为在线安装下载太慢了）：")],-1)),n[26]||(n[26]=l("p",null,[l("strong",null,"关闭 selinux 和防火墙")],-1)),n[27]||(n[27]=l("p",null,[l("strong",null,"[root@Andu66 ~]# setenforce 0 #"),o(),l("strong",null,"可以设置配置文件永久关闭")],-1)),n[28]||(n[28]=l("p",null,[l("strong",null,"[root@Andu66 ~]# systemctl stop firewalld.service ; systemctl disable firewalld.service")],-1)),n[29]||(n[29]=l("p",null,[l("strong",null,"#"),o(),l("strong",null,"修改字符集，否则可能报 input/output error的问题，因为日志里打印了中文")],-1)),n[30]||(n[30]=l("p",null,[l("strong",null,"[root@Andu66 ~]# localedef -c -f UTF-8 -i zh_CN zh_CN.UTF-8")],-1)),n[31]||(n[31]=l("p",null,[l("strong",null,"[root@Andu66 ~]# export LC_ALL=zh_CN.UTF-8")],-1)),n[32]||(n[32]=l("p",null,[l("strong",null,"[root@Andu66 ~]# echo 'LANG=zh_CN.UTF-8' > /etc/locale.conf")],-1)),n[33]||(n[33]=l("p",null,[l("strong",null,"[root@Andu66 ~]# exit")],-1)),n[34]||(n[34]=l("p",null,[l("strong",null,"再重新连接， 这样语言环境就改变了。")],-1)),n[35]||(n[35]=l("h2",{id:"xo-1-3-准备-python3-和-python-虚拟环境",tabindex:"-1"},[o("xo.1.3 准备 Python3 和 Python 虚拟环境 "),l("a",{class:"header-anchor",href:"#xo-1-3-准备-python3-和-python-虚拟环境","aria-label":'Permalink to "xo.1.3  准备 Python3 和 Python 虚拟环境"'},"​")],-1)),n[36]||(n[36]=l("p",null,[l("strong",null,"1"),o("**、安装依赖包**")],-1)),n[37]||(n[37]=l("p",null,[l("strong",null,"注：安装前，可以开启yum缓存功能，把软件包下载下来，方便后期使用。")],-1)),n[38]||(n[38]=l("p",null,[l("strong",null,"[root@Andu66 ~]# vim /etc/yum.conf")],-1)),n[39]||(n[39]=l("p",null,[l("strong",null,"改：keepcache=0")],-1)),n[40]||(n[40]=l("p",null,[l("strong",null,"为：keepcache=1")],-1)),n[41]||(n[41]=l("p",null,[l("strong",null,"[root@Andu66 ~]# yum -y install wget sqlite-devel xz gcc automake zlib-devel openssl-devel epel-release git")],-1)),n[42]||(n[42]=l("p",null,[l("strong",null,"2"),o("**、编译安装python3.6.1**")],-1)),n[43]||(n[43]=l("p",null,[l("strong",null,"[root@Andu66 ~]# cd /opt")],-1)),n[44]||(n[44]=l("p",null,[l("strong",null,"[root@Andu66 ~]# tar xvf Python-3.6.1.tar.xz && cd Python-3.6.1")],-1)),n[45]||(n[45]=l("p",null,[l("strong",null,"[root@Andu66 ~]# ./configure && make -j 4 && make install")],-1)),n[46]||(n[46]=l("p",null,[l("strong",null,"#"),o(),l("strong",null,"这里必须执行编译安装，否则在安装 Python 库依赖时会有麻烦…")],-1)),n[47]||(n[47]=l("p",null,[l("strong",null,[o("注：在线下载 wget "),l("a",{href:"https://www.python.org/ftp/python/3.6.1/Python-3.6.1.tar.xz",target:"_blank",rel:"noreferrer"},"https://www.python.org/ftp/python/3.6.1/Python-3.6.1.tar.xz")])],-1)),n[48]||(n[48]=l("p",null,[l("strong",null,"互动： python2.7和python3.5冲突了怎么办？ 老程序需要使用2.7，新程序需要3.6？")],-1)),n[49]||(n[49]=l("p",null,[l("strong",null,"3"),o("**、建立 Python 虚拟环境**")],-1)),n[50]||(n[50]=l("p",null,[l("strong",null,"因为 CentOS 6/7 自带的是 Python2，而 Yum 等工具依赖原来的 Python，为了不扰乱原来的环境我们来使用 Python 虚拟环境")],-1)),n[51]||(n[51]=l("p",null,[l("strong",null,"[root@Andu66 ~]# cd /opt")],-1)),n[52]||(n[52]=l("p",null,[l("strong",null,"[root@Andu66 ~]# python3 -m venv py3")],-1)),n[53]||(n[53]=l("p",null,[l("strong",null,"[root@Andu66 ~]# source /opt/py3/bin/activate")],-1)),n[54]||(n[54]=l("p",null,[o("**(py3) [root@Andu66 ~]# #**"),l("strong",null,"切换成功的，前面有一个py3 标识")],-1)),n[55]||(n[55]=l("p",null,[l("strong",null,"#"),o(),l("strong",null,"看到下面的提示符代表成功，以后运行 Jumpserver 都要先运行以上 source 命令，以下所有命令均在该虚拟环境中运行")],-1)),n[56]||(n[56]=l("p",null,[l("strong",null,"这一招学到手:1")],-1)),n[57]||(n[57]=l("h2",{id:"xo-1-4-安装-jumpserver-1-0-0",tabindex:"-1"},[o("xo.1.4 安装 Jumpserver 1.0.0 "),l("a",{class:"header-anchor",href:"#xo-1-4-安装-jumpserver-1-0-0","aria-label":'Permalink to "xo.1.4 安装 Jumpserver 1.0.0"'},"​")],-1)),n[58]||(n[58]=l("p",null,[l("strong",null,"1"),o("**、下载或 Clone 项目**")],-1)),n[59]||(n[59]=l("p",null,[l("strong",null,"项目提交较多 git clone 时较大，你可以选择去 Github 项目页面直接下载zip包。")],-1)),n[60]||(n[60]=l("p",null,[o("**(py3) [root@Andu66 ~]# cd /opt/jumpserver/ #**"),l("strong",null,"我们已经提前下载")],-1)),n[61]||(n[61]=l("p",null,[l("strong",null,"注：在线下载方法：")],-1)),n[62]||(n[62]=l("p",null,[l("strong",null,[o("git clone --depth=1 "),l("a",{href:"https://github.com/jumpserver/jumpserver.git",target:"_blank",rel:"noreferrer"},"https://github.com/jumpserver/jumpserver.git"),o(" && cd jumpserver && git checkout master")])],-1)),n[63]||(n[63]=l("p",null,[l("strong",null,"注：depth用于指定克隆深度，为1即表示只克隆最近一次commit")],-1)),n[64]||(n[64]=l("p",null,[l("strong",null,"2"),o("**、 安装依赖 RPM 包**")],-1)),n[65]||(n[65]=l("p",null,[l("strong",null,"[root@Andu66 ~]# cd /opt/jumpserver/requirements")],-1)),n[66]||(n[66]=l("p",null,[l("strong",null,"[root@Andu66 ~]# yum -y install $(cat rpm_requirements.txt)")],-1)),n[67]||(n[67]=l("p",null,[l("strong",null,"3"),o("**、 安装 Python 库依赖**")],-1)),n[68]||(n[68]=l("p",null,[l("strong",null,"[root@Andu66 ~]# cd /opt/jumpserver/requirements")],-1)),n[69]||(n[69]=l("p",null,[l("strong",null,"[root@Andu66 ~]# source /opt/py3/bin/activate")],-1)),n[70]||(n[70]=l("p",null,[l("strong",null,"(py3) [root@Andu66 ~]# pip -V")],-1)),n[71]||(n[71]=l("p",null,[l("strong",null,"pip 9.0.1 from /opt/py3/lib/python3.6/site-packages (python 3.6)")],-1)),n[72]||(n[72]=l("p",null,[l("strong",null,"方法1：离线安装：")],-1)),n[73]||(n[73]=l("p",null,[l("strong",null,"(py3) [root@Andu66 python-package]# cd /opt/python-package")],-1)),n[74]||(n[74]=l("p",null,[l("strong",null,"(py3) [root@Andu66 ~]# pip install ./*")],-1)),n[75]||(n[75]=l("p",null,[l("strong",null,"方法2：在线安装：(py3) [root@Andu66 ~]# pip install -r requirements.txt")],-1)),n[76]||(n[76]=l("p",null,[l("strong",null,"pip"),o(),l("strong",null,"是一个安装和管理 Python 包的工具，相当于yum命令")],-1)),n[77]||(n[77]=l("p",null,[l("strong",null,"4"),o("**、安装 Redis, Jumpserver 使用 Redis 做 cache 和 celery broke**")],-1)),n[78]||(n[78]=l("p",null,[l("strong",null,"[root@Andu66 ~]# yum -y install redis")],-1)),n[79]||(n[79]=l("p",null,[l("strong",null,"[root@Andu66 ~]# systemctl enable redis ; systemctl start redis")],-1)),n[80]||(n[80]=l("p",null,[l("strong",null,"5"),o("**、安装 MySQL**")],-1)),n[81]||(n[81]=l("p",null,[l("strong",null,"本教程使用 Mysql 作为数据库，如果不使用 Mysql 可以跳过相关 Mysql 安装和配置")],-1)),n[82]||(n[82]=l("p",null,[l("strong",null,"[root@Andu66 ~]# yum install mariadb mariadb-devel mariadb-server -y")],-1)),n[83]||(n[83]=l("p",null,[l("strong",null,"[root@Andu66 ~]# systemctl enable mariadb ; systemctl start mariadb")],-1)),n[84]||(n[84]=l("p",null,[l("strong",null,"6"),o("**、建数据库 Jumpserver 并授权**")],-1)),n[85]||(n[85]=l("p",null,[l("strong",null,"[root@Andu66 ~]# mysql")],-1)),n[86]||(n[86]=l("p",null,[l("strong",null,"MariaDB [(none)]> create database jumpserver default charset 'utf8';")],-1)),n[87]||(n[87]=l("p",null,[l("strong",null,"MariaDB [(none)]> grant all on jumpserver.* to 'jumpserver'@'127.0.0.1' identified by '12xo56';")],-1)),n[88]||(n[88]=l("p",null,[l("strong",null,"MariaDB [(none)]> exit;")],-1)),n[89]||(n[89]=l("p",null,[l("strong",null,"7"),o("**、改 Jumpserver 配置文件**")],-1)),n[90]||(n[90]=l("p",null,[l("strong",null,"[root@Andu66 ~]# cd /opt/jumpserver")],-1)),n[91]||(n[91]=l("p",null,[l("strong",null,"[root@Andu66 ~]# cp config_example.py config.py")],-1)),n[92]||(n[92]=l("p",null,[l("strong",null,"[root@Andu66 ~]# vim config.py")],-1)),n[93]||(n[93]=l("p",null,[l("strong",null,"#"),o(),l("strong",null,"我们计划修改 DevelopmentConfig 中的配置，因为默认 Jumpserver 使用该配置，它继承自 Config")],-1)),n[94]||(n[94]=l("p",null,[l("strong",null,"注意: 配置文件是 Python 格式，不要用 TAB，而要用空格")],-1)),n[95]||(n[95]=l("p",null,[l("strong",null,"class DevelopmentConfig(Config):")],-1)),n[96]||(n[96]=l("p",null,[l("strong",null,"DEBUG = True")],-1)),n[97]||(n[97]=l("p",null,[l("strong",null,"DB_ENGINE = 'mysql'")],-1)),n[98]||(n[98]=l("p",null,[l("strong",null,"DB_HOST = '127.0.0.1'")],-1)),n[99]||(n[99]=l("p",null,[l("strong",null,"DB_PORT = 3306")],-1)),n[100]||(n[100]=l("p",null,[l("strong",null,"DB_USER = 'jumpserver'")],-1)),n[101]||(n[101]=l("p",null,[l("strong",null,"DB_PASSWORD = '12xo56'")],-1)),n[102]||(n[102]=l("p",null,[l("strong",null,"DB_NAME = 'jumpserver'")],-1)),n[103]||(n[103]=l("p",null,[l("strong",null,"如下：一定要注意前面空格的对齐。")],-1)),n[104]||(n[104]=l("figure",null,[l("img",{src:"https://www.xoxoyun.cn/usr/uploads/2020/02/2466249223.png",alt:"4.png",loading:"lazy",decoding:"async"})],-1)),n[105]||(n[105]=l("p",null,[l("strong",null,"8"),o("**、成数据库表结构和初始化数据**")],-1)),n[106]||(n[106]=l("p",null,[l("strong",null,"(py3) [root@Andu66 jumpserver]# cd /opt/jumpserver/utils")],-1)),n[107]||(n[107]=l("p",null,[o("**(py3) [root@Andu66 jumpserver]# bash make_migrations.sh #**"),l("strong",null,"注，在执行这一条命令之前，必续保障之前的pip install ./* 命令已经执行完了，不然后导入不了Django等软件包。")],-1)),n[108]||(n[108]=l("p",null,[l("strong",null,"9"),o("**、行 Jumpserver**")],-1)),n[109]||(n[109]=l("p",null,[l("strong",null,"(py3) [root@Andu66 jumpserver]# cd /opt/jumpserver")],-1)),n[110]||(n[110]=l("p",null,[l("strong",null,"(py3) [root@Andu66 jumpserver]# chmod +x jms")],-1)),n[111]||(n[111]=l("p",null,[l("strong",null,"(py3) [root@Andu66 jumpserver]# ./jms start all -d #"),o(),l("strong",null,"后台运行使用 -d 参数")],-1)),n[112]||(n[112]=l("p",null,[l("strong",null,"注： ./jms start all #前台运行")],-1)),n[113]||(n[113]=l("p",null,[l("strong",null,"如果运行失败了，重新启动一下。")],-1)),n[114]||(n[114]=l("p",null,[o("**#**"),l("strong",null,"启动服务的脚本，使用方式./jms start|stop|status|restart all 后台运行请添加 -d 参数")],-1)),n[115]||(n[115]=l("p",null,[l("strong",null,"测试：")],-1)),n[116]||(n[116]=l("p",null,[l("strong",null,[o("访问 "),l("a",{href:"http://192.168.10.66:8080/",target:"_blank",rel:"noreferrer"},"http://192.168.10.66:8080/"),o(" 用户 ： admin 密码： admin")])],-1)),n[117]||(n[117]=l("figure",null,[l("img",{src:"https://www.xoxoyun.cn/usr/uploads/2020/02/950863279.png",alt:"!img(file:///C:/Users/dell/AppData/Local/Temp/msohtmlclip1/01/clip_image012.jpg)",loading:"lazy",decoding:"async"})],-1)),n[118]||(n[118]=l("p",null,[l("strong",null,"这里需要使用8080端口来访问页面。后期搭建 nginx 代理，就可以直接使用80端口正常访问了")],-1)),n[119]||(n[119]=l("p",null,[l("strong",null,"附上重启的方法")],-1)),n[120]||(n[120]=l("p",null,[l("strong",null,"(py3) [root@Andu66 jumpserver]# ./jms restart -d")],-1)),n[121]||(n[121]=l("h1",{id:"xo-2-安装-coco组件",tabindex:"-1"},[o("xo.2 安装 Coco组件 "),l("a",{class:"header-anchor",href:"#xo-2-安装-coco组件","aria-label":'Permalink to "xo.2 安装 Coco组件"'},"​")],-1)),n[122]||(n[122]=l("h2",{id:"xo-2-1-安装coco组件",tabindex:"-1"},[o("xo.2.1 安装coco组件 "),l("a",{class:"header-anchor",href:"#xo-2-1-安装coco组件","aria-label":'Permalink to "xo.2.1  安装coco组件"'},"​")],-1)),n[123]||(n[123]=l("p",null,[l("strong",null,"1"),o("**、默认点击web终端，弹出：**")],-1)),n[124]||(n[124]=l("p",null,[o("下载coco配置包，git地址： git clone "),l("a",{href:"https://github.com/jumpserver/coco.git",target:"_blank",rel:"noreferrer"},"https://github.com/jumpserver/coco.git")],-1)),n[125]||(n[125]=l("figure",null,[l("img",{src:"https://www.xoxoyun.cn/usr/uploads/2020/02/987735106.png",alt:"!img(file:///C:/Users/dell/AppData/Local/Temp/msohtmlclip1/01/clip_image014.jpg)",loading:"lazy",decoding:"async"})],-1)),n[126]||(n[126]=l("p",null,[l("strong",null,"所以接下来，我们安装luna和coco：")],-1)),n[127]||(n[127]=l("p",null,[l("strong",null,"coco****概述：coco实现了 SSH Server 和 Web Terminal Server 的组件，提供 SSH 和 WebSocket 接口, 使用 Paramiko 和 Flask 开发。")],-1)),n[128]||(n[128]=l("p",null,[o("**(py3) [root@Andu66 jumpserver]# cd /opt/coco #**"),l("strong",null,"直接使用离线代码")],-1)),n[129]||(n[129]=l("p",null,[l("strong",null,"(py3) [root@Andu66 jumpserver]# source /opt/py3/bin/activate")],-1)),n[130]||(n[130]=l("p",null,[l("strong",null,[o("附：在线下载代码：# git clone "),l("a",{href:"https://github.com/jumpserver/coco.git",target:"_blank",rel:"noreferrer"},"https://github.com/jumpserver/coco.git"),o(" && cd coco && git checkout master")])],-1)),n[131]||(n[131]=l("p",null,[l("strong",null,"2"),o("**、 安装coco的依赖包，主要有rpm和python包**")],-1)),n[132]||(n[132]=l("p",null,[l("strong",null,"(py3) [root@Andu66 jumpserver]# cd /opt/coco/requirements")],-1)),n[133]||(n[133]=l("p",null,[l("strong",null,"(py3) [root@Andu66 jumpserver]# yum -y install $(cat rpm_requirements.txt)")],-1)),n[134]||(n[134]=l("p",null,[o("**(py3) [root@Andu66 jumpserver]# pip install -r requirements.txt #**"),l("strong",null,"前面已经离线安装过python的包，这里就很快安装成功了，或提示已经安装成功。")],-1)),n[135]||(n[135]=l("p",null,[l("strong",null,"注：扩展： pip download -r requirements.txt #使用download可以下载python包到本地")],-1)),n[136]||(n[136]=l("p",null,[l("strong",null,"3"),o("**、查看配置文件并运行**")],-1)),n[137]||(n[137]=l("p",null,[l("strong",null,"(py3) [root@Andu66 jumpserver]# cd /opt/coco")],-1)),n[138]||(n[138]=l("p",null,[l("strong",null,"(py3) [root@Andu66 jumpserver]# cp conf_example.py conf.py #"),o(),l("strong",null,"如果 coco 与 jumpserver 分开部署，请手动修改 conf.py")],-1)),n[139]||(n[139]=l("p",null,[l("strong",null,"(py3) [root@Andu66 coco]# chmod +x cocod")],-1)),n[140]||(n[140]=l("p",null,[o("**(py3) [root@Andu66 jumpserver]# ./cocod start -d #**"),l("strong",null,"后台运行使用 -d 参数")],-1)),n[141]||(n[141]=l("p",null,[l("strong",null,"#"),o(),l("strong",null,"新版本更新了运行脚本，使用方式./cocod start|stop|status|restart 后台运行请添加 -d 参数")],-1)),n[142]||(n[142]=l("div",{class:"language-"},[l("button",{title:"Copy code",class:"copy"}),l("span",{class:"lang"}),l("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[l("code",{"v-pre":""},[l("span",{class:"line"},[l("span")])])]),l("button",{class:"code-block-unfold-btn"})],-1)),n[143]||(n[143]=l("h1",{id:"xo-3-安装web-terminal前端-luna组件-配置nginx整合各组件",tabindex:"-1"},[o("xo.3 安装Web-Terminal前端-Luna组件-配置Nginx整合各组件 "),l("a",{class:"header-anchor",href:"#xo-3-安装web-terminal前端-luna组件-配置nginx整合各组件","aria-label":'Permalink to "xo.3 安装Web-Terminal前端-Luna组件-配置Nginx整合各组件"'},"​")],-1)),n[144]||(n[144]=l("h2",{id:"xo-3-1-安装luna组件",tabindex:"-1"},[o("xo.3.1 安装luna组件 "),l("a",{class:"header-anchor",href:"#xo-3-1-安装luna组件","aria-label":'Permalink to "xo.3.1 安装luna组件"'},"​")],-1)),n[145]||(n[145]=l("p",null,[l("strong",null,"Luna****概述：Luna现在是 Web Terminal 前端，计划前端页面都由该项目提供，Jumpserver 只提供 API，不再负责后台渲染html等。")],-1)),n[146]||(n[146]=l("p",null,[l("strong",null,[o("访问（"),l("a",{href:"https://github.com/jumpserver/luna/releases%EF%BC%89%E4%B8%8B%E8%BD%BD%E5%AF%B9%E5%BA%94%E7%89%88%E6%9C%AC%E7%9A%84",target:"_blank",rel:"noreferrer"},"https://github.com/jumpserver/luna/releases）下载对应版本的"),o(" release 包，直接解压，不需要编译")])],-1)),n[147]||(n[147]=l("p",null,[l("strong",null,"解压 Luna")],-1)),n[148]||(n[148]=l("p",null,[l("strong",null,"(py3) [root@Andu66 jumpserver]# cd /opt")],-1)),n[149]||(n[149]=l("p",null,[l("strong",null,"(py3) [root@Andu66 jumpserver]# tar xvf luna.tar.gz")],-1)),n[150]||(n[150]=l("p",null,[l("strong",null,"(py3) [root@Andu66 jumpserver]# ls /opt/luna")],-1)),n[151]||(n[151]=l("p",null,[l("strong",null,"注：在线下载")],-1)),n[152]||(n[152]=l("p",null,[l("strong",null,[o("#wget "),l("a",{href:"https://github.com/jumpserver/luna/releases/download/v1.0.0/luna.tar.gz",target:"_blank",rel:"noreferrer"},"https://github.com/jumpserver/luna/releases/download/v1.0.0/luna.tar.gz")])],-1)),n[153]||(n[153]=l("h2",{id:"xo-3-2-配置-nginx-整合各组件",tabindex:"-1"},[o("xo.3.2 配置 Nginx 整合各组件 "),l("a",{class:"header-anchor",href:"#xo-3-2-配置-nginx-整合各组件","aria-label":'Permalink to "xo.3.2 配置 Nginx 整合各组件"'},"​")],-1)),n[154]||(n[154]=l("p",null,[l("strong",null,"安装 Nginx 根据喜好选择安装方式和版本")],-1)),n[155]||(n[155]=l("p",null,[l("strong",null,"(py3) [root@Andu66 jumpserver]# yum -y install nginx")],-1)),n[156]||(n[156]=l("p",null,[l("strong",null,"5.2"),o(),l("strong",null,"准备配置文件 修改 /etc/nginx/conf.d/jumpserver.conf")],-1)),n[157]||(n[157]=l("p",null,[l("strong",null,"内容如下：")],-1)),n[158]||(n[158]=l("p",null,[l("strong",null,"(py3) [root@Andu66 opt]# vim /etc/nginx/nginx.conf")],-1)),n[159]||(n[159]=l("p",null,[l("strong",null,"删除第38行到 57行中server {。。。}相关的内容，在vim命令模式，输入38gg，快速跳到38行，然后输入20dd，就可以删除。")],-1)),n[160]||(n[160]=l("p",null,[l("strong",null,"删除后，在38行插入以一下内容:")],-1)),n[161]||(n[161]=l("div",{class:"language-"},[l("button",{title:"Copy code",class:"copy"}),l("span",{class:"lang"}),l("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[l("code",{"v-pre":""},[l("span",{class:"line"},[l("span",null,"server {")]),o(`
`),l("span",{class:"line"},[l("span",null,"    listen 80;")]),o(`
`),l("span",{class:"line"},[l("span",null," ")]),o(`
`),l("span",{class:"line"},[l("span",null,"    proxy_set_header X-Real-IP $remote_addr;")]),o(`
`),l("span",{class:"line"},[l("span",null,"    proxy_set_header Host $host;")]),o(`
`),l("span",{class:"line"},[l("span",null,"    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;")]),o(`
`),l("span",{class:"line"},[l("span",null," ")]),o(`
`),l("span",{class:"line"},[l("span",null,"    location /luna/ {")]),o(`
`),l("span",{class:"line"},[l("span",null,"        try_files $uri / /index.html;")]),o(`
`),l("span",{class:"line"},[l("span",null,"        alias /opt/luna/;")]),o(`
`),l("span",{class:"line"},[l("span",null,"    }")]),o(`
`),l("span",{class:"line"},[l("span",null," ")]),o(`
`),l("span",{class:"line"},[l("span",null,"    location /media/ {")]),o(`
`),l("span",{class:"line"},[l("span",null,"        add_header Content-Encoding gzip;")]),o(`
`),l("span",{class:"line"},[l("span",null,"        root /opt/jumpserver/data/;")]),o(`
`),l("span",{class:"line"},[l("span",null,"    }")]),o(`
`),l("span",{class:"line"},[l("span",null," ")]),o(`
`),l("span",{class:"line"},[l("span",null,"    location /static/ {")]),o(`
`),l("span",{class:"line"},[l("span",null,"        root /opt/jumpserver/data/;")]),o(`
`),l("span",{class:"line"},[l("span",null,"    }")]),o(`
`),l("span",{class:"line"},[l("span",null," ")]),o(`
`),l("span",{class:"line"},[l("span",null,"    location /socket.io/ {")]),o(`
`),l("span",{class:"line"},[l("span",null,"        proxy_pass       http://localhost:5000/socket.io/;  # 如果coco安装在别的服务器，请填写它的ip")]),o(`
`),l("span",{class:"line"},[l("span",null,"        proxy_buffering off;")]),o(`
`),l("span",{class:"line"},[l("span",null,"        proxy_http_version 1.1;")]),o(`
`),l("span",{class:"line"},[l("span",null,"        proxy_set_header Upgrade $http_upgrade;")]),o(`
`),l("span",{class:"line"},[l("span",null,'        proxy_set_header Connection "upgrade";')]),o(`
`),l("span",{class:"line"},[l("span",null,"    }")]),o(`
`),l("span",{class:"line"},[l("span",null," ")]),o(`
`),l("span",{class:"line"},[l("span",null,"    location / {")]),o(`
`),l("span",{class:"line"},[l("span",null,"        proxy_pass http://localhost:8080;  # 如果jumpserver安装在别的服务器，请填写它的ip")]),o(`
`),l("span",{class:"line"},[l("span",null,"    }")]),o(`
`),l("span",{class:"line"},[l("span",null,"}")])])]),l("button",{class:"code-block-unfold-btn"})],-1)),n[162]||(n[162]=l("h2",{id:"xo-3-3-运行-nginx",tabindex:"-1"},[o("xo.3.3 运行 Nginx "),l("a",{class:"header-anchor",href:"#xo-3-3-运行-nginx","aria-label":'Permalink to "xo.3.3 运行 Nginx"'},"​")],-1)),n[163]||(n[163]=l("p",null,[l("strong",null,"(py3) [root@Andu66 opt]# nginx -t #"),o(),l("strong",null,"检测配置文件")],-1)),n[164]||(n[164]=l("p",null,[l("strong",null,"(py3) [root@Andu66 jumpserver]# systemctl start nginx ; systemctl enable nginx")],-1)),n[165]||(n[165]=l("h2",{id:"xo-3-4-接受coco注册",tabindex:"-1"},[o("xo.3.4 接受coco注册 "),l("a",{class:"header-anchor",href:"#xo-3-4-接受coco注册","aria-label":'Permalink to "xo.3.4 接受coco注册"'},"​")],-1)),n[166]||(n[166]=l("p",null,[l("strong",null,"到会话管理-终端管理 接受 Coco的注册。点接受。")],-1)),n[167]||(n[167]=l("figure",null,[l("img",{src:"https://www.xoxoyun.cn/usr/uploads/2020/02/2219189626.png",alt:"!img(file:///C:/Users/dell/AppData/Local/Temp/msohtmlclip1/01/clip_image018.jpg)",loading:"lazy",decoding:"async"})],-1)),n[168]||(n[168]=l("figure",null,[l("img",{src:"https://www.xoxoyun.cn/usr/uploads/2020/02/3820716859.png",alt:"8.png",loading:"lazy",decoding:"async"})],-1)),n[169]||(n[169]=l("p",null,[l("strong",null,"再刷新页面：")],-1)),n[170]||(n[170]=l("figure",null,[l("img",{src:"https://www.xoxoyun.cn/usr/uploads/2020/02/1909261169.png",alt:"!img(file:///C:/Users/dell/AppData/Local/Temp/msohtmlclip1/01/clip_image022.jpg)",loading:"lazy",decoding:"async"})],-1)),n[171]||(n[171]=l("p",null,[l("em",null,[l("strong",null,"*"),o(),l("strong",null,"测试连接*")])],-1)),n[172]||(n[172]=l("p",null,[o("**(py3) [root@Andu66 jumpserver]# ssh -p2222 "),l("a",{href:"mailto:admin@192.168.10.66",target:"_blank",rel:"noreferrer"},"admin@192.168.10.66"),o(" #**"),l("strong",null,"密码: admin")],-1)),n[173]||(n[173]=l("figure",null,[l("img",{src:"https://www.xoxoyun.cn/usr/uploads/2020/02/3248456103.png",alt:"!img(file:///C:/Users/dell/AppData/Local/Temp/msohtmlclip1/01/clip_image024.jpg)",loading:"lazy",decoding:"async"})],-1)),n[174]||(n[174]=l("p",null,[l("strong",null,"到此安装成功。")],-1)),n[175]||(n[175]=l("h1",{id:"xo-4-jumpserver平台系统初始化",tabindex:"-1"},[o("xo.4 jumpserver平台系统初始化 "),l("a",{class:"header-anchor",href:"#xo-4-jumpserver平台系统初始化","aria-label":'Permalink to "xo.4 jumpserver平台系统初始化"'},"​")],-1)),n[176]||(n[176]=l("h2",{id:"xo-4-1-系统基本设置",tabindex:"-1"},[o("xo.4.1 系统基本设置 "),l("a",{class:"header-anchor",href:"#xo-4-1-系统基本设置","aria-label":'Permalink to "xo.4.1 系统基本设置"'},"​")],-1)),n[177]||(n[177]=l("p",null,[l("strong",null,[o("这里要写成自己真实的URL地址，不然后期用户访问不了。"),l("a",{href:"http://192.168.10.66",target:"_blank",rel:"noreferrer"},"http://192.168.10.66")])],-1)),n[178]||(n[178]=l("figure",null,[l("img",{src:"https://www.xoxoyun.cn/usr/uploads/2020/02/757874155.png",alt:"!img(file:///C:/Users/dell/AppData/Local/Temp/msohtmlclip1/01/clip_image026.jpg)!img",loading:"lazy",decoding:"async"})],-1)),n[179]||(n[179]=l("figure",null,[l("img",{src:"https://www.xoxoyun.cn/usr/uploads/2020/02/3773867249.png",alt:"12.png",loading:"lazy",decoding:"async"})],-1)),n[180]||(n[180]=l("h2",{id:"xo-4-2-配置邮件发送服务器",tabindex:"-1"},[o("xo.4.2 配置邮件发送服务器 "),l("a",{class:"header-anchor",href:"#xo-4-2-配置邮件发送服务器","aria-label":'Permalink to "xo.4.2 配置邮件发送服务器"'},"​")],-1)),n[181]||(n[181]=l("p",null,[l("strong",null,'点击页面上边的"邮件设置" TAB ，进入邮件设置页面：')],-1)),n[182]||(n[182]=l("p",null,[l("strong",null,"SMTP****服务器：smtp.163.com")],-1)),n[183]||(n[183]=l("figure",null,[l("img",{src:"https://www.xoxoyun.cn/usr/uploads/2020/02/1787807832.png",alt:"!img(file:///C:/Users/dell/AppData/Local/Temp/msohtmlclip1/01/clip_image030.jpg)",loading:"lazy",decoding:"async"})],-1)),n[184]||(n[184]=l("p",null,[l("strong",null,"注：自己邮箱要开启smtp和pop3服务。")],-1)),n[185]||(n[185]=l("p",null,"开启POP3/SMTP/IMAP服务方法：",-1)),n[186]||(n[186]=l("p",null,[l("strong",null,[o("请登录"),l("a",{href:"http://email.163.com/",target:"_blank",rel:"noreferrer"},"163邮箱"),o("，点击页面右上角的“设置”—在“高级”下，点“POP3/SMTP/IMAP”，勾选图中两个选项，点击确定。即可开启成功。开通后即可用"),l("a",{href:"http://help.163.com/09/1218/14/5QQS7HIA00753VB8.html",target:"_blank",rel:"noreferrer"},"闪电邮"),o("、"),l("a",{href:"http://help.163.com/09/1222/17/5R5GPV6C00753VB8.html",target:"_blank",rel:"noreferrer"},"Outlook"),o("等软件收发邮件了。")])],-1)),n[187]||(n[187]=l("p",null,[l("strong",null,[o("![什么是POP3、SMTP及IMAP？　]"),l("img",{src:"https://www.xoxoyun.cn/usr/uploads/2020/02/3526646633.png",alt:"(file:///C:/Users/dell/AppData/Local/Temp/msohtmlclip1/01/clip_image031.gif)"})])],-1)),n[188]||(n[188]=l("p",null,[o("服务器地址**：POP3服务器：pop.163.com |** "),l("strong",null,"SMTP****服务器：smtp.163.com | IMAP服务器：imap.163.com")],-1)),n[189]||(n[189]=l("p",null,[l("strong",null,"注：配置完后，需要重启一下服务。不然后期创建用户，收不到邮件。")],-1)),n[190]||(n[190]=l("p",null,[l("strong",null,"(py3) [root@Andu66 jumpserver]# /opt/jumpserver/jms stop all -d")],-1)),n[191]||(n[191]=l("p",null,[l("strong",null,"(py3) [root@Andu66 jumpserver]# /opt/jumpserver/jms start all -d")],-1)),n[192]||(n[192]=l("p",null,[l("strong",null,'配置邮件服务后，点击页面的"测试连接"按钮，如果配置正确，Jumpserver 会发送一条测试邮件到您的 SMTP 账号邮箱里面：')],-1)),n[193]||(n[193]=l("figure",null,[l("img",{src:"https://www.xoxoyun.cn/usr/uploads/2020/02/4035821686.png",alt:"!img(file:///C:/Users/dell/AppData/Local/Temp/msohtmlclip1/01/clip_image033.jpg)",loading:"lazy",decoding:"async"})],-1)),n[194]||(n[194]=l("p",null,[l("strong",null,"查看邮箱：")],-1)),n[195]||(n[195]=l("figure",null,[l("img",{src:"https://www.xoxoyun.cn/usr/uploads/2020/02/468941603.png",alt:"!img(file:///C:/Users/dell/AppData/Local/Temp/msohtmlclip1/01/clip_image035.jpg)",loading:"lazy",decoding:"async"})],-1)),n[196]||(n[196]=l("p",null,[l("strong",null,"收到邮件后，点提交：")],-1)),n[197]||(n[197]=l("figure",null,[l("img",{src:"https://www.xoxoyun.cn/usr/uploads/2020/02/976514992.png",alt:"!img(file:///C:/Users/dell/AppData/Local/Temp/msohtmlclip1/01/clip_image037.jpg)",loading:"lazy",decoding:"async"})],-1)),n[198]||(n[198]=l("p",null,[l("strong",null,"注意： 在使用jumpserver过程中，有一步是系统用户推送，要推送成功，client（后端服务器）要满足以下条件： 1）后端服务器需要有python、sudo环境才能使用推送用户，批量命令等功能 2）后端服务器如果开启了selinux，请安装libselinux-python。一般情况服务器上都关闭了selinux")],-1)),n[199]||(n[199]=l("h1",{id:"xo-5-使用jumpserver-管理王者荣耀数万台游戏服务器",tabindex:"-1"},[o("xo.5 使用jumpserver 管理王者荣耀数万台游戏服务器 "),l("a",{class:"header-anchor",href:"#xo-5-使用jumpserver-管理王者荣耀数万台游戏服务器","aria-label":'Permalink to "xo.5 使用jumpserver 管理王者荣耀数万台游戏服务器"'},"​")],-1)),n[200]||(n[200]=l("h2",{id:"xo-5-1-用户管理",tabindex:"-1"},[o("xo.5.1 用户管理 "),l("a",{class:"header-anchor",href:"#xo-5-1-用户管理","aria-label":'Permalink to "xo.5.1 用户管理"'},"​")],-1)),n[201]||(n[201]=l("p",null,[l("strong",null,"1"),o("**、添加用户组。**")],-1)),n[202]||(n[202]=l("p",null,[l("strong",null,"用户名即 Jumpserver 登录账号。用户组是用于资产授权，当某个资产对一个用户组授权后，这个用户组下面的所有用户就都可以使用这个资产了。角色用于区分一个用户是管理员还是普通用户。")],-1)),n[203]||(n[203]=l("p",null,[l("strong",null,"点击用户管理 —> 查看用户组 —> 添加用户组")],-1)),n[204]||(n[204]=l("figure",null,[l("img",{src:"https://www.xoxoyun.cn/usr/uploads/2020/02/525957325.png",alt:"!img(file:///C:/Users/dell/AppData/Local/Temp/msohtmlclip1/01/clip_image039.jpg)",loading:"lazy",decoding:"async"})],-1)),n[205]||(n[205]=l("p",null,[l("strong",null,"添加新的小组 —> 王者荣耀-华北区运维部门")],-1)),n[206]||(n[206]=l("figure",null,[l("img",{src:"https://www.xoxoyun.cn/usr/uploads/2020/02/3232072531.png",alt:"!img(file:///C:/Users/dell/AppData/Local/Temp/msohtmlclip1/01/clip_image041.jpg)",loading:"lazy",decoding:"async"})],-1)),n[207]||(n[207]=l("p",null,[l("strong",null,"查看刚才添加的组")],-1)),n[208]||(n[208]=l("figure",null,[l("img",{src:"https://www.xoxoyun.cn/usr/uploads/2020/02/4175844189.png",alt:"!img(file:///C:/Users/dell/AppData/Local/Temp/msohtmlclip1/01/clip_image043.jpg)",loading:"lazy",decoding:"async"})],-1)),n[209]||(n[209]=l("p",null,[l("strong",null,"2"),o("**、添加用户**")],-1)),n[210]||(n[210]=l("p",null,[l("strong",null,"点击用户管理 —> 用户列表 —> 创建用户")],-1)),n[211]||(n[211]=l("p",null,[l("strong",null,"其中，名称是真实姓名，用户名即 Jumpserver 登录账号。")],-1)),n[212]||(n[212]=l("figure",null,[l("img",{src:"https://www.xoxoyun.cn/usr/uploads/2020/02/3694903309.png",alt:"!img(file:///C:/Users/dell/AppData/Local/Temp/msohtmlclip1/01/clip_image045.jpg)",loading:"lazy",decoding:"async"})],-1)),n[213]||(n[213]=l("figure",null,[l("img",{src:"https://www.xoxoyun.cn/usr/uploads/2020/02/2914417934.png",alt:"!img(file:///C:/Users/dell/AppData/Local/Temp/msohtmlclip1/01/clip_image047.jpg)",loading:"lazy",decoding:"async"})],-1)),n[214]||(n[214]=l("p",null,[l("strong",null,"然后点提交。")],-1)),n[215]||(n[215]=l("p",null,[l("strong",null,"查看添加的用户")],-1)),n[216]||(n[216]=l("figure",null,[l("img",{src:"https://www.xoxoyun.cn/usr/uploads/2020/02/3476289403.png",alt:"!img(file:///C:/Users/dell/AppData/Local/Temp/msohtmlclip1/01/clip_image049.jpg)",loading:"lazy",decoding:"async"})],-1)),n[217]||(n[217]=l("p",null,[l("strong",null,'成功提交用户信息后，Jumpserver 会发送一条设置"用户密码"的邮件到您填写的用户邮箱。')],-1)),n[218]||(n[218]=l("p",null,[l("strong",null,"点击链接，开始修改密码：")],-1)),n[219]||(n[219]=l("figure",null,[l("img",{src:"https://www.xoxoyun.cn/usr/uploads/2020/02/1237722763.png",alt:"!img(file:///C:/Users/dell/AppData/Local/Temp/msohtmlclip1/01/clip_image053.jpg)",loading:"lazy",decoding:"async"})],-1)),n[220]||(n[220]=l("p",null,[l("strong",null,"用户首次登录 Jumpserver，会被要求完善用户信息。")],-1)),n[221]||(n[221]=l("figure",null,[l("img",{src:"https://www.xoxoyun.cn/usr/uploads/2020/02/819598847.png",alt:"!img(file:///C:/Users/dell/AppData/Local/Temp/msohtmlclip1/01/clip_image055.jpg)",loading:"lazy",decoding:"async"})],-1)),n[222]||(n[222]=l("p",null,[l("strong",null,"这个需要用户自己生成SSH 密钥，方便后期登录：我在自己的另一台linux上，使用mk用户生成自己的ssh密钥。")],-1)),n[223]||(n[223]=l("p",null,[l("strong",null,"(py3) [root@Andu66 luna]# useradd xoxo123")],-1)),n[224]||(n[224]=l("p",null,[l("strong",null,"(py3) [root@Andu66 luna]# echo 12xo56 | passwd --stdin xoxo123")],-1)),n[225]||(n[225]=l("p",null,[l("strong",null,"[root@Andu66 opt]# su - xoxo123")],-1)),n[226]||(n[226]=l("p",null,[o("**[mk@Andu66 ~]$ ssh-keygen #**"),l("strong",null,"一路回车")],-1)),n[227]||(n[227]=l("p",null,[l("strong",null,"[mk@Andu66 ~]$ cat ~/.ssh/id_rsa.pub")],-1)),n[228]||(n[228]=l("p",null,[l("strong",null,"ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDDW+wUBeICXOoguax/sO+uhg/EkaCNVQXgCldmiRSReXrwFYNRDbTdLwOTUWs8y6mo79XvdnF8Wkk0Yy1p4xH6FOU7+TY+WX/hz7IH+/y73vJHur2UP54j3QxDTH+bv36dERcJGu8PZ2ck8uS/emxGttIacg8lM5KtUthdKD9cEXVUBzSiSkpqwkCffKcg8ZJ4rYIsucJOgNLUGwZJ71uPETg1mQHvJryPQhfkrFvUn0jkXrhjBlcko+mJPimuct8PdEWSzcUrKTRCPWAWsLWUA8mWR7Bga8WE5iUICj/KfHq2enxRClj8ZRajxt2Kei50T8BAN0EreG/oZyI4cYrr xoxo123@Andu")],-1)),n[229]||(n[229]=l("p",null,[l("strong",null,"把上面生成的公钥粘到这里：")],-1)),n[230]||(n[230]=l("figure",null,[l("img",{src:"https://www.xoxoyun.cn/usr/uploads/2020/02/2126088747.png",alt:"!img(file:///C:/Users/dell/AppData/Local/Temp/msohtmlclip1/01/clip_image057.jpg)",loading:"lazy",decoding:"async"})],-1)),n[231]||(n[231]=l("h2",{id:"xo-5-2-编辑资产树添加节点",tabindex:"-1"},[o("xo.5.2 编辑资产树添加节点 "),l("a",{class:"header-anchor",href:"#xo-5-2-编辑资产树添加节点","aria-label":'Permalink to "xo.5.2 编辑资产树添加节点"'},"​")],-1)),n[232]||(n[232]=l("p",null,[l("strong",null,"节点不能重名，右击节点可以添加、删除和重命名节点，以及进行资产相关的操作。")],-1)),n[233]||(n[233]=l("figure",null,[l("img",{src:"https://www.xoxoyun.cn/usr/uploads/2020/02/1251946814.png",alt:"!img(file:///C:/Users/dell/AppData/Local/Temp/msohtmlclip1/01/clip_image059.jpg)",loading:"lazy",decoding:"async"})],-1)),n[234]||(n[234]=l("figure",null,[l("img",{src:"https://www.xoxoyun.cn/usr/uploads/2020/02/746729145.png",alt:"!img(file:///C:/Users/dell/AppData/Local/Temp/msohtmlclip1/01/clip_image061.jpg)",loading:"lazy",decoding:"async"})],-1)),n[235]||(n[235]=l("p",null,[l("strong",null,"改成节点名字为：王者荣耀-华北区-服务器")],-1)),n[236]||(n[236]=l("h2",{id:"xo-5-3-创建管理用户",tabindex:"-1"},[o("xo.5.3 创建管理用户 "),l("a",{class:"header-anchor",href:"#xo-5-3-创建管理用户","aria-label":'Permalink to "xo.5.3  创建管理用户"'},"​")],-1)),n[237]||(n[237]=l("p",null,[l("strong",null,[o("Jumpserver****里各个用户的说明： ![简单使用jumpserver]"),l("img",{src:"https://www.xoxoyun.cn/usr/uploads/2020/02/171879106.png",alt:"(file:///C:/Users/dell/AppData/Local/Temp/msohtmlclip1/01/clip_image063.gif)"})])],-1)),n[238]||(n[238]=l("p",null,[l("strong",null,"管理用户是服务器的 root，或拥有 NOPASSWD: ALL sudo 权限的用户，Jumpserver 使用该用户来推送系统用户、获取资产硬件信息等。")],-1)),n[239]||(n[239]=l("figure",null,[l("img",{src:"https://www.xoxoyun.cn/usr/uploads/2020/02/3441084798.png",alt:"!img(file:///C:/Users/dell/AppData/Local/Temp/msohtmlclip1/01/clip_image065.jpg)",loading:"lazy",decoding:"async"})],-1)),n[240]||(n[240]=l("p",null,[l("strong",null,"王者荣耀-华北区-服务器管理用户-root 密码是： 12xo56")],-1)),n[241]||(n[241]=l("figure",null,[l("img",{src:"https://www.xoxoyun.cn/usr/uploads/2020/02/313563219.png",alt:"!img(file:///C:/Users/dell/AppData/Local/Temp/msohtmlclip1/01/clip_image067.jpg)",loading:"lazy",decoding:"async"})],-1)),n[242]||(n[242]=l("p",null,[l("strong",null,"前提，你的王者荣耀-华北区-服务器节点中所有的服务器root用户密码都是：123456")],-1)),n[243]||(n[243]=l("p",null,[l("strong",null,"这样就可以使用此root用户管理服务器。")],-1)),n[244]||(n[244]=l("h2",{id:"xo-5-4-创建系统用户",tabindex:"-1"},[o("xo.5.4 创建系统用户 "),l("a",{class:"header-anchor",href:"#xo-5-4-创建系统用户","aria-label":'Permalink to "xo.5.4  创建系统用户"'},"​")],-1)),n[245]||(n[245]=l("p",null,[l("strong",null,"系统用户是 Jumpserver 跳转登录资产时使用的用户，可以理解为登录资产用户， Jumpserver使用系统用户登录资产。")],-1)),n[246]||(n[246]=l("p",null,[l("strong",null,"系统用户的 Sudo 栏填写允许当前系统用户免sudo密码执行的程序路径，如默认的/sbin/ifconfig，意思是当前系统用户可以直接执行 ifconfig 命令或 sudo ifconfig 而不需要输入当前系统用户的密码，执行其他的命令任然需要密码，以此来达到权限控制的目的。")],-1)),n[247]||(n[247]=l("p",null,[l("strong",null,"#"),o(),l("strong",null,"此处的权限应该根据使用用户的需求汇总后定制，原则上给予最小权限即可。")],-1)),n[248]||(n[248]=l("p",null,[l("strong",null,"系统用户创建时，如果选择了自动推送 Jumpserver 会使用 Ansible 自动推送系统用户到资产中，如果资产(交换机、Windows )不支持 Ansible, 请手动填写账号密码。")],-1)),n[249]||(n[249]=l("p",null,[l("strong",null,"Linux"),o(),l("strong",null,"系统协议项务必选择 ssh 。如果用户在系统中已存在，请去掉自动生成密钥、自动推送勾选。")],-1)),n[250]||(n[250]=l("figure",null,[l("img",{src:"https://www.xoxoyun.cn/usr/uploads/2020/02/632738152.png",alt:"!img(file:///C:/Users/dell/AppData/Local/Temp/msohtmlclip1/01/clip_image069.jpg)",loading:"lazy",decoding:"async"})],-1)),n[251]||(n[251]=l("p",null,[l("strong",null,"增加一个：检查服务器运行状态的用户： user 权限： /sbin/ifconfig,/usr/bin/top,/usr/bin/free")],-1)),n[252]||(n[252]=l("figure",null,[l("img",{src:"https://www.xoxoyun.cn/usr/uploads/2020/02/1422730946.png",alt:"!img(file:///C:/Users/dell/AppData/Local/Temp/msohtmlclip1/01/clip_image071.jpg)",loading:"lazy",decoding:"async"})],-1)),n[253]||(n[253]=l("p",null,[l("strong",null,"再加一个： 系统管理员用户：manager")],-1)),n[254]||(n[254]=l("figure",null,[l("img",{src:"https://www.xoxoyun.cn/usr/uploads/2020/02/3511509906.png",alt:"!img(file:///C:/Users/dell/AppData/Local/Temp/msohtmlclip1/01/clip_image073.jpg)",loading:"lazy",decoding:"async"})],-1)),n[255]||(n[255]=l("h2",{id:"xo-5-5-创建资产",tabindex:"-1"},[o("xo.5.5 创建资产 "),l("a",{class:"header-anchor",href:"#xo-5-5-创建资产","aria-label":'Permalink to "xo.5.5  创建资产"'},"​")],-1)),n[256]||(n[256]=l("p",null,[l("strong",null,"点击页面左侧的“资产管理”菜单下的“资产列表”按钮，查看当前所有的资产列表。")],-1)),n[257]||(n[257]=l("p",null,[l("strong",null,"点击页面左上角的“创建资产”按钮，进入资产创建页面，填写资产信息。")],-1)),n[258]||(n[258]=l("p",null,[l("strong",null,"IP"),o(),l("strong",null,'地址和管理用户要确保正确，确保所选的管理用户的用户名和密码能"牢靠"地登录指定的 IP 主机上。资产的系统平台也务必正确填写。公网 IP 信息只用于展示，可不填，Jumpserver 连接资产使用的是 IP 信息。')],-1)),n[259]||(n[259]=l("figure",null,[l("img",{src:"https://www.xoxoyun.cn/usr/uploads/2020/02/1861558840.png",alt:"!img(file:///C:/Users/dell/AppData/Local/Temp/msohtmlclip1/01/clip_image075.jpg)",loading:"lazy",decoding:"async"})],-1)),n[260]||(n[260]=l("p",null,[l("strong",null,"开启虚拟机Andu101.cn。 一会把这台机器当成资源添加平台中。")],-1)),n[261]||(n[261]=l("p",null,[o("**game64.xuegod.cn-**"),l("strong",null,"王者荣耀-华北区 192.168.10.101")],-1)),n[262]||(n[262]=l("figure",null,[l("img",{src:"https://www.xoxoyun.cn/usr/uploads/2020/02/35627710.png",alt:"!img(file:///C:/Users/dell/AppData/Local/Temp/msohtmlclip1/01/clip_image077.jpg)",loading:"lazy",decoding:"async"})],-1)),n[263]||(n[263]=l("p",null,[l("strong",null,"资产创建信息填写好保存之后，可以看到已经可以连接资产，说明正常：")],-1)),n[264]||(n[264]=l("figure",null,[l("img",{src:"https://www.xoxoyun.cn/usr/uploads/2020/02/1998648710.png",alt:"!img(file:///C:/Users/dell/AppData/Local/Temp/msohtmlclip1/01/clip_image079.jpg)",loading:"lazy",decoding:"async"})],-1)),n[265]||(n[265]=l("p",null,[l("strong",null,"如果资产不能正常连接，请检查管理用户的用户名和密钥是否正确以及该管理用户是否能使用 SSH 从 Jumpserver 主机正确登录到资产主机上。")],-1)),n[266]||(n[266]=l("h2",{id:"xo-5-6-网域列表",tabindex:"-1"},[o("xo.5.6 网域列表 "),l("a",{class:"header-anchor",href:"#xo-5-6-网域列表","aria-label":'Permalink to "xo.5.6  网域列表"'},"​")],-1)),n[267]||(n[267]=l("p",null,[l("strong",null,"网域功能是为了解决部分环境无法直接连接而新增的功能，原理是通过网关服务器进行跳转登录。")],-1)),n[268]||(n[268]=l("p",null,[l("strong",null,"这个功能，一般情况不用到。")],-1)),n[269]||(n[269]=l("h2",{id:"xo-5-7-创建授权规则",tabindex:"-1"},[o("xo.5.7 创建授权规则 "),l("a",{class:"header-anchor",href:"#xo-5-7-创建授权规则","aria-label":'Permalink to "xo.5.7 创建授权规则"'},"​")],-1)),n[270]||(n[270]=l("p",null,[l("strong",null,"节点，对应的是资产，代表该节点下的所有资产。")],-1)),n[271]||(n[271]=l("p",null,[l("strong",null,"用户组，对应的是用户，代表该用户组下所有的用户。")],-1)),n[272]||(n[272]=l("p",null,[l("strong",null,"系统用户，及所选的用户组下的用户能通过该系统用户使用所选节点下的资产。")],-1)),n[273]||(n[273]=l("p",null,[l("strong",null,"节点，用户组，系统用户是一对一的关系，所以当拥有 Linux、Windows 不同类型资产时，应该分别给 Linux 资产和 Windows 资产创建授权规则。")],-1)),n[274]||(n[274]=l("figure",null,[l("img",{src:"https://www.xoxoyun.cn/usr/uploads/2020/02/1790809110.png",alt:"!img(file:///C:/Users/dell/AppData/Local/Temp/msohtmlclip1/01/clip_image081.jpg)",loading:"lazy",decoding:"async"})],-1)),n[275]||(n[275]=l("figure",null,[l("img",{src:"https://www.xoxoyun.cn/usr/uploads/2020/02/267442749.png",alt:"!img(file:///C:/Users/dell/AppData/Local/Temp/msohtmlclip1/01/clip_image083.jpg)",loading:"lazy",decoding:"async"})],-1)),n[276]||(n[276]=l("p",null,[l("strong",null,"授权成功后，你自己手动到Andu101上查看：")],-1)),n[277]||(n[277]=l("p",null,[l("strong",null,"[root@Andu101 ~]# tail /etc/passwd -n 5")],-1)),n[278]||(n[278]=l("p",null,[l("strong",null,"postfix❌89:89::/var/spool/postfix:/sbin/nologin")],-1)),n[279]||(n[279]=l("p",null,[l("strong",null,"ntp❌38:38::/etc/ntp:/sbin/nologin")],-1)),n[280]||(n[280]=l("p",null,[l("strong",null,"tcpdump❌72:72:😕:/sbin/nologin")],-1)),n[281]||(n[281]=l("p",null,[l("strong",null,"mk❌1000:1000:mk:/home/mk:/bin/bash")],-1)),n[282]||(n[282]=l("p",null,[o("**manager❌1001:1001::/home/manager:/bin/bash #**"),l("strong",null,"自动推送一个帐号，自动在资产服务器上创建系统用户")],-1)),n[283]||(n[283]=l("p",null,[l("strong",null,"[root@Andu101 ~]# visudo #sudo****相关的规则也会被自动推送过来")],-1)),n[284]||(n[284]=l("p",null,[l("strong",null,"manager ALL=(ALL) NOPASSWD: /sbin/,/bin/")],-1)),n[285]||(n[285]=l("h2",{id:"xo-5-8-用户使用资产",tabindex:"-1"},[o("xo.5.8 用户使用资产 "),l("a",{class:"header-anchor",href:"#xo-5-8-用户使用资产","aria-label":'Permalink to "xo.5.8 用户使用资产"'},"​")],-1)),n[286]||(n[286]=l("p",null,[l("strong",null,"登录 Jumpserver")],-1)),n[287]||(n[287]=l("p",null,[l("strong",null,"创建授权规则的时候，选择了用户组，所以这里需要登录所选用户组下面的用户才能看见相应的资产。")],-1)),n[288]||(n[288]=l("p",null,[l("strong",null,"使用无痕浏览器，再打开一个窗口，进行登录：")],-1)),n[289]||(n[289]=l("p",null,[l("strong",null,"用户正确登录后的页面：")],-1)),n[290]||(n[290]=l("figure",null,[l("img",{src:"https://www.xoxoyun.cn/usr/uploads/2020/02/1938123452.png",alt:"!img(file:///C:/Users/dell/AppData/Local/Temp/msohtmlclip1/01/clip_image085.jpg)",loading:"lazy",decoding:"async"})],-1)),n[291]||(n[291]=l("p",null,[l("strong",null,"连接资产，点击页面左边的 Web 终端：")],-1)),n[292]||(n[292]=l("figure",null,[l("img",{src:"https://www.xoxoyun.cn/usr/uploads/2020/02/3363908533.png",alt:"!img(file:///C:/Users/dell/AppData/Local/Temp/msohtmlclip1/01/clip_image087.jpg)",loading:"lazy",decoding:"async"})],-1)),n[293]||(n[293]=l("p",null,[l("strong",null,"打开资产所在的节点：")],-1)),n[294]||(n[294]=l("p",null,[l("strong",null,"双击资产名字，就连上资产了：")],-1)),n[295]||(n[295]=l("p",null,[l("strong",null,"如果显示连接超时，请检查为资产分配的系统用户用户名和密钥是否正确，是否正确选择 Linux 操作系统，协议 ssh，端口22，以及资产的防火墙策略是否正确配置等信息。")],-1)),n[296]||(n[296]=l("figure",null,[l("img",{src:"https://www.xoxoyun.cn/usr/uploads/2020/02/3366625010.png",alt:"!img(file:///C:/Users/dell/AppData/Local/Temp/msohtmlclip1/01/clip_image089.jpg)",loading:"lazy",decoding:"async"})],-1)),n[297]||(n[297]=l("p",null,[l("strong",null,"接下来，就可以对资产进行操作了。")],-1)),n[298]||(n[298]=l("h2",{id:"xo-5-9-在xshell字符终端下连接jumpserver管理服务器",tabindex:"-1"},[o("xo.5.9 在xshell字符终端下连接jumpserver管理服务器 "),l("a",{class:"header-anchor",href:"#xo-5-9-在xshell字符终端下连接jumpserver管理服务器","aria-label":'Permalink to "xo.5.9 在xshell字符终端下连接jumpserver管理服务器"'},"​")],-1)),n[299]||(n[299]=l("figure",null,[l("img",{src:"https://www.xoxoyun.cn/usr/uploads/2020/02/3940823113.png",alt:"!img(file:///C:/Users/dell/AppData/Local/Temp/msohtmlclip1/01/clip_image091.jpg)",loading:"lazy",decoding:"async"})],-1)),n[300]||(n[300]=l("p",null,[l("strong",null,"输入jumpserver用户xoxo123 和密码12xo56")],-1)),n[301]||(n[301]=l("figure",null,[l("img",{src:"https://www.xoxoyun.cn/usr/uploads/2020/02/2929532066.png",alt:"!img(file:///C:/Users/dell/AppData/Local/Temp/msohtmlclip1/01/clip_image093.jpg)",loading:"lazy",decoding:"async"})],-1)),n[302]||(n[302]=l("p",null,[l("strong",null,"点击确定开始连接")],-1)),n[303]||(n[303]=l("figure",null,[l("img",{src:"https://www.xoxoyun.cn/usr/uploads/2020/02/855979927.png",alt:"!img(file:///C:/Users/dell/AppData/Local/Temp/msohtmlclip1/01/clip_image095.jpg)",loading:"lazy",decoding:"async"})],-1)),n[304]||(n[304]=l("p",null,[o("**Opt> 64 #**"),l("strong",null,"输入一个101，就可以直接登录：192.168.10.101")],-1)),n[305]||(n[305]=l("p",null,[o("**Connecting to manager@Game-**"),l("strong",null,"王者荣耀-华北区 0.3")],-1)),n[306]||(n[306]=l("p",null,[l("strong",null,"Last login: Fri Feb 21 23:02:58 2020 from 192.168.10.66")],-1)),n[307]||(n[307]=l("p",null,[l("strong",null,"[manager@Andu101 ~]$")],-1)),n[308]||(n[308]=l("p",null,[o("**[manager@Andu101 ~]$ whoami #**"),l("strong",null,"发现登录使用的是系统用户manager")],-1)),n[309]||(n[309]=l("p",null,[l("strong",null,"manager")],-1)),n[310]||(n[310]=l("p",null,[l("strong",null,"[manager@Andu101 ~]$ exit")],-1)),n[311]||(n[311]=l("p",null,[l("strong",null,"登出")],-1)),n[312]||(n[312]=l("p",null,[o("**Opt> p #**"),l("strong",null,"显示你有权限的主机")],-1)),n[313]||(n[313]=l("p",null,[l("strong",null,"ID Hostname IP LoginAs Comment")],-1)),n[314]||(n[314]=l("p",null,[o("**1 game64.xuegod.cn-**"),l("strong",null,"王者荣耀-华北区 192.168.10.101 [系统管理员用户]")],-1)),n[315]||(n[315]=l("p",null,[o("**Opt> g #**"),l("strong",null,"显示你有权限的主机组")],-1)),n[316]||(n[316]=l("p",null,[l("strong",null,"ID Name Assets Comment")],-1)),n[317]||(n[317]=l("p",null,[l("strong",null,"1"),o(),l("strong",null,"王者荣耀-华北区-服务器 1")],-1)),n[318]||(n[318]=l("figure",null,[l("img",{src:"https://www.xoxoyun.cn/usr/uploads/2020/02/1499231695.png",alt:"!img(file:///C:/Users/dell/AppData/Local/Temp/msohtmlclip1/01/clip_image097.jpg)",loading:"lazy",decoding:"async"})],-1)),n[319]||(n[319]=l("h2",{id:"xo-5-10-查看历史命令记录",tabindex:"-1"},[o("xo.5.10 查看历史命令记录 "),l("a",{class:"header-anchor",href:"#xo-5-10-查看历史命令记录","aria-label":'Permalink to "xo.5.10 查看历史命令记录"'},"​")],-1)),n[320]||(n[320]=l("figure",null,[l("img",{src:"https://www.xoxoyun.cn/usr/uploads/2020/02/1119876398.png",alt:"!img(file:///C:/Users/dell/AppData/Local/Temp/msohtmlclip1/01/clip_image099.jpg)",loading:"lazy",decoding:"async"})],-1)),n[321]||(n[321]=l("h2",{id:"xo-5-10-查看历史会话并回放视频",tabindex:"-1"},[o("xo.5.10 查看历史会话并回放视频 "),l("a",{class:"header-anchor",href:"#xo-5-10-查看历史会话并回放视频","aria-label":'Permalink to "xo.5.10 查看历史会话并回放视频"'},"​")],-1)),n[322]||(n[322]=l("figure",null,[l("img",{src:"https://www.xoxoyun.cn/usr/uploads/2020/02/2496026948.png",alt:"!img(file:///C:/Users/dell/AppData/Local/Temp/msohtmlclip1/01/clip_image101.jpg)",loading:"lazy",decoding:"async"})],-1)),n[323]||(n[323]=l("p",null,[l("strong",null,[o("更多内容，可以参数官方手册："),l("a",{href:"http://docs.jumpserver.org/zh/docs/step_by_step.html",target:"_blank",rel:"noreferrer"},"http://docs.jumpserver.org/zh/docs/step_by_step.html")])],-1)),v("more"),n[324]||(n[324]=l("hr",null,null,-1)),n[325]||(n[325]=l("p",null,"原创不易，转载请注明出处",-1))]),"main-header":r(()=>[t(s.$slots,"main-header")]),"main-header-after":r(()=>[t(s.$slots,"main-header-after")]),"main-nav":r(()=>[t(s.$slots,"main-nav")]),"main-content-before":r(()=>[t(s.$slots,"main-content-before")]),"main-content":r(()=>[t(s.$slots,"main-content")]),"main-content-after":r(()=>[t(s.$slots,"main-content-after")]),"main-nav-before":r(()=>[t(s.$slots,"main-nav-before")]),"main-nav-after":r(()=>[t(s.$slots,"main-nav-after")]),comment:r(()=>[t(s.$slots,"comment")]),footer:r(()=>[t(s.$slots,"footer")]),aside:r(()=>[t(s.$slots,"aside")]),"aside-custom":r(()=>[t(s.$slots,"aside-custom")]),default:r(()=>[t(s.$slots,"default")]),_:3},8,["frontmatter"])}}};export{M as default,P as usePageData};
