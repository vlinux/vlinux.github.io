import{_ as y}from"./ValaxyMain.vue_vue_type_style_index_0_lang-386e0d16.js";import{_ as D,c as i,w as o,o as C,b as l,d as s,e as t,r as e,f as F,p as A}from"./app-3fb47607.js";import"./YunFooter.vue_vue_type_script_setup_true_lang-29d16d65.js";import"./YunCard.vue_vue_type_style_index_0_lang-ea12da5f.js";import"./YunPageHeader.vue_vue_type_script_setup_true_lang-68f924cc.js";const al=JSON.parse('{"title":"Alertmanage最详细的配置文件解释","description":"","frontmatter":{"title":"Alertmanage最详细的配置文件解释","categories":"Prometheus","tags":["Alertmanager配置文件"],"date":"2022-11-08T09:51:28.000Z"},"headers":[{"level":3,"title":"告警路由","slug":"告警路由","link":"#告警路由","children":[]},{"level":3,"title":"抑制规则","slug":"抑制规则","link":"#抑制规则","children":[]},{"level":2,"title":"上面的配置文件的总体解释为","slug":"上面的配置文件的总体解释为","link":"#上面的配置文件的总体解释为","children":[]}],"relativePath":"pages/posts/Alertmanage最详细的配置文件解释.md","path":"/Users/vlinux/vlinux/blog/valaxy/vlinux.github.io/pages/posts/Alertmanage最详细的配置文件解释.md","lastUpdated":1671090556000}'),c=JSON.parse('{"title":"Alertmanage最详细的配置文件解释","description":"","frontmatter":{"title":"Alertmanage最详细的配置文件解释","categories":"Prometheus","tags":["Alertmanager配置文件"],"date":"2022-11-08T09:51:28.000Z"},"headers":[{"level":3,"title":"告警路由","slug":"告警路由","link":"#告警路由","children":[]},{"level":3,"title":"抑制规则","slug":"抑制规则","link":"#抑制规则","children":[]},{"level":2,"title":"上面的配置文件的总体解释为","slug":"上面的配置文件的总体解释为","link":"#上面的配置文件的总体解释为","children":[]}],"relativePath":"pages/posts/Alertmanage最详细的配置文件解释.md","path":"/Users/vlinux/vlinux/blog/valaxy/vlinux.github.io/pages/posts/Alertmanage最详细的配置文件解释.md","lastUpdated":1671090556000}'),u={name:"pages/posts/Alertmanage最详细的配置文件解释.md",data(){return{data:c,frontmatter:c.frontmatter}},setup(){A("pageData",c)}},m=l("div",{class:"language-yaml"},[l("span",{class:"copy"}),l("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[l("code",null,[l("span",{class:"line"},[l("span",{style:{color:"#F07178"}},"global"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#676E95","font-style":"italic"}},"#全局配置")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"  "),l("span",{style:{color:"#F07178"}},"resolve_timeout"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"5m")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#89DDFF"}},"  "),l("span",{style:{color:"#676E95","font-style":"italic"}},"#全局配置，设置解析超时时间")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"  "),l("span",{style:{color:"#F07178"}},"http_config"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#89DDFF"}},"  "),l("span",{style:{color:"#676E95","font-style":"italic"}},"#使用 WebHook 发送通知时，默认使用此处配置的 http 相关参数设置。如果不使用 WebHook，请忽略此处的参数。")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#F07178"}},"follow_redirects"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#FF9CAC"}},"true")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#89DDFF"}},"    "),l("span",{style:{color:"#676E95","font-style":"italic"}},"#跟随重定向")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"  "),l("span",{style:{color:"#F07178"}},"smtp_from"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"38867033@qq.com")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#89DDFF"}},"  "),l("span",{style:{color:"#676E95","font-style":"italic"}},"#你的邮箱账号")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"  "),l("span",{style:{color:"#F07178"}},"smtp_smarthost"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"smtp.qq.com:25")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#89DDFF"}},"  "),l("span",{style:{color:"#676E95","font-style":"italic"}},"#你的邮箱SMTP服务器地址")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"  "),l("span",{style:{color:"#F07178"}},"smtp_auth_username"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"38867033@qq.com")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#89DDFF"}},"  "),l("span",{style:{color:"#676E95","font-style":"italic"}},"#你的邮箱名，可以自定义的")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"  "),l("span",{style:{color:"#F07178"}},"smtp_auth_password"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"<secret>")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#89DDFF"}},"  "),l("span",{style:{color:"#676E95","font-style":"italic"}},"#你的邮箱授权码，如果不明白，那就网上搜")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"  "),l("span",{style:{color:"#F07178"}},"smtp_require_tls"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#FF9CAC"}},"false")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#89DDFF"}},"  "),l("span",{style:{color:"#676E95","font-style":"italic"}},"#你是否启用TLS发信，如果启用，上面的那个25改为465")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#F07178"}},"route"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#676E95","font-style":"italic"}},"#定义发信路由")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"  "),l("span",{style:{color:"#F07178"}},"receiver"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"Default")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#89DDFF"}},"  "),l("span",{style:{color:"#676E95","font-style":"italic"}},"#路由名称Default")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"  "),l("span",{style:{color:"#F07178"}},"group_by"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#89DDFF"}},"  "),l("span",{style:{color:"#676E95","font-style":"italic"}},"#将标签值相同的告警事件组合到一个告警消息中发送。")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"  "),l("span",{style:{color:"#89DDFF"}},"-"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"namespace")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"  "),l("span",{style:{color:"#F07178"}},"continue"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#FF9CAC"}},"false")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#89DDFF"}},"  "),l("span",{style:{color:"#676E95","font-style":"italic"}},"#看下面解释")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"  "),l("span",{style:{color:"#F07178"}},"routes"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#89DDFF"}},"  "),l("span",{style:{color:"#676E95","font-style":"italic"}},"#子路由")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"  "),l("span",{style:{color:"#89DDFF"}},"-"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#F07178"}},"receiver"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"Watchdog")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#89DDFF"}},"  "),l("span",{style:{color:"#676E95","font-style":"italic"}},"#子路由名称")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#F07178"}},"match"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#89DDFF"}},"    "),l("span",{style:{color:"#676E95","font-style":"italic"}},"#标签匹配")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"      "),l("span",{style:{color:"#F07178"}},"alertname"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"Watchdog")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#F07178"}},"continue"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#FF9CAC"}},"false")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"  "),l("span",{style:{color:"#89DDFF"}},"-"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#F07178"}},"receiver"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"Critical")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#89DDFF"}},"  "),l("span",{style:{color:"#676E95","font-style":"italic"}},"#子路由名称")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#F07178"}},"match"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#89DDFF"}},"    "),l("span",{style:{color:"#676E95","font-style":"italic"}},"#标签匹配")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"      "),l("span",{style:{color:"#F07178"}},"severity"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"critical")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#F07178"}},"continue"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#FF9CAC"}},"false")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"  "),l("span",{style:{color:"#F07178"}},"group_wait"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"30s")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#89DDFF"}},"  "),l("span",{style:{color:"#676E95","font-style":"italic"}},"#分组等候时间")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"  "),l("span",{style:{color:"#F07178"}},"group_interval"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"5m")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#89DDFF"}},"  "),l("span",{style:{color:"#676E95","font-style":"italic"}},"#同一分组消息发送间隔时间")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"  "),l("span",{style:{color:"#F07178"}},"repeat_interval"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"12h")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#89DDFF"}},"  "),l("span",{style:{color:"#676E95","font-style":"italic"}},"#一模一样的告警消息再次发送时间")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#F07178"}},"inhibit_rules"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#676E95","font-style":"italic"}},"#抑制规则，博主不懂")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#89DDFF"}},"-"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#F07178"}},"source_match"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#F07178"}},"severity"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"critical")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"  "),l("span",{style:{color:"#F07178"}},"target_match"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#F07178"}},"severity_re"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"warning|info")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"  "),l("span",{style:{color:"#F07178"}},"equal"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"  "),l("span",{style:{color:"#89DDFF"}},"-"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"namespace")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"  "),l("span",{style:{color:"#89DDFF"}},"-"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"alertname")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#89DDFF"}},"-"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#F07178"}},"source_match"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#F07178"}},"severity"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"warning")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"  "),l("span",{style:{color:"#F07178"}},"target_match"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#F07178"}},"severity_re"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"info")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"  "),l("span",{style:{color:"#F07178"}},"equal"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"  "),l("span",{style:{color:"#89DDFF"}},"-"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"namespace")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"  "),l("span",{style:{color:"#89DDFF"}},"-"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"alertname")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#F07178"}},"receivers"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#676E95","font-style":"italic"}},"#联系人组配置")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#89DDFF"}},"-"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#F07178"}},"name"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"Default")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#676E95","font-style":"italic"}},"#default组")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"  "),l("span",{style:{color:"#F07178"}},"webhook_configs"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#89DDFF"}},"  "),l("span",{style:{color:"#676E95","font-style":"italic"}},"#webhook配置")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"  "),l("span",{style:{color:"#89DDFF"}},"-"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#F07178"}},"send_resolved"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#FF9CAC"}},"true")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#89DDFF"}},"  "),l("span",{style:{color:"#676E95","font-style":"italic"}},"#发送已解决的告警消息")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#F07178"}},"http_config"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"      "),l("span",{style:{color:"#F07178"}},"follow_redirects"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#FF9CAC"}},"true")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#F07178"}},"url"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"http://dingtalk:8060/dingtalk/Default-2t88s/send")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#89DDFF"}},"    "),l("span",{style:{color:"#676E95","font-style":"italic"}},"#你webhook的地址")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#F07178"}},"max_alerts"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#F78C6C"}},"0")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#89DDFF"}},"    "),l("span",{style:{color:"#676E95","font-style":"italic"}},"#不知道")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#89DDFF"}},"-"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#F07178"}},"name"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"Watchdog")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#676E95","font-style":"italic"}},"#Watchdog组")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"  "),l("span",{style:{color:"#F07178"}},"email_configs"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#89DDFF"}},"  "),l("span",{style:{color:"#676E95","font-style":"italic"}},"#email配置")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"  "),l("span",{style:{color:"#89DDFF"}},"-"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#F07178"}},"send_resolved"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#FF9CAC"}},"true")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#F07178"}},"to"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"ilinux@88.com")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#89DDFF"}},"    "),l("span",{style:{color:"#676E95","font-style":"italic"}},"#发送给谁")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#F07178"}},"from"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"38867033@qq.com")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#F07178"}},"hello"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"localhost")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#89DDFF"}},"    "),l("span",{style:{color:"#676E95","font-style":"italic"}},"#test")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#F07178"}},"smarthost"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"smtp.qq.com:25")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#89DDFF"}},"    "),l("span",{style:{color:"#676E95","font-style":"italic"}},"#邮箱配置")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#F07178"}},"auth_username"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"38867033@qq.com")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#F07178"}},"auth_password"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"<secret>")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#F07178"}},"headers"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"      "),l("span",{style:{color:"#F07178"}},"From"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"38867033@qq.com")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"      "),l("span",{style:{color:"#F07178"}},"Subject"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},'{{ template "email.default.subject" . }}'),l("span",{style:{color:"#89DDFF"}},"'")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"      "),l("span",{style:{color:"#F07178"}},"To"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"ilinux@88.com")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#F07178"}},"html"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},'{{ template "email.default.html" . }}'),l("span",{style:{color:"#89DDFF"}},"'")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#F07178"}},"require_tls"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#FF9CAC"}},"false")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"  "),l("span",{style:{color:"#F07178"}},"webhook_configs"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"  "),l("span",{style:{color:"#89DDFF"}},"-"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#F07178"}},"send_resolved"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#FF9CAC"}},"true")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#F07178"}},"http_config"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"      "),l("span",{style:{color:"#F07178"}},"follow_redirects"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#FF9CAC"}},"true")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#F07178"}},"url"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"http://dingtalk:8060/dingtalk/Watchdog-5hi33/send")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#F07178"}},"max_alerts"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#F78C6C"}},"0")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#89DDFF"}},"-"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#F07178"}},"name"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"Critical")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"  "),l("span",{style:{color:"#F07178"}},"email_configs"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"  "),l("span",{style:{color:"#89DDFF"}},"-"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#F07178"}},"send_resolved"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#FF9CAC"}},"true")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#F07178"}},"to"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"yongheng.liu@nx-engine.com")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#F07178"}},"from"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"38867033@qq.com")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#F07178"}},"hello"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"localhost")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#F07178"}},"smarthost"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"smtp.qq.com:25")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#F07178"}},"auth_username"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"38867033@qq.com")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#F07178"}},"auth_password"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"<secret>")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#F07178"}},"headers"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"      "),l("span",{style:{color:"#F07178"}},"From"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"38867033@qq.com")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"      "),l("span",{style:{color:"#F07178"}},"Subject"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},'{{ template "email.default.subject" . }}'),l("span",{style:{color:"#89DDFF"}},"'")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"      "),l("span",{style:{color:"#F07178"}},"To"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"yongheng.liu@nx-engine.com")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#F07178"}},"html"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},'{{ template "email.default.html" . }}'),l("span",{style:{color:"#89DDFF"}},"'")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#F07178"}},"require_tls"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#FF9CAC"}},"false")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#F07178"}},"templates"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#89DDFF"}},"-"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"/etc/alertmanager/config/*.tmpl")]),s(`
`),l("span",{class:"line"})])])],-1),d=l("blockquote",null,[l("p",null,"相关该配置文件解释说明如下")],-1),h={id:"告警路由",tabindex:"-1"},_=l("p",null,"告警路由可以通过条件判断，决定将告警信息发送给哪一个联系人组。",-1),f={id:"作用",tabindex:"-1"},g=l("p",null,[s("告警路由可以将 "),l("em",null,"告警标签匹配器"),s(" 以树形的结构组织起来，使得您可以对告警事件进行逐级分类，将不同类的事件发送给不同的告警联系人。")],-1),E={id:"匹配办法",tabindex:"-1"},v=l("ul",null,[l("li",null,[l("p",null,[s("当出现新的告警事件要发送给用户时，AlertManger 将以深度优先的原则遍历告警路由规则树，具体来说，对于每一个即将发送的告警信息，AlertManger 首先将 "),l("em",null,"告警路由规则树"),s(" 的根节点设置为 "),l("em",null,"当前节点"),s("，然后")])]),l("li",null,[l("p",null,[s("1.遍历 "),l("em",null,"当前节点"),s(" 的子节点，对于遍历中的子节点，比对告警事件的标签是否符合 "),l("em",null,"当前节点"),s(" 的标签匹配器：")]),l("ul",null,[l("li",null,"1.1. 如果不符合，则考察该子节点的下一个兄弟节点"),l("li",null,[s("1.2. 如果符合，则： "),l("ul",null,[l("li",null,[s("1.2.1. 将该子节点设置为 "),l("em",null,"当前节点"),s("，并递归执行步骤 1.")]),l("li",null,[s("1.2.2. 从 1.1.1. 的递归调用返回后，判断该子节点的 "),l("em",null,"continue"),s(" 是否为 true "),l("ul",null,[l("li",null,[s("1.2.2.1. 如果 "),l("em",null,"continue"),s(" 为 false，则跳过该子节点的后续兄弟节点")]),l("li",null,[s("1.2.2.2. 如果 "),l("em",null,"continue"),s(" 为 true，则将该子节点的后续兄弟节点设置为 "),l("em",null,"当前节点"),s("，并递归执行步骤 1.")])])])])]),l("li",null,[s("1.3. 如果没有子节点的标签匹配器与告警事件符合，则按照 "),l("em",null,"当前节点"),s(" 定义的处理方式处理该告警事件")])])])],-1),b={id:"抑制规则",tabindex:"-1"},q=l("strong",null,"抑制规则",-1),k=l("p",null,"抑制规则可以避免当某种问题告警产生之后用户接收到大量由此问题导致的一系列的其它告警通知。例如当集群不可用时，用户可能只希望接收到一条告警，告诉他这时候集群出现了问题，而不是大量的如集群中的应用异常、中间件服务异常的告警通知。",-1),w={id:"匹配办法-1",tabindex:"-1"},$=l("p",null,"当新的告警事件（目标告警事件）产生时，逐条比对抑制规则列表中的规则，对于每一条规则：",-1),x=l("ul",null,[l("li",null,[l("p",null,[s("1.查找当前已产生的符合 "),l("em",null,"源告警事件匹配器"),s(" 的告警事件，得出 "),l("em",null,"匹配的源告警事件列表"),s("；")])]),l("li",null,[l("p",null,[s("2.比对 "),l("em",null,"匹配的源告警事件列表"),s(" 每一条源告警事件与目标告警事件，如果参与比对的源告警事件与目标告警事件都存在 "),l("em",null,"Equal 标签列表"),s(" 中的所有标签，且对于每一个标签来说，源告警事件中的标签值与目标告警事件中的标签值相同，则执行第 3 步的比对；")])]),l("li",null,[l("p",null,[s("3.目标告警事件符合目标 "),l("em",null,"目标告警事件匹配器"),s(" 的条件；")])]),l("li",null,[l("p",null,"对于目标告警事件，如果有一条抑制规则的 3 个比对步骤都通过，则不发送该事件的告警消息给告警联系人。")])],-1),W=l("p",null,"match",-1),S=l("blockquote",null,[l("p",null,"标签选择器可以使用多个标签匹配器来匹配告警事件。 只有当所有标签匹配器都通过时，才认为该事件与此告警路由规则匹配。")],-1),T=l("p",null,"group_by",-1),N=l("blockquote",null,[l("p",null,"按标签分组将标签值相同的告警事件组合到一个告警消息中发送。 例如：带有标签 cluster=A 以及 alertname=LatencyHigh 的告警事件放到同一个消息中发送。如果想要将每一个告警事件都通过一个独立的告警消息发送，则可以将此字段设置为你懂的")],-1),P=l("p",null,"group_wait",-1),j=l("blockquote",null,[l("p",null,"在收到分组中的第一条告警事件之后，等候一定时间，以便尽量收集到更多属于同一个分组中的告警事件，超过等候时间后，再将该分组中的所有告警事件组合成一个告警消息发送。 一般设置在 0秒 - 180秒 之间")],-1),M=l("p",null,"group_interval",-1),U=l("blockquote",null,[l("p",null,"在发送分组的一条告警消息后，间隔一定时间才允许发送同分组的下一条告警消息， 以避免用户过于频繁地接收到重复的告警消息。 一般设置在 5 分钟以上")],-1),V=l("p",null,"repeat_interval",-1),B=l("blockquote",null,[l("p",null,"为一个告警事件成功发送告警消息之后，间隔一定时间才重复发送告警消息。 一般设置在 3 小时以上")],-1),H={id:"上面的配置文件的总体解释为",tabindex:"-1"},L=l("p",null,"声明三个Router路由，分别为Default,Watchdog,Critical，他们的父子关系如下",-1),J=l("ul",null,[l("li",null,[s("Default "),l("ul",null,[l("li",null,"Watchdog"),l("li",null,"Critical")])])],-1),O=l("p",null,"当有告警时，Alert深度匹配路由，也就是说三个都匹配，从Default开始以此匹配子路由，如果没有匹配到相关的标签，那么就由Default路由发出，如果匹配到相关标签，则以匹配到的相关标签的该路由发出",-1),Z=l("p",null,"路由Default没有设置标签匹配，所以按理说，当子路由没有满足匹配标签相关的告警时，告警这件事由Default来发出",-1),R=l("p",null,[l("strong",null,"Default"),s("设置了标签分组,分组等候时间,分组间隔时间,重复间隔时间。配置文件翻译过来也就是当有告警通过Default路由发出时，他会在收到第一个发送请求后等待30秒钟，等待同一个Namespace标签的相关告警，如果没有等到，则直接发送。在发送后五分钟内如果再收到相同的分组告警发送请求，不予发送，必须等五分钟后再发。当告警通知成功后，在12个小时后才能再次发送一模一样的告警。")],-1),z=l("p",null,[l("strong",null,"Watchdog"),s("设置了标签匹配器，配置文件翻译过来就是当有告警请求过来时，如果匹配到Watchdog路由上的标签匹配器alertname = Watchdog那么就等候30s发出（默认）")],-1),G=l("p",null,[l("strong",null,"Critical"),s("设置了标签选择器，配置文件翻译过来就是当有告警请求过来时，如果匹配到Critical路由上的标签匹配器serverity = critical那么就等候30s发出（默认）")],-1);function I(n,K,Q,X,r,Y){const a=F,p=y;return C(),i(p,{frontmatter:r.frontmatter,data:r.data},{"main-content-md":o(()=>[m,d,l("h3",h,[s("告警路由 "),t(a,{class:"header-anchor",href:"#告警路由","aria-hidden":"true"},{default:o(()=>[s("#")]),_:1})]),_,l("h4",f,[s("作用 "),t(a,{class:"header-anchor",href:"#作用","aria-hidden":"true"},{default:o(()=>[s("#")]),_:1})]),g,l("h4",E,[s("匹配办法 "),t(a,{class:"header-anchor",href:"#匹配办法","aria-hidden":"true"},{default:o(()=>[s("#")]),_:1})]),v,l("h3",b,[q,s(),t(a,{class:"header-anchor",href:"#抑制规则","aria-hidden":"true"},{default:o(()=>[s("#")]),_:1})]),k,l("h4",w,[s("匹配办法 "),t(a,{class:"header-anchor",href:"#匹配办法-1","aria-hidden":"true"},{default:o(()=>[s("#")]),_:1})]),$,x,W,S,T,N,P,j,M,U,V,B,l("h2",H,[s("上面的配置文件的总体解释为 "),t(a,{class:"header-anchor",href:"#上面的配置文件的总体解释为","aria-hidden":"true"},{default:o(()=>[s("#")]),_:1})]),L,J,O,Z,R,z,G]),"main-header":o(()=>[e(n.$slots,"main-header")]),"main-header-after":o(()=>[e(n.$slots,"main-header-after")]),"main-nav":o(()=>[e(n.$slots,"main-nav")]),"main-content":o(()=>[e(n.$slots,"main-content")]),"main-content-after":o(()=>[e(n.$slots,"main-content-after")]),"main-nav-before":o(()=>[e(n.$slots,"main-nav-before")]),"main-nav-after":o(()=>[e(n.$slots,"main-nav-after")]),comment:o(()=>[e(n.$slots,"comment")]),footer:o(()=>[e(n.$slots,"footer")]),aside:o(()=>[e(n.$slots,"aside")]),"aside-custom":o(()=>[e(n.$slots,"aside-custom")]),default:o(()=>[e(n.$slots,"default")]),_:3},8,["frontmatter","data"])}const tl=D(u,[["render",I]]);export{al as __pageData,tl as default};
