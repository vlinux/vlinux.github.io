import{_ as p}from"./ValaxyMain.vue_vue_type_style_index_0_lang-230270b5.js";import{_ as i,c as d,w as n,o as C,b as s,U as e,q as D,r as l,W as u,p as A}from"./app-d471dab8.js";import"./YunFooter.vue_vue_type_script_setup_true_lang-82bfe93d.js";import"./YunCard.vue_vue_type_style_index_0_lang-1b0cdb33.js";import"./YunPageHeader.vue_vue_type_script_setup_true_lang-f89f622f.js";const V=JSON.parse('{"title":"kubernetes coredns添加自定义DNS解析记录","description":"","frontmatter":{"title":"kubernetes coredns添加自定义DNS解析记录","categories":"Kubernetes","tags":["Kubernetes","coredns"],"date":"2022-02-25T10:10:18.000Z"},"headers":[],"relativePath":"pages/posts/kubernetes-coredns添加自定义DNS解析记录.md","path":"/Users/vlinux/vlinux/blog/valaxy/vlinux.github.io/pages/posts/kubernetes-coredns添加自定义DNS解析记录.md","lastUpdated":1671090556000}'),o=JSON.parse('{"title":"kubernetes coredns添加自定义DNS解析记录","description":"","frontmatter":{"title":"kubernetes coredns添加自定义DNS解析记录","categories":"Kubernetes","tags":["Kubernetes","coredns"],"date":"2022-02-25T10:10:18.000Z"},"headers":[],"relativePath":"pages/posts/kubernetes-coredns添加自定义DNS解析记录.md","path":"/Users/vlinux/vlinux/blog/valaxy/vlinux.github.io/pages/posts/kubernetes-coredns添加自定义DNS解析记录.md","lastUpdated":1671090556000}'),m={name:"pages/posts/kubernetes-coredns添加自定义DNS解析记录.md",data(){return{data:o,frontmatter:o.frontmatter}},setup(){A("pageData",o)}},y={id:"kubernetes-coredns-添加自定义dns解析记录",tabindex:"-1"},h=s("blockquote",null,[s("p",null,[e("coredns 自带 hosts 插件， 允许像配置 hosts 一样配置自定义 DNS 解析，修改 "),s("code",null,"kube-system"),e(" 中 "),s("code",null,"configMap"),e(" 的 "),s("code",null,"coredns"),e(" 添加如下设置即可")])],-1),f=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}}," hosts {")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        172.21.91.28 cache.redis")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        172.21.91.28 persistent.redis")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"          ")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        fallthrough")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    }")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),b=s("p",null,"修改后文件如下",-1),_=s("div",{class:"language-yaml"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#C3E88D"}},".:53 {")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    "),s("span",{style:{color:"#C3E88D"}},"errors")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    "),s("span",{style:{color:"#C3E88D"}},"health")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    "),s("span",{style:{color:"#C3E88D"}},"kubernetes cluster.local in-addr.arpa ip6.arpa {")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"       "),s("span",{style:{color:"#C3E88D"}},"pods insecure")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"       "),s("span",{style:{color:"#C3E88D"}},"upstream")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"       "),s("span",{style:{color:"#C3E88D"}},"fallthrough in-addr.arpa ip6.arpa")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    }")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    "),s("span",{style:{color:"#C3E88D"}},"hosts {")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        "),s("span",{style:{color:"#C3E88D"}},"172.21.91.28 cache.redis")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        "),s("span",{style:{color:"#C3E88D"}},"172.21.91.28 persistent.redis")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"          ")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        "),s("span",{style:{color:"#C3E88D"}},"fallthrough")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    }")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    "),s("span",{style:{color:"#C3E88D"}},"prometheus :9153")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    "),s("span",{style:{color:"#C3E88D"}},"proxy . /etc/resolv.conf")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    "),s("span",{style:{color:"#C3E88D"}},"cache 30")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    "),s("span",{style:{color:"#C3E88D"}},"loop")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    "),s("span",{style:{color:"#C3E88D"}},"reload")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    "),s("span",{style:{color:"#C3E88D"}},"loadbalance")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"}")]),e(`
`),s("span",{class:"line"})])])],-1);function g(a,k,v,E,t,N){const r=u,c=p;return C(),d(c,{frontmatter:t.frontmatter,data:t.data},{"main-content-md":n(()=>[s("h1",y,[e("kubernetes coredns 添加自定义DNS解析记录 "),D(r,{class:"header-anchor",href:"#kubernetes-coredns-添加自定义dns解析记录","aria-hidden":"true"},{default:n(()=>[e("#")]),_:1})]),h,f,b,_]),"main-header":n(()=>[l(a.$slots,"main-header")]),"main-header-after":n(()=>[l(a.$slots,"main-header-after")]),"main-nav":n(()=>[l(a.$slots,"main-nav")]),"main-content":n(()=>[l(a.$slots,"main-content")]),"main-content-after":n(()=>[l(a.$slots,"main-content-after")]),"main-nav-before":n(()=>[l(a.$slots,"main-nav-before")]),"main-nav-after":n(()=>[l(a.$slots,"main-nav-after")]),comment:n(()=>[l(a.$slots,"comment")]),footer:n(()=>[l(a.$slots,"footer")]),aside:n(()=>[l(a.$slots,"aside")]),"aside-custom":n(()=>[l(a.$slots,"aside-custom")]),default:n(()=>[l(a.$slots,"default")]),_:3},8,["frontmatter","data"])}const B=i(m,[["render",g]]);export{V as __pageData,B as default};
