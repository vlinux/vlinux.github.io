import{_ as i}from"./ValaxyMain.vue_vue_type_style_index_0_lang.b3f0e471.js";import{_ as r,c as p,w as l,o as d,r as o,g as s,R as n,p as A}from"./app.819a3b04.js";import"./YunFooter.vue_vue_type_script_setup_true_lang.4d539698.js";import"./YunCard.vue_vue_type_style_index_0_lang.a6c5f832.js";import"./YunPageHeader.vue_vue_type_script_setup_true_lang.e1d0d7c0.js";const XS=JSON.parse('{"title":"Docker+K8s\u5B9E\u8DF5\u6307\u5357","description":"","frontmatter":{"title":"Docker+K8s\u5B9E\u8DF5\u6307\u5357","categories":"DevOps","tags":["Prometheus","Kubernetes"],"date":"2020-02-27T18:26:00.000Z"},"headers":[{"level":2,"title":"\u5199\u5728\u524D\u9762\u7684\u8BDD","slug":"\u5199\u5728\u524D\u9762\u7684\u8BDD","link":"#\u5199\u5728\u524D\u9762\u7684\u8BDD","children":[]},{"level":2,"title":"\u53C2\u8003\u6587\u732E","slug":"\u53C2\u8003\u6587\u732E","link":"#\u53C2\u8003\u6587\u732E","children":[]},{"level":2,"title":"1.1 PXE+Kickstart\u4ECB\u7ECD","slug":"_1-1-pxe-kickstart\u4ECB\u7ECD","link":"#_1-1-pxe-kickstart\u4ECB\u7ECD","children":[{"level":3,"title":"1.1.1 KickStart\u5DE5\u4F5C\u539F\u7406","slug":"_1-1-1-kickstart\u5DE5\u4F5C\u539F\u7406","link":"#_1-1-1-kickstart\u5DE5\u4F5C\u539F\u7406","children":[]},{"level":3,"title":"1.1.2 PXE\u5DE5\u4F5C\u539F\u7406","slug":"_1-1-2-pxe\u5DE5\u4F5C\u539F\u7406","link":"#_1-1-2-pxe\u5DE5\u4F5C\u539F\u7406","children":[]},{"level":3,"title":"1.1.3 PXE+Kickstart\u5DE5\u4F5C\u6D41\u7A0B","slug":"_1-1-3-pxe-kickstart\u5DE5\u4F5C\u6D41\u7A0B","link":"#_1-1-3-pxe-kickstart\u5DE5\u4F5C\u6D41\u7A0B","children":[]}]},{"level":2,"title":"1.2 \u5236\u4F5C\u672C\u5730Yum\u4ED3\u5E93","slug":"_1-2-\u5236\u4F5C\u672C\u5730yum\u4ED3\u5E93","link":"#_1-2-\u5236\u4F5C\u672C\u5730yum\u4ED3\u5E93","children":[{"level":3,"title":"1.2.1 \u51C6\u5907\u5B89\u88C5\u6E90","slug":"_1-2-1-\u51C6\u5907\u5B89\u88C5\u6E90","link":"#_1-2-1-\u51C6\u5907\u5B89\u88C5\u6E90","children":[]},{"level":3,"title":"1.2.2 \u914D\u7F6ETFTP-Server","slug":"_1-2-2-\u914D\u7F6Etftp-server","link":"#_1-2-2-\u914D\u7F6Etftp-server","children":[]},{"level":3,"title":"1.2.4 \u81EA\u52A8\u5316\u5B89\u88C5\u548C\u6D41\u7A0B\u603B\u7ED3","slug":"_1-2-4-\u81EA\u52A8\u5316\u5B89\u88C5\u548C\u6D41\u7A0B\u603B\u7ED3","link":"#_1-2-4-\u81EA\u52A8\u5316\u5B89\u88C5\u548C\u6D41\u7A0B\u603B\u7ED3","children":[]}]},{"level":2,"title":"2.1 Cobbler\u90E8\u7F72","slug":"_2-1-cobbler\u90E8\u7F72","link":"#_2-1-cobbler\u90E8\u7F72","children":[{"level":3,"title":"2.1.1 Cobbler\u529F\u80FD","slug":"_2-1-1-cobbler\u529F\u80FD","link":"#_2-1-1-cobbler\u529F\u80FD","children":[]},{"level":3,"title":"2.1.2 Cobbler\u5B89\u88C5","slug":"_2-1-2-cobbler\u5B89\u88C5","link":"#_2-1-2-cobbler\u5B89\u88C5","children":[]},{"level":3,"title":"2.1.3 Cobbler\u7BA1\u7406DHCP","slug":"_2-1-3-cobbler\u7BA1\u7406dhcp","link":"#_2-1-3-cobbler\u7BA1\u7406dhcp","children":[]},{"level":3,"title":"2.1.4 Cobbler\u5BFC\u5165\u955C\u50CF","slug":"_2-1-4-cobbler\u5BFC\u5165\u955C\u50CF","link":"#_2-1-4-cobbler\u5BFC\u5165\u955C\u50CF","children":[]},{"level":3,"title":"2.1.5 \u81EA\u5B9A\u4E49kickstart\u6587\u4EF6","slug":"_2-1-5-\u81EA\u5B9A\u4E49kickstart\u6587\u4EF6","link":"#_2-1-5-\u81EA\u5B9A\u4E49kickstart\u6587\u4EF6","children":[]}]},{"level":2,"title":"2.2 \u4F7F\u7528Cobbler\u81EA\u52A8\u5316\u5B89\u88C5CentOS","slug":"_2-2-\u4F7F\u7528cobbler\u81EA\u52A8\u5316\u5B89\u88C5centos","link":"#_2-2-\u4F7F\u7528cobbler\u81EA\u52A8\u5316\u5B89\u88C5centos","children":[{"level":3,"title":"2.2.1 \u4F7F\u7528Cobbler\u5B89\u88C5CentOS","slug":"_2-2-1-\u4F7F\u7528cobbler\u5B89\u88C5centos","link":"#_2-2-1-\u4F7F\u7528cobbler\u5B89\u88C5centos","children":[]},{"level":3,"title":"2.2.2 Koan\u91CD\u65B0\u5B89\u88C5\u7CFB\u7EDF","slug":"_2-2-2-koan\u91CD\u65B0\u5B89\u88C5\u7CFB\u7EDF","link":"#_2-2-2-koan\u91CD\u65B0\u5B89\u88C5\u7CFB\u7EDF","children":[]}]},{"level":2,"title":"2.3 Cobbler Web\u4ECB\u7ECD","slug":"_2-3-cobbler-web\u4ECB\u7ECD","link":"#_2-3-cobbler-web\u4ECB\u7ECD","children":[]},{"level":2,"title":"2.4 \u6DF1\u5165\u7406\u89E3Cobbler","slug":"_2-4-\u6DF1\u5165\u7406\u89E3cobbler","link":"#_2-4-\u6DF1\u5165\u7406\u89E3cobbler","children":[{"level":3,"title":"2.4.1 Cobbler \u914D\u7F6E\u6587\u4EF6","slug":"_2-4-1-cobbler-\u914D\u7F6E\u6587\u4EF6","link":"#_2-4-1-cobbler-\u914D\u7F6E\u6587\u4EF6","children":[]},{"level":3,"title":"2.4.2 Cobbler\u8BBE\u8BA1\u65B9\u5F0F","slug":"_2-4-2-cobbler\u8BBE\u8BA1\u65B9\u5F0F","link":"#_2-4-2-cobbler\u8BBE\u8BA1\u65B9\u5F0F","children":[]},{"level":3,"title":"2.4.3 Cobbler distro","slug":"_2-4-3-cobbler-distro","link":"#_2-4-3-cobbler-distro","children":[]},{"level":3,"title":"2.1.4 Cobbler profile","slug":"_2-1-4-cobbler-profile","link":"#_2-1-4-cobbler-profile","children":[]},{"level":3,"title":"2.1.5Cobbler repo","slug":"_2-1-5cobbler-repo","link":"#_2-1-5cobbler-repo","children":[]},{"level":3,"title":"2.1.6 Cobbler snippets","slug":"_2-1-6-cobbler-snippets","link":"#_2-1-6-cobbler-snippets","children":[]}]},{"level":2,"title":"3.1 Cobbler\u6784\u5EFA\u79C1\u6709YUM\u4ED3\u5E93","slug":"_3-1-cobbler\u6784\u5EFA\u79C1\u6709yum\u4ED3\u5E93","link":"#_3-1-cobbler\u6784\u5EFA\u79C1\u6709yum\u4ED3\u5E93","children":[{"level":3,"title":"3.1.1 \u6784\u5EFAOpenStack\u79C1\u6709\u4ED3\u5E93","slug":"_3-1-1-\u6784\u5EFAopenstack\u79C1\u6709\u4ED3\u5E93","link":"#_3-1-1-\u6784\u5EFAopenstack\u79C1\u6709\u4ED3\u5E93","children":[]},{"level":3,"title":"3.1.2 \u6784\u5EFAZabbix\u79C1\u6709\u4ED3\u5E93","slug":"_3-1-2-\u6784\u5EFAzabbix\u79C1\u6709\u4ED3\u5E93","link":"#_3-1-2-\u6784\u5EFAzabbix\u79C1\u6709\u4ED3\u5E93","children":[]},{"level":3,"title":"3.1.3 \u6784\u5EFASaltStack\u79C1\u6709\u4ED3\u5E93","slug":"_3-1-3-\u6784\u5EFAsaltstack\u79C1\u6709\u4ED3\u5E93","link":"#_3-1-3-\u6784\u5EFAsaltstack\u79C1\u6709\u4ED3\u5E93","children":[]},{"level":3,"title":"3.1.4 \u5C06\u79C1\u6709\u4ED3\u5E93\u6DFB\u52A0\u5230Profile","slug":"_3-1-4-\u5C06\u79C1\u6709\u4ED3\u5E93\u6DFB\u52A0\u5230profile","link":"#_3-1-4-\u5C06\u79C1\u6709\u4ED3\u5E93\u6DFB\u52A0\u5230profile","children":[]}]},{"level":2,"title":"3.2 \u4F7F\u7528Cobbler\u81EA\u52A8\u5316\u5B89\u88C5ESXi","slug":"_3-2-\u4F7F\u7528cobbler\u81EA\u52A8\u5316\u5B89\u88C5esxi","link":"#_3-2-\u4F7F\u7528cobbler\u81EA\u52A8\u5316\u5B89\u88C5esxi","children":[]},{"level":2,"title":"3.3 \u5B9A\u5236\u5316\u670D\u52A1\u5668\u5B89\u88C5","slug":"_3-3-\u5B9A\u5236\u5316\u670D\u52A1\u5668\u5B89\u88C5","link":"#_3-3-\u5B9A\u5236\u5316\u670D\u52A1\u5668\u5B89\u88C5","children":[{"level":3,"title":"3.3.1 \u81EA\u52A8\u5316\u5B89\u88C5\u6D41\u7A0B\u68B3\u7406","slug":"_3-3-1-\u81EA\u52A8\u5316\u5B89\u88C5\u6D41\u7A0B\u68B3\u7406","link":"#_3-3-1-\u81EA\u52A8\u5316\u5B89\u88C5\u6D41\u7A0B\u68B3\u7406","children":[]},{"level":3,"title":"3.3.2 Cobbler\u83B7\u53D6\u5B89\u88C5\u8FDB\u5EA6","slug":"_3-3-2-cobbler\u83B7\u53D6\u5B89\u88C5\u8FDB\u5EA6","link":"#_3-3-2-cobbler\u83B7\u53D6\u5B89\u88C5\u8FDB\u5EA6","children":[]}]},{"level":2,"title":"4.1 \u81EA\u5B9A\u4E49\u7269\u7406\u7F51\u5361bonding","slug":"_4-1-\u81EA\u5B9A\u4E49\u7269\u7406\u7F51\u5361bonding","link":"#_4-1-\u81EA\u5B9A\u4E49\u7269\u7406\u7F51\u5361bonding","children":[]},{"level":2,"title":"4.2 Cobbler\u7535\u6E90\u7BA1\u7406","slug":"_4-2-cobbler\u7535\u6E90\u7BA1\u7406","link":"#_4-2-cobbler\u7535\u6E90\u7BA1\u7406","children":[]},{"level":2,"title":"4.3 Cobbler API\u4F7F\u7528","slug":"_4-3-cobbler-api\u4F7F\u7528","link":"#_4-3-cobbler-api\u4F7F\u7528","children":[]},{"level":2,"title":"\u4E91\u8BA1\u7B97\u6982\u8FF0","slug":"\u4E91\u8BA1\u7B97\u6982\u8FF0-1","link":"#\u4E91\u8BA1\u7B97\u6982\u8FF0-1","children":[{"level":3,"title":"\u4E91\u8BA1\u7B97\u7684\u5206\u7C7B","slug":"\u4E91\u8BA1\u7B97\u7684\u5206\u7C7B","link":"#\u4E91\u8BA1\u7B97\u7684\u5206\u7C7B","children":[]},{"level":3,"title":"\u4E91\u8BA1\u7B97\u7684\u5206\u5C42","slug":"\u4E91\u8BA1\u7B97\u7684\u5206\u5C42","link":"#\u4E91\u8BA1\u7B97\u7684\u5206\u5C42","children":[]}]},{"level":2,"title":"\u4E91\u8BA1\u7B97\u4E0E\u865A\u62DF\u5316","slug":"\u4E91\u8BA1\u7B97\u4E0E\u865A\u62DF\u5316","link":"#\u4E91\u8BA1\u7B97\u4E0E\u865A\u62DF\u5316","children":[{"level":3,"title":"\u5168\u865A\u62DF\u5316\u548C\u534A\u865A\u62DF\u5316","slug":"\u5168\u865A\u62DF\u5316\u548C\u534A\u865A\u62DF\u5316","link":"#\u5168\u865A\u62DF\u5316\u548C\u534A\u865A\u62DF\u5316","children":[]},{"level":3,"title":"\u865A\u62DF\u5316\u5206\u7C7B","slug":"\u865A\u62DF\u5316\u5206\u7C7B","link":"#\u865A\u62DF\u5316\u5206\u7C7B","children":[]},{"level":3,"title":"\u4E91\u8BA1\u7B97\u4E0D\u7B49\u4E8E\u865A\u62DF\u5316","slug":"\u4E91\u8BA1\u7B97\u4E0D\u7B49\u4E8E\u865A\u62DF\u5316","link":"#\u4E91\u8BA1\u7B97\u4E0D\u7B49\u4E8E\u865A\u62DF\u5316","children":[]},{"level":3,"title":"3.2.1 OpenStack\u5B9E\u6218\u6848\u4F8B","slug":"_3-2-1-openstack\u5B9E\u6218\u6848\u4F8B","link":"#_3-2-1-openstack\u5B9E\u6218\u6848\u4F8B","children":[]},{"level":3,"title":"3.2.2 NTP\u65F6\u95F4\u540C\u6B65","slug":"_3-2-2-ntp\u65F6\u95F4\u540C\u6B65","link":"#_3-2-2-ntp\u65F6\u95F4\u540C\u6B65","children":[]},{"level":3,"title":"3.2.3 \u57FA\u7840\u8F6F\u4EF6\u5305\u5B89\u88C5","slug":"_3-2-3-\u57FA\u7840\u8F6F\u4EF6\u5305\u5B89\u88C5","link":"#_3-2-3-\u57FA\u7840\u8F6F\u4EF6\u5305\u5B89\u88C5","children":[]},{"level":3,"title":"3.2.4 MySQL\u6570\u636E\u5E93\u90E8\u7F72","slug":"_3-2-4-mysql\u6570\u636E\u5E93\u90E8\u7F72","link":"#_3-2-4-mysql\u6570\u636E\u5E93\u90E8\u7F72","children":[]},{"level":3,"title":"\u6D88\u606F\u4EE3\u7406RabbitMQ","slug":"\u6D88\u606F\u4EE3\u7406rabbitmq","link":"#\u6D88\u606F\u4EE3\u7406rabbitmq","children":[]},{"level":3,"title":"Keystone\u6982\u8FF0","slug":"keystone\u6982\u8FF0","link":"#keystone\u6982\u8FF0","children":[]},{"level":3,"title":"KeyStone\u90E8\u7F72","slug":"keystone\u90E8\u7F72","link":"#keystone\u90E8\u7F72","children":[]},{"level":3,"title":"Keystone\u6743\u9650\u7BA1\u7406","slug":"keystone\u6743\u9650\u7BA1\u7406","link":"#keystone\u6743\u9650\u7BA1\u7406","children":[]},{"level":3,"title":"\u9A8C\u8BC1Keystone\u5B89\u88C5","slug":"\u9A8C\u8BC1keystone\u5B89\u88C5","link":"#\u9A8C\u8BC1keystone\u5B89\u88C5","children":[]},{"level":3,"title":"\u73AF\u5883\u53D8\u91CF\u811A\u672C\u914D\u7F6E","slug":"\u73AF\u5883\u53D8\u91CF\u811A\u672C\u914D\u7F6E","link":"#\u73AF\u5883\u53D8\u91CF\u811A\u672C\u914D\u7F6E","children":[]},{"level":3,"title":"Keystone\u6982\u8FF0","slug":"keystone\u6982\u8FF0-1","link":"#keystone\u6982\u8FF0-1","children":[]},{"level":3,"title":"KeyStone\u90E8\u7F72","slug":"keystone\u90E8\u7F72-1","link":"#keystone\u90E8\u7F72-1","children":[]},{"level":3,"title":"Keystone\u6743\u9650\u7BA1\u7406","slug":"keystone\u6743\u9650\u7BA1\u7406-1","link":"#keystone\u6743\u9650\u7BA1\u7406-1","children":[]},{"level":3,"title":"\u9A8C\u8BC1Keystone\u5B89\u88C5","slug":"\u9A8C\u8BC1keystone\u5B89\u88C5-1","link":"#\u9A8C\u8BC1keystone\u5B89\u88C5-1","children":[]},{"level":3,"title":"\u73AF\u5883\u53D8\u91CF\u811A\u672C\u914D\u7F6E","slug":"\u73AF\u5883\u53D8\u91CF\u811A\u672C\u914D\u7F6E-1","link":"#\u73AF\u5883\u53D8\u91CF\u811A\u672C\u914D\u7F6E-1","children":[]},{"level":3,"title":"Glance\u6982\u8FF0","slug":"glance\u6982\u8FF0","link":"#glance\u6982\u8FF0","children":[]},{"level":3,"title":"Glance\u90E8\u7F72","slug":"glance\u90E8\u7F72","link":"#glance\u90E8\u7F72","children":[]},{"level":3,"title":"\u9A8C\u8BC1Glance\u5B89\u88C5","slug":"\u9A8C\u8BC1glance\u5B89\u88C5","link":"#\u9A8C\u8BC1glance\u5B89\u88C5","children":[]},{"level":3,"title":"3.5.1 Placement\u6982\u8FF0","slug":"_3-5-1-placement\u6982\u8FF0","link":"#_3-5-1-placement\u6982\u8FF0","children":[]},{"level":3,"title":"3.5.2 Placement\u90E8\u7F72","slug":"_3-5-2-placement\u90E8\u7F72","link":"#_3-5-2-placement\u90E8\u7F72","children":[]},{"level":3,"title":"Nova\u670D\u52A1\u7EC4\u4EF6","slug":"nova\u670D\u52A1\u7EC4\u4EF6","link":"#nova\u670D\u52A1\u7EC4\u4EF6","children":[]},{"level":3,"title":"Nova\u63A7\u5236\u8282\u70B9\u90E8\u7F72","slug":"nova\u63A7\u5236\u8282\u70B9\u90E8\u7F72","link":"#nova\u63A7\u5236\u8282\u70B9\u90E8\u7F72","children":[]},{"level":3,"title":"Nova\u8BA1\u7B97\u8282\u70B9\u90E8\u7F72","slug":"nova\u8BA1\u7B97\u8282\u70B9\u90E8\u7F72","link":"#nova\u8BA1\u7B97\u8282\u70B9\u90E8\u7F72","children":[]},{"level":3,"title":"\u9A8C\u8BC1Nova\u5B89\u88C5","slug":"\u9A8C\u8BC1nova\u5B89\u88C5","link":"#\u9A8C\u8BC1nova\u5B89\u88C5","children":[]},{"level":3,"title":"Neutron\u6982\u8FF0","slug":"neutron\u6982\u8FF0","link":"#neutron\u6982\u8FF0","children":[]},{"level":3,"title":"Neutron\u63A7\u5236\u8282\u70B9\u90E8\u7F72","slug":"neutron\u63A7\u5236\u8282\u70B9\u90E8\u7F72","link":"#neutron\u63A7\u5236\u8282\u70B9\u90E8\u7F72","children":[]},{"level":3,"title":"Neutron\u8BA1\u7B97\u8282\u70B9\u90E8\u7F72","slug":"neutron\u8BA1\u7B97\u8282\u70B9\u90E8\u7F72","link":"#neutron\u8BA1\u7B97\u8282\u70B9\u90E8\u7F72","children":[]},{"level":3,"title":"Bug\u89E3\u51B3","slug":"bug\u89E3\u51B3","link":"#bug\u89E3\u51B3","children":[]},{"level":3,"title":"\u521B\u5EFAFLAT\u7F51\u7EDC","slug":"\u521B\u5EFAflat\u7F51\u7EDC","link":"#\u521B\u5EFAflat\u7F51\u7EDC","children":[]},{"level":3,"title":"\u521B\u5EFA\u4E91\u4E3B\u673A","slug":"\u521B\u5EFA\u4E91\u4E3B\u673A","link":"#\u521B\u5EFA\u4E91\u4E3B\u673A","children":[]},{"level":3,"title":"\u6D4B\u8BD5\u4E91\u4E3B\u673A","slug":"\u6D4B\u8BD5\u4E91\u4E3B\u673A","link":"#\u6D4B\u8BD5\u4E91\u4E3B\u673A","children":[]},{"level":3,"title":"Horizon\u90E8\u7F72","slug":"horizon\u90E8\u7F72","link":"#horizon\u90E8\u7F72","children":[]},{"level":3,"title":"Horizon\u7684Session\u5B58\u50A8","slug":"horizon\u7684session\u5B58\u50A8","link":"#horizon\u7684session\u5B58\u50A8","children":[]}]},{"level":2,"title":"Docker\u4ECB\u7ECD","slug":"docker\u4ECB\u7ECD","link":"#docker\u4ECB\u7ECD","children":[{"level":3,"title":"Docker\u4E0E\u865A\u62DF\u5316","slug":"docker\u4E0E\u865A\u62DF\u5316","link":"#docker\u4E0E\u865A\u62DF\u5316","children":[]},{"level":3,"title":"Docker\u4E0EOpenStack\u5BF9\u6BD4","slug":"docker\u4E0Eopenstack\u5BF9\u6BD4","link":"#docker\u4E0Eopenstack\u5BF9\u6BD4","children":[]},{"level":3,"title":"Docker\u6539\u53D8\u4E86\u4EC0\u4E48\uFF1F","slug":"docker\u6539\u53D8\u4E86\u4EC0\u4E48\uFF1F","link":"#docker\u6539\u53D8\u4E86\u4EC0\u4E48\uFF1F","children":[]}]},{"level":2,"title":"Docker\u90E8\u7F72","slug":"docker\u90E8\u7F72","link":"#docker\u90E8\u7F72","children":[{"level":3,"title":"Docker for CentOS\uFF1A","slug":"docker-for-centos\uFF1A","link":"#docker-for-centos\uFF1A","children":[]},{"level":3,"title":"Docker for windows:","slug":"docker-for-windows","link":"#docker-for-windows","children":[]},{"level":3,"title":"Docker Hub","slug":"docker-hub","link":"#docker-hub","children":[]}]},{"level":2,"title":"Docker\u955C\u50CF\u7BA1\u7406","slug":"docker\u955C\u50CF\u7BA1\u7406","link":"#docker\u955C\u50CF\u7BA1\u7406","children":[{"level":3,"title":"\u521B\u5EFA\u955C\u50CF","slug":"\u521B\u5EFA\u955C\u50CF","link":"#\u521B\u5EFA\u955C\u50CF","children":[]},{"level":3,"title":"\u83B7\u53D6\u955C\u50CF","slug":"\u83B7\u53D6\u955C\u50CF","link":"#\u83B7\u53D6\u955C\u50CF","children":[]},{"level":3,"title":"\u67E5\u770B\u955C\u50CF","slug":"\u67E5\u770B\u955C\u50CF","link":"#\u67E5\u770B\u955C\u50CF","children":[]},{"level":3,"title":"\u955C\u50CF\u7684\u5BFC\u5165\u5BFC\u51FA","slug":"\u955C\u50CF\u7684\u5BFC\u5165\u5BFC\u51FA","link":"#\u955C\u50CF\u7684\u5BFC\u5165\u5BFC\u51FA","children":[]},{"level":3,"title":"\u5220\u9664\u955C\u50CF","slug":"\u5220\u9664\u955C\u50CF","link":"#\u5220\u9664\u955C\u50CF","children":[]}]},{"level":2,"title":"Docker\u5BB9\u5668\u7BA1\u7406","slug":"docker\u5BB9\u5668\u7BA1\u7406","link":"#docker\u5BB9\u5668\u7BA1\u7406","children":[{"level":3,"title":"\u542F\u52A8\u5BB9\u5668","slug":"\u542F\u52A8\u5BB9\u5668","link":"#\u542F\u52A8\u5BB9\u5668","children":[]},{"level":3,"title":"\u7EC8\u6B62\u5BB9\u5668","slug":"\u7EC8\u6B62\u5BB9\u5668","link":"#\u7EC8\u6B62\u5BB9\u5668","children":[]},{"level":3,"title":"\u8FDB\u5165\u5BB9\u5668","slug":"\u8FDB\u5165\u5BB9\u5668","link":"#\u8FDB\u5165\u5BB9\u5668","children":[]},{"level":3,"title":"\u4E0D\u8FDB\u5165\u5BB9\u5668\u6267\u884C\u547D\u4EE4","slug":"\u4E0D\u8FDB\u5165\u5BB9\u5668\u6267\u884C\u547D\u4EE4","link":"#\u4E0D\u8FDB\u5165\u5BB9\u5668\u6267\u884C\u547D\u4EE4","children":[]},{"level":3,"title":"\u5220\u9664\u5BB9\u5668","slug":"\u5220\u9664\u5BB9\u5668","link":"#\u5220\u9664\u5BB9\u5668","children":[]},{"level":3,"title":"\u5B66\u4E60\u4E2D\u7684\u5C0F\u6280\u5DE7","slug":"\u5B66\u4E60\u4E2D\u7684\u5C0F\u6280\u5DE7","link":"#\u5B66\u4E60\u4E2D\u7684\u5C0F\u6280\u5DE7","children":[]}]},{"level":2,"title":"Docker\u7F51\u7EDC\u8BBF\u95EE","slug":"docker\u7F51\u7EDC\u8BBF\u95EE","link":"#docker\u7F51\u7EDC\u8BBF\u95EE","children":[{"level":3,"title":"\u968F\u673A\u6620\u5C04","slug":"\u968F\u673A\u6620\u5C04","link":"#\u968F\u673A\u6620\u5C04","children":[]},{"level":3,"title":"\u6307\u5B9A\u7AEF\u53E3\u6620\u5C04","slug":"\u6307\u5B9A\u7AEF\u53E3\u6620\u5C04","link":"#\u6307\u5B9A\u7AEF\u53E3\u6620\u5C04","children":[]}]},{"level":2,"title":"Docker\u6570\u636E\u7BA1\u7406","slug":"docker\u6570\u636E\u7BA1\u7406","link":"#docker\u6570\u636E\u7BA1\u7406","children":[{"level":3,"title":"\u6570\u636E\u5377","slug":"\u6570\u636E\u5377","link":"#\u6570\u636E\u5377","children":[]},{"level":3,"title":"\u6570\u636E\u5377\u751F\u4EA7\u5B9E\u8DF5","slug":"\u6570\u636E\u5377\u751F\u4EA7\u5B9E\u8DF5","link":"#\u6570\u636E\u5377\u751F\u4EA7\u5B9E\u8DF5","children":[]},{"level":3,"title":"\u6570\u636E\u5377\u5BB9\u5668","slug":"\u6570\u636E\u5377\u5BB9\u5668","link":"#\u6570\u636E\u5377\u5BB9\u5668","children":[]},{"level":3,"title":"\u6570\u636E\u5377\u5BB9\u5668\u751F\u4EA7\u5B9E\u8DF5","slug":"\u6570\u636E\u5377\u5BB9\u5668\u751F\u4EA7\u5B9E\u8DF5","link":"#\u6570\u636E\u5377\u5BB9\u5668\u751F\u4EA7\u5B9E\u8DF5","children":[]}]},{"level":2,"title":"\u624B\u52A8\u6784\u5EFA\u955C\u50CF","slug":"\u624B\u52A8\u6784\u5EFA\u955C\u50CF","link":"#\u624B\u52A8\u6784\u5EFA\u955C\u50CF","children":[{"level":3,"title":"\u542F\u52A8\u5BB9\u5668","slug":"\u542F\u52A8\u5BB9\u5668-1","link":"#\u542F\u52A8\u5BB9\u5668-1","children":[]},{"level":3,"title":"\u63D0\u4EA4\u955C\u50CF","slug":"\u63D0\u4EA4\u955C\u50CF","link":"#\u63D0\u4EA4\u955C\u50CF","children":[]}]},{"level":2,"title":"Dockerfile\u6784\u5EFA","slug":"dockerfile\u6784\u5EFA","link":"#dockerfile\u6784\u5EFA","children":[{"level":3,"title":"Nginx Dockerfile\u5B9E\u6218","slug":"nginx-dockerfile\u5B9E\u6218","link":"#nginx-dockerfile\u5B9E\u6218","children":[]},{"level":3,"title":"\u5E38\u7528\u6307\u4EE4\u7684\u4ECB\u7ECD","slug":"\u5E38\u7528\u6307\u4EE4\u7684\u4ECB\u7ECD","link":"#\u5E38\u7528\u6307\u4EE4\u7684\u4ECB\u7ECD","children":[]},{"level":3,"title":"Dockerfile\u547D\u4EE4\u8BE6\u89E3","slug":"dockerfile\u547D\u4EE4\u8BE6\u89E3","link":"#dockerfile\u547D\u4EE4\u8BE6\u89E3","children":[]}]},{"level":2,"title":"Docker\u955C\u50CF\u751F\u4EA7\u89C4\u5212\u5B9E\u8DF5","slug":"docker\u955C\u50CF\u751F\u4EA7\u89C4\u5212\u5B9E\u8DF5","link":"#docker\u955C\u50CF\u751F\u4EA7\u89C4\u5212\u5B9E\u8DF5","children":[]},{"level":2,"title":"\u57FA\u7840\u7CFB\u7EDF\u955C\u50CF","slug":"\u57FA\u7840\u7CFB\u7EDF\u955C\u50CF","link":"#\u57FA\u7840\u7CFB\u7EDF\u955C\u50CF","children":[{"level":3,"title":"CentOS\u7CFB\u7EDF\u955C\u50CF","slug":"centos\u7CFB\u7EDF\u955C\u50CF","link":"#centos\u7CFB\u7EDF\u955C\u50CF","children":[]},{"level":3,"title":"CentOS\u7CFB\u7EDF\u955C\u50CF\u5305\u542BSSH","slug":"centos\u7CFB\u7EDF\u955C\u50CF\u5305\u542Bssh","link":"#centos\u7CFB\u7EDF\u955C\u50CF\u5305\u542Bssh","children":[]},{"level":3,"title":"\u4F7F\u7528Supervisor\u7BA1\u7406\u8FDB\u7A0B","slug":"\u4F7F\u7528supervisor\u7BA1\u7406\u8FDB\u7A0B","link":"#\u4F7F\u7528supervisor\u7BA1\u7406\u8FDB\u7A0B","children":[]},{"level":3,"title":"\u6807\u51C6\u5316CentOS\u7CFB\u7EDF\u955C\u50CF","slug":"\u6807\u51C6\u5316centos\u7CFB\u7EDF\u955C\u50CF","link":"#\u6807\u51C6\u5316centos\u7CFB\u7EDF\u955C\u50CF","children":[]}]},{"level":2,"title":"\u8FD0\u884C\u73AF\u5883\u955C\u50CF","slug":"\u8FD0\u884C\u73AF\u5883\u955C\u50CF","link":"#\u8FD0\u884C\u73AF\u5883\u955C\u50CF","children":[{"level":3,"title":"Java \u8FD0\u884C\u73AF\u5883","slug":"java-\u8FD0\u884C\u73AF\u5883","link":"#java-\u8FD0\u884C\u73AF\u5883","children":[]},{"level":3,"title":"Tomcat\u8FD0\u884C\u73AF\u5883","slug":"tomcat\u8FD0\u884C\u73AF\u5883","link":"#tomcat\u8FD0\u884C\u73AF\u5883","children":[]}]},{"level":2,"title":"\u5E94\u7528\u955C\u50CF","slug":"\u5E94\u7528\u955C\u50CF","link":"#\u5E94\u7528\u955C\u50CF","children":[{"level":3,"title":"Jenkins\u955C\u50CF\u6784\u5EFA","slug":"jenkins\u955C\u50CF\u6784\u5EFA","link":"#jenkins\u955C\u50CF\u6784\u5EFA","children":[]}]},{"level":2,"title":"Docker Registry","slug":"docker-registry","link":"#docker-registry","children":[{"level":3,"title":"\u521B\u5EFADocker Registry","slug":"\u521B\u5EFAdocker-registry","link":"#\u521B\u5EFAdocker-registry","children":[]},{"level":3,"title":"\u914D\u7F6EDocker\u4FE1\u4EFB\u4ED3\u5E93","slug":"\u914D\u7F6Edocker\u4FE1\u4EFB\u4ED3\u5E93","link":"#\u914D\u7F6Edocker\u4FE1\u4EFB\u4ED3\u5E93","children":[]},{"level":3,"title":"Push\u955C\u50CF\u5230Docker Registry","slug":"push\u955C\u50CF\u5230docker-registry","link":"#push\u955C\u50CF\u5230docker-registry","children":[]}]},{"level":2,"title":"Registry\u9879\u76EEHarbor","slug":"registry\u9879\u76EEharbor","link":"#registry\u9879\u76EEharbor","children":[{"level":3,"title":"Harbor\u90E8\u7F72","slug":"harbor\u90E8\u7F72","link":"#harbor\u90E8\u7F72","children":[]},{"level":3,"title":"Harbor\u914D\u7F6E","slug":"harbor\u914D\u7F6E","link":"#harbor\u914D\u7F6E","children":[]},{"level":3,"title":"\u4F7F\u7528Harbor\u7BA1\u7406Registry","slug":"\u4F7F\u7528harbor\u7BA1\u7406registry","link":"#\u4F7F\u7528harbor\u7BA1\u7406registry","children":[]}]},{"level":2,"title":"Kubernetes\u67B6\u6784\u4ECB\u7ECD","slug":"kubernetes\u67B6\u6784\u4ECB\u7ECD","link":"#kubernetes\u67B6\u6784\u4ECB\u7ECD","children":[{"level":3,"title":"Kubernetes\u7CFB\u7EDF\u67B6\u6784","slug":"kubernetes\u7CFB\u7EDF\u67B6\u6784","link":"#kubernetes\u7CFB\u7EDF\u67B6\u6784","children":[]},{"level":3,"title":"Kubernetes\u903B\u8F91\u67B6\u6784","slug":"kubernetes\u903B\u8F91\u67B6\u6784","link":"#kubernetes\u903B\u8F91\u67B6\u6784","children":[]},{"level":3,"title":"Kubernetes\u7F51\u7EDC\u4ECB\u7ECD","slug":"kubernetes\u7F51\u7EDC\u4ECB\u7ECD","link":"#kubernetes\u7F51\u7EDC\u4ECB\u7ECD","children":[]}]},{"level":2,"title":"\u4F7F\u7528kubeadm\u90E8\u7F72Kubernetes v1.16.4","slug":"\u4F7F\u7528kubeadm\u90E8\u7F72kubernetes-v1-16-4","link":"#\u4F7F\u7528kubeadm\u90E8\u7F72kubernetes-v1-16-4","children":[{"level":3,"title":"\u90E8\u7F72Docker","slug":"\u90E8\u7F72docker","link":"#\u90E8\u7F72docker","children":[]},{"level":3,"title":"\u90E8\u7F72kubadm\u548Ckubelet","slug":"\u90E8\u7F72kubadm\u548Ckubelet","link":"#\u90E8\u7F72kubadm\u548Ckubelet","children":[]},{"level":3,"title":"\u521D\u59CB\u5316\u96C6\u7FA4\u90E8\u7F72Master","slug":"\u521D\u59CB\u5316\u96C6\u7FA4\u90E8\u7F72master","link":"#\u521D\u59CB\u5316\u96C6\u7FA4\u90E8\u7F72master","children":[]},{"level":3,"title":"\u90E8\u7F72\u7F51\u7EDC\u63D2\u4EF6","slug":"\u90E8\u7F72\u7F51\u7EDC\u63D2\u4EF6","link":"#\u90E8\u7F72\u7F51\u7EDC\u63D2\u4EF6","children":[]},{"level":3,"title":"\u90E8\u7F72Node\u8282\u70B9","slug":"\u90E8\u7F72node\u8282\u70B9","link":"#\u90E8\u7F72node\u8282\u70B9","children":[]}]},{"level":2,"title":"\u516C\u6709\u4E91\u4E2D\u7684Kubernetes","slug":"\u516C\u6709\u4E91\u4E2D\u7684kubernetes","link":"#\u516C\u6709\u4E91\u4E2D\u7684kubernetes","children":[{"level":3,"title":"\u963F\u91CC\u4E91\u4E2D\u7684Kubernetes","slug":"\u963F\u91CC\u4E91\u4E2D\u7684kubernetes","link":"#\u963F\u91CC\u4E91\u4E2D\u7684kubernetes","children":[]},{"level":3,"title":"\u79C1\u6709\u4E91\u4E2D\u7684Kubernetes","slug":"\u79C1\u6709\u4E91\u4E2D\u7684kubernetes","link":"#\u79C1\u6709\u4E91\u4E2D\u7684kubernetes","children":[]}]},{"level":2,"title":"\u7B2C\u4E00\u6B65\uFF1A\u5C06\u5E94\u7528\u5C01\u88C5\u8FDB\u5BB9\u5668\u4E2D","slug":"\u7B2C\u4E00\u6B65\uFF1A\u5C06\u5E94\u7528\u5C01\u88C5\u8FDB\u5BB9\u5668\u4E2D","link":"#\u7B2C\u4E00\u6B65\uFF1A\u5C06\u5E94\u7528\u5C01\u88C5\u8FDB\u5BB9\u5668\u4E2D","children":[{"level":3,"title":"\u90E8\u7F72Harbor\u955C\u50CF\u4ED3\u5E93","slug":"\u90E8\u7F72harbor\u955C\u50CF\u4ED3\u5E93","link":"#\u90E8\u7F72harbor\u955C\u50CF\u4ED3\u5E93","children":[]},{"level":3,"title":"\u5236\u4F5C\u5B9E\u9A8C\u7528\u7684Docker\u955C\u50CF","slug":"\u5236\u4F5C\u5B9E\u9A8C\u7528\u7684docker\u955C\u50CF","link":"#\u5236\u4F5C\u5B9E\u9A8C\u7528\u7684docker\u955C\u50CF","children":[]},{"level":3,"title":"\u914D\u7F6EDocker\u4ED3\u5E93","slug":"\u914D\u7F6Edocker\u4ED3\u5E93","link":"#\u914D\u7F6Edocker\u4ED3\u5E93","children":[]},{"level":3,"title":"\u767B\u5F55Harbor\u955C\u50CF\u4ED3\u5E93","slug":"\u767B\u5F55harbor\u955C\u50CF\u4ED3\u5E93","link":"#\u767B\u5F55harbor\u955C\u50CF\u4ED3\u5E93","children":[]},{"level":3,"title":"\u63D0\u4EA4\u955C\u50CF\u5230Registry","slug":"\u63D0\u4EA4\u955C\u50CF\u5230registry","link":"#\u63D0\u4EA4\u955C\u50CF\u5230registry","children":[]}]},{"level":2,"title":"Pod\u7BA1\u7406","slug":"pod\u7BA1\u7406","link":"#pod\u7BA1\u7406","children":[{"level":3,"title":"\u521B\u5EFAService","slug":"\u521B\u5EFAservice","link":"#\u521B\u5EFAservice","children":[]},{"level":3,"title":"\u521B\u5EFA\u4E00\u4E2AHeadless Service","slug":"\u521B\u5EFA\u4E00\u4E2Aheadless-service","link":"#\u521B\u5EFA\u4E00\u4E2Aheadless-service","children":[]}]},{"level":2,"title":"10.1 Ingress Controller","slug":"_10-1-ingress-controller","link":"#_10-1-ingress-controller","children":[]},{"level":2,"title":"Ingress Controller Traefik","slug":"ingress-controller-traefik","link":"#ingress-controller-traefik","children":[{"level":3,"title":"\u90E8\u7F72Treafik","slug":"\u90E8\u7F72treafik","link":"#\u90E8\u7F72treafik","children":[]}]},{"level":2,"title":"7.1 Rancher\u5FEB\u901F\u5165\u95E8","slug":"_7-1-rancher\u5FEB\u901F\u5165\u95E8","link":"#_7-1-rancher\u5FEB\u901F\u5165\u95E8","children":[]},{"level":2,"title":"7.2 \u4F7F\u7528Rancher\u8FDB\u884C\u65E5\u5E38\u7BA1\u7406","slug":"_7-2-\u4F7F\u7528rancher\u8FDB\u884C\u65E5\u5E38\u7BA1\u7406","link":"#_7-2-\u4F7F\u7528rancher\u8FDB\u884C\u65E5\u5E38\u7BA1\u7406","children":[]},{"level":2,"title":"7.3 Rancher\u751F\u4EA7\u96C6\u7FA4\u90E8\u7F72","slug":"_7-3-rancher\u751F\u4EA7\u96C6\u7FA4\u90E8\u7F72","link":"#_7-3-rancher\u751F\u4EA7\u96C6\u7FA4\u90E8\u7F72","children":[{"level":3,"title":"Liveness\u63A2\u6D4B","slug":"liveness\u63A2\u6D4B","link":"#liveness\u63A2\u6D4B","children":[]},{"level":3,"title":"Readiness\u63A2\u6D4B","slug":"readiness\u63A2\u6D4B","link":"#readiness\u63A2\u6D4B","children":[]}]},{"level":2,"title":"\u5065\u5EB7\u68C0\u67E5\u7684\u65B9\u6CD5","slug":"\u5065\u5EB7\u68C0\u67E5\u7684\u65B9\u6CD5","link":"#\u5065\u5EB7\u68C0\u67E5\u7684\u65B9\u6CD5","children":[{"level":3,"title":"Pod\u7684\u57DF\u540D\u89E3\u6790\u7B56\u7565","slug":"pod\u7684\u57DF\u540D\u89E3\u6790\u7B56\u7565","link":"#pod\u7684\u57DF\u540D\u89E3\u6790\u7B56\u7565","children":[]}]},{"level":2,"title":"\u5E94\u7528\u7684DNS\u7BA1\u7406","slug":"\u5E94\u7528\u7684dns\u7BA1\u7406-1","link":"#\u5E94\u7528\u7684dns\u7BA1\u7406-1","children":[]},{"level":2,"title":"15.1 \u4F7F\u7528ConfigMap\u7BA1\u7406\u5E94\u7528\u914D\u7F6E","slug":"_15-1-\u4F7F\u7528configmap\u7BA1\u7406\u5E94\u7528\u914D\u7F6E","link":"#_15-1-\u4F7F\u7528configmap\u7BA1\u7406\u5E94\u7528\u914D\u7F6E","children":[{"level":3,"title":"\u901A\u8FC7kubectl\u547D\u4EE4\u521B\u5EFAConfigMap","slug":"\u901A\u8FC7kubectl\u547D\u4EE4\u521B\u5EFAconfigmap","link":"#\u901A\u8FC7kubectl\u547D\u4EE4\u521B\u5EFAconfigmap","children":[]},{"level":3,"title":"\u901A\u8FC7YAML\u6587\u4EF6\u521B\u5EFAConfigMap","slug":"\u901A\u8FC7yaml\u6587\u4EF6\u521B\u5EFAconfigmap","link":"#\u901A\u8FC7yaml\u6587\u4EF6\u521B\u5EFAconfigmap","children":[]},{"level":3,"title":"\u901A\u8FC7\u6587\u4EF6\u521B\u5EFAConfigMap","slug":"\u901A\u8FC7\u6587\u4EF6\u521B\u5EFAconfigmap","link":"#\u901A\u8FC7\u6587\u4EF6\u521B\u5EFAconfigmap","children":[]},{"level":3,"title":"\u4ECE\u76EE\u5F55\u521B\u5EFAConfigMap","slug":"\u4ECE\u76EE\u5F55\u521B\u5EFAconfigmap","link":"#\u4ECE\u76EE\u5F55\u521B\u5EFAconfigmap","children":[]},{"level":3,"title":"\u6DF7\u5408\u9009\u9879\u521B\u5EFAConfigMap","slug":"\u6DF7\u5408\u9009\u9879\u521B\u5EFAconfigmap","link":"#\u6DF7\u5408\u9009\u9879\u521B\u5EFAconfigmap","children":[]},{"level":3,"title":"\u901A\u8FC7\u73AF\u5883\u53D8\u91CF\u7ED9\u5BB9\u5668\u4F20\u9012ConfigMap","slug":"\u901A\u8FC7\u73AF\u5883\u53D8\u91CF\u7ED9\u5BB9\u5668\u4F20\u9012configmap","link":"#\u901A\u8FC7\u73AF\u5883\u53D8\u91CF\u7ED9\u5BB9\u5668\u4F20\u9012configmap","children":[]}]},{"level":2,"title":"15.2 \u4F7F\u7528Secret\u7BA1\u7406\u654F\u611F\u6570\u636E","slug":"_15-2-\u4F7F\u7528secret\u7BA1\u7406\u654F\u611F\u6570\u636E","link":"#_15-2-\u4F7F\u7528secret\u7BA1\u7406\u654F\u611F\u6570\u636E","children":[{"level":3,"title":"\u914D\u7F6EPod\u4F7F\u7528Harbor\u955C\u50CF","slug":"\u914D\u7F6Epod\u4F7F\u7528harbor\u955C\u50CF","link":"#\u914D\u7F6Epod\u4F7F\u7528harbor\u955C\u50CF","children":[]}]},{"level":2,"title":"Helm\u90E8\u7F72","slug":"helm\u90E8\u7F72","link":"#helm\u90E8\u7F72","children":[{"level":3,"title":"\u5B89\u88C5Helm","slug":"\u5B89\u88C5helm","link":"#\u5B89\u88C5helm","children":[]},{"level":3,"title":"\u4F7F\u7528Helm\u90E8\u7F72\u7B2C\u4E00\u4E2A\u5E94\u7528","slug":"\u4F7F\u7528helm\u90E8\u7F72\u7B2C\u4E00\u4E2A\u5E94\u7528","link":"#\u4F7F\u7528helm\u90E8\u7F72\u7B2C\u4E00\u4E2A\u5E94\u7528","children":[]},{"level":3,"title":"Helm\u7EC4\u4EF6","slug":"helm\u7EC4\u4EF6","link":"#helm\u7EC4\u4EF6","children":[]},{"level":3,"title":"\u81EA\u5B9A\u4E49Jenkins\u7684Chart","slug":"\u81EA\u5B9A\u4E49jenkins\u7684chart","link":"#\u81EA\u5B9A\u4E49jenkins\u7684chart","children":[]}]},{"level":2,"title":"\u521B\u5EFA\u81EA\u5DF1\u7684Chart","slug":"\u521B\u5EFA\u81EA\u5DF1\u7684chart","link":"#\u521B\u5EFA\u81EA\u5DF1\u7684chart","children":[{"level":3,"title":"\u521B\u5EFA\u81EA\u5B9A\u4E49Nginx\u7684Chart","slug":"\u521B\u5EFA\u81EA\u5B9A\u4E49nginx\u7684chart","link":"#\u521B\u5EFA\u81EA\u5B9A\u4E49nginx\u7684chart","children":[]},{"level":3,"title":"\u67E5\u770BHelm\u5B9E\u4F8B","slug":"\u67E5\u770Bhelm\u5B9E\u4F8B","link":"#\u67E5\u770Bhelm\u5B9E\u4F8B","children":[]}]},{"level":2,"title":"Prometheus\u5FEB\u901F\u5165\u95E8","slug":"prometheus\u5FEB\u901F\u5165\u95E8","link":"#prometheus\u5FEB\u901F\u5165\u95E8","children":[{"level":3,"title":"Prometheus\u67B6\u6784\u4ECB\u7ECD","slug":"prometheus\u67B6\u6784\u4ECB\u7ECD","link":"#prometheus\u67B6\u6784\u4ECB\u7ECD","children":[]},{"level":3,"title":"\u5B89\u88C5Prometheus","slug":"\u5B89\u88C5prometheus","link":"#\u5B89\u88C5prometheus","children":[]},{"level":3,"title":"\u4F7F\u7528Node Exporter\u91C7\u96C6\u4E3B\u673A\u6570\u636E","slug":"\u4F7F\u7528node-exporter\u91C7\u96C6\u4E3B\u673A\u6570\u636E","link":"#\u4F7F\u7528node-exporter\u91C7\u96C6\u4E3B\u673A\u6570\u636E","children":[]},{"level":3,"title":"\u4F7F\u7528Prometheus UI\u67E5\u770B\u6570\u636E","slug":"\u4F7F\u7528prometheus-ui\u67E5\u770B\u6570\u636E","link":"#\u4F7F\u7528prometheus-ui\u67E5\u770B\u6570\u636E","children":[]},{"level":3,"title":"\u4F7F\u7528Grafana\u8FDB\u884C\u6570\u636E\u53EF\u89C6\u5316","slug":"\u4F7F\u7528grafana\u8FDB\u884C\u6570\u636E\u53EF\u89C6\u5316","link":"#\u4F7F\u7528grafana\u8FDB\u884C\u6570\u636E\u53EF\u89C6\u5316","children":[]}]},{"level":2,"title":"Taints\uFF08\u6C61\u70B9\uFF09","slug":"taints\uFF08\u6C61\u70B9\uFF09","link":"#taints\uFF08\u6C61\u70B9\uFF09","children":[{"level":3,"title":"\u81EA\u5B9A\u4E49\u6C61\u70B9","slug":"\u81EA\u5B9A\u4E49\u6C61\u70B9","link":"#\u81EA\u5B9A\u4E49\u6C61\u70B9","children":[]}]},{"level":2,"title":"\u4EB2\u7F18\u6027\u8C03\u5EA6","slug":"\u4EB2\u7F18\u6027\u8C03\u5EA6","link":"#\u4EB2\u7F18\u6027\u8C03\u5EA6","children":[{"level":3,"title":"\u4F7F\u7528Swagger UI\u8FDB\u884CAPI\u4EA4\u4E92","slug":"\u4F7F\u7528swagger-ui\u8FDB\u884Capi\u4EA4\u4E92","link":"#\u4F7F\u7528swagger-ui\u8FDB\u884Capi\u4EA4\u4E92","children":[]}]}],"relativePath":"pages/posts/Docker+K8s\u5B9E\u8DF5\u6307\u5357.md","path":"/Users/vlinux/vlinux/blog/valaxy/valaxy-vlinux/pages/posts/Docker+K8s\u5B9E\u8DF5\u6307\u5357.md","lastUpdated":0}'),a=JSON.parse('{"title":"Docker+K8s\u5B9E\u8DF5\u6307\u5357","description":"","frontmatter":{"title":"Docker+K8s\u5B9E\u8DF5\u6307\u5357","categories":"DevOps","tags":["Prometheus","Kubernetes"],"date":"2020-02-27T18:26:00.000Z"},"headers":[{"level":2,"title":"\u5199\u5728\u524D\u9762\u7684\u8BDD","slug":"\u5199\u5728\u524D\u9762\u7684\u8BDD","link":"#\u5199\u5728\u524D\u9762\u7684\u8BDD","children":[]},{"level":2,"title":"\u53C2\u8003\u6587\u732E","slug":"\u53C2\u8003\u6587\u732E","link":"#\u53C2\u8003\u6587\u732E","children":[]},{"level":2,"title":"1.1 PXE+Kickstart\u4ECB\u7ECD","slug":"_1-1-pxe-kickstart\u4ECB\u7ECD","link":"#_1-1-pxe-kickstart\u4ECB\u7ECD","children":[{"level":3,"title":"1.1.1 KickStart\u5DE5\u4F5C\u539F\u7406","slug":"_1-1-1-kickstart\u5DE5\u4F5C\u539F\u7406","link":"#_1-1-1-kickstart\u5DE5\u4F5C\u539F\u7406","children":[]},{"level":3,"title":"1.1.2 PXE\u5DE5\u4F5C\u539F\u7406","slug":"_1-1-2-pxe\u5DE5\u4F5C\u539F\u7406","link":"#_1-1-2-pxe\u5DE5\u4F5C\u539F\u7406","children":[]},{"level":3,"title":"1.1.3 PXE+Kickstart\u5DE5\u4F5C\u6D41\u7A0B","slug":"_1-1-3-pxe-kickstart\u5DE5\u4F5C\u6D41\u7A0B","link":"#_1-1-3-pxe-kickstart\u5DE5\u4F5C\u6D41\u7A0B","children":[]}]},{"level":2,"title":"1.2 \u5236\u4F5C\u672C\u5730Yum\u4ED3\u5E93","slug":"_1-2-\u5236\u4F5C\u672C\u5730yum\u4ED3\u5E93","link":"#_1-2-\u5236\u4F5C\u672C\u5730yum\u4ED3\u5E93","children":[{"level":3,"title":"1.2.1 \u51C6\u5907\u5B89\u88C5\u6E90","slug":"_1-2-1-\u51C6\u5907\u5B89\u88C5\u6E90","link":"#_1-2-1-\u51C6\u5907\u5B89\u88C5\u6E90","children":[]},{"level":3,"title":"1.2.2 \u914D\u7F6ETFTP-Server","slug":"_1-2-2-\u914D\u7F6Etftp-server","link":"#_1-2-2-\u914D\u7F6Etftp-server","children":[]},{"level":3,"title":"1.2.4 \u81EA\u52A8\u5316\u5B89\u88C5\u548C\u6D41\u7A0B\u603B\u7ED3","slug":"_1-2-4-\u81EA\u52A8\u5316\u5B89\u88C5\u548C\u6D41\u7A0B\u603B\u7ED3","link":"#_1-2-4-\u81EA\u52A8\u5316\u5B89\u88C5\u548C\u6D41\u7A0B\u603B\u7ED3","children":[]}]},{"level":2,"title":"2.1 Cobbler\u90E8\u7F72","slug":"_2-1-cobbler\u90E8\u7F72","link":"#_2-1-cobbler\u90E8\u7F72","children":[{"level":3,"title":"2.1.1 Cobbler\u529F\u80FD","slug":"_2-1-1-cobbler\u529F\u80FD","link":"#_2-1-1-cobbler\u529F\u80FD","children":[]},{"level":3,"title":"2.1.2 Cobbler\u5B89\u88C5","slug":"_2-1-2-cobbler\u5B89\u88C5","link":"#_2-1-2-cobbler\u5B89\u88C5","children":[]},{"level":3,"title":"2.1.3 Cobbler\u7BA1\u7406DHCP","slug":"_2-1-3-cobbler\u7BA1\u7406dhcp","link":"#_2-1-3-cobbler\u7BA1\u7406dhcp","children":[]},{"level":3,"title":"2.1.4 Cobbler\u5BFC\u5165\u955C\u50CF","slug":"_2-1-4-cobbler\u5BFC\u5165\u955C\u50CF","link":"#_2-1-4-cobbler\u5BFC\u5165\u955C\u50CF","children":[]},{"level":3,"title":"2.1.5 \u81EA\u5B9A\u4E49kickstart\u6587\u4EF6","slug":"_2-1-5-\u81EA\u5B9A\u4E49kickstart\u6587\u4EF6","link":"#_2-1-5-\u81EA\u5B9A\u4E49kickstart\u6587\u4EF6","children":[]}]},{"level":2,"title":"2.2 \u4F7F\u7528Cobbler\u81EA\u52A8\u5316\u5B89\u88C5CentOS","slug":"_2-2-\u4F7F\u7528cobbler\u81EA\u52A8\u5316\u5B89\u88C5centos","link":"#_2-2-\u4F7F\u7528cobbler\u81EA\u52A8\u5316\u5B89\u88C5centos","children":[{"level":3,"title":"2.2.1 \u4F7F\u7528Cobbler\u5B89\u88C5CentOS","slug":"_2-2-1-\u4F7F\u7528cobbler\u5B89\u88C5centos","link":"#_2-2-1-\u4F7F\u7528cobbler\u5B89\u88C5centos","children":[]},{"level":3,"title":"2.2.2 Koan\u91CD\u65B0\u5B89\u88C5\u7CFB\u7EDF","slug":"_2-2-2-koan\u91CD\u65B0\u5B89\u88C5\u7CFB\u7EDF","link":"#_2-2-2-koan\u91CD\u65B0\u5B89\u88C5\u7CFB\u7EDF","children":[]}]},{"level":2,"title":"2.3 Cobbler Web\u4ECB\u7ECD","slug":"_2-3-cobbler-web\u4ECB\u7ECD","link":"#_2-3-cobbler-web\u4ECB\u7ECD","children":[]},{"level":2,"title":"2.4 \u6DF1\u5165\u7406\u89E3Cobbler","slug":"_2-4-\u6DF1\u5165\u7406\u89E3cobbler","link":"#_2-4-\u6DF1\u5165\u7406\u89E3cobbler","children":[{"level":3,"title":"2.4.1 Cobbler \u914D\u7F6E\u6587\u4EF6","slug":"_2-4-1-cobbler-\u914D\u7F6E\u6587\u4EF6","link":"#_2-4-1-cobbler-\u914D\u7F6E\u6587\u4EF6","children":[]},{"level":3,"title":"2.4.2 Cobbler\u8BBE\u8BA1\u65B9\u5F0F","slug":"_2-4-2-cobbler\u8BBE\u8BA1\u65B9\u5F0F","link":"#_2-4-2-cobbler\u8BBE\u8BA1\u65B9\u5F0F","children":[]},{"level":3,"title":"2.4.3 Cobbler distro","slug":"_2-4-3-cobbler-distro","link":"#_2-4-3-cobbler-distro","children":[]},{"level":3,"title":"2.1.4 Cobbler profile","slug":"_2-1-4-cobbler-profile","link":"#_2-1-4-cobbler-profile","children":[]},{"level":3,"title":"2.1.5Cobbler repo","slug":"_2-1-5cobbler-repo","link":"#_2-1-5cobbler-repo","children":[]},{"level":3,"title":"2.1.6 Cobbler snippets","slug":"_2-1-6-cobbler-snippets","link":"#_2-1-6-cobbler-snippets","children":[]}]},{"level":2,"title":"3.1 Cobbler\u6784\u5EFA\u79C1\u6709YUM\u4ED3\u5E93","slug":"_3-1-cobbler\u6784\u5EFA\u79C1\u6709yum\u4ED3\u5E93","link":"#_3-1-cobbler\u6784\u5EFA\u79C1\u6709yum\u4ED3\u5E93","children":[{"level":3,"title":"3.1.1 \u6784\u5EFAOpenStack\u79C1\u6709\u4ED3\u5E93","slug":"_3-1-1-\u6784\u5EFAopenstack\u79C1\u6709\u4ED3\u5E93","link":"#_3-1-1-\u6784\u5EFAopenstack\u79C1\u6709\u4ED3\u5E93","children":[]},{"level":3,"title":"3.1.2 \u6784\u5EFAZabbix\u79C1\u6709\u4ED3\u5E93","slug":"_3-1-2-\u6784\u5EFAzabbix\u79C1\u6709\u4ED3\u5E93","link":"#_3-1-2-\u6784\u5EFAzabbix\u79C1\u6709\u4ED3\u5E93","children":[]},{"level":3,"title":"3.1.3 \u6784\u5EFASaltStack\u79C1\u6709\u4ED3\u5E93","slug":"_3-1-3-\u6784\u5EFAsaltstack\u79C1\u6709\u4ED3\u5E93","link":"#_3-1-3-\u6784\u5EFAsaltstack\u79C1\u6709\u4ED3\u5E93","children":[]},{"level":3,"title":"3.1.4 \u5C06\u79C1\u6709\u4ED3\u5E93\u6DFB\u52A0\u5230Profile","slug":"_3-1-4-\u5C06\u79C1\u6709\u4ED3\u5E93\u6DFB\u52A0\u5230profile","link":"#_3-1-4-\u5C06\u79C1\u6709\u4ED3\u5E93\u6DFB\u52A0\u5230profile","children":[]}]},{"level":2,"title":"3.2 \u4F7F\u7528Cobbler\u81EA\u52A8\u5316\u5B89\u88C5ESXi","slug":"_3-2-\u4F7F\u7528cobbler\u81EA\u52A8\u5316\u5B89\u88C5esxi","link":"#_3-2-\u4F7F\u7528cobbler\u81EA\u52A8\u5316\u5B89\u88C5esxi","children":[]},{"level":2,"title":"3.3 \u5B9A\u5236\u5316\u670D\u52A1\u5668\u5B89\u88C5","slug":"_3-3-\u5B9A\u5236\u5316\u670D\u52A1\u5668\u5B89\u88C5","link":"#_3-3-\u5B9A\u5236\u5316\u670D\u52A1\u5668\u5B89\u88C5","children":[{"level":3,"title":"3.3.1 \u81EA\u52A8\u5316\u5B89\u88C5\u6D41\u7A0B\u68B3\u7406","slug":"_3-3-1-\u81EA\u52A8\u5316\u5B89\u88C5\u6D41\u7A0B\u68B3\u7406","link":"#_3-3-1-\u81EA\u52A8\u5316\u5B89\u88C5\u6D41\u7A0B\u68B3\u7406","children":[]},{"level":3,"title":"3.3.2 Cobbler\u83B7\u53D6\u5B89\u88C5\u8FDB\u5EA6","slug":"_3-3-2-cobbler\u83B7\u53D6\u5B89\u88C5\u8FDB\u5EA6","link":"#_3-3-2-cobbler\u83B7\u53D6\u5B89\u88C5\u8FDB\u5EA6","children":[]}]},{"level":2,"title":"4.1 \u81EA\u5B9A\u4E49\u7269\u7406\u7F51\u5361bonding","slug":"_4-1-\u81EA\u5B9A\u4E49\u7269\u7406\u7F51\u5361bonding","link":"#_4-1-\u81EA\u5B9A\u4E49\u7269\u7406\u7F51\u5361bonding","children":[]},{"level":2,"title":"4.2 Cobbler\u7535\u6E90\u7BA1\u7406","slug":"_4-2-cobbler\u7535\u6E90\u7BA1\u7406","link":"#_4-2-cobbler\u7535\u6E90\u7BA1\u7406","children":[]},{"level":2,"title":"4.3 Cobbler API\u4F7F\u7528","slug":"_4-3-cobbler-api\u4F7F\u7528","link":"#_4-3-cobbler-api\u4F7F\u7528","children":[]},{"level":2,"title":"\u4E91\u8BA1\u7B97\u6982\u8FF0","slug":"\u4E91\u8BA1\u7B97\u6982\u8FF0-1","link":"#\u4E91\u8BA1\u7B97\u6982\u8FF0-1","children":[{"level":3,"title":"\u4E91\u8BA1\u7B97\u7684\u5206\u7C7B","slug":"\u4E91\u8BA1\u7B97\u7684\u5206\u7C7B","link":"#\u4E91\u8BA1\u7B97\u7684\u5206\u7C7B","children":[]},{"level":3,"title":"\u4E91\u8BA1\u7B97\u7684\u5206\u5C42","slug":"\u4E91\u8BA1\u7B97\u7684\u5206\u5C42","link":"#\u4E91\u8BA1\u7B97\u7684\u5206\u5C42","children":[]}]},{"level":2,"title":"\u4E91\u8BA1\u7B97\u4E0E\u865A\u62DF\u5316","slug":"\u4E91\u8BA1\u7B97\u4E0E\u865A\u62DF\u5316","link":"#\u4E91\u8BA1\u7B97\u4E0E\u865A\u62DF\u5316","children":[{"level":3,"title":"\u5168\u865A\u62DF\u5316\u548C\u534A\u865A\u62DF\u5316","slug":"\u5168\u865A\u62DF\u5316\u548C\u534A\u865A\u62DF\u5316","link":"#\u5168\u865A\u62DF\u5316\u548C\u534A\u865A\u62DF\u5316","children":[]},{"level":3,"title":"\u865A\u62DF\u5316\u5206\u7C7B","slug":"\u865A\u62DF\u5316\u5206\u7C7B","link":"#\u865A\u62DF\u5316\u5206\u7C7B","children":[]},{"level":3,"title":"\u4E91\u8BA1\u7B97\u4E0D\u7B49\u4E8E\u865A\u62DF\u5316","slug":"\u4E91\u8BA1\u7B97\u4E0D\u7B49\u4E8E\u865A\u62DF\u5316","link":"#\u4E91\u8BA1\u7B97\u4E0D\u7B49\u4E8E\u865A\u62DF\u5316","children":[]},{"level":3,"title":"3.2.1 OpenStack\u5B9E\u6218\u6848\u4F8B","slug":"_3-2-1-openstack\u5B9E\u6218\u6848\u4F8B","link":"#_3-2-1-openstack\u5B9E\u6218\u6848\u4F8B","children":[]},{"level":3,"title":"3.2.2 NTP\u65F6\u95F4\u540C\u6B65","slug":"_3-2-2-ntp\u65F6\u95F4\u540C\u6B65","link":"#_3-2-2-ntp\u65F6\u95F4\u540C\u6B65","children":[]},{"level":3,"title":"3.2.3 \u57FA\u7840\u8F6F\u4EF6\u5305\u5B89\u88C5","slug":"_3-2-3-\u57FA\u7840\u8F6F\u4EF6\u5305\u5B89\u88C5","link":"#_3-2-3-\u57FA\u7840\u8F6F\u4EF6\u5305\u5B89\u88C5","children":[]},{"level":3,"title":"3.2.4 MySQL\u6570\u636E\u5E93\u90E8\u7F72","slug":"_3-2-4-mysql\u6570\u636E\u5E93\u90E8\u7F72","link":"#_3-2-4-mysql\u6570\u636E\u5E93\u90E8\u7F72","children":[]},{"level":3,"title":"\u6D88\u606F\u4EE3\u7406RabbitMQ","slug":"\u6D88\u606F\u4EE3\u7406rabbitmq","link":"#\u6D88\u606F\u4EE3\u7406rabbitmq","children":[]},{"level":3,"title":"Keystone\u6982\u8FF0","slug":"keystone\u6982\u8FF0","link":"#keystone\u6982\u8FF0","children":[]},{"level":3,"title":"KeyStone\u90E8\u7F72","slug":"keystone\u90E8\u7F72","link":"#keystone\u90E8\u7F72","children":[]},{"level":3,"title":"Keystone\u6743\u9650\u7BA1\u7406","slug":"keystone\u6743\u9650\u7BA1\u7406","link":"#keystone\u6743\u9650\u7BA1\u7406","children":[]},{"level":3,"title":"\u9A8C\u8BC1Keystone\u5B89\u88C5","slug":"\u9A8C\u8BC1keystone\u5B89\u88C5","link":"#\u9A8C\u8BC1keystone\u5B89\u88C5","children":[]},{"level":3,"title":"\u73AF\u5883\u53D8\u91CF\u811A\u672C\u914D\u7F6E","slug":"\u73AF\u5883\u53D8\u91CF\u811A\u672C\u914D\u7F6E","link":"#\u73AF\u5883\u53D8\u91CF\u811A\u672C\u914D\u7F6E","children":[]},{"level":3,"title":"Keystone\u6982\u8FF0","slug":"keystone\u6982\u8FF0-1","link":"#keystone\u6982\u8FF0-1","children":[]},{"level":3,"title":"KeyStone\u90E8\u7F72","slug":"keystone\u90E8\u7F72-1","link":"#keystone\u90E8\u7F72-1","children":[]},{"level":3,"title":"Keystone\u6743\u9650\u7BA1\u7406","slug":"keystone\u6743\u9650\u7BA1\u7406-1","link":"#keystone\u6743\u9650\u7BA1\u7406-1","children":[]},{"level":3,"title":"\u9A8C\u8BC1Keystone\u5B89\u88C5","slug":"\u9A8C\u8BC1keystone\u5B89\u88C5-1","link":"#\u9A8C\u8BC1keystone\u5B89\u88C5-1","children":[]},{"level":3,"title":"\u73AF\u5883\u53D8\u91CF\u811A\u672C\u914D\u7F6E","slug":"\u73AF\u5883\u53D8\u91CF\u811A\u672C\u914D\u7F6E-1","link":"#\u73AF\u5883\u53D8\u91CF\u811A\u672C\u914D\u7F6E-1","children":[]},{"level":3,"title":"Glance\u6982\u8FF0","slug":"glance\u6982\u8FF0","link":"#glance\u6982\u8FF0","children":[]},{"level":3,"title":"Glance\u90E8\u7F72","slug":"glance\u90E8\u7F72","link":"#glance\u90E8\u7F72","children":[]},{"level":3,"title":"\u9A8C\u8BC1Glance\u5B89\u88C5","slug":"\u9A8C\u8BC1glance\u5B89\u88C5","link":"#\u9A8C\u8BC1glance\u5B89\u88C5","children":[]},{"level":3,"title":"3.5.1 Placement\u6982\u8FF0","slug":"_3-5-1-placement\u6982\u8FF0","link":"#_3-5-1-placement\u6982\u8FF0","children":[]},{"level":3,"title":"3.5.2 Placement\u90E8\u7F72","slug":"_3-5-2-placement\u90E8\u7F72","link":"#_3-5-2-placement\u90E8\u7F72","children":[]},{"level":3,"title":"Nova\u670D\u52A1\u7EC4\u4EF6","slug":"nova\u670D\u52A1\u7EC4\u4EF6","link":"#nova\u670D\u52A1\u7EC4\u4EF6","children":[]},{"level":3,"title":"Nova\u63A7\u5236\u8282\u70B9\u90E8\u7F72","slug":"nova\u63A7\u5236\u8282\u70B9\u90E8\u7F72","link":"#nova\u63A7\u5236\u8282\u70B9\u90E8\u7F72","children":[]},{"level":3,"title":"Nova\u8BA1\u7B97\u8282\u70B9\u90E8\u7F72","slug":"nova\u8BA1\u7B97\u8282\u70B9\u90E8\u7F72","link":"#nova\u8BA1\u7B97\u8282\u70B9\u90E8\u7F72","children":[]},{"level":3,"title":"\u9A8C\u8BC1Nova\u5B89\u88C5","slug":"\u9A8C\u8BC1nova\u5B89\u88C5","link":"#\u9A8C\u8BC1nova\u5B89\u88C5","children":[]},{"level":3,"title":"Neutron\u6982\u8FF0","slug":"neutron\u6982\u8FF0","link":"#neutron\u6982\u8FF0","children":[]},{"level":3,"title":"Neutron\u63A7\u5236\u8282\u70B9\u90E8\u7F72","slug":"neutron\u63A7\u5236\u8282\u70B9\u90E8\u7F72","link":"#neutron\u63A7\u5236\u8282\u70B9\u90E8\u7F72","children":[]},{"level":3,"title":"Neutron\u8BA1\u7B97\u8282\u70B9\u90E8\u7F72","slug":"neutron\u8BA1\u7B97\u8282\u70B9\u90E8\u7F72","link":"#neutron\u8BA1\u7B97\u8282\u70B9\u90E8\u7F72","children":[]},{"level":3,"title":"Bug\u89E3\u51B3","slug":"bug\u89E3\u51B3","link":"#bug\u89E3\u51B3","children":[]},{"level":3,"title":"\u521B\u5EFAFLAT\u7F51\u7EDC","slug":"\u521B\u5EFAflat\u7F51\u7EDC","link":"#\u521B\u5EFAflat\u7F51\u7EDC","children":[]},{"level":3,"title":"\u521B\u5EFA\u4E91\u4E3B\u673A","slug":"\u521B\u5EFA\u4E91\u4E3B\u673A","link":"#\u521B\u5EFA\u4E91\u4E3B\u673A","children":[]},{"level":3,"title":"\u6D4B\u8BD5\u4E91\u4E3B\u673A","slug":"\u6D4B\u8BD5\u4E91\u4E3B\u673A","link":"#\u6D4B\u8BD5\u4E91\u4E3B\u673A","children":[]},{"level":3,"title":"Horizon\u90E8\u7F72","slug":"horizon\u90E8\u7F72","link":"#horizon\u90E8\u7F72","children":[]},{"level":3,"title":"Horizon\u7684Session\u5B58\u50A8","slug":"horizon\u7684session\u5B58\u50A8","link":"#horizon\u7684session\u5B58\u50A8","children":[]}]},{"level":2,"title":"Docker\u4ECB\u7ECD","slug":"docker\u4ECB\u7ECD","link":"#docker\u4ECB\u7ECD","children":[{"level":3,"title":"Docker\u4E0E\u865A\u62DF\u5316","slug":"docker\u4E0E\u865A\u62DF\u5316","link":"#docker\u4E0E\u865A\u62DF\u5316","children":[]},{"level":3,"title":"Docker\u4E0EOpenStack\u5BF9\u6BD4","slug":"docker\u4E0Eopenstack\u5BF9\u6BD4","link":"#docker\u4E0Eopenstack\u5BF9\u6BD4","children":[]},{"level":3,"title":"Docker\u6539\u53D8\u4E86\u4EC0\u4E48\uFF1F","slug":"docker\u6539\u53D8\u4E86\u4EC0\u4E48\uFF1F","link":"#docker\u6539\u53D8\u4E86\u4EC0\u4E48\uFF1F","children":[]}]},{"level":2,"title":"Docker\u90E8\u7F72","slug":"docker\u90E8\u7F72","link":"#docker\u90E8\u7F72","children":[{"level":3,"title":"Docker for CentOS\uFF1A","slug":"docker-for-centos\uFF1A","link":"#docker-for-centos\uFF1A","children":[]},{"level":3,"title":"Docker for windows:","slug":"docker-for-windows","link":"#docker-for-windows","children":[]},{"level":3,"title":"Docker Hub","slug":"docker-hub","link":"#docker-hub","children":[]}]},{"level":2,"title":"Docker\u955C\u50CF\u7BA1\u7406","slug":"docker\u955C\u50CF\u7BA1\u7406","link":"#docker\u955C\u50CF\u7BA1\u7406","children":[{"level":3,"title":"\u521B\u5EFA\u955C\u50CF","slug":"\u521B\u5EFA\u955C\u50CF","link":"#\u521B\u5EFA\u955C\u50CF","children":[]},{"level":3,"title":"\u83B7\u53D6\u955C\u50CF","slug":"\u83B7\u53D6\u955C\u50CF","link":"#\u83B7\u53D6\u955C\u50CF","children":[]},{"level":3,"title":"\u67E5\u770B\u955C\u50CF","slug":"\u67E5\u770B\u955C\u50CF","link":"#\u67E5\u770B\u955C\u50CF","children":[]},{"level":3,"title":"\u955C\u50CF\u7684\u5BFC\u5165\u5BFC\u51FA","slug":"\u955C\u50CF\u7684\u5BFC\u5165\u5BFC\u51FA","link":"#\u955C\u50CF\u7684\u5BFC\u5165\u5BFC\u51FA","children":[]},{"level":3,"title":"\u5220\u9664\u955C\u50CF","slug":"\u5220\u9664\u955C\u50CF","link":"#\u5220\u9664\u955C\u50CF","children":[]}]},{"level":2,"title":"Docker\u5BB9\u5668\u7BA1\u7406","slug":"docker\u5BB9\u5668\u7BA1\u7406","link":"#docker\u5BB9\u5668\u7BA1\u7406","children":[{"level":3,"title":"\u542F\u52A8\u5BB9\u5668","slug":"\u542F\u52A8\u5BB9\u5668","link":"#\u542F\u52A8\u5BB9\u5668","children":[]},{"level":3,"title":"\u7EC8\u6B62\u5BB9\u5668","slug":"\u7EC8\u6B62\u5BB9\u5668","link":"#\u7EC8\u6B62\u5BB9\u5668","children":[]},{"level":3,"title":"\u8FDB\u5165\u5BB9\u5668","slug":"\u8FDB\u5165\u5BB9\u5668","link":"#\u8FDB\u5165\u5BB9\u5668","children":[]},{"level":3,"title":"\u4E0D\u8FDB\u5165\u5BB9\u5668\u6267\u884C\u547D\u4EE4","slug":"\u4E0D\u8FDB\u5165\u5BB9\u5668\u6267\u884C\u547D\u4EE4","link":"#\u4E0D\u8FDB\u5165\u5BB9\u5668\u6267\u884C\u547D\u4EE4","children":[]},{"level":3,"title":"\u5220\u9664\u5BB9\u5668","slug":"\u5220\u9664\u5BB9\u5668","link":"#\u5220\u9664\u5BB9\u5668","children":[]},{"level":3,"title":"\u5B66\u4E60\u4E2D\u7684\u5C0F\u6280\u5DE7","slug":"\u5B66\u4E60\u4E2D\u7684\u5C0F\u6280\u5DE7","link":"#\u5B66\u4E60\u4E2D\u7684\u5C0F\u6280\u5DE7","children":[]}]},{"level":2,"title":"Docker\u7F51\u7EDC\u8BBF\u95EE","slug":"docker\u7F51\u7EDC\u8BBF\u95EE","link":"#docker\u7F51\u7EDC\u8BBF\u95EE","children":[{"level":3,"title":"\u968F\u673A\u6620\u5C04","slug":"\u968F\u673A\u6620\u5C04","link":"#\u968F\u673A\u6620\u5C04","children":[]},{"level":3,"title":"\u6307\u5B9A\u7AEF\u53E3\u6620\u5C04","slug":"\u6307\u5B9A\u7AEF\u53E3\u6620\u5C04","link":"#\u6307\u5B9A\u7AEF\u53E3\u6620\u5C04","children":[]}]},{"level":2,"title":"Docker\u6570\u636E\u7BA1\u7406","slug":"docker\u6570\u636E\u7BA1\u7406","link":"#docker\u6570\u636E\u7BA1\u7406","children":[{"level":3,"title":"\u6570\u636E\u5377","slug":"\u6570\u636E\u5377","link":"#\u6570\u636E\u5377","children":[]},{"level":3,"title":"\u6570\u636E\u5377\u751F\u4EA7\u5B9E\u8DF5","slug":"\u6570\u636E\u5377\u751F\u4EA7\u5B9E\u8DF5","link":"#\u6570\u636E\u5377\u751F\u4EA7\u5B9E\u8DF5","children":[]},{"level":3,"title":"\u6570\u636E\u5377\u5BB9\u5668","slug":"\u6570\u636E\u5377\u5BB9\u5668","link":"#\u6570\u636E\u5377\u5BB9\u5668","children":[]},{"level":3,"title":"\u6570\u636E\u5377\u5BB9\u5668\u751F\u4EA7\u5B9E\u8DF5","slug":"\u6570\u636E\u5377\u5BB9\u5668\u751F\u4EA7\u5B9E\u8DF5","link":"#\u6570\u636E\u5377\u5BB9\u5668\u751F\u4EA7\u5B9E\u8DF5","children":[]}]},{"level":2,"title":"\u624B\u52A8\u6784\u5EFA\u955C\u50CF","slug":"\u624B\u52A8\u6784\u5EFA\u955C\u50CF","link":"#\u624B\u52A8\u6784\u5EFA\u955C\u50CF","children":[{"level":3,"title":"\u542F\u52A8\u5BB9\u5668","slug":"\u542F\u52A8\u5BB9\u5668-1","link":"#\u542F\u52A8\u5BB9\u5668-1","children":[]},{"level":3,"title":"\u63D0\u4EA4\u955C\u50CF","slug":"\u63D0\u4EA4\u955C\u50CF","link":"#\u63D0\u4EA4\u955C\u50CF","children":[]}]},{"level":2,"title":"Dockerfile\u6784\u5EFA","slug":"dockerfile\u6784\u5EFA","link":"#dockerfile\u6784\u5EFA","children":[{"level":3,"title":"Nginx Dockerfile\u5B9E\u6218","slug":"nginx-dockerfile\u5B9E\u6218","link":"#nginx-dockerfile\u5B9E\u6218","children":[]},{"level":3,"title":"\u5E38\u7528\u6307\u4EE4\u7684\u4ECB\u7ECD","slug":"\u5E38\u7528\u6307\u4EE4\u7684\u4ECB\u7ECD","link":"#\u5E38\u7528\u6307\u4EE4\u7684\u4ECB\u7ECD","children":[]},{"level":3,"title":"Dockerfile\u547D\u4EE4\u8BE6\u89E3","slug":"dockerfile\u547D\u4EE4\u8BE6\u89E3","link":"#dockerfile\u547D\u4EE4\u8BE6\u89E3","children":[]}]},{"level":2,"title":"Docker\u955C\u50CF\u751F\u4EA7\u89C4\u5212\u5B9E\u8DF5","slug":"docker\u955C\u50CF\u751F\u4EA7\u89C4\u5212\u5B9E\u8DF5","link":"#docker\u955C\u50CF\u751F\u4EA7\u89C4\u5212\u5B9E\u8DF5","children":[]},{"level":2,"title":"\u57FA\u7840\u7CFB\u7EDF\u955C\u50CF","slug":"\u57FA\u7840\u7CFB\u7EDF\u955C\u50CF","link":"#\u57FA\u7840\u7CFB\u7EDF\u955C\u50CF","children":[{"level":3,"title":"CentOS\u7CFB\u7EDF\u955C\u50CF","slug":"centos\u7CFB\u7EDF\u955C\u50CF","link":"#centos\u7CFB\u7EDF\u955C\u50CF","children":[]},{"level":3,"title":"CentOS\u7CFB\u7EDF\u955C\u50CF\u5305\u542BSSH","slug":"centos\u7CFB\u7EDF\u955C\u50CF\u5305\u542Bssh","link":"#centos\u7CFB\u7EDF\u955C\u50CF\u5305\u542Bssh","children":[]},{"level":3,"title":"\u4F7F\u7528Supervisor\u7BA1\u7406\u8FDB\u7A0B","slug":"\u4F7F\u7528supervisor\u7BA1\u7406\u8FDB\u7A0B","link":"#\u4F7F\u7528supervisor\u7BA1\u7406\u8FDB\u7A0B","children":[]},{"level":3,"title":"\u6807\u51C6\u5316CentOS\u7CFB\u7EDF\u955C\u50CF","slug":"\u6807\u51C6\u5316centos\u7CFB\u7EDF\u955C\u50CF","link":"#\u6807\u51C6\u5316centos\u7CFB\u7EDF\u955C\u50CF","children":[]}]},{"level":2,"title":"\u8FD0\u884C\u73AF\u5883\u955C\u50CF","slug":"\u8FD0\u884C\u73AF\u5883\u955C\u50CF","link":"#\u8FD0\u884C\u73AF\u5883\u955C\u50CF","children":[{"level":3,"title":"Java \u8FD0\u884C\u73AF\u5883","slug":"java-\u8FD0\u884C\u73AF\u5883","link":"#java-\u8FD0\u884C\u73AF\u5883","children":[]},{"level":3,"title":"Tomcat\u8FD0\u884C\u73AF\u5883","slug":"tomcat\u8FD0\u884C\u73AF\u5883","link":"#tomcat\u8FD0\u884C\u73AF\u5883","children":[]}]},{"level":2,"title":"\u5E94\u7528\u955C\u50CF","slug":"\u5E94\u7528\u955C\u50CF","link":"#\u5E94\u7528\u955C\u50CF","children":[{"level":3,"title":"Jenkins\u955C\u50CF\u6784\u5EFA","slug":"jenkins\u955C\u50CF\u6784\u5EFA","link":"#jenkins\u955C\u50CF\u6784\u5EFA","children":[]}]},{"level":2,"title":"Docker Registry","slug":"docker-registry","link":"#docker-registry","children":[{"level":3,"title":"\u521B\u5EFADocker Registry","slug":"\u521B\u5EFAdocker-registry","link":"#\u521B\u5EFAdocker-registry","children":[]},{"level":3,"title":"\u914D\u7F6EDocker\u4FE1\u4EFB\u4ED3\u5E93","slug":"\u914D\u7F6Edocker\u4FE1\u4EFB\u4ED3\u5E93","link":"#\u914D\u7F6Edocker\u4FE1\u4EFB\u4ED3\u5E93","children":[]},{"level":3,"title":"Push\u955C\u50CF\u5230Docker Registry","slug":"push\u955C\u50CF\u5230docker-registry","link":"#push\u955C\u50CF\u5230docker-registry","children":[]}]},{"level":2,"title":"Registry\u9879\u76EEHarbor","slug":"registry\u9879\u76EEharbor","link":"#registry\u9879\u76EEharbor","children":[{"level":3,"title":"Harbor\u90E8\u7F72","slug":"harbor\u90E8\u7F72","link":"#harbor\u90E8\u7F72","children":[]},{"level":3,"title":"Harbor\u914D\u7F6E","slug":"harbor\u914D\u7F6E","link":"#harbor\u914D\u7F6E","children":[]},{"level":3,"title":"\u4F7F\u7528Harbor\u7BA1\u7406Registry","slug":"\u4F7F\u7528harbor\u7BA1\u7406registry","link":"#\u4F7F\u7528harbor\u7BA1\u7406registry","children":[]}]},{"level":2,"title":"Kubernetes\u67B6\u6784\u4ECB\u7ECD","slug":"kubernetes\u67B6\u6784\u4ECB\u7ECD","link":"#kubernetes\u67B6\u6784\u4ECB\u7ECD","children":[{"level":3,"title":"Kubernetes\u7CFB\u7EDF\u67B6\u6784","slug":"kubernetes\u7CFB\u7EDF\u67B6\u6784","link":"#kubernetes\u7CFB\u7EDF\u67B6\u6784","children":[]},{"level":3,"title":"Kubernetes\u903B\u8F91\u67B6\u6784","slug":"kubernetes\u903B\u8F91\u67B6\u6784","link":"#kubernetes\u903B\u8F91\u67B6\u6784","children":[]},{"level":3,"title":"Kubernetes\u7F51\u7EDC\u4ECB\u7ECD","slug":"kubernetes\u7F51\u7EDC\u4ECB\u7ECD","link":"#kubernetes\u7F51\u7EDC\u4ECB\u7ECD","children":[]}]},{"level":2,"title":"\u4F7F\u7528kubeadm\u90E8\u7F72Kubernetes v1.16.4","slug":"\u4F7F\u7528kubeadm\u90E8\u7F72kubernetes-v1-16-4","link":"#\u4F7F\u7528kubeadm\u90E8\u7F72kubernetes-v1-16-4","children":[{"level":3,"title":"\u90E8\u7F72Docker","slug":"\u90E8\u7F72docker","link":"#\u90E8\u7F72docker","children":[]},{"level":3,"title":"\u90E8\u7F72kubadm\u548Ckubelet","slug":"\u90E8\u7F72kubadm\u548Ckubelet","link":"#\u90E8\u7F72kubadm\u548Ckubelet","children":[]},{"level":3,"title":"\u521D\u59CB\u5316\u96C6\u7FA4\u90E8\u7F72Master","slug":"\u521D\u59CB\u5316\u96C6\u7FA4\u90E8\u7F72master","link":"#\u521D\u59CB\u5316\u96C6\u7FA4\u90E8\u7F72master","children":[]},{"level":3,"title":"\u90E8\u7F72\u7F51\u7EDC\u63D2\u4EF6","slug":"\u90E8\u7F72\u7F51\u7EDC\u63D2\u4EF6","link":"#\u90E8\u7F72\u7F51\u7EDC\u63D2\u4EF6","children":[]},{"level":3,"title":"\u90E8\u7F72Node\u8282\u70B9","slug":"\u90E8\u7F72node\u8282\u70B9","link":"#\u90E8\u7F72node\u8282\u70B9","children":[]}]},{"level":2,"title":"\u516C\u6709\u4E91\u4E2D\u7684Kubernetes","slug":"\u516C\u6709\u4E91\u4E2D\u7684kubernetes","link":"#\u516C\u6709\u4E91\u4E2D\u7684kubernetes","children":[{"level":3,"title":"\u963F\u91CC\u4E91\u4E2D\u7684Kubernetes","slug":"\u963F\u91CC\u4E91\u4E2D\u7684kubernetes","link":"#\u963F\u91CC\u4E91\u4E2D\u7684kubernetes","children":[]},{"level":3,"title":"\u79C1\u6709\u4E91\u4E2D\u7684Kubernetes","slug":"\u79C1\u6709\u4E91\u4E2D\u7684kubernetes","link":"#\u79C1\u6709\u4E91\u4E2D\u7684kubernetes","children":[]}]},{"level":2,"title":"\u7B2C\u4E00\u6B65\uFF1A\u5C06\u5E94\u7528\u5C01\u88C5\u8FDB\u5BB9\u5668\u4E2D","slug":"\u7B2C\u4E00\u6B65\uFF1A\u5C06\u5E94\u7528\u5C01\u88C5\u8FDB\u5BB9\u5668\u4E2D","link":"#\u7B2C\u4E00\u6B65\uFF1A\u5C06\u5E94\u7528\u5C01\u88C5\u8FDB\u5BB9\u5668\u4E2D","children":[{"level":3,"title":"\u90E8\u7F72Harbor\u955C\u50CF\u4ED3\u5E93","slug":"\u90E8\u7F72harbor\u955C\u50CF\u4ED3\u5E93","link":"#\u90E8\u7F72harbor\u955C\u50CF\u4ED3\u5E93","children":[]},{"level":3,"title":"\u5236\u4F5C\u5B9E\u9A8C\u7528\u7684Docker\u955C\u50CF","slug":"\u5236\u4F5C\u5B9E\u9A8C\u7528\u7684docker\u955C\u50CF","link":"#\u5236\u4F5C\u5B9E\u9A8C\u7528\u7684docker\u955C\u50CF","children":[]},{"level":3,"title":"\u914D\u7F6EDocker\u4ED3\u5E93","slug":"\u914D\u7F6Edocker\u4ED3\u5E93","link":"#\u914D\u7F6Edocker\u4ED3\u5E93","children":[]},{"level":3,"title":"\u767B\u5F55Harbor\u955C\u50CF\u4ED3\u5E93","slug":"\u767B\u5F55harbor\u955C\u50CF\u4ED3\u5E93","link":"#\u767B\u5F55harbor\u955C\u50CF\u4ED3\u5E93","children":[]},{"level":3,"title":"\u63D0\u4EA4\u955C\u50CF\u5230Registry","slug":"\u63D0\u4EA4\u955C\u50CF\u5230registry","link":"#\u63D0\u4EA4\u955C\u50CF\u5230registry","children":[]}]},{"level":2,"title":"Pod\u7BA1\u7406","slug":"pod\u7BA1\u7406","link":"#pod\u7BA1\u7406","children":[{"level":3,"title":"\u521B\u5EFAService","slug":"\u521B\u5EFAservice","link":"#\u521B\u5EFAservice","children":[]},{"level":3,"title":"\u521B\u5EFA\u4E00\u4E2AHeadless Service","slug":"\u521B\u5EFA\u4E00\u4E2Aheadless-service","link":"#\u521B\u5EFA\u4E00\u4E2Aheadless-service","children":[]}]},{"level":2,"title":"10.1 Ingress Controller","slug":"_10-1-ingress-controller","link":"#_10-1-ingress-controller","children":[]},{"level":2,"title":"Ingress Controller Traefik","slug":"ingress-controller-traefik","link":"#ingress-controller-traefik","children":[{"level":3,"title":"\u90E8\u7F72Treafik","slug":"\u90E8\u7F72treafik","link":"#\u90E8\u7F72treafik","children":[]}]},{"level":2,"title":"7.1 Rancher\u5FEB\u901F\u5165\u95E8","slug":"_7-1-rancher\u5FEB\u901F\u5165\u95E8","link":"#_7-1-rancher\u5FEB\u901F\u5165\u95E8","children":[]},{"level":2,"title":"7.2 \u4F7F\u7528Rancher\u8FDB\u884C\u65E5\u5E38\u7BA1\u7406","slug":"_7-2-\u4F7F\u7528rancher\u8FDB\u884C\u65E5\u5E38\u7BA1\u7406","link":"#_7-2-\u4F7F\u7528rancher\u8FDB\u884C\u65E5\u5E38\u7BA1\u7406","children":[]},{"level":2,"title":"7.3 Rancher\u751F\u4EA7\u96C6\u7FA4\u90E8\u7F72","slug":"_7-3-rancher\u751F\u4EA7\u96C6\u7FA4\u90E8\u7F72","link":"#_7-3-rancher\u751F\u4EA7\u96C6\u7FA4\u90E8\u7F72","children":[{"level":3,"title":"Liveness\u63A2\u6D4B","slug":"liveness\u63A2\u6D4B","link":"#liveness\u63A2\u6D4B","children":[]},{"level":3,"title":"Readiness\u63A2\u6D4B","slug":"readiness\u63A2\u6D4B","link":"#readiness\u63A2\u6D4B","children":[]}]},{"level":2,"title":"\u5065\u5EB7\u68C0\u67E5\u7684\u65B9\u6CD5","slug":"\u5065\u5EB7\u68C0\u67E5\u7684\u65B9\u6CD5","link":"#\u5065\u5EB7\u68C0\u67E5\u7684\u65B9\u6CD5","children":[{"level":3,"title":"Pod\u7684\u57DF\u540D\u89E3\u6790\u7B56\u7565","slug":"pod\u7684\u57DF\u540D\u89E3\u6790\u7B56\u7565","link":"#pod\u7684\u57DF\u540D\u89E3\u6790\u7B56\u7565","children":[]}]},{"level":2,"title":"\u5E94\u7528\u7684DNS\u7BA1\u7406","slug":"\u5E94\u7528\u7684dns\u7BA1\u7406-1","link":"#\u5E94\u7528\u7684dns\u7BA1\u7406-1","children":[]},{"level":2,"title":"15.1 \u4F7F\u7528ConfigMap\u7BA1\u7406\u5E94\u7528\u914D\u7F6E","slug":"_15-1-\u4F7F\u7528configmap\u7BA1\u7406\u5E94\u7528\u914D\u7F6E","link":"#_15-1-\u4F7F\u7528configmap\u7BA1\u7406\u5E94\u7528\u914D\u7F6E","children":[{"level":3,"title":"\u901A\u8FC7kubectl\u547D\u4EE4\u521B\u5EFAConfigMap","slug":"\u901A\u8FC7kubectl\u547D\u4EE4\u521B\u5EFAconfigmap","link":"#\u901A\u8FC7kubectl\u547D\u4EE4\u521B\u5EFAconfigmap","children":[]},{"level":3,"title":"\u901A\u8FC7YAML\u6587\u4EF6\u521B\u5EFAConfigMap","slug":"\u901A\u8FC7yaml\u6587\u4EF6\u521B\u5EFAconfigmap","link":"#\u901A\u8FC7yaml\u6587\u4EF6\u521B\u5EFAconfigmap","children":[]},{"level":3,"title":"\u901A\u8FC7\u6587\u4EF6\u521B\u5EFAConfigMap","slug":"\u901A\u8FC7\u6587\u4EF6\u521B\u5EFAconfigmap","link":"#\u901A\u8FC7\u6587\u4EF6\u521B\u5EFAconfigmap","children":[]},{"level":3,"title":"\u4ECE\u76EE\u5F55\u521B\u5EFAConfigMap","slug":"\u4ECE\u76EE\u5F55\u521B\u5EFAconfigmap","link":"#\u4ECE\u76EE\u5F55\u521B\u5EFAconfigmap","children":[]},{"level":3,"title":"\u6DF7\u5408\u9009\u9879\u521B\u5EFAConfigMap","slug":"\u6DF7\u5408\u9009\u9879\u521B\u5EFAconfigmap","link":"#\u6DF7\u5408\u9009\u9879\u521B\u5EFAconfigmap","children":[]},{"level":3,"title":"\u901A\u8FC7\u73AF\u5883\u53D8\u91CF\u7ED9\u5BB9\u5668\u4F20\u9012ConfigMap","slug":"\u901A\u8FC7\u73AF\u5883\u53D8\u91CF\u7ED9\u5BB9\u5668\u4F20\u9012configmap","link":"#\u901A\u8FC7\u73AF\u5883\u53D8\u91CF\u7ED9\u5BB9\u5668\u4F20\u9012configmap","children":[]}]},{"level":2,"title":"15.2 \u4F7F\u7528Secret\u7BA1\u7406\u654F\u611F\u6570\u636E","slug":"_15-2-\u4F7F\u7528secret\u7BA1\u7406\u654F\u611F\u6570\u636E","link":"#_15-2-\u4F7F\u7528secret\u7BA1\u7406\u654F\u611F\u6570\u636E","children":[{"level":3,"title":"\u914D\u7F6EPod\u4F7F\u7528Harbor\u955C\u50CF","slug":"\u914D\u7F6Epod\u4F7F\u7528harbor\u955C\u50CF","link":"#\u914D\u7F6Epod\u4F7F\u7528harbor\u955C\u50CF","children":[]}]},{"level":2,"title":"Helm\u90E8\u7F72","slug":"helm\u90E8\u7F72","link":"#helm\u90E8\u7F72","children":[{"level":3,"title":"\u5B89\u88C5Helm","slug":"\u5B89\u88C5helm","link":"#\u5B89\u88C5helm","children":[]},{"level":3,"title":"\u4F7F\u7528Helm\u90E8\u7F72\u7B2C\u4E00\u4E2A\u5E94\u7528","slug":"\u4F7F\u7528helm\u90E8\u7F72\u7B2C\u4E00\u4E2A\u5E94\u7528","link":"#\u4F7F\u7528helm\u90E8\u7F72\u7B2C\u4E00\u4E2A\u5E94\u7528","children":[]},{"level":3,"title":"Helm\u7EC4\u4EF6","slug":"helm\u7EC4\u4EF6","link":"#helm\u7EC4\u4EF6","children":[]},{"level":3,"title":"\u81EA\u5B9A\u4E49Jenkins\u7684Chart","slug":"\u81EA\u5B9A\u4E49jenkins\u7684chart","link":"#\u81EA\u5B9A\u4E49jenkins\u7684chart","children":[]}]},{"level":2,"title":"\u521B\u5EFA\u81EA\u5DF1\u7684Chart","slug":"\u521B\u5EFA\u81EA\u5DF1\u7684chart","link":"#\u521B\u5EFA\u81EA\u5DF1\u7684chart","children":[{"level":3,"title":"\u521B\u5EFA\u81EA\u5B9A\u4E49Nginx\u7684Chart","slug":"\u521B\u5EFA\u81EA\u5B9A\u4E49nginx\u7684chart","link":"#\u521B\u5EFA\u81EA\u5B9A\u4E49nginx\u7684chart","children":[]},{"level":3,"title":"\u67E5\u770BHelm\u5B9E\u4F8B","slug":"\u67E5\u770Bhelm\u5B9E\u4F8B","link":"#\u67E5\u770Bhelm\u5B9E\u4F8B","children":[]}]},{"level":2,"title":"Prometheus\u5FEB\u901F\u5165\u95E8","slug":"prometheus\u5FEB\u901F\u5165\u95E8","link":"#prometheus\u5FEB\u901F\u5165\u95E8","children":[{"level":3,"title":"Prometheus\u67B6\u6784\u4ECB\u7ECD","slug":"prometheus\u67B6\u6784\u4ECB\u7ECD","link":"#prometheus\u67B6\u6784\u4ECB\u7ECD","children":[]},{"level":3,"title":"\u5B89\u88C5Prometheus","slug":"\u5B89\u88C5prometheus","link":"#\u5B89\u88C5prometheus","children":[]},{"level":3,"title":"\u4F7F\u7528Node Exporter\u91C7\u96C6\u4E3B\u673A\u6570\u636E","slug":"\u4F7F\u7528node-exporter\u91C7\u96C6\u4E3B\u673A\u6570\u636E","link":"#\u4F7F\u7528node-exporter\u91C7\u96C6\u4E3B\u673A\u6570\u636E","children":[]},{"level":3,"title":"\u4F7F\u7528Prometheus UI\u67E5\u770B\u6570\u636E","slug":"\u4F7F\u7528prometheus-ui\u67E5\u770B\u6570\u636E","link":"#\u4F7F\u7528prometheus-ui\u67E5\u770B\u6570\u636E","children":[]},{"level":3,"title":"\u4F7F\u7528Grafana\u8FDB\u884C\u6570\u636E\u53EF\u89C6\u5316","slug":"\u4F7F\u7528grafana\u8FDB\u884C\u6570\u636E\u53EF\u89C6\u5316","link":"#\u4F7F\u7528grafana\u8FDB\u884C\u6570\u636E\u53EF\u89C6\u5316","children":[]}]},{"level":2,"title":"Taints\uFF08\u6C61\u70B9\uFF09","slug":"taints\uFF08\u6C61\u70B9\uFF09","link":"#taints\uFF08\u6C61\u70B9\uFF09","children":[{"level":3,"title":"\u81EA\u5B9A\u4E49\u6C61\u70B9","slug":"\u81EA\u5B9A\u4E49\u6C61\u70B9","link":"#\u81EA\u5B9A\u4E49\u6C61\u70B9","children":[]}]},{"level":2,"title":"\u4EB2\u7F18\u6027\u8C03\u5EA6","slug":"\u4EB2\u7F18\u6027\u8C03\u5EA6","link":"#\u4EB2\u7F18\u6027\u8C03\u5EA6","children":[{"level":3,"title":"\u4F7F\u7528Swagger UI\u8FDB\u884CAPI\u4EA4\u4E92","slug":"\u4F7F\u7528swagger-ui\u8FDB\u884Capi\u4EA4\u4E92","link":"#\u4F7F\u7528swagger-ui\u8FDB\u884Capi\u4EA4\u4E92","children":[]}]}],"relativePath":"pages/posts/Docker+K8s\u5B9E\u8DF5\u6307\u5357.md","path":"/Users/vlinux/vlinux/blog/valaxy/valaxy-vlinux/pages/posts/Docker+K8s\u5B9E\u8DF5\u6307\u5357.md","lastUpdated":0}'),C={name:"pages/posts/Docker+K8s\u5B9E\u8DF5\u6307\u5357.md",data(){return{data:a,frontmatter:a.frontmatter}},setup(){A("pageData",a)}},u=s("h2",{id:"\u5199\u5728\u524D\u9762\u7684\u8BDD",tabindex:"-1"},[n("\u5199\u5728\u524D\u9762\u7684\u8BDD "),s("a",{class:"header-anchor",href:"#\u5199\u5728\u524D\u9762\u7684\u8BDD","aria-hidden":"true"},"#")],-1),y=s("p",null,"\u4E0D\u5F97\u4E0D\u627F\u8BA4\u4E2D\u56FD\u7684IT\u884C\u4E1A\u5DF2\u7ECF\u8FDB\u5165\u4E86\u4E91\u8BA1\u7B97\u65F6\u4EE3\uFF0C\u8D8A\u6765\u8D8A\u591A\u7684\u4F01\u4E1A\u5F00\u59CB\u4F7F\u7528\u5F39\u6027\u7684\u4E91\u670D\u52A1\u6765\u652F\u6491\u81EA\u5DF1\u7684\u4E1A\u52A1\u3002\u4E91\u8BA1\u7B97\u662F\u673A\u9047\u4E5F\u662F\u6311\u6218\uFF0C\u4F5C\u4E3A\u8FD0\u7EF4\u4EBA\u5458\u9700\u8981\u9762\u4E34\u4E91\u8BA1\u7B97\u65F6\u4EE3\u4F01\u4E1A\u5BF9\u8FD0\u7EF4\u9700\u6C42\u7684\u840E\u7F29\uFF0C\u4EE5\u53CA\u5BF9\u8FD0\u7EF4\u6280\u672F\u80FD\u529B\u8981\u6C42\u7684\u5927\u5E45\u5EA6\u63D0\u9AD8\u7684\u56F0\u5883\u3002",-1),h=s("p",null,"\u5982\u679C\u8BF4\u4E91\u8BA1\u7B97\u5BF9\u8FD0\u7EF4\u884C\u4E1A\u7684\u5F71\u54CD\u662F\u7B2C\u4E00\u6CE2\u6D6A\u6F6E\uFF0C\u90A3\u6211\u8BA4\u4E3A\u5BB9\u5668\u6280\u672F\u7684\u53D1\u5C55\u5BF9\u672C\u884C\u4E1A\u7684\u5F71\u54CD\u7B97\u662F\u7B2C\u4E8C\u6CE2\u6D6A\u6F6E\uFF0C\u76EE\u524D\u51E0\u4E4E\u6240\u6709\u7684\u4F01\u4E1A\u62DB\u8058\u8FD0\u7EF4\u5DE5\u7A0B\u5E08\u90FD\u8981\u6C42\u719F\u6089KVM\u3001OpenStack\u3001Docker\u548CKubernetes\u6280\u672F\uFF0C\u5404\u5927\u516C\u6709\u4E91\u5E73\u53F0\u4E5F\u90FD\u4E0A\u7EBF\u4E86\u5BB9\u5668\u670D\u52A1Kubernetes\u7248\uFF08AWS\u3001Azure\uFF08\u5168\u7403\u7248\uFF09\u963F\u91CC\u4E91\u3001\u817E\u8BAF\u4E91\u3001\u534E\u4E3A\u4E91\u3001Ucloud\u3001\u4EAC\u4E1C\u4E91\u3001\u5929\u7FFC\u4E91\uFF08\u516C\u6D4B\u9636\u6BB5\uFF09\u7B49\uFF09\uFF0C\u638C\u63E1\u8FD9\u4E9B\u6280\u672F\u5DF2\u7ECF\u662F\u5927\u52BF\u6240\u9700\u3002",-1),_=s("h2",{id:"\u53C2\u8003\u6587\u732E",tabindex:"-1"},[n("\u53C2\u8003\u6587\u732E "),s("a",{class:"header-anchor",href:"#\u53C2\u8003\u6587\u732E","aria-hidden":"true"},"#")],-1),D=s("ul",null,[s("li",null,[n("Docker\u5B98\u65B9\u6587\u6863\uFF1A"),s("a",{href:"https://docs.docker.com/",target:"_blank",rel:"noreferrer"},"https://docs.docker.com/")]),s("li",null,[n("Kubernetes\u5B98\u65B9\u6587\u6863\uFF1A"),s("a",{href:"https://kubernetes.io/docs/home/",target:"_blank",rel:"noreferrer"},"https://kubernetes.io/docs/home/")]),s("li",null,[n("OpenStack\u5B98\u65B9\u6587\u6863\uFF1A"),s("a",{href:"https://docs.openstack.org/",target:"_blank",rel:"noreferrer"},"https://docs.openstack.org/")]),s("li",null,[n("Prometheus\u5B98\u65B9\u6587\u6863\uFF1A"),s("a",{href:"https://prometheus.io/docs/introduction/overview/",target:"_blank",rel:"noreferrer"},"https://prometheus.io/docs/introduction/overview/")])],-1),g=s("h1",{id:"\u5B9E\u9A8C\u73AF\u5883",tabindex:"-1"},[n("\u5B9E\u9A8C\u73AF\u5883 "),s("a",{class:"header-anchor",href:"#\u5B9E\u9A8C\u73AF\u5883","aria-hidden":"true"},"#")],-1),m=s("p",null,[s("strong",null,"\u786C\u4EF6\u8BBE\u5907\u51C6\u5907")],-1),b=s("ul",null,[s("li",null,"\u7535\u8111\u4E00\u53F0\uFF0CCPU\u652F\u6301VT\uFF0C\u5185\u5B58>4G\uFF0C\u53EF\u7528\u78C1\u76D8\u7A7A\u95F4\u5927\u4E8E80G\u3002"),s("li",null,"\u5B89\u88C5VMware Workstation Pro\u865A\u62DF\u673A\u8F6F\u4EF6\uFF0C\u7528\u4E8E\u521B\u5EFA\u865A\u62DF\u673A\u3002"),s("li",null,"\u521B\u5EFA\u4E09\u53F0\u865A\u62DF\u673A\uFF0C\u5B89\u88C5CentOS-7.7-x86_64\u7CFB\u7EDF\u3002")],-1),k=s("p",null,[s("strong",null,"\u5B9E\u9A8C\u73AF\u5883\u8BE6\u60C5")],-1),v=s("table",null,[s("thead",null,[s("tr",null,[s("th",null,"\u4E3B\u673A\u540D"),s("th",null,"IP\u5730\u5740\uFF08NAT\uFF09"),s("th",null,"\u63CF\u8FF0")])]),s("tbody",null,[s("tr",null,[s("td",null,[s("a",{href:"http://linux-node1.linuxhot.com",target:"_blank",rel:"noreferrer"},"linux-node1.linuxhot.com")]),s("td",null,"eth0:192.168.56.11"),s("td",null,"1VCPU\u30012G\u5185\u5B58\u3001\u4E00\u5757\u786C\u76D8sda50G\uFF08\u52A8\u6001\uFF09")]),s("tr",null,[s("td",null,[s("a",{href:"http://linux-node2.linuxhot.com",target:"_blank",rel:"noreferrer"},"linux-node2.linuxhot.com")]),s("td",null,"eth0:192.168.56.12"),s("td",null,"1VCPU\u30012G\u5185\u5B58\u3001\u4E00\u5757\u786C\u76D8sda50G\uFF08\u52A8\u6001\uFF09")]),s("tr",null,[s("td",null,[s("a",{href:"http://linux-node3.linuxhot.com",target:"_blank",rel:"noreferrer"},"linux-node3.linuxhot.com")]),s("td",null,"eth0:192.168.56.13"),s("td",null,"1VCPU\u30012G\u5185\u5B58\u3001\u4E00\u5757\u786C\u76D8sda50G\uFF08\u52A8\u6001\uFF09")]),s("tr",null,[s("td",null,"\u5907\u6CE8"),s("td",null,"1.\u5982\u4F55\u5728\u5B89\u88C5\u7684\u65F6\u5019\u5C06\u7F51\u5361\u547D\u540D\u4E3Aeth0\u3001eth1\uFF0C\u8BF7\u53C2\u8003\u300A\u9644\u5F55\u4E00\u300B\u3002 2.\u5176\u4E2Dlinux-node3\u5728\u5B66\u4E60Kubernetes\u4E2D\u4F7F\u7528\u3002"),s("td")])])],-1),x=s("p",null,[s("strong",null,"\u73AF\u5883\u51C6\u5907")],-1),f=s("ul",null,[s("li",null,"\u5B89\u88C5\u64CD\u4F5C\u7CFB\u7EDFCentOS-7.7-x86_64\u3002"),s("li",null,"\u57FA\u672C\u7CFB\u7EDF\uFF1A1VCPU+2048M\u5185\u5B58+50G\uFF08\u52A8\u6001\uFF09\u786C\u76D8\u3002"),s("li",null,"\u7F51\u7EDC\u9009\u62E9\uFF1A\u4F7F\u7528\u7F51\u7EDC\u5730\u5740\u8F6C\u6362\uFF08NAT\uFF09\u3002"),s("li",null,"\u8F6F\u4EF6\u5305\u9009\u62E9\uFF1AMinimal Install\u3002"),s("li",null,"\u5173\u95EDiptables\u548CSELinux\u3002"),s("li",null,"\u8BBE\u7F6E\u6240\u6709\u8282\u70B9\u7684\u4E3B\u673A\u540D\u548CIP\u5730\u5740\uFF0C\u540C\u65F6\u4F7F\u7528\u5185\u90E8DNS\u6216\u8005/etc/hosts\u505A\u597D\u4E3B\u673A\u540D\u89E3\u6790\u3002")],-1),S=s("p",null,[s("strong",null,"\u5B9E\u9A8C\u5C0F\u6280\u5DE7")],-1),E=s("p",null,"[hide]",-1),P=s("ul",null,[s("li",null,"\u5EFA\u8BAE\u521D\u5B66\u8005\u4FDD\u6301\u5B9E\u9A8C\u73AF\u5883\u548C\u672C\u4E66\u4E00\u81F4\uFF0C\u5305\u62EC\u4F46\u4E0D\u5C40\u9650\u4E8EIP\u5730\u5740\uFF0C\u4E3B\u673A\u540D\uFF0C\u7F51\u5361\u540D\u79F0\u7B49\uFF0C\u53EF\u4EE5\u5E2E\u4F60\u8282\u7EA6\u5F88\u591A\u56E0\u4E3A\u73AF\u5883\u95EE\u9898\u7684\u6392\u9519\u65F6\u95F4\u3002"),s("li",null,"\u505A\u597D\u865A\u62DF\u673A\u7684\u5FEB\u7167\uFF0C\u6BD4\u5982\u53EF\u4EE5\u6839\u636E\u672C\u4E66\u7684\u4E0D\u540C\u7AE0\u8282\uFF0C\u521B\u5EFA\u4E0D\u540C\u7684\u5FEB\u7167\uFF0C\u4FBF\u4E8E\u4FDD\u7559\u5B9E\u9A8C\u73AF\u5883\u548C\u5728\u5B9E\u9A8C\u8FC7\u7A0B\u4E2D\u8FDB\u884C\u73AF\u5883\u7684\u56DE\u6EDA\u3002"),s("li",null,"\u8BF7\u4E0D\u8981\u628A\u5173\u6CE8\u70B9\u4EC5\u4EC5\u653E\u5728\u5B9E\u9A8C\u73AF\u8282\uFF0C\u4E00\u5B9A\u8981\u5728\u7406\u89E3\u7684\u57FA\u7840\u4E0A\u5B8C\u6210\u5B9E\u9A8C\uFF0C\u5BF9\u4E8E\u4E0D\u660E\u767D\u7684\u5730\u65B9\u9700\u8981\u53CD\u590D\u9605\u8BFB\uFF0C\u6216\u8005\u6839\u636E\u672C\u4E66\u524D\u8A00\u63D0\u5230\u7684\u9014\u5F84\u83B7\u53D6\u6280\u672F\u652F\u6301\u3002 [/hide]")],-1),N=s("h1",{id:"\u9644\u5F55\u4E00-\u5B9E\u9A8C\u73AF\u5883\u51C6\u5907",tabindex:"-1"},[n("\u9644\u5F55\u4E00 \u5B9E\u9A8C\u73AF\u5883\u51C6\u5907 "),s("a",{class:"header-anchor",href:"#\u9644\u5F55\u4E00-\u5B9E\u9A8C\u73AF\u5883\u51C6\u5907","aria-hidden":"true"},"#")],-1),R=s("p",null,[s("strong",null,"\u73AF\u5883\u51C6\u5907\u6848\u4F8B\uFF1A")],-1),T=s("p",null,"**\u754C\u9762\u4F4D\u7F6E\uFF1A**\u6587\u4EF6\u65B0\u5EFA\u865A\u62DF\u673A\uFF0C\u6253\u5F00\u65B0\u5EFA\u865A\u62DF\u673A\u9009\u9879\uFF0C",-1),I=s("p",null,[s("strong",null,"\u521B\u5EFA\u865A\u62DF\u673A"),n("\uFF1A\u8BF7\u53C2\u8003\u76EE\u5F55\u524D\u5B9E\u9A8C\u73AF\u5883\u7AE0\u8282\uFF0C\u6309\u8981\u6C42\u521B\u5EFA\u865A\u62DF\u673A\uFF08\u521B\u5EFA\u6B65\u9AA4\u7565\uFF09\u3002")],-1),O=s("p",null,[s("strong",null,"\u64CD\u4F5C\u7CFB\u7EDF\u5B89\u88C5\uFF1A")],-1),M=s("p",null,"\u4E3A\u4E86\u7EDF\u4E00\u73AF\u5883\uFF0C\u4FDD\u8BC1\u5B9E\u9A8C\u7684\u901A\u7528\u6027\uFF0C\u5C06\u7F51\u5361\u540D\u79F0\u8BBE\u7F6E\u4E3Aeth*\uFF0C\u4E0D\u4F7F\u7528CentOS 7\u9ED8\u8BA4\u7684\u7F51\u5361\u547D\u540D\u89C4\u5219\u3002\u6240\u4EE5\u9700\u8981\u5728\u5B89\u88C5\u7684\u65F6\u5019\uFF0C\u589E\u52A0\u5185\u6838\u53C2\u6570\u3002",-1),w=s("p",null,"1)\u5149\u6807\u9009\u62E9\u201CInstall CentOS 7\u201D",-1),K=s("p",null,[s("img",{src:"http://k8s.unixhot.com/media/c4bb194b0f60ef7a32a7a4a269b31094.png",alt:"img"})],-1),L=s("p",null,"2)\u70B9\u51FBTab\uFF0C\u6253\u5F00kernel\u542F\u52A8\u9009\u9879\u540E\uFF0C\u589E\u52A0net.ifnames=0 biosdevname=0\uFF0C\u5982\u4E0B\u56FE\u6240\u793A\u3002",-1),U=s("p",null,[s("img",{src:"http://k8s.unixhot.com/media/40432332febddc210781b55066a87252.png",alt:"img"})],-1),j=s("p",null,[s("strong",null,"\u5B89\u88C5\u5B8C\u6BD5\u540E\u8BBE\u7F6E\uFF1A")],-1),G=s("p",null,"1.\u8BBE\u7F6E\u7F51\u7EDC\u3002",-1),H=s("p",null,"\u5982\u679C\u4F60\u7684\u9ED8\u8BA4NAT\u5730\u5740\u6BB5\u4E0D\u662F192.168.56.0/24\u53EF\u4EE5\u4FEE\u6539VMware Workstation\u7684\u914D\u7F6E\uFF0C\u70B9\u51FB\u7F16\u8F91\u865A\u62DF\u7F51\u7EDC\u914D\u7F6E\uFF0C\u7136\u540E\u8FDB\u884C\u914D\u7F6E\u3002",-1),F=s("p",null,[s("img",{src:"http://k8s.unixhot.com/media/b4ac2c94cc558e1150c8cc77ecd6ad13.png",alt:"img"})],-1),V=s("p",null,"2.\u8BBE\u7F6EIP\u5730\u5740\uFF0C\u8BF7\u914D\u7F6E\u9759\u6001IP\u5730\u5740\u3002\u6CE8\u610F\u5C06UUID\u548CMAC\u5730\u5740\u5220\u9664\u6389\uFF0C\u4FBF\u4E8E\u8FDB\u884C\u865A\u62DF\u673A\u514B\u9686\u3002",-1),B=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@localhost ~]# vim /etc/sysconfig/network-scripts/ifcfg-eth0")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"TYPE=Ethernet")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"BOOTPROTO=static")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"DEFROUTE=yes")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"PEERDNS=no")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"PEERROUTES=yes")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"IPV4_FAILURE_FATAL=no")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"NAME=eth0")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"DEVICE=eth0")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"ONBOOT=yes")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"IPADDR=192.168.56.11")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"NETMASK=255.255.255.0")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"GATEWAY=192.168.56.2")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),q=s("p",null,"\u91CD\u542F\u7F51\u7EDC\u670D\u52A1",-1),Y=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@localhost ~]# systemctl restart network")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),z=s("p",null,"3.\u5173\u95EDNetworkManager\u548C\u9632\u706B\u5899\u5F00\u542F\u81EA\u542F\u52A8",-1),$=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# systemctl disable firewalld")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# systemctl disable NetworkManager")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),X=s("p",null,"4.\u8BBE\u7F6E\u4E3B\u673A\u540D",-1),J=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@localhost ~]# vi /etc/hostname")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"linux-node1.unixhot.com")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),W=s("p",null,"5.\u8BBE\u7F6E\u4E3B\u673A\u540D\u89E3\u6790",-1),Q=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# cat /etc/hosts")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"127.0.0.1 localhost localhost.localdomain localhost4 localhost4.localdomain4")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"::1 localhost localhost.localdomain localhost6 localhost6.localdomain6")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"192.168.56.11 linux-node1 linux-node1.unixhot.com")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"192.168.56.12 linux-node2 linux-node2.unixhot.com")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"192.168.56.13 linux-node3 linux-node3.unixhot.com")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Z=s("p",null,"6.\u8BBE\u7F6EDNS\u89E3\u6790",-1),ss=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@localhost ~]# vi /etc/resolv.conf")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"nameserver 192.168.56.2")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),ns=s("p",null,"7.\u5B89\u88C5EPEL\u4ED3\u5E93\u548C\u5E38\u7528\u547D\u4EE4",-1),ls=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# rpm -ivh http://mirrors.aliyun.com/epel/epel-release-latest-7.noarch.rpm")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# yum install -y net-tools vim lrzsz tree screen lsof tcpdump nc mtr nmap")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),es=s("p",null,"8.\u5173\u95ED\u5E76\u786E\u8BA4SELinux\u5904\u4E8E\u5173\u95ED\u72B6\u6001",-1),os=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# vim /etc/sysconfig/selinux")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"SELINUX=disabled #\u4FEE\u6539\u4E3Adisabled")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),as=s("p",null,"9.\u66F4\u65B0\u7CFB\u7EDF\u5E76\u91CD\u542F",-1),ts=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# yum update -y && reboot")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),cs=s("p",null,"10.\u514B\u9686\u865A\u62DF\u673A",-1),is=s("p",null,"\u8BF7\u5173\u95ED\u865A\u62DF\u673A\uFF0C\u5E76\u514B\u9686\u5F53\u524D\u865A\u62DF\u673Alinux-node1\u5230linux-node2\uFF0C\u5EFA\u8BAE\u9009\u62E9\u201C\u521B\u5EFA\u5B8C\u6574\u514B\u9686\u201D\uFF0C\u800C\u4E0D\u662F\u201C\u521B\u5EFA\u94FE\u63A5\u514B\u9686\u201D\u3002\u514B\u9686\u5B8C\u6BD5\u540E\u8BF7\u7ED9linux-node2\u8BBE\u7F6E\u6B63\u786E\u7684IP\u5730\u5740\u548C\u4E3B\u673A\u540D\u3002",-1),rs=s("p",null,"11.\u7ED9\u865A\u62DF\u673A\u505A\u5FEB\u7167",-1),ps=s("p",null,"\u5206\u522B\u7ED9\u4E24\u53F0\u865A\u62DF\u673A\u505A\u5FEB\u7167\u3002\u4EE5\u4FBF\u4E8E\u968F\u65F6\u56DE\u5230\u4E00\u4E2A\u521A\u521D\u59CB\u5316\u5B8C\u6BD5\u7684\u7CFB\u7EDF\u4E2D\u3002\u53EF\u4EE5\u6709\u6548\u7684\u51CF\u5C11\u5B66\u4E60\u8FC7\u7A0B\u4E2D\u7684\u73AF\u5883\u51C6\u5907\u65F6\u95F4\u3002",-1),ds=s("h1",{id:"\u7B2C\u4E00\u90E8\u5206-cobbler\u81EA\u52A8\u5316\u5B89\u88C5\u5B9E\u8DF5",tabindex:"-1"},[n("\u7B2C\u4E00\u90E8\u5206 Cobbler\u81EA\u52A8\u5316\u5B89\u88C5\u5B9E\u8DF5 "),s("a",{class:"header-anchor",href:"#\u7B2C\u4E00\u90E8\u5206-cobbler\u81EA\u52A8\u5316\u5B89\u88C5\u5B9E\u8DF5","aria-hidden":"true"},"#")],-1),As=s("h1",{id:"_1-\u81EA\u52A8\u5316\u5B89\u88C5\u6982\u8FF0",tabindex:"-1"},[n("1 \u81EA\u52A8\u5316\u5B89\u88C5\u6982\u8FF0 "),s("a",{class:"header-anchor",href:"#_1-\u81EA\u52A8\u5316\u5B89\u88C5\u6982\u8FF0","aria-hidden":"true"},"#")],-1),Cs=s("p",null,"\u5BF9\u4E8E\u8FD0\u7EF4\u5DE5\u7A0B\u5E08\u6765\u8BF4\uFF0C\u670D\u52A1\u5668\u4E0A\u67B6\u548C\u64CD\u4F5C\u7CFB\u7EDF\u7684\u5B89\u88C5\uFF0C\u662F\u5B9E\u65BD\u8FD0\u7EF4\u5DE5\u4F5C\u7684\u5F00\u59CB\u3002\u5BF9\u4E8E\u81EA\u52A8\u5316\u8FD0\u7EF4\u6765\u8BF4\uFF0C\u81EA\u52A8\u5316\u5B89\u88C5\u662F\u5B9E\u65BD\u81EA\u52A8\u5316\u8FD0\u7EF4\u7684\u7B2C\u4E00\u6B65\u3002\u9762\u5BF9\u5927\u91CF\u7684\u670D\u52A1\u5668\u8BBE\u5907\uFF0C\u6211\u4EEC\u9700\u8981\u638C\u63E1\u5982\u4F55\u5FEB\u901F\uFF0C\u5E76\u4E14\u81EA\u52A8\u7684\u5C06\u65B0\u4E0A\u67B6\u7684\u670D\u52A1\u5668\u5B89\u88C5\u4E0A\u5BF9\u5E94\u7684\u64CD\u4F5C\u7CFB\u7EDF\u3001\u6216\u8005\u7ED9\u5DF2\u7ECF\u5728\u8FD0\u884C\u7684\u670D\u52A1\u5668\u91CD\u65B0\u5B89\u88C5\u7CFB\u7EDF\u3002\u800C\u4E14\u5F88\u91CD\u8981\u7684\u662F\uFF0C\u4ECE\u7B2C\u4E00\u6B65\u5F00\u59CB\uFF0C\u6211\u4EEC\u5C31\u8981\u521B\u5EFA\u81EA\u5DF1\u5185\u90E8\u7684\u8F6F\u4EF6\u4ED3\u5E93\uFF0C\u800C\u8FD9\u4E00\u5207\u7684\u5DE5\u4F5C\uFF0CCobbler\u90FD\u53EF\u4EE5\u5B8C\u6210\u3002 \u5BF9\u4E8ELinux\u6765\u8BF4\uFF0C\u6211\u4EEC\u901A\u5E38\u4F7F\u7528PXE+KickStart\u7684\u65B9\u5F0F\u8FDB\u884C\u64CD\u4F5C\u7CFB\u7EDF\u7684\u81EA\u52A8\u5316\u5B89\u88C5\u3002\u90A3\u4E48\u9996\u5148\u9700\u8981\u5148\u4E86\u89E3\u4E00\u4E0BKickStart\u3002",-1),us=s("h2",{id:"_1-1-pxe-kickstart\u4ECB\u7ECD",tabindex:"-1"},[n("1.1 PXE+Kickstart\u4ECB\u7ECD "),s("a",{class:"header-anchor",href:"#_1-1-pxe-kickstart\u4ECB\u7ECD","aria-hidden":"true"},"#")],-1),ys=s("h3",{id:"_1-1-1-kickstart\u5DE5\u4F5C\u539F\u7406",tabindex:"-1"},[n("1.1.1 KickStart\u5DE5\u4F5C\u539F\u7406 "),s("a",{class:"header-anchor",href:"#_1-1-1-kickstart\u5DE5\u4F5C\u539F\u7406","aria-hidden":"true"},"#")],-1),hs=s("p",null,"KickStart\u662FLinux\u7684\u4E00\u79CD\u65E0\u4EBA\u804C\u5B88\u7684\u5B89\u88C5\u65B9\u5F0F\u3002KickStart\u7684\u5DE5\u4F5C\u539F\u7406\u662F\u901A\u8FC7\u8BB0\u5F55\u5178\u578B\u7684\u5B89\u88C5\u8FC7\u7A0B\u4E2D\u6240\u9700\u4EBA\u5DE5\u5E72\u9884\u586B\u5199\u7684\u5404\u79CD\u53C2\u6570\uFF0C\u5E76\u751F\u6210\u4E00\u4E2A\u540D\u4E3A ks.cfg\u7684\u6587\u4EF6\uFF1B\u8FD9\u6837\u5728\u540E\u9762\u5B89\u88C5\u8FC7\u7A0B\u4E2D\u5F53\u51FA\u73B0\u8981\u6C42\u586B\u5199\u53C2\u6570\u7684\u60C5\u51B5\u65F6\uFF0C\u5B89\u88C5\u7A0B\u5E8F\u4F1A\u9996\u5148\u53BB\u67E5\u627E KickStart\u751F\u6210\u7684\u6587\u4EF6\uFF0C\u5F53\u627E\u5230\u5408\u9002\u7684\u53C2\u6570\u65F6\uFF0C\u5C31\u91C7\u7528\u627E\u5230\u7684\u53C2\u6570\uFF0C\u5F53\u6CA1\u6709\u627E\u5230\u5408\u9002\u7684\u53C2\u6570\u65F6\uFF0C\u624D\u9700\u8981\u5B89\u88C5\u8005\u624B\u5DE5\u5E72\u9884\u3002 \u5982\u679CKickStart\u6587\u4EF6\u6DB5\u76D6\u4E86\u5B89\u88C5\u8FC7\u7A0B\u4E2D\u51FA\u73B0\u7684\u6240\u6709\u9700\u8981\u586B\u5199\u7684\u53C2\u6570\u65F6\uFF0C\u90A3\u4E48\u5C31\u5B8C\u5168\u4E0D\u9700\u8981\u4EBA\u5DE5\u5E72\u9884\uFF0C\u5B89\u88C5\u7A0B\u5E8F\u4F1A\u6839\u636Eks.cfg\u4E2D\u8BBE\u7F6E\u7684\u9009\u9879\u81EA\u52A8\u8FDB\u884C\u5B89\u88C5\uFF0C\u5E76\u901A\u8FC7\u8BBE\u7F6E\u91CD\u542F\u9009\u9879\u6765\u91CD\u542F\u7CFB\u7EDF\uFF0C\u5E76\u7ED3\u675F\u5B89\u88C5\u3002\u90A3\u4E48\u5982\u4F55\u8BA9\u670D\u52A1\u5668\u5F00\u673A\u5C31\u5F00\u59CB\u81EA\u52A8\u5B89\u88C5\u64CD\u4F5C\u7CFB\u7EDF\u5462\uFF0C\u6211\u4EEC\u8981\u501F\u52A9\u5F00\u673A\u542F\u52A8\u9009\u9879\uFF0C\u6BD4\u5982\u4ECEPXE\u542F\u52A8\u3002",-1),_s=s("h3",{id:"_1-1-2-pxe\u5DE5\u4F5C\u539F\u7406",tabindex:"-1"},[n("1.1.2 PXE\u5DE5\u4F5C\u539F\u7406 "),s("a",{class:"header-anchor",href:"#_1-1-2-pxe\u5DE5\u4F5C\u539F\u7406","aria-hidden":"true"},"#")],-1),Ds=s("p",null,"\u4E0D\u7BA1\u662F\u670D\u52A1\u5668\u8FD8\u662F\u666E\u901A\u7684PC\u673A\u90FD\u652F\u6301\u591A\u79CD\u542F\u52A8\u65B9\u5F0F\uFF0C\u4F8B\u5982\u4ECE\u786C\u76D8\u3001\u4ECEU\u76D8\u3001\u4ECE\u7F51\u7EDC\u542F\u52A8\u3002\u800CPXE\u662F\u670D\u52A1\u5668\u5F00\u673A\u542F\u52A8\u7684\u4E00\u79CD\u65B9\u5F0F\uFF0C\u4E5F\u53EF\u4EE5\u79F0\u4E4B\u4E3A\u7F51\u5361\u542F\u52A8\uFF0C\u56E0\u4E3A\u8FDB\u884CPXE\u5B89\u88C5\u7684\u5FC5\u8981\u6761\u4EF6\u662F\u8BA1\u7B97\u673A\u4E0A\u7684\u7F51\u5361\u8981\u652F\u6301PXE\uFF0C\u5373\u7F51\u5361\u4E2D\u5FC5\u987B\u8981\u6709 PXE Client\uFF0C\u4E0D\u8FC7\u4E0D\u7528\u62C5\u5FC3\u57FA\u672C\u4E0A\u6211\u4EEC\u5E38\u89C1\u7684\u670D\u52A1\u5668\u90FD\u652F\u6301\u8FD9\u79CD\u65B9\u5F0F\u3002 \u9996\u5148\u6211\u4EEC\u9700\u8981\u4E86\u89E3\u4E0BPXE\u7684\u5DE5\u4F5C\u65B9\u5F0F\uFF1APXE \uFF08Pre-boot Execution Environment\uFF09\u534F\u8BAE\u4F7F\u8BA1\u7B97\u673A\u53EF\u4EE5\u901A\u8FC7\u7F51\u7EDC\u542F\u52A8\u3002PXE\u534F\u8BAE\u5206\u4E3A Client \u548C Server \u7AEF\uFF0CPXE client \u5728\u7F51\u5361\u7684 ROM \u4E2D\uFF0C\u5F53\u8BA1\u7B97\u673A\u5F15\u5BFC\u65F6\uFF0CBIOS \u628A PXE client \u8C03\u5165\u5185\u5B58\u6267\u884C\uFF0C\u7531 PXE client \u5C06\u653E\u7F6E\u5728\u8FDC\u7AEF\u7684\u6587\u4EF6\u901A\u8FC7\u7F51\u7EDC\u4E0B\u8F7D\u5230\u672C\u5730\u8FD0\u884C\u3002 \u8FD0\u884C PXE \u534F\u8BAE\u9700\u8981\u8BBE\u7F6E DHCP \u670D\u52A1\u5668\u548C TFTP \u670D\u52A1\u5668\u3002DHCP \u670D\u52A1\u5668\u7528\u6765\u7ED9 PXE Client\uFF08\u5C06\u8981\u5B89\u88C5\u7CFB\u7EDF\u7684\u4E3B\u673A\uFF09\u5206\u914D\u4E00\u4E2A IP \u5730\u5740\uFF0C\u7531\u4E8E\u662F\u7ED9 PXE Client \u5206\u914D IP \u5730\u5740\uFF0C\u6240\u4EE5\u5728\u914D\u7F6E DHCP \u670D\u52A1\u5668\u65F6\u9700\u8981\u589E\u52A0\u76F8\u5E94\u7684 PXE \u8BBE\u7F6E\u3002\u6B64\u5916\uFF0C\u5728 PXE Client \u7684 ROM \u4E2D\uFF0C\u5DF2\u7ECF\u5B58\u5728\u4E86 TFTP Client\u3002PXE Client \u901A\u8FC7 TFTP \u534F\u8BAE\u5230 TFTP Server \u4E0A\u4E0B\u8F7D\u6240\u9700\u7684\u6587\u4EF6\u3002",-1),gs=s("h3",{id:"_1-1-3-pxe-kickstart\u5DE5\u4F5C\u6D41\u7A0B",tabindex:"-1"},[n("1.1.3 PXE+Kickstart\u5DE5\u4F5C\u6D41\u7A0B "),s("a",{class:"header-anchor",href:"#_1-1-3-pxe-kickstart\u5DE5\u4F5C\u6D41\u7A0B","aria-hidden":"true"},"#")],-1),ms=s("p",null,"\u4E0B\u56FE\u663E\u793A\u4E86PXE+Kickstart\u7684\u5DE5\u4F5C\u6D41\u7A0B",-1),bs=s("p",null,"1.PXE Client\u53D1\u9001DHCP\u8BF7\u6C42\u5230DHCP Server 2.DHCP Server\u63D0\u4F9B\u76F8\u5173\u4FE1\u606F\u5305\u62ECIP\u5730\u5740\u548CTFTP\u670D\u52A1\u5668\u7684\u4F4D\u7F6E\uFF0C\u4EE5\u53CA\u8981\u4E0B\u8F7D\u7684\u6587\u4EF6\u3002 3.PXE Client\u8BF7\u6C42TFTP Server\u3002 4.TFTP Server\u54CD\u5E94\u8BF7\u6C42\u5E76\u5C06\u6587\u4EF6\u53D1\u9001\u7ED9PXE Client 5.PXE Client\u53BB\u4E0B\u8F7D\u5BF9\u5E94\u7684Kickstart\u6587\u4EF6\uFF0C\u5E76\u6839\u636EKickstart\u6587\u4EF6\u4E2D\u7684\u5185\u5BB9\u5F00\u59CB\u8FDB\u884C\u5B89\u88C5 6.\u5B89\u88C5\u64CD\u4F5C\u7CFB\u7EDF\u3002",-1),ks=s("h2",{id:"_1-2-\u5236\u4F5C\u672C\u5730yum\u4ED3\u5E93",tabindex:"-1"},[n("1.2 \u5236\u4F5C\u672C\u5730Yum\u4ED3\u5E93 "),s("a",{class:"header-anchor",href:"#_1-2-\u5236\u4F5C\u672C\u5730yum\u4ED3\u5E93","aria-hidden":"true"},"#")],-1),vs=s("p",null,"\u4E0B\u9762\u6211\u4EEC\u5C31\u8981\u51C6\u5907\u5148\u624B\u52A8\u6765\u901A\u8FC7PXE+Kickstart\u6765\u5B9E\u73B0\u81EA\u52A8\u5316\u7684\u7CFB\u7EDF\u5B89\u88C5\uFF0C\u90A3\u4E48\u9996\u5148\u9700\u8981\u6709\u4E00\u4E2AYUM\u4ED3\u5E93\uFF0C\u800C\u4E14\u662F\u672C\u5730\u7684\u3002\u4E0B\u9762\u6211\u5C31\u62FFCentOS 7\u4E3A\u4F8B\uFF1A",-1),xs=s("h3",{id:"_1-2-1-\u51C6\u5907\u5B89\u88C5\u6E90",tabindex:"-1"},[n("1.2.1 \u51C6\u5907\u5B89\u88C5\u6E90 "),s("a",{class:"header-anchor",href:"#_1-2-1-\u51C6\u5907\u5B89\u88C5\u6E90","aria-hidden":"true"},"#")],-1),fs=s("ol",null,[s("li",null,[s("p",null,"\u5B89\u88C5\u9700\u8981\u8F6F\u4EF6\u5305 \u6211\u4EEC\u4F7F\u7528HTTP\u7684\u65B9\u5F0F\u4F5C\u4E3AYUM\u4ED3\u5E93\u7684\u5B89\u88C5\u6E90\uFF0C\u9700\u8981\u9996\u5148\u5B89\u88C5Apache\uFF0C\u5176\u4E2Dcreaterepo \u662F\u4E00\u4E2A\u5BF9rpm \u6587\u4EF6\u8FDB\u884C\u7D22\u5F15\u5EFA\u7ACB\u7684\u5DE5\u5177\u3002"),s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# yum install -y httpd createrepo")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# systemctl start httpd.service")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])])]),s("li",null,[s("p",null,"\u4E0B\u8F7Diso\u955C\u50CF"),s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# cd /usr/local/src")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# wget https://mirrors.aliyun.com/centos/7.4.1708/isos/x86_64/CentOS-7-x86_64-DVD-1708.iso")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])])]),s("li",null,[s("p",null,"\u521B\u5EFAyum\u4ED3\u5E93")])],-1),Ss=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# mount -o loop /usr/local/src/CentOS-7-x86_64-DVD-1511.iso /mnt/")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Es=s("blockquote",null,[s("p",null,"\u5982\u679C\u4F60\u4F7F\u7528VMWare Workstation\u521B\u5EFA\u865A\u62DF\u673A\u7684\u65F6\u5019\u8BBE\u7F6E\u4E86ISO\u955C\u50CF\uFF0C\u53EF\u4EE5\u4E0D\u7528\u4E0B\u8F7D\uFF0C\u76F4\u63A5\u6302\u8F7D\u4F7F\u7528\u3002")],-1),Ps=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# mount /dev/cdrom /mnt/")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"mount: /dev/sr0 is write-protected, mounting read-only")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Ns=s("p",null,"\u5728\u9ED8\u8BA4Apache\u7684\u5BB6\u76EE\u5F55\u4E0B\u521B\u5EFA\u76EE\u5F55",-1),Rs=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# mkdir /var/www/html/CentOS-7.4-x86_64")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# cp -a /mnt/* /var/www/html/CentOS-7.4-x86_64/")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Ts=s("ol",null,[s("li",null,[s("p",null,"\u51C6\u5907Kickstart\u5B89\u88C5\u6587\u4EF6"),s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# cd /var/www/html/CentOS-7-x86_64/")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 CentOS-7-x86_64]# vim CentOS-7-x86_64.cfg")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#Kickstart Configurator by Jason Zhao")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#platform=x86, AMD64, or Intel EM64T")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#System  language")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"lang en_US")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#System keyboard")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"keyboard us")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#Sytem timezone")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"timezone Asia/Shanghai")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#Root password")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"rootpw --iscrypted $1$example$I.i3m26O7QYNja8p5Cj9.0")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#Use text mode install")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"text")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#Install OS instead of upgrade")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"install")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#Use NFS installation Media")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"url --url=http://192.168.56.11/CentOS-7-x86_64")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#System bootloader configuration")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'bootloader --location=mbr --driveorder=sda --append="net.ifnames=0 biosdevname=0"')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#Clear the Master Boot Record")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"zerombr")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#Partition clearing information")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"clearpart --all --initlabel ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#Disk partitioning information")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"part /boot --fstype=xfs --size=1024")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'part swap --asprimary --fstype="swap" --size=1024')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"part / --fstype=xfs --size=1 --grow")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#System authorization infomation")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"auth  --useshadow  --enablemd5 ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#Network information")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"network --bootproto=dhcp --device=eth0 --onboot=on --activate")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# Reboot after installation")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"reboot")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#Firewall configuration")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"firewall --disabled ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#SELinux configuration")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"selinux --disabled")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#Service configuration")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"services --disabled=postfix")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#Do not configure XWindows")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"skipx")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#Package install information")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"%packages")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"@ base")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"@ core")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"bash-completion")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"sysstat")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"ntp")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"lrzsz")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"openssl-devel")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"zlib-devel")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"OpenIPMI-tools")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"screen")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"%end")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])])])],-1),Is=s("h3",{id:"_1-2-2-\u914D\u7F6Etftp-server",tabindex:"-1"},[n("1.2.2 \u914D\u7F6ETFTP-Server "),s("a",{class:"header-anchor",href:"#_1-2-2-\u914D\u7F6Etftp-server","aria-hidden":"true"},"#")],-1),Os=s("p",null,"\u6211\u4EEC\u5DF2\u7ECF\u4E86\u89E3\u4E86PXE+Kickstart\u7684\u539F\u7406\uFF0C\u90A3\u4E48\u6211\u4EEC\u9700\u8981\u51C6\u5907\u76F8\u5173dhcp\u3001tftp-server\u7B49\u3002",-1),Ms=s("ol",null,[s("li",null,[s("p",null,"\u5B89\u88C5\u914D\u7F6Etftp-server"),s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# yum install -y tftp-server xinetd")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# vim /etc/xinetd.d/tftp")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"disable                 = no\uFF08\u4FEE\u6539\u4E3Ano\uFF09")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])])]),s("li",null,[s("p",null,"\u51C6\u5907\u5B89\u88C5\u9700\u8981\u7684\u6587\u4EF6"),s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# yum install -y syslinux")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# mkdir /var/lib/tftpboot/pxelinux")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# cp /usr/share/syslinux/pxelinux.0 /var/lib/tftpboot/pxelinux")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# cp /mnt/isolinux/* /var/lib/tftpboot/pxelinux")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# cp /mnt/images/pxeboot/{vmlinuz,initrd.img} /var/lib/tftpboot/pxelinux/")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])])])],-1),ws=s("p",null,"\u5728tftpboot\u4E0B\u521B\u5EFApxelinux.cfg\u76EE\u5F55",-1),Ks=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# mkdir /var/lib/tftpboot/pxelinux/pxelinux.cfg ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# cp /mnt/isolinux/isolinux.cfg /var/lib/tftpboot/pxelinux/pxelinux.cfg/default")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Ls=s("ol",null,[s("li",null,"\u4FEE\u6539default\u914D\u7F6E\uFF0C\u6307\u5B9A\u7F51\u7AD9\u5B89\u88C5\u7684kickstart\u6587\u4EF6")],-1),Us=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# vim /var/lib/tftpboot/pxelinux.cfg/default")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u2026\u7701\u7565\u2026")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#\u5728label linux\u4E0A\u9762\u589E\u52A0\u81EA\u52A8\u5316\u5B89\u88C5\u7684\u914D\u7F6E")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"label ks")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  menu label ^Auto Install CentOS 7")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  kernel vmlinuz")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  append initrd=initrd.img ip=dhcp inst.repo=http://192.168.56.11/CentOS-7-x86_64/ inst.ks=http://192.168.56.11/CentOS-7-x86_64/CentOS-7-x86_64.cfg net.ifnames=0 biosdevname=0")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),js=s("ol",null,[s("li",null,[s("p",null,"\u914D\u7F6EDHCP Server"),s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# yum install -y dhcp")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# /bin/cp /usr/share/doc/dhcp-4.2.5/dhcpd.conf.example /etc/dhcp/dhcpd.conf")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# vim /etc/dhcp/dhcpd.conf")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'option domain-name "devopsedu.com";')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"option domain-name-servers 192.168.56.2;")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#\u8BF7\u5220\u9664\u5176\u4ED6\u7684subnet\u914D\u7F6E")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"subnet 192.168.56.0 netmask 255.255.255.0 {")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"     range dynamic-bootp 192.168.56.100 192.168.56.200;")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"     option subnet-mask              255.255.255.0;  #\u8BBE\u7F6E\u5B50\u7F51\u63A9\u7801")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"option routers                  192.168.56.2;    #\u8BBE\u7F6E\u7F51\u5173")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"     next-server                     192.168.56.11;   #\u8BBE\u7F6ETFTP-Server\u5730\u5740")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'     filename                        "pxelinux/pxelinux.0";   #\u8BBE\u7F6ETFTP\u9700\u8981\u4E0B\u8F7D\u7684\u6587\u4EF6')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"}")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])])]),s("li",null,[s("p",null,"\u542F\u52A8httpd\u3001tftp\u548Cdhcpd\u670D\u52A1"),s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# systemctl start xinetd.service dhcpd.service httpd.service")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])])]),s("li",null,[s("p",null,"\u68C0\u67E5\u670D\u52A1\u662F\u5426\u542F\u52A8"),s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# netstat -ntlp")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Active Internet connections (only servers)")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name    ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN      871/sshd            ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"tcp6       0      0 :::80                   :::*                    LISTEN      1321/httpd          ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"tcp6       0      0 :::22                   :::*                    LISTEN      871/sshd")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])])])],-1),Gs=s("p",null,"\u67E5\u770Bdhcpd\u548Ctftpd\u662F\u5426\u542F\u52A8",-1),Hs=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# netstat -nulp")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Active Internet connections (only servers)")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name    ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"udp        0      0 0.0.0.0:67              0.0.0.0:*                           1487/dhcpd          ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"udp        0      0 0.0.0.0:69              0.0.0.0:*                           1486/xinetd")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Fs=s("h3",{id:"_1-2-4-\u81EA\u52A8\u5316\u5B89\u88C5\u548C\u6D41\u7A0B\u603B\u7ED3",tabindex:"-1"},[n("1.2.4 \u81EA\u52A8\u5316\u5B89\u88C5\u548C\u6D41\u7A0B\u603B\u7ED3 "),s("a",{class:"header-anchor",href:"#_1-2-4-\u81EA\u52A8\u5316\u5B89\u88C5\u548C\u6D41\u7A0B\u603B\u7ED3","aria-hidden":"true"},"#")],-1),Vs=s("p",null,"\u73B0\u5728\u5C31\u53EF\u4EE5\u65B0\u521B\u5EFA\u4E00\u53F0\u865A\u62DF\u673A\u6765\u8FDB\u884C\u6D4B\u8BD5\u4E86\uFF0C\u8BB0\u7740\u9009\u62E9\u7F51\u5361\u542F\u52A8\u3002DHCP\u540E\uFF0C\u5C31\u53EF\u4EE5\u770B\u5230\u5B89\u88C5\u9875\u9762\u3002\u6211\u4EEC\u521A\u624D\u6DFB\u52A0\u7684Auto Install CentOS \u4E5F\u53EF\u4EE5\u770B\u5230\u4E86\u3002",-1),Bs=s("p",null,'\u4E0B\u9762\u6211\u4EEC\u53EF\u4EE5\u6765\u603B\u7ED3\u4E0BPXE+KickStart\u7684\u5B89\u88C5\u6D41\u7A0B\u4E86\uFF1A \u9700\u8981\u7ECF\u5386\u4EE5\u4E0B\u7684\u8FC7\u7A0B\uFF1A 1.\u7F51\u5361\u4E0A\u7684PXE\u82AF\u7247\u6709512\u5B57\u8282\uFF0C\u5B58\u653E\u4E86DHCP\u548CTFTP\u7684\u5BA2\u6237\u7AEF\u3002 2.\u542F\u52A8\u8BA1\u7B97\u673A\u9009\u62E9\u7F51\u5361\u542F\u52A8\u3002 3.PXE\u4E0A\u7684DHCP\u5BA2\u6237\u7AEF\u4F1A\u5411DHCP\u670D\u52A1\u5668\uFF0C\u7533\u8BF7IP\u5730\u5740 4.DHCP\u670D\u52A1\u5668\u5206\u914D\u7ED9\u5B83IP\u5730\u5740\u7684\u540C\u65F6\u901A\u8FC7\u4EE5\u4E0B\u5B57\u6BB5\uFF0C\u544A\u8BC9pxe\uFF0CTFTP\u7684\u5730\u5740\u548C\u5B83\u8981\u4E0B\u8F7D\u7684\u6587\u4EF6 \uF06Cnext-server 192.168.56.11\uFF1B \uF06Cfilename "pxelinux.0"\uFF1B 5.pxelinux.0\u544A\u8BC9PXE\u8981\u4E0B\u8F7D\u7684\u914D\u7F6E\u6587\u4EF6\u662Fpxelinux.cfg\u76EE\u5F55\u4E0B\u9762\u7684default 6.pxe\u4E0B\u8F7D\u5E76\u4F9D\u636E\u914D\u7F6E\u6587\u4EF6\u7684\u5185\u5BB9\u4E0B\u8F7D\u542F\u52A8\u5FC5\u987B\u7684\u6587\u4EF6\uFF0C\u5E76\u901A\u8FC7ks.cfg\u914D\u7F6E\u5185\u5BB9\u5F00\u59CB\u7CFB\u7EDF\u5B89\u88C5\u3002',-1),qs=s("p",null,[s("strong",null,"\u6211\u4EEC\u90FD\u5E72\u4E86\u4EC0\u4E48"),n(" \u6240\u4EE5\u6211\u4EEC\u770B\u5230\u8BBE\u7F6E\u4E00\u4E2A\u7F51\u7EDC\u73AF\u5883\u53EF\u80FD\u6D89\u53CA\u5230\u8BB8\u591A\u6B65\u9AA4\uFF0C\u624D\u80FD\u4E3A\u5F00\u59CB\u5B89\u88C5\u505A\u597D\u51C6\u5907\u3002\u60A8\u5FC5\u987B\uFF1A")],-1),Ys=s("ul",null,[s("li",null,[s("p",null,"\u914D\u7F6E\u670D\u52A1\uFF0C\u6BD4\u5982 DHCP\u3001TFTP\u3001DNS\u3001HTTP\u3001FTP \u548C NFS")]),s("li",null,[s("p",null,"\u5728 DHCP \u548C TFTP \u914D\u7F6E\u6587\u4EF6\u4E2D\u586B\u5165\u5404\u4E2A\u5BA2\u6237\u7AEF\u673A\u5668\u7684\u4FE1\u606F")]),s("li",null,[s("p",null,"\u521B\u5EFA\u81EA\u52A8\u90E8\u7F72\u6587\u4EF6\uFF08\u6BD4\u5982 kickstart \u548C autoinst\uFF09")]),s("li",null,[s("p",null,[n("\u5C06\u5B89\u88C5\u5A92\u4ECB\u89E3\u538B\u7F29\u5230 HTTP/FTP/NFS \u5B58\u50A8\u5E93\u4E2D\u3002 \u8FD9\u4E2A\u8FC7\u7A0B\u5E76\u4E0D\u7B80\u5355\uFF0C\u751A\u81F3\u53EF\u4EE5\u8BF4\u590D\u6742\uFF0C\u6211\u4EEC\u8981\u81EA\u5DF1\u7BA1\u7406\u548C\u521B\u5EFA\u4E0D\u540C\u7684\u64CD\u4F5C\u7CFB\u7EDF\u7248\u672C\u3001\u624B\u52A8\u7BA1\u7406DHCP\u7B49\uFF0C\u90A3\u4E48\u5982\u4F55\u80FD\u8BA9\u6211\u4EEC\u6709\u4E00\u4E2A\u529F\u80FD\u5F3A\u5927\uFF0C\u66F4\u5B9E\u7528\u7684\u81EA\u52A8\u5316\u88C5\u673A\u5E73\u53F0\uFF0C\u5F00\u6E90\u793E\u533A\u7ED9\u4E86\u6211\u4EEC\u7B54\u6848\u5C31\u662FCobbler\u3002 \u5B98\u65B9\u7F51\u7AD9\uFF1A"),s("a",{href:"http://cobbler.github.io/",target:"_blank",rel:"noreferrer"},"http://cobbler.github.io/")])])],-1),zs=s("h1",{id:"_2-cobbler\u5FEB\u901F\u5165\u95E8",tabindex:"-1"},[n("2 Cobbler\u5FEB\u901F\u5165\u95E8 "),s("a",{class:"header-anchor",href:"#_2-cobbler\u5FEB\u901F\u5165\u95E8","aria-hidden":"true"},"#")],-1),$s=s("p",null,"\u4F7F\u7528 Cobbler\uFF0C\u60A8\u65E0\u9700\u8FDB\u884C\u4EBA\u5DE5\u5E72\u9884\u5373\u53EF\u5B89\u88C5\u673A\u5668\u3002Cobbler\u8BBE\u7F6E\u4E00\u4E2APXE\u5F15\u5BFC\u73AF\u5883\uFF0C\u5E76\u63A7\u5236\u4E0E\u5B89\u88C5\u76F8\u5173\u7684\u6240\u6709\u8F6F\u4EF6\u548C\u73AF\u5883\u51C6\u5907\uFF0C\u6BD4\u5982\u7F51\u7EDC\u5F15\u5BFC\u670D\u52A1\uFF08DHCP \u548C TFTP\uFF09\u4E0E\u5B58\u50A8\u5E93\u955C\u50CF\u3002\u5F53\u5E0C\u671B\u5B89\u88C5\u4E00\u53F0\u65B0\u673A\u5668\u65F6\uFF0CCobbler \u53EF\u4EE5\uFF1A",-1),Xs=s("ul",null,[s("li",null,"\u4F7F\u7528\u4E00\u4E2A\u4EE5\u524D\u5B9A\u4E49\u7684\u6A21\u677F\u6765\u914D\u7F6E DHCP \u670D\u52A1\uFF08\u5982\u679C\u542F\u7528\u4E86\u7BA1\u7406 DHCP\uFF09"),s("li",null,"\u5C06\u4E00\u4E2A\u5B58\u50A8\u5E93\uFF08yum \u6216 rsync\uFF09\u5EFA\u7ACB\u955C\u50CF\u6216\u89E3\u538B\u7F29\u4E00\u4E2A\u5A92\u4ECB\uFF0C\u4EE5\u6CE8\u518C\u4E00\u4E2A\u65B0\u64CD\u4F5C\u7CFB\u7EDF"),s("li",null,"\u5728 DHCP \u914D\u7F6E\u6587\u4EF6\u4E2D\u4E3A\u9700\u8981\u5B89\u88C5\u7684\u673A\u5668\u521B\u5EFA\u4E00\u4E2A\u6761\u76EE\uFF0C\u5E76\u4F7F\u7528\u60A8\u6307\u5B9A\u7684\u53C2\u6570\uFF08IP \u548C MAC \u5730\u5740\uFF09"),s("li",null,"\u5728 TFTFP \u670D\u52A1\u76EE\u5F55\u4E0B\u521B\u5EFA\u9002\u5F53\u7684 PXE \u6587\u4EF6"),s("li",null,"\u91CD\u65B0\u542F\u52A8 DHCP \u670D\u52A1\u4EE5\u53CD\u6620\u66F4\u6539"),s("li",null,"\u91CD\u65B0\u542F\u52A8\u673A\u5668\u4EE5\u5F00\u59CB\u5B89\u88C5\uFF08\u5982\u679C\u7535\u6E90\u7BA1\u7406\u5DF2\u542F\u7528\uFF09")],-1),Js=s("h2",{id:"_2-1-cobbler\u90E8\u7F72",tabindex:"-1"},[n("2.1 Cobbler\u90E8\u7F72 "),s("a",{class:"header-anchor",href:"#_2-1-cobbler\u90E8\u7F72","aria-hidden":"true"},"#")],-1),Ws=s("h3",{id:"_2-1-1-cobbler\u529F\u80FD",tabindex:"-1"},[n("2.1.1 Cobbler\u529F\u80FD "),s("a",{class:"header-anchor",href:"#_2-1-1-cobbler\u529F\u80FD","aria-hidden":"true"},"#")],-1),Qs=s("p",null,"Cobbler \u652F\u6301\u4F17\u591A\u7684\u53D1\u884C\u7248\uFF1ARed Hat\u3001Fedora\u3001CentOS\u3001Debian\u3001Ubuntu \u548C SuSE\u3002\u5F53\u6DFB\u52A0\u4E00\u4E2A\u64CD\u4F5C\u7CFB\u7EDF\uFF08\u901A\u5E38\u901A\u8FC7\u4F7F\u7528 ISO \u6587\u4EF6\uFF09\u65F6\uFF0CCobbler \u77E5\u9053\u5982\u4F55\u89E3\u538B\u7F29\u5408\u9002\u7684\u6587\u4EF6\u5E76\u8C03\u6574\u7F51\u7EDC\u670D\u52A1\uFF0C\u4EE5\u6B63\u786E\u5F15\u5BFC\u673A\u5668\u3002",-1),Zs=s("p",null,[n("Cobbler \u53EF\u4F7F\u7528 kickstart \u6A21\u677F\u3002\u57FA\u4E8E Red Hat \u6216 Fedora \u7684\u7CFB\u7EDF\u4F7F\u7528 kickstart \u6587\u4EF6\u6765\u81EA\u52A8\u5316\u5B89\u88C5\u6D41\u7A0B\u3002\u901A\u8FC7\u4F7F\u7528\u6A21\u677F\uFF0C\u60A8\u5C31\u4F1A\u62E5\u6709\u57FA\u672C\u7684 kickstart \u6A21\u677F\uFF0C\u7136\u540E\u5B9A\u4E49\u5982\u4F55\u9488\u5BF9\u4E00\u79CD\u914D\u7F6E\u6587\u4EF6\u6216\u673A\u5668\u914D\u7F6E\u800C\u66FF\u6362\u5176\u4E2D\u7684\u53D8\u91CF\u3002\u4F8B\u5982\uFF0C\u4E00\u4E2A\u6A21\u677F\u53EF\u80FD\u5305\u542B\u4E24\u4E2A\u53D8\u91CF $domain \u548C $machine_name\u3002\u5728 Cobbler \u914D\u7F6E\u4E2D\uFF0C\u4E00\u4E2A\u914D\u7F6E\u6587\u4EF6\u6307\u5B9A "),s("a",{href:"http://domain=mydomain.com",target:"_blank",rel:"noreferrer"},"domain=mydomain.com"),n("\uFF0C\u5E76\u4E14\u6BCF\u53F0\u4F7F\u7528\u8BE5\u914D\u7F6E\u6587\u4EF6\u7684\u673A\u5668\u5728 machine_name \u53D8\u91CF\u4E2D\u6307\u5B9A\u5176\u540D\u79F0\u3002\u8BE5\u914D\u7F6E\u6587\u4EF6\u4E2D\u7684\u6240\u6709\u673A\u5668\u90FD\u4F7F\u7528\u76F8\u540C\u7684 kickstart \u5B89\u88C5\u4E14\u9488\u5BF9 "),s("a",{href:"http://domain=mydomain.com",target:"_blank",rel:"noreferrer"},"domain=mydomain.com"),n(" \u8FDB\u884C\u914D\u7F6E\uFF0C\u4F46\u6BCF\u53F0\u673A\u5668\u62E5\u6709\u5176\u81EA\u5DF1\u7684\u673A\u5668\u540D\u79F0\u3002\u60A8\u4ECD\u7136\u53EF\u4EE5\u4F7F\u7528 kickstart \u6A21\u677F\u5728\u4E0D\u540C\u7684\u57DF\u4E2D\u5B89\u88C5\u5176\u4ED6\u673A\u5668\u5E76\u4F7F\u7528\u4E0D\u540C\u7684\u673A\u5668\u540D\u79F0\u3002")],-1),sn=s("p",null,"\u4F7F\u7528 koan \u5BA2\u6237\u7AEF\uFF0CCobbler \u53EF\u4ECE\u5BA2\u6237\u7AEF\u914D\u7F6E\u865A\u62DF\u673A\u5E76\u91CD\u65B0\u5B89\u88C5\u7CFB\u7EDF\u3002\u6211\u4E0D\u4F1A\u8BA8\u8BBA\u914D\u7F6E\u7BA1\u7406\u548C koan \u7279\u6027\uFF0C\u56E0\u4E3A\u5B83\u4EEC\u4E0D\u5C5E\u4E8E\u672C\u6587\u7684\u4ECB\u7ECD\u8303\u7574\u3002\u4F46\u662F\uFF0C\u5B83\u4EEC\u662F\u503C\u5F97\u7814\u7A76\u7684\u6709\u7528\u7279\u6027\u3002",-1),nn=s("h3",{id:"_2-1-2-cobbler\u5B89\u88C5",tabindex:"-1"},[n("2.1.2 Cobbler\u5B89\u88C5 "),s("a",{class:"header-anchor",href:"#_2-1-2-cobbler\u5B89\u88C5","aria-hidden":"true"},"#")],-1),ln=s("ol",null,[s("li",null,"\u5B89\u88C5EPEL\u6E90")],-1),en=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# rpm -ivh http://mirrors.aliyun.com/epel/epel-release-latest-7.noarch.rpm")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),on=s("ul",null,[s("li",null,"yum\u5B89\u88C5cobbler")],-1),an=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# yum install -y httpd dhcp tftp python-ctypes cobbler cobbler-web pykickstart fence-agents xinetd debmirror")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),tn=s("ol",null,[s("li",null,"\u542F\u52A8\u5E76\u914D\u7F6Ecobbler")],-1),cn=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# systemctl enable httpd cobblerd")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# systemctl start httpd cobblerd")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),rn=s("ul",null,[s("li",null,"\u4E0B\u8F7DCobbler\u9700\u8981\u7684\u542F\u52A8\u6587\u4EF6")],-1),pn=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# cobbler get-loaders")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),dn=s("ul",null,[s("li",null,"\u68C0\u67E5Cobbler\u72B6\u6001")],-1),An=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# cobbler check")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"The following are potential configuration items that you may want to fix:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"1 : The 'server' field in /etc/cobbler/settings must be set to something other than localhost, or kickstarting features will not work.  This should be a resolvable hostname or IP for the boot server as reachable by all machines that will use it.")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"2 : For PXE to be functional, the 'next_server' field in /etc/cobbler/settings must be set to something other than 127.0.0.1, and should match the IP of the boot server on the PXE network.")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"3 : change 'disable' to 'no' in /etc/xinetd.d/tftp")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"4 : enable and start rsyncd.service with systemctl")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"5 : comment out 'dists' on /etc/debmirror.conf for proper debian support")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"6 : comment out 'arches' on /etc/debmirror.conf for proper debian support")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},`7 : The default password used by the sample templates for newly installed machines (default_password_crypted in /etc/cobbler/settings) is still set to 'cobbler' and should be changed, try: "openssl passwd -1 -salt 'random-phrase-here' 'your-password-here'" to generate new one`)]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Restart cobblerd and then run 'cobbler sync' to apply changes.")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Cn=s("p",null,"\u8FD9\u6BB5\u8BDD\u7684\u610F\u601D\u5C31\u662F\u9700\u8981\u5904\u7406\u4E0A\u9762\u7684\u6240\u6709\u95EE\u9898\uFF0C\u7136\u540E\u91CD\u542Fcobblerd\u670D\u52A1\uFF0C\u7136\u540E\u6267\u884Ccobbler sync\u540C\u6B65\u4FEE\u6539\u64CD\u4F5C\u3002",-1),un=s("p",null,[s("strong",null,"\u5C06\u4E0A\u9762\u63D0\u5230\u76847\u4E2A\u95EE\u9898\u8FDB\u884C\u4FEE\u590D")],-1),yn=s("ul",null,[s("li",null,"\u95EE\u98981\u548C2\u89E3\u51B3")],-1),hn=s("p",null,"\u5747\u662F\u9700\u8981\u4FEE\u6539cobbler\u7684\u914D\u7F6E\u6587\u4EF6\u3002",-1),_n=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# vim /etc/cobbler/settings")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#\u4FEE\u6539\u4EE5\u4E0B\u4E24\u884C\u5373\u53EF\uFF0C\u53EF\u4EE5\u76F4\u63A5\u641C\u7D22127.0.0.1\u6765\u5B9A\u4F4D")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"server: 192.168.56.11   #\u8BBE\u7F6Ecobbler server\u7684IP\u5730\u5740")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"next_server: 192.168.56.11  #\u8BBE\u7F6EPXE server\u7684IP\u5730\u5740")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Dn=s("ul",null,[s("li",null,"\u95EE\u98983\u89E3\u51B3")],-1),gn=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# vim /etc/xinetd.d/tftp")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"service tftp")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"{")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        socket_type             = dgram")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        protocol                = udp")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        wait                    = yes")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        user                    = root")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        server                  = /usr/sbin/in.tftpd")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        server_args             = -s /var/lib/tftpboot")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        disable                 = no")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        per_source              = 11")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        cps                     = 100 2")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        flags                   = IPv4")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"}")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),mn=s("ul",null,[s("li",null,"\u95EE\u98984\u89E3\u51B3")],-1),bn=s("p",null,"\u542F\u52A8rsyncd\u670D\u52A1\uFF0C\u5E76\u8BBE\u7F6E\u5F00\u673A\u81EA\u52A8\u542F\u52A8",-1),kn=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# systemctl enable rsyncd")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# systemctl start rsyncd")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),vn=s("ul",null,[s("li",null,"\u95EE\u98985\u30016\u89E3\u51B3")],-1),xn=s("p",null,"\u5B89\u88C5debmirror\u662Fdebian\u7CFB\u5217\u7CFB\u7EDF\u4F7F\u7528\u7684",-1),fn=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# yum install -y debmirror")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# vim /etc/debmirror.conf")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#\u8BF7\u6CE8\u91CA\u6389\u4E0B\u9762\u4E24\u884C\u914D\u7F6E")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'#@dists="sid";')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'#@arches="i386"')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Sn=s("ul",null,[s("li",null,"\u95EE\u98987\u89E3\u51B3")],-1),En=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# openssl passwd -1 -salt 'example' 'devopsedu.com'")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"$1$example$I.i3m26O7QYNja8p5Cj9.0 ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@ops-node1 ~]# vim /etc/cobbler/settings")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u5C06\u4E0B\u9762\u5B57\u6BB5\u66FF\u6362\u4E3A\u4E0A\u9762\u751F\u6210\u7684\u5B57\u6BB5\uFF1A")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'default_password_crypted: "$1$example$I.i3m26O7QYNja8p5Cj9.0"')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# systemctl restart cobblerd")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Pn=s("ul",null,[s("li",null,"\u518D\u6B21\u68C0\u67E5Cobbler")],-1),Nn=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}}," [root@ops-node1 ~]# cobbler check")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"No configuration problems found.  All systems go.")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Rn=s("h3",{id:"_2-1-3-cobbler\u7BA1\u7406dhcp",tabindex:"-1"},[n("2.1.3 Cobbler\u7BA1\u7406DHCP "),s("a",{class:"header-anchor",href:"#_2-1-3-cobbler\u7BA1\u7406dhcp","aria-hidden":"true"},"#")],-1),Tn=s("ol",null,[s("li",null,"\u5F00\u542F\u7BA1\u7406DHCP\u670D\u52A1\uFF0C\u8FD9\u6837Cobbler\u5C31\u53EF\u4EE5\u63A5\u7BA1DHCP\u7684\u7BA1\u7406\u5DE5\u4F5C")],-1),In=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@ops-node1 ~]# vim /etc/cobbler/settings")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"manage_dhcp: 1")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),On=s("ol",null,[s("li",null,"\u9996\u5148\u4FEE\u6539dhcp\u7684\u914D\u7F6E\u6587\u4EF6")],-1),Mn=s("p",null,"\u4FEE\u6539dhcp\u7684\u6A21\u677F\u914D\u7F6E\u6587\u4EF6\uFF0C\u8BBE\u7F6E\u76F8\u5BF9\u5E94\u7684DHCP\u7684IP\u5730\u5740\u548C\u5206\u914D\u7684\u7F51\u6BB5\u3002",-1),wn=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@ops-node1 ~]# vim /etc/cobbler/dhcp.template ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"subnet 192.168.56.0 netmask 255.255.255.0 {")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"     option routers             192.168.56.2;")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"     option domain-name-servers 192.168.56.2;")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"     option subnet-mask         255.255.255.0;")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"     range dynamic-bootp        192.168.56.100 192.168.56.254;")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"     default-lease-time         21600;")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"     max-lease-time             43200;")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"     next-server                $next_server;")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  \u2026")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Kn=s("p",null,"\u91CD\u542FCobbler\u5E76\u8FDB\u884C\u540C\u6B65\u64CD\u4F5C",-1),Ln=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# systemctl restart cobblerd ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# cobbler sync")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Un=s("blockquote",null,[s("p",null,"\u6267\u884C\u5B8C\u6BD5cobbler sync\u540E\uFF0C\u4F1A\u81EA\u52A8\u751F\u6210/etc/dhcpd.conf\u3002\u5E76\u91CD\u542Fdhcp\u670D\u52A1\u3002\u6240\u4EE5\u8BF4\u4F7F\u7528Cobbler\u7BA1\u7406DHCP\u540E\uFF0C\u8BF7\u52FF\u4FEE\u6539/etc/dhcpd.conf\u3002\u4EE5\u540E\u6240\u6709dhcp\u76F8\u5173\u7684\u914D\u7F6E\u90FD\u662F\u4FEE\u6539Cobbler\u7684DHCP\u6A21\u677F\u6587\u4EF6/etc/cobbler/dhcp.template\u3002")],-1),jn=s("h3",{id:"_2-1-4-cobbler\u5BFC\u5165\u955C\u50CF",tabindex:"-1"},[n("2.1.4 Cobbler\u5BFC\u5165\u955C\u50CF "),s("a",{class:"header-anchor",href:"#_2-1-4-cobbler\u5BFC\u5165\u955C\u50CF","aria-hidden":"true"},"#")],-1),Gn=s("ol",null,[s("li",null,"\u4E0B\u8F7D\u5E76\u5BFC\u5165\u955C\u50CF")],-1),Hn=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@ops-node1 ~]# cd /usr/local/src")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@ops-node1 ~]# wget https://mirror.tuna.tsinghua.edu.cn/centos/7.7.1908/isos/x86_64/CentOS-7-x86_64-Minimal-1908.iso")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@ops-node1 ~]# mmount -o loop /usr/local/src/CentOS-7-x86_64-Minimal-1908.iso /mnt/")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@ops-node1 ~]# cobbler import --path=/mnt/ --name=CentOS-7.7-x86_64 --arch=x86_64")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Fn=s("p",null,[s("strong",null,"\u53C2\u6570\u8BF4\u660E:")],-1),Vn=s("ul",null,[s("li",null,"--name \u4E3A\u5B89\u88C5\u6E90\u5B9A\u4E49\u4E00\u4E2A\u540D\u5B57"),s("li",null,"--arch \u6307\u5B9A\u5B89\u88C5\u6E90\u662F32\u4F4D\u8FD8\u662F64\u4F4D\u3001ia64, \u76EE\u524D\u652F\u6301\u7684\u9009\u9879\u6709: x86\u2502x86_64\u2502ia64")],-1),Bn=s("blockquote",null,[s("p",null,"\u5C0F\u63D0\u793A\uFF1ACobbler \u4F1A\u628A\u5B89\u88C5\u7684\u955C\u50CFISO\u62F7\u8D1D\u5230\u6E90\u5B89\u88C5\u955C\u50CF\u76EE\u5F55\u4E0B: /var/www/cobbler/ks_mirror/")],-1),qn=s("ol",null,[s("li",null,"\u67E5\u770B\u5BFC\u5165\u540E\u7ED3\u679C")],-1),Yn=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# cobbler list")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"distros:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"   CentOS-7-x86_64")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"profiles:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"   CentOS-7-x86_64")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),zn=s("h3",{id:"_2-1-5-\u81EA\u5B9A\u4E49kickstart\u6587\u4EF6",tabindex:"-1"},[n("2.1.5 \u81EA\u5B9A\u4E49kickstart\u6587\u4EF6 "),s("a",{class:"header-anchor",href:"#_2-1-5-\u81EA\u5B9A\u4E49kickstart\u6587\u4EF6","aria-hidden":"true"},"#")],-1),$n=s("p",null,"Cobbler\u7684Kickstart\u6587\u4EF6\u548C\u9ED8\u8BA4\u7684\u4E0D\u540C\uFF0C\u6211\u4EEC\u9700\u8981\u4FEE\u6539\uFF0C\u4E3B\u8981\u662F\u589E\u52A0\u4E0ACobbler\u7684\u53D8\u91CF\u3002\u5BFC\u5165\u955C\u50CF\u540E\uFF0C\u6211\u4EEC\u4E00\u822C\u4F1A\u81EA\u5B9A\u4E49kickstart\u6587\u4EF6\u7ED9\u8FD9\u4E2A\u955C\u50CF\u3002\u9996\u5148\u53EF\u4EE5\u5C06\u81EA\u5B9A\u4E49\u540E\u7684Cobbler\u7684kickstart\u6587\u4EF6\u653E\u7F6E\u5728/var/lib/cobbler/kickstarts\u76EE\u5F55\u4E0B\uFF0C\u8FD9\u4E5F\u662FCobbler\u7684\u9ED8\u8BA4\u5B58\u653Ekickstart\u6587\u4EF6\u7684\u5730\u65B9\u3002",-1),Xn=s("ol",null,[s("li",null,"\u81EA\u5B9A\u4E49Kickstart\u6587\u4EF6")],-1),Jn=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# vim /var/lib/cobbler/kickstarts/CentOS-7.7-x86_64-Cobbler.cfg")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#Kickstart Configurator by Jason Zhao")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#platform=x86, AMD64, or Intel EM64T")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#System  language")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"lang en_US")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#System keyboard")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"keyboard us")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#Sytem timezone")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"timezone Asia/Shanghai")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#Root password")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"rootpw --iscrypted $default_password_crypted")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#Use text mode install")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"text")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#Install OS instead of upgrade")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"install")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#Use NFS installation Media")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"url --url=$tree")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#System bootloader configuration")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'bootloader --location=mbr --driveorder=sda --append="net.ifnames=0 biosdevname=0"')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#Clear the Master Boot Record")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"zerombr")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#Partition clearing information")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"clearpart --all --initlabel ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#Disk partitioning information")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"part /boot --fstype=xfs --size=1024")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'part swap --asprimary --fstype="swap" --size=1024')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"part / --fstype=xfs --size=1 --grow")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#System authorization infomation")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"auth  --useshadow  --enablemd5 ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#Network information")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"$SNIPPET('network_config')")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# Reboot after installation")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"reboot")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#Firewall configuration")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"firewall --disabled ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#SELinux configuration")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"selinux --disabled")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#Service configuration")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"services --disabled=postfix")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#Do not configure XWindows")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"skipx")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#Package install information")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"%pre")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"$SNIPPET('log_ks_pre')")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"$SNIPPET('kickstart_start')")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"$SNIPPET('pre_install_network_config')")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# Enable installation monitoring")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"$SNIPPET('pre_anamon')")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"%end")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"%packages")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"@ base")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"@ core")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"bash-completion")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"sysstat")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"ntp")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"lrzsz")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"openssl-devel")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"zlib-devel")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"OpenIPMI-tools")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"screen")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"%end")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Wn=s("ol",null,[s("li",null,"\u7136\u540E\u7F16\u8F91profile\u6765\u5236\u5B9Akickstart\u6587\u4EF6\u3002")],-1),Qn=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@ops-node1 ~]# cobbler profile edit --name=CentOS-7.7-x86_64 --kickstart=/var/lib/cobbler/kickstarts/CentOS-7.7-x86_64-Cobbler.cfg")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Zn=s("ol",null,[s("li",null,"\u589E\u52A0\u5B89\u88C5\u65F6\u7684\u5185\u6838\u53C2\u6570")],-1),sl=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@ops-node1 ~]# cobbler profile edit --name=CentOS-7.7-x86_64 --kopts='net.ifnames=0 biosdevname=0'")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),nl=s("ol",null,[s("li",null,"\u6700\u540E\uFF0C\u4E00\u5B9A\u8981\u6267\u884C\u540C\u6B65\uFF0C\u624D\u80FD\u5C06Cobbler\u8BBE\u7F6E\u5B8C\u6210")],-1),ll=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# cobbler sync")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),el=s("h2",{id:"_2-2-\u4F7F\u7528cobbler\u81EA\u52A8\u5316\u5B89\u88C5centos",tabindex:"-1"},[n("2.2 \u4F7F\u7528Cobbler\u81EA\u52A8\u5316\u5B89\u88C5CentOS "),s("a",{class:"header-anchor",href:"#_2-2-\u4F7F\u7528cobbler\u81EA\u52A8\u5316\u5B89\u88C5centos","aria-hidden":"true"},"#")],-1),ol=s("p",null,"\u73B0\u5728\u6211\u4EEC\u5C31\u53EF\u4EE5\u4F7F\u7528Cobbler\u8FDB\u884C\u5B89\u88C5\u4E86\u3002\u5B9E\u9A8C\u73AF\u5883\u4E0B\uFF0C\u4F60\u53EF\u4EE5\u65B0\u521B\u5EFA\u4E00\u4E2A\u865A\u62DF\u673A\uFF08\u6CE8\u610F\u7F51\u5361\u7684\u9009\u62E9\uFF09\u6765\u8FDB\u884C\u6D4B\u8BD5\u4E86\u3002Cobbler\u975E\u5E38\u4EBA\u6027\u5316\u7684\u521B\u5EFA\u4E86\u4E00\u4E2ALocal\uFF0C\u5373\u4F7F\u4ECE\u786C\u76D8\u542F\u52A8\uFF0C\u8FD9\u6837\u4E5F\u907F\u514D\u4E86\u6709\u670D\u52A1\u5668\u4ECE\u7F51\u5361\u542F\u52A8\u5F00\u59CB\u81EA\u52A8\u5B89\u88C5\u7684\u95EE\u9898\u3002",-1),al=s("h3",{id:"_2-2-1-\u4F7F\u7528cobbler\u5B89\u88C5centos",tabindex:"-1"},[n("2.2.1 \u4F7F\u7528Cobbler\u5B89\u88C5CentOS "),s("a",{class:"header-anchor",href:"#_2-2-1-\u4F7F\u7528cobbler\u5B89\u88C5centos","aria-hidden":"true"},"#")],-1),tl=s("ol",null,[s("li",null,"\u542F\u52A8\u7269\u7406\u670D\u52A1\u5668"),s("li",null,"\u9009\u62E9CentOS-7.7-x86_64\u4E4B\u540E\u5373\u53EF\u91CD\u65B0\u5F00\u59CB\u5B89\u88C5\u3002")],-1),cl=s("blockquote",null,[s("p",null,"\u5728\u751F\u4EA7\u73AF\u5883\u5982\u679C\u60F3\u8981\u81EA\u52A8\u5F00\u59CB\u5B89\u88C5\uFF0C\u6211\u4EEC\u7684\u901A\u5E38\u505A\u6CD5\u662F\u6709\u4E00\u4E2A\u4E13\u95E8\u8FDB\u884C\u670D\u52A1\u5668\u5B89\u88C5\u7684VLAN\uFF0C\u5B89\u88C5\u5B8C\u6BD5\u540E\uFF0C\u8FDB\u5165\u5F85\u8C03\u914D\u72B6\u6001\uFF0C\u7136\u540E\u6839\u636E\u6D41\u7A0B\u8FDB\u5165\u5230\u751F\u4EA7\u73AF\u5883\u3002\u4F46\u662F\u63D0\u9192\u5927\u5BB6\uFF0C\u81EA\u52A8\u5316\u5F00\u59CB\u8FDB\u884C\u64CD\u4F5C\u7CFB\u7EDF\u5B89\u88C5\u98CE\u9669\u4F9D\u7136\u5F88\u5927\u3002")],-1),il=s("h3",{id:"_2-2-2-koan\u91CD\u65B0\u5B89\u88C5\u7CFB\u7EDF",tabindex:"-1"},[n("2.2.2 Koan\u91CD\u65B0\u5B89\u88C5\u7CFB\u7EDF "),s("a",{class:"header-anchor",href:"#_2-2-2-koan\u91CD\u65B0\u5B89\u88C5\u7CFB\u7EDF","aria-hidden":"true"},"#")],-1),rl=s("p",null,"\u5728\u5B9E\u8DF5\u7684\u8FD0\u7EF4\u5DE5\u4F5C\u4E2D\uFF0C\u4F60\u80AF\u5B9A\u9700\u8981\u91CD\u65B0\u5B89\u88C5\u64CD\u4F5C\u7CFB\u7EDF\uFF0C\u6709\u4E86Cobbler\u4F60\u5C31\u4E0D\u7528\u53BB\u673A\u623F\u4E86\uFF0C\u76F4\u63A5\u4F7F\u7528Koan\u5C31\u53EF\u4EE5\u8FDB\u884C\u81EA\u52A8\u5316\u91CD\u65B0\u5B89\u88C5\u64CD\u4F5C\u7CFB\u7EDF\u3002\u9700\u8981\u518D\u5F85\u91CD\u88C5\u7684\u670D\u52A1\u5668\u4E0A\u5B89\u88C5koan\u3002",-1),pl=s("p",null,"\u5B89\u88C5Koan\u8F6F\u4EF6\u5305",-1),dl=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@localhost ~]# rpm -ivh http://mirrors.aliyun.com/epel/epel-release-latest-7.noarch.rpm")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@localhost ~]# yum install -y koan")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Al=s("p",null,"\u5217\u51FA\u53EF\u4EE5\u5B89\u88C5\u7684\u7CFB\u7EDF",-1),Cl=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@localhost ~]# koan --server=192.168.56.11 --list=profiles")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"- looking for Cobbler at http://192.168.56.11:80/cobbler_api")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"CentOS-7.7-x86_64")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),ul=s("p",null,"\u6307\u5B9A\u9700\u8981\u91CD\u65B0\u5B89\u88C5\u7684\u64CD\u4F5C\u7CFB\u7EDF",-1),yl=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@localhost ~]# koan --replace-self --server=192.168.56.11 --profile=CentOS-7.7-x86_64")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"- looking for Cobbler at http://192.168.56.11:80/cobbler_api")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"- reading URL: http://192.168.56.11/cblr/svc/op/ks/profile/CentOS-7.7-x86_64")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"install_tree: http://192.168.56.11/cblr/links/CentOS-7.7-x86_64")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"downloading initrd initrd.img to /boot/initrd.img_koan")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"url=http://192.168.56.11/cobbler/images/CentOS-7.7-x86_64/initrd.img")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"- reading URL: http://192.168.56.11/cobbler/images/CentOS-7.7-x86_64/initrd.img")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"downloading kernel vmlinuz to /boot/vmlinuz_koan")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"url=http://192.168.56.11/cobbler/images/CentOS-7.7-x86_64/vmlinuz")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"- reading URL: http://192.168.56.11/cobbler/images/CentOS-7.4-x86_64/vmlinuz")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},`- ['/sbin/grubby', '--add-kernel', '/boot/vmlinuz_koan', '--initrd', '/boot/initrd.img_koan', '--args', '"ksdevice=link lang= text net.ifnames=0 ks=http://192.168.56.11/cblr/svc/op/ks/profile/CentOS-7.4-x86_64 biosdevname=0 kssendmac "', '--copy-default', '--make-default', '--title=kick1526449287']`)]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"- ['/sbin/grubby', '--update-kernel', '/boot/vmlinuz_koan', '--remove-args=root']")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"- reboot to apply changes")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),hl=s("p",null,"\u5982\u4E0B\u56FE\u6240\u793A\uFF0CKoan\u4F1A\u521B\u5EFA\u4E00\u4E2A\u65B0\u7684\u542F\u52A8\u9009\u9879\uFF0C\u91CD\u542F\u540E\uFF0C\u76F4\u63A5\u5F00\u59CB\u81EA\u52A8\u5B89\u88C5\u3002",-1),_l=s("p",null,"\u6211\u4EEC\u5148\u4E0D\u8981\u6267\u884Creboot\u5148\u7814\u7A76\u4E0B\u662F\u5982\u4F55\u5B9E\u73B0\u7684\u3002\u4F60\u6253\u5F00Grub\u7684\u914D\u7F6E\u6587\u4EF6",-1),Dl=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@localhost ~]# vim /boot/grub2/grub.cfg")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u4F60\u4F1A\u53D1\u73B0\u8FD9\u6837\u7684\u914D\u7F6E")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"menuentry 'kick1526449287' --class centos --class gnu-linux --class gnu --class os --unrestricted $menuentry_id_option 'gnulinux-3.10.0-693.el7.x86_64-advanced-49e658db-2c61-475a-9325-903fdbeb7cd4' {")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        load_video")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        set gfxpayload=keep")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        insmod gzio")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        insmod part_msdos")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        insmod xfs")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        set root='hd0,msdos1'")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        if [ x$feature_platform_search_hint = xy ]; then")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"          search --no-floppy --fs-uuid --set=root --hint-bios=hd0,msdos1 --hint-efi=hd0,msdos1 --hint-baremetal=ahci0,msdos1 --hint='hd0,msdos1'  0a801c26-5320-448d-b261-883499529bc6")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        else")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"          search --no-floppy --fs-uuid --set=root 0a801c26-5320-448d-b261-883499529bc6")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        fi")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        linux16 /vmlinuz_koan ro crashkernel=auto biosdevname=0 net.ifnames=0 rhgb quiet LANG=en_US.UTF-8 ksdevice=link lang= text net.ifnames=0 ks=http://192.168.56.11/cblr/svc/op/ks/profile/CentOS-7.4-x86_64 biosdevname=0 kssendmac")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        initrd16 /initrd.img_koan")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u4E5F\u5C31\u662F\u8BF4\uFF0Ckoan\u5E2E\u6211\u4EEC\u4E0B\u8F7D\u4E86\u5B89\u88C5\u9700\u8981\u7684\u6587\u4EF6\uFF0C\u5E76\u4E14\u4FEE\u6539\u4E86Grub\u7684\u5F00\u673A\u542F\u52A8\u9009\u9879\uFF0C\u589E\u52A0\u4E86\u5B89\u88C5\u7684\u914D\u7F6E\uFF0C\u5E76\u4E14\u8BBE\u7F6E\u4E3A\u9ED8\u8BA4\u542F\u52A8\u9009\u9879\uFF0C\u8FD9\u6837\u6211\u4EEC\u6267\u884C\u91CD\u542F\u9ED8\u8BA4\u5C31\u5F00\u59CB\u5B89\u88C5\u4E86\u3002\u73B0\u5728\u6267\u884C\u91CD\u542F\u6765\u9A8C\u8BC1\u4E00\u4E0B\u3002")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@hadoop-node1 ~]# reboot")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),gl=s("p",null,"\u4F60\u53EF\u4EE5\u770B\u5230\u5982\u4E0B\u56FE\u6240\u793A\u7684\u754C\u9762\uFF0C\u7136\u540E\u5F00\u59CB\u8FDB\u884C\u81EA\u52A8\u5316\u91CD\u65B0\u5B89\u88C5\u3002",-1),ml=s("h2",{id:"_2-3-cobbler-web\u4ECB\u7ECD",tabindex:"-1"},[n("2.3 Cobbler Web\u4ECB\u7ECD "),s("a",{class:"header-anchor",href:"#_2-3-cobbler-web\u4ECB\u7ECD","aria-hidden":"true"},"#")],-1),bl=s("p",null,[n("Cobbler\u8FD8\u63D0\u4F9B\u4E86\u53EF\u89C6\u5316\u7684Web\u8282\u754C\u9762\u53EB\u505ACobbler Web\u3002\u6211\u4EEC\u4F7F\u7528yum\u5B89\u88C5\u5B8C\u6BD5\u540E\uFF0C\u4F1A\u518D/etc/http/conf.d/\u76EE\u5F55\u4E0B\u751F\u6210cobbler_web.conf\u914D\u7F6E\u6587\u4EF6\uFF0C\u53EF\u4EE5\u901A\u8FC7"),s("a",{href:"https://ip/cobbler_web%E6%9D%A5%E8%BF%9B%E8%A1%8C%E8%AE%BF%E9%97%AE%E3%80%82",target:"_blank",rel:"noreferrer"},"https://IP/cobbler_web\u6765\u8FDB\u884C\u8BBF\u95EE\u3002")],-1),kl=s("ol",null,[s("li",null,[s("p",null,"\u5B89\u88C5Cobbler Web"),s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# yum install -y cobbler-web")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])])]),s("li",null,[s("p",null,"\u914D\u7F6ECobbler Web")])],-1),vl=s("p",null,"Cobbler web\u7684\u6743\u9650\u7BA1\u7406\u6709\u4E24\u4E2A\u914D\u7F6E\u6587\u4EF6 /etc/cobbler/users.conf\u548C/etc/cobbler/users.digest \u540E\u8005\u4E3ACobbler\u6743\u9650\u914D\u7F6E\u6587\u4EF6\uFF0C\u6211\u4EEC\u9700\u8981\u4F7F\u7528htdigest\u6765\u4E3A\u7528\u6237\u8BBE\u7F6E\u5BC6\u7801",-1),xl=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'[root@linux-node1 ~]# htdigest  /etc/cobbler/users.digest "Cobbler" cobbler')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Changing password for user cobbler in realm Cobbler")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"New password: ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Re-type new password:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),fl=s("p",null,[n("\u7136\u540E\u5C31\u53EF\u4EE5\u4F7F\u7528cobbler\u7528\u6237\u548C\u4F60\u8BBE\u7F6E\u7684\u5BC6\u7801\u767B\u9646\u4E86\u3002 "),s("a",{href:"https://192.168.56.11/cobbler_web",target:"_blank",rel:"noreferrer"},"https://192.168.56.11/cobbler_web")],-1),Sl=s("h2",{id:"_2-4-\u6DF1\u5165\u7406\u89E3cobbler",tabindex:"-1"},[n("2.4 \u6DF1\u5165\u7406\u89E3Cobbler "),s("a",{class:"header-anchor",href:"#_2-4-\u6DF1\u5165\u7406\u89E3cobbler","aria-hidden":"true"},"#")],-1),El=s("p",null,"\u7ECF\u8FC7\u524D\u9762\u7684\u5185\u5BB9\uFF0C\u6211\u4EEC\u5DF2\u7ECF\u53EF\u4EE5\u987A\u5229\u7684\u4F7F\u7528Cobbler\u8FDB\u884C\u64CD\u4F5C\u7CFB\u7EDF\u7684\u5B89\u88C5\uFF0C\u4F7F\u7528Koan\u8FDB\u884C\u64CD\u4F5C\u7CFB\u7EDF\u81EA\u52A8\u91CD\u65B0\u5B89\u88C5\u7684\u64CD\u4F5C\u4E86\uFF0C\u90A3\u4E48\u6211\u4EEC\u8FD8\u9700\u8981\u66F4\u591A\u7684\u638C\u63E1\u4E00\u4E9BCobbler\u7684\u77E5\u8BC6\uFF0C\u624D\u80FD\u5728\u751F\u4EA7\u7684\u5E94\u7528\u4E2D\uFF0C\u66F4\u5982\u9C7C\u5F97\u6C34\u3002",-1),Pl=s("h3",{id:"_2-4-1-cobbler-\u914D\u7F6E\u6587\u4EF6",tabindex:"-1"},[n("2.4.1 Cobbler \u914D\u7F6E\u6587\u4EF6 "),s("a",{class:"header-anchor",href:"#_2-4-1-cobbler-\u914D\u7F6E\u6587\u4EF6","aria-hidden":"true"},"#")],-1),Nl=s("ol",null,[s("li",null,"Cobbler\u7684\u76EE\u5F55 Cobbler\u5B89\u88C5\u5B8C\u6BD5\u540E\u4F1A\u5728\u7CFB\u7EDF\u751F\u6210\u5982\u4E0B\u76EE\u5F55\uFF1A")],-1),Rl=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# find / -name cobbler")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"/etc/selinux/targeted/active/modules/100/cobbler")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"/etc/cobbler")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"/var/lib/cobbler")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"/var/log/cobbler")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"/var/www/cobbler")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"/usr/bin/cobbler")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"/usr/lib/python2.7/site-packages/cobbler")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"/usr/share/cobbler")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Tl=s("ol",null,[s("li",null,"Cobbler\u914D\u7F6E\u6587\u4EF6\u76EE\u5F55")],-1),Il=s("p",null,"Cobbler\u7684\u914D\u7F6E\u6587\u4EF6\u5B58\u653E\u5728/etc/cobbler\u4E0B\u3002",-1),Ol=s("ul",null,[s("li",null,"/etc/cobbler/settings\u4E3A\u4E3B\u914D\u7F6E\u6587\u4EF6\uFF1B"),s("li",null,"\u5728/etc/cobbler\u4E0B\u4F60\u8FD8\u80FD\u770B\u5230dhcp\u3001dns\u3001pxe\u3001dnsmasq\u7684\u6A21\u677F\u914D\u7F6E\u6587\u4EF6\uFF1B"),s("li",null,"/etc/cobbler/users.digest\u4E3A\u7528\u4E8Eweb\u8BBF\u95EE\u7684\u7528\u6237\u540D\u5BC6\u7801\u914D\u7F6E\u6587\u4EF6\uFF1B"),s("li",null,"/etc/cobbler/modules.conf \u4E3A\u6A21\u5757\u914D\u7F6E\u6587\u4EF6\uFF1B"),s("li",null,"/etc/cobbler/users.conf\u4E3ACobbler WebUI/Web service\u6388\u6743\u914D\u7F6E\u6587\u4EF6\u3002"),s("li",null,"\u4FEE\u6539Cobbler\u63D0\u793A")],-1),Ml=s("p",null,"\u5982\u679C\u4F60\u60F3\u4FEE\u6539Cobbler\u7684\u63D0\u793A\uFF0C\u53EF\u4EE5\u76F4\u63A5\u7F16\u8F91\u4E0B\u9762\u6587\u4EF6\u3002",-1),wl=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@test-node1 ~]# vim /etc/cobbler/pxe/pxedefault.template")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"DEFAULT menu")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"PROMPT 0")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"MENU TITLE DevOpsEDU | http://www.devopsedu.com")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"TIMEOUT 200")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"TOTALTIMEOUT 6000")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"ONTIMEOUT $pxe_timeout_profile")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"LABEL local")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        MENU LABEL (local)")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        MENU DEFAULT")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        LOCALBOOT -1")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"$pxe_menu_items")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"MENU end")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Kl=s("ol",null,[s("li",null,"Cobbler\u6570\u636E\u76EE\u5F55/var/lib/cobbler\uFF0C")],-1),Ll=s("p",null,"\u6B64\u76EE\u5F55\u5B58\u50A8\u548CCobbler profiles\u3001systems\u3001distros\u76F8\u5173\u7684\u914D\u7F6E\u3002",-1),Ul=s("ul",null,[s("li",null,"configs/ - \u6B64\u76EE\u5F55\u7528\u4E8E\u5B58\u50A8distros\u3001repos\u3001systems\u548Cprofiles\u76F8\u5173\u4FE1\u606F\u3002"),s("li",null,"backup/ - \u5907\u4EFD\u76EE\u5F55"),s("li",null,"snippets/ - \u7528\u4E8E\u653E\u7F6E\u4E00\u4E9B\u53EF\u4EE5\u5728kickstarts\u5BFC\u5165\u7684\u811A\u672C\u5C0F\u7247\u6BB5"),s("li",null,"triggers/ - \u6B64\u76EE\u5F55\u7528\u6765\u653E\u7F6E\u4E00\u4E9B\u53EF\u6267\u884C\u811A\u672C"),s("li",null,"kickstarts/ - \u6B64\u76EE\u5F55\u7528\u6765\u653E\u7F6Ekickstart\u6A21\u677F\u6587\u4EF6"),s("li",null,"Repo\u6570\u636E\u76EE\u5F55/var/www/cobbler")],-1),jl=s("p",null,"\u5BFC\u5165\u7684\u53D1\u884C\u7248\uFF0Crepos\u955C\u50CF\u548Ckickstart\u6587\u4EF6\u90FD\u653E\u7F6E\u5728/var/www/cobbler\u76EE\u5F55\u4E0B\u3002\u786E\u4FDD/var\u76EE\u5F55\u6709\u8DB3\u591F\u7684\u7A7A\u95F4\u6765\u5B58\u50A8\u8FD9\u4E9B\u6587\u4EF6\u3002",-1),Gl=s("ul",null,[s("li",null,"images/ - \u5B58\u50A8\u6240\u6709\u5BFC\u5165\u53D1\u884C\u7248\u7684Kernel\u548Cinitrd\u955C\u50CF\u7528\u4E8E\u8FDC\u7A0B\u7F51\u7EDC\u542F\u52A8"),s("li",null,"ks_mirror/ - \u5B58\u50A8\u5BFC\u5165\u7684\u53D1\u884C\u7248"),s("li",null,"repo_mirror/ - yum repos\u5B58\u50A8\u76EE\u5F55"),s("li",null,"Cobbler\u65E5\u5FD7\u76EE\u5F55")],-1),Hl=s("p",null,"/var/log/cobbler\u7528\u4E8E\u5B58\u653E\u65E5\u5FD7\u6587\u4EF6/var/log/cobbler/cobbler.log",-1),Fl=s("h3",{$cs:"",id:"_2-4-2-cobbler\u8BBE\u8BA1\u65B9\u5F0F",tabindex:"-1"},[n("2.4.2 Cobbler\u8BBE\u8BA1\u65B9\u5F0F "),s("a",{class:"header-anchor",href:"#_2-4-2-cobbler\u8BBE\u8BA1\u65B9\u5F0F","aria-hidden":"true"},"#")],-1),Vl=s("p",null,"Cobbler \u6709\u591A\u4E2A\u5BF9\u8C61\u7EC4\u6210\u7684\uFF0C\u5BF9\u8C61\u548C\u5BF9\u8C61\u4E4B\u95F4\u53EF\u4EE5\u76F8\u4E92\u5F15\u7528\uFF1A",-1),Bl=s("ul",null,[s("li",null,"Repo\uFF08\u5B58\u50A8\u5E93\uFF09\uFF1A\u4FDD\u5B58\u4E00\u4E2A yum \u6216 rsync \u5B58\u50A8\u5E93\u7684\u955C\u50CF\u4FE1\u606F\u3002\u4F8B\u5982\u6211\u4EEC\u53EF\u4EE5\u5C06Zabbix\u7684\u8F6F\u4EF6\u4ED3\u5E93\u540C\u6B65\u5230\u6211\u4EEC\u672C\u5730\uFF0C\u5C31\u662F\u4E00\u4E2ARepo\u3002"),s("li",null,"Distro\uFF08\u53D1\u884C\u7248\uFF09\uFF1A\u8868\u793A\u4E00\u4E2A\u64CD\u4F5C\u7CFB\u7EDF\u3002\u5B83\u627F\u8F7D\u4E86\u5185\u6838\u548C initrd \u7684\u4FE1\u606F\uFF0C\u4EE5\u53CA\u5185\u6838\u53C2\u6570\u7B49\u5176\u4ED6\u6570\u636E\u3002"),s("li",null,"profile\uFF08\u914D\u7F6E\u6587\u4EF6\uFF09\uFF1A\u5305\u542B\u4E00\u4E2Adistro\uFF08\u53D1\u884C\u7248\uFF09\u3001\u4E00\u4E2A kickstart \u6587\u4EF6\u4EE5\u53CA\u53EF\u80FD\u7684Repo\uFF08\u5B58\u50A8\u5E93\uFF09\uFF0C\u8FD8\u5305\u542B\u66F4\u591A\u7279\u5B9A\u7684\u5185\u6838\u53C2\u6570\u7B49\u5176\u4ED6\u6570\u636E\u3002"),s("li",null,"system\uFF08\u7CFB\u7EDF\uFF09\uFF1A\u8868\u793A\u8981\u5B89\u88C5\u7684\u673A\u5668\u3002\u5B83\u5305\u542B\u4E00\u4E2A\u914D\u7F6E\u6587\u4EF6\u6216\u4E00\u4E2A\u955C\u50CF\uFF0C\u8FD8\u5305\u542B IP \u548C MAC \u5730\u5740\u3001\u7535\u6E90\u7BA1\u7406\uFF08\u5730\u5740\u3001\u51ED\u636E\u3001\u7C7B\u578B\uFF09\u4EE5\u53CA\u66F4\u4E3A\u4E13\u4E1A\u7684\u6570\u636E\u7B49\u4FE1\u606F\u3002"),s("li",null,"Image\uFF08\u955C\u50CF\uFF09\uFF1A\u53EF\u66FF\u6362\u4E00\u4E2A\u5305\u542B\u4E0D\u5C5E\u4E8E\u6B64\u7C7B\u522B\u7684\u6587\u4EF6\u7684\u53D1\u884C\u7248\u5BF9\u8C61\uFF08\u4F8B\u5982\uFF0C\u65E0\u6CD5\u5206\u4E3A\u5185\u6838\u548C initrd \u7684\u5BF9\u8C61\uFF09\u3002 \u57FA\u4E8E\u6CE8\u518C\u7684\u5BF9\u8C61\u4EE5\u53CA\u5404\u4E2A\u5BF9\u8C61\u4E4B\u95F4\u7684\u5173\u8054\uFF0CCobbler \u77E5\u9053\u5982\u4F55\u66F4\u6539\u6587\u4EF6\u7CFB\u7EDF\u4EE5\u53CD\u6620\u5177\u4F53\u914D\u7F6E\u3002\u56E0\u4E3A\u7CFB\u7EDF\u914D\u7F6E\u7684\u5185\u90E8\u662F\u62BD\u8C61\u7684\uFF0C\u6240\u4EE5\u60A8\u53EF\u4EE5\u4EC5\u5173\u6CE8\u60F3\u8981\u6267\u884C\u7684\u64CD\u4F5C\u3002")],-1),ql=s("h3",{id:"_2-4-3-cobbler-distro",tabindex:"-1"},[n("2.4.3 Cobbler distro "),s("a",{class:"header-anchor",href:"#_2-4-3-cobbler-distro","aria-hidden":"true"},"#")],-1),Yl=s("p",null,"\u4F7F\u7528Cobbler\u7684\u7B2C\u4E00\u6B65\u5C31\u662F\u5B9A\u4E49Distro\uFF0C\u56DE\u60F3\u4E0B\u6211\u4EEC\u6700\u65E9\u6267\u884C\u7684cobbler import\uFF0C\u5C31\u4F1A\u5E2E\u6211\u4EEC\u521B\u5EFA\u4E00\u4E2Adistro\uFF0C\u6211\u4EEC\u53EF\u4EE5\u4F7F\u7528\u4E0B\u9762\u7684\u547D\u4EE4\u8FDB\u884C\u67E5\u770B\uFF1A",-1),zl=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# cobbler distro list")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"   CentOS-7-x86_64")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),$l=s("p",null,"Cobbler\u6240\u6709\u7684\u547D\u4EE4\u90FD\u53EF\u4EE5\u4F7F\u7528help\u8FD9\u6837\u7684\u65B9\u5F0F\u83B7\u53D6\u5E2E\u52A9\u3002",-1),Xl=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# cobbler distro help")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"usage")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"=====")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"cobbler distro add")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"cobbler distro copy")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"cobbler distro edit")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"cobbler distro find")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"cobbler distro list")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"cobbler distro remove")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"cobbler distro rename")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"cobbler distro report")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Jl=s("p",null,"\u6211\u4EEC\u53EF\u4EE5\u4F7F\u7528report\u547D\u4EE4\u6765\u770Bdistro\u90FD\u5305\u542B\u54EA\u4E9B\u5185\u5BB9\u3002",-1),Wl=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# cobbler distro report")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Name                           : CentOS-7.7-x86_64")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Architecture                   : x86_64")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"TFTP Boot Files                : {}")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Breed                          : redhat")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Comment                        : ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Fetchable Files                : {}")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Initrd                         : /var/www/cobbler/ks_mirror/CentOS-7.7-x86_64/images/pxeboot/initrd.img")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Kernel                         : /var/www/cobbler/ks_mirror/CentOS-7.7-x86_64/images/pxeboot/vmlinuz")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Kernel Options                 : {}")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Kernel Options (Post Install)  : {}")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Kickstart Metadata             : {'tree': 'http://@@http_server@@/cblr/links/CentOS-7.7-x86_64'}")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Management Classes             : []")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"OS Version                     : rhel7")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Owners                         : ['admin']")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Red Hat Management Key         : <<inherit>>")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Red Hat Management Server      : <<inherit>>")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Template Files                 : {}")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  \u53EF\u4EE5\u770B\u5230distro\u5B9A\u4E49\u7684\u4EC5\u4EC5\u662F\u6211\u4EEC\u8981\u5B89\u88C5\u64CD\u4F5C\u7CFB\u7EDF\u53D1\u884C\u7248\u7684kernel\u548Cinitrd\u3002")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Ql=s("h3",{id:"_2-1-4-cobbler-profile",tabindex:"-1"},[n("2.1.4 Cobbler profile "),s("a",{class:"header-anchor",href:"#_2-1-4-cobbler-profile","aria-hidden":"true"},"#")],-1),Zl=s("p",null,"\u90A3\u4E48\u5728cobbler import\u7684\u540C\u65F6\u4E5F\u9ED8\u8BA4\u521B\u5EFA\u4E86\u4E00\u4E2A\u548Cdistro\u540C\u540D\u7684profile\uFF0C\u90A3\u4E48cobbler profile\u91CC\u9762\u5305\u62EC\u4E86distribution\u3001kickstart file\u548Crepo\u3002\u6211\u4EEC\u4E5F\u53EF\u4EE5\u628Aprofile\u7406\u89E3\u4E3A\u4E00\u4E2A\u914D\u7F6E\u96C6\u5408\uFF0C\u6BD4\u5982\u5728distro\u7684\u57FA\u7840\u4E0A\u589E\u52A0\u53EF\u4E00\u4E2Akiskstart\u6587\u4EF6\u6765\u751F\u6210\u4E00\u4E2A\u7279\u5B9A\u7684\u7CFB\u7EDF\u5B89\u88C5\u914D\u7F6E\u3002 \u6BD4\u5982\u524D\u9762\u6211\u4EEC\u591A\u6B21\u4F7F\u7528cobbler profile edit\u4E3A\u6307\u5B9A\u7684Profile\u8BBE\u7F6Ekickstart\u6587\u4EF6\u548C\u5185\u6838\u53C2\u6570\uFF0Cprofile\u7684\u540D\u79F0\u5373\u4F7F\u6211\u4EEC\u5728\u4F7F\u7528cobbler\u8FDB\u884C\u81EA\u52A8\u5316\u5B89\u88C5\u9009\u62E9\u7684\u83DC\u5355\u540D\u79F0\u3002",-1),se=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# cobbler profile report")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),ne=s("h3",{id:"_2-1-5cobbler-repo",tabindex:"-1"},[n("2.1.5Cobbler repo "),s("a",{class:"header-anchor",href:"#_2-1-5cobbler-repo","aria-hidden":"true"},"#")],-1),le=s("p",null,"Cobbler repos\u53EF\u4EE5\u5E2E\u6211\u4EEC\u7BA1\u7406yum\u4ED3\u5E93\uFF0C\u628A\u521B\u5EFA\u4F01\u4E1A\u5185\u90E8\u7684yum\u6E90\u53D8\u6210\u4E86\u4E00\u4EF6\u6781\u5176\u7B80\u5355\u7684\u5DE5\u4F5C\uFF0C\u6BD4\u5982\u901A\u5E38\u751F\u6210\u73AF\u5883\u6211\u4EEC\u60F3\u628AEPEL\u4ED3\u5E93\u540C\u6B65\u5230\u672C\u5730\uFF0C\u8FD9\u6837\u5C31\u907F\u514D\u6BCF\u6B21\u5B89\u88C5\u8F6F\u4EF6\u5305\u5360\u7528\u516C\u7F51\u8D37\u6B3E\u3002 \u6DFB\u52A0EPEL\u6E90\uFF1A",-1),ee=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# cobbler repo add --name=CentOS-7-x86_64-epel \\")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"--mirror=http://mirrors.aliyun.com/epel/7/x86_64/ --arch=x86_64 --breed=wget")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),oe=s("p",null,"\u53C2\u6570\u8BF4\u660E: --name \u4E3A\u5B89\u88C5\u6E90\u5B9A\u4E49\u4E00\u4E2A\u540D\u5B57 --arch \u6307\u5B9A\u5B89\u88C5\u6E90\u662F32\u4F4D\u8FD8\u662F64\u4F4D\u3001ia64, \u76EE\u524D\u652F\u6301\u7684\u9009\u9879\u6709: x86\u2502x86_64\u2502ia64 reposync \u64CD\u4F5C\u5F88\u91CD\u8981\uFF0C\u56E0\u4E3A\u5B83\u4F1A\u4ECE\u8FDC\u7A0B\u5B58\u50A8\u5E93\u4E2D\u590D\u5236\u6587\u4EF6\u3002\u5982\u679C\u521B\u5EFA\u4E86\u5B58\u50A8\u5E93\u5BF9\u8C61\u4F46\u672A\u8FD0\u884C reposync\uFF0C\u90A3\u4E48\u60A8\u7684\u5B58\u50A8\u5E93\u5C06\u662F\u7A7A\u7684\uFF0C\u800C\u4E14\u60A8\u7684\u5B89\u88C5\u53EF\u80FD\u4F1A\u5931\u8D25\u3002 \u6839\u636E\u9700\u8981\u540C\u6B65\u7684\u4ED3\u5E93\u5927\u5C0F\uFF0C\u6CE8\u610F\u786C\u76D8\u7A7A\u95F4\uFF0C\u7B2C\u4E00\u6B21\u540C\u6B65\u65F6\u95F4\u6BD4\u8F83\u957F\uFF0C\u5EFA\u8BAE\u653E\u5230screen\u91CC\u9762\u5141\u8BB8\u3002",-1),ae=s("p",null,"\u6DFB\u52A0repo\u5230profile \u628A\u6211\u4EEC\u81EA\u5B9A\u4E49\u7684repo\u6DFB\u52A0\u5230\u5BF9\u5E94\u7684profile\u540E\uFF0C\u90A3\u4E48\u4F7F\u7528\u5BF9\u5E94profile\u5B89\u88C5\u7684\u673A\u5668\uFF0C\u9ED8\u8BA4\u5C31\u4F1A\u6DFB\u52A0\u8BE5repo\uFF0C\u524D\u63D0\u662F\u9700\u8981\u8FDB\u884C\u8BBE\u7F6E",-1),te=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'# cobbler profile edit --name=CentOS-7-x86_64 --repos="openstack-liberty"')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# vim /etc/cobbler/settings")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"yum_post_install_mirror: 1  #\u9ED8\u8BA4\u662F\u5F00\u542F\u7684\u3002")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),ce=s("p",null,'\u6DFB\u52A0\u66F4\u65B0\u4ED3\u5E93\u6E90\u8BA1\u5212\u4EFB\u52A1 \u5982\u679C\u4F7F\u7528\u7684\u5916\u5305\u6E90\u94FE\u63A5\uFF0C\u53EF\u4EE5\u5B9A\u671F\u7684\u8FDB\u884C\u540C\u6B65\uFF0C\u653E\u5728crontab\u91CC\u9762\u6BCF\u5929\u6267\u884C\u3002 echo "0 2 0 cobbler reposync --tries=3 --no-fail" >> /var/spool/cron/root',-1),ie=s("p",null,"\u8BBE\u7F6E\u88C5\u673A\u81EA\u52A8\u8BBE\u7F6EYum \u4FEE\u6539ks\u811A\u672C\uFF0C\u589E\u52A0",-1),re=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"%post")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# Start yum configuration")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"$yum_config_stanza")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# End yum configuration")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"%end")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u8FD9\u6837\u5F00\u673A\u7684\u65F6\u5019\u5C31\u53EF\u4EE5\u8C03\u7528yum_config_stanza\u8FD9\u4E2Asnippets\u8FDB\u884C\u8BBE\u7F6E\u4E86\u3002\u7B49\u7B49\uFF0C\u8FD9\u4E2Asnippets\u662F\u4EC0\u4E48\u4E1C\u4E1C\uFF1F")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),pe=s("h3",{id:"_2-1-6-cobbler-snippets",tabindex:"-1"},[n("2.1.6 Cobbler snippets "),s("a",{class:"header-anchor",href:"#_2-1-6-cobbler-snippets","aria-hidden":"true"},"#")],-1),de=s("p",null,"snippets\u53EF\u4EE5\u8BF4\u662Fcobbler\u7BA1\u7406\u4E2D\u7684\u7CBE\u534E\u90E8\u5206\uFF0C\u5F88\u5C11\u6709\u6587\u6863\u63D0\u53CA\uFF0C\u56E0\u4E3A\u5927\u591A\u6570\u4EBA\u4F7F\u7528\u7B80\u5355\u7684cobbler\u529F\u80FD\u5DF2\u7ECF\u8DB3\u591F\u4E86\uFF0C\u5982\u679C\u4F60\u60F3\u5BF9\u5B89\u88C5\u8FC7\u7A0B\u548C\u5B89\u88C5\u540E\u8FDB\u884C\u5B9A\u5236\uFF0C\u53EF\u4EE5\u81EA\u5DF1\u7F16\u5199Snippet\u6765\u5B9E\u73B0\u3002\u73B0\u5728\u6211\u4EEC\u53EF\u4EE5\u53C2\u8003Cobbler\u81EA\u5E26\u7684kickstart\u6A21\u677F\uFF0C\u7ED9\u6211\u4EEC\u7684\u6A21\u677F\u589E\u52A0\u4E0Asnippets\u7684\u529F\u80FD",-1),Ae=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# vim /var/lib/cobbler/kickstarts/sample_end.ks")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"%post")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"$SNIPPET('log_ks_post')")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# Start yum configuration")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"$yum_config_stanza")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# End yum configuration")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"$SNIPPET('post_install_kernel_options')")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"$SNIPPET('post_install_network_config')")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"$SNIPPET('func_register_if_enabled')")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"$SNIPPET('download_config_files')")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"$SNIPPET('koan_environment')")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"$SNIPPET('redhat_register')")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"$SNIPPET('cobbler_register')")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# Enable post-install boot notification")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"$SNIPPET('post_anamon')")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# Start final steps")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"$SNIPPET('kickstart_done')")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# End final steps")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"%end")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Ce=s("p",null,"\u5C06%post\u5F00\u59CB\u5230%end\u7684\u5185\u5BB9\u590D\u5236\u4E0B\u6765\uFF0C\u7F16\u8F91\u5230 /var/lib/cobbler/kickstarts/CentOS-7.4-x86_64-Cobbler.cfg\u6587\u4EF6\u4E2D\u3002\u5728\u540E\u9762\u7684\u81EA\u52A8\u5316\u5B9E\u8DF5\u548C\u9AD8\u7EA7\u8BDD\u9898\u4E2D\uFF0C\u6211\u4EEC\u5C06\u7528\u5230\u8FD9\u4E2A\u529F\u80FD\u3002",-1),ue=s("h1",{id:"_3-cobbler\u81EA\u52A8\u5316\u5B9E\u8DF5",tabindex:"-1"},[n("3 Cobbler\u81EA\u52A8\u5316\u5B9E\u8DF5 "),s("a",{class:"header-anchor",href:"#_3-cobbler\u81EA\u52A8\u5316\u5B9E\u8DF5","aria-hidden":"true"},"#")],-1),ye=s("p",null,"\u5728\u4E86\u89E3\u4E86Cobbler\u7684\u57FA\u672C\u4F7F\u7528\u548CCobbler\u7684\u5404\u79CD\u7EC4\u4EF6\u4E4B\u540E\uFF0C\u5728\u751F\u4EA7\u73AF\u5883\u4E2D\uFF0C\u6211\u4EEC\u5C31\u53EF\u4EE5\u7075\u6D3B\u7684\u8FD0\u7528Cobbler\u6765\u5B8C\u6210\u5F88\u591A\u81EA\u52A8\u5316\u7684\u5DE5\u4F5C\u3002",-1),he=s("h2",{id:"_3-1-cobbler\u6784\u5EFA\u79C1\u6709yum\u4ED3\u5E93",tabindex:"-1"},[n("3.1 Cobbler\u6784\u5EFA\u79C1\u6709YUM\u4ED3\u5E93 "),s("a",{class:"header-anchor",href:"#_3-1-cobbler\u6784\u5EFA\u79C1\u6709yum\u4ED3\u5E93","aria-hidden":"true"},"#")],-1),_e=s("p",null,"Cobbler\u9664\u4E86\u7528\u6765\u8FDB\u884C\u81EA\u52A8\u5316\u5B89\u88C5\u4E4B\u5916\uFF0C\u6700\u65B9\u4FBF\u7684\u4E00\u4E2A\u529F\u80FD\u5C31\u662F\u505AYUM\u4ED3\u5E93\u4E86\u3002\u4ECE\u6B64\u518D\u4E5F\u4E0D\u7528\u62C5\u5FC3\uFF0C\u5728\u670D\u52A1\u5668\u65E0\u6CD5\u4E0A\u5916\u7F51\u7684\u60C5\u51B5\u4E0B\uFF0C\u5982\u4F55\u4F7F\u7528\u5F00\u6E90\u5DE5\u5177\u4E86\u3002\u800C\u4E14\u5982\u679C\u4F60\u9700\u8981\uFF0CCobbler\u53EF\u4EE5\u5E2E\u4F60\u8FDB\u884C\u540C\u6B65\uFF0C\u53CA\u65F6\u7684\u548C\u5B98\u65B9\u7684\u6E90\u4FDD\u6301\u4E00\u81F4\u3002",-1),De=s("h3",{id:"_3-1-1-\u6784\u5EFAopenstack\u79C1\u6709\u4ED3\u5E93",tabindex:"-1"},[n("3.1.1 \u6784\u5EFAOpenStack\u79C1\u6709\u4ED3\u5E93 "),s("a",{class:"header-anchor",href:"#_3-1-1-\u6784\u5EFAopenstack\u79C1\u6709\u4ED3\u5E93","aria-hidden":"true"},"#")],-1),ge=s("p",null,"\u6DFB\u52A0OpenStack\u6E90\uFF1A",-1),me=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# cobbler repo add --name=openstack-queens-x86_64 \\")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}}," --mirror=http://mirrors.aliyun.com/centos/7.4.1708/cloud/x86_64/openstack-queens/ \\")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}}," --arch=x86_64 --breed=yum")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),be=s("p",null,[n("\u5BF9\u4E8E yum \u5B58\u50A8\u5E93 URL\uFF0CCobbler \u63A5\u53D7 "),s("a",{href:"http://xn--ftp-3y3b//%E3%80%81rsync://%E3%80%81%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E8%B7%AF%E5%BE%84%E5%92%8C",target:"_blank",rel:"noreferrer"},"http://\u3001ftp://\u3001rsync://\u3001\u6587\u4EF6\u7CFB\u7EDF\u8DEF\u5F84\u548C"),n(" ssh \u4F4D\u7F6E\uFF08\u901A\u8FC7\u4F7F\u7528\u57FA\u4E8E\u79C1\u94A5\u7684\u8EAB\u4EFD\u9A8C\u8BC1\uFF09\u3002")],-1),ke=s("ul",null,[s("li",null,"http\u534F\u8BAE \u65B9\u5F0F\uFF1A\u53EA\u80FD\u62C9\u53D6\u5230\u67D0\u4E00\u8F6F\u4EF6\u7684\u6700\u65B0\u7248\u672C\uFF0C\u65E0\u6CD5\u62C9\u53D6\u6240\u6709\u7248\u672C\u3002"),s("li",null,"rsync\u534F\u8BAE\u65B9\u5F0F\uFF1A\u955C\u50CF\u65B9\u5F0F\uFF0C\u53EF\u4EE5\u62C9\u53D6\u63D0\u4F9B rsync \u670D\u52A1\u76EE\u5F55\u4E0B\u7684\u6240\u6709\u76EE\u5F55\u548C\u6587\u4EF6\u3002")],-1),ve=s("p",null,"\u540C\u6B65\u4ED3\u5E93",-1),xe=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# cobbler reposync")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),fe=s("blockquote",null,[s("p",null,"\u63D0\u793A\uFF1AOpenStack Queens\u7684\u6E90\u540C\u6B65\u5B8C\u6210\u5927\u7EA6\u5728900M\u5DE6\u53F3\u3002")],-1),Se=s("h3",{id:"_3-1-2-\u6784\u5EFAzabbix\u79C1\u6709\u4ED3\u5E93",tabindex:"-1"},[n("3.1.2 \u6784\u5EFAZabbix\u79C1\u6709\u4ED3\u5E93 "),s("a",{class:"header-anchor",href:"#_3-1-2-\u6784\u5EFAzabbix\u79C1\u6709\u4ED3\u5E93","aria-hidden":"true"},"#")],-1),Ee=s("p",null,"\u7531\u4E8EZabbix\u5B98\u65B9\u4E0D\u652F\u6301rsync\u7684\u65B9\u5F0F\u540C\u6B65\uFF0C\u6240\u4EE5\u53EA\u80FD\u4F7F\u7528http\u7684\u65B9\u5F0F\u540C\u6B65\u6700\u65B0\u7248\u672C\u7684\u6E90\u3002",-1),Pe=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# cobbler repo add --name=zabbix-3.4-rhel7-x86_64  \\")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"--mirror=http://repo.zabbix.com/zabbix/3.4/rhel/7/x86_64/")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# cobbler repo list")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"   zabbix-3.4-rhel7-x86_64")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Ne=s("p",null,"\u540C\u6B65\u4ED3\u5E93",-1),Re=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# cobbler reposync")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Te=s("blockquote",null,[s("p",null,"\u63D0\u793A\uFF1AZabbix 3.4\u7248\u672C\u7684\u6E90\u540C\u6B65\u5B8C\u6210\u5927\u7EA6\u572820M\u5DE6\u53F3\u3002")],-1),Ie=s("h3",{id:"_3-1-3-\u6784\u5EFAsaltstack\u79C1\u6709\u4ED3\u5E93",tabindex:"-1"},[n("3.1.3 \u6784\u5EFASaltStack\u79C1\u6709\u4ED3\u5E93 "),s("a",{class:"header-anchor",href:"#_3-1-3-\u6784\u5EFAsaltstack\u79C1\u6709\u4ED3\u5E93","aria-hidden":"true"},"#")],-1),Oe=s("p",null,"\u7531\u4E8ESaltStack\u7684\u56FD\u5916\u6E90\u76F8\u5BF9\u6BD4\u8F83\u6162\uFF0C\u6240\u4EE5\u751F\u4EA7\u4F1A\u4F7F\u7528Cobbler\u6784\u5EFA\u5185\u90E8\u6E90\u3002",-1),Me=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# cobbler repo add --name=saltstack-2018.3-rhel7-x86_64 \\")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}}," --mirror=https://repo.saltstack.com/yum/redhat/7/x86_64/2018.3")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),we=s("p",null,"\u540C\u6B65\u4ED3\u5E93",-1),Ke=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# cobbler reposync")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Le=s("blockquote",null,[s("p",null,"\u63D0\u793A\uFF1ASaltStack 2018.3\u7248\u672C\u7684\u6E90\u540C\u6B65\u5B8C\u6210\u5927\u7EA6\u572850M\u5DE6\u53F3\u3002")],-1),Ue=s("h3",{id:"_3-1-4-\u5C06\u79C1\u6709\u4ED3\u5E93\u6DFB\u52A0\u5230profile",tabindex:"-1"},[n("3.1.4 \u5C06\u79C1\u6709\u4ED3\u5E93\u6DFB\u52A0\u5230Profile "),s("a",{class:"header-anchor",href:"#_3-1-4-\u5C06\u79C1\u6709\u4ED3\u5E93\u6DFB\u52A0\u5230profile","aria-hidden":"true"},"#")],-1),je=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# cobbler repo list")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"   openstack-queens-rhel7-x86_64")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"   saltstack-2018.3-rhel7-x86_64")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"   zabbix-3.4-rhel7-x86_64")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Ge=s("p",null,"\u5C06\u81EA\u5B9A\u4E49\u7684Repo\u6DFB\u52A0\u5230\u5BF9\u5E94\u7684Profile\u4E4B\u540E\uFF0C\u6211\u4EEC\u4F7F\u7528\u8BE5Profile\u5B89\u88C5\u5B8C\u6BD5\u7684\u865A\u62DF\u673A\u9ED8\u8BA4\u5C31\u4F1A\u589E\u52A0\u8FD9\u4E9B\u4ED3\u5E93\u7684\u914D\u7F6E\u3002 \u63D0\u793A\uFF1A\u5FC5\u987B\u6267\u884C\u5B8C\u6BD5reposync\u4E4B\u540E\uFF0C\u624D\u80FD\u6DFB\u52A0\u5230Profile\u3002\u591A\u4E2Arepo\u4E4B\u95F4\u4F7F\u7528\u7A7A\u683C\u5206\u9694\u3002",-1),He=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# cobbler profile edit --name CentOS-7.4-x86_64 \\")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'--repos="openstack-queens-rhel7-x86_64 saltstack-2018.3-rhel7-x86_64 zabbix-3.4-rhel7-x86_64"')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Fe=s("p",null,"\u4F7F\u7528Profile CentOS-7.4-x86_64\u521B\u5EFA\u51FA\u6765\u7684\u865A\u62DF\u673A\u90FD\u4F1A\u6709\u4E00\u4E2Acobbler-config.repo\u6587\u4EF6",-1),Ve=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@localhost ~]# cd /etc/yum.repos.d/")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@localhost yum.repos.d]# cat cobbler-config.repo ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[openstack-queens-rhel7-x86_64]")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"name=openstack-queens-rhel7-x86_64")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"baseurl=http://192.168.56.11/cobbler/repo_mirror/openstack-queens-rhel7-x86_64")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"enabled=1")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"priority=99")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"gpgcheck=0")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[saltstack-2018.3-rhel7-x86_64]")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"name=saltstack-2018.3-rhel7-x86_64")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"baseurl=http://192.168.56.11/cobbler/repo_mirror/saltstack-2018.3-rhel7-x86_64")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"enabled=1")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"priority=99")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"gpgcheck=0")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[zabbix-3.4-rhel7-x86_64]")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"name=zabbix-3.4-rhel7-x86_64")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"baseurl=http://192.168.56.11/cobbler/repo_mirror/zabbix-3.4-rhel7-x86_64")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"enabled=1")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"priority=99")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"gpgcheck=0")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Be=s("h2",{id:"_3-2-\u4F7F\u7528cobbler\u81EA\u52A8\u5316\u5B89\u88C5esxi",tabindex:"-1"},[n("3.2 \u4F7F\u7528Cobbler\u81EA\u52A8\u5316\u5B89\u88C5ESXi "),s("a",{class:"header-anchor",href:"#_3-2-\u4F7F\u7528cobbler\u81EA\u52A8\u5316\u5B89\u88C5esxi","aria-hidden":"true"},"#")],-1),qe=s("ol",null,[s("li",null,"\u6302\u8F7DESXI\u955C\u50CF\u5E76\u5BFC\u5165")],-1),Ye=s("p",null,"\u9996\u5148\u4F7F\u7528Vmware Workstation\u6302\u8F7D\u5BF9\u5E94\u7684ESXi\u955C\u50CF\uFF0C\u8FD9\u91CC\u4F7F\u7528\u76846.5\u7248\u672C\u3002",-1),ze=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# mount /dev/cdrom /mnt/")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"mount: /dev/sr0 is write-protected, mounting read-only")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# cobbler import --path=/mnt --name=ESXi6.5 --arch=x86_64")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),$e=s("ol",null,[s("li",null,"\u4F1A\u81EA\u52A8\u751F\u6210distros\u548Cprofiles")],-1),Xe=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# cobbler list")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"distros:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"   CentOS-7.4-x86_64")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"   ESXi6.5-x86_64")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"profiles:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"   CentOS-7.4-x86_64")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"   ESXi6.5-x86_64")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Je=s("ol",null,[s("li",null,"\u67E5\u770Bkickstart\u6587\u4EF6")],-1),We=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# cobbler profile report --name ESXi6.5-x86_64")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Name                           : ESXi6.5-x86_64")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"TFTP Boot Files                : {}")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Comment                        : ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"DHCP Tag                       : default")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Distribution                   : ESXi6.5-x86_64")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Enable gPXE?                   : 0")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Enable PXE Menu?               : 1")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Fetchable Files                : {}")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Kernel Options                 : {}")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Kernel Options (Post Install)  : {}")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Kickstart                      : /var/lib/cobbler/kickstarts/sample_esxi6.ks")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Kickstart Metadata             : {}")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Management Classes             : []")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Management Parameters          : <<inherit>>")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Name Servers                   : []")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Name Servers Search Path       : []")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Owners                         : ['admin']")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Parent Profile                 : ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Internal proxy                 : ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Red Hat Management Key         : <<inherit>>")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Red Hat Management Server      : <<inherit>>")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Repos                          : []")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Server Override                : <<inherit>>")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Template Files                 : {}")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Virt Auto Boot                 : 1")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Virt Bridge                    : xenbr0")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Virt CPUs                      : 1")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Virt Disk Driver Type          : raw")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Virt File Size(GB)             : 5")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Virt Path                      : ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Virt RAM (MB)                  : 512")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Virt Type                      : kvm")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Qe=s("ol",null,[s("li",null,"\u4F7F\u7528Cobbler\u5B89\u88C5ESXi")],-1),Ze=s("p",null,"\u9996\u5148\u9700\u8981\u540C\u6B65\u4E00\u4E0B",-1),so=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# cobbler sync")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),no=s("ol",null,[s("li",null,"\u521B\u5EFA\u865A\u62DF\u673A\u8FDB\u884C\u5B9E\u9A8C\u3002")],-1),lo=s("h2",{id:"_3-3-\u5B9A\u5236\u5316\u670D\u52A1\u5668\u5B89\u88C5",tabindex:"-1"},[n("3.3 \u5B9A\u5236\u5316\u670D\u52A1\u5668\u5B89\u88C5 "),s("a",{class:"header-anchor",href:"#_3-3-\u5B9A\u5236\u5316\u670D\u52A1\u5668\u5B89\u88C5","aria-hidden":"true"},"#")],-1),eo=s("h3",{id:"_3-3-1-\u81EA\u52A8\u5316\u5B89\u88C5\u6D41\u7A0B\u68B3\u7406",tabindex:"-1"},[n("3.3.1 \u81EA\u52A8\u5316\u5B89\u88C5\u6D41\u7A0B\u68B3\u7406 "),s("a",{class:"header-anchor",href:"#_3-3-1-\u81EA\u52A8\u5316\u5B89\u88C5\u6D41\u7A0B\u68B3\u7406","aria-hidden":"true"},"#")],-1),oo=s("ul",null,[s("li",null,"\u91C7\u8D2D\u8BBE\u5907\u9001\u5230\u673A\u623F\u3002"),s("li",null,"\u673A\u623F\u540C\u4E8B\uFF0C\u5F00\u673A\uFF0C\u63D2\u7535\u9A8C\u6536\uFF0C\u9A8C\u6536\u5B8C\u6BD5\u3002"),s("li",null,"\u8FDB\u884CCMDB\u8D44\u4EA7\u5F55\u5165\u3002\u63D0\u4F9B\u673A\u5668\u4F4D\u7F6E\u548CMAC\u5730\u5740\u5217\u8868\uFF08\u4F9B\u5E94\u5546\u4E5F\u53EF\u4EE5\u63D0\u4F9B\uFF09"),s("li",null,"\u8C03\u7528IPMI\u5F00\u673A\uFF0CCobbler API\u5B89\u88C5\u64CD\u4F5C\u7CFB\u7EDF\u3002"),s("li",null,"\u5B89\u88C5\u5B8C\u6BD5\uFF0C\u542F\u52A8\u540E\uFF0C\u81EA\u52A8\u542F\u52A8SaltStack\u3002\u7136\u540E\u5269\u4E0B\u7684\u4EE5SaltStack\u4E3A\u6838\u5FC3\u4E86\u3002")],-1),ao=s("p",null,"\u8BF4\u660E\uFF1A \u670D\u52A1\u5668\u7F51\u5361\u5FC5\u987B\u652F\u6301PXE\u529F\u80FD \u5B9A\u5236\u5316 \u81F3\u5C11\u6709\u8FD9\u4E48\u51E0\u4E2A\uFF1A\u7F51\u7EDC\u914D\u7F6E\uFF0CHostname \u8FD9\u4E9B \u6CE8\u610F\uFF1A \u5982\u679C\u4E0D\u5B9A\u5236\u5316\uFF0C\u7F51\u5361\u901A\u8FC7PXE\u542F\u52A8\u540E\uFF0C\u4F1A\u51FA\u73B0\u4E00\u4E2A\u83DC\u5355\u4F9B\u4EBA\u9009\u62E9\u7528\u54EA\u4E2A\u914D\u7F6E\uFF08\u5176\u5B9E\u5C31\u662FProfile\u7684\u540D\u5B57\uFF09\u800C\u4E14\u6BCF\u4E2A\u5B89\u88C5\u6E90 \u90FD\u6709\u81EA\u5DF1\u7684\u9ED8\u8BA4KS\u6587\u4EF6\uFF0C\u8D85\u8FC7\u65F6\u95F4\u540E\uFF0C\u4F1A\u6307\u5B9A\u4F7F\u7528\u9ED8\u8BA4\u7684 KS\u6587\u4EF6 \u8FDB\u884C\u5B89\u88C5\u672C\u6587\u4E3B\u8981\u8BA8\u8BBA \u81EA\u52A8\u5316\u4E00\u952E\u90E8\u7F72\uFF0C\u6240\u4EE5\u5FC5\u987B\u8981\u505A\u5B9A\u5236\u5316 \u8FD9\u90E8\u5206\u7684\u64CD\u4F5C \u4E3B\u8981\u901A\u8FC7 cobbler system \u6765\u5B9E\u73B0",-1),to=s("h3",{id:"_3-3-2-cobbler\u83B7\u53D6\u5B89\u88C5\u8FDB\u5EA6",tabindex:"-1"},[n("3.3.2 Cobbler\u83B7\u53D6\u5B89\u88C5\u8FDB\u5EA6 "),s("a",{class:"header-anchor",href:"#_3-3-2-cobbler\u83B7\u53D6\u5B89\u88C5\u8FDB\u5EA6","aria-hidden":"true"},"#")],-1),co=s("p",null,"\u540E\u9762\u6709\u7AE0\u8282\u4ECB\u7ECD\u5982\u4F55\u901A\u8FC7Cobbler API\u6765\u8C03\u7528Cobbler\uFF0C\u5728\u5F00\u59CB\u8FDB\u884C\u7CFB\u7EDF\u5B9A\u5236\u5B89\u88C5\u4E4B\u524D\uFF0C\u6211\u4EEC\u53EF\u80FD\u6709\u4E00\u4E2A\u9700\u6C42\u5C31\u662F\u9700\u8981\u60F3\u77E5\u9053\u5B89\u88C5\u8FDB\u5EA6\u3002\u9488\u5BF9\u4E8E\u57FA\u4E8ERedhat\u7684Linux\u53D1\u884C\u7248\u7684\u7CFB\u7EDF\u5B89\u88C5\u7A0B\u5E8F\u53EB\u505AAnaconda\uFF0CCobbler\u63D0\u4F9B\u4E86\u5BF9Anaconda\u7684\u76D1\u63A7\uFF0C\u4ECE\u800C\u83B7\u53D6\u5B89\u88C5\u8FDB\u5EA6\u3002",-1),io=s("ol",null,[s("li",null,[s("p",null,"\u5F00\u542FAnaconda\u76D1\u63A7"),s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# vim /etc/cobbler/settings")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"anamon_enabled: 1")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])])])],-1),ro=s("p",null,"\u91CD\u542FCobbler",-1),po=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# systemctl restart cobblerd")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Ao=s("ol",null,[s("li",null,"\u67E5\u770BKickstart\u6587\u4EF6\u786E\u4FDD\u5BF9\u5E94\u7684snippet\u5B58\u5728 ``` %pre $SNIPPET('pre_anamon')")],-1),Co=s("p",null,"%post $SNIPPET('post_anamon')",-1),uo=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"3. \u8FDB\u884C\u7CFB\u7EDF\u5B89\u88C5\u540E\uFF0C\u4F1A\u5728/var/log/cobbler/anamon/\u4E0B\u521B\u5EFA\u5BF9\u5E94\u7684System\u76EE\u5F55")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),yo=s("p",null,"[root@linux-node1 ~]# tree /var/log/cobbler/anamon/ /var/log/cobbler/anamon/ \u2514\u2500\u2500 cobbler-api-test \u251C\u2500\u2500 anaconda.log \u251C\u2500\u2500 boot.log \u251C\u2500\u2500 dmesg \u251C\u2500\u2500 ks-post.log \u251C\u2500\u2500 ks-pre.log \u251C\u2500\u2500 messages \u251C\u2500\u2500 program.log \u251C\u2500\u2500 storage.log \u2514\u2500\u2500 sys.log",-1),ho=s("p",null,"1 directory, 9 files",-1),_o=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"### 3.3.3 Cobbler system\u5B9A\u5236\u5B89\u88C5")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Cobbler system\u662FCobbler\u63D0\u4F9B\u7684\u53EF\u4EE5\u7528\u6765\u8FDB\u884C\u7CFB\u7EDF\u5B9A\u5236\u7684\u6A21\u5757\uFF0C\u6211\u4EEC\u53EF\u4EE5\u901A\u8FC7Cobbler system\u6765\u5B9A\u5236\u5F85\u5B89\u88C5\u670D\u52A1\u5668\u7684IP\u5730\u5740\u3001\u4E3B\u673A\u540D\u7B49\u64CD\u4F5C\u3002")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"1. \u6DFB\u52A0\u4E00\u4E2A\u4E3B\u673A")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Do=s("p",null,[n("[root@linux-node1 ~]# cobbler system add --name=linux-node3 --mac=00:50:56:3F:84:4F \\ --profile=CentOS-7.4-x86_64 --ip-address=192.168.56.110 --subnet=255.255.255.0 \\ --gateway=192.168.56.2 --interface=eth0 --static=1 --hostname="),s("a",{href:"http://new.devopsedu.com",target:"_blank",rel:"noreferrer"},"new.devopsedu.com"),n(' \\ --name-servers="192.168.56.2" \\ --kickstart=/var/lib/cobbler/kickstarts/CentOS-7.4-x86_64-Cobbler.cfg')],-1),go=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"- --name=linux-node3   #\u8BBE\u7F6E\u4E00\u4E2A\u4E3B\u673A\u540D\u79F0")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"- --mac=08:00:27:67:A0:BB  #\u8BBE\u7F6E\u5BF9\u5E94\u7684MAC\u5730\u5740")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"- --profile=CentOS-7.4-x86_64  #\u8BBE\u7F6E\u9700\u8981\u5B89\u88C5\u7684\u64CD\u4F5C\u7CFB\u7EDF")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"- --ip-address=192.168.56.13 #\u8BBE\u7F6E\u4E00\u4E2A\u9759\u6001IP\u5730\u5740")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"- --subnet=255.255.255.0    #\u8BBE\u7F6E\u5B50\u7F51\u63A9\u7801")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"- --gateway=192.168.56.2    #\u8BBE\u7F6E\u7F51\u5173")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"- --interface=eth0 \\          \u8BBE\u7F6E\u7F51\u5361")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"- --static=1                 \u8BBE\u7F6E\u9759\u6001IP")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"- --dns-name=linux-node3.example.com  #\u8BBE\u7F6Edns name")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"- --hostname=linux-node3.example.com  #\u8BBE\u7F6E\u4E3B\u673A\u540D")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"- --netboot-enabled=true #\u8BBE\u7F6E\u7F51\u7EDC\u542F\u52A8")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'- --name-servers="192.168.56.2" #\u8BBE\u7F6EDNS\u57DF\u540D\u670D\u52A1\u5668')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"2. \u67E5\u770B\u4E3B\u673A")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),mo=s("p",null,"[root@linux-node1 ~]# cobbler system list linux-node3 ``` \u4E0B\u9762\uFF0C\u6211\u4EEC\u6765\u542F\u52A8\u865A\u62DF\u673A\uFF0C\u8FDB\u884C\u81EA\u52A8\u5316\u5B89\u88C5\uFF0C\u4E0D\u518D\u51FA\u73B0\u9009\u62E9\u7684\u83DC\u5355\uFF0C\u76F4\u63A5\u5B89\u88C5\u4F60\u5236\u5B9A\u7684\u64CD\u4F5C\u7CFB\u7EDF\u3002",-1),bo=s("h1",{id:"_4-cobbler\u9AD8\u7EA7\u8BDD\u9898",tabindex:"-1"},[n("4 Cobbler\u9AD8\u7EA7\u8BDD\u9898 "),s("a",{class:"header-anchor",href:"#_4-cobbler\u9AD8\u7EA7\u8BDD\u9898","aria-hidden":"true"},"#")],-1),ko=s("p",null,"\u5728\u5B9E\u9645\u7684\u5DE5\u4F5C\u73AF\u5883\u4E2D\uFF0CCobbler\u8FD8\u6709\u5F88\u591A\u9AD8\u7EA7\u7684\u5E94\u7528\u53EF\u4EE5\u5E2E\u52A9\u6211\u4EEC\u66F4\u5FEB\u7684\u8FDB\u884C\u64CD\u4F5C\u7CFB\u7EDF\u7684\u90E8\u7F72\u5DE5\u4F5C\u3002\u4F8B\u5982\u7F51\u5361\u7ED1\u5B9A\u3001\u7535\u6E90\u7BA1\u7406\u548CCobbler API\u7B49\u3002",-1),vo=s("h2",{id:"_4-1-\u81EA\u5B9A\u4E49\u7269\u7406\u7F51\u5361bonding",tabindex:"-1"},[n("4.1 \u81EA\u5B9A\u4E49\u7269\u7406\u7F51\u5361bonding "),s("a",{class:"header-anchor",href:"#_4-1-\u81EA\u5B9A\u4E49\u7269\u7406\u7F51\u5361bonding","aria-hidden":"true"},"#")],-1),xo=s("ol",null,[s("li",null,"\u6DFB\u52A0\u4E00\u53F0\u4E3B\u673Alinux-node4")],-1),fo=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# cobbler system add --name=linux-node4 --profile=CentOS-7.7-x86_64 \\")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}}," --hostname=new.devopsedu.com \\")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},' --name-servers="192.168.56.2" \\')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}}," --kickstart=/var/lib/cobbler/kickstarts/CentOS-7.7-x86_64-Cobbler.cfg")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),So=s("ol",null,[s("li",null,"\u6DFB\u52A0bonding\u7F51\u5361")],-1),Eo=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# cobbler system edit --name=linux-node4 --interface=eth0 \\")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}}," --mac=00:50:56:27:F0:07 --interface-type=bond_slave --interface-master=bond0")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Po=s("ol",null,[s("li",null,"\u6DFB\u52A0bonding\u7F51\u5361")],-1),No=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# cobbler system edit --name=linux-node4 --interface=eth1 \\")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}}," --mac=00:50:56:36:09:66 --interface-type=bond_slave --interface-master=bond0")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Ro=s("ol",null,[s("li",null,"\u8BBE\u7F6E\u7ED1\u5B9A\u7F51\u5361")],-1),To=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# cobbler system edit --name=linux-node4 --interface=bond0 \\")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},' --interface-type=bond --bonding-opts="miimon=100 mode=1" \\')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}}," --ip-address=192.168.56.111 --subnet=255.255.255.0 --gateway=192.168.56.2 --static=1")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Io=s("p",null,"\u597D\u7684\uFF0C\u4E07\u4E8B\u5177\u5907\uFF0C\u5C31\u5DEE\u5F00\u673A\u5B89\u88C5\u64CD\u4F5C\u7CFB\u7EDF\u4E86\u3002\u7B49\u7B49\uFF0C\u600E\u4E48\u5F00\u673A\u5462\uFF1F\u65E2\u7136\u662F\u81EA\u52A8\u5316\u5B89\u88C5\uFF0C\u6253\u7535\u8BDD\u8BA9\u673A\u623F\u503C\u73ED\u4EBA\u5458\u5E2E\u6211\u4EEC\u5F00\u673A\u5F53\u7136\u662F\u4E0D\u5408\u9002\u7684\uFF0C\u8FD8\u8BB0\u5F97IPMI\u5417\uFF0C\u6211\u4EEC\u53EF\u4EE5\u4F7F\u7528IPMI\u6765\u8FDB\u884C\u7535\u6E90\u7BA1\u7406\u3002",-1),Oo=s("ol",null,[s("li",null,"\u7F51\u5361\u7ED1\u5B9A\u540E\u7684\u6548\u679C")],-1),Mo=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@new ~]# cat /proc/net/bonding/bond0 ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Ethernet Channel Bonding Driver: v3.7.1 (April 27, 2011)")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Bonding Mode: fault-tolerance (active-backup)")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Primary Slave: None")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Currently Active Slave: eth0")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"MII Status: up")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"MII Polling Interval (ms): 100")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Up Delay (ms): 0")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Down Delay (ms): 0")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Slave Interface: eth0")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"MII Status: up")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Speed: 1000 Mbps")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Duplex: full")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Link Failure Count: 0")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Permanent HW addr: 00:50:56:27:f0:07")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Slave queue ID: 0")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Slave Interface: eth1")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"MII Status: up")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Speed: 1000 Mbps")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Duplex: full")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Link Failure Count: 0")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Permanent HW addr: 00:50:56:36:09:66")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Slave queue ID: 0")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),wo=s("h2",{id:"_4-2-cobbler\u7535\u6E90\u7BA1\u7406",tabindex:"-1"},[n("4.2 Cobbler\u7535\u6E90\u7BA1\u7406 "),s("a",{class:"header-anchor",href:"#_4-2-cobbler\u7535\u6E90\u7BA1\u7406","aria-hidden":"true"},"#")],-1),Ko=s("p",null,"\u8981\u7BA1\u7406\u670D\u52A1\u5668\u7684\u7535\u6E90\uFF0C\u4F60\u53EF\u4EE5\u76F4\u63A5\u4F7F\u7528IPMI\u547D\u4EE4\u8FDB\u884C\uFF0C\u4E5F\u53EF\u4EE5\u4F7F\u7528cobbler\u95F4\u63A5\u7684\u8C03\u7528IPMI\u8FDB\u884C\u64CD\u4F5C\u3002\u9ED8\u8BA4\u60C5\u51B5\u4E0BCobbler\u4F7F\u7528IPMI\u8FDB\u884C\u7535\u6E90\u7BA1\u7406\uFF0C\u6211\u4EEC\u53EF\u4EE5\u5728cobbler\u7684settings\u914D\u7F6E\u770B\u5230\u4EE5\u4E0B\u914D\u7F6E\u3002",-1),Lo=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# vim /etc/cobbler/settings")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"power_management_default_type: 'ipmitool'")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'power_template_dir: "/etc/cobbler/power"')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# cobbler system edit --name=linux-node3 --power-address=192.168.0.21 --power-type='ipmilan' --power-user=ipmi --power-pass=ipmi")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Uo=s("p",null,"\u670D\u52A1\u5668\u7535\u6E90\u7BA1\u7406\uFF1A",-1),jo=s("ul",null,[s("li",null,"cobbler system poweroff"),s("li",null,"cobbler system poweron"),s("li",null,"cobbler system powerstatus"),s("li",null,"cobbler system reboot")],-1),Go=s("p",null,"\u91CD\u542F\u4ECEPXE\u5F15\u5BFC\u542F\u52A8\uFF0C\u5E76\u6307\u5B9A\u5B89\u88C5\u7684\u64CD\u4F5C\u7CFB\u7EDF\u914D\u7F6E\uFF0C\u5982\u4E0B\u547D\u4EE4\uFF0C",-1),Ho=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@log-node1 ~]# cobbler system edit  --name=host-188116  --netboot-enabled=1 --profile=centos5.8-x86_64")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@log-node1 ~]# cobbler reposync")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Fo=s("h2",{id:"_4-3-cobbler-api\u4F7F\u7528",tabindex:"-1"},[n("4.3 Cobbler API\u4F7F\u7528 "),s("a",{class:"header-anchor",href:"#_4-3-cobbler-api\u4F7F\u7528","aria-hidden":"true"},"#")],-1),Vo=s("ol",null,[s("li",null,[s("p",null,"\u8FDE\u63A5Cobbler"),s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# cat cobbler.py ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#!/usr/bin/env python")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"import xmlrpclib")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'server = xmlrpclib.Server("http://192.168.56.11/cobbler_api")')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"print server.get_distros()")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"print server.get_profiles()")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"print server.get_systems()")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"print server.get_images()")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"print server.get_repos()")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])])]),s("li",null,[s("p",null,"\u767B\u5F55Cobbler")])],-1),Bo=s("p",null,"\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u4E0D\u7528\u767B\u5F55Cobbler\u5C31\u53EF\u4EE5\u83B7\u53D6\u5230Cobbler\u7684\u4FE1\u606F\uFF0C\u4F46\u662F\u5982\u679C\u9700\u8981\u8FDB\u884C\u64CD\u4F5C\uFF0C\u5C31\u9700\u8981\u767B\u5F55\u3002\u4F7F\u7528\u7528\u6237\u540D\u548C\u5BC6\u7801\u767B\u5F55\u540E\uFF0CCobbler\u4F1A\u8FD4\u56DE\u4E00\u4E2Atoken\u4EE4\u724C\uFF0C\u540E\u9762\u7684\u64CD\u4F5C\uFF0C\u6211\u4EEC\u8C03\u7528\u4EFB\u4F55\u4E00\u4E2ACobbler\u7684\u65B9\u6CD5\uFF0C\u90FD\u9700\u8981\u5C06token\u4F5C\u4E3A\u6700\u540E\u4E00\u4E2A\u53C2\u6570\u3002",-1),qo=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# cat cobbler.py ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#!/usr/bin/env python")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"import xmlrpclib")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'server = xmlrpclib.Server("http://192.168.56.11/cobbler_api")')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"print server.get_distros()")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"print server.get_profiles()")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"print server.get_systems()")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"print server.get_images()")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"print server.get_repos()")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'token = server.login("cobbler","devopsedu.com")')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"print(token)")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u4E00\u4E2A\u6DFB\u52A0\u4E3B\u673A\u7684\u4F8B\u5B50")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#!/usr/bin/env python ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# -*- coding: utf-8 -*-")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"import xmlrpclib ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"class CobblerAPI(object):")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    def __init__(self,url,user,password):")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        self.cobbler_user= user")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        self.cobbler_pass = password")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        self.cobbler_url = url")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    def add_system(self,hostname,ip_add,mac_add,profile):")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        '''")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        Add Cobbler System Infomation")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        '''")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        ret = {")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'            "result": True,')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'            "comment": [],')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        }")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        #get token")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        remote = xmlrpclib.Server(self.cobbler_url) ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        token = remote.login(self.cobbler_user,self.cobbler_pass) ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        #add system")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        system_id = remote.new_system(token) ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'        remote.modify_system(system_id,"name",hostname,token) ')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'        remote.modify_system(system_id,"hostname",hostname,token) ')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        remote.modify_system(system_id,'modify_interface', { ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'            "macaddress-eth0" : mac_add, ')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'            "ipaddress-eth0" : ip_add, ')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'            "dnsname-eth0" : hostname, ')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        }, token) ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'        remote.modify_system(system_id,"profile",profile,token) ')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        remote.save_system(system_id, token) ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        try:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"            remote.sync(token)")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        except Exception as e:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"            ret['result'] = False")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"            ret['comment'].append(str(e))")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        return ret")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"def main():")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'    cobbler = CobblerAPI("http://192.168.56.11/cobbler_api","cobbler","devopsedu.com")')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    ret = cobbler.add_system(hostname='cobbler-api-test',ip_add='192.168.56.111',mac_add='00:50:56:25:C2:AA',profile='CentOS-7.4-x86_64')")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    print ret")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"if __name__ == '__main__':")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    main()")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Yo=s("h1",{id:"\u7B2C\u4E8C\u90E8\u5206-kvm\u548Copenstack\u57FA\u7840",tabindex:"-1"},[n("\u7B2C\u4E8C\u90E8\u5206 KVM\u548COpenStack\u57FA\u7840 "),s("a",{class:"header-anchor",href:"#\u7B2C\u4E8C\u90E8\u5206-kvm\u548Copenstack\u57FA\u7840","aria-hidden":"true"},"#")],-1),zo=s("h1",{id:"\u4E91\u8BA1\u7B97\u6982\u8FF0",tabindex:"-1"},[n("\u4E91\u8BA1\u7B97\u6982\u8FF0 "),s("a",{class:"header-anchor",href:"#\u4E91\u8BA1\u7B97\u6982\u8FF0","aria-hidden":"true"},"#")],-1),$o=s("p",null,"\u5728\u7B2C\u4E00\u7AE0\uFF0C\u4F1A\u4ECB\u7ECD\u4EC0\u4E48\u662F\u4E91\u8BA1\u7B97\uFF1F\u4EC0\u4E48\u662F\u865A\u62DF\u5316\uFF1F\u4EE5\u53CA\u4E91\u8BA1\u7B97\u4E0E\u865A\u62DF\u5316\u7684\u5173\u7CFB\uFF0C\u7136\u540E\u8BB2\u89E3\u76EE\u524D\u6BD4\u8F83\u6D41\u884C\u7684\u865A\u62DF\u5316\u9879\u76EE\uFF1AKVM\uFF0C\u4E86\u89E3KVM\u865A\u62DF\u5316\u7684\u57FA\u672C\u6982\u5FF5\uFF0C\u4F7F\u7528KVM\u521B\u5EFA\u5E76\u7BA1\u7406\u865A\u62DF\u673A\uFF0C\u4E3A\u5B66\u4E60OpenStack\u6253\u4E0B\u575A\u5B9E\u7684\u57FA\u7840\u3002",-1),Xo=s("h2",{id:"\u4E91\u8BA1\u7B97\u6982\u8FF0-1",tabindex:"-1"},[n("\u4E91\u8BA1\u7B97\u6982\u8FF0 "),s("a",{class:"header-anchor",href:"#\u4E91\u8BA1\u7B97\u6982\u8FF0-1","aria-hidden":"true"},"#")],-1),Jo=s("p",null,"\u4EFB\u4F55\u4E8B\u7269\u7684\u51FA\u73B0\u90FD\u662F\u6709\u80CC\u666F\u7684\uFF0C\u4E91\u8BA1\u7B97\u4E5F\u4E0D\u4F8B\u5916\u3002\u4E91\u8BA1\u7B97\u662F\u7531\u9700\u6C42\u9A71\u52A8\u7684\uFF0C\u9996\u5148\u8BA9\u6211\u4EEC\u770B\u770B\u6CA1\u6709\u4E91\u8BA1\u7B97\u4E4B\u524D\u6211\u4EEC\u90FD\u9762\u4E34\u4EC0\u4E48\u95EE\u9898\u3002",-1),Wo=s("p",null,[s("strong",null,"\u4F20\u7EDF\u6570\u636E\u4E2D\u5FC3\u9762\u4E34\u7684\u95EE\u9898\uFF1F")],-1),Qo=s("ul",null,[s("li",null,"\u8D44\u6E90\u5229\u7528\u7387\u4F4E\uFF1A\u8D44\u6E90\u5229\u7528\u7387\u4F4E\u662F\u6570\u636E\u4E2D\u5FC3\u76EE\u524D\u666E\u904D\u5B58\u5728\u7684\u95EE\u9898\uFF0C\u591A\u9879\u8C03\u67E5\u6570\u636E\u8868\u660E\u4F01\u4E1A\u6570\u636E\u4E2D\u5FC3\u7684\u670D\u52A1\u5668\u7684\u5E73\u5747\u5229\u7528\u7387\u666E\u904D\u4F4E\u4E8E15%\u3002"),s("li",null,"\u8D44\u6E90\u5206\u914D\u4E0D\u5408\u7406\uFF1A\u7CFB\u7EDF\u7EDF\u5EFA\u8BBE\u76F8\u5BF9\u72EC\u7ACB\u3001\u5404\u81EA\u4E3A\u653F\uFF0C\u5176\u57FA\u7840\u8BBE\u65BD\u76F8\u5F53\u4E8E\u4E00\u4E2A\u4E2A\u72EC\u7ACB\u7684\u201C\u5B64\u5C9B\u201D\uFF0C\u56E0\u6B64\u5F88\u96BE\u4ECE\u6574\u4F53\u7684\u89D2\u5EA6\u8003\u8651IT\u57FA\u7840\u67B6\u6784\u7684\u8D44\u6E90\u5206\u914D\u53CA\u4F7F\u7528\u7684\u5408\u7406\u6027\u3002"),s("li",null,"\u81EA\u52A8\u5316\u80FD\u529B\u5DEE\uFF1A\u8D44\u6E90\u914D\u7F6E\u548C\u90E8\u7F72\u8FC7\u7A0B\u591A\u91C7\u7528\u4EBA\u5DE5\u65B9\u5F0F\uFF0C\u6CA1\u6709\u76F8\u5E94\u7684\u5E73\u53F0\u652F\u6301\uFF0C\u4F7F\u5927\u91CF\u4EBA\u529B\u8D44\u6E90\u8017\u8D39\u5728\u7E41\u91CD\u7684\u91CD\u590D\u6027\u5DE5\u4F5C\u4E0A\uFF0C\u6CA1\u6709\u81EA\u670D\u52A1\u548C\u81EA\u52A8\u90E8\u7F72\u7684\u80FD\u529B\u3002")],-1),Zo=s("p",null,[s("strong",null,"\u4EC0\u4E48\u662F\u4E91\u8BA1\u7B97\uFF1F")],-1),sa=s("p",null,"\u4E91\u8BA1\u7B97\uFF08Cloud Computing\uFF09\u662F\u57FA\u4E8E\u4E92\u8054\u7F51\u7684\u76F8\u5173\u670D\u52A1\u7684\u589E\u52A0\u3001\u4F7F\u7528\u548C\u4EA4\u4ED8\u6A21\u5F0F\u3002 \u597D\u5427\uFF0C\u6211\u627F\u8BA4\uFF01\u5982\u679C\u4F60\u628A\u4E0A\u9762\u90A3\u53E5\u8BDD\u544A\u8BC9\u4E1A\u5185\u4EBA\u5458\uFF0C\u4F30\u8BA1\u53EA\u6709\u5F88\u5C11\u4E00\u90E8\u5206\u4EBA\u53EF\u4EE5\u7406\u89E3\uFF0C\u66F4\u4E0D\u7528\u8BF4\u975E\u4E1A\u5185\u4EBA\u58EB\u4E86\u3002\u5BF9\u4E91\u8BA1\u7B97\u7684\u5B9A\u4E49\u6709\u591A\u79CD\u8BF4\u6CD5\u3002\u5BF9\u4E8E\u5230\u5E95\u4EC0\u4E48\u662F\u4E91\u8BA1\u7B97,\u76EE\u524D\u5E7F\u4E3A\u63A5\u53D7\u7684\u662F\u7F8E\u56FD\u56FD\u5BB6\u6807\u51C6\u4E0E\u6280\u672F\u7814\u7A76\u9662\uFF08NIST\uFF09\u5B9A\u4E49\uFF1A\u4E91\u8BA1\u7B97\u662F\u4E00\u79CD\u6309\u4F7F\u7528\u91CF\u4ED8\u8D39\u7684\u6A21\u5F0F\uFF0C\u8FD9\u79CD\u6A21\u5F0F\u63D0\u4F9B\u53EF\u7528\u7684\u3001\u4FBF\u6377\u7684\u3001\u6309\u9700\u7684\u7F51\u7EDC\u8BBF\u95EE\uFF0C\u8FDB\u5165\u53EF\u914D\u7F6E\u7684\u8BA1\u7B97\u8D44\u6E90\u5171\u4EAB\u6C60\uFF08\u8D44\u6E90\u5305\u62EC\u7F51\u7EDC\uFF0C\u670D\u52A1\u5668\uFF0C\u5B58\u50A8\uFF0C\u5E94\u7528\u8F6F\u4EF6\uFF0C\u670D\u52A1\uFF09\uFF0C\u8FD9\u4E9B\u8D44\u6E90\u80FD\u591F\u88AB\u5FEB\u901F\u63D0\u4F9B\uFF0C\u53EA\u9700\u6295\u5165\u5F88\u5C11\u7684\u7BA1\u7406\u5DE5\u4F5C\uFF0C\u6216\u4E0E\u670D\u52A1\u4F9B\u5E94\u5546\u8FDB\u884C\u5F88\u5C11\u7684\u4EA4\u4E92\u3002",-1),na=s("p",null,[s("strong",null,"\u7528\u6BD4\u8F83\u597D\u7406\u89E3\u7684\u65B9\u5F0F\u89E3\u91CA\u5C31\u662F\uFF1A")],-1),la=s("ol",null,[s("li",null,"\u662F\u4EC0\u4E48\uFF1A\u4E91\u8BA1\u7B97\u6307\u7684\u662F\u4E00\u79CD\u6A21\u5F0F\u3002"),s("li",null,"\u4F7F\u7528\u65B9\u6CD5\uFF1A\u4E91\u8BA1\u7B97\u7684\u5FC5\u987B\u901A\u8FC7\u7F51\u7EDC\u6765\u4F7F\u7528\u3002"),s("li",null,"\u7279\u70B9\u548C\u4F18\u52BF\uFF1A\u5F39\u6027\u8BA1\u7B97\u3001\u6309\u9700\u4ED8\u8D39\u3001\u5FEB\u901F\u6269\u5C55\uFF0C\u4E5F\u5C31\u662F\u4F60\u7528\u591A\u5C11\uFF0C\u4ED8\u591A\u5C11\u94B1\u3002\u540C\u65F6\u4E5F\u4E0D\u7528\u5173\u5FC3\u57FA\u7840\u8BBE\u65BD\u7684\u7BA1\u7406\uFF0C\u7531\u4E91\u8BA1\u7B97\u4F9B\u5E94\u5546\u63D0\u4F9B\u3002")],-1),ea=s("h3",{id:"\u4E91\u8BA1\u7B97\u7684\u5206\u7C7B",tabindex:"-1"},[n("\u4E91\u8BA1\u7B97\u7684\u5206\u7C7B "),s("a",{class:"header-anchor",href:"#\u4E91\u8BA1\u7B97\u7684\u5206\u7C7B","aria-hidden":"true"},"#")],-1),oa=s("p",null,"\u6839\u636E\u4E91\u8BA1\u7B97\u670D\u52A1\u6027\u8D28\u7684\u4E0D\u540C,\u53EF\u4EE5\u5C06\u4E91\u8BA1\u7B97\u533A\u5206\u4E3A\u516C\u6709\u4E91\u3001\u79C1\u6709\u4E91\u548C\u6DF7\u5408\u4E91\uFF0C\u5982\u56FE1-1",-1),aa=s("p",null,"\uFF08\u56FE1-1\uFF09",-1),ta=s("p",null,[s("strong",null,"\u516C\u6709\u4E91")],-1),ca=s("p",null,"\u662F\u5C06\u642D\u5EFA\u597D\u7684\u4E91\u8D44\u6E90\u6C60\u653E\u5230Internet\u4E0A\uFF0C\u6240\u6709\u6709\u4F7F\u7528\u6743\u9650\u7684\u7528\u6237\u90FD\u53EF\u4EE5\u6309\u9700\u4F7F\u7528\u3002\u76F8\u5BF9\u4E8E\u79C1\u6709\u4E91\uFF0C\u516C\u6709\u4E91\u7684\u6240\u6709\u8005\u662F\u63D0\u4F9B\u5546\uFF0C\u4F01\u4E1A\u7528\u6237\u53EA\u662F\u5177\u5907\u4F7F\u7528\u6743\u3002 \u4F18\u52BF\uFF1A\u4E91\u8BA1\u7B97\u7684\u6700\u5927\u4F18\u52BF\u5C31\u662F\u5176\u89C4\u6A21\u7ECF\u6D4E\u6548\u76CA\uFF0C\u5927\u591A\u6570\u4F01\u4E1A\u9009\u62E9\u4E91\u8BA1\u7B97\u65B9\u6848\u662F\u51FA\u4E8E\u6210\u672C\u8003\u8651\uFF0C\u90A3\u4E48\u516C\u6709\u4E91\u4E0D\u9700\u8981\u6295\u5165\u57FA\u7840\u5EFA\u8BBE\uFF0C\u53EF\u4EE5\u5B9E\u73B0\u6309\u9700\u4ED8\u8D39\uFF0C\u968F\u65F6\u4F7F\u7528\u3002",-1),ia=s("p",null,[s("strong",null,"\u79C1\u6709\u4E91"),n(" \u662F\u4E3A\u4E00\u4E2A\u5BA2\u6237\u5355\u72EC\u4F7F\u7528\u800C\u6784\u5EFA\u7684\u4E00\u5957IAAS\uFF08\u57FA\u7840\u8BBE\u65BD\u65E2\u670D\u52A1\uFF09\uFF0C\u4F01\u4E1A\u53EF\u4EE5\u5BF9\u6570\u636E\u3001\u5B89\u5168\u6027\u548C\u670D\u52A1\u8D28\u91CF\u8FDB\u884C\u6700\u6709\u6548\u63A7\u5236\u3002\u8BE5\u516C\u53F8\u62E5\u6709\u57FA\u7840\u8BBE\u65BD\uFF0C\u5E76\u53EF\u4EE5\u63A7\u5236\u5728\u6B64\u57FA\u7840\u8BBE\u65BD\u4E0A\u90E8\u7F72\u5E94\u7528\u7A0B\u5E8F\u7684\u65B9\u5F0F\u3002\u79C1\u6709\u4E91\u53EF\u90E8\u7F72\u5728\u4F01\u4E1A\u6570\u636E\u4E2D\u5FC3\u7684\u9632\u706B\u5899\u5185\uFF0C\u4E5F\u53EF\u4EE5\u5C06\u5B83\u4EEC\u90E8\u7F72\u5728\u4E00\u4E2A\u5B89\u5168\u7684\u4E3B\u673A\u6258\u7BA1\u573A\u6240\u3002 \u4F18\u52BF\uFF1A\u6570\u636E\u5B89\u5168\u5BF9\u4E8E\u4F01\u4E1A\u6765\u8BF4\u662F\u81F3\u5173\u91CD\u8981\u7684\uFF0C\u516C\u6709\u4E91\u670D\u52A1\u5B58\u5728\u8F83\u5927\u7684\u5B89\u5168\u9690\u60A3\uFF0C\u516C\u6709\u4E91\u5E73\u53F0\u53EA\u9002\u5408\u90A3\u4E9B\u975E\u5173\u952E\u6027\u4E1A\u52A1\u3002\u5C24\u5176\u662F\u5927\u578B\u4F01\u4E1A\u4F1A\u66F4\u591A\u5730\u503E\u5411\u4E8E\u9009\u62E9\u79C1\u6709\u4E91\u8BA1\u7B97\u5E73\u53F0\u3002")],-1),ra=s("p",null,[s("strong",null,"\u6DF7\u5408\u4E91"),n(" \u6307\u516C\u6709\u4E91\u548C\u79C1\u6709\u4E91\u7684\u6DF7\u5408\uFF0C\u5927\u591A\u6570\u662F\u6307\u5728\u79C1\u6709\u4E91\u642D\u5EFA\u597D\u81EA\u540E\uFF0C\u7531\u4E8E\u4E1A\u52A1\u53D1\u5C55\u7B49\u539F\u56E0\uFF0C\u8D44\u6E90\u9700\u6C42\u91CF\u8D85\u8FC7\u4E86\u8D44\u6E90\u6C60\uFF0C\u6240\u4EE5\u9700\u8981\u901A\u8FC7\u7533\u8BF7\u4F7F\u7528\u516C\u6709\u4E91\u4F5C\u4E3A\u79C1\u6709\u4E91\u7684\u8865\u5145\u3002 \u4F18\u52BF\uFF1A\u6DF7\u5408\u4E91\u65E2\u53EF\u4EE5\u5C3D\u53EF\u80FD\u591A\u5730\u53D1\u6325\u4E91\u8BA1\u7B97\u7CFB\u7EDF\u7684\u89C4\u6A21\u7ECF\u6D4E\u6548\u76CA\uFF0C\u540C\u65F6\u53C8\u53EF\u4EE5\u4FDD\u8BC1\u6570\u636E\u5B89\u5168\u6027\u3002\u5BF9\u4E8E\u4E0D\u662F\u5F88\u654F\u611F\u7684\u975E\u5173\u952E\u4E1A\u52A1\u53EF\u4EE5\u7531\u6DF7\u5408\u4E91\u4E2D\u7684\u516C\u6709\u6A21\u5757\u5B9E\u73B0\uFF0C\u800C\u5BF9\u90A3\u4E9B\u5B89\u5168\u6027\u8981\u6C42\u8F83\u9AD8\u7684\u5E94\u7528\u5219\u53EF\u4EE5\u8FC1\u79FB\u5230\u79C1\u6709\u6A21\u5757\u5B9E\u73B0\u3002 \u516C\u6709\u4E91\u3001\u79C1\u6709\u4E91\u3001\u6DF7\u5408\u4E91\u4E09\u79CD\u4E91\u8BA1\u7B97\u6A21\u5F0F\u5E76\u4E0D\u4F1A\u8C01\u53D6\u4EE3\u8C01\uFF0C\u8C01\u4F18\u8FC7\u8C01\u3002\u4E0D\u540C\u4F01\u4E1A\u3001\u4E0D\u540C\u9700\u6C42\uFF0C\u9700\u8981\u4E0D\u540C\u7684\u89E3\u51B3\u65B9\u6848\u3002\u516C\u6709\u4E91\u3001\u79C1\u6709\u4E91\u3001\u6DF7\u5408\u4E91\u4F1A\u957F\u671F\u5171\u5B58\uFF0C\u4F18\u52BF\u4E92\u8865\uFF0C\u5171\u540C\u670D\u52A1\u4E8E\u4F01\u4E1A\u7528\u6237\u3002")],-1),pa=s("h3",{id:"\u4E91\u8BA1\u7B97\u7684\u5206\u5C42",tabindex:"-1"},[n("\u4E91\u8BA1\u7B97\u7684\u5206\u5C42 "),s("a",{class:"header-anchor",href:"#\u4E91\u8BA1\u7B97\u7684\u5206\u5C42","aria-hidden":"true"},"#")],-1),da=s("p",null,"\u5982\u679C\u4F60\u7406\u89E3\u4E86\u4EC0\u4E48\u662F\u4E91\u8BA1\u7B97\uFF0C\u90A3\u4E48\u5C31\u9700\u8981\u638C\u63E1\uFF0C\u4E91\u57FA\u7840\u662F\u5206\u5C42\u7684\u3002\u901A\u5E38\u60C5\u51B5\u4E0B\uFF0C\u6211\u4EEC\u5C06\u4E91\u8BA1\u7B97\u5206\u4E3A\u4E09\u5C42\uFF0C\u5206\u522B\u662FInfrastructure\uFF08\u57FA\u7840\u8BBE\u65BD\uFF09-as-a- Service\uFF0CPlatform\uFF08\u5E73\u53F0\uFF09-as-a-Service\uFF0CSoftware\uFF08\u8F6F\u4EF6\uFF09-as-a-Service\u3002\u57FA\u7840\u8BBE\u65BD\u5728\u6700\u4E0B\u7AEF\uFF0C\u5E73\u53F0\u5728\u4E2D\u95F4\uFF0C\u8F6F\u4EF6\u5728\u9876\u7AEF\u3002",-1),Aa=s("p",null,'\uFF08\u56FE1-6\uFF09 IaaS(Infrastructure as a Service\uFF0C\u57FA\u7840\u67B6\u6784\u5373\u670D\u52A1)\u901A\u8FC7\u4E92\u8054\u7F51\u63D0\u4F9B\u4E86\u6570\u636E\u4E2D\u5FC3\u3001\u57FA\u7840\u67B6\u6784\u786C\u4EF6\u548C\u8F6F\u4EF6\u8D44\u6E90\u3002IaaS\u53EF\u4EE5\u63D0\u4F9B\u670D\u52A1\u5668\u3001\u64CD\u4F5C\u7CFB\u7EDF\u3001\u78C1\u76D8\u5B58\u50A8\u3001\u6570\u636E\u5E93\u548C/\u6216\u4FE1\u606F\u8D44\u6E90\u3002\u6700\u9AD8\u7AEFIaaS\u7684\u4EE3\u8868\u4EA7\u54C1\u662F\u4E9A\u9A6C\u900A\u7684AWS(Elastic Compute Cloud)\uFF0C\u4E0D\u8FC7IBM\u3001Vmware\u548C\u60E0\u666E\u4EE5\u53CA\u5176\u4ED6\u4E00\u4E9B\u4F20\u7EDFIT\u5382\u5546\u4E5F\u63D0\u4F9B\u8FD9\u7C7B\u7684\u670D\u52A1\u3002\u56FD\u5185\u7684\u8BDD\u963F\u91CC\u4E91\u3001\u817E\u8BAF\u4E91\u3001\u9752\u4E91\u3001\u76DB\u5927\u4E91\u7B49\u4EE3\u8868\u3002 IaaS\u901A\u5E38\u4F1A\u6309\u7167"\u5F39\u6027\u4E91"\u7684\u6A21\u5F0F\u5F15\u5165\u5176\u4ED6\u7684\u4F7F\u7528\u548C\u8BA1\u4EF7\u6A21\u5F0F\uFF0C\u4E5F\u5C31\u662F\u5728\u4EFB\u4F55\u4E00\u4E2A\u7279\u5B9A\u7684\u65F6\u95F4\uFF0C\u90FD\u53EA\u4F7F\u7528\u4F60\u9700\u8981\u7684\u670D\u52A1\uFF0C\u5E76\u4E14\u53EA\u4E3A\u4E4B\u4ED8\u8D39\u3002\u6211\u4EEC\u8981\u8BB2\u7684OpenStack\u5C31\u662FIAAS\u7684\u5F00\u6E90\u9879\u76EE\uFF0C\u53EF\u4EE5\u7528\u6765\u6784\u5EFA\u516C\u6709\u4E91\u6216\u8005\u79C1\u6709\u4E91\u3002 PaaS(Platform as a Service\uFF0C\u5E73\u53F0\u5373\u670D\u52A1)\u63D0\u4F9B\u4E86\u57FA\u7840\u67B6\u6784\uFF0C\u8F6F\u4EF6\u5F00\u53D1\u8005\u53EF\u4EE5\u5728\u8FD9\u4E2A\u57FA\u7840\u67B6\u6784\u4E4B\u4E0A\u5EFA\u8BBE\u65B0\u7684\u5E94\u7528\uFF0C\u6216\u8005\u6269\u5C55\u5DF2\u6709\u7684\u5E94\u7528\uFF0C\u540C\u65F6\u5374\u4E0D\u5FC5\u8D2D\u4E70\u5F00\u53D1\u3001\u8D28\u91CF\u63A7\u5236\u6216\u751F\u4EA7\u670D\u52A1\u5668\u3002Google\u7684App Engine\u548C\u65B0\u6D6A\u7684SAE\u90FD\u91C7\u7528\u4E86PASS\u7684\u6A21\u5F0F\u3002\u8FD9\u4E9B\u5E73\u53F0\u5141\u8BB8\u516C\u53F8\u521B\u5EFA\u4E2A\u6027\u5316\u7684\u5E94\u7528\uFF0C\u4E5F\u5141\u8BB8\u72EC\u7ACB\u8F6F\u4EF6\u5382\u5546\u6216\u8005\u5176\u4ED6\u7684\u7B2C\u4E09\u65B9\u673A\u6784\u9488\u5BF9\u5782\u76F4\u7EC6\u5206\u884C\u4E1A\u521B\u9020\u65B0\u7684\u89E3\u51B3\u65B9\u6848\u3002\u6211\u4EEC\u8981\u8BB2\u7684Docker\u53EF\u4EE5\u7528\u6765\u6784\u5EFAPAAS\u5E73\u53F0\uFF0C\u767E\u5EA6\u7684PAAS\u5E73\u53F0\u6838\u5FC3\u5C31\u662F\u57FA\u4E8EDocker\u3002 SaaS(Software as a Service\uFF0C\u8F6F\u4EF6\u5373\u670D\u52A1)\u662F\u6700\u4E3A\u6210\u719F\u3001\u6700\u51FA\u540D\uFF0C\u4E5F\u662F\u5F97\u5230\u6700\u5E7F\u6CDB\u5E94\u7528\u7684\u4E00\u79CD\u4E91\u8BA1\u7B97\u3002\u5927\u5BB6\u53EF\u4EE5\u5C06\u5B83\u7406\u89E3\u4E3A\u4E00\u79CD\u8F6F\u4EF6\u5206\u5E03\u6A21\u5F0F\uFF0C\u5728\u8FD9\u79CD\u6A21\u5F0F\u4E0B\uFF0C\u5E94\u7528\u8F6F\u4EF6\u5B89\u88C5\u5728\u5382\u5546\u6216\u8005\u670D\u52A1\u4F9B\u5E94\u5546\u90A3\u91CC\uFF0C\u7528\u6237\u53EF\u4EE5\u901A\u8FC7\u67D0\u4E2A\u7F51\u7EDC\u6765\u4F7F\u7528\u8FD9\u4E9B\u8F6F\u4EF6\uFF0C\u901A\u5E38\u4F7F\u7528\u7684\u7F51\u7EDC\u662F\u4E92\u8054\u7F51\u3002\u8FD9\u79CD\u6A21\u5F0F\u901A\u5E38\u4E5F\u88AB\u79F0\u4E3A"\u968F\u9700\u5E94\u53D8(on demand)"\u8F6F\u4EF6\uFF0C\u8FD9\u662F\u6700\u6210\u719F\u7684\u4E91\u8BA1\u7B97\u6A21\u5F0F\uFF0C\u56E0\u4E3A\u8FD9\u79CD\u6A21\u5F0F\u5177\u6709\u9AD8\u5EA6\u7684\u7075\u6D3B\u6027\u3001\u5DF2\u7ECF\u8BC1\u660E\u53EF\u9760\u7684\u652F\u6301\u670D\u52A1\u3001\u5F3A\u5927\u7684\u53EF\u6269\u5C55\u6027\uFF0C\u56E0\u6B64\u80FD\u591F\u964D\u4F4E\u5BA2\u6237\u7684\u7EF4\u62A4\u6210\u672C\u548C\u6295\u5165\uFF0C\u800C\u4E14\u7531\u4E8E\u8FD9\u79CD\u6A21\u5F0F\u7684\u591A\u5B97\u65E8\u5F0F\u7684\u57FA\u7840\u67B6\u6784\uFF0C\u8FD0\u8425\u6210\u672C\u4E5F\u5F97\u4EE5\u964D\u4F4E\u3002Google\u7684Gmail\u548CJira\u90FD\u662FSAAS\u7684\u6A21\u5F0F\u3002',-1),Ca=s("h2",{id:"\u4E91\u8BA1\u7B97\u4E0E\u865A\u62DF\u5316",tabindex:"-1"},[n("\u4E91\u8BA1\u7B97\u4E0E\u865A\u62DF\u5316 "),s("a",{class:"header-anchor",href:"#\u4E91\u8BA1\u7B97\u4E0E\u865A\u62DF\u5316","aria-hidden":"true"},"#")],-1),ua=s("p",null,"\u9996\u5148\u8BF7\u5927\u5BB6\u4E0D\u8981\u628A\u865A\u62DF\u5316\u548C\u6211\u4EEC\u4E4B\u524D\u8BB2\u89E3\u7684\u4E91\u8BA1\u7B97\u8FDB\u884C\u8054\u60F3\uFF0C\u5148\u5165\u4E3A\u4E3B\u5F88\u5BB9\u6613\u8BA9\u6211\u4EEC\u9677\u5165\u6982\u5FF5\u7684\u8BEF\u533A\uFF0C\u8BA9\u6211\u6765\u4EE3\u7406\u5927\u5BB6\u641E\u660E\u767D\u4E91\u8BA1\u7B97\u4E0E\u865A\u62DF\u5316\u7684\u6069\u6069\u6028\u6028\u3002\u56E0\u4E3A\u63D0\u5230\u4E91\u8BA1\u7B97\u5C31\u4E0D\u5F97\u4E0D\u63D0\u5230\u865A\u62DF\u5316\uFF0C\u751A\u81F3\u8BF4\u5F88\u591A\u4EBA\u5C06\u4E91\u8BA1\u7B97\u548C\u865A\u62DF\u5316\u6DF7\u4E3A\u4E00\u8C08\uFF0C\u8FD9\u662F\u4E0D\u6B63\u786E\u7684\u3002\u597D\u7684\uFF0C\u7B54\u6848\u6709\u4E86\uFF0C\u4E91\u8BA1\u7B97\u4E0D\u7B49\u4E8E\u865A\u62DF\u5316\uFF0C\u90A3\u4E48\u4E3A\u4EC0\u4E48\u5462\uFF1F \u865A\u62DF\u5316\uFF0C\u662F\u6307\u901A\u8FC7\u865A\u62DF\u5316\u6280\u672F\u5C06\u4E00\u53F0\u8BA1\u7B97\u673A\u865A\u62DF\u4E3A\u591A\u53F0\u903B\u8F91\u8BA1\u7B97\u673A\u3002\u5728\u4E00\u53F0\u8BA1\u7B97\u673A\u4E0A\u540C\u65F6\u8FD0\u884C\u591A\u4E2A\u903B\u8F91\u8BA1\u7B97\u673A\uFF0C\u6BCF\u4E2A\u903B\u8F91\u8BA1\u7B97\u673A\u53EF\u8FD0\u884C\u4E0D\u540C\u7684\u64CD\u4F5C\u7CFB\u7EDF\uFF0C\u5E76\u4E14\u5E94\u7528\u7A0B\u5E8F\u90FD\u53EF\u4EE5\u5728\u76F8\u4E92\u72EC\u7ACB\u7684\u7A7A\u95F4\u5185\u8FD0\u884C\u800C\u4E92\u4E0D\u5F71\u54CD\uFF0C\u4ECE\u800C\u663E\u8457\u63D0\u9AD8\u8BA1\u7B97\u673A\u7684\u5DE5\u4F5C\u6548\u7387\u3002\u5982\u56FE1.1.1\u6240\u793A\uFF1A",-1),ya=s("p",null,"\uFF08\u56FE1-1\uFF09",-1),ha=s("h3",{id:"\u5168\u865A\u62DF\u5316\u548C\u534A\u865A\u62DF\u5316",tabindex:"-1"},[n("\u5168\u865A\u62DF\u5316\u548C\u534A\u865A\u62DF\u5316 "),s("a",{class:"header-anchor",href:"#\u5168\u865A\u62DF\u5316\u548C\u534A\u865A\u62DF\u5316","aria-hidden":"true"},"#")],-1),_a=s("p",null,"\u865A\u62DF\u5316\u6280\u672F\u6839\u636E\u7279\u70B9\uFF0C\u53EF\u4EE5\u5206\u4E3A\u5168\u865A\u62DF\u5316\u548C\u534A\u865A\u62DF\u5316\u3002 \u5168\u865A\u62DF\u5316\uFF08Full Virtualization)\uFF0C \u662F\u539F\u59CB\u865A\u62DF\u5316\u6280\u672F\uFF0C\u8BE5\u6A21\u578B\u4F7F\u7528\u865A\u62DF\u673A\u534F\u8C03guest\u64CD\u4F5C\u7CFB\u7EDF\u548C\u539F\u59CB\u786C\u4EF6\uFF0CVMM\uFF08Virtual Machine Monitor\uFF09\u5728GuestOS\u548C\u88F8\u786C\u4EF6\u4E4B\u95F4\u7528\u4E8E\u5DE5\u4F5C\u534F\u8C03\uFF0C\u4E00\u4E9B\u53D7\u4FDD\u62A4\u6307\u4EE4\u5FC5\u987B\u7531Hypervisor\uFF08\u865A\u62DF\u673A\u7BA1\u7406\u7A0B\u5E8F\uFF09\u6765\u6355\u83B7\u5904\u7406\uFF0C\u5982\u56FE1-2\u3002",-1),Da=s("p",null,"\uFF08\u56FE1-2\uFF09 KVM\u662F\u5168\u865A\u62DF\u5316\u7684\u5178\u578B\u4EE3\u8868\uFF0CKVM\u662F\u96C6\u6210\u5230Linux\u5185\u6838\u7684Hypervisor\uFF0C\u662FX86\u67B6\u6784\u4E14\u786C\u4EF6\u652F\u6301\u865A\u62DF\u5316\u6280\u672F\uFF08Intel VT\u6216AMD-V\uFF09\u7684Linux\u7684\u5168\u865A\u62DF\u5316\u89E3\u51B3\u65B9\u6848\u3002\u5B83\u662FLinux\u7684\u4E00\u4E2A\u5F88\u5C0F\u7684\u6A21\u5757\uFF0C\u5229\u7528Linux\u505A\u5927\u91CF\u7684\u4E8B\uFF0C\u5982\u4EFB\u52A1\u8C03\u5EA6\u3001\u5185\u5B58\u7BA1\u7406\u4E0E\u786C\u4EF6\u8BBE\u5907\u4EA4\u4E92\u7B49\uFF0C\u5982\u56FE1-3\u3002",-1),ga=s("p",null,"\u534A\u865A\u62DF\u5316\uFF08Para Virtualization\uFF09\uFF0C\u662F\u53E6\u4E00\u79CD\u7C7B\u4F3C\u4E8E\u5168\u865A\u62DF\u5316\u7684\u6280\u672F\uFF0C\u5B83\u4F7F\u7528Hypervisor\u5206\u4EAB\u5B58\u53D6\u5E95\u5C42\u7684\u786C\u4EF6\uFF0C\u4F46\u662F\u5B83\u7684guest\u64CD\u4F5C\u7CFB\u7EDF\u96C6\u6210\u4E86\u865A\u62DF\u5316\u65B9\u9762\u7684\u4EE3\u7801\u3002\u8BE5\u65B9\u6CD5\u65E0\u9700\u91CD\u65B0\u7F16\u8BD1\u6216\u5F15\u8D77\u9677\u9631\uFF0C\u56E0\u4E3A\u64CD\u4F5C\u7CFB\u7EDF\u81EA\u8EAB\u80FD\u591F\u4E0E\u865A\u62DF\u8FDB\u7A0B\u8FDB\u884C\u5F88\u597D\u7684\u534F\u4F5C\u3002\u534A\u865A\u62DF\u5316\u9700\u8981guest\u64CD\u4F5C\u7CFB\u7EDF\u505A\u4E00\u4E9B\u4FEE\u6539\uFF0C\u4F7Fguest\u64CD\u4F5C\u7CFB\u7EDF\u610F\u8BC6\u5230\u81EA\u5DF1\u662F\u5904\u4E8E\u865A\u62DF\u5316\u73AF\u5883\u7684\uFF0C\u4F46\u662F\u534A\u865A\u62DF\u5316\u63D0\u4F9B\u4E86\u4E0E\u539F\u64CD\u4F5C\u7CFB\u7EDF\u76F8\u8FD1\u7684\u6027\u80FD\uFF0C\u5982\u56FE1-4\u3002",-1),ma=s("p",null,"\uFF08\u56FE1-4\uFF09 \u534A\u865A\u62DF\u5316\u7684\u4E00\u4E2A\u5178\u578B\u4EE3\u8868\u662FXen\u3002Xen\u662F\u7B2C\u4E00\u7C7B\u8FD0\u884C\u5728\u88F8\u673A\u4E0A\u7684\u865A\u62DF\u5316\u7BA1\u7406\u7A0B\u5E8F(Hypervisor)\u3002\u5B83\u652F\u6301\u5168\u865A\u62DF\u5316\u548C\u534A\u865A\u62DF\u5316,Xen\u652F\u6301hypervisor\u548C\u865A\u62DF\u673A\u4E92\u76F8\u901A\u8BAF\u3002Xen\u6700\u91CD\u8981\u7684\u4F18\u52BF\u5728\u4E8E\u534A\u865A\u62DF\u5316\uFF0C\u6B64\u5916\u672A\u7ECF\u4FEE\u6539\u7684\u64CD\u4F5C\u7CFB\u7EDF\u4E5F\u53EF\u4EE5\u76F4\u63A5\u5728xen\u4E0A\u8FD0\u884C(\u5982Windows)\uFF0C\u80FD\u8BA9\u865A\u62DF\u673A\u6709\u6548\u8FD0\u884C\u800C\u4E0D\u9700\u8981\u4EFF\u771F\uFF0C\u56E0\u6B64\u865A\u62DF\u673A\u80FD\u611F\u77E5\u5230hypervisor\uFF0C\u800C\u4E0D\u9700\u8981\u6A21\u62DF\u865A\u62DF\u786C\u4EF6\uFF0C\u4ECE\u800C\u80FD\u5B9E\u73B0\u9AD8\u6027\u80FD\uFF0C\u5982\u56FE1-5\u3002",-1),ba=s("p",null,"\uFF08\u56FE1-5\uFF09 \u5728Xen\u73AF\u5883\u4E2D\uFF0C\u4E3B\u8981\u6709\u4E24\u4E2A\u7EC4\u6210\u90E8\u5206\u3002 \u4E00\u4E2A\u662F\u865A\u62DF\u673A\u76D1\u63A7\u5668\uFF08VMM\uFF09\uFF0C\u4E5F\u53EBhypervisor\u3002Hypervisor\u5C42\u786C\u4EF6\u4E0E\u865A\u62DF\u673A\u4E4B\u95F4\uFF0C\u6700\u5148\u88AB\u8F7D\u5165\u5230\u786C\u4EF6\u7684\u7B2C\u4E00\u5C42\u3002 Hypervisor\u8F7D\u5165\u5C31\u53EF\u90E8\u7F72\u865A\u62DF\u673A\u3002\u5728Xen\u4E2D\uFF0C\u865A\u62DF\u673A\u53EB\u505ADomain\u3002\u5728\u8FD9\u4E9B\u865A\u62DF\u673A\u4E2D\uFF0CDomain0\u5177\u6709\u5F88\u9AD8\u7684\u7279\u6743,\u8D1F\u8D23\u4E00\u4E9B\u4E13\u95E8\u7684\u5DE5\u4F5C\u3002\u7531\u4E8Ehypervisor\u4E2D\u4E0D\u5305\u542B\u4EFB\u4F55\u4E0E\u786C\u4EF6\u5BF9\u8BDD\u7684\u9A71\u52A8\uFF0C\u4E5F\u6CA1\u6709\u4E0E\u7BA1\u7406\u5458\u5BF9\u8BDD\u7684\u63A5\u53E3\uFF0C\u8FD9\u4E9B\u9A71\u52A8\u5C31\u7531 domain0\u6765\u63D0\u4F9B\u4E86\u3002\u901A\u8FC7domain0\uFF0C\u7BA1\u7406\u5458\u53EF\u4EE5\u5229\u7528\u4E00\u4E9BXen\u5DE5\u5177\u6765\u521B\u5EFA\u5176\u5B83\u865A\u62DF\u673A\uFF08DomainU\uFF09\u3002\u8FD9\u4E9BdomainU\u5C5E\u4E8E\u65E0\u7279\u6743domain\u3002",-1),ka=s("h3",{id:"\u865A\u62DF\u5316\u5206\u7C7B",tabindex:"-1"},[n("\u865A\u62DF\u5316\u5206\u7C7B "),s("a",{class:"header-anchor",href:"#\u865A\u62DF\u5316\u5206\u7C7B","aria-hidden":"true"},"#")],-1),va=s("p",null,"\u521A\u624D\u4ECE\u7C7B\u578B\u4E2D\u628A\u865A\u62DF\u5316\u5206\u4E3A\u5168\u865A\u62DF\u5316\u548C\u534A\u865A\u62DF\u5316\uFF0C\u4ECE\u4F7F\u7528\u573A\u666F\u4E2D\u8FDB\u884C\u533A\u5206\uFF0C\u865A\u62DF\u5316\u53EF\u4EE5\u5206\u4E3A\u670D\u52A1\u5668\u865A\u62DF\u5316\u3001\u684C\u9762\u865A\u62DF\u5316\u548C\u5E94\u7528\u865A\u62DF\u5316\u3002\u66F4\u8BE6\u7EC6\u7684\u6839\u636E\u8D44\u6E90\u7684\u4E0D\u540C\u8FD8\u63D0\u51FA\u4E86\u7F51\u7EDC\u865A\u62DF\u5316\u3001\u5B58\u50A8\u865A\u62DF\u5316\u7B49\u3002 \u670D\u52A1\u5668\u865A\u62DF\u5316\u662F\u6211\u4EEC\u6700\u5E38\u89C1\u7684\u65B9\u5F0F\uFF0C\u6211\u4EEC\u901A\u8FC7KVM\u3001Xen\u3001VMWARE ESXi\u7B49\u8F6F\u4EF6\u5C06\u6211\u4EEC\u7684\u670D\u52A1\u5668\u865A\u62DF\u6210\u591A\u4E2A\u6765\u4F7F\u7528\uFF0C\u63D0\u9AD8\u786C\u4EF6\u7684\u4F7F\u7528\u6548\u7387\u3002\u4E0D\u719F\u6089\u7684\u670B\u53CB\u53EF\u4EE5\u4F7F\u7528\u641C\u7D22\u5F15\u64CE\u6765\u83B7\u53D6\u76F8\u5173\u77E5\u8BC6\uFF0C\u76EE\u524D\u6211\u7684\u751F\u4EA7\u73AF\u5883\u8FD8\u7A33\u5B9A\u7684\u8FD0\u884C\u7740\u6570\u5E74\u524D\u7684ESXi\u3002",-1),xa=s("p",null,[s("strong",null,"\u684C\u9762\u865A\u62DF")],-1),fa=s("p",null,"\u5316\u662F\u6307\u5C06\u8BA1\u7B97\u673A\u7684\u7EC8\u7AEF\u7CFB\u7EDF\uFF08\u4E5F\u79F0\u4F5C\u684C\u9762\uFF09\u8FDB\u884C\u865A\u62DF\u5316\uFF0C\u4EE5\u8FBE\u5230\u684C\u9762\u4F7F\u7528\u7684\u5B89\u5168\u6027\u548C\u7075\u6D3B\u6027\u3002\u53EF\u4EE5\u901A\u8FC7\u4EFB\u4F55\u8BBE\u5907\uFF0C\u5728\u4EFB\u4F55\u5730\u70B9\uFF0C\u4EFB\u4F55\u65F6\u95F4\u901A\u8FC7\u7F51\u7EDC\u8BBF\u95EE\u5C5E\u4E8E\u6211\u4EEC\u4E2A\u4EBA\u7684\u684C\u9762\u7CFB\u7EDF\u3002\u76EE\u524D\u5728\u4E2D\u5C0F\u4F01\u4E1A\u5E76\u6CA1\u6709\u5B8C\u5168\u666E\u53CA\uFF0C\u4E3B\u8981\u7528\u4E8EIT\u5916\u5305\u3001\u547C\u53EB\u4E2D\u5FC3\u3001\u79FB\u52A8\u684C\u9762\u7B49\uFF0C\u56E0\u4E3A\u5728\u663E\u793A\u65B9\u9762\u5BF9\u4E8E\u4F4E\u6210\u672C\u7684\u89E3\u51B3\u65B9\u6848\u6548\u679C\u5E76\u4E0D\u597D\uFF0C\u6548\u679C\u597D\u7684\u521D\u59CB\u91C7\u8D2D\u6210\u672C\u8F83\u9AD8\u3002 \u684C\u9762\u865A\u62DF\u5316\u4F9D\u8D56\u4E8E\u670D\u52A1\u5668\u865A\u62DF\u5316\uFF0C\u9996\u5148\u5728\u6570\u636E\u4E2D\u5FC3\u7684\u670D\u52A1\u5668\u4E0A\u8FDB\u884C\u670D\u52A1\u5668\u865A\u62DF\u5316\uFF0C\u751F\u6210\u5927\u91CF\u7684\u72EC\u7ACB\u7684\u684C\u9762\u64CD\u4F5C\u7CFB\u7EDF\uFF08\u6BD4\u5982Win7\uFF09\uFF0C\u540C\u65F6\u6839\u636E\u4E13\u6709\u7684\u865A\u62DF\u684C\u9762\u534F\u8BAE\u53D1\u9001\u7ED9\u7EC8\u7AEF\u8BBE\u5907\uFF08\u4F8B\u5982RDP\u3001VNC\u3001Spice\u534F\u8BAE\uFF09\u3002\u7528\u6237\u7EC8\u7AEF\u901A\u8FC7\u4EE5\u592A\u7F51\u767B\u9646\u5230\u865A\u62DF\u4E3B\u673A\u4E0A\uFF0C\u53EA\u9700\u8981\u8BB0\u4F4F\u7528\u6237\u540D\u548C\u5BC6\u7801\u53CA\u7F51\u5173\u4FE1\u606F\uFF0C\u5373\u53EF\u968F\u65F6\u968F\u5730\u7684\u901A\u8FC7\u7F51\u7EDC\u8BBF\u95EE\u81EA\u5DF1\u7684\u684C\u9762\u7CFB\u7EDF\uFF0C\u4ECE\u800C\u5B9E\u73B0\u5355\u673A\u591A\u7528\u6237\u3002 \u901A\u8FC7\u4E0EIAAS\u7684\u7ED3\u5408\uFF0C\u684C\u9762\u865A\u62DF\u5316\u4E5F\u6F14\u53D8\u6210\u684C\u9762\u4E91\uFF08DAAS \uFF1ADesktop As a Service\uFF09.IAAS\u63D0\u4F9B\u57FA\u7840\u8D44\u6E90\u5E73\u53F0\uFF0C\u684C\u9762\u865A\u62DF\u5316\u548C\u4E91\u5E73\u53F0\u7684\u5B8C\u7F8E\u878D\u5408\u8FBE\u5230\u7C7B\u4F3C\u4E8ESAAS\u4E00\u6837\u7684\u6548\u679C\uFF0C\u8FD9\u4FBF\u662FDAAS\u3002",-1),Sa=s("p",null,[s("strong",null,"\u5E94\u7528\u865A\u62DF\u5316")],-1),Ea=s("p",null,"\u6BD4\u8F83\u7B80\u5355\u7684\u89E3\u91CA\u5C31\u662F\u901A\u8FC7\u865A\u62DF\u5316\u8F6F\u4EF6\u5B9E\u73B0\u4F20\u7EDFC/S\u7ED3\u6784\u7684\u8F6F\u4EF6\u901A\u8FC7Web\u6D4F\u89C8\u5668\u8FDB\u884C\u4EA4\u4ED8\u3002\u5728\u7528\u6237\u8BBF\u95EE\u4E00\u4E2A\u670D\u52A1\u5668\u865A\u62DF\u5316\u540E\u7684\u5E94\u7528\u65F6\uFF0C\u7528\u6237\u8BA1\u7B97\u673A\u53EA\u9700\u8981\u628A\u4EBA\u673A\u4EA4\u4E92\u903B\u8F91\u4F20\u9001\u5230\u670D\u52A1\u5668\u7AEF\uFF0C\u670D\u52A1\u5668\u7AEF\u4E3A\u7528\u6237\u5F00\u8BBE\u72EC\u7ACB\u7684\u4F1A\u8BDD\u7A7A\u95F4\uFF0C\u5E94\u7528\u7A0B\u5E8F\u7684\u8BA1\u7B97\u903B\u8F91\u5728\u8FD9\u4E2A\u4F1A\u8BDD\u7A7A\u95F4\u4E2D\u8FD0\u884C\uFF0C\u628A\u53D8\u5316\u540E\u7684\u4EBA\u673A\u4EA4\u4E92\u903B\u8F91\u4F20\u9001\u7ED9\u5BA2\u6237\u7AEF\uFF0C\u5E76\u4E14\u5728\u5BA2\u6237\u7AEF\u76F8\u5E94\u8BBE\u5907\u5C55\u793A\u51FA\u6765\uFF0C\u4ECE\u800C\u4F7F\u7528\u6237\u83B7\u5F97\u5982\u540C\u8FD0\u884C\u672C\u5730\u5E94\u7528\u7A0B\u5E8F\u4E00\u6837\u7684\u8BBF\u95EE\u611F\u53D7\u3002\u6BD4\u5982\u6211\u66FE\u7ECF\u4F7F\u7528\u8FC7Cirtrix\u516C\u53F8\u7684Xenapp\u8FD9\u6B3E\u5E94\u7528\u865A\u62DF\u5316\u4EA7\u54C1\uFF0C\u5B9E\u73B0ERP\u5BA2\u6237\u7AEF\u7684\u6D4F\u89C8\u5668\u4EA4\u4ED8\u3002 \u7ECF\u8FC7\u4E0A\u9762\u7684\u7406\u89E3\uFF0C\u6211\u4EEC\u5E94\u8BE5\u53EF\u4EE5\u770B\u51FA\uFF0C\u4ECE\u8868\u9762\u6765\u770B\u865A\u62DF\u5316\u662F\u4E00\u79CD\u6280\u672F\uFF0C\u90A3\u4E48\u4E91\u8BA1\u7B97\u662F\u4E00\u4E2A\u6982\u5FF5\u3002\u4E91\u8BA1\u7B97\u91CC\u9762\u5305\u542B\u4E86\u5F88\u591A\u7684\u6280\u672F\uFF0C\u4E5F\u5305\u62EC\u865A\u62DF\u5316\u6280\u672F\u3002\u4E91\u8BA1\u7B97\u662F\u548C\u670D\u52A1\u76F8\u5173\u7684\uFF0C\u865A\u62DF\u5316\u662F\u76F8\u5BF9\u4E8E\u7269\u7406\u8BBE\u5907\u7684\u3002\u6240\u4EE5\u8BF4\u865A\u62DF\u5316\u7EDD\u4E0D\u662F\u4E91\u8BA1\u7B97\u3002\u800C\u4E91\u8BA1\u7B97\u5219\u8FDC\u8FDC\u8D85\u51FA\u4E86\u865A\u62DF\u5316\u7684\u8303\u7574\u3002",-1),Pa=s("h3",{id:"\u4E91\u8BA1\u7B97\u4E0D\u7B49\u4E8E\u865A\u62DF\u5316",tabindex:"-1"},[n("\u4E91\u8BA1\u7B97\u4E0D\u7B49\u4E8E\u865A\u62DF\u5316 "),s("a",{class:"header-anchor",href:"#\u4E91\u8BA1\u7B97\u4E0D\u7B49\u4E8E\u865A\u62DF\u5316","aria-hidden":"true"},"#")],-1),Na=s("p",null,"\u7ECF\u8FC7\u4E4B\u524D\u5BF9\u4E91\u8BA1\u7B97\u548C\u865A\u62DF\u5316\u7684\u5B66\u4E60\uFF0C\u6211\u4EEC\u53EF\u4EE5\u76F4\u63A5\u5F97\u51FA\u7B54\u6848\uFF1A\u4E91\u8BA1\u7B97\u4E0D\u7B49\u4E8E\u865A\u62DF\u5316\uFF0C\u4E91\u8BA1\u7B97\u5B9E\u8D28\u4E0A\u662F\u6839\u636E\u9700\u8981\u901A\u8FC7 Internet \u4EA4\u4ED8\u5171\u4EAB\u8BA1\u7B97\u8D44\u6E90\u3002\u4E91\u8BA1\u7B97\u53EF\u4EE5\u901A\u8FC7\u865A\u62DF\u5316\u6765\u5B9E\u73B0\uFF0C\u5343\u4E07\u4E0D\u8981\u4EE5\u4E3A\u4E91\u8BA1\u7B97\u5C31\u662F\u865A\u62DF\u5316\u3002\u6211\u4EEC\u518D\u603B\u7ED3\u4E00\u4E0B\uFF0C\u4E91\u8BA1\u7B97\u662F\u4E00\u79CD\u8D44\u6E90\u4F7F\u7528\u548C\u4EA4\u4ED8\u65B9\u5F0F\uFF0C\u865A\u62DF\u5316\u662F\u4E00\u79CD\u5177\u4F53\u7684\u6280\u672F\u5B9E\u73B0\u3002\u4F46\u662F\u5462\uFF0C\u4E91\u8BA1\u7B97\u7684\u5177\u4F53\u5B9E\u73B0\u9700\u8981\u4F7F\u7528\u5230\u865A\u62DF\u5316\u8FD9\u9879\u6280\u672F\u3002",-1),Ra=s("h1",{id:"_2-kvm\u865A\u62DF\u5316\u5B9E\u6218",tabindex:"-1"},[n("2 KVM\u865A\u62DF\u5316\u5B9E\u6218 "),s("a",{class:"header-anchor",href:"#_2-kvm\u865A\u62DF\u5316\u5B9E\u6218","aria-hidden":"true"},"#")],-1),Ta=s("p",null,"\u53EF\u7FFB\u9605www.xoxoyun.cn\u535A\u5BA2\u5176\u4ED6KVM\u6587\u7AE0\u8FDB\u884C\u5B66\u4E60",-1),Ia=s("h1",{id:"_3-openstack\u5165\u95E8\u5B9E\u6218",tabindex:"-1"},[n("3 OpenStack\u5165\u95E8\u5B9E\u6218 "),s("a",{class:"header-anchor",href:"#_3-openstack\u5165\u95E8\u5B9E\u6218","aria-hidden":"true"},"#")],-1),Oa=s("p",null,"\u5728OpenStack\u5165\u95E8\u5B9E\u6218\u7AE0\u8282\uFF0C\u6211\u4EEC\u9996\u5148\u4F1A\u4ECB\u7ECDOpenStack\u7684\u5386\u53F2\u3001\u67B6\u6784\u3002\u7136\u540E\u901A\u8FC7\u90E8\u7F72\u4E00\u4E2A\u4E24\u4E2A\u8282\u70B9\u7684OpenStack\u96C6\u7FA4\u6765\u5B66\u4E60OpenStack\u7684\u57FA\u7840\u7EC4\u5EFA\u3002\u5305\u62EC",-1),Ma=s("ul",null,[s("li",null,"OpenStack\u5171\u4EAB\u670D\u52A1MySQL\u3001RabbitMQ\u3001Memcached"),s("li",null,"OpenStack\u9A8C\u8BC1\u670D\u52A1Keystone"),s("li",null,"OpenStack\u955C\u50CF\u670D\u52A1Glance"),s("li",null,"OpenStack\u8BA1\u7B97\u670D\u52A1Nova"),s("li",null,"OpenSTack\u7F51\u7EDC\u670D\u52A1Neutron"),s("li",null,"OpenStack\u7BA1\u7406\u8282\u76EEHorizon")],-1),wa=s("h1",{id:"_1-1-openstack\u4ECB\u7ECD",tabindex:"-1"},[n("1.1 OpenStack\u4ECB\u7ECD "),s("a",{class:"header-anchor",href:"#_1-1-openstack\u4ECB\u7ECD","aria-hidden":"true"},"#")],-1),Ka=s("p",null,"OpenStack \u662F\u7531 Rackspace \u548C NASA\uFF08\u7F8E\u56FD\u5B87\u822A\u5C40\uFF09 \u5171\u540C\u5F00\u53D1\u7684\u4E91\u8BA1\u7B97\u5E73\u53F0\uFF0C\u662F\u4E91\u8BA1\u7B97\u4E2DIAAS\u7684\u5F00\u6E90\u5B9E\u73B0\u3002\u901A\u8FC7Apache\u8BB8\u53EF\u8BC1\u6388\u6743\u5F00\u653E\u6E90\u7801\uFF0C\u5B83\u53EF\u4EE5\u5E2E\u52A9\u670D\u52A1\u5546\u548C\u4F01\u4E1A\u5B9E\u73B0\u7C7B\u4F3C\u4E8EAmazon EC2\u548CS3\u7684\u4E91\u57FA\u7840\u67B6\u6784\u670D\u52A1\u3002",-1),La=s("p",null,"OpenStack\u662F\u4E00\u4E2A\u4E91\u5E73\u53F0\u7BA1\u7406\u7684\u9879\u76EE\uFF0C\u5B83\u4E0D\u662F\u4E00\u4E2A\u8F6F\u4EF6\u3002OpenStack\u662F\u4E00\u4E2A\u53EF\u4EE5\u7BA1\u7406\u6574\u4E2A\u6570\u636E\u4E2D\u5FC3\u91CC\u5927\u91CF\u8D44\u6E90\u6C60\u7684\u4E91\u64CD\u4F5C\u7CFB\u7EDF\uFF0C\u5305\u62EC\u8BA1\u7B97\u3001\u5B58\u50A8\u53CA\u7F51\u7EDC\u8D44\u6E90\u3002\u7BA1\u7406\u5458\u53EF\u4EE5\u901A\u8FC7\u7BA1\u7406\u53F0\u7BA1\u7406\u6574\u4E2A\u7CFB\u7EDF\uFF0C\u5E76\u53EF\u4EE5\u901A\u8FC7web\u63A5\u53E3\u4E3A\u7528\u6237\u5212\u5B9A\u8D44\u6E90\u3002\u7531\u4EE5\u4E0A\u53EF\u4EE5\u77E5\u9053OpenStack\u7684\u4E3B\u8981\u76EE\u6807\u662F\u7BA1\u7406\u6570\u636E\u4E2D\u5FC3\u7684\u8D44\u6E90\uFF0C\u7B80\u5316\u8D44\u6E90\u5206\u6D3E\u3002\u5B83\u7BA1\u7406\u4E09\u90E8\u5206\u8D44\u6E90\uFF0C\u5206\u522B\u662F\uFF1A",-1),Ua=s("ul",null,[s("li",null,[s("p",null,"\u8BA1\u7B97\u8D44\u6E90\uFF1AOpenStack\u53EF\u4EE5\u89C4\u5212\u5E76\u7BA1\u7406\u5927\u91CF\u4E91\u4E3B\u673A\uFF0C\u4ECE\u800C\u5141\u8BB8\u4F01\u4E1A\u6216\u670D\u52A1\u63D0\u4F9B\u5546\u6309\u9700\u63D0\u4F9B\u8BA1\u7B97\u8D44\u6E90\uFF1B\u5F00\u53D1\u8005\u53EF\u4EE5\u901A\u8FC7API\u8BBF\u95EE\u8BA1\u7B97\u8D44\u6E90\u4ECE\u800C\u521B\u5EFA\u4E91\u5E94\u7528\uFF0C\u7BA1\u7406\u5458\u4E0E\u7528\u6237\u5219\u53EF\u4EE5\u901A\u8FC7web\u8BBF\u95EE\u8FD9\u4E9B\u8D44\u6E90\uFF1B")]),s("li",null,[s("p",null,"\u5B58\u50A8\u8D44\u6E90\uFF1AOpenStack\u53EF\u4EE5\u4E3A\u4E91\u670D\u52A1\u6216\u4E91\u5E94\u7528\u63D0\u4F9B\u6240\u9700\u7684\u5BF9\u8C61\u53CA\u5757\u5B58\u50A8\u8D44\u6E90\uFF1B\u56E0\u5BF9\u6027\u80FD\u53CA\u4EF7\u683C\u6709\u9700\u6C42\uFF0C\u5F88\u591A\u7EC4\u7EC7\u5DF2\u7ECF\u4E0D\u80FD\u6EE1\u8DB3\u4E8E\u4F20\u7EDF\u7684\u4F01\u4E1A\u7EA7\u5B58\u50A8\u6280\u672F\uFF0C\u56E0\u6B64OpenStack\u53EF\u4EE5\u6839\u636E\u7528\u6237\u9700\u8981\u63D0\u4F9B\u53EF\u914D\u7F6E\u7684\u5BF9\u8C61\u5B58\u50A8\u6216\u5757\u5B58\u50A8\u529F\u80FD\uFF1B")]),s("li",null,[s("p",null,"\u7F51\u7EDC\u8D44\u6E90\uFF1A\u5982\u4ECA\u7684\u6570\u636E\u4E2D\u5FC3\u5B58\u5728\u5927\u91CF\u7684\u8BBE\u7F6E\uFF0C\u5982\u670D\u52A1\u5668\u3001\u7F51\u7EDC\u8BBE\u5907\u3001\u5B58\u50A8\u8BBE\u5907\u3001\u5B89\u5168\u8BBE\u5907\u800C\u5B83\u4EEC\u8FD8\u5C06\u88AB\u5212\u5206\u6210\u66F4\u591A\u7684\u865A\u62DF\u8BBE\u5907\u6216\u865A\u62DF\u7F51\u7EDC\uFF1B\u8FD9\u4F1A\u5BFC\u81F4IP\u5730\u5740\u7684\u6570\u91CF\u3001\u8DEF\u7531\u914D\u7F6E\u3001\u5B89\u5168\u89C4\u5219\u5C06\u7206\u70B8\u5F0F\u589E\u957F\uFF1B\u4F20\u7EDF\u7684\u7F51\u7EDC\u7BA1\u7406\u6280\u672F\u65E0\u6CD5\u771F\u6B63\u7684\u53EF\u9AD8\u6269\u5C55\u3001\u9AD8\u81EA\u52A8\u5316\u5730\u7BA1\u7406\u4E0B\u4E00\u4EE3\u7F51\u7EDC\uFF1B\u56E0\u800COpenStack\u63D0\u4F9B\u4E86\u63D2\u4EF6\u5F0F\u3001\u53EF\u6269\u5C55\u3001API\u9A71\u52A8\u578B\u7684\u7F51\u7EDC\u53CAIP\u7BA1\u7406\uFF1B OpenStack\u901A\u8FC7\u6574\u5408\u76F8\u5173\u7684\u4E00\u7EC4\u670D\u52A1\uFF0C\u63D0\u4F9B\u4E86\u57FA\u7840\u8BBE\u65BD\u5373\u670D\u52A1\uFF08IaaS\uFF09\u7684\u89E3\u51B3\u65B9\u6848\u3002\u6BCF\u4E2A\u670D\u52A1\u63D0\u4F9B\u4E86\u4E00\u7EC4\u5E94\u7528\u7A0B\u5E8F\u63A5\u53E3\uFF08API\uFF09\u6765\u4FC3\u8FDB\u4ED6\u4EEC\u4E4B\u95F4\u7684\u6574\u5408\u3002\u4F60\u53EF\u4EE5\u6839\u636E\u60A8\u7684\u9700\u8981\uFF0C\u9009\u62E9\u5B89\u88C5\u8FD9\u4E9B\u670D\u52A1\u4E2D\u7684\u4E00\u4E9B\u6216\u5168\u90E8\u3002")])],-1),ja=s("h1",{id:"_3-2-openstack\u73AF\u5883\u51C6\u5907",tabindex:"-1"},[n("3.2 OpenStack\u73AF\u5883\u51C6\u5907 "),s("a",{class:"header-anchor",href:"#_3-2-openstack\u73AF\u5883\u51C6\u5907","aria-hidden":"true"},"#")],-1),Ga=s("h3",{id:"_3-2-1-openstack\u5B9E\u6218\u6848\u4F8B",tabindex:"-1"},[n("3.2.1 OpenStack\u5B9E\u6218\u6848\u4F8B "),s("a",{class:"header-anchor",href:"#_3-2-1-openstack\u5B9E\u6218\u6848\u4F8B","aria-hidden":"true"},"#")],-1),Ha=s("p",null,"\u4ECE\u672C\u7AE0\u5F00\u59CB\uFF0C\u5F00\u59CB\u4ECB\u7ECDOpenStack\u7684\u5404\u4E2A\u7EC4\u4EF6\uFF0C\u4E3A\u4E86\u8BA9\u8BFB\u8005\u66F4\u76F4\u89C2\u7684\u4E86\u89E3\u7EC4\u4EF6\u7684\u4F5C\u7528\u548C\u7EC4\u4EF6\u4E4B\u95F4\u7684\u4F9D\u8D56\u5173\u7CFB\uFF0C\u5C06\u901A\u8FC7\u7406\u8BBA\u548C\u5B9E\u8DF5\u90E8\u7F72\u76F8\u7ED3\u5408\u7684\u65B9\u5F0F\u8FDB\u884C\u8BB2\u89E3\u3002 \u8BF7\u53C2\u8003\u300A\u5B9E\u9A8C\u73AF\u5883\u300B\u6765\u5B8C\u6210\u672C\u5B9E\u4F8B\u7684\u73AF\u5883\u51C6\u5907\u5DE5\u4F5C\u3002",-1),Fa=s("p",null,"\u4E0B\u56FE\u662F\u6211\u4EEC\u5FEB\u901F\u5B66\u4E60OpenStack\u7684\u5B9E\u6218\u67B6\u6784\u56FE\uFF0C\u76EE\u6807\u662F\u5148\u4EE5\u6700\u5C0F\u7EC4\u4EF6\u4F9D\u8D56\u8FD0\u884C\u4E00\u4E2AOpenStack\u5E73\u53F0\uFF0C\u7136\u540E\u518D\u540E\u9762\u7684\u7AE0\u8282\u6DFB\u52A0\u5176\u5B83\u7EC4\u4EF6\u3002",-1),Va=s("p",null,"\u6CE8\u610F\uFF1A\u5728\u540E\u9762\u7684\u5B9E\u9A8C\u8FC7\u7A0B\u4E2D\uFF0C\u6211\u4EEC\u4F1A\u4F7F\u7528\u5230\u63A7\u5236\u8282\u70B9\u90E8\u7F72\u548C\u8BA1\u7B97\u8282\u70B9\u90E8\u7F72\u8FD9\u6837\u7684\u63CF\u8FF0\u65B9\u6CD5\uFF0C\u8BF7\u5230\u5BF9\u5E94\u7684\u4E3B\u673A\u4E0A\u8FDB\u884C\u64CD\u4F5C\u3002",-1),Ba=s("h3",{id:"_3-2-2-ntp\u65F6\u95F4\u540C\u6B65",tabindex:"-1"},[n("3.2.2 NTP\u65F6\u95F4\u540C\u6B65 "),s("a",{class:"header-anchor",href:"#_3-2-2-ntp\u65F6\u95F4\u540C\u6B65","aria-hidden":"true"},"#")],-1),qa=s("p",null,"\u5404\u4E2A\u670D\u52A1\u5668\u7684\u65F6\u95F4\u540C\u6B65\u662FOpenStack\u90E8\u7F72\u548C\u8FD0\u7EF4\u4E2D\u5F80\u5F80\u88AB\u5FFD\u89C6\u7684\u95EE\u9898\u3002\u5982\u679C\u5404\u4E2A\u8282\u70B9\u65F6\u95F4\u4E0D\u540C\u6B65\uFF0C\u4F1A\u5F71\u54CDOpenStack\u5E73\u53F0\u7684\u6B63\u5E38\u3002\u6240\u4EE5\u9700\u8981\u4FDD\u8BC1\u6240\u6709\u8282\u70B9\u65F6\u95F4\u540C\u6B65\u3002 \u5728CentOS 7\u63A8\u8350\u4F7F\u7528Chrony\u6765\u8FDB\u884C\u65F6\u95F4\u540C\u6B65\u3002 Chrony\u662F\u4E00\u4E2A\u5F00\u6E90\u7684\u81EA\u7531\u8F6F\u4EF6\uFF0C\u5B83\u80FD\u5E2E\u52A9\u4F60\u4FDD\u6301\u7CFB\u7EDF\u65F6\u949F\u4E0E\u65F6\u949F\u670D\u52A1\u5668\uFF08NTP\uFF09\u540C\u6B65\uFF0C\u56E0\u6B64\u8BA9\u4F60\u7684\u65F6\u95F4\u4FDD\u6301\u7CBE\u786E\u3002\u5B83\u7531\u4E24\u4E2A\u7A0B\u5E8F\u7EC4\u6210\uFF0C\u5206\u522B\u662Fchronyd\u548Cchronyc\u3002chronyd\u662F\u4E00\u4E2A\u540E\u53F0\u8FD0\u884C\u7684\u5B88\u62A4\u8FDB\u7A0B\uFF0C\u7528\u4E8E\u8C03\u6574\u5185\u6838\u4E2D\u8FD0\u884C\u7684\u7CFB\u7EDF\u65F6\u949F\u548C\u65F6\u949F\u670D\u52A1\u5668\u540C\u6B65\u3002\u5B83\u786E\u5B9A\u8BA1\u7B97\u673A\u589E\u51CF\u65F6\u95F4\u7684\u6BD4\u7387\uFF0C\u5E76\u5BF9\u6B64\u8FDB\u884C\u8865\u507F\u3002chronyc\u63D0\u4F9B\u4E86\u4E00\u4E2A\u7528\u6237\u754C\u9762\uFF0C\u7528\u4E8E\u76D1\u63A7\u6027\u80FD\u5E76\u8FDB\u884C\u591A\u6837\u5316\u7684\u914D\u7F6E\u3002\u5B83\u53EF\u4EE5\u5728chronyd\u5B9E\u4F8B\u63A7\u5236\u7684\u8BA1\u7B97\u673A\u4E0A\u5DE5\u4F5C\uFF0C\u4E5F\u53EF\u4EE5\u5728\u4E00\u53F0\u4E0D\u540C\u7684\u8FDC\u7A0B\u8BA1\u7B97\u673A\u4E0A\u5DE5\u4F5C\u3002",-1),Ya=s("p",null,[s("strong",null,"\u63A7\u5236\u8282\u70B9\u90E8\u7F72"),n(" \u672C\u5B9E\u4F8B\u4E2D\uFF0C\u6211\u4EEC\u628A\u63A7\u5236\u8282\u70B9\u7684chrony\u4F5C\u4E3A\u5185\u90E8\u7684\u65F6\u949F\u670D\u52A1\u5668\uFF0C\u5176\u5B83\u8282\u70B9\u90FD\u540C\u6B65\u63A7\u5236\u8282\u70B9\u7684\u65F6\u95F4\uFF0C\u5982\u679C\u4F60\u7684\u73AF\u5883\u4E2D\u5DF2\u7ECF\u5B58\u5728\u65F6\u95F4\u670D\u52A1\u5668\u53EF\u4EE5\u8BBE\u7F6E\u4E3A\u5DF2\u7ECF\u5B58\u5728\u7684\u65F6\u95F4\u670D\u52A1\u5668\u3002")],-1),za=s("ol",null,[s("li",null,[s("p",null,"\u5B89\u88C5chrony"),s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# yum install -y chrony")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])])]),s("li",null,[s("p",null,"\u914D\u7F6Echrony"),s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# vim /etc/chrony.conf")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#\u8BBE\u7F6E\u65F6\u949F\u670D\u52A1\u5668\uFF0C\u53EF\u4EE5\u8BBE\u7F6E\u591A\u4E2A\uFF0C\u8FD9\u91CC\u63A8\u8350\u4F7F\u7528\u963F\u91CC\u4E91\u7684\u516C\u5171NTP\u65F6\u95F4\u670D\u52A1\u5668")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"server time1.aliyun.com iburst")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"server time2.aliyun.com iburst")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"server time3.aliyun.com iburst")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"server time4.aliyun.com iburst")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#\u8BBE\u7F6E\u5141\u8BB8192.168.0.0/16\u7F51\u6BB5\u8FDE\u63A5")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"allow 192.168.56.0/24")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])])]),s("li",null,[s("p",null,"\u542F\u52A8 NTP \u670D\u52A1\u5E76\u5C06\u5176\u914D\u7F6E\u4E3A\u5F00\u673A\u542F\u52A8\uFF1A"),s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# systemctl enable chronyd.service")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# systemctl start chronyd.service")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])])])],-1),$a=s("p",null,[s("strong",null,"\u5176\u5B83\u8282\u70B9\u90E8\u7F72")],-1),Xa=s("ol",null,[s("li",null,[s("p",null,"\u5B89\u88C5chrony"),s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node2 ~]# yum install -y chrony")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])])]),s("li",null,[s("p",null,"\u914D\u7F6Echrony"),s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node2 ~]# vim /etc/chrony.conf")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#\u8BBE\u7F6E\u4E3A\u63A7\u5236\u8282\u70B9\u7684IP\u5730\u5740\uFF0C\u5E76\u5C06\u5176\u5B83\u914D\u7F6E\u5168\u90E8\u5220\u9664\u3002")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"server 192.168.56.11 iburst")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])])]),s("li",null,[s("p",null,"\u542F\u52A8 NTP \u670D\u52A1\u5E76\u5C06\u5176\u914D\u7F6E\u4E3A\u5F00\u673A\u542F\u52A8\uFF1A"),s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node2 ~]# systemctl enable chronyd.service")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node2 ~]# systemctl start chronyd.service")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])])])],-1),Ja=s("p",null,[s("strong",null,"\u9A8C\u8BC1\u540C\u6B65\u65F6\u95F4")],-1),Wa=s("p",null,"\u5728\u540C\u65F6\u65F6\u95F4\u4E4B\u524D\u8981\u786E\u4FDD\u4F60\u7684\u65F6\u533A\u662F\u6B63\u786E\u7684\u3002CentOS7\u63D0\u4F9B\u4E86timedatectl\u7528\u6765\u4FEE\u6539\u3002",-1),Qa=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# timedatectl set-timezone Asia/Shanghai")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u5728\u6240\u6709\u8282\u70B9\u4E0A\u6267\u884Cchronyc source\u4FDD\u8BC1\u914D\u7F6E\u90FD\u6B63\u786E")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# chronyc sources")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Za=s("h3",{id:"_3-2-3-\u57FA\u7840\u8F6F\u4EF6\u5305\u5B89\u88C5",tabindex:"-1"},[n("3.2.3 \u57FA\u7840\u8F6F\u4EF6\u5305\u5B89\u88C5 "),s("a",{class:"header-anchor",href:"#_3-2-3-\u57FA\u7840\u8F6F\u4EF6\u5305\u5B89\u88C5","aria-hidden":"true"},"#")],-1),st=s("p",null,"\u57FA\u7840\u8F6F\u4EF6\u5305\u9700\u8981\u5728\u6240\u6709\u7684OpenStack\u8282\u70B9\u4E0A\u8FDB\u884C\u5B89\u88C5\uFF0C\u5305\u62EC\u63A7\u5236\u8282\u70B9\u548C\u8BA1\u7B97\u8282\u70B9\u3002",-1),nt=s("ol",null,[s("li",null,"\u5B89\u88C5EPEL\u4ED3\u5E93")],-1),lt=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# rpm -ivh http://mirrors.aliyun.com/epel/epel-release-latest-7.noarch.rpm")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),et=s("ol",null,[s("li",null,"\u5B89\u88C5OpenStack\u4ED3\u5E93")],-1),ot=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# yum install -y centos-release-openstack-train")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),at=s("ol",null,[s("li",null,"\u5B89\u88C5OpenStack\u5BA2\u6237\u7AEF")],-1),tt=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# yum install -y python-openstackclient")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),ct=s("blockquote",null,[s("p",null,"\u6CE8\u610F\uFF1A\u672C\u6587\u7684\u5B9E\u9A8C\u73AF\u5883\u662F\u5173\u95EDSELinux\uFF0C\u5982\u679C\u4F60\u542F\u7528\u4E86\uFF0C\u9700\u8981\u5B89\u88C5openstack-selinux \u5305\u5B9E\u73B0\u5BF9OpenStac\u670D\u52A1\u7684\u5B89\u5168\u7B56\u7565\u8FDB\u884C\u81EA\u52A8\u7BA1\u7406\u3002")],-1),it=s("ol",null,[s("li",null,"\u5B89\u88C5openstack SELinux\u7BA1\u7406\u5305")],-1),rt=s("p",null,"\u867D\u7136\u6211\u4EEC\u5728\u5B9E\u9A8C\u73AF\u5883\u51C6\u5907\u4E2D\uFF0C\u5DF2\u7ECF\u8981\u6C42\u73AF\u5883\u4E2D\u5173\u95EDSELinux\uFF0C\u4F46\u662F\u4E3A\u4E86\u4EE5\u9632\u4E07\u4E00\uFF0C\u4F60\u8FD8\u662F\u9700\u8981\u5B89\u88C5\u4E0Aopenstack-selinux\u3002",-1),pt=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# yum install -y openstack-selinux")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),dt=s("p",null,[s("strong",null,"OpenStack\u6E90\u7801\u5305")],-1),At=s("p",null,[n("\u672C\u6848\u4F8B\u4F7F\u7528\u7684\u662Fyum\u5B89\u88C5\uFF0C\u5982\u679C\u4F60\u60F3\u4F7F\u7528\u6E90\u7801\u8FDB\u884COpenStack\u90E8\u7F72\u548C\u5F00\u53D1\uFF0C\u76EE\u524DOpenStack\u6240\u6709\u7684\u6E90\u7801\u5305\uFF0C\u90FD\u53EF\u4EE5\u5728\u8FD9\u91CC\u627E\u5230"),s("a",{href:"http://tarballs.openstack.org/%EF%BC%8C%E5%90%8C%E6%97%B6%E4%B9%9F%E5%8F%AF%E4%BB%A5%E8%AE%BF%E9%97%AEhttps://launchpad.net/openstack/%E8%8E%B7%E5%8F%96%E5%88%B0%E6%AF%8F%E4%B8%AA%E9%A1%B9%E7%9B%AE%E7%9A%84%E8%AF%A6%E6%83%85%E5%92%8C%E4%B8%8B%E8%BD%BD%E5%9C%B0%E5%9D%80%E3%80%82",target:"_blank",rel:"noreferrer"},"http://tarballs.openstack.org/\uFF0C\u540C\u65F6\u4E5F\u53EF\u4EE5\u8BBF\u95EEhttps://launchpad.net/openstack/\u83B7\u53D6\u5230\u6BCF\u4E2A\u9879\u76EE\u7684\u8BE6\u60C5\u548C\u4E0B\u8F7D\u5730\u5740\u3002")],-1),Ct=s("h3",{id:"_3-2-4-mysql\u6570\u636E\u5E93\u90E8\u7F72",tabindex:"-1"},[n("3.2.4 MySQL\u6570\u636E\u5E93\u90E8\u7F72 "),s("a",{class:"header-anchor",href:"#_3-2-4-mysql\u6570\u636E\u5E93\u90E8\u7F72","aria-hidden":"true"},"#")],-1),ut=s("p",null,"\u6570\u636E\u5E93\u662FOpenStack\u7684\u57FA\u7840\u7EC4\u4EF6\u4E4B\u4E00\uFF0COpenStack\u7684\u5927\u591A\u6570\u7EC4\u4EF6\u5982KeyStone\u3001Glance\u3001Nova\u3001Neutron\u548CCinder\u90FD\u9700\u8981\u4F7F\u7528\u6570\u636E\u5E93\u5B58\u50A8\u6570\u636E\uFF0C\u5305\u62ECHorizon\u4E5F\u53EF\u4EE5\u4F7F\u7528\u6570\u636E\u5E93\u6765\u8FDB\u884CSession\u7684\u5B58\u50A8\u3002\u56E0\u6B64\u6570\u636E\u5E93\u7684\u53EF\u7528\u7387\u4F1A\u76F4\u63A5\u5F71\u54CD\u5230\u6574\u4E2AOpenStack\u5E73\u53F0\u7684\u53EF\u7528\u7387\u3002\u5982\u679C\u6570\u636E\u5E93\u6545\u969C\uFF0COpenStack\u5E73\u53F0\u5C06\u65E0\u6CD5\u521B\u5EFA\u65B0\u7684\u865A\u62DF\u673A\u548C\u7BA1\u7406\u865A\u62DF\u673A\uFF0C\u4F46\u662F\u4E0D\u4E0D\u4F1A\u5F71\u54CD\u5230\u6B63\u5728\u8FD0\u884C\u7684\u865A\u62DF\u673A\u3002 OpenStack\u652F\u6301MySQL\u3001PostgreSQL\u7B49\u591A\u79CD\u6570\u636E\u5E93\uFF0C\u9700\u8981\u6CE8\u610F\u7684\u662F\u5728CentOS7\u4E0A\u9ED8\u8BA4\u4E0D\u662FMySQL\uFF0C\u800C\u662Fmariadb\u3002 \u4F60\u53EF\u4EE5\u5C06MySQL Server\u5B89\u88C5\u5728\u4EFB\u610F\u7684\u670D\u52A1\u5668\u4E0A\uFF0C\u5F53\u7136\u6700\u597D\u662F\u4E13\u7528\u7684\u6570\u636E\u5E93\u670D\u52A1\u5668\uFF0C\u4F7F\u7528\u66F4\u591A\u7684CPU\u548CIO\u6027\u80FD\u66F4\u597D\u7684\u786C\u76D8\u3002 \u6CE8\uFF1A\u751F\u4EA7\u73AF\u5883\u53EF\u4EE5\u54A8\u8BE2DBA\u8FDB\u884CMySQL\u7684\u6027\u80FD\u4F18\u5316\u548C\u9AD8\u53EF\u7528\u7684\u914D\u7F6E\u3002",-1),yt=s("ol",null,[s("li",null,"MySQL\u5B89\u88C5")],-1),ht=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# yum install -y mariadb mariadb-server python2-PyMySQL")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),_t=s("ol",null,[s("li",null,[s("p",null,"\u4FEE\u6539MySQL\u914D\u7F6E\u6587\u4EF6"),s("p",null,"\u9ED8\u8BA4\u60C5\u51B5\u4E0BMySQL\u5DF2\u7ECF\u5305\u542B\u4E86/etc/my.cnf.d\u7684\u76EE\u5F55\uFF0C\u6211\u4EEC\u9700\u8981\u628A\u914D\u7F6E\u653E\u5728\u8BE5\u76EE\u5F55\u4E0B\u5373\u53EF\u3002"),s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# vim /etc/my.cnf.d/openstack.cnf")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[mysqld]")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"bind-address = 192.168.56.11 #\u8BBE\u7F6E\u76D1\u542C\u7684IP\u5730\u5740")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"default-storage-engine = innodb  #\u8BBE\u7F6E\u9ED8\u8BA4\u7684\u5B58\u50A8\u5F15\u64CE")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"innodb_file_per_table = on#\u4F7F\u7528\u72EC\u4EAB\u8868\u7A7A\u95F4")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"collation-server = utf8_general_ci #\u670D\u52A1\u5668\u7684\u9ED8\u8BA4\u6821\u5BF9\u89C4\u5219")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"character-set-server = utf8 #\u670D\u52A1\u5668\u5B89\u88C5\u65F6\u6307\u5B9A\u7684\u9ED8\u8BA4\u5B57\u7B26\u96C6\u8BBE\u5B9A")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"max_connections = 4096 #\u8BBE\u7F6EMySQL\u7684\u6700\u5927\u8FDE\u63A5\u6570\uFF0C\u751F\u4EA7\u8BF7\u6839\u636E\u5B9E\u9645\u60C5\u51B5\u8BBE\u7F6E\u3002")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])])]),s("li",null,[s("p",null,"\u542F\u52A8MySQL Server\u5E76\u8BBE\u7F6E\u5F00\u673A\u542F\u52A8")])],-1),Dt=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# systemctl enable mariadb.service ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# systemctl start mariadb.service")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),gt=s("ol",null,[s("li",null,"\u8FDB\u884C\u6570\u636E\u5E93\u5B89\u5168\u8BBE\u7F6E")],-1),mt=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# mysql_secure_installation")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),bt=s("ol",null,[s("li",null,"\u6570\u636E\u5E93\u521B\u5EFA")],-1),kt=s("p",null,"\u5728\u90E8\u7F72\u5B8CMySQL\u6570\u636E\u540E\uFF0C\u53EF\u4EE5\u5C06\u5404\u4E2A\u670D\u52A1\u7684\u6570\u636E\u5E93\u521B\u5EFA\u4E0A\uFF0C\u7ED9\u540E\u671F\u5B89\u88C5\u4F7F\u7528\u3002\u6CE8\u610F\u5728\u5B9E\u9645\u751F\u4EA7\u73AF\u5883\u4E2D\uFF0C\u4E00\u5B9A\u8981\u4F7F\u7528\u590D\u6742\u5EA6\u66F4\u9AD8\u7684\u5BC6\u7801\u548C\u505A\u597D\u8BBF\u95EE\u63A7\u5236\uFF0C\u8FD9\u91CC\u5B9E\u9A8C\u4F7F\u7528\u7528\u6237\u540D\u548C\u5BC6\u7801\u76F8\u540C\u3002",-1),vt=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# mysql -u root -p")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Enter password: ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u2026")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"MariaDB [(none)]>")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#Keystone\u6570\u636E\u5E93")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"CREATE DATABASE keystone;")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"GRANT ALL PRIVILEGES ON keystone.* TO 'keystone'@'localhost' IDENTIFIED BY 'keystone';")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"GRANT ALL PRIVILEGES ON keystone.* TO 'keystone'@'%' IDENTIFIED BY 'keystone';")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#Glance\u6570\u636E\u5E93")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"CREATE DATABASE glance;")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"GRANT ALL PRIVILEGES ON glance.* TO 'glance'@'localhost' IDENTIFIED BY 'glance';")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"GRANT ALL PRIVILEGES ON glance.* TO 'glance'@'%' IDENTIFIED BY 'glance';")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#Placement\u6570\u636E\u5E93")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"CREATE DATABASE placement;")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"GRANT ALL PRIVILEGES ON placement.* TO placement@'localhost' IDENTIFIED BY 'placement';")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"GRANT ALL PRIVILEGES ON placement.* TO placement@'%' IDENTIFIED BY 'placement';")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#Nova\u6570\u636E\u5E93")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"CREATE DATABASE nova;")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"GRANT ALL PRIVILEGES ON nova.* TO 'nova'@'localhost' IDENTIFIED BY 'nova';")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"GRANT ALL PRIVILEGES ON nova.* TO 'nova'@'%' IDENTIFIED BY 'nova';")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"CREATE DATABASE nova_api;")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"GRANT ALL PRIVILEGES ON nova_api.* TO 'nova'@'localhost' IDENTIFIED BY 'nova';")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"GRANT ALL PRIVILEGES ON nova_api.* TO 'nova'@'%' IDENTIFIED BY 'nova';")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"CREATE DATABASE nova_cell0;")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"GRANT ALL PRIVILEGES ON nova_cell0.* TO 'nova'@'localhost' IDENTIFIED BY 'nova';")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"GRANT ALL PRIVILEGES ON nova_cell0.* TO 'nova'@'%' IDENTIFIED BY 'nova';")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#Neutron \u6570\u636E\u5E93")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"CREATE DATABASE neutron;")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"GRANT ALL PRIVILEGES ON neutron.* TO 'neutron'@'localhost' IDENTIFIED BY 'neutron';")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"GRANT ALL PRIVILEGES ON neutron.* TO 'neutron'@'%' IDENTIFIED BY 'neutron';")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#Cinder\u6570\u636E\u5E93")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"CREATE DATABASE cinder;")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"GRANT ALL PRIVILEGES ON cinder.* TO 'cinder'@'localhost' IDENTIFIED BY 'cinder';")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"GRANT ALL PRIVILEGES ON cinder.* TO 'cinder'@'%' IDENTIFIED BY 'cinder';")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),xt=s("p",null,"\u6570\u636E\u5E93\u90E8\u7F72\u5B8C\u6BD5\u540E\uFF0C\u540E\u671F\u7684\u5F88\u591A\u64CD\u4F5C\u90FD\u53EF\u4EE5\u901A\u8FC7\u547D\u4EE4\uFF0C\u751A\u81F3\u76F4\u63A5\u4FEE\u6539\u6570\u636E\u5E93\u7684\u6570\u636E\u6765\u8FDB\u884C\u3002\u6CE8\u610F\uFF1A\u672C\u5B9E\u4F8B\u4E3A\u4E86\u7B80\u5316\u6B65\u9AA4\uFF0C\u4F7F\u7528\u4E86\u8F83\u4E3A\u7B80\u5355\u7684\u5BC6\u7801\uFF0C\u751F\u4EA7\u73AF\u5883\u8BF7\u8BBE\u7F6E\u7B26\u5408\u8FD0\u7EF4\u89C4\u8303\u7684\u590D\u6742\u5BC6\u7801\u6765\u8FDB\u884C\u66FF\u6362\u3002 \u6CE8\u610F\uFF1A\u4E00\u5B9A\u8981\u7ED9\u6570\u636E\u5E93\u505A\u597D\u76F8\u5173\u7684\u9AD8\u53EF\u7528\u548C\u5907\u4EFD\u63AA\u65BD\uFF0C\u50CF\u5BF9\u5F85\u751F\u6210\u4E1A\u52A1\u6570\u636E\u5E93\u4E00\u6837\u5BF9\u5F85\u5B83\u54E6\u3002",-1),ft=s("h3",{id:"\u6D88\u606F\u4EE3\u7406rabbitmq",tabindex:"-1"},[n("\u6D88\u606F\u4EE3\u7406RabbitMQ "),s("a",{class:"header-anchor",href:"#\u6D88\u606F\u4EE3\u7406rabbitmq","aria-hidden":"true"},"#")],-1),St=s("p",null,"OpenStack \u4F7F\u7528\uFF08Message broker\uFF09\u6D88\u606F\u4EE3\u7406\u5728\u5404\u4E2A\u670D\u52A1\u4E4B\u95F4\u8FDB\u884C\u534F\u8C03\u548C\u72B6\u6001\u7BA1\u7406\u3002OpenStack\u652F\u6301\u4E09\u79CD\u5F00\u6E90\u7684\u6D88\u606F\u961F\u5217\u670D\u52A1\u3002\u5206\u522B\u4E3ARabbitMQ\u3001Qpid\u3001ZeroMQ\u3002Openstack\u9ED8\u8BA4\u4F7F\u7528RabbitMQ\u3002 \u6D88\u606F\u961F\u5217\u5728OpenStack\u6574\u4E2A\u67B6\u6784\u4E2D\u626E\u6F14\u7740\u4EA4\u901A\u67A2\u7EBD\u7684\u4F5C\u7528\uFF0C\u6B63\u662F\u56E0\u4E3AOpenStack\u90E8\u7F72\u7684\u7075\u6D3B\u6027\u3001\u5404\u4E2A\u7EC4\u4EF6\u7684\u677E\u8026\u5408\u3001\u67B6\u6784\u7684\u6241\u5E73\u5316\uFF0C\u53CD\u800C\u4F7F\u5F97OpenStack\u66F4\u52A0\u4F9D\u8D56\u4E8E\u6D88\u606F\u961F\u5217\u3002OpenStack\u7684\u63A7\u5236\u3001\u8BA1\u7B97\u3001\u7F51\u7EDC\u4E0E\u5B58\u50A8\u670D\u52A1\u5747\u9700\u8981\u901A\u8FC7\u6D88\u606F\u961F\u5217\u8FDB\u884C\u901A\u4FE1\u3002 \u4F60\u53EF\u4EE5\u5C06RabbitMQ\u90E8\u7F72\u5728\u72EC\u7ACB\u7684\u670D\u52A1\u5668\u4E2D\uFF0C\u6216\u8005\u4F7F\u7528RabbitMQ\u96C6\u7FA4\u8FD9\u53D6\u51B3\u4E8E\u4F60\u7684\u5B9E\u9645\u60C5\u51B5\uFF0C\u5728\u5B9E\u9A8C\u73AF\u5883\uFF0C\u90E8\u7F72\u5728\u63A7\u5236\u8282\u70B9\u5373\u53EF\u3002",-1),Et=s("ol",null,[s("li",null,"\u5B89\u88C5RabbitMQ")],-1),Pt=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# yum install -y rabbitmq-server")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Nt=s("ol",null,[s("li",null,"\u8BBE\u7F6E\u5F00\u542F\u542F\u52A8\uFF0C\u5E76\u542F\u52A8RabbitMQ")],-1),Rt=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# systemctl enable rabbitmq-server.service")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# systemctl start rabbitmq-server.service")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Tt=s("ol",null,[s("li",null,"\u6DFB\u52A0openstack\u7528\u6237\u3002")],-1),It=s("p",null,"\u521B\u5EFA\u4E00\u4E2Aopenstack\u7528\u6237\uFF0C\u5BC6\u7801\u4E3Aopenstack\u3002\u6CE8\u610F\u5B9E\u9645\u4F7F\u7528\u4E2D\u8FDB\u884C\u5BC6\u7801\u4FEE\u6539\uFF0C\u8FD9\u91CC\u8BBE\u7F6E\u7684\u7528\u6237\u540D\u548C\u5BC6\u7801\u5728\u540E\u9762\u914D\u7F6EOpenStack\u7EC4\u4EF6\u7684\u65F6\u5019\u9700\u8981\u5728\u914D\u7F6E\u6587\u4EF6\u91CC\u9762\u8BBE\u7F6E\u3002",-1),Ot=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# rabbitmqctl add_user openstack openstack")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'Creating user "openstack" ...')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Mt=s("ol",null,[s("li",null,"\u7ED9\u521A\u624D\u521B\u5EFA\u7684openstack\u7528\u6237\uFF0C\u521B\u5EFA\u6743\u9650\u3002")],-1),wt=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'[root@linux-node1 ~]# rabbitmqctl set_permissions openstack ".*" ".*" ".*"')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'Setting permissions for user "openstack" in vhost "/" ...')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Kt=s("ol",null,[s("li",null,"\u542F\u7528Web\u76D1\u63A7\u63D2\u4EF6")],-1),Lt=s("p",null,[n("RabbitMQ\u81EA\u5E26\u4E86\u4E00\u4E2AWeb\u76D1\u63A7\u63D2\u4EF6\uFF0C\u53EF\u4EE5\u901A\u8FC7Web\u754C\u9762\u76D1\u63A7RabbitMQ\u7684\u8FD0\u884C\u72B6\u6001\u3002\u540C\u65F6\u4E5F\u63D0\u4F9B\u4E86HTTP API\u3002\u53EF\u4EE5\u65B9\u4FBF\u7684\u96C6\u6210\u5230Nagios\u3001Zabbix\u7B49\u76D1\u63A7\u5E73\u53F0\u4E0A\u3002 Web\u76D1\u63A7\u63D2\u4EF6\u542F\u7528\u540E\u5C31\u53EF\u4EE5\u901A\u8FC7"),s("a",{href:"http://ip:15672/%E6%9D%A5%E8%AE%BF%E9%97%AEweb%E7%AE%A1%E7%90%86%E7%95%8C%E9%9D%A2%E3%80%82",target:"_blank",rel:"noreferrer"},"http://IP:15672/\u6765\u8BBF\u95EEweb\u7BA1\u7406\u754C\u9762\u3002")],-1),Ut=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# rabbitmq-plugins list")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# rabbitmq-plugins enable rabbitmq_management")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\uFF08\u6CE8\uFF1A\u5982\u679C\u4E3B\u673A\u540D\u4E0D\u80FD\u89E3\u6790\uFF0CrabbitMQ\u5C06\u65E0\u6CD5\u542F\u52A8\u3002\u5728\u751F\u4EA7\u5E94\u7528\u65F6\u5EFA\u8BAE\u8BBE\u7F6E\u4E3A\u96C6\u7FA4\u6A21\u5F0F\uFF0C\u5EFA\u8BAE\u4E09\u4E2A\u8282\u70B9\u30021\u4E2A\u786C\u76D8\u8282\u70B9\u3001\u4E24\u4E2A\u5185\u5B58\u8282\u70B9\u3002\uFF09")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# lsof -i:15672")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"COMMAND  PID     USER   FD   TYPE DEVICE SIZE/OFF NODE NAME")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"beam    2620 rabbitmq   15u  IPv4  16805      0t0  TCP *:15672 (LISTEN)")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),jt=s("p",null,[n("\u9ED8\u8BA4\u60C5\u51B5\u4E0BRabbitMQ\u670D\u52A1\u4F7F\u75285672\u7AEF\u53E3\uFF0C\u800CWeb\u7BA1\u7406\u63D2\u4EF6\u76D1\u542C15672\u7AEF\u53E3\uFF0C\u76F4\u63A5\u5728\u6D4F\u89C8\u5668\u8F93\u5165"),s("a",{href:"http://192.168.56.11:15672/",target:"_blank",rel:"noreferrer"},"http://192.168.56.11:15672")],-1),Gt=s("blockquote",null,[s("p",null,"RabbitMQ\u9ED8\u8BA4\u7684\u7528\u6237\u540D\u548C\u5BC6\u7801\u5747\u4E3Aguest\u3002\u4E4B\u524D\u521B\u5EFA\u7684openstack\u7684\u7528\u6237\u662F\u65E0\u6CD5\u901A\u8FC7Web\u754C\u9762\u767B\u5F55\u7684\u3002")],-1),Ht=s("p",null,"\uFF08\u56FE2.2.2\uFF09",-1),Ft=s("blockquote",null,[s("p",null,"\u5B9E\u8DF5\u7ECF\u9A8C\uFF1A\u6D88\u606F\u961F\u5217\u6536\u53D1\u6D88\u606F\u7684\u6027\u80FD\u548C\u6D88\u606F\u961F\u5217\u7684HA\u80FD\u529B\u76F4\u63A5\u5F71\u54CDOpenStack\u7684\u6027\u80FD\u548C\u9AD8\u53EF\u7528\u3002\u5982\u679C\u6D88\u606F\u961F\u5217Down\u673A\uFF0COpenStack\u5C06\u65E0\u6CD5\u521B\u5EFA\u65B0\u7684\u4E91\u4E3B\u673A\uFF0C\u4EE5\u53CA\u8FDB\u884C\u5176\u5B83\u7684\u7BA1\u7406\u5DE5\u4F5C\u3002\u6240\u4EE5\u5728\u4F01\u4E1A\u751F\u4EA7\u73AF\u5883\u4E2D\uFF0C\u9700\u8981\u4F7F\u7528RabbitMQ\u7684\u96C6\u7FA4\u6765\u4FDD\u8BC1\u53EF\u7528\u6027\u3002\u540C\u65F6\u505A\u597D\u76D1\u63A7\u5DE5\u4F5C\uFF0CRabbitMQ\u81EA\u5E26HTTP\u7684API\uFF0C\u4FBF\u4E8E\u96C6\u6210\u5230\u4F01\u4E1A\u7684\u76D1\u63A7\u5E73\u53F0\u4E0A\u3002")],-1),Vt=s("h1",{id:"_1-3-openstack\u9A8C\u8BC1\u670D\u52A1keystone",tabindex:"-1"},[n("1.3 OpenStack\u9A8C\u8BC1\u670D\u52A1KeyStone "),s("a",{class:"header-anchor",href:"#_1-3-openstack\u9A8C\u8BC1\u670D\u52A1keystone","aria-hidden":"true"},"#")],-1),Bt=s("p",null,"Keystone\uFF08OpenStack Identity Service\uFF09\u662FOpenStack\u6846\u67B6\u4E2D\uFF0C\u8D1F\u8D23\u8EAB\u4EFD\u9A8C\u8BC1\u3001\u670D\u52A1\u89C4\u5219\u548C\u670D\u52A1\u4EE4\u724C\u7684\u529F\u80FD\uFF0C\u5B83\u5B9E\u73B0\u4E86OpenStack\u7684Identity API\u3002",-1),qt=s("p",null,"Keystone\u7C7B\u4F3C\u4E00\u4E2A\u670D\u52A1\u603B\u7EBF\uFF0C \u6216\u8005\u8BF4\u662F\u6574\u4E2AOpenStack\u6846\u67B6\u7684\u6CE8\u518C\u4E2D\u5FC3\uFF0C\u5176\u4ED6\u670D\u52A1\u901A\u8FC7keystone\u6765\u6CE8\u518C\u5176\u670D\u52A1\u7684Endpoint\uFF08\u670D\u52A1\u8BBF\u95EE\u7684URL\uFF09\uFF0C\u4EFB\u4F55\u670D\u52A1\u4E4B\u95F4\u76F8\u4E92\u7684\u8C03\u7528\uFF0C\u9700\u8981\u7ECF\u8FC7Keystone\u7684\u8EAB\u4EFD\u9A8C\u8BC1\uFF0C\u6765\u83B7\u5F97\u76EE\u6807\u670D\u52A1\u7684Endpoint\u6765\u627E\u5230\u76EE\u6807\u670D\u52A1\u3002",-1),Yt=s("h3",{id:"keystone\u6982\u8FF0",tabindex:"-1"},[n("Keystone\u6982\u8FF0 "),s("a",{class:"header-anchor",href:"#keystone\u6982\u8FF0","aria-hidden":"true"},"#")],-1),zt=s("p",null,"Keystone\u63D0\u4F9B\u4E86\u4EE5\u4E0B\u4E24\u4E2A\u4E3B\u8981\u7684\u529F\u80FD\uFF1A",-1),$t=s("ul",null,[s("li",null,"\u7528\u6237\u4E0E\u8BA4\u8BC1:\u7528\u6237\u6743\u9650\u4E0E\u7528\u6237\u884C\u4E3A\u8DDF\u8E2A\uFF1B"),s("li",null,"\u670D\u52A1\u76EE\u5F55:\u63D0\u4F9B\u4E00\u4E2A\u670D\u52A1\u76EE\u5F55\uFF0C\u5305\u62EC\u6240\u6709\u670D\u52A1\u9879\u4E0E\u76F8\u5173Api\u7684\u7AEF\u70B9\u3002")],-1),Xt=s("p",null,"\u4E0B\u9762\u6211\u4EEC\u4ECE\u8FD9\u4E24\u4E2A\u4E3B\u8981\u529F\u80FD\u6765\u4E86\u89E3Keystone\u7684\u6982\u5FF5\uFF0C\u548CKeystone\u5728Openstack\u4E2D\u7684\u4F5C\u7528\u3002",-1),Jt=s("ol",null,[s("li",null,[s("p",null,"Keystone\u7528\u6237\u4E0E\u8BA4\u8BC1"),s("p",null,"Keystone\u4E3A\u5404\u4E2AOpenstack\u7EC4\u4EF6\u63D0\u4F9B\u7528\u6237\u548C\u8BA4\u8BC1\u670D\u52A1\uFF0C\u5404\u4E2A\u7EC4\u4EF6\u90FD\u5FC5\u987B\u4E0EKeystone\u8FDB\u884C\u4EA4\u4E92\u3002\u6BD4\u5982\u767B\u9646\u8BA4\u8BC1\u662F\u7528\u6237\u5728\u8BBF\u95EEOpenstack\u5404\u4E2A\u7EC4\u4EF6\u4E2D\u7684API\u65F6\uFF0C\u5FC5\u987B\u901A\u8FC7Keystone\u7684\u7528\u6237\u540D\u548C\u5BC6\u7801\u9A8C\u8BC1\uFF0C\u6700\u7EC8\u901A\u8FC7Kyestone\u9A8C\u8BC1\u83B7\u53D6token\uFF0C\u5B8C\u6210\u5BF9\u7528\u6237\u7684\u767B\u9646\u8BA4\u8BC1\u3002\u5982\u679C\u8BA4\u8BC1\u5931\u8D25\uFF0C\u8BE5\u7528\u6237\u5C06\u4E0D\u80FD\u8BBF\u95EE\u8BE5API\u3002")])],-1),Wt=s("p",null,[s("strong",null,"User")],-1),Qt=s("p",null,"User\u5373\u7528\u6237\uFF0C\u5B83\u662F\u7528\u4E00\u4E2A\u6570\u5B57\u4EE3\u8868\u4F7F\u7528OpenStack\u4E91\u670D\u52A1\u7684\u4E00\u4E2A\u4EBA\u3001\u7CFB\u7EDF\u3001\u6216\u670D\u52A1\u3002\u8EAB\u4EFD\u9A8C\u8BC1\u670D\u52A1\u5C06\u4F1A\u9A8C\u8BC1\u4F20\u5165\u7684\u7531\u7528\u6237\u58F0\u660E\u5C06\u8C03\u7528\u7684\u8BF7\u6C42\u3002\u7528\u6237\u5982\u679C\u5DF2\u7ECF\u767B\u5F55\uFF0C\u53EF\u5C31\u80FD\u5206\u914D\u4EE4\u724C\uFF08tokens\uFF09\u8BBF\u95EE\u8D44\u6E90\u3002 \u7528\u6237\u53EF\u80FD\u88AB\u76F4\u63A5\u5206\u914D\u7ED9\u7279\u5B9A\u7684\u79DF\u6237\uFF0C\u7528\u6237\u884C\u4E3A\u88AB\u5305\u542B\u5728\u79DF\u6237\uFF08tenant\uFF09\uFF0CUsers\u901A\u8FC7\u8BA4\u8BC1\u4FE1\u606F\uFF08credentials\uFF0C\u5982\u5BC6\u7801\u3001API Keys\u7B49\uFF09\u8FDB\u884C\u9A8C\u8BC1\u3002",-1),Zt=s("p",null,[s("strong",null,"Credentials")],-1),sc=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Credentials\u5373\u8BC1\u4E66\uFF0C\u7528\u6237\u53EF\u4EE5\u901A\u8FC7\u8EAB\u4EFD\u9A8C\u8BC1\uFF0C\u4FDD\u8BC1\u6570\u636E\u901A\u5E38\u53EA\u88AB\u4E00\u4E2A\u7528\u6237\u5C5E\u4E8E\u6216\u62E5\u6709(\u56E0\u4E3A\u6CA1\u6709\u5176\u4ED6\u4EBA\u5E94\u8BE5\u77E5\u9053\u6570\u636E)\u3002")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),nc=s("p",null,"\u4EE5\u4E0B\u4E3A\u8BC1\u4E66\u7684\u4F8B\u5B50: \uF06C\u4E00\u4E2A\u5339\u914D\u7684\u7528\u6237\u540D\u548C\u5BC6\u7801 \uF06C\u4E00\u4E2A\u5339\u914D\u7684\u7528\u6237\u540D\u548CAPI\u952E \uF06C\u4E00\u4E2A\u8EAB\u4EFD\u8BA4\u8BC1\u4EE4\u724C",-1),lc=s("p",null,[s("strong",null,"Authentication")],-1),ec=s("p",null,"Authentication\u5373\u8BA4\u8BC1\uFF0C\u8BA4\u8BC1\u662F\u786E\u8BA4\u8EAB\u4EFD\u6216\u8BC6\u522B\u771F\u5B9E\u6027\u7684\u884C\u4E3A\u3002\u8EAB\u4EFD\u670D\u52A1\u901A\u8FC7\u4E0E\u7528\u6237\u7684\u4E00\u7EC4\u58F0\u660E\u9A8C\u8BC1\u4EE5\u786E\u8BA4\u4F20\u5165\u7684\u8BF7\u6C42\u662F\u7531\u8BE5\u7528\u6237\u58F0\u660E\u8FC7\u7684\u3002\u8FD9\u4E9B\u58F0\u660E\u88AB\u521D\u59CB\u5316\u4E3A\u4E00\u7EC4\u8BC1\u4E66 (username&password, or username and API key)\u3002\u521D\u59CB\u786E\u8BA4\u540E\uFF0C\u8EAB\u4EFD\u670D\u52A1\u5C06\u4F1A\u7ED9\u7528\u6237\u53D1\u5E03\u4E00\u4E2A\u786E\u8BA4\u8EAB\u4EFD\u7684\u4EE4\u724C(Token)\uFF0C\u5728\u7528\u6237\u968F\u540E\u7684\u8BF7\u6C42\u4E2D\u53EF\u4EE5\u4F7F\u7528\u8FD9\u4E2A\u4EE4\u724C\u6388\u6743\u8BBF\u95EE\u3002",-1),oc=s("p",null,[s("strong",null,"Token\uFF1A")],-1),ac=s("p",null,[n("Token\u5373\u4EE4\u724C\uFF0C\u662F\u4E00\u4E2A\u7528\u6237\u8BBF\u95EE\u8D44\u6E90\u7684\u4EFB\u610F\u6587\u672C\uFF0C\u6BCF\u4E00\u4E2A\u4EE4\u724C\u90FD\u6709\u4E00\u4E2A\u8303\u56F4\uFF0C\u63CF\u8FF0\u4E86\u53EF\u4EE5\u8BBF\u95EE\u54EA\u4E9B\u8D44\u6E90\u3002\u4EE4\u724C\u53EF\u80FD\u968F\u65F6\u64A4\u6D88\uFF0C\u662F\u6709\u6709\u6548\u671F\u7684\u3002\u8EAB\u4EFD\u8BA4\u8BC1\u662F\u652F\u6301\u4EE4\u724C\u8BA4\u8BC1\u7684\uFF0C\u5B83\u7684\u76EE\u7684\u4E3A\u5728\u672A\u6765\u652F\u6301\u989D\u5916\u7684\u534F\u8BAE\u3002\u5176\u76EE\u7684\u662F\u4E3A\u4E86\u8BA9\u5B83\u9996\u5148\u6210\u4E3A\u4E00\u79CD\u96C6\u6210\u670D\u52A1\uFF0C\u800C\u4E0D\u662F\u4E00\u79CD\u6E34\u671B\u6210\u4E3A\u4E30\u5BCC\u7684\u8EAB\u4EFD\u5B58\u50A8\u548C\u7BA1\u7406\u7684\u89E3\u51B3\u65B9\u6848\u3002 T "),s("strong",null,"Tenant\uFF1A")],-1),tc=s("p",null,"Tenant\u5373\u79DF\u6237\uFF0C\u5B83\u662F\u5404\u4E2A\u670D\u52A1\u4E2D\u7684\u4E00\u4E9B\u53EF\u4EE5\u8BBF\u95EE\u7684\u8D44\u6E90\u96C6\u5408\u3002\u5B83\u662F\u4E00\u4E2A\u5BB9\u5668\uFF0C\u7528\u4E8E\u7EC4\u7EC7\u548C\u9694\u79BB\u8D44\u6E90\uFF0C\u6216\u6807\u8BC6\u5BF9\u8C61\u3002\u4E00\u4E2A\u79DF\u6237\u53EF\u4EE5\u4E00\u4E2A\u5BA2\u6237\u3001\u8D26\u6237\u3001\u7EC4\u7EC7\u3001\u9879\u76EE\u7684\u6620\u5C04\u3002\u4F8B\u5982\uFF0C\u5728Nova\u4E2D\u4E00\u4E2Atenant\u53EF\u4EE5\u662F\u4E00\u4E9B\u673A\u5668\uFF0C\u5728Swift\u548CGlance\u4E2D\u4E00\u4E2Atenant\u53EF\u4EE5\u662F\u4E00\u4E9B\u955C\u50CF\u5B58\u50A8\uFF0C\u5728Neutron\u4E2D\u4E00\u4E2Atenant\u53EF\u4EE5\u662F\u4E00\u4E9B\u7F51\u7EDC\u8D44\u6E90\u3002Users\u9ED8\u8BA4\u7684\u603B\u662F\u7ED1\u5B9A\u5230\u67D0\u4E9Btenant\u4E0A\u3002",-1),cc=s("p",null,[s("strong",null,"Role\uFF1A")],-1),ic=s("p",null,"Role\u5373\u89D2\u8272\uFF0CRoles\u4EE3\u8868\u4E00\u7EC4\u7528\u6237\u53EF\u4EE5\u8BBF\u95EE\u7684\u8D44\u6E90\u6743\u9650\uFF0C\u4F8B\u5982Nova\u4E2D\u7684\u865A\u62DF\u673A\u3001Glance\u4E2D\u7684\u955C\u50CF\u3002Users\u53EF\u4EE5\u88AB\u6DFB\u52A0\u5230\u4EFB\u610F\u4E00\u4E2A\u5168\u5C40\u7684\u6216\u79DF\u6237\u5185\u7684\u89D2\u8272\u4E2D\u3002\u5728\u5168\u5C40\u7684role\u4E2D\uFF0C\u7528\u6237\u7684role\u6743\u9650\u4F5C\u7528\u4E8E\u6240\u6709\u7684\u79DF\u6237\uFF0C\u5373\u53EF\u4EE5\u5BF9\u6240\u6709\u7684\u79DF\u6237\u6267\u884Crole\u89C4\u5B9A\u7684\u6743\u9650\uFF1B\u5728\u79DF\u6237\u5185\u7684role\u4E2D\uFF0C\u7528\u6237\u4EC5\u80FD\u5728\u5F53\u524D\u79DF\u6237\u5185\u6267\u884Crole\u89C4\u5B9A\u7684\u6743\u9650\u3002",-1),rc=s("p",null,[s("strong",null,"Domain\uFF1A")],-1),pc=s("p",null,"\u5728KeyStone V3\u7248\u672C\u5C06 Tenant \u6539\u4E3A Project \u5E76\u5728\u5176\u4E0A\u6DFB\u52A0 Domain \u7684\u6982\u5FF5\uFF0C\u8FD9\u66F4\u52A0\u7B26\u5408\u73B0\u5B9E\u4E16\u754C\u548C\u4E91\u670D\u52A1\u7684\u6620\u5C04\u3002\u5229\u7528 Domain \u5B9E\u73B0\u771F\u6B63\u7684\u591A\u79DF\u6237\uFF08multi-tenancy\uFF09\u67B6\u6784\uFF0CDomain \u62C5\u4EFB Project \u7684\u9AD8\u5C42\u5BB9\u5668\u3002\u4E91\u670D\u52A1\u7684\u5BA2\u6237\u662F Domain \u7684\u6240\u6709\u8005\uFF0C\u4ED6\u4EEC\u53EF\u4EE5\u5728\u81EA\u5DF1\u7684 Domain \u4E2D\u521B\u5EFA\u591A\u4E2A Projects\u3001Users\u3001Groups \u548C Roles\u3002\u901A\u8FC7\u5F15\u5165 Domain\uFF0C\u4E91\u670D\u52A1\u5BA2\u6237\u53EF\u4EE5\u5BF9\u5176\u62E5\u6709\u7684\u591A\u4E2A Project \u8FDB\u884C\u7EDF\u4E00\u7BA1\u7406\uFF0C\u800C\u4E0D\u5FC5\u518D\u5411\u8FC7\u53BB\u90A3\u6837\u5BF9\u6BCF\u4E00\u4E2A Project \u8FDB\u884C\u5355\u72EC\u7BA1\u7406\u3002",-1),dc=s("p",null,[s("strong",null,"Group\uFF1A")],-1),Ac=s("p",null,"Group \u662F\u4E00\u7EC4 Users \u7684\u5BB9\u5668\uFF0C\u53EF\u4EE5\u5411 Group \u4E2D\u6DFB\u52A0\u7528\u6237\uFF0C\u5E76\u76F4\u63A5\u7ED9 Group \u5206\u914D\u89D2\u8272\uFF0C\u90A3\u4E48\u5728\u8FD9\u4E2A Group \u4E2D\u7684\u6240\u6709\u7528\u6237\u5C31\u90FD\u62E5\u6709\u4E86 Group \u6240\u62E5\u6709\u7684\u89D2\u8272\u6743\u9650\u3002\u901A\u8FC7\u5F15\u5165 Group \u7684\u6982\u5FF5\uFF0CKeystone V3 \u5B9E\u73B0\u4E86\u5BF9\u7528\u6237\u7EC4\u7684\u7BA1\u7406\uFF0C\u8FBE\u5230\u4E86\u540C\u65F6\u7BA1\u7406\u4E00\u7EC4\u7528\u6237\u6743\u9650\u7684\u76EE\u7684\u3002\u8FD9\u4E0E V2 \u4E2D\u76F4\u63A5\u5411 User/Project \u6307\u5B9A Role \u4E0D\u540C\uFF0C\u4F7F\u5F97\u5BF9\u4E91\u670D\u52A1\u8FDB\u884C\u7BA1\u7406\u66F4\u52A0\u4FBF\u6377\u3002 Domain\u3001Group\u3001Project\u3001User \u548C Role \u7684\u5173\u7CFB\u56FE",-1),Cc=s("p",null,"\u5982\u56FE 2 \u6240\u793A\uFF0C\u5728\u4E00\u4E2A Domain \u4E2D\u5305\u542B 3 \u4E2A Projects,\u53EF\u4EE5\u901A\u8FC7 Group1 \u5C06 Role Sysadmin\u76F4\u63A5\u8D4B\u4E88 Domain,\u90A3\u4E48 Group1 \u4E2D\u7684\u6240\u6709\u7528\u6237\u5C06\u4F1A\u5BF9 Domain \u4E2D\u7684\u6240\u6709 Projects \u90FD\u62E5\u6709\u7BA1\u7406\u5458\u6743\u9650\u3002\u4E5F\u53EF\u4EE5\u901A\u8FC7 Group2 \u5C06 Role Engineer \u53EA\u8D4B\u4E88 Project3,\u8FD9\u6837 Group2 \u4E2D\u7684 User \u5C31\u53EA\u62E5\u6709\u5BF9 Project3 \u76F8\u5E94\u7684\u6743\u9650\uFF0C\u800C\u4E0D\u4F1A\u5F71\u54CD\u5176\u5B83 Projects\u3002",-1),uc=s("ol",null,[s("li",null,[s("p",null,"Keystone\u670D\u52A1\u76EE\u5F55"),s("p",null,"\u4E0A\u6587\u8BF4\u8FC7\uFF0CKeystone\u9664\u4E86\u7528\u6237\u7BA1\u7406\u76F8\u5173\u7684\u652F\u6491\uFF0C\u8FD8\u6709\u4E00\u4E2A\u91CD\u8981\u7684\u4F5C\u7528\u662F\u4E00\u4E2A\u670D\u52A1\u76EE\u5F55\u3002KeyStone\u4E3AOpenstack\u5404\u4E2A\u670D\u52A1\u63D0\u4F9B\u4E86\u4E00\u4E2AREST API\u7AEF\u70B9\u5217\u8868\u3002")]),s("li",null,[s("p",null,"Service Service\u5373\u670D\u52A1\uFF0C\u5982Nova\u3001Glance\u3001Swift\u3002\u6839\u636E\u524D\u4E09\u4E2A\u6982\u5FF5\uFF08User\uFF0CTenant\u548CRole\uFF09\u4E00\u4E2A\u670D\u52A1\u53EF\u4EE5\u786E\u8BA4\u5F53\u524D\u7528\u6237\u662F\u5426\u5177\u6709\u8BBF\u95EE\u5176\u8D44\u6E90\u7684\u6743\u9650\u3002\u4F46\u662F\u5F53\u4E00\u4E2Auser\u5C1D\u8BD5\u7740\u8BBF\u95EE\u5176\u79DF\u6237\u5185\u7684service\u65F6\uFF0C\u4ED6\u5FC5\u987B\u77E5\u9053\u8FD9\u4E2Aservice\u662F\u5426\u5B58\u5728\u4EE5\u53CA\u5982\u4F55\u8BBF\u95EE\u8FD9\u4E2Aservice\uFF0C\u8FD9\u91CC\u901A\u5E38\u4F7F\u7528\u4E00\u4E9B\u4E0D\u540C\u7684\u540D\u79F0\u8868\u793A\u4E0D\u540C\u7684\u670D\u52A1\u3002\u5728\u4E0A\u6587\u4E2D\u8C08\u5230\u7684Role\uFF0C\u5B9E\u9645\u4E0A\u4E5F\u662F\u53EF\u4EE5\u7ED1\u5B9A\u5230\u67D0\u4E2Aservice\u7684\u3002")]),s("li",null,[s("p",null,[n("Endpoint Endpoint\uFF0C\u7FFB\u8BD1\u4E3A\u201C\u7AEF\u70B9\u201D\uFF0C\u6211\u4EEC\u53EF\u4EE5\u7406\u89E3\u5B83\u662F\u4E00\u4E2A\u670D\u52A1\u66B4\u9732\u51FA\u6765\u7684\u8BBF\u95EE\u70B9\uFF0C\u5982\u679C\u9700\u8981\u8BBF\u95EE\u4E00\u4E2A\u670D\u52A1\uFF0C\u5219\u5FC5\u987B\u77E5\u9053\u4ED6\u7684endpoint\u3002\u56E0\u6B64\uFF0C\u5728keystone\u4E2D\u5305\u542B\u4E00\u4E2Aendpoint\u6A21\u677F\uFF08endpoint template\uFF0C\u5728\u5B89\u88C5keystone\u7684\u65F6\u5019\u6211\u4EEC\u53EF\u4EE5\u5728conf\u6587\u4EF6\u5939\u4E0B\u770B\u5230\u8FD9\u4E2A\u6587\u4EF6\uFF09\uFF0C\u8FD9\u4E2A\u6A21\u677F\u63D0\u4F9B\u4E86\u6240\u6709\u5B58\u5728\u7684\u670D\u52A1endpoints\u4FE1\u606F\u3002\u4E00\u4E2Aendpoint template\u5305\u542B\u4E00\u4E2AURLs\u5217\u8868\uFF0C\u5217\u8868\u4E2D\u7684\u6BCF\u4E2AURL\u90FD\u5BF9\u5E94\u4E00\u4E2A\u670D\u52A1\u5B9E\u4F8B\u7684\u8BBF\u95EE\u5730\u5740\uFF0C\u5E76\u4E14\u5177\u6709public\u3001private\u548Cadmin\u8FD9\u4E09\u79CD\u6743\u9650\u3002public url\u53EF\u4EE5\u88AB\u5168\u5C40\u8BBF\u95EE\uFF08\u5982"),s("a",{href:"http://compute.example.com",target:"_blank",rel:"noreferrer"},"http://compute.example.com\uFF09\uFF0Cprivate"),n("%2Cprivate/) url\u53EA\u80FD\u88AB\u5C40\u57DF\u7F51\u8BBF\u95EE\uFF08\u5982"),s("a",{href:"http://compute.example.local",target:"_blank",rel:"noreferrer"},"http://compute.example.local\uFF09\uFF0Cadmin"),n("%2Cadmin/) url\u88AB\u4ECE\u5E38\u89C4\u7684\u8BBF\u95EE\u4E2D\u5206\u79BB\u3002")])])],-1),yc=s("h3",{id:"keystone\u90E8\u7F72",tabindex:"-1"},[n("KeyStone\u90E8\u7F72 "),s("a",{class:"header-anchor",href:"#keystone\u90E8\u7F72","aria-hidden":"true"},"#")],-1),hc=s("p",null,"OpenStack\u4E2D\u6240\u6709\u670D\u52A1\u7684\u5B89\u88C5\u53EF\u4EE5\u8BF4\u662F\u6700\u7B80\u5355\u7684\u3002\u590D\u6742\u7684\u5C31\u5728\u4E8E\u672C\u8EAB\u7684\u914D\u7F6E\u6587\u4EF6\u7684\u4FEE\u6539\u548C\u4E0EKeystone\u76F8\u5173\u7684\u914D\u7F6E\u3002\u8FD8\u8BB0\u5F97\u4E0A\u9762\u8BF4\u7684\uFF0COpenStack\u7684\u6BCF\u4E2A\u7EC4\u4EF6\u5982\u679C\u80FD\u591F\u4F7F\u7528\u90FD\u5FC5\u987B\u5728Keystone\u521B\u5EFAService\u548CEndpoint\u5417\uFF1F\u597D\u7684\uFF0C\u6211\u4EEC\u5F00\u59CB\u3002",-1),_c=s("ol",null,[s("li",null,"\u5B89\u88C5keystone")],-1),Dc=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# yum install -y openstack-keystone httpd mod_wsgi memcached python-memcached")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),gc=s("ol",null,[s("li",null,"\u8BBE\u7F6EMemcache\u5F00\u542F\u542F\u52A8\u5E76\u542F\u52A8Memcached")],-1),mc=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#keystone\u4F7F\u7528Memcached\u6765\u7F13\u5B58\u9A8C\u8BC1\u540E\u751F\u6210\u7684token\u3002")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# systemctl enable memcached.service")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# vim /etc/sysconfig/memcached")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'PORT="11211"')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'USER="memcached"')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'MAXCONN="1024"')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'CACHESIZE="64"')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'OPTIONS="-l 192.168.56.11,::1"')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# systemctl start memcached.service")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),bc=s("ol",null,[s("li",null,"Keystone\u914D\u7F6E")],-1),kc=s("p",null,"KeyStone\u7684\u914D\u7F6E\u53EA\u9700\u8981\u4FEE\u6539/etc/keystone/keystone.conf\u5373\u53EF\uFF0C\u6D89\u53CAAdmin Token\u548CMysql\u8FDE\u63A5\uFF0C\u5176\u5B83\u5747\u4F7F\u7528\u9ED8\u8BA4\u914D\u7F6E\u5373\u53EF\u3002\u6240\u6709\u914D\u7F6E\u6587\u4EF6\u90FD\u5B58\u653E\u5230/etc/keystone\uFF08\u9879\u76EE\u540D\uFF09\u76EE\u5F55\u4E0B\u3002\u65E5\u5FD7\u90FD\u5B58\u653E\u5728/var/log/keystone\uFF08\u9879\u76EE\u540D\uFF09\u76EE\u5F55\u4E0B\uFF0C\u5176\u5B83\u9879\u76EE\u4E5F\u662F\u5982\u6B64\u3002 \u597D\u7684\uFF0C\u6211\u4EEC\u6682\u505C\u4E00\u4E0B\uFF0C\u5728\u540E\u9762\u7684\u90E8\u7F72\u4E2D\uFF0C\u6211\u4EEC\u4F1A\u4F7F\u7528\u8FD9\u6837\u7684\u65B9\u5F0F\u5217\u51FA\u914D\u7F6E\uFF0C\u672A\u5217\u51FA\u7684\u914D\u7F6E\uFF0C\u4FDD\u6301\u9ED8\u8BA4\u4E0D\u8FDB\u884C\u4FEE\u6539\uFF0C\u9664\u975E\u7279\u522B\u63D0\u793A\u5230\u3002\u53E6\u5916\u8981\u6CE8\u610F\u914D\u7F6E\u7684\u4F4D\u7F6E\uFF0COpenStack\u6240\u6709\u670D\u52A1\u90FD\u4F1A\u6709[DEFAULT] [dtabase] \u8FD9\u6837\u7684\u914D\u7F6E\u90E8\u5206\uFF0C\u8BF7\u5728\u6587\u4E2D\u5217\u51FA\u7684\u914D\u7F6E\u90E8\u5206\u91CC\u9762\u8FDB\u884C\u914D\u7F6E\uFF0C\u5207\u8BB0\uFF01\u3002\u56E0\u4E3A\u786E\u5B9E\u6709\u76F8\u540C\u7684\u914D\u7F6E\u5B58\u5728\u5728\u4E0D\u540C\u7684\u914D\u7F6E\u7AEF\u7684\u60C5\u51B5\uFF0C\u8FD9\u6837\u4F8B\u5916\u60C5\u51B5\uFF0C\u5982\u679C\u6CA1\u6709\u6309\u8981\u6C42\u914D\u7F6E\uFF0C\u53EF\u80FD\u5C31\u65E0\u6CD5\u6B63\u5E38\u8FD0\u884C\u3002",-1),vc=s("ul",null,[s("li",null,[s("p",null,"\u914D\u7F6EKeyStone\u6570\u636E\u5E93"),s("p",null,"OpenStack\u4E2D\u6240\u6709\u670D\u52A1\u7684\u6570\u636E\u5E93\u540C\u6B65\u90FD\u9700\u8981\u4F9D\u8D56\u4E0E\u914D\u7F6E\u6587\u4EF6\u4E2D\u7684\u6570\u636E\u5E93\u8FDE\u63A5\u7684\u914D\u7F6E\uFF0C\u6240\u4EE5\u5FC5\u987B\u5148\u4FEE\u6539\u5B8C\u6BD5\u914D\u7F6E\u6587\u4EF6\u540E\uFF0C\u518D\u8FDB\u884C\u6570\u636E\u5E93\u7684\u521D\u59CB\u5316\u64CD\u4F5C\u3002"),s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# vim /etc/keystone/keystone.conf")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[database]")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"connection = mysql+pymysql://keystone:keystone@192.168.56.11/keystone")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])])]),s("li",null,[s("p",null,"\u8BBE\u7F6EToken\u548CMemcached")])],-1),xc=s("p",null,"\u5728\u4E4B\u524D\u7684KeyStone\u7248\u672C\u7531\u4E8E\u6240\u6709\u7684API\u901A\u4FE1\u90FD\u8981\u8BF7\u6C42Keystone\u6765\u751F\u4EA7Token\uFF0C\u4E4B\u524D\u662F\u5B58\u653E\u5728MySQL\u8868\u91CC\uFF0C\u5BFC\u81F4\u8868\u7279\u522B\u5927\uFF0C\u7ECF\u5E38\u9700\u8981\u624B\u52A8\u6E05\u7406\uFF0C\u800C\u4E14\u6027\u80FD\u4E0B\u964D\uFF0C\u73B0\u5728\u65B0\u7684\u7248\u672C\u6211\u4EEC\u53EF\u4EE5\u5B58\u653E\u5728memcache\u91CC\u9762\u4E86\u3002",-1),fc=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[token]")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"provider = fernet")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Sc=s("ul",null,[s("li",null,"\u540C\u6B65\u6570\u636E\u5E93\uFF1A")],-1),Ec=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'[root@linux-node1 ~]# su -s /bin/sh -c "keystone-manage db_sync" keystone')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Pc=s("blockquote",null,[s("p",null,"\u5C0F\u63D0\u793A\uFF1A\u4E3A\u4EC0\u4E48\u8981\u4F7F\u7528keystone\u7528\u6237\u6765\u540C\u6B65\u6570\u636E\u5462\uFF0C\u56E0\u4E3A\u540C\u6B65\u64CD\u4F5C\u4F1A\u751F\u4EA7\u65E5\u5FD7/var/log/keystone/keystone.log\uFF0C\u5982\u679C\u4F7F\u7528root\u7528\u6237\uFF0C\u90A3\u4E48\u751F\u6210\u7684\u6587\u4EF6\u6743\u9650\u4E3Aroot\u7528\u6237\uFF0Ckeystone\u542F\u52A8\u7684\u65F6\u5019\u6CA1\u6709\u6743\u9650\u8BFB\u53D6\u8BE5\u6587\u4EF6\uFF0C\u4F1A\u65E0\u6CD5\u542F\u52A8\u3002\u5982\u679C\u4F60\u7684\u540C\u6B65\u6267\u884C\u6709\u95EE\u9898\uFF0C\u90A3\u4E48\u53EF\u4EE5\u67E5\u770B\u65E5\u5FD7\u83B7\u53D6\u8BE6\u7EC6\u7684\u9519\u8BEF\u4FE1\u606F\u3002")],-1),Nc=s("ul",null,[s("li",null,"\u9A8C\u8BC1\u6570\u636E\u5E93\u521B\u5EFA\u662F\u5426\u6B63\u5E38\uFF1A")],-1),Rc=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'[root@linux-node1 ~]# mysql -h 192.168.56.11 -ukeystone -pkeystone -e "use keystone;show tables;"')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Tc=s("ol",null,[s("li",null,[s("p",null,"\u521D\u59CB\u5316fernet keys"),s("p",null,"\u751F\u6210\u5B8C\u6BD5\u4E4B\u540E\uFF0C\u4F1A\u521B\u5EFA/etc/keystone/fernet-keys\u76EE\u5F55"),s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# keystone-manage fernet_setup --keystone-user keystone --keystone-group keystone")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# keystone-manage credential_setup --keystone-user keystone --keystone-group keystone")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])])]),s("li",null,[s("p",null,"\u521D\u59CB\u5316keystone")])],-1),Ic=s("p",null,"\u8FD8\u8BB0\u5F97\u4E0A\u9762\u8BF4\u7684Openstack\u7684\u6BCF\u4E2A\u7EC4\u4EF6\u90FD\u5FC5\u987B\u5728Keystone\u4E0A\u8FDB\u884C\u6CE8\u518C\u3002\u5F53\u7136\u4E5F\u5305\u62ECKeystone\u672C\u8EAB\u3002\u8EAB\u4EFD\u8BA4\u8BC1\u670D\u52A1\u7BA1\u7406\u4E86\u4E00\u4E2A\u4E0E\u60A8\u73AF\u5883\u76F8\u5173\u7684 API \u7AEF\u70B9\u7684\u76EE\u5F55\u3002\u670D\u52A1\u4F7F\u7528\u8FD9\u4E2A\u76EE\u5F55\u6765\u51B3\u5B9A\u5982\u4F55\u4E0E\u60A8\u73AF\u5883\u4E2D\u7684\u5176\u4ED6\u670D\u52A1\u8FDB\u884C\u901A\u4FE1\u3002 OpenStack\u4F7F\u7528\u4E09\u4E2AAPI\u7AEF\u70B9\u53D8\u79CD\u4EE3\u8868\u6BCF\u79CD\u670D\u52A1\uFF1Aadmin\uFF0Cinternal\u548Cpublic\u3002\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u7BA1\u7406API\u7AEF\u70B9\u5141\u8BB8\u4FEE\u6539\u7528\u6237\u548C\u79DF\u6237\u800C\u516C\u5171\u548C\u5185\u90E8APIs\u4E0D\u5141\u8BB8\u8FD9\u4E9B\u64CD\u4F5C\u3002\u5728\u751F\u4EA7\u73AF\u5883\u4E2D\uFF0C\u5904\u4E8E\u5B89\u5168\u539F\u56E0\uFF0C\u53D8\u79CD\u4E3A\u4E86\u670D\u52A1\u4E0D\u540C\u7C7B\u578B\u7684\u7528\u6237\u53EF\u80FD\u9A7B\u7559\u5728\u5355\u72EC\u7684\u7F51\u7EDC\u4E0A\u3002 \u5BF9\u5B9E\u4F8B\u800C\u8A00\uFF0C\u516C\u5171API\u7F51\u7EDC\u4E3A\u4E86\u8BA9\u987E\u5BA2\u7BA1\u7406\u4ED6\u4EEC\u81EA\u5DF1\u7684\u4E91\u5728\u4E92\u8054\u7F51\u4E0A\u662F\u53EF\u89C1\u7684\u3002\u7BA1\u7406API\u7F51\u7EDC\u5728\u7BA1\u7406\u4E91\u57FA\u7840\u8BBE\u65BD\u7684\u7EC4\u7EC7\u4E2D\u64CD\u4F5C\u4E5F\u662F\u6709\u6240\u9650\u5236\u7684\u3002\u5185\u90E8API\u7F51\u7EDC\u53EF\u80FD\u4F1A\u88AB\u9650\u5236\u5728\u5305\u542BOpenStack\u670D\u52A1\u7684\u4E3B\u673A\u4E0A\u3002\u6B64\u5916\uFF0COpenStack\u652F\u6301\u53EF\u4F38\u7F29\u6027\u7684\u591A\u533A\u57DF\u3002\u4E3A\u4E86\u7B80\u5355\u8D77\u89C1\uFF0C\u6211\u4EEC\u8FD9\u91CC\u5747\u4F7F\u7528\u4E00\u4E2AIP\u5730\u5740\u3002192.168.56.11\u3002",-1),Oc=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# keystone-manage bootstrap --bootstrap-password admin \\")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}}," --bootstrap-admin-url http://192.168.56.11:5000/v3/ \\")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}}," --bootstrap-internal-url http://192.168.56.11:5000/v3/ \\")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}}," --bootstrap-public-url http://192.168.56.11:5000/v3/ \\")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}}," --bootstrap-region-id RegionOne")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Mc=s("ol",null,[s("li",null,"\u9A8C\u8BC1Keystone\u914D\u7F6E")],-1),wc=s("p",null,"\u4E0B\u9762\u6211\u5C06\u4E0A\u9762\u8FDB\u884C\u7684\u914D\u7F6E\u5217\u51FA\u6765\uFF0C\u4F9B\u8BFB\u8005\u8FDB\u884C\u6BD4\u5BF9\uFF0C\u914D\u7F6E\u5E94\u8BE5\u548C\u672C\u6587\u4FDD\u6301\u4E00\u81F4\u3002",-1),Kc=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'[root@linux-node1 ~]# grep "^[a-z]" /etc/keystone/keystone.conf ')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"connection = mysql+pymysql://keystone:keystone@192.168.56.11/keystone")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"provider = fernet")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Lc=s("ol",null,[s("li",null,"KeyStone\u542F\u52A8")],-1),Uc=s("p",null,"OpenStack Keystone\u4F7F\u7528Apache\u6765\u8FDB\u884C\u542F\u52A8\uFF0C\u63D0\u9AD8\u4E86\u6027\u80FD\u3002 \u914D\u7F6EServerName\uFF0C\u6CE8\u610F\u4E00\u5B9A\u8981\u914D\u7F6E\uFF0C\u4E0D\u7136\u4F1A\u6709\u5947\u602A\u7684\u95EE\u9898\u51FA\u73B0\u3002",-1),jc=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# vim /etc/httpd/conf/httpd.conf")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"ServerName 192.168.56.11:80")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u521B\u5EFA\u914D\u7F6E\u6587\u4EF6")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# ln -s /usr/share/keystone/wsgi-keystone.conf /etc/httpd/conf.d/")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Gc=s("p",null,"\u542F\u52A8keystone\uFF0C\u5E76\u67E5\u770B\u7AEF\u53E3\u3002",-1),Hc=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# systemctl enable httpd.service")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# systemctl start httpd.service")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# netstat -ntlp | grep httpd")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"tcp6       0      0 :::5000                 :::*              LISTEN      3408/httpd")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"tcp6       0      0 :::80                   :::*              LISTEN      3408/httpd")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u73B0\u5728\uFF0C\u5982\u679C\u4F60\u7684Keystone\u6CA1\u6709\u6B63\u5E38\u7684\u76D1\u542C\u7AEF\u53E3\uFF0C\u90A3\u4E48\u8BF7\u67E5\u770B\u65E5\u5FD7\uFF0C\u540E\u671F\u6211\u4EEC\u4F1A\u4E0D\u505C\u7684\u5F3A\u8C03\u8BFB\u8005\u901A\u8FC7\u67E5\u770B\u65E5\u5FD7\u6765\u6392\u67E5\u95EE\u9898\uFF0COpenStack\u7684\u65E5\u5FD7\u662F\u503C\u5F97\u4FE1\u8D56\u7684\u3002\u5982\u679C\u4F60\u60F3\u8BA9\u670B\u53CB\u5E2E\u52A9\u89E3\u51B3\u95EE\u9898\uFF0C\u8BF7\u4E0D\u8981\u4F7F\u7528\u65E5\u5FD7\u622A\u56FE\u7684\u65B9\u5F0F\uFF0C\u8BF7\u53D1\u9001\u5B8C\u6574\u7684\u65E5\u5FD7\u3002")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Fc=s("h3",{id:"keystone\u6743\u9650\u7BA1\u7406",tabindex:"-1"},[n("Keystone\u6743\u9650\u7BA1\u7406 "),s("a",{class:"header-anchor",href:"#keystone\u6743\u9650\u7BA1\u7406","aria-hidden":"true"},"#")],-1),Vc=s("p",null,"\u6211\u4EEC\u5DF2\u7ECF\u6210\u529F\u7684\u8FD0\u884C\u4E86Keystone\u670D\u52A1\uFF0C\u8981\u63D0\u4F9B\u8EAB\u4EFD\u8BA4\u8BC1\u670D\u52A1\uFF0C\u9700\u8981\u4F7F\u7528\u57DF\u3001\u9879\u76EE\u3001\u7528\u6237\u548C\u89D2\u8272\u7684\u7EC4\u5408\u3002 \u9996\u5148\u6211\u4EEC\u8981\u521B\u5EFA\u4E00\u4E2A\u8D85\u7EA7\u7BA1\u7406\u5458\u7528\u6237\u3001\u89D2\u8272\u548C\u9879\u76EE\u3002\u9ED8\u8BA4\u60C5\u51B5\u4E0B\u3002\u5728\u521B\u5EFA\u7528\u6237\u4E4B\u524D\uFF0C\u6211\u4EEC\u9700\u8981\u8FDE\u63A5\u5230Keystone\u3002\u95EE\u9898\u6765\u4E86\uFF0C\u73B0\u5728\u6211\u4EEC\u6CA1\u6709\u4EFB\u4F55\u7528\u6237\uFF0C\u6211\u4EEC\u5982\u4F55\u767B\u5F55KeyStone\u5462\uFF1F\u8FD9\u4E2A\u65F6\u5019ADMIN_TOKEN\u5C31\u53EF\u4EE5\u5E2E\u5FD9\u4E86\uFF0C\u6211\u4EEC\u53EF\u4EE5\u4F7F\u7528\u8FD9\u4E2A\u8D85\u7EA7\u5BC6\u7801\u76F4\u63A5\u767B\u5F55\u5230KeyStone\u4E0A\uFF0C\u6240\u4EE5\u8BF4\uFF0C\u4E00\u5B9A\u8981\u4FDD\u62A4\u597D\u4F60\u7684ADMIN_TOKEN\u3002 \u597D\u7684\uFF0C\u73B0\u5728\u6211\u4EEC\u8981\u8FDE\u63A5\u5230Keystone\u4E0A\uFF0C\u6709\u4E24\u79CD\u65B9\u6CD5\uFF1A",-1),Bc=s("ul",null,[s("li",null,"\u4F7F\u7528--os-token\u7B49\u53C2\u6570\u7684\u65B9\u5F0F\uFF08\u5C31\u662F\u901A\u8FC7\u53C2\u6570\u7684\u65B9\u5F0F\uFF09"),s("li",null,"\u4F7F\u7528\u73AF\u5883\u53D8\u91CF\uFF08\u5C06\u53C2\u6570\u8BBE\u7F6E\u4E3A\u73AF\u5883\u53D8\u91CF\uFF0Ckeystone\u76F4\u63A5\u8BFB\u53D6\u73AF\u5883\u53D8\u91CF\uFF09"),s("li",null,"\u8BBE\u7F6E\u73AF\u5883\u53D8\u91CF")],-1),qc=s("p",null,"\u5728\u8FD9\u91CC\uFF0C\u6211\u4EEC\u4F7F\u7528\u4E09\u4E2A\u73AF\u5883\u53D8\u91CF\u7528\u6765\u8FDE\u63A5keystone\u3002admin\u7528\u6237\u548C\u5BC6\u7801\u5C31\u662F\u6211\u4EEC\u524D\u9762\u4F7F\u7528keystone-manage bootstrap\u521D\u59CB\u5316\u7684\u3002",-1),Yc=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"export OS_USERNAME=admin")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"export OS_PASSWORD=admin")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"export OS_PROJECT_NAME=admin")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"export OS_USER_DOMAIN_NAME=Default")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"export OS_PROJECT_DOMAIN_NAME=Default")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"export OS_AUTH_URL=http://192.168.56.11:5000/v3")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"export OS_IDENTITY_API_VERSION=3")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),zc=s("p",null,"\u8BF7\u6CE8\u610F\u73AF\u5883\u53D8\u91CF\u7684\u95EE\u9898\uFF0C\u4E0D\u8981\u6253\u5F00\u65B0\u7684\u4F1A\u8BDD\u8FDB\u884C\u64CD\u4F5C\u3002",-1),$c=s("ol",null,[s("li",null,"\u521B\u5EFA\u5B9E\u9A8C\u7528\u7684demo\u9879\u76EE\u3001\u7528\u6237\u548C\u89D2\u8272")],-1),Xc=s("p",null,"\u4E0B\u9762\u6211\u4EEC\u521B\u5EFA\u4E00\u4E2A\u666E\u901A\u7528\u6237\u548C\u79DF\u6237\uFF0C\u6211\u4EEC\u4E0B\u9762\u7684\u5B9E\u9A8C\u5747\u4F7F\u7528\u8FD9\u4E2A\u666E\u901A\u7528\u6237\u8FDB\u884COpenstack\u7684\u7BA1\u7406\u3002",-1),Jc=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'# openstack domain create --description "An Example Domain" example')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'# openstack project create --domain default --description "Demo Project" myproject')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# openstack user create --domain default --password-prompt myuser")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# openstack role create myrole")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# openstack role add --project myproject --user myuser myrole")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Wc=s("blockquote",null,[s("p",null,"\u5728\u521B\u5EFA\u7528\u6237\u7684\u65F6\u5019\u53EF\u4EE5\u4F7F\u7528--password-prompt\uFF0C\u7136\u540E\u6839\u636E\u63D0\u793A\u8F93\u5165\u5BC6\u7801")],-1),Qc=s("ol",null,[s("li",null,[s("p",null,"\u521B\u5EFA\u4E00\u4E2A\u670D\u52A1\u7684\u9879\u76EE"),s("p",null,"OpenStack\u670D\u52A1\u4E5F\u9700\u8981\u4F7F\u7528\u7528\u6237\u540D\u3001\u79DF\u6237\u548C\u89D2\u8272\uFF0C\u7528\u6765\u8BBF\u95EEOpenStack\u7684\u5404\u4E2A\u670D\u52A1\u3002"),s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'# openstack project create --domain default --description "Service Project" service')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])])]),s("li",null,[s("p",null,"\u521B\u5EFA\u5404\u4E2A\u670D\u52A1\u8FDE\u63A5Keystone\u7684\u8D26\u6237 \u540E\u9762\u6211\u4EEC\u90E8\u7F72\u7684\u5176\u5B83\u670D\u52A1\u90FD\u9700\u8981\u5230Keystone\u4E0A\u8FDB\u884C\u8BA4\u8BC1\uFF0C\u6240\u4EE5\u73B0\u5728\u5C31\u53EF\u4EE5\u63D0\u524D\u5C06\u5404\u4E2A\u670D\u52A1\u7684\u8D26\u53F7\u521B\u5EFA\u4E0A\u3002\u5E76\u5168\u90E8\u52A0\u5165service\u9879\u76EE\u3002"),s("ul",null,[s("li",null,[s("p",null,"\u521B\u5EFAglance\u7528\u6237"),s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# openstack user create --domain default --password glance glance")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# openstack role add --project service --user glance admin")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])])]),s("li",null,[s("p",null,"\u521B\u5EFAnova\u7528\u6237"),s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# openstack user create --domain default --password nova nova")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# openstack role add --project service --user nova admin")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])])]),s("li",null,[s("p",null,"\u521B\u5EFAplacement\u7528\u6237"),s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# openstack user create --domain default --password placement placement")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# openstack role add --project service --user placement admin")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])])]),s("li",null,[s("p",null,"\u521B\u5EFANeutron\u7528\u6237"),s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# openstack user create --domain default --password neutron neutron")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# openstack role add --project service --user neutron admin")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])])]),s("li",null,[s("p",null,"\u521B\u5EFAcinder\u7528\u6237"),s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# openstack user create --domain default --password cinder cinder")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# openstack role add --project service --user cinder admin")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])])])])])],-1),Zc=s("h3",{id:"\u9A8C\u8BC1keystone\u5B89\u88C5",tabindex:"-1"},[n("\u9A8C\u8BC1Keystone\u5B89\u88C5 "),s("a",{class:"header-anchor",href:"#\u9A8C\u8BC1keystone\u5B89\u88C5","aria-hidden":"true"},"#")],-1),si=s("p",null,"\u9996\u5148\uFF0C\u6211\u4EEC\u9700\u8981\u53D6\u6D88OS_TOKEN\u548COS_URL\u8FD9\u4E24\u4E2A\u53D8\u91CF\u3002\u8FD9\u4E24\u4E2A\u53D8\u91CF\u662F\u7528\u4E8E\u5F15\u5BFC\u6211\u4EEC\u521B\u5EFAAdmin\u7528\u6237\u548CKeystone\u670D\u52A1\u81EA\u8EABService\u548CEndpoint\u6CE8\u518C\u65F6\u5019\u7684\u7528\u7684\uFF0C\u73B0\u5728\u5DF2\u7ECF\u4E0D\u9700\u8981\u4E86\u3002",-1),ni=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# unset OS_AUTH_URL OS_PASSWORD")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),li=s("p",null,[s("strong",null,"\u6D4B\u8BD5admin\u7528\u6237")],-1),ei=s("p",null,"\u5BC6\u7801\u4E3Aadmin\uFF0C\u9700\u8981\u8F93\u5165\u4E24\u6B21\uFF0C\u5982\u679C\u80FD\u6B63\u5E38\u83B7\u53D6token\u8BF4\u660E\u914D\u7F6E\u6210\u529F\u3002",-1),oi=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# openstack --os-auth-url http://192.168.56.11:5000/v3 \\")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"--os-project-domain-name Default --os-user-domain-name Default \\")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"--os-project-name admin --os-username admin token issue")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Password:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u2026")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#\u5BC6\u7801\u4E3Aadmin\uFF0C\u9700\u8981\u8F93\u5165\u4E24\u6B21\uFF0C\u5982\u679C\u80FD\u6B63\u5E38\u83B7\u53D6token\u8BF4\u660E\u914D\u7F6E\u6210\u529F\u3002")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),ai=s("p",null,[s("strong",null,"\u6D4B\u8BD5myuser\u7528\u6237")],-1),ti=s("p",null,"\u5BC6\u7801\u4E3A\u4F60\u8BBE\u7F6E\u7684\uFF0C\u9700\u8981\u8F93\u5165\u4E24\u6B21\uFF0C\u5982\u679C\u80FD\u6B63\u5E38\u83B7\u53D6token\u8BF4\u660E\u914D\u7F6E\u6210\u529F\u3002",-1),ci=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# openstack --os-auth-url http://192.168.56.11:5000/v3 \\")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"--os-project-domain-name Default --os-user-domain-name Default \\")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"--os-project-name myproject --os-username myuser token issue")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Password:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u2026")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),ii=s("h3",{id:"\u73AF\u5883\u53D8\u91CF\u811A\u672C\u914D\u7F6E",tabindex:"-1"},[n("\u73AF\u5883\u53D8\u91CF\u811A\u672C\u914D\u7F6E "),s("a",{class:"header-anchor",href:"#\u73AF\u5883\u53D8\u91CF\u811A\u672C\u914D\u7F6E","aria-hidden":"true"},"#")],-1),ri=s("p",null,"\u4F7F\u7528Keystone\u547D\u4EE4\u6709\u4E24\u79CD\u65B9\u5F0F\uFF0C\u7B2C\u4E00\u79CD\u5C31\u50CF\u4E0A\u9762\u3002\u6211\u4EEC\u4F7F\u7528\u6307\u5B9A--os-username\u3001--os-password\u548C--os-password\u8FD9\u6837\u7684\u9009\u9879\u6765\u8FDB\u884C\u64CD\u4F5C\uFF0C\u4F46\u662F\u8FD9\u6837\u5728\u6211\u4EEC\u65E5\u5E38\u64CD\u4F5C\u4E2D\u4F1A\u6BD4\u8F83\u9EBB\u70E6\u3002\u7B2C\u4E8C\u79CD\u65B9\u5F0F\u5C31\u662F\u4F7F\u7528\u73AF\u5883\u53D8\u91CF\uFF0C\u8FD9\u6837\u53EF\u4EE5\u907F\u514D\u6BCF\u6B21\u4F7F\u7528\u90FD\u8981\u5236\u5B9A\u53D8\u91CF\u3002\u6211\u4EEC\u5C06\u8FD9\u4E9B\u5E38\u7528\u7684\u53D8\u91CF\u8BBE\u7F6E\u4E3A\u73AF\u5883\u53D8\u91CF\u3002 \u4E0B\u9762\u5EFA\u7ACB\u73AF\u5883\u53D8\u91CF\u4E3A\u5176\u5B83\u670D\u52A1\u90E8\u7F72\u548C\u914D\u7F6E\u4F7F\u7528",-1),pi=s("ol",null,[s("li",null,"\u8BBE\u7F6Eadmin\u73AF\u5883\u53D8\u91CF\u811A\u672C")],-1),di=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# vim /root/admin-openstack.sh")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"export OS_PROJECT_DOMAIN_NAME=Default")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"export OS_USER_DOMAIN_NAME=Default")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"export OS_PROJECT_NAME=admin")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"export OS_USERNAME=admin")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"export OS_PASSWORD=admin")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"export OS_AUTH_URL=http://192.168.56.11:5000/v3")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"export OS_IDENTITY_API_VERSION=3")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"export OS_IMAGE_API_VERSION=2")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Ai=s("ol",null,[s("li",null,"\u521B\u5EFA\u666E\u901A\u7528\u6237\u7684\u73AF\u5883\u53D8\u91CF\u811A\u672C")],-1),Ci=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# vim /root/demo-openstack.sh")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"export OS_PROJECT_DOMAIN_NAME=Default")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"export OS_USER_DOMAIN_NAME=Default")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"export OS_PROJECT_NAME=myproject")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"export OS_USERNAME=myuser")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"export OS_PASSWORD=123.com")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"export OS_AUTH_URL=http://192.168.56.11:5000/v3")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"export OS_IDENTITY_API_VERSION=3")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"export OS_IMAGE_API_VERSION=2")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),ui=s("p",null,"\u521B\u5EFA\u5B8C\u6BD5\u53D8\u91CF\u540E\uFF0C\u5728\u540E\u671F\u4F7F\u7528\u67D0\u4E2A\u8D26\u6237\u7684\u6743\u9650\uFF0C\u53EA\u9700\u8981source\u4E00\u4E0B\u5C31\u53EF\u4EE5\u4F7F\u7528\uFF0C\u4F8B\u5982\uFF1A",-1),yi=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# source /root/admin-openstack.sh")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# openstack token issue")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),hi=s("p",null,"\u6D4B\u8BD5demo\u7528\u6237\uFF0C\u662F\u5426\u80FD\u591F\u83B7\u53D6token",-1),_i=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# source /root/demo-openstack.sh ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# openstack token issue")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Di=s("h1",{id:"_1-3-openstack\u9A8C\u8BC1\u670D\u52A1keystone-1",tabindex:"-1"},[n("1.3 OpenStack\u9A8C\u8BC1\u670D\u52A1KeyStone "),s("a",{class:"header-anchor",href:"#_1-3-openstack\u9A8C\u8BC1\u670D\u52A1keystone-1","aria-hidden":"true"},"#")],-1),gi=s("p",null,"Keystone\uFF08OpenStack Identity Service\uFF09\u662FOpenStack\u6846\u67B6\u4E2D\uFF0C\u8D1F\u8D23\u8EAB\u4EFD\u9A8C\u8BC1\u3001\u670D\u52A1\u89C4\u5219\u548C\u670D\u52A1\u4EE4\u724C\u7684\u529F\u80FD\uFF0C\u5B83\u5B9E\u73B0\u4E86OpenStack\u7684Identity API\u3002",-1),mi=s("p",null,"Keystone\u7C7B\u4F3C\u4E00\u4E2A\u670D\u52A1\u603B\u7EBF\uFF0C \u6216\u8005\u8BF4\u662F\u6574\u4E2AOpenStack\u6846\u67B6\u7684\u6CE8\u518C\u4E2D\u5FC3\uFF0C\u5176\u4ED6\u670D\u52A1\u901A\u8FC7keystone\u6765\u6CE8\u518C\u5176\u670D\u52A1\u7684Endpoint\uFF08\u670D\u52A1\u8BBF\u95EE\u7684URL\uFF09\uFF0C\u4EFB\u4F55\u670D\u52A1\u4E4B\u95F4\u76F8\u4E92\u7684\u8C03\u7528\uFF0C\u9700\u8981\u7ECF\u8FC7Keystone\u7684\u8EAB\u4EFD\u9A8C\u8BC1\uFF0C\u6765\u83B7\u5F97\u76EE\u6807\u670D\u52A1\u7684Endpoint\u6765\u627E\u5230\u76EE\u6807\u670D\u52A1\u3002",-1),bi=s("h3",{id:"keystone\u6982\u8FF0-1",tabindex:"-1"},[n("Keystone\u6982\u8FF0 "),s("a",{class:"header-anchor",href:"#keystone\u6982\u8FF0-1","aria-hidden":"true"},"#")],-1),ki=s("p",null,"Keystone\u63D0\u4F9B\u4E86\u4EE5\u4E0B\u4E24\u4E2A\u4E3B\u8981\u7684\u529F\u80FD\uFF1A",-1),vi=s("ul",null,[s("li",null,"\u7528\u6237\u4E0E\u8BA4\u8BC1:\u7528\u6237\u6743\u9650\u4E0E\u7528\u6237\u884C\u4E3A\u8DDF\u8E2A\uFF1B"),s("li",null,"\u670D\u52A1\u76EE\u5F55:\u63D0\u4F9B\u4E00\u4E2A\u670D\u52A1\u76EE\u5F55\uFF0C\u5305\u62EC\u6240\u6709\u670D\u52A1\u9879\u4E0E\u76F8\u5173Api\u7684\u7AEF\u70B9\u3002")],-1),xi=s("p",null,"\u4E0B\u9762\u6211\u4EEC\u4ECE\u8FD9\u4E24\u4E2A\u4E3B\u8981\u529F\u80FD\u6765\u4E86\u89E3Keystone\u7684\u6982\u5FF5\uFF0C\u548CKeystone\u5728Openstack\u4E2D\u7684\u4F5C\u7528\u3002",-1),fi=s("ol",null,[s("li",null,[s("p",null,"Keystone\u7528\u6237\u4E0E\u8BA4\u8BC1"),s("p",null,"Keystone\u4E3A\u5404\u4E2AOpenstack\u7EC4\u4EF6\u63D0\u4F9B\u7528\u6237\u548C\u8BA4\u8BC1\u670D\u52A1\uFF0C\u5404\u4E2A\u7EC4\u4EF6\u90FD\u5FC5\u987B\u4E0EKeystone\u8FDB\u884C\u4EA4\u4E92\u3002\u6BD4\u5982\u767B\u9646\u8BA4\u8BC1\u662F\u7528\u6237\u5728\u8BBF\u95EEOpenstack\u5404\u4E2A\u7EC4\u4EF6\u4E2D\u7684API\u65F6\uFF0C\u5FC5\u987B\u901A\u8FC7Keystone\u7684\u7528\u6237\u540D\u548C\u5BC6\u7801\u9A8C\u8BC1\uFF0C\u6700\u7EC8\u901A\u8FC7Kyestone\u9A8C\u8BC1\u83B7\u53D6token\uFF0C\u5B8C\u6210\u5BF9\u7528\u6237\u7684\u767B\u9646\u8BA4\u8BC1\u3002\u5982\u679C\u8BA4\u8BC1\u5931\u8D25\uFF0C\u8BE5\u7528\u6237\u5C06\u4E0D\u80FD\u8BBF\u95EE\u8BE5API\u3002")])],-1),Si=s("p",null,[s("strong",null,"User")],-1),Ei=s("p",null,"User\u5373\u7528\u6237\uFF0C\u5B83\u662F\u7528\u4E00\u4E2A\u6570\u5B57\u4EE3\u8868\u4F7F\u7528OpenStack\u4E91\u670D\u52A1\u7684\u4E00\u4E2A\u4EBA\u3001\u7CFB\u7EDF\u3001\u6216\u670D\u52A1\u3002\u8EAB\u4EFD\u9A8C\u8BC1\u670D\u52A1\u5C06\u4F1A\u9A8C\u8BC1\u4F20\u5165\u7684\u7531\u7528\u6237\u58F0\u660E\u5C06\u8C03\u7528\u7684\u8BF7\u6C42\u3002\u7528\u6237\u5982\u679C\u5DF2\u7ECF\u767B\u5F55\uFF0C\u53EF\u5C31\u80FD\u5206\u914D\u4EE4\u724C\uFF08tokens\uFF09\u8BBF\u95EE\u8D44\u6E90\u3002 \u7528\u6237\u53EF\u80FD\u88AB\u76F4\u63A5\u5206\u914D\u7ED9\u7279\u5B9A\u7684\u79DF\u6237\uFF0C\u7528\u6237\u884C\u4E3A\u88AB\u5305\u542B\u5728\u79DF\u6237\uFF08tenant\uFF09\uFF0CUsers\u901A\u8FC7\u8BA4\u8BC1\u4FE1\u606F\uFF08credentials\uFF0C\u5982\u5BC6\u7801\u3001API Keys\u7B49\uFF09\u8FDB\u884C\u9A8C\u8BC1\u3002",-1),Pi=s("p",null,[s("strong",null,"Credentials")],-1),Ni=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Credentials\u5373\u8BC1\u4E66\uFF0C\u7528\u6237\u53EF\u4EE5\u901A\u8FC7\u8EAB\u4EFD\u9A8C\u8BC1\uFF0C\u4FDD\u8BC1\u6570\u636E\u901A\u5E38\u53EA\u88AB\u4E00\u4E2A\u7528\u6237\u5C5E\u4E8E\u6216\u62E5\u6709(\u56E0\u4E3A\u6CA1\u6709\u5176\u4ED6\u4EBA\u5E94\u8BE5\u77E5\u9053\u6570\u636E)\u3002")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Ri=s("p",null,"\u4EE5\u4E0B\u4E3A\u8BC1\u4E66\u7684\u4F8B\u5B50: \uF06C\u4E00\u4E2A\u5339\u914D\u7684\u7528\u6237\u540D\u548C\u5BC6\u7801 \uF06C\u4E00\u4E2A\u5339\u914D\u7684\u7528\u6237\u540D\u548CAPI\u952E \uF06C\u4E00\u4E2A\u8EAB\u4EFD\u8BA4\u8BC1\u4EE4\u724C",-1),Ti=s("p",null,[s("strong",null,"Authentication")],-1),Ii=s("p",null,"Authentication\u5373\u8BA4\u8BC1\uFF0C\u8BA4\u8BC1\u662F\u786E\u8BA4\u8EAB\u4EFD\u6216\u8BC6\u522B\u771F\u5B9E\u6027\u7684\u884C\u4E3A\u3002\u8EAB\u4EFD\u670D\u52A1\u901A\u8FC7\u4E0E\u7528\u6237\u7684\u4E00\u7EC4\u58F0\u660E\u9A8C\u8BC1\u4EE5\u786E\u8BA4\u4F20\u5165\u7684\u8BF7\u6C42\u662F\u7531\u8BE5\u7528\u6237\u58F0\u660E\u8FC7\u7684\u3002\u8FD9\u4E9B\u58F0\u660E\u88AB\u521D\u59CB\u5316\u4E3A\u4E00\u7EC4\u8BC1\u4E66 (username&password, or username and API key)\u3002\u521D\u59CB\u786E\u8BA4\u540E\uFF0C\u8EAB\u4EFD\u670D\u52A1\u5C06\u4F1A\u7ED9\u7528\u6237\u53D1\u5E03\u4E00\u4E2A\u786E\u8BA4\u8EAB\u4EFD\u7684\u4EE4\u724C(Token)\uFF0C\u5728\u7528\u6237\u968F\u540E\u7684\u8BF7\u6C42\u4E2D\u53EF\u4EE5\u4F7F\u7528\u8FD9\u4E2A\u4EE4\u724C\u6388\u6743\u8BBF\u95EE\u3002",-1),Oi=s("p",null,[s("strong",null,"Token\uFF1A")],-1),Mi=s("p",null,[n("Token\u5373\u4EE4\u724C\uFF0C\u662F\u4E00\u4E2A\u7528\u6237\u8BBF\u95EE\u8D44\u6E90\u7684\u4EFB\u610F\u6587\u672C\uFF0C\u6BCF\u4E00\u4E2A\u4EE4\u724C\u90FD\u6709\u4E00\u4E2A\u8303\u56F4\uFF0C\u63CF\u8FF0\u4E86\u53EF\u4EE5\u8BBF\u95EE\u54EA\u4E9B\u8D44\u6E90\u3002\u4EE4\u724C\u53EF\u80FD\u968F\u65F6\u64A4\u6D88\uFF0C\u662F\u6709\u6709\u6548\u671F\u7684\u3002\u8EAB\u4EFD\u8BA4\u8BC1\u662F\u652F\u6301\u4EE4\u724C\u8BA4\u8BC1\u7684\uFF0C\u5B83\u7684\u76EE\u7684\u4E3A\u5728\u672A\u6765\u652F\u6301\u989D\u5916\u7684\u534F\u8BAE\u3002\u5176\u76EE\u7684\u662F\u4E3A\u4E86\u8BA9\u5B83\u9996\u5148\u6210\u4E3A\u4E00\u79CD\u96C6\u6210\u670D\u52A1\uFF0C\u800C\u4E0D\u662F\u4E00\u79CD\u6E34\u671B\u6210\u4E3A\u4E30\u5BCC\u7684\u8EAB\u4EFD\u5B58\u50A8\u548C\u7BA1\u7406\u7684\u89E3\u51B3\u65B9\u6848\u3002 T "),s("strong",null,"Tenant\uFF1A")],-1),wi=s("p",null,"Tenant\u5373\u79DF\u6237\uFF0C\u5B83\u662F\u5404\u4E2A\u670D\u52A1\u4E2D\u7684\u4E00\u4E9B\u53EF\u4EE5\u8BBF\u95EE\u7684\u8D44\u6E90\u96C6\u5408\u3002\u5B83\u662F\u4E00\u4E2A\u5BB9\u5668\uFF0C\u7528\u4E8E\u7EC4\u7EC7\u548C\u9694\u79BB\u8D44\u6E90\uFF0C\u6216\u6807\u8BC6\u5BF9\u8C61\u3002\u4E00\u4E2A\u79DF\u6237\u53EF\u4EE5\u4E00\u4E2A\u5BA2\u6237\u3001\u8D26\u6237\u3001\u7EC4\u7EC7\u3001\u9879\u76EE\u7684\u6620\u5C04\u3002\u4F8B\u5982\uFF0C\u5728Nova\u4E2D\u4E00\u4E2Atenant\u53EF\u4EE5\u662F\u4E00\u4E9B\u673A\u5668\uFF0C\u5728Swift\u548CGlance\u4E2D\u4E00\u4E2Atenant\u53EF\u4EE5\u662F\u4E00\u4E9B\u955C\u50CF\u5B58\u50A8\uFF0C\u5728Neutron\u4E2D\u4E00\u4E2Atenant\u53EF\u4EE5\u662F\u4E00\u4E9B\u7F51\u7EDC\u8D44\u6E90\u3002Users\u9ED8\u8BA4\u7684\u603B\u662F\u7ED1\u5B9A\u5230\u67D0\u4E9Btenant\u4E0A\u3002",-1),Ki=s("p",null,[s("strong",null,"Role\uFF1A")],-1),Li=s("p",null,"Role\u5373\u89D2\u8272\uFF0CRoles\u4EE3\u8868\u4E00\u7EC4\u7528\u6237\u53EF\u4EE5\u8BBF\u95EE\u7684\u8D44\u6E90\u6743\u9650\uFF0C\u4F8B\u5982Nova\u4E2D\u7684\u865A\u62DF\u673A\u3001Glance\u4E2D\u7684\u955C\u50CF\u3002Users\u53EF\u4EE5\u88AB\u6DFB\u52A0\u5230\u4EFB\u610F\u4E00\u4E2A\u5168\u5C40\u7684\u6216\u79DF\u6237\u5185\u7684\u89D2\u8272\u4E2D\u3002\u5728\u5168\u5C40\u7684role\u4E2D\uFF0C\u7528\u6237\u7684role\u6743\u9650\u4F5C\u7528\u4E8E\u6240\u6709\u7684\u79DF\u6237\uFF0C\u5373\u53EF\u4EE5\u5BF9\u6240\u6709\u7684\u79DF\u6237\u6267\u884Crole\u89C4\u5B9A\u7684\u6743\u9650\uFF1B\u5728\u79DF\u6237\u5185\u7684role\u4E2D\uFF0C\u7528\u6237\u4EC5\u80FD\u5728\u5F53\u524D\u79DF\u6237\u5185\u6267\u884Crole\u89C4\u5B9A\u7684\u6743\u9650\u3002",-1),Ui=s("p",null,[s("strong",null,"Domain\uFF1A")],-1),ji=s("p",null,"\u5728KeyStone V3\u7248\u672C\u5C06 Tenant \u6539\u4E3A Project \u5E76\u5728\u5176\u4E0A\u6DFB\u52A0 Domain \u7684\u6982\u5FF5\uFF0C\u8FD9\u66F4\u52A0\u7B26\u5408\u73B0\u5B9E\u4E16\u754C\u548C\u4E91\u670D\u52A1\u7684\u6620\u5C04\u3002\u5229\u7528 Domain \u5B9E\u73B0\u771F\u6B63\u7684\u591A\u79DF\u6237\uFF08multi-tenancy\uFF09\u67B6\u6784\uFF0CDomain \u62C5\u4EFB Project \u7684\u9AD8\u5C42\u5BB9\u5668\u3002\u4E91\u670D\u52A1\u7684\u5BA2\u6237\u662F Domain \u7684\u6240\u6709\u8005\uFF0C\u4ED6\u4EEC\u53EF\u4EE5\u5728\u81EA\u5DF1\u7684 Domain \u4E2D\u521B\u5EFA\u591A\u4E2A Projects\u3001Users\u3001Groups \u548C Roles\u3002\u901A\u8FC7\u5F15\u5165 Domain\uFF0C\u4E91\u670D\u52A1\u5BA2\u6237\u53EF\u4EE5\u5BF9\u5176\u62E5\u6709\u7684\u591A\u4E2A Project \u8FDB\u884C\u7EDF\u4E00\u7BA1\u7406\uFF0C\u800C\u4E0D\u5FC5\u518D\u5411\u8FC7\u53BB\u90A3\u6837\u5BF9\u6BCF\u4E00\u4E2A Project \u8FDB\u884C\u5355\u72EC\u7BA1\u7406\u3002",-1),Gi=s("p",null,[s("strong",null,"Group\uFF1A")],-1),Hi=s("p",null,"Group \u662F\u4E00\u7EC4 Users \u7684\u5BB9\u5668\uFF0C\u53EF\u4EE5\u5411 Group \u4E2D\u6DFB\u52A0\u7528\u6237\uFF0C\u5E76\u76F4\u63A5\u7ED9 Group \u5206\u914D\u89D2\u8272\uFF0C\u90A3\u4E48\u5728\u8FD9\u4E2A Group \u4E2D\u7684\u6240\u6709\u7528\u6237\u5C31\u90FD\u62E5\u6709\u4E86 Group \u6240\u62E5\u6709\u7684\u89D2\u8272\u6743\u9650\u3002\u901A\u8FC7\u5F15\u5165 Group \u7684\u6982\u5FF5\uFF0CKeystone V3 \u5B9E\u73B0\u4E86\u5BF9\u7528\u6237\u7EC4\u7684\u7BA1\u7406\uFF0C\u8FBE\u5230\u4E86\u540C\u65F6\u7BA1\u7406\u4E00\u7EC4\u7528\u6237\u6743\u9650\u7684\u76EE\u7684\u3002\u8FD9\u4E0E V2 \u4E2D\u76F4\u63A5\u5411 User/Project \u6307\u5B9A Role \u4E0D\u540C\uFF0C\u4F7F\u5F97\u5BF9\u4E91\u670D\u52A1\u8FDB\u884C\u7BA1\u7406\u66F4\u52A0\u4FBF\u6377\u3002 Domain\u3001Group\u3001Project\u3001User \u548C Role \u7684\u5173\u7CFB\u56FE",-1),Fi=s("p",null,"\u5982\u56FE 2 \u6240\u793A\uFF0C\u5728\u4E00\u4E2A Domain \u4E2D\u5305\u542B 3 \u4E2A Projects,\u53EF\u4EE5\u901A\u8FC7 Group1 \u5C06 Role Sysadmin\u76F4\u63A5\u8D4B\u4E88 Domain,\u90A3\u4E48 Group1 \u4E2D\u7684\u6240\u6709\u7528\u6237\u5C06\u4F1A\u5BF9 Domain \u4E2D\u7684\u6240\u6709 Projects \u90FD\u62E5\u6709\u7BA1\u7406\u5458\u6743\u9650\u3002\u4E5F\u53EF\u4EE5\u901A\u8FC7 Group2 \u5C06 Role Engineer \u53EA\u8D4B\u4E88 Project3,\u8FD9\u6837 Group2 \u4E2D\u7684 User \u5C31\u53EA\u62E5\u6709\u5BF9 Project3 \u76F8\u5E94\u7684\u6743\u9650\uFF0C\u800C\u4E0D\u4F1A\u5F71\u54CD\u5176\u5B83 Projects\u3002",-1),Vi=s("ol",null,[s("li",null,[s("p",null,"Keystone\u670D\u52A1\u76EE\u5F55"),s("p",null,"\u4E0A\u6587\u8BF4\u8FC7\uFF0CKeystone\u9664\u4E86\u7528\u6237\u7BA1\u7406\u76F8\u5173\u7684\u652F\u6491\uFF0C\u8FD8\u6709\u4E00\u4E2A\u91CD\u8981\u7684\u4F5C\u7528\u662F\u4E00\u4E2A\u670D\u52A1\u76EE\u5F55\u3002KeyStone\u4E3AOpenstack\u5404\u4E2A\u670D\u52A1\u63D0\u4F9B\u4E86\u4E00\u4E2AREST API\u7AEF\u70B9\u5217\u8868\u3002")]),s("li",null,[s("p",null,"Service Service\u5373\u670D\u52A1\uFF0C\u5982Nova\u3001Glance\u3001Swift\u3002\u6839\u636E\u524D\u4E09\u4E2A\u6982\u5FF5\uFF08User\uFF0CTenant\u548CRole\uFF09\u4E00\u4E2A\u670D\u52A1\u53EF\u4EE5\u786E\u8BA4\u5F53\u524D\u7528\u6237\u662F\u5426\u5177\u6709\u8BBF\u95EE\u5176\u8D44\u6E90\u7684\u6743\u9650\u3002\u4F46\u662F\u5F53\u4E00\u4E2Auser\u5C1D\u8BD5\u7740\u8BBF\u95EE\u5176\u79DF\u6237\u5185\u7684service\u65F6\uFF0C\u4ED6\u5FC5\u987B\u77E5\u9053\u8FD9\u4E2Aservice\u662F\u5426\u5B58\u5728\u4EE5\u53CA\u5982\u4F55\u8BBF\u95EE\u8FD9\u4E2Aservice\uFF0C\u8FD9\u91CC\u901A\u5E38\u4F7F\u7528\u4E00\u4E9B\u4E0D\u540C\u7684\u540D\u79F0\u8868\u793A\u4E0D\u540C\u7684\u670D\u52A1\u3002\u5728\u4E0A\u6587\u4E2D\u8C08\u5230\u7684Role\uFF0C\u5B9E\u9645\u4E0A\u4E5F\u662F\u53EF\u4EE5\u7ED1\u5B9A\u5230\u67D0\u4E2Aservice\u7684\u3002")]),s("li",null,[s("p",null,[n("Endpoint Endpoint\uFF0C\u7FFB\u8BD1\u4E3A\u201C\u7AEF\u70B9\u201D\uFF0C\u6211\u4EEC\u53EF\u4EE5\u7406\u89E3\u5B83\u662F\u4E00\u4E2A\u670D\u52A1\u66B4\u9732\u51FA\u6765\u7684\u8BBF\u95EE\u70B9\uFF0C\u5982\u679C\u9700\u8981\u8BBF\u95EE\u4E00\u4E2A\u670D\u52A1\uFF0C\u5219\u5FC5\u987B\u77E5\u9053\u4ED6\u7684endpoint\u3002\u56E0\u6B64\uFF0C\u5728keystone\u4E2D\u5305\u542B\u4E00\u4E2Aendpoint\u6A21\u677F\uFF08endpoint template\uFF0C\u5728\u5B89\u88C5keystone\u7684\u65F6\u5019\u6211\u4EEC\u53EF\u4EE5\u5728conf\u6587\u4EF6\u5939\u4E0B\u770B\u5230\u8FD9\u4E2A\u6587\u4EF6\uFF09\uFF0C\u8FD9\u4E2A\u6A21\u677F\u63D0\u4F9B\u4E86\u6240\u6709\u5B58\u5728\u7684\u670D\u52A1endpoints\u4FE1\u606F\u3002\u4E00\u4E2Aendpoint template\u5305\u542B\u4E00\u4E2AURLs\u5217\u8868\uFF0C\u5217\u8868\u4E2D\u7684\u6BCF\u4E2AURL\u90FD\u5BF9\u5E94\u4E00\u4E2A\u670D\u52A1\u5B9E\u4F8B\u7684\u8BBF\u95EE\u5730\u5740\uFF0C\u5E76\u4E14\u5177\u6709public\u3001private\u548Cadmin\u8FD9\u4E09\u79CD\u6743\u9650\u3002public url\u53EF\u4EE5\u88AB\u5168\u5C40\u8BBF\u95EE\uFF08\u5982"),s("a",{href:"http://compute.example.com",target:"_blank",rel:"noreferrer"},"http://compute.example.com\uFF09\uFF0Cprivate"),n("%2Cprivate/) url\u53EA\u80FD\u88AB\u5C40\u57DF\u7F51\u8BBF\u95EE\uFF08\u5982"),s("a",{href:"http://compute.example.local",target:"_blank",rel:"noreferrer"},"http://compute.example.local\uFF09\uFF0Cadmin"),n("%2Cadmin/) url\u88AB\u4ECE\u5E38\u89C4\u7684\u8BBF\u95EE\u4E2D\u5206\u79BB\u3002")])])],-1),Bi=s("h3",{id:"keystone\u90E8\u7F72-1",tabindex:"-1"},[n("KeyStone\u90E8\u7F72 "),s("a",{class:"header-anchor",href:"#keystone\u90E8\u7F72-1","aria-hidden":"true"},"#")],-1),qi=s("p",null,"OpenStack\u4E2D\u6240\u6709\u670D\u52A1\u7684\u5B89\u88C5\u53EF\u4EE5\u8BF4\u662F\u6700\u7B80\u5355\u7684\u3002\u590D\u6742\u7684\u5C31\u5728\u4E8E\u672C\u8EAB\u7684\u914D\u7F6E\u6587\u4EF6\u7684\u4FEE\u6539\u548C\u4E0EKeystone\u76F8\u5173\u7684\u914D\u7F6E\u3002\u8FD8\u8BB0\u5F97\u4E0A\u9762\u8BF4\u7684\uFF0COpenStack\u7684\u6BCF\u4E2A\u7EC4\u4EF6\u5982\u679C\u80FD\u591F\u4F7F\u7528\u90FD\u5FC5\u987B\u5728Keystone\u521B\u5EFAService\u548CEndpoint\u5417\uFF1F\u597D\u7684\uFF0C\u6211\u4EEC\u5F00\u59CB\u3002",-1),Yi=s("ol",null,[s("li",null,"\u5B89\u88C5keystone")],-1),zi=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# yum install -y openstack-keystone httpd mod_wsgi memcached python-memcached")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),$i=s("ol",null,[s("li",null,"\u8BBE\u7F6EMemcache\u5F00\u542F\u542F\u52A8\u5E76\u542F\u52A8Memcached")],-1),Xi=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#keystone\u4F7F\u7528Memcached\u6765\u7F13\u5B58\u9A8C\u8BC1\u540E\u751F\u6210\u7684token\u3002")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# systemctl enable memcached.service")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# vim /etc/sysconfig/memcached")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'PORT="11211"')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'USER="memcached"')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'MAXCONN="1024"')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'CACHESIZE="64"')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'OPTIONS="-l 192.168.56.11,::1"')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# systemctl start memcached.service")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Ji=s("ol",null,[s("li",null,"Keystone\u914D\u7F6E")],-1),Wi=s("p",null,"KeyStone\u7684\u914D\u7F6E\u53EA\u9700\u8981\u4FEE\u6539/etc/keystone/keystone.conf\u5373\u53EF\uFF0C\u6D89\u53CAAdmin Token\u548CMysql\u8FDE\u63A5\uFF0C\u5176\u5B83\u5747\u4F7F\u7528\u9ED8\u8BA4\u914D\u7F6E\u5373\u53EF\u3002\u6240\u6709\u914D\u7F6E\u6587\u4EF6\u90FD\u5B58\u653E\u5230/etc/keystone\uFF08\u9879\u76EE\u540D\uFF09\u76EE\u5F55\u4E0B\u3002\u65E5\u5FD7\u90FD\u5B58\u653E\u5728/var/log/keystone\uFF08\u9879\u76EE\u540D\uFF09\u76EE\u5F55\u4E0B\uFF0C\u5176\u5B83\u9879\u76EE\u4E5F\u662F\u5982\u6B64\u3002 \u597D\u7684\uFF0C\u6211\u4EEC\u6682\u505C\u4E00\u4E0B\uFF0C\u5728\u540E\u9762\u7684\u90E8\u7F72\u4E2D\uFF0C\u6211\u4EEC\u4F1A\u4F7F\u7528\u8FD9\u6837\u7684\u65B9\u5F0F\u5217\u51FA\u914D\u7F6E\uFF0C\u672A\u5217\u51FA\u7684\u914D\u7F6E\uFF0C\u4FDD\u6301\u9ED8\u8BA4\u4E0D\u8FDB\u884C\u4FEE\u6539\uFF0C\u9664\u975E\u7279\u522B\u63D0\u793A\u5230\u3002\u53E6\u5916\u8981\u6CE8\u610F\u914D\u7F6E\u7684\u4F4D\u7F6E\uFF0COpenStack\u6240\u6709\u670D\u52A1\u90FD\u4F1A\u6709[DEFAULT] [dtabase] \u8FD9\u6837\u7684\u914D\u7F6E\u90E8\u5206\uFF0C\u8BF7\u5728\u6587\u4E2D\u5217\u51FA\u7684\u914D\u7F6E\u90E8\u5206\u91CC\u9762\u8FDB\u884C\u914D\u7F6E\uFF0C\u5207\u8BB0\uFF01\u3002\u56E0\u4E3A\u786E\u5B9E\u6709\u76F8\u540C\u7684\u914D\u7F6E\u5B58\u5728\u5728\u4E0D\u540C\u7684\u914D\u7F6E\u7AEF\u7684\u60C5\u51B5\uFF0C\u8FD9\u6837\u4F8B\u5916\u60C5\u51B5\uFF0C\u5982\u679C\u6CA1\u6709\u6309\u8981\u6C42\u914D\u7F6E\uFF0C\u53EF\u80FD\u5C31\u65E0\u6CD5\u6B63\u5E38\u8FD0\u884C\u3002",-1),Qi=s("ul",null,[s("li",null,[s("p",null,"\u914D\u7F6EKeyStone\u6570\u636E\u5E93"),s("p",null,"OpenStack\u4E2D\u6240\u6709\u670D\u52A1\u7684\u6570\u636E\u5E93\u540C\u6B65\u90FD\u9700\u8981\u4F9D\u8D56\u4E0E\u914D\u7F6E\u6587\u4EF6\u4E2D\u7684\u6570\u636E\u5E93\u8FDE\u63A5\u7684\u914D\u7F6E\uFF0C\u6240\u4EE5\u5FC5\u987B\u5148\u4FEE\u6539\u5B8C\u6BD5\u914D\u7F6E\u6587\u4EF6\u540E\uFF0C\u518D\u8FDB\u884C\u6570\u636E\u5E93\u7684\u521D\u59CB\u5316\u64CD\u4F5C\u3002"),s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# vim /etc/keystone/keystone.conf")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[database]")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"connection = mysql+pymysql://keystone:keystone@192.168.56.11/keystone")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])])]),s("li",null,[s("p",null,"\u8BBE\u7F6EToken\u548CMemcached")])],-1),Zi=s("p",null,"\u5728\u4E4B\u524D\u7684KeyStone\u7248\u672C\u7531\u4E8E\u6240\u6709\u7684API\u901A\u4FE1\u90FD\u8981\u8BF7\u6C42Keystone\u6765\u751F\u4EA7Token\uFF0C\u4E4B\u524D\u662F\u5B58\u653E\u5728MySQL\u8868\u91CC\uFF0C\u5BFC\u81F4\u8868\u7279\u522B\u5927\uFF0C\u7ECF\u5E38\u9700\u8981\u624B\u52A8\u6E05\u7406\uFF0C\u800C\u4E14\u6027\u80FD\u4E0B\u964D\uFF0C\u73B0\u5728\u65B0\u7684\u7248\u672C\u6211\u4EEC\u53EF\u4EE5\u5B58\u653E\u5728memcache\u91CC\u9762\u4E86\u3002",-1),sr=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[token]")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"provider = fernet")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),nr=s("ul",null,[s("li",null,"\u540C\u6B65\u6570\u636E\u5E93\uFF1A")],-1),lr=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'[root@linux-node1 ~]# su -s /bin/sh -c "keystone-manage db_sync" keystone')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),er=s("blockquote",null,[s("p",null,"\u5C0F\u63D0\u793A\uFF1A\u4E3A\u4EC0\u4E48\u8981\u4F7F\u7528keystone\u7528\u6237\u6765\u540C\u6B65\u6570\u636E\u5462\uFF0C\u56E0\u4E3A\u540C\u6B65\u64CD\u4F5C\u4F1A\u751F\u4EA7\u65E5\u5FD7/var/log/keystone/keystone.log\uFF0C\u5982\u679C\u4F7F\u7528root\u7528\u6237\uFF0C\u90A3\u4E48\u751F\u6210\u7684\u6587\u4EF6\u6743\u9650\u4E3Aroot\u7528\u6237\uFF0Ckeystone\u542F\u52A8\u7684\u65F6\u5019\u6CA1\u6709\u6743\u9650\u8BFB\u53D6\u8BE5\u6587\u4EF6\uFF0C\u4F1A\u65E0\u6CD5\u542F\u52A8\u3002\u5982\u679C\u4F60\u7684\u540C\u6B65\u6267\u884C\u6709\u95EE\u9898\uFF0C\u90A3\u4E48\u53EF\u4EE5\u67E5\u770B\u65E5\u5FD7\u83B7\u53D6\u8BE6\u7EC6\u7684\u9519\u8BEF\u4FE1\u606F\u3002")],-1),or=s("ul",null,[s("li",null,"\u9A8C\u8BC1\u6570\u636E\u5E93\u521B\u5EFA\u662F\u5426\u6B63\u5E38\uFF1A")],-1),ar=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'[root@linux-node1 ~]# mysql -h 192.168.56.11 -ukeystone -pkeystone -e "use keystone;show tables;"')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),tr=s("ol",null,[s("li",null,[s("p",null,"\u521D\u59CB\u5316fernet keys"),s("p",null,"\u751F\u6210\u5B8C\u6BD5\u4E4B\u540E\uFF0C\u4F1A\u521B\u5EFA/etc/keystone/fernet-keys\u76EE\u5F55"),s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# keystone-manage fernet_setup --keystone-user keystone --keystone-group keystone")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# keystone-manage credential_setup --keystone-user keystone --keystone-group keystone")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])])]),s("li",null,[s("p",null,"\u521D\u59CB\u5316keystone")])],-1),cr=s("p",null,"\u8FD8\u8BB0\u5F97\u4E0A\u9762\u8BF4\u7684Openstack\u7684\u6BCF\u4E2A\u7EC4\u4EF6\u90FD\u5FC5\u987B\u5728Keystone\u4E0A\u8FDB\u884C\u6CE8\u518C\u3002\u5F53\u7136\u4E5F\u5305\u62ECKeystone\u672C\u8EAB\u3002\u8EAB\u4EFD\u8BA4\u8BC1\u670D\u52A1\u7BA1\u7406\u4E86\u4E00\u4E2A\u4E0E\u60A8\u73AF\u5883\u76F8\u5173\u7684 API \u7AEF\u70B9\u7684\u76EE\u5F55\u3002\u670D\u52A1\u4F7F\u7528\u8FD9\u4E2A\u76EE\u5F55\u6765\u51B3\u5B9A\u5982\u4F55\u4E0E\u60A8\u73AF\u5883\u4E2D\u7684\u5176\u4ED6\u670D\u52A1\u8FDB\u884C\u901A\u4FE1\u3002 OpenStack\u4F7F\u7528\u4E09\u4E2AAPI\u7AEF\u70B9\u53D8\u79CD\u4EE3\u8868\u6BCF\u79CD\u670D\u52A1\uFF1Aadmin\uFF0Cinternal\u548Cpublic\u3002\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u7BA1\u7406API\u7AEF\u70B9\u5141\u8BB8\u4FEE\u6539\u7528\u6237\u548C\u79DF\u6237\u800C\u516C\u5171\u548C\u5185\u90E8APIs\u4E0D\u5141\u8BB8\u8FD9\u4E9B\u64CD\u4F5C\u3002\u5728\u751F\u4EA7\u73AF\u5883\u4E2D\uFF0C\u5904\u4E8E\u5B89\u5168\u539F\u56E0\uFF0C\u53D8\u79CD\u4E3A\u4E86\u670D\u52A1\u4E0D\u540C\u7C7B\u578B\u7684\u7528\u6237\u53EF\u80FD\u9A7B\u7559\u5728\u5355\u72EC\u7684\u7F51\u7EDC\u4E0A\u3002 \u5BF9\u5B9E\u4F8B\u800C\u8A00\uFF0C\u516C\u5171API\u7F51\u7EDC\u4E3A\u4E86\u8BA9\u987E\u5BA2\u7BA1\u7406\u4ED6\u4EEC\u81EA\u5DF1\u7684\u4E91\u5728\u4E92\u8054\u7F51\u4E0A\u662F\u53EF\u89C1\u7684\u3002\u7BA1\u7406API\u7F51\u7EDC\u5728\u7BA1\u7406\u4E91\u57FA\u7840\u8BBE\u65BD\u7684\u7EC4\u7EC7\u4E2D\u64CD\u4F5C\u4E5F\u662F\u6709\u6240\u9650\u5236\u7684\u3002\u5185\u90E8API\u7F51\u7EDC\u53EF\u80FD\u4F1A\u88AB\u9650\u5236\u5728\u5305\u542BOpenStack\u670D\u52A1\u7684\u4E3B\u673A\u4E0A\u3002\u6B64\u5916\uFF0COpenStack\u652F\u6301\u53EF\u4F38\u7F29\u6027\u7684\u591A\u533A\u57DF\u3002\u4E3A\u4E86\u7B80\u5355\u8D77\u89C1\uFF0C\u6211\u4EEC\u8FD9\u91CC\u5747\u4F7F\u7528\u4E00\u4E2AIP\u5730\u5740\u3002192.168.56.11\u3002",-1),ir=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# keystone-manage bootstrap --bootstrap-password admin \\")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}}," --bootstrap-admin-url http://192.168.56.11:5000/v3/ \\")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}}," --bootstrap-internal-url http://192.168.56.11:5000/v3/ \\")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}}," --bootstrap-public-url http://192.168.56.11:5000/v3/ \\")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}}," --bootstrap-region-id RegionOne")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),rr=s("ol",null,[s("li",null,"\u9A8C\u8BC1Keystone\u914D\u7F6E")],-1),pr=s("p",null,"\u4E0B\u9762\u6211\u5C06\u4E0A\u9762\u8FDB\u884C\u7684\u914D\u7F6E\u5217\u51FA\u6765\uFF0C\u4F9B\u8BFB\u8005\u8FDB\u884C\u6BD4\u5BF9\uFF0C\u914D\u7F6E\u5E94\u8BE5\u548C\u672C\u6587\u4FDD\u6301\u4E00\u81F4\u3002",-1),dr=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'[root@linux-node1 ~]# grep "^[a-z]" /etc/keystone/keystone.conf ')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"connection = mysql+pymysql://keystone:keystone@192.168.56.11/keystone")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"provider = fernet")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Ar=s("ol",null,[s("li",null,"KeyStone\u542F\u52A8")],-1),Cr=s("p",null,"OpenStack Keystone\u4F7F\u7528Apache\u6765\u8FDB\u884C\u542F\u52A8\uFF0C\u63D0\u9AD8\u4E86\u6027\u80FD\u3002 \u914D\u7F6EServerName\uFF0C\u6CE8\u610F\u4E00\u5B9A\u8981\u914D\u7F6E\uFF0C\u4E0D\u7136\u4F1A\u6709\u5947\u602A\u7684\u95EE\u9898\u51FA\u73B0\u3002",-1),ur=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# vim /etc/httpd/conf/httpd.conf")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"ServerName 192.168.56.11:80")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u521B\u5EFA\u914D\u7F6E\u6587\u4EF6")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# ln -s /usr/share/keystone/wsgi-keystone.conf /etc/httpd/conf.d/")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),yr=s("p",null,"\u542F\u52A8keystone\uFF0C\u5E76\u67E5\u770B\u7AEF\u53E3\u3002",-1),hr=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# systemctl enable httpd.service")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# systemctl start httpd.service")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# netstat -ntlp | grep httpd")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"tcp6       0      0 :::5000                 :::*              LISTEN      3408/httpd")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"tcp6       0      0 :::80                   :::*              LISTEN      3408/httpd")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u73B0\u5728\uFF0C\u5982\u679C\u4F60\u7684Keystone\u6CA1\u6709\u6B63\u5E38\u7684\u76D1\u542C\u7AEF\u53E3\uFF0C\u90A3\u4E48\u8BF7\u67E5\u770B\u65E5\u5FD7\uFF0C\u540E\u671F\u6211\u4EEC\u4F1A\u4E0D\u505C\u7684\u5F3A\u8C03\u8BFB\u8005\u901A\u8FC7\u67E5\u770B\u65E5\u5FD7\u6765\u6392\u67E5\u95EE\u9898\uFF0COpenStack\u7684\u65E5\u5FD7\u662F\u503C\u5F97\u4FE1\u8D56\u7684\u3002\u5982\u679C\u4F60\u60F3\u8BA9\u670B\u53CB\u5E2E\u52A9\u89E3\u51B3\u95EE\u9898\uFF0C\u8BF7\u4E0D\u8981\u4F7F\u7528\u65E5\u5FD7\u622A\u56FE\u7684\u65B9\u5F0F\uFF0C\u8BF7\u53D1\u9001\u5B8C\u6574\u7684\u65E5\u5FD7\u3002")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),_r=s("h3",{id:"keystone\u6743\u9650\u7BA1\u7406-1",tabindex:"-1"},[n("Keystone\u6743\u9650\u7BA1\u7406 "),s("a",{class:"header-anchor",href:"#keystone\u6743\u9650\u7BA1\u7406-1","aria-hidden":"true"},"#")],-1),Dr=s("p",null,"\u6211\u4EEC\u5DF2\u7ECF\u6210\u529F\u7684\u8FD0\u884C\u4E86Keystone\u670D\u52A1\uFF0C\u8981\u63D0\u4F9B\u8EAB\u4EFD\u8BA4\u8BC1\u670D\u52A1\uFF0C\u9700\u8981\u4F7F\u7528\u57DF\u3001\u9879\u76EE\u3001\u7528\u6237\u548C\u89D2\u8272\u7684\u7EC4\u5408\u3002 \u9996\u5148\u6211\u4EEC\u8981\u521B\u5EFA\u4E00\u4E2A\u8D85\u7EA7\u7BA1\u7406\u5458\u7528\u6237\u3001\u89D2\u8272\u548C\u9879\u76EE\u3002\u9ED8\u8BA4\u60C5\u51B5\u4E0B\u3002\u5728\u521B\u5EFA\u7528\u6237\u4E4B\u524D\uFF0C\u6211\u4EEC\u9700\u8981\u8FDE\u63A5\u5230Keystone\u3002\u95EE\u9898\u6765\u4E86\uFF0C\u73B0\u5728\u6211\u4EEC\u6CA1\u6709\u4EFB\u4F55\u7528\u6237\uFF0C\u6211\u4EEC\u5982\u4F55\u767B\u5F55KeyStone\u5462\uFF1F\u8FD9\u4E2A\u65F6\u5019ADMIN_TOKEN\u5C31\u53EF\u4EE5\u5E2E\u5FD9\u4E86\uFF0C\u6211\u4EEC\u53EF\u4EE5\u4F7F\u7528\u8FD9\u4E2A\u8D85\u7EA7\u5BC6\u7801\u76F4\u63A5\u767B\u5F55\u5230KeyStone\u4E0A\uFF0C\u6240\u4EE5\u8BF4\uFF0C\u4E00\u5B9A\u8981\u4FDD\u62A4\u597D\u4F60\u7684ADMIN_TOKEN\u3002 \u597D\u7684\uFF0C\u73B0\u5728\u6211\u4EEC\u8981\u8FDE\u63A5\u5230Keystone\u4E0A\uFF0C\u6709\u4E24\u79CD\u65B9\u6CD5\uFF1A",-1),gr=s("ul",null,[s("li",null,"\u4F7F\u7528--os-token\u7B49\u53C2\u6570\u7684\u65B9\u5F0F\uFF08\u5C31\u662F\u901A\u8FC7\u53C2\u6570\u7684\u65B9\u5F0F\uFF09"),s("li",null,"\u4F7F\u7528\u73AF\u5883\u53D8\u91CF\uFF08\u5C06\u53C2\u6570\u8BBE\u7F6E\u4E3A\u73AF\u5883\u53D8\u91CF\uFF0Ckeystone\u76F4\u63A5\u8BFB\u53D6\u73AF\u5883\u53D8\u91CF\uFF09"),s("li",null,"\u8BBE\u7F6E\u73AF\u5883\u53D8\u91CF")],-1),mr=s("p",null,"\u5728\u8FD9\u91CC\uFF0C\u6211\u4EEC\u4F7F\u7528\u4E09\u4E2A\u73AF\u5883\u53D8\u91CF\u7528\u6765\u8FDE\u63A5keystone\u3002admin\u7528\u6237\u548C\u5BC6\u7801\u5C31\u662F\u6211\u4EEC\u524D\u9762\u4F7F\u7528keystone-manage bootstrap\u521D\u59CB\u5316\u7684\u3002",-1),br=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"export OS_USERNAME=admin")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"export OS_PASSWORD=admin")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"export OS_PROJECT_NAME=admin")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"export OS_USER_DOMAIN_NAME=Default")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"export OS_PROJECT_DOMAIN_NAME=Default")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"export OS_AUTH_URL=http://192.168.56.11:5000/v3")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"export OS_IDENTITY_API_VERSION=3")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),kr=s("p",null,"\u8BF7\u6CE8\u610F\u73AF\u5883\u53D8\u91CF\u7684\u95EE\u9898\uFF0C\u4E0D\u8981\u6253\u5F00\u65B0\u7684\u4F1A\u8BDD\u8FDB\u884C\u64CD\u4F5C\u3002",-1),vr=s("ol",null,[s("li",null,"\u521B\u5EFA\u5B9E\u9A8C\u7528\u7684demo\u9879\u76EE\u3001\u7528\u6237\u548C\u89D2\u8272")],-1),xr=s("p",null,"\u4E0B\u9762\u6211\u4EEC\u521B\u5EFA\u4E00\u4E2A\u666E\u901A\u7528\u6237\u548C\u79DF\u6237\uFF0C\u6211\u4EEC\u4E0B\u9762\u7684\u5B9E\u9A8C\u5747\u4F7F\u7528\u8FD9\u4E2A\u666E\u901A\u7528\u6237\u8FDB\u884COpenstack\u7684\u7BA1\u7406\u3002",-1),fr=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'# openstack domain create --description "An Example Domain" example')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'# openstack project create --domain default --description "Demo Project" myproject')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# openstack user create --domain default --password-prompt myuser")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# openstack role create myrole")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# openstack role add --project myproject --user myuser myrole")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Sr=s("blockquote",null,[s("p",null,"\u5728\u521B\u5EFA\u7528\u6237\u7684\u65F6\u5019\u53EF\u4EE5\u4F7F\u7528--password-prompt\uFF0C\u7136\u540E\u6839\u636E\u63D0\u793A\u8F93\u5165\u5BC6\u7801")],-1),Er=s("ol",null,[s("li",null,[s("p",null,"\u521B\u5EFA\u4E00\u4E2A\u670D\u52A1\u7684\u9879\u76EE"),s("p",null,"OpenStack\u670D\u52A1\u4E5F\u9700\u8981\u4F7F\u7528\u7528\u6237\u540D\u3001\u79DF\u6237\u548C\u89D2\u8272\uFF0C\u7528\u6765\u8BBF\u95EEOpenStack\u7684\u5404\u4E2A\u670D\u52A1\u3002"),s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'# openstack project create --domain default --description "Service Project" service')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])])]),s("li",null,[s("p",null,"\u521B\u5EFA\u5404\u4E2A\u670D\u52A1\u8FDE\u63A5Keystone\u7684\u8D26\u6237 \u540E\u9762\u6211\u4EEC\u90E8\u7F72\u7684\u5176\u5B83\u670D\u52A1\u90FD\u9700\u8981\u5230Keystone\u4E0A\u8FDB\u884C\u8BA4\u8BC1\uFF0C\u6240\u4EE5\u73B0\u5728\u5C31\u53EF\u4EE5\u63D0\u524D\u5C06\u5404\u4E2A\u670D\u52A1\u7684\u8D26\u53F7\u521B\u5EFA\u4E0A\u3002\u5E76\u5168\u90E8\u52A0\u5165service\u9879\u76EE\u3002"),s("ul",null,[s("li",null,[s("p",null,"\u521B\u5EFAglance\u7528\u6237"),s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# openstack user create --domain default --password glance glance")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# openstack role add --project service --user glance admin")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])])]),s("li",null,[s("p",null,"\u521B\u5EFAnova\u7528\u6237"),s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# openstack user create --domain default --password nova nova")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# openstack role add --project service --user nova admin")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])])]),s("li",null,[s("p",null,"\u521B\u5EFAplacement\u7528\u6237"),s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# openstack user create --domain default --password placement placement")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# openstack role add --project service --user placement admin")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])])]),s("li",null,[s("p",null,"\u521B\u5EFANeutron\u7528\u6237"),s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# openstack user create --domain default --password neutron neutron")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# openstack role add --project service --user neutron admin")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])])]),s("li",null,[s("p",null,"\u521B\u5EFAcinder\u7528\u6237"),s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# openstack user create --domain default --password cinder cinder")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# openstack role add --project service --user cinder admin")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])])])])])],-1),Pr=s("h3",{id:"\u9A8C\u8BC1keystone\u5B89\u88C5-1",tabindex:"-1"},[n("\u9A8C\u8BC1Keystone\u5B89\u88C5 "),s("a",{class:"header-anchor",href:"#\u9A8C\u8BC1keystone\u5B89\u88C5-1","aria-hidden":"true"},"#")],-1),Nr=s("p",null,"\u9996\u5148\uFF0C\u6211\u4EEC\u9700\u8981\u53D6\u6D88OS_TOKEN\u548COS_URL\u8FD9\u4E24\u4E2A\u53D8\u91CF\u3002\u8FD9\u4E24\u4E2A\u53D8\u91CF\u662F\u7528\u4E8E\u5F15\u5BFC\u6211\u4EEC\u521B\u5EFAAdmin\u7528\u6237\u548CKeystone\u670D\u52A1\u81EA\u8EABService\u548CEndpoint\u6CE8\u518C\u65F6\u5019\u7684\u7528\u7684\uFF0C\u73B0\u5728\u5DF2\u7ECF\u4E0D\u9700\u8981\u4E86\u3002",-1),Rr=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# unset OS_AUTH_URL OS_PASSWORD")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Tr=s("p",null,[s("strong",null,"\u6D4B\u8BD5admin\u7528\u6237")],-1),Ir=s("p",null,"\u5BC6\u7801\u4E3Aadmin\uFF0C\u9700\u8981\u8F93\u5165\u4E24\u6B21\uFF0C\u5982\u679C\u80FD\u6B63\u5E38\u83B7\u53D6token\u8BF4\u660E\u914D\u7F6E\u6210\u529F\u3002",-1),Or=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# openstack --os-auth-url http://192.168.56.11:5000/v3 \\")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"--os-project-domain-name Default --os-user-domain-name Default \\")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"--os-project-name admin --os-username admin token issue")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Password:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u2026")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#\u5BC6\u7801\u4E3Aadmin\uFF0C\u9700\u8981\u8F93\u5165\u4E24\u6B21\uFF0C\u5982\u679C\u80FD\u6B63\u5E38\u83B7\u53D6token\u8BF4\u660E\u914D\u7F6E\u6210\u529F\u3002")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Mr=s("p",null,[s("strong",null,"\u6D4B\u8BD5myuser\u7528\u6237")],-1),wr=s("p",null,"\u5BC6\u7801\u4E3A\u4F60\u8BBE\u7F6E\u7684\uFF0C\u9700\u8981\u8F93\u5165\u4E24\u6B21\uFF0C\u5982\u679C\u80FD\u6B63\u5E38\u83B7\u53D6token\u8BF4\u660E\u914D\u7F6E\u6210\u529F\u3002",-1),Kr=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# openstack --os-auth-url http://192.168.56.11:5000/v3 \\")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"--os-project-domain-name Default --os-user-domain-name Default \\")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"--os-project-name myproject --os-username myuser token issue")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Password:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u2026")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Lr=s("h3",{id:"\u73AF\u5883\u53D8\u91CF\u811A\u672C\u914D\u7F6E-1",tabindex:"-1"},[n("\u73AF\u5883\u53D8\u91CF\u811A\u672C\u914D\u7F6E "),s("a",{class:"header-anchor",href:"#\u73AF\u5883\u53D8\u91CF\u811A\u672C\u914D\u7F6E-1","aria-hidden":"true"},"#")],-1),Ur=s("p",null,"\u4F7F\u7528Keystone\u547D\u4EE4\u6709\u4E24\u79CD\u65B9\u5F0F\uFF0C\u7B2C\u4E00\u79CD\u5C31\u50CF\u4E0A\u9762\u3002\u6211\u4EEC\u4F7F\u7528\u6307\u5B9A--os-username\u3001--os-password\u548C--os-password\u8FD9\u6837\u7684\u9009\u9879\u6765\u8FDB\u884C\u64CD\u4F5C\uFF0C\u4F46\u662F\u8FD9\u6837\u5728\u6211\u4EEC\u65E5\u5E38\u64CD\u4F5C\u4E2D\u4F1A\u6BD4\u8F83\u9EBB\u70E6\u3002\u7B2C\u4E8C\u79CD\u65B9\u5F0F\u5C31\u662F\u4F7F\u7528\u73AF\u5883\u53D8\u91CF\uFF0C\u8FD9\u6837\u53EF\u4EE5\u907F\u514D\u6BCF\u6B21\u4F7F\u7528\u90FD\u8981\u5236\u5B9A\u53D8\u91CF\u3002\u6211\u4EEC\u5C06\u8FD9\u4E9B\u5E38\u7528\u7684\u53D8\u91CF\u8BBE\u7F6E\u4E3A\u73AF\u5883\u53D8\u91CF\u3002 \u4E0B\u9762\u5EFA\u7ACB\u73AF\u5883\u53D8\u91CF\u4E3A\u5176\u5B83\u670D\u52A1\u90E8\u7F72\u548C\u914D\u7F6E\u4F7F\u7528",-1),jr=s("ol",null,[s("li",null,"\u8BBE\u7F6Eadmin\u73AF\u5883\u53D8\u91CF\u811A\u672C")],-1),Gr=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# vim /root/admin-openstack.sh")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"export OS_PROJECT_DOMAIN_NAME=Default")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"export OS_USER_DOMAIN_NAME=Default")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"export OS_PROJECT_NAME=admin")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"export OS_USERNAME=admin")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"export OS_PASSWORD=admin")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"export OS_AUTH_URL=http://192.168.56.11:5000/v3")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"export OS_IDENTITY_API_VERSION=3")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"export OS_IMAGE_API_VERSION=2")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Hr=s("ol",null,[s("li",null,"\u521B\u5EFA\u666E\u901A\u7528\u6237\u7684\u73AF\u5883\u53D8\u91CF\u811A\u672C")],-1),Fr=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# vim /root/demo-openstack.sh")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"export OS_PROJECT_DOMAIN_NAME=Default")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"export OS_USER_DOMAIN_NAME=Default")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"export OS_PROJECT_NAME=myproject")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"export OS_USERNAME=myuser")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"export OS_PASSWORD=123.com")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"export OS_AUTH_URL=http://192.168.56.11:5000/v3")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"export OS_IDENTITY_API_VERSION=3")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"export OS_IMAGE_API_VERSION=2")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Vr=s("p",null,"\u521B\u5EFA\u5B8C\u6BD5\u53D8\u91CF\u540E\uFF0C\u5728\u540E\u671F\u4F7F\u7528\u67D0\u4E2A\u8D26\u6237\u7684\u6743\u9650\uFF0C\u53EA\u9700\u8981source\u4E00\u4E0B\u5C31\u53EF\u4EE5\u4F7F\u7528\uFF0C\u4F8B\u5982\uFF1A",-1),Br=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# source /root/admin-openstack.sh")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# openstack token issue")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),qr=s("p",null,"\u6D4B\u8BD5demo\u7528\u6237\uFF0C\u662F\u5426\u80FD\u591F\u83B7\u53D6token",-1),Yr=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# source /root/demo-openstack.sh ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# openstack token issue")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),zr=s("h1",{id:"_1-4-openstack\u955C\u50CF\u670D\u52A1glance",tabindex:"-1"},[n("1.4 OpenStack\u955C\u50CF\u670D\u52A1Glance "),s("a",{class:"header-anchor",href:"#_1-4-openstack\u955C\u50CF\u670D\u52A1glance","aria-hidden":"true"},"#")],-1),$r=s("h3",{id:"glance\u6982\u8FF0",tabindex:"-1"},[n("Glance\u6982\u8FF0 "),s("a",{class:"header-anchor",href:"#glance\u6982\u8FF0","aria-hidden":"true"},"#")],-1),Xr=s("p",null,"OpenStack\u4E2D\u7684Glance\u662F\u955C\u50CF\u670D\u52A1\uFF0C\u80FD\u591F\u63D0\u4F9B\u53D1\u73B0\u3001\u6CE8\u518C\u5E76\u67E5\u8BE2\u865A\u62DF\u673A\u955C\u50CF\uFF0C\u4E5F\u662FOpenstack\u7684\u4E00\u4E2A\u7EC4\u4EF6\u6216\u8005\u8BF4\u9879\u76EE\u4E4B\u4E00\u3002\u955C\u50CF\u670D\u52A1\u63D0\u4F9B\u4E86\u4E00\u4E2ARest API\u7684\u65B9\u5F0F\u3002 OpenStack\u7684Glance\u955C\u50CF\u53EF\u4EE5\u5B58\u653E\u5728\u672C\u5730\u6587\u4EF6\u7CFB\u7EDF\uFF0C\u4E5F\u53EF\u4EE5\u5B58\u653E\u5728OpenStack\u7684\u5BF9\u8C61\u5B58\u50A8\u4E0A\u3002\u9ED8\u8BA4\u60C5\u51B5\u4E0B\u662F\u672C\u5730\u6587\u4EF6\uFF0C\u5B58\u653E\u5728/var/lib/glance/images/\u76EE\u5F55\u4E0B\u3002 Glance\u8FD8\u7BA1\u7406\u7740\u5FEB\u7167\uFF0C\u5FEB\u7167\u4E5F\u662F\u4E00\u79CD\u955C\u50CF\uFF0C\u53EF\u4EE5\u57FA\u4E8E\u5FEB\u7167\u521B\u5EFA\u65B0\u7684\u865A\u62DF\u673A\u3002",-1),Jr=s("p",null,"Glance\u4E3B\u8981\u6709\u4E24\u4E2A\u7EC4\u4EF6",-1),Wr=s("p",null,"\uFF08\u56FE2.5.2\uFF09",-1),Qr=s("ul",null,[s("li",null,"Glance-api\u63A5\u6536REST API\u8BF7\u6C42\uFF0C\u7136\u540E\u901A\u8FC7\u5176\u4ED6\u6A21\u5757\uFF08glance-registry\u53CAimage store\uFF09\u6765\u5B8C\u6210\u8BF8\u5982\u955C\u50CF\u7684\u67E5\u627E\u3001\u83B7\u53D6\u3001\u4E0A\u4F20\u3001\u5220\u9664\u7B49\u64CD\u4F5C\uFF0Capi\u9ED8\u8BA4\u76D1\u542C\u7AEF\u53E39292\u3002"),s("li",null,"glance-registry\u7528\u4E8E\u4E0EMySQL\u6570\u636E\u5E93\u4EA4\u4E92\uFF0C\u7528\u4E8E\u5B58\u50A8\u6216\u83B7\u53D6\u955C\u50CF\u7684\u5143\u6570\u636E\uFF08metadata\uFF09\uFF1B\u63D0\u4F9B\u955C\u50CF\u5143\u6570\u636E\u76F8\u5173\u7684REST\u63A5\u53E3\uFF0C\u901A\u8FC7glance-registry\uFF0C\u53EF\u4EE5\u5411\u6570\u636E\u5E93\u4E2D\u5199\u5165\u6216\u83B7\u53D6\u955C\u50CF\u7684\u5404\u79CD\u6570\u636E\uFF0Cglance-registry\u76D1\u542C\u7AEF\u53E39191\u3002Glance\u7684\u6570\u636E\u5E93\u4E2D\u6709\u4E24\u5F20\u8868\uFF0C\u4E00\u5F20\u662Fimage\u8868\uFF0C\u53E6\u4E00\u5F20\u662Fimage property\u8868\u3002Image\u8868\u4FDD\u5B58\u4E86\u955C\u50CF\u683C\u5F0F\u3001\u5927\u5C0F\u7B49\u4FE1\u606F\uFF1Bimage property\u8868\u5219\u4E3B\u8981\u4FDD\u5B58\u955C\u50CF\u7684\u5B9A\u5236\u5316\u4FE1\u606F\u3002"),s("li",null,"database \u7528\u6237\u5B58\u653E\u955C\u50CF\u7684\u5143\u6570\u636E\u3002"),s("li",null,"image store\u662F\u4E00\u4E2A\u5B58\u50A8\u7684\u63A5\u53E3\u5C42\uFF0C\u901A\u8FC7\u8FD9\u4E2A\u63A5\u53E3\uFF0Cglance\u53EF\u4EE5\u83B7\u53D6\u955C\u50CF\uFF0Cimage store\u652F\u6301\u7684\u5B58\u50A8\u6709Amazon\u7684S3\u3001OpenStack\u672C\u8EAB\u7684Swift\uFF0C\u8FD8\u6709\u8BF8\u5982ceph\uFF0Csheepdog\uFF0CGlusterFS\u7B49\u5206\u5E03\u5F0F\u5B58\u50A8\u3002 Image store\u662F\u955C\u50CF\u4FDD\u5B58\u4E0E\u83B7\u53D6\u7684\u63A5\u53E3\uFF0C\u5B83\u4EC5\u4EC5\u662F\u4E00\u4E2A\u63A5\u53E3\u5C42\uFF0C\u5177\u4F53\u7684\u5B9E\u73B0\u9700\u8981\u5916\u90E8\u7684\u5B58\u50A8\u652F\u6301\uFF0C")],-1),Zr=s("h3",{id:"glance\u90E8\u7F72",tabindex:"-1"},[n("Glance\u90E8\u7F72 "),s("a",{class:"header-anchor",href:"#glance\u90E8\u7F72","aria-hidden":"true"},"#")],-1),sp=s("ol",null,[s("li",null,[s("p",null,"\u5B89\u88C5Glance"),s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# yum install -y openstack-glance")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])])]),s("li",null,[s("p",null,"\u914D\u7F6EGlance")])],-1),np=s("p",null,"Glance\u7684\u914D\u7F6E\u662F\u901A\u8FC7\u4FEE\u6539\u4E24\u4E2A\u7EC4\u4EF6\u7684\u914D\u7F6E\u6587\u4EF6\u6765\u5B8C\u6210\u3002Glance\u4F7F\u7528\u4E86MySQL\u548CKeystone\u3002",-1),lp=s("ul",null,[s("li",null,"Glance\u6570\u636E\u5E93\u914D\u7F6E")],-1),ep=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# vim /etc/glance/glance-api.conf ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[database]")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"connection= mysql+pymysql://glance:glance@192.168.56.11/glance")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),op=s("ul",null,[s("li",null,"\u8BBE\u7F6EKeystone")],-1),ap=s("p",null,"\u5C31\u50CF\u5728Keystone\u7AE0\u8282\u63D0\u5230\u4E86\u3002OpenStack\u5176\u5B83\u7EC4\u4EF6\u90FD\u9700\u8981\u548CKeystone\u8FDB\u884C\u4EA4\u4E92\uFF0C\u6765\u8FDB\u884C\u7528\u6237\u8BA4\u8BC1\u548C\u670D\u52A1\u76EE\u5F55\u7684\u7BA1\u7406\u3002\u5BF9\u4E8EGlance\u6765\u8BF4\uFF0CKeystone\u7684\u914D\u7F6E\u5728glance-api.conf\u548Cglance-registry.conf\u90FD\u9700\u8981\u8BBE\u7F6E\uFF0C\u800C\u4E14\u914D\u7F6E\u76F8\u540C\u3002 glance-api.conf\u914D\u7F6E",-1),tp=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# vim /etc/glance/glance-api.conf")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[keystone_authtoken]")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"www_authenticate_uri  = http://192.168.56.11:5000")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"auth_url = http://192.168.56.11:5000")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"memcached_servers = 192.168.56.11:11211")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"auth_type = password")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"project_domain_name = Default")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"user_domain_name = Default")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"project_name = service")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"username = glance")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"password = glance")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[paste_deploy]")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"flavor=keystone")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),cp=s("ul",null,[s("li",null,[s("p",null,"\u8BBE\u7F6EGlance\u955C\u50CF\u5B58\u50A8"),s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# vim /etc/glance/glance-api.conf")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#\u9ED8\u8BA4\u7684\u5B58\u50A8\u65B9\u5F0F\u662F\u6587\u4EF6\uFF0C\u53EF\u4EE5\u6307\u5B9A\u955C\u50CF\u5B58\u50A8\u7684\u8DEF\u5F84")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[glance_store]")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"stores = file,http")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"default_store=file")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"filesystem_store_datadir=/var/lib/glance/images/")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#\u4E5F\u5C31\u662F\u8BF4\uFF0C\u6211\u4EEC\u540E\u9762\u4E0A\u4F20\u7684\u955C\u50CF\u90FD\u4FDD\u5B58\u5728/var/lib/glance/images\u76EE\u5F55\u4E0B\u3002")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])])])],-1),ip=s("ol",null,[s("li",null,[s("p",null,"\u540C\u6B65\u6570\u636E\u5E93"),s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'[root@linux-node1 ~]# su -s /bin/sh -c "glance-manage db_sync" glance')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u6D4B\u8BD5\u6570\u636E\u5E93\u540C\u6B65\u60C5\u51B5")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'[root@linux-node1 ~]# mysql -h 192.168.56.11 -uglance -pglance -e "use glance;show tables;"')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])])]),s("li",null,[s("p",null,"\u542F\u52A8Glance\u670D\u52A1")])],-1),rp=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# systemctl enable openstack-glance-api.service ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# systemctl start openstack-glance-api.service")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),pp=s("ol",null,[s("li",null,[s("p",null,"Glance\u670D\u52A1\u6CE8\u518C"),s("p",null,"\u60F3\u8981\u8BA9\u522B\u7684\u670D\u52A1\u53EF\u4EE5\u4F7F\u7528Glance\uFF0C\u5C31\u9700\u8981\u5728Keystone\u4E0A\u5B8C\u6210\u670D\u52A1\u7684\u6CE8\u518C\u3002\u6CE8\u610F\u9700\u8981\u5148source\u4E00\u4E0Badmin\u7684\u73AF\u5883\u53D8\u91CF\u3002"),s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# source /root/admin-openstack.sh")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'# openstack service create --name glance --description "OpenStack Image" image')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# openstack endpoint create --region RegionOne image public http://192.168.56.11:9292")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# openstack endpoint create --region RegionOne image internal http://192.168.56.11:9292")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# openstack endpoint create --region RegionOne image admin http://192.168.56.11:9292")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])])])],-1),dp=s("h3",{id:"\u9A8C\u8BC1glance\u5B89\u88C5",tabindex:"-1"},[n("\u9A8C\u8BC1Glance\u5B89\u88C5 "),s("a",{class:"header-anchor",href:"#\u9A8C\u8BC1glance\u5B89\u88C5","aria-hidden":"true"},"#")],-1),Ap=s("ol",null,[s("li",null,[s("p",null,"\u6D4B\u8BD5Glance\u72B6\u6001"),s("p",null,"\u6211\u4EEC\u53EF\u4EE5\u76F4\u63A5\u4F7F\u7528glance\u547D\u4EE4\u5217\u51FA\u73B0\u5728\u7684\u6240\u6709\u955C\u50CF\uFF0C\u5982\u679C\u51FA\u73B0\u4E00\u4E2A\u7A7A\u5217\u8868\uFF0C\u8BF4\u660EGlance\u542F\u52A8\u5E76\u914D\u7F6E\u5B8C\u6210\u3002"),s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# source /root/admin-openstack.sh ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# openstack image list")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])]),s("p",null,"\u5982\u679C\u672A\u51FA\u73B0\u62A5\u9519\uFF0C\u57FA\u672C\u4E0A\u53EF\u4EE5\u786E\u5B9E\u90E8\u7F72\u6CA1\u6709\u95EE\u9898\uFF0C\u53EF\u4EE5\u4E0A\u4F20\u955C\u50CF\u8FDB\u884C\u6D4B\u8BD5\u3002")]),s("li",null,[s("p",null,"Glance\u955C\u50CF\u4E0A\u4F20\u6D4B\u8BD5")])],-1),Cp=s("p",null,"\u5728\u521A\u5F00\u59CB\u5B9E\u65BDOpenStack\u5E73\u53F0\u9636\u6BB5\uFF0C\u5982\u679C\u6CA1\u6709\u5236\u4F5C\u955C\u50CF\u3002\u53EF\u4EE5\u4F7F\u7528\u4E00\u4E2A\u5B9E\u9A8C\u7684\u955C\u50CF\u8FDB\u884C\u6D4B\u8BD5\uFF0C\u8FD9\u662F\u4E00\u4E2A\u5C0F\u7684Linux\u7CFB\u7EDF\u3002",-1),up=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# cd /usr/local/src")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 src]# wget http://download.cirros-cloud.net/0.4.0/cirros-0.4.0-x86_64-disk.img")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#\u4E0A\u4F20\u5E76\u6CE8\u518C\u4E00\u4E2A\u955C\u50CF\u3002\u6CE8\u610F\u4EE5\u540E\u53EA\u8981\u770B\u5230\u4F7F\u7528openstack\u547D\u4EE4\uFF0C\u90FD\u9700\u8981\u4FDD\u8BC1\uFF0C\u5DF2\u7ECF\u4F7F\u7528source\u547D\u4EE4\u5BFC\u5165\u4E86\u73AF\u5883\u53D8\u91CF\u3002\u56E0\u4E3A\u8FD9\u4E9B\u64CD\u4F5C\u90FD\u9700\u8981\u73AF\u5883\u53D8\u91CF\u91CC\u9762\u7684\u8D26\u53F7\u8FDB\u884C\u8BA4\u8BC1\u6388\u6743\u3002")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'[root@linux-node1 src]# openstack image create "cirros" --disk-format qcow2 \\')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"--container-format bare --file cirros-0.4.0-x86_64-disk.img --public")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),yp=s("h1",{id:"\u4E0A\u4F20\u5B8C\u6BD5\u540E\u53EF\u4EE5\u901A\u8FC7openstack-image-list\u518D\u6B21\u67E5\u770B\u4E0A\u4F20\u7684\u955C\u50CF\u3002\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0Cglance\u4F7F\u7528\u672C\u5730\u6587\u4EF6\u7CFB\u7EDF\u6765\u4FDD\u5B58\u4E0A\u4F20\u7684\u955C\u50CF\u3002\u9ED8\u8BA4\u5B58\u653E\u5728-var-lib-glance-images-\u76EE\u5F55\u4E0B\uFF0C\u4F1A\u5C06\u955C\u50CF\u4EE5image-id\u6765\u8FDB\u884C\u547D\u540D\u3002",tabindex:"-1"},[n("\u4E0A\u4F20\u5B8C\u6BD5\u540E\u53EF\u4EE5\u901A\u8FC7openstack image list\u518D\u6B21\u67E5\u770B\u4E0A\u4F20\u7684\u955C\u50CF\u3002\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0CGlance\u4F7F\u7528\u672C\u5730\u6587\u4EF6\u7CFB\u7EDF\u6765\u4FDD\u5B58\u4E0A\u4F20\u7684\u955C\u50CF\u3002\u9ED8\u8BA4\u5B58\u653E\u5728/var/lib/glance/images/\u76EE\u5F55\u4E0B\uFF0C\u4F1A\u5C06\u955C\u50CF\u4EE5image id\u6765\u8FDB\u884C\u547D\u540D\u3002 "),s("a",{class:"header-anchor",href:"#\u4E0A\u4F20\u5B8C\u6BD5\u540E\u53EF\u4EE5\u901A\u8FC7openstack-image-list\u518D\u6B21\u67E5\u770B\u4E0A\u4F20\u7684\u955C\u50CF\u3002\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0Cglance\u4F7F\u7528\u672C\u5730\u6587\u4EF6\u7CFB\u7EDF\u6765\u4FDD\u5B58\u4E0A\u4F20\u7684\u955C\u50CF\u3002\u9ED8\u8BA4\u5B58\u653E\u5728-var-lib-glance-images-\u76EE\u5F55\u4E0B\uFF0C\u4F1A\u5C06\u955C\u50CF\u4EE5image-id\u6765\u8FDB\u884C\u547D\u540D\u3002","aria-hidden":"true"},"#")],-1),hp=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 src]# openstack image list")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"+--------------------------------------+--------+--------+")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"| ID                                   | Name   | Status |")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"+--------------------------------------+--------+--------+")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"| cf154a84-a73a-451b-bcb3-83c98e7c0d3e | cirros | active |")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"+--------------------------------------+--------+--------+")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),_p=s("h1",{id:"\u540C\u65F6\uFF0C\u8FD9\u4E2A\u6587\u4EF6\u4F1A\u88AB\u4FDD\u5B58\u5230\u914D\u7F6E\u6587\u4EF6\u8BBE\u7F6E\u7684\u76EE\u5F55\u4E0B\uFF0C\u5E76\u4EE5id\u547D\u540D\u3002",tabindex:"-1"},[n("\u540C\u65F6\uFF0C\u8FD9\u4E2A\u6587\u4EF6\u4F1A\u88AB\u4FDD\u5B58\u5230\u914D\u7F6E\u6587\u4EF6\u8BBE\u7F6E\u7684\u76EE\u5F55\u4E0B\uFF0C\u5E76\u4EE5ID\u547D\u540D\u3002 "),s("a",{class:"header-anchor",href:"#\u540C\u65F6\uFF0C\u8FD9\u4E2A\u6587\u4EF6\u4F1A\u88AB\u4FDD\u5B58\u5230\u914D\u7F6E\u6587\u4EF6\u8BBE\u7F6E\u7684\u76EE\u5F55\u4E0B\uFF0C\u5E76\u4EE5id\u547D\u540D\u3002","aria-hidden":"true"},"#")],-1),Dp=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# ls -l /var/lib/glance/images/")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"total 12980")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"-rw-r----- 1 glance glance 13287936 Dec  1 14:11 65f9826a-5ccb-47d9-8a1a-75e31fb88a4a")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),gp=s("p",null,"Glance\u5728OpenStack\u7EC4\u4EF6\u4E2D\uFF0C\u5C5E\u4E8E\u6BD4\u8F83\u7B80\u5355\u7684\u4E00\u4E2A\u3002\u6211\u5EFA\u8BAE\u8BFB\u8005\u5982\u679C\u4E00\u76F4\u8DDF\u7740\u505A\u5B9E\u9A8C\u7684\u8BDD\uFF0C\u73B0\u5728\u662F\u65F6\u5019\u505C\u4E0B\u6765\u603B\u7ED3\u4E00\u4E0B\u4E86\u3002\u56E0\u4E3A\u540E\u9762\u7684\u670D\u52A1\u7684\u90E8\u7F72\u6D41\u7A0B\u548Cglance\u90FD\u5927\u540C\u5C0F\u5F02\u3002",-1),mp=s("h1",{id:"_3-5-placement\u670D\u52A1\u5B89\u88C5",tabindex:"-1"},[n("3.5 Placement\u670D\u52A1\u5B89\u88C5 "),s("a",{class:"header-anchor",href:"#_3-5-placement\u670D\u52A1\u5B89\u88C5","aria-hidden":"true"},"#")],-1),bp=s("h3",{id:"_3-5-1-placement\u6982\u8FF0",tabindex:"-1"},[n("3.5.1 Placement\u6982\u8FF0 "),s("a",{class:"header-anchor",href:"#_3-5-1-placement\u6982\u8FF0","aria-hidden":"true"},"#")],-1),kp=s("h3",{id:"_3-5-2-placement\u90E8\u7F72",tabindex:"-1"},[n("3.5.2 Placement\u90E8\u7F72 "),s("a",{class:"header-anchor",href:"#_3-5-2-placement\u90E8\u7F72","aria-hidden":"true"},"#")],-1),vp=s("ol",null,[s("li",null,"Placement\u670D\u52A1\u6CE8\u518C")],-1),xp=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'# openstack service create --name placement   --description "Placement API" placement')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# openstack endpoint create --region RegionOne   placement public http://192.168.56.11:8778")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# openstack endpoint create --region RegionOne   placement internal http://192.168.56.11:8778")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# openstack endpoint create --region RegionOne   placement admin http://192.168.56.11:8778")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),fp=s("ol",null,[s("li",null,[s("p",null,"\u5B89\u88C5Placement"),s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# yum install -y openstack-placement-api")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])])]),s("li",null,[s("p",null,"\u914D\u7F6EPalacement")])],-1),Sp=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# vim /etc/placement/placement.conf")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[placement_database]")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"connection = mysql+pymysql://placement:placement@192.168.56.11/placement")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[api]")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"auth_strategy = keystone")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[keystone_authtoken]")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"auth_url = http://192.168.56.11:5000/v3")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"memcached_servers = 192.168.56.11:11211")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"auth_type = password")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"project_domain_name = default")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"user_domain_name = default")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"project_name = service")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"username = placement")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"password = placement")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# vim /etc/httpd/conf.d/00-placement-api.conf ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#\u589E\u52A0\u4E0B\u9762\u914D\u7F6E")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"<Directory /usr/bin>")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Require all granted")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"</Directory>")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u589E\u52A0\u540E\u5982\u4E0B\uFF1A")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Listen 8778")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"<VirtualHost *:8778>")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  <Directory /usr/bin>")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Require all granted")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"</Directory>")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  WSGIProcessGroup placement-api")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  WSGIApplicationGroup %{GLOBAL}")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  WSGIPassAuthorization On")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  WSGIDaemonProcess placement-api processes=3 threads=1 user=placement group=placement")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  WSGIScriptAlias / /usr/bin/placement-api")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  <IfVersion >= 2.4>")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'    ErrorLogFormat "%M"')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  </IfVersion>")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  ErrorLog /var/log/placement/placement-api.log")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  #SSLEngine On")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  #SSLCertificateFile ...")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  #SSLCertificateKeyFile ...")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"</VirtualHost>")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Alias /placement-api /usr/bin/placement-api")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"<Location /placement-api>")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  SetHandler wsgi-script")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  Options +ExecCGI")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  WSGIProcessGroup placement-api")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  WSGIApplicationGroup %{GLOBAL}")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  WSGIPassAuthorization On")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"</Location>")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Ep=s("ol",null,[s("li",null,"\u540C\u6B65\u6570\u636E\u5E93")],-1),Pp=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'[root@linux-node1 ~]# su -s /bin/sh -c "placement-manage db sync" placement')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Np=s("ol",null,[s("li",null,"\u91CD\u542Fhttpd")],-1),Rp=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# systemctl restart httpd")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Tp=s("h1",{id:"_1-6-openstack\u8BA1\u7B97\u670D\u52A1nova",tabindex:"-1"},[n("1.6 OpenStack\u8BA1\u7B97\u670D\u52A1Nova "),s("a",{class:"header-anchor",href:"#_1-6-openstack\u8BA1\u7B97\u670D\u52A1nova","aria-hidden":"true"},"#")],-1),Ip=s("p",null,"Nova\u662FOpenStack\u6700\u65E9\u7684\u4E24\u4E2A\u6A21\u5757\u4E4B\u4E00\uFF08\u53E6\u4E00\u4E2A\u662F\u5BF9\u8C61\u5B58\u50A8\uFF09\u3002\u5728OpenStack\u4F53\u7CFB\u4E2D\u662F\u8BA1\u7B97\u8D44\u6E90\u865A\u62DF\u5316\u7684\u9879\u76EE\u3002\u540C\u65F6Nova\u4E5F\u662FOpenStack\u9879\u76EE\u4E2D\u7EC4\u4EF6\u6700\u591A\u7684\u4E00\u4E2A\u9879\u76EE\u3002\u5728\u4E2D\u5C0F\u578B\u90E8\u7F72\u4E2D\uFF0C\u6211\u4EEC\u5E38\u5E38\u628A\u9664nova-compute\u4E4B\u5916\u7684\u5176\u5B83\u7EC4\u4EF6\u90E8\u7F72\u5230\u4E00\u53F0\u670D\u52A1\u5668\u4E0A\uFF0C\u79F0\u4E4B\u4E3A\u63A7\u5236\u8282\u70B9\u3002\u5C06nova-compute\u90E8\u7F72\u5230\u5355\u72EC\u7684\u4E00\u53F0\u670D\u52A1\u5668\u4E0A\uFF0C\u79F0\u4E4B\u4E3A\u8BA1\u7B97\u8282\u70B9\u3002",-1),Op=s("h3",{id:"nova\u670D\u52A1\u7EC4\u4EF6",tabindex:"-1"},[n("Nova\u670D\u52A1\u7EC4\u4EF6 "),s("a",{class:"header-anchor",href:"#nova\u670D\u52A1\u7EC4\u4EF6","aria-hidden":"true"},"#")],-1),Mp=s("ul",null,[s("li",null,[s("p",null,"Nova-Api\u670D\u52A1"),s("p",null,"\u4E3B\u8981\u7528\u4E8E\u63A5\u6536\u548C\u54CD\u5E94\u5916\u90E8\u8BF7\u6C42\uFF0C\u5B83\u652F\u6301OpenStack API\u3001Amazon EC2 \u7B49API"),s("ul",null,[s("li",null,"nova-api\u7EC4\u4EF6\u5B9E\u73B0\u4E86RESTful API\u529F\u80FD\uFF0C\u662F\u5916\u90E8\u8BBF\u95EENova\u7684\u552F\u4E00\u9014\u5F84\u3002"),s("li",null,"\u63A5\u6536\u5916\u90E8\u7684\u8BF7\u6C42\u5E76\u901A\u8FC7Message Queue\u5C06\u8BF7\u6C42\u53D1\u9001\u7ED9\u5176\u4ED6\u7684\u670D\u52A1\u7EC4\u4EF6\uFF0C\u540C\u65F6\u4E5F\u517C\u5BB9EC2 API\uFF0C\u6240\u4EE5\u4E5F\u53EF\u4EE5\u7528EC2\u7684\u7BA1\u7406\u5DE5\u5177\u5BF9nova\u8FDB\u884C\u65E5\u5E38\u7BA1\u7406\u3002")])]),s("li",null,[s("p",null,"Nova-Cert\u670D\u52A1"),s("p",null,"\u662FNova\u7684\u8BC1\u4E66\u7BA1\u7406\u670D\u52A1\uFF0C\u7528\u6765\u4E3AEC2\u670D\u52A1\u63D0\u4F9B\u8EAB\u4EFD\u9A8C\u8BC1\uFF0C\u4EC5\u4EC5\u662F\u5728EC2 API\u7684\u8BF7\u6C42\u4E2D\u4F7F\u7528\u3002")]),s("li",null,[s("p",null,"Nova-Scheduler\u670D\u52A1"),s("p",null,"\u7528\u4E8ENova\u7684\u8C03\u5EA6\u5DE5\u4F5C\uFF0C\u5728\u521B\u5EFA\u865A\u62DF\u673A\u65F6\uFF0C\u7531\u5B83\u9009\u62E9\u5C06\u865A\u62DF\u673A\u521B\u5EFA\u5728\u54EA\u53F0\u8BA1\u7B97\u8282\u70B9\u4E0A\u3002")]),s("li",null,[s("p",null,"Nova-Conductor\u670D\u52A1"),s("p",null,"\u8FD9\u4E2A\u662F\u670D\u52A1\u662F\u8BA1\u7B97\u8282\u70B9\u8BBF\u95EE\u6570\u636E\u5E93\u65F6\u7684\u4E00\u4E2A\u4E2D\u95F4\u5C42\uFF0C\u5B83\u51FA\u73B0\u7684\u4F5C\u7528\u662F\u9632\u6B62\u8BA1\u7B97\u8282\u70B9\u7684Nova-Compute\u670D\u52A1\u76F4\u63A5\u8BBF\u95EE\u6570\u636E\u5E93\u3002\u540C\u65F6\u8FD9\u4E2A\u4E2D\u95F4\u5C42\u53EF\u4EE5\u8FDB\u884C\u6C34\u5E73\u6269\u5C55\u3002")]),s("li",null,[s("p",null,"Nova-Console\u670D\u52A1"),s("p",null,"Nova\u589E\u5F3A\u4E86\u5B83\u7684\u63A7\u5236\u53F0\u670D\u52A1\u3002\u63A7\u5236\u53F0\u670D\u52A1\u5141\u8BB8\u7528\u6237\u53EF\u4EE5\u901A\u8FC7\u4EE3\u7406\u670D\u52A1\u5668\u8BBF\u95EE\u865A\u62DF\u5316\u5B9E\u4F8B\u3002\u8FD9\u5C31\u6D89\u53CA\u4E86\u4E00\u5BF9\u65B0\u7684\u5B88\u62A4\u8FDB\u7A0B\uFF08nova-console\u548Cnova-consoleauth).")]),s("li",null,[s("p",null,"Nova-Consoleauth\u670D\u52A1"),s("p",null,"\u4E3B\u8981\u7528\u4E8E\u63A7\u5236\u53F0\u7684\u7528\u6237\u8BBF\u95EE\u6388\u6743")]),s("li",null,[s("p",null,"Nova-Novncproxy\u670D\u52A1"),s("p",null,"\u7528\u4E8E\u4E3A\u7528\u6237\u8BBF\u95EE\u865A\u62DF\u673A\u63D0\u4F9B\u4E86\u4E00\u4E2AVNC\u7684\u4EE3\u7406\u3002\u901A\u8FC7VNC\u534F\u8BAE\uFF0C\u53EF\u4EE5\u652F\u6301\u57FA\u4E8E\u6D4F\u89C8\u5668\u7684novnc\u5BA2\u6237\u7AEF\uFF0C\u540E\u9762\u4F60\u5728\u7F51\u9875\u6253\u5F00\u7684console\u754C\u9762\u5C31\u662F\u4F9D\u9760\u8FD9\u4E2A\u670D\u52A1\u63D0\u4F9B\u7684\u3002")]),s("li",null,[s("p",null,"Nova-Compute"),s("p",null,"Nova-compute\u662FNova\u6700\u91CD\u8981\u7684\u7EC4\u4EF6\u4E4B\u4E00\u3002"),s("ul",null,[s("li",null,"nova-compute \u4E00\u822C\u8FD0\u884C\u5728\u8BA1\u7B97\u8282\u70B9\u4E0A\uFF0C\u901A\u8FC7Message Queue\u63A5\u6536\u5E76\u7BA1\u7406VM\u7684\u751F\u547D\u5468\u671F\u3002"),s("li",null,"Nova-compute \u901A\u8FC7Libvirt\u7BA1\u7406KVM\uFF0C\u901A\u8FC7XenAPI\u7BA1\u7406Xen\u7B49\u3002")])])],-1),wp=s("h3",{id:"nova\u63A7\u5236\u8282\u70B9\u90E8\u7F72",tabindex:"-1"},[n("Nova\u63A7\u5236\u8282\u70B9\u90E8\u7F72 "),s("a",{class:"header-anchor",href:"#nova\u63A7\u5236\u8282\u70B9\u90E8\u7F72","aria-hidden":"true"},"#")],-1),Kp=s("p",null,"\u9996\u5148\u6211\u4EEC\u9700\u8981\u5148\u5728\u63A7\u5236\u8282\u70B9\u90E8\u7F72\u9664nova-compute\u4E4B\u5916\u7684\u5176\u5B83\u5FC5\u5907\u7684\u670D\u52A1\u3002",-1),Lp=s("ol",null,[s("li",null,"\u63A7\u5236\u8282\u70B9\u5B89\u88C5")],-1),Up=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# yum install -y openstack-nova-api \\")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  openstack-nova-conductor \\")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  openstack-nova-novncproxy openstack-nova-scheduler")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),jp=s("p",null,"nova.conf\u662F\u914D\u7F6ENova\u7684\u6838\u5FC3\u914D\u7F6E\u6587\u4EF6\uFF0CNova\u7684\u914D\u7F6E\u4E3B\u8981\u56F4\u7ED5\u8BE5\u914D\u7F6E\u6587\u4EF6\u3002",-1),Gp=s("ul",null,[s("li",null,"\u6570\u636E\u5E93\u914D\u7F6E")],-1),Hp=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# vim /etc/nova/nova.conf")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[api_database]")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"connection= mysql+pymysql://nova:nova@192.168.56.11/nova_api")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[database]")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"connection= mysql+pymysql://nova:nova@192.168.56.11/nova")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Fp=s("ul",null,[s("li",null,[s("p",null,"RabbitMQ\u914D\u7F6E"),s("p",null,"Nova\u548C\u5176\u5B83\u7EC4\u4EF6\u4E4B\u95F4\uFF0C\u4EE5\u53CANova\u5404\u4E2A\u670D\u52A1\u4E4B\u95F4\u7684\u901A\u4FE1\u90FD\u8981\u901A\u8FC7\u6D88\u606F\u961F\u5217\u6765\u8FDB\u884C\uFF0C\u6240\u4EE5\u9700\u8981\u914D\u7F6ERabbmitMQ\u7684\u8FDE\u63A5\u3002\u6CE8\u610F\u662FDEFAULT\u914D\u7F6E\u680F\u76EE\u4E0B\u9762\u3002")])],-1),Vp=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# vim /etc/nova/nova.conf")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[DEFAULT]")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"transport_url = rabbit://openstack:openstack@192.168.56.11")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Bp=s("ul",null,[s("li",null,[s("p",null,"Keystone\u76F8\u5173\u914D\u7F6E"),s("p",null,"Nova\u9700\u8981\u8FDE\u63A5\u5230Keystone\u8FDB\u884C\u8BA4\u8BC1\u548C\u670D\u52A1\u7BA1\u7406\u3002")])],-1),qp=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# vim /etc/nova/nova.conf")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[api]")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"auth_strategy=keystone")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[keystone_authtoken]")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"www_authenticate_uri = http://192.168.56.11:5000/")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"auth_url = http://192.168.56.11:5000/")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"memcached_servers = 192.168.56.11:11211")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"auth_type = password")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"project_domain_name = Default")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"user_domain_name = Default")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"project_name = service")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"username = nova")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"password = nova")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Yp=s("ul",null,[s("li",null,[s("p",null,"\u5173\u95EDNova\u7684\u9632\u706B\u5899\u529F\u80FD"),s("p",null,"\u56E0\u4E3A\u6211\u4EEC\u8981\u4F7F\u7528Neutron\u7684\u9632\u706B\u5899\u529F\u80FD\uFF0C\u6240\u4EE5\u5173\u95EDNova\u81EA\u5DF1\u7684\u9632\u706B\u5899\u9A71\u52A8\u3002")])],-1),zp=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[DEFAULT]")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"use_neutron=true")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"firewall_driver = nova.virt.firewall.NoopFirewallDriver")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),$p=s("ul",null,[s("li",null,[s("p",null,"VNC\u914D\u7F6E"),s("p",null,"vnc\u7684\u914D\u7F6E\u7528\u4E8E\u865A\u62DF\u673AVNC\u7AEF\u53E3\u7684\u76D1\u542C\u548Cnovncproxy\u7684\u914D\u7F6E\uFF0C\u8FD9\u6837\u540E\u9762\u6211\u4EEC\u901A\u8FC7DashBoard\u7684novnc\u754C\u9762\u5C31\u53EF\u4EE5\u67E5\u770B\u865A\u62DF\u673A\u7684\u754C\u9762\u3002")])],-1),Xp=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# vim /etc/nova/nova.conf")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[vnc]")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"enabled=true")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"server_listen = 0.0.0.0")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"server_proxyclient_address = 192.168.56.11")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Jp=s("ul",null,[s("li",null,"\u8BBE\u7F6Eglance")],-1),Wp=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[glance]")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"api_servers = http://192.168.56.11:9292")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Qp=s("ul",null,[s("li",null,"\u5728 [oslo_concurrency] \u90E8\u5206\uFF0C\u914D\u7F6E\u9501\u8DEF\u5F84\uFF1A")],-1),Zp=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[oslo_concurrency]")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"lock_path=/var/lib/nova/tmp")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),sd=s("ul",null,[s("li",null,"\u8BBE\u7F6E\u542F\u7528\u7684api")],-1),nd=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[DEFAULT]")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"enabled_apis=osapi_compute,metadata")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),ld=s("ul",null,[s("li",null,"\u8BBE\u7F6Eplacement")],-1),ed=s("h1",{id:"\u65B0\u589E\u5230\u914D\u7F6E\u6587\u4EF6\u672B\u5C3E",tabindex:"-1"},[n("\u65B0\u589E\u5230\u914D\u7F6E\u6587\u4EF6\u672B\u5C3E "),s("a",{class:"header-anchor",href:"#\u65B0\u589E\u5230\u914D\u7F6E\u6587\u4EF6\u672B\u5C3E","aria-hidden":"true"},"#")],-1),od=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[placement]")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"region_name = RegionOne")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"project_domain_name = Default")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"project_name = service")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"auth_type = password")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"user_domain_name = Default")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"auth_url = http://192.168.56.11:5000/v3")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"username = placement")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"password = placement")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),ad=s("ol",null,[s("li",null,"\u540C\u6B65\u6570\u636E\u5E93")],-1),td=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'[root@linux-node1 ~]# su -s /bin/sh -c "nova-manage api_db sync" nova')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),cd=s("ul",null,[s("li",null,"\u6CE8\u518Ccell0\u6570\u636E\u5E93")],-1),id=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'[root@linux-node1 ~]# su -s /bin/sh -c "nova-manage cell_v2 map_cell0" nova')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),rd=s("ul",null,[s("li",null,"\u521B\u5EFAcell1\u7684cell")],-1),pd=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'[root@linux-node1 ~]# su -s /bin/sh -c "nova-manage cell_v2 create_cell --name=cell1 --verbose" nova')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),dd=s("ul",null,[s("li",null,"\u540C\u6B65nova\u6570\u636E\u5E93")],-1),Ad=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'[root@linux-node1 ~]# su -s /bin/sh -c "nova-manage db sync" nova')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Cd=s("ul",null,[s("li",null,"\u9A8C\u8BC1cell0\u548Ccell1\u7684\u6CE8\u518C\u662F\u5426\u6B63\u786E")],-1),ud=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'[root@linux-node1 ~]# su -s /bin/sh -c "nova-manage cell_v2 list_cells" nova')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),yd=s("ul",null,[s("li",null,"\u6D4B\u8BD5\u6570\u636E\u5E93\u540C\u6B65\u60C5\u51B5")],-1),hd=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'[root@linux-node1 ~]# mysql -h 192.168.56.11 -unova -pnova -e "use nova;show tables;"')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'[root@linux-node1 ~]# mysql -h 192.168.56.11 -unova -pnova -e "use nova_api;show tables;"')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),_d=s("ol",null,[s("li",null,[n("\u542F\u52A8Nova Service "),s("ul",null,[s("li",null,"\u8BBE\u7F6E\u5F00\u673A\u81EA\u52A8\u542F\u52A8")])])],-1),Dd=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# systemctl enable openstack-nova-api.service \\")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"openstack-nova-scheduler.service \\")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"openstack-nova-conductor.service \\")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"openstack-nova-novncproxy.service")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),gd=s("ul",null,[s("li",null,"\u542F\u52A8\u63A7\u5236\u8282\u70B9\u670D\u52A1")],-1),md=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# systemctl start openstack-nova-api.service \\")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  openstack-nova-scheduler.service openstack-nova-conductor.service \\")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  openstack-nova-novncproxy.service")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),bd=s("ol",null,[s("li",null,[s("p",null,"Nova\u670D\u52A1\u6CE8\u518C"),s("p",null,"\u548CKeystone\u3001Glance\u4E00\u6837\uFF0CNova\u670D\u52A1\u4E5F\u9700\u8981\u5728Keystone\u4E0A\u505A\u6CE8\u518C\uFF0C\u5E76\u544A\u8BC9Keystone\u5B83\u6240\u66B4\u6F0F\u7684API\u3002"),s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# source admin-openstack.sh")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'# openstack service create --name nova --description "OpenStack Compute" compute')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# openstack endpoint create --region RegionOne compute public http://192.168.56.11:8774/v2.1")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# openstack endpoint create --region RegionOne compute internal http://192.168.56.11:8774/v2.1")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# openstack endpoint create --region RegionOne compute admin http://192.168.56.11:8774/v2.1")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])]),s("ul",null,[s("li",null,"\u9A8C\u8BC1\u63A7\u5236\u8282\u70B9\u670D\u52A1")])])],-1),kd=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@openstack-node1 ~]# openstack compute service list")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"+----+----------------+-----------------------------+----------+---------+-------+----------------------------+")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"| ID | Binary         | Host                        | Zone     | Status  | State | Updated At                 |")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"+----+----------------+-----------------------------+----------+---------+-------+----------------------------+")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"|  4 | nova-scheduler | linux-node1.example.com | internal | enabled | up    | 2020-02-04T04:48:47.000000 |")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"| 11 | nova-conductor | linux-node1.example.com | internal | enabled | up    | 2020-02-04T04:48:47.000000 |")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"+----+----------------+-----------------------------+----------+---------+-------+----------------------------+")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),vd=s("h3",{id:"nova\u8BA1\u7B97\u8282\u70B9\u90E8\u7F72",tabindex:"-1"},[n("Nova\u8BA1\u7B97\u8282\u70B9\u90E8\u7F72 "),s("a",{class:"header-anchor",href:"#nova\u8BA1\u7B97\u8282\u70B9\u90E8\u7F72","aria-hidden":"true"},"#")],-1),xd=s("p",null,"\u6839\u636E\u6211\u4EEC\u5F00\u59CB\u5B9E\u9A8C\u89C4\u5212\uFF0C\u6211\u4EEC\u5C06\u4F7F\u7528\u4E00\u4E2A\u63A7\u5236\u8282\u70B9\u548C\u4E00\u4E2A\u8BA1\u7B97\u8282\u70B9\u3002\u8BA1\u7B97\u8282\u70B9\u662F\u771F\u6B63\u8FD0\u884C\u865A\u62DF\u673A\u7684\u670D\u52A1\u5668\uFF0C\u5BF9CPU\u3001\u5185\u5B58\u548C\u786C\u76D8\u8981\u6C42\u90FD\u6BD4\u8F83\u9AD8\uFF0C\u901A\u5E38\u662F\u914D\u7F6E\u6BD4\u8F83\u5F3A\u52B2\u7684\u670D\u52A1\u5668\u5145\u5F53\u3002\u5F53\u7136\u5728\u5B9E\u9A8C\u7684\u8FC7\u7A0B\u4E2D\uFF0C\u5B8C\u5168\u53EF\u4EE5\u548C\u63A7\u5236\u8282\u70B9\u5728\u4E00\u53F0\u670D\u52A1\u5668\u4E0A\u3002\u597D\u7684\uFF0C\u73B0\u5728\u8BF7\u4F60\u6253\u5F00\u7B2C\u4E8C\u53F0\u865A\u62DF\u673A\u5E76\u4E14\u767B\u9646\u3002",-1),fd=s("ol",null,[s("li",null,"\u8BA1\u7B97\u8282\u70B9\u5B89\u88C5")],-1),Sd=s("p",null,"\u8BA1\u7B97\u8282\u70B9\u9700\u8981\u4F9D\u8D56\u4E0E\u865A\u62DF\u5316\u6280\u672F\u6765\u8FD0\u884C\u865A\u62DF\u673A\u5B9E\u4F8B\uFF0C\u8FD8\u8BB0\u5F97\u524D\u9762\u6211\u4EEC\u8BA8\u8BBAOpenStack\u4E0E\u865A\u62DF\u5316\u4E4B\u95F4\u7684\u5173\u7CFB\u5417\uFF1FOpenStack\u9ED8\u8BA4\u4F7F\u7528KVM\u4F5C\u4E3AHypervisor\uFF0C\u6240\u4EE5\u5728\u8BA1\u7B97\u8282\u70B9\u4E0A\u9700\u8981\u5B89\u88C5KVM\u548Clibvirt\u3002\u8FD9\u6837OpenStack\u7684\u63A7\u5236\u8282\u70B9\u4E0A\u7684nova\u670D\u52A1\u5C31\u53EF\u4EE5\u8C03\u7528Nova-compute\u8FDB\u884C\u865A\u62DF\u673A\u7684\u521B\u5EFA\u548C\u7BA1\u7406\u3002",-1),Ed=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node2 ~]# yum install -y openstack-nova-compute")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Pd=s("ul",null,[s("li",null,[s("p",null,"\u590D\u5236\u914D\u7F6E\u6587\u4EF6"),s("p",null,"\u8BA1\u7B97\u8282\u70B9\u7684\u914D\u7F6E\u6587\u4EF6\u548C\u63A7\u5236\u8282\u70B9\u7684\u57FA\u672C\u76F8\u540C\uFF0C\u6211\u4EEC\u53EF\u4EE5\u5728\u63A7\u5236\u8282\u70B9nova.conf\u7684\u57FA\u7840\u4E0A\u8FDB\u884C\u589E\u52A0\u5373\u53EF\uFF0C\u6240\u4EE5\u9996\u5148\u8BF7\u5C06\u63A7\u5236\u8282\u70B9\u7684\u914D\u7F6E\u6587\u4EF6\u76F4\u63A5\u590D\u5236\u8FC7\u6765\u5427\u3002")])],-1),Nd=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# scp /etc/nova/nova.conf 192.168.56.12:/etc/nova/nova.conf")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node2 ~]# chown root:nova /etc/nova/nova.conf")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Rd=s("ul",null,[s("li",null,[s("p",null,"\u5220\u9664\u591A\u4F59\u7684\u6570\u636E\u914D\u7F6E"),s("p",null,"\u5220\u9664\u6570\u636E\u5E93\u914D\u7F6E \u76F8\u5BF9\u4E8E\u63A7\u5236\u8282\u70B9\u7684\u914D\u7F6E\uFF0C\u8BA1\u7B97\u8282\u70B9\u9700\u8981\u53D8\u66F4VNC\u7684\u914D\u7F6E\u3002")]),s("li",null,[s("p",null,"\u4FEE\u6539VNC\u914D\u7F6E"),s("p",null,"\u8BA1\u7B97\u8282\u70B9\u9700\u8981\u76D1\u542C\u6240\u6709IP\uFF0C\u540C\u65F6\u8BBE\u7F6Enovncproxy\u7684\u8BBF\u95EE\u5730\u5740")])],-1),Td=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[vnc]")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"enabled=true")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"server_listen = 0.0.0.0")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"server_proxyclient_address = 192.168.56.12")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"novncproxy_base_url = http://192.168.56.11:6080/vnc_auto.html")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Id=s("ul",null,[s("li",null,[s("p",null,"\u865A\u62DF\u5316\u9002\u914D"),s("p",null,"\u67E5\u770B\u8BA1\u7B97\u8282\u70B9\u7684\u670D\u52A1\u5668\u662F\u5426\u652F\u6301\u786C\u4EF6\u865A\u62DF\u5316\u3002")])],-1),Od=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node2 ~]# egrep -c '(vmx|svm)' /proc/cpuinfo")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u5982\u679C\u8FD4\u56DE\u7684\u662F0\uFF0C\u8868\u793A\u4E0D\u652F\u6301\u786C\u4EF6\u865A\u62DF\u5316\uFF0C\u9700\u8981\u5728nova.conf\u91CC\u9762\u8BBE\u7F6E")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[libvirt]")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virt_type=qemu")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u5982\u679C\u8FD4\u56DE\u7684\u662F\u975E0\u7684\u503C\uFF0C\u90A3\u4E48\u8868\u793A\u8BA1\u7B97\u8282\u70B9\u670D\u52A1\u5668\u652F\u6301\u786C\u4EF6\u865A\u62DF\u5316\uFF0C\u9700\u8981\u5728nova.conf\u91CC\u9762\u8BBE\u7F6E")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[libvirt]")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virt_type=kvm")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Md=s("ol",null,[s("li",null,"\u542F\u52A8nova-compute")],-1),wd=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# systemctl enable libvirtd.service openstack-nova-compute.service")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# systemctl start libvirtd.service openstack-nova-compute.service")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Kd=s("ol",null,[s("li",null,"\u8BA1\u7B97\u8282\u70B9\u52A0\u5165\u63A7\u5236\u8282\u70B9")],-1),Ld=s("p",null,"\u5F53\u6DFB\u52A0\u65B0\u7684\u8BA1\u7B97\u8282\u70B9\u65F6\uFF0C\u5FC5\u987B\u5728\u63A7\u5236\u5668\u8282\u70B9\u4E0A\u8FD0\u884Cnova-manage cell_v2 discover_hosts\u6765\u6CE8\u518C\u8FD9\u4E9B\u65B0\u7684\u8BA1\u7B97\u8282\u70B9\u3002",-1),Ud=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'[root@linux-node1 ~]# su -s /bin/sh -c "nova-manage cell_v2 discover_hosts --verbose" nova')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),jd=s("p",null,"\u6216\u8005\uFF0C\u60A8\u53EF\u4EE5\u5728/etc/nova/nova.conf\u4E2D\u8BBE\u7F6E\u9002\u5F53\u7684\u95F4\u9694:",-1),Gd=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[scheduler]")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"discover_hosts_in_cells_interval = 300")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Hd=s("ol",null,[s("li",null,"\u9A8C\u8BC1\u8BA1\u7B97\u8282\u70B9")],-1),Fd=s("p",null,"\u5728\u63A7\u5236\u8282\u70B9\u518D\u6B21\u6267\u884Chost list\uFF0C\u53EF\u4EE5\u53D1\u73B0nova-compute\u5DF2\u7ECF\u6210\u529F\u6CE8\u518C\u3002 \u518D\u6B21\u6267\u884Chost list\u53EF\u4EE5\u770B\u5230\u3002\u8BA1\u7B97\u8282\u70B9\u5DF2\u7ECF\u6CE8\u518C\u6210\u529F\u3002",-1),Vd=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# openstack host list")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"+------------------------+-------------+----------+")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"| Host Name              | Service     | Zone     |")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"+------------------------+-------------+----------+")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"| linux-node1.example.com | conductor   | internal |")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"| linux-node1.example.com | consoleauth | internal |")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"| linux-node1.example.com | scheduler   | internal |")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"| linux-node2.example.com | compute     | nova     |")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"+------------------------+-------------+----------+")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Bd=s("h3",{id:"\u9A8C\u8BC1nova\u5B89\u88C5",tabindex:"-1"},[n("\u9A8C\u8BC1Nova\u5B89\u88C5 "),s("a",{class:"header-anchor",href:"#\u9A8C\u8BC1nova\u5B89\u88C5","aria-hidden":"true"},"#")],-1),qd=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# openstack compute service list")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"+----+------------------+-------------------------+----------+---------+-------+----------------------------+")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"| ID | Binary           | Host                    | Zone     | Status  | State | Updated At                 |")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"+----+------------------+-------------------------+----------+---------+-------+----------------------------+")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"|  1 | nova-consoleauth | linux-node1.example.com | internal | enabled | up    | 2018-02-03T10:38:30.000000 |")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"|  2 | nova-conductor   | linux-node1.example.com | internal | enabled | up    | 2018-02-03T10:38:30.000000 |")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"|  3 | nova-scheduler   | linux-node1.example.com | internal | enabled | up    | 2018-02-03T10:38:30.000000 |")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"|  6 | nova-compute     | linux-node2.example.com | nova     | enabled | up    | None                       |")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"+----+------------------+-------------------------+----------+---------+-------+----------------------------+")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Yd=s("p",null,"\u9A8C\u8BC1\u6240\u6709\u7684Endpoint API\u662F\u5426\u6B63\u786E",-1),zd=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# openstack catalog list")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"+-----------+-----------+--------------------------------------------+")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"| Name      | Type      | Endpoints                                  |")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"+-----------+-----------+--------------------------------------------+")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"| placement | placement | RegionOne                                  |")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"|           |           |   public: http://192.168.56.11:8778        |")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"|           |           | RegionOne                                  |")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"|           |           |   internal: http://192.168.56.11:8778      |")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"|           |           | RegionOne                                  |")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"|           |           |   admin: http://192.168.56.11:8778         |")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"|           |           |                                            |")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"| keystone  | identity  | RegionOne                                  |")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"|           |           |   public: http://192.168.56.11:5000/v3/    |")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"|           |           | RegionOne                                  |")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"|           |           |   admin: http://192.168.56.11:35357/v3/    |")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"|           |           | RegionOne                                  |")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"|           |           |   internal: http://192.168.56.11:35357/v3/ |")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"|           |           |                                            |")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"| glance    | image     | RegionOne                                  |")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"|           |           |   public: http://192.168.56.11:9292        |")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"|           |           | RegionOne                                  |")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"|           |           |   admin: http://192.168.56.11:9292         |")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"|           |           |                                            |")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"| nova      | compute   | RegionOne                                  |")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"|           |           |   admin: http://192.168.56.11:8774/v2.1    |")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"|           |           | RegionOne                                  |")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"|           |           |   public: http://192.168.56.11:8774/v2.1   |")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"|           |           | RegionOne                                  |")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"|           |           |   internal: http://192.168.56.11:8774/v2.1 |")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"|           |           |                                            |")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"+-----------+-----------+--------------------------------------------+")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),$d=s("p",null,"\u68C0\u67E5cells\u548Cplacement API\u72B6\u6001",-1),Xd=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# nova-status upgrade check")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"+---------------------------+")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"| Upgrade Check Results     |")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"+---------------------------+")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"| Check: Cells v2           |")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"| Result: Success           |")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"| Details: None             |")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"+---------------------------+")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"| Check: Placement API      |")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"| Result: Success           |")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"| Details: None             |")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"+---------------------------+")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"| Check: Resource Providers |")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"| Result: Success           |")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"| Details: None             |")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"+---------------------------+")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Jd=s("h1",{id:"_1-7-openstack\u7F51\u7EDC\u670D\u52A1neutron",tabindex:"-1"},[n("1.7 OpenStack\u7F51\u7EDC\u670D\u52A1Neutron "),s("a",{class:"header-anchor",href:"#_1-7-openstack\u7F51\u7EDC\u670D\u52A1neutron","aria-hidden":"true"},"#")],-1),Wd=s("p",null,"\u4E0A\u4E00\u7AE0\u6211\u4EEC\u8BB2\u5230Nova\u670D\u52A1\u63D0\u4F9B\u4E86OpenStack\u5E73\u53F0\u8BA1\u7B97\u8D44\u6E90\u6C60\uFF0C\u5B9E\u73B0\u4E86\u8BA1\u7B97\u5373\u670D\u52A1\u3002\u90A3\u4E48\u4EC5\u4EC5\u6709\u4E00\u53F0\u5B64\u7ACB\u7684\u4E91\u4E3B\u673A\u662F\u65E0\u6CD5\u6B63\u5E38\u4F7F\u7528\u7684\uFF0C\u6211\u4EEC\u9700\u8981\u628A\u5B83\u63A5\u5165\u7F51\u7EDC\uFF0C\u624D\u80FD\u6B63\u5E38\u5BF9\u5916\u63D0\u4F9B\u670D\u52A1\u3002",-1),Qd=s("h3",{id:"neutron\u6982\u8FF0",tabindex:"-1"},[n("Neutron\u6982\u8FF0 "),s("a",{class:"header-anchor",href:"#neutron\u6982\u8FF0","aria-hidden":"true"},"#")],-1),Zd=s("p",null,"OpenStack Networking Services\uFF08Neutron\uFF09\uFF0COpenStack \u7F51\u7EDC\u670D\u52A1\uFF0COpenStack\u6838\u5FC3\u9879\u76EE\u4E4B\u4E00\uFF0C\u7531\u65E9\u671F\u7684nova-network\u72EC\u7ACB\u6210\u4E00\u4E2A\u5B50\u9879\u76EE\u540E\u6F14\u53D8\u800C\u6765\uFF0C\u5B83\u4E3AOpenStack\u63D0\u4F9B\u4E86\u4E91\u8BA1\u7B97\u73AF\u5883\u4E0B\u7684\u865A\u62DF\u7F51\u7EDC\u529F\u80FD\u3002",-1),sA=s("p",null,"\u5728OpenStack\u4E16\u754C\u4E2D\uFF0C\u7F51\u7EDC\u7EC4\u4EF6\u6700\u521D\u53EBnova-network\uFF0Cnova-network\u5B9E\u73B0\u7B80\u5355\uFF0C\u76F4\u63A5\u91C7\u7528\u57FA\u4E8ELinux\u5185\u6838\u7684Linux\u7F51\u6865\u3002\u7531\u4E8E\u5C11\u4E86\u5F88\u591A\u5C42\u62BD\u8C61\uFF0C\u6240\u4EE5\u6BD4\u8F83\u7B80\u5355\u7A33\u5B9A\u7B97\u3002\u4F46\u662F\u5B83\u7684\u4E0D\u8DB3\u4E4B\u5904\u662F\u652F\u6301\u7684\u63D2\u4EF6\u5C11\uFF08\u53EA\u652F\u6301Linux\u7F51\u6865\uFF09\uFF0C\u652F\u6301\u7684\u7F51\u7EDC\u62D3\u6251\u5C11\uFF08\u53EA\u652F\u6301flat, vlan)\u3002",-1),nA=s("p",null,"\u4E3A\u4E86\u652F\u6301\u66F4\u591A\u7684\u63D2\u4EF6\uFF0C\u652F\u6301\u66F4\u591A\u7684\u7F51\u7EDC\u62D3\u6251\uFF0C\u4E8E\u662F\u6709\u4E86quantum\u5DE5\u7A0B\u3002quantum\u63D2\u4EF6\u4E0D\u4EC5\u652F\u6301Linux\u7F51\u6865\uFF0C\u4E5F\u652F\u6301OpenvSwitch\uFF0C\u4EE5\u53CA\u4E00\u4E9BSDN\u7684\u63D2\u4EF6\u548C\u5176\u4ED6\u5546\u4E1A\u516C\u53F8\u7684\u63D2\u4EF6\u3002\u5728\u7F51\u7EDC\u62D3\u6251\u4E0A\uFF0C\u9664\u4E86\u652F\u6301flat\uFF0Cvlan\u5916\uFF0C\u8FD8\u652F\u6301gre, vxlan\u3002quantum\u56E0\u4E3A\u548C\u4E00\u5BB6\u516C\u53F8\u7684\u540D\u79F0\u51B2\u7A81\uFF0C\u4E8E\u662F\uFF0C\u6539\u540D\u4E3Aneutron\u3002",-1),lA=s("ol",null,[s("li",null,"Neutron Server")],-1),eA=s("p",null,"\u8FD9\u4E00\u90E8\u5206\u5305\u542B\u5B88\u62A4\u8FDB\u7A0Bneutron-server\u548C\u5404\u79CD\u63D2\u4EF6neutron-*-plugin\u3002neutron-server\u63D0\u4F9BAPI\u63A5\u53E3\uFF0C\u5E76\u628A\u5BF9API\u7684\u8C03\u7528\u8BF7\u6C42\u4F20\u7ED9\u5DF2\u7ECF\u914D\u7F6E\u597D\u7684\u63D2\u4EF6\u8FDB\u884C\u540E\u7EED\u5904\u7406\u3002\u63D2\u4EF6\u9700\u8981\u8BBF\u95EE\u6570\u636E\u5E93\u6765\u7EF4\u62A4\u5404\u79CD\u914D\u7F6E\u6570\u636E\u548C\u5BF9\u5E94\u5173\u7CFB\uFF0C\u4F8B\u5982\u8DEF\u7531\u5668\u3001\u7F51\u7EDC\u3001\u5B50\u7F51\u3001\u7AEF\u53E3\u3001\u6D6E\u52A8IP\u3001\u5B89\u5168\u7EC4\u7B49\u7B49\u3002",-1),oA=s("ol",null,[s("li",null,"ML2(Module Layer2)plugin")],-1),aA=s("p",null,"\u4E0A\u8FF0\u6574\u4F53\u6846\u67B6\u4E2D\u63D0\u5230Neutron\u7EC4\u4EF6\u5185\u90E8\u6709\u5F88\u591A\u4E2A\u4E0D\u540C\u7684\u63D2\u4EF6\uFF08plugin\uFF09\uFF0C\u800C\u5728Neutron\u4E2D\uFF0C\u5B9E\u73B0\u4E00\u4E2A\u63D2\u4EF6\u5305\u62EC\u4E24\u4E2A\u90E8\u5206\u7684\u5185\u5BB9\uFF1A\u4E00\u90E8\u5206\u4E0E\u6570\u636E\u5E93db\u6253\u4EA4\u9053\u79F0\u4E4B\u4E3Aplugin\uFF08\u867D\u7136\u90FD\u662Fplugin\uFF0C\u4F46\u662F\u8FD9\u4E2A\u662F\u5177\u4F53\u5B9E\u73B0\u4E2D\u7684plugin\uFF09\uFF0C\u4E00\u90E8\u5206\u662F\u8C03\u7528\u5177\u4F53\u7684\u7F51\u7EDC\u8BBE\u5907\u771F\u6B63\u5E72\u6D3B\u7684\u79F0\u4E4B\u4E3Aagent\u3002 \u4E0Edb\u8FDB\u884C\u4EA4\u4E92\u7684plugin\u5728\u529F\u80FD\u4E0A\u6709\u5F88\u591A\u91CD\u590D\uFF0C\u6240\u4EE5\u5728\u4EE3\u7801\u4E0A\u6709\u5F88\u591A\u91CD\u590D\uFF0C\u56E0\u6B64\u5728Neutron\u4E2D\u63D0\u4F9B\u4E86\u4E00\u4E2A\u516C\u5171\u7684plugin\u53EBML2(ModuleLayer2) plugin\u3002\u6240\u4EE5ML2 plugin\u7684\u7B2C\u4E00\u4E2A\u4F5C\u7528\u5C31\u662F\uFF1A\u63D0\u4F9B\u4E0E\u6570\u636E\u5E93\u4EA4\u4E92\u7684\u516C\u5171plugin\u3002 ML2\u7684\u7B2C\u4E8C\u4E2A\u4F5C\u7528\u5C31\u662F\u5B9E\u73B0\u652F\u6301\u591A\u79CDpulgin\uFF08\u539F\u5148\u4F7F\u7528linux bridge\uFF0C\u5C31\u4E0D\u80FD\u7528openvswitch\uFF09\uFF0CML2\u901A\u8FC7MechanismDriver\u5B9E\u73B0\u3002MechanismDriver\u7684\u4F5C\u7528\u662F\u5C06agent\u7684\u7C7B\u578Bagent_type\u548Cvif_type\u5173\u8054\uFF0C\u8FD9\u6837vif_type\u5C31\u53EF\u4EE5\u76F4\u63A5\u901A\u8FC7\u6269\u5C55api\u8BBE\u7F6E\u4E86\u3002 ML2\u7684\u7B2C\u4E09\u4E2A\u4F5C\u7528\u5C31\u662F\u652F\u6301\u4E0D\u540C\u7684\u7F51\u7EDC\u62D3\u6251\uFF0C\u5982flat, vlan, gre, vxlan\uFF0C\u76F4\u63A5\u5728ml2_conf.ini\u8FD9\u4E2A\u914D\u7F6E\u6587\u4EF6\u91CC\u90FD\u914D\u4E0A\u5373\u53EF\u3002",-1),tA=s("ol",null,[s("li",null,[s("p",null,"L3-Agent"),s("p",null,"\u4E0A\u9762\u7684ml2\u89E3\u51B3\u7684\u53EA\u662F\u7F51\u7EDC\u4E2DL2\u5C42\u7684\u95EE\u9898\uFF0C\u5BF9\u4E8EL3\u5C42\u7684\u8DEF\u7531\u529F\u80FD\uFF0Cneturon\u5355\u72EC\u7528l3-agent\u5B9E\u73B0\uFF0C\u4E3A\u5BA2\u6237\u673A\u8BBF\u95EE\u5916\u90E8\u7F51\u7EDC\u63D0\u4F9B3\u5C42\u8F6C\u53D1\u670D\u52A1\u3002 L3 \u5C42\u7684\u8DEF\u7531\u5206\u9759\u6001\u8DEF\u7531\u548C\u52A8\u6001\u8DEF\u7531\u4E24\u79CD\uFF1A \u5728 Linux \u4E2D\uFF0C\u901A\u8FC7\u6253\u5F00 ipv4 forward \u7279\u6027\u53EF\u4EE5\u8BA9\u6570\u636E\u5305\u4ECE\u4E00\u5757\u7F51\u5361\u8DEF\u7531\u5230\u53E6\u5916\u4E00\u5757\u7F51\u5361\u4E0A\u3002 \u52A8\u6001\u8DEF\u7531\uFF0C\u5982\u5185\u90E8\u7F51\u5173\u534F\u8BAE RIP\uFF0COSPF\uFF1B\u5982\u5916\u90E8\u7F51\u5173\u534F\u8BAE BGP\u3002\u80FD\u591F\u81EA\u52A8\u5730\u5B66\u4E60\u5EFA\u7ACB\u8DEF\u7531\u8868\u3002")])],-1),cA=s("p",null,"\u76EE\u524D Neutron \u53EA\u652F\u6301\u9759\u6001\u8DEF\u7531\uFF0C\u8981\u70B9\u5982\u4E0B\uFF1A \u5BF9\u4E8E\u4E0D\u540C tenant \u5B50\u7F51\u901A\u8FC7 namespace \u529F\u80FD\u8FDB\u884C\u9694\u79BB\uFF0C\u5728 Linux \u4E2D\uFF0C\u4E00\u4E2A\u547D\u540D\u7A7A\u95F4 namespace \u60A8\u53EF\u4EE5\u7B80\u5355\u7406\u89E3\u6210 linux \u53C8\u542F\u52A8\u4E86\u4E00\u4E2A\u65B0\u7684 TCP/IP \u6808\u7684\u8FDB\u7A0B\u3002\u591A\u4E2A tenant \u610F\u5473\u7740\u591A\u4E2A namespace\uFF0C\u4E5F\u610F\u5473\u7740\u591A\u4E2A TCP/IP \u6808\u3002 \u5BF9\u4E8E\u540C\u4E00tenant \u4E2D\u7684\u4E0D\u540C\u5B50\u7F51\u7684\u9694\u79BB\u901A\u8FC7 iptables \u6765\u505A\uFF0C\u4E5F\u610F\u5473\u7740\uFF0C\u540C\u4E00tenant\u4E2D\u7684\u76F8\u540C\u5B50\u7F51\u7684\u4E24\u4E2A\u865A\u673A\u4E0D\u7528\u8D70 L3 \u5C42\uFF0C\u76F4\u63A5\u8D70 L2 \u5C42\u80FD\u901A\uFF0C\u6CA1\u95EE\u9898\uFF1B\u4F46\u5982\u679C\u540C\u4E00tenant\u4E2D\u7684\u4E0D\u540C\u5B50\u7F51\u7684\u4E24\u4E2A\u865A\u673A\u8981\u901A\u8BAF\u7684\u8BDD\uFF0C\u5FC5\u987B\u5F97\u7ED5\u9053 L3-agent \u7F51\u7EDC\u8282\u70B9\uFF0C\u8FD9\u662F\u5F71\u54CD\u6027\u80FD\u7684\u3002",-1),iA=s("ol",null,[s("li",null,"dhcp-agent")],-1),rA=s("p",null,"Dhcp-agent\u4E3B\u8981\u8D1F\u8D23\u4E3A\u5404\u4E2A\u79DF\u6237\u7F51\u7EDC\u63D0\u4F9BDHCP\u670D\u52A1\u3002 L4-L7\u7684Agent \u81F3\u4E8E\u518D\u4E4B\u4E0A\u7684L4-L7\u5C42\u7684FwaaS,VPNaaS, DNATaaS, DNSaaS\u7684\u5185\u5BB9\uFF0C\u5728neutron\u53C8\u51FA\u6765\u4E00\u4E2A\u65B0\u7684\u670D\u52A1\u6846\u67B6\u7528\u4E8E\u5C06\u6240\u6709\u8FD9\u4E9B\u9664L2\u5C42\u4EE5\u5916\u7684\u7F51\u7EDC\u670D\u52A1\u7C7B\u4F3C\u4E8E\u4E0A\u8FF0ml2\u7684\u601D\u60F3\u5728\u6570\u636E\u5E93\u8FD9\u5757\u4E00\u7F51\u6253\u5C3D\u3002 \u4E0B\u9762\u6211\u4EEC\u901A\u8FC7\u4E00\u4E2A\u5355\u4E00\u6241\u5E73\u7684\u63D0\u4F9B\u8005\u7F51\u7EDCFLAT\u6765\u90E8\u7F72neutron\u3002\u4E3A\u865A\u62DF\u673A\u63D0\u4F9B\u7F51\u7EDC\u8D44\u6E90\u3002",-1),pA=s("h3",{id:"neutron\u63A7\u5236\u8282\u70B9\u90E8\u7F72",tabindex:"-1"},[n("Neutron\u63A7\u5236\u8282\u70B9\u90E8\u7F72 "),s("a",{class:"header-anchor",href:"#neutron\u63A7\u5236\u8282\u70B9\u90E8\u7F72","aria-hidden":"true"},"#")],-1),dA=s("ol",null,[s("li",null,"Neutron\u5B89\u88C5")],-1),AA=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# yum install -y openstack-neutron openstack-neutron-ml2 \\")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"openstack-neutron-linuxbridge ebtables")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),CA=s("ol",null,[s("li",null,[n("Neutron\u914D\u7F6E "),s("ul",null,[s("li",null,"Neutron\u6570\u636E\u5E93\u914D\u7F6E")])])],-1),uA=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# vim /etc/neutron/neutron.conf")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[database]")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"connection = mysql+pymysql://neutron:neutron@192.168.56.11:3306/neutron")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),yA=s("ul",null,[s("li",null,"Keystone\u8FDE\u63A5\u914D\u7F6E")],-1),hA=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[DEFAULT]")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u2026")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#\u6CE8\u610F\uFF1A\u8BE5\u914D\u7F6E\u9ED8\u8BA4\u4E0D\u5B58\u5728\uFF0C\u9700\u8981\u6DFB\u52A0")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"auth_strategy = keystone")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[keystone_authtoken]")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"www_authenticate_uri = http://192.168.56.11:5000")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"auth_url = http://192.168.56.11:5000")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"memcached_servers = 192.168.56.11:11211")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"auth_type = password")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"project_domain_name = default")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"user_domain_name = default")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"project_name = service")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"username = neutron")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"password = neutron")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),_A=s("ul",null,[s("li",null,"RabbitMQ\u76F8\u5173\u8BBE\u7F6E")],-1),DA=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# vim /etc/neutron/neutron.conf")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[DEFAULT]")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"transport_url = rabbit://openstack:openstack@192.168.56.11")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#\u8BF7\u6CE8\u610F\u662F\u5728DEFAULT\u914D\u7F6E\u680F\u76EE\u4E0B\uFF0C\u56E0\u4E3A\u8BE5\u914D\u7F6E\u6587\u4EF6\u6709\u591A\u4E2Atransport_url\u7684\u914D\u7F6E")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),gA=s("ul",null,[s("li",null,"Neutron\u7F51\u7EDC\u57FA\u7840\u914D\u7F6E")],-1),mA=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#\u6CE8\u610F\uFF1A\u8BE5\u914D\u7F6E\u9ED8\u8BA4\u4E0D\u5B58\u5728\uFF0C\u9700\u8981\u6DFB\u52A0")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[DEFAULT]")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"core_plugin = ml2")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# \u8FD9\u4E2A\u914D\u7F6E\u6CA1\u6709\u9519\uFF0C\u5C31\u662F\u8BBE\u7F6E\u4E3A\u7A7A")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"service_plugins =")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),bA=s("ul",null,[s("li",null,"\u7F51\u7EDC\u62D3\u6251\u53D8\u5316Nova\u901A\u77E5\u914D\u7F6E")],-1),kA=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[DEFAULT]")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# \u8FD9\u4E24\u884C\u914D\u7F6E\u9700\u8981\u65B0\u589E")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"notify_nova_on_port_status_changes = True")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"notify_nova_on_port_data_changes = True")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# \u5728\u914D\u7F6E\u6587\u4EF6\u6700\u540E\u589E\u52A0\u4EE5\u4E0B\u914D\u7F6E\u6BB5")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[nova]")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"auth_url = http://192.168.56.11:5000")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"auth_type = password")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"project_domain_name = default")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"user_domain_name = default")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"region_name = RegionOne")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"project_name = service")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"username = nova")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"password = nova")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),vA=s("ul",null,[s("li",null,"\u5728 [oslo_concurrency] \u90E8\u5206\uFF0C\u914D\u7F6E\u9501\u8DEF\u5F84\uFF1A")],-1),xA=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[oslo_concurrency]")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"lock_path = /var/lib/neutron/tmp")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),fA=s("ol",null,[s("li",null,"Neutron ML2\u914D\u7F6E")],-1),SA=s("p",null,"\u8FD8\u662F\u5728\u63A7\u5236\u8282\u70B9\u4E0A\uFF0C\u6211\u4EEC\u9700\u8981\u914D\u7F6ENeutron ML2\u3002ML2\u4F7F\u7528Linux\u6865\u63A5\u673A\u5236\u4E3A\u5B9E\u4F8B\u521B\u5EFALayer-2\u7684\u865A\u62DF\u7F51\u7EDC\u57FA\u7840\u8BBE\u65BD\u3002",-1),EA=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# vim /etc/neutron/plugins/ml2/ml2_conf.ini")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#\u4EE5\u4E0B\u6240\u6709\u914D\u7F6E\u76EE\u524D\u5747\u9700\u8981\u65B0\u589E\uFF0C\u9ED8\u8BA4\u914D\u7F6E\u6587\u4EF6\u5DF2\u7ECF\u79FB\u9664\uFF0C\u6CE8\u610F\u5220\u9664\u6CE8\u91CA\u3002")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[ml2]")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"type_drivers = flat,vlan,gre,vxlan,geneve #\u652F\u6301\u591A\u9009\uFF0C\u6240\u4EE5\u628A\u6240\u6709\u7684\u9A71\u52A8\u90FD\u9009\u62E9\u4E0A\u3002")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"tenant_network_types = flat,vlan,gre,vxlan,geneve #\u652F\u6301\u591A\u9879\uFF0C\u6240\u4EE5\u628A\u6240\u6709\u7684\u7F51\u7EDC\u7C7B\u578B\u90FD\u9009\u62E9\u4E0A\u3002")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"mechanism_drivers = linuxbridge,openvswitch,l2population #\u9009\u62E9\u63D2\u4EF6\u9A71\u52A8\uFF0C\u652F\u6301\u591A\u9009\uFF0C\u5F00\u6E90\u7684\u6709linuxbridge\u548Copenvswitch")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#\u542F\u7528\u7AEF\u53E3\u5B89\u5168\u6269\u5C55\u9A71\u52A8")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"extension_drivers = port_security,qos ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[ml2_type_flat]")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#\u8BBE\u7F6E\u7F51\u7EDC\u63D0\u4F9B")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"flat_networks = provider")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[securitygroup]")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#\u542F\u7528ipset")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"enable_ipset = True")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),PA=s("ol",null,[s("li",null,"Neutron Linuxbridge\u914D\u7F6E")],-1),NA=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# vim /etc/neutron/plugins/ml2/linuxbridge_agent.ini")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#\u4EE5\u4E0B\u6240\u6709\u914D\u7F6E\u76EE\u524D\u5747\u9700\u8981\u65B0\u589E\uFF0C\u9ED8\u8BA4\u914D\u7F6E\u6587\u4EF6\u5DF2\u7ECF\u79FB\u9664\uFF0C\u6CE8\u610F\u5220\u9664\u6CE8\u91CA\u3002")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[linux_bridge]")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#\u6620\u5C04\u865A\u62DF\u7F51\u7EDC\u63A5\u53E3\u548C\u5B9E\u9645\u7F51\u7EDC\u63A5\u53E3\u7684\u5BF9\u5E94")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"physical_interface_mappings = provider:eth0 ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[vxlan]")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#\u7981\u6B62vxlan\u7F51\u7EDC")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"enable_vxlan = False")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[securitygroup]")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#\u8BBE\u7F6E\u4F7F\u7528Linux Bridge\u6865\u63A5\u7684\u9632\u706B\u5899\u9A71\u52A8\u548C\u5B89\u5168\u7EC4")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"firewall_driver = neutron.agent.linux.iptables_firewall.IptablesFirewallDriver")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"enable_security_group = True")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),RA=s("ol",null,[s("li",null,"Neutron DHCP-Agent\u914D\u7F6E")],-1),TA=s("p",null,"Neutron\u4E2D\u7684dhcp-agent\u7528\u6765\u4E3A\u4E91\u4E3B\u673A\u52A8\u6001\u5206\u914DIP\u5730\u5740\uFF0CDHCP Agent\u9ED8\u8BA4\u662F\u901A\u8FC7\u8C03\u7528dnsmasq\u6765\u5B9E\u73B0DHCP\u7684\u5206\u914D\u5DE5\u4F5C\u3002\u9ED8\u8BA4\u60C5\u51B5\u4E0Bdhcp-agent\u548C\u540E\u9762\u8981\u4ECB\u7ECD\u7684Lbaas-agent\u90FD\u9700\u8981\u4F9D\u8D56namespace,\u6240\u4EE5\u5F00\u59CB\u4E4B\u524D\u6211\u4EEC\u9700\u8981\u5148\u4ECB\u7ECD\u4E0Blinux\u7684namespache\u3002",-1),IA=s("p",null,[s("strong",null,"\u4EC0\u4E48\u662Fnamespace"),n(' Namespace(\u547D\u540D\u7A7A\u95F4)\uFF0C\u7B80\u5355\u7684\u8BF4\u5C31\u662F\u4E0D\u540C\u7684\u540D\u5B57\u7A7A\u95F4\uFF0C\u6253\u4E2A\u7B80\u5355\u7684\u6BD4\u65B9\uFF0C\u8FDB\u7A0B\u5728a\u7A7A\u95F4\u662F\u53EBa\u8FDB\u7A0B\uFF0C\u5728b\u7A7A\u95F4\u4E5F\u5C31\u53EF\u80FD\u53EBb\u8FDB\u7A0B\u3002\u4E3A\u4EC0\u4E48\u8981\u6709\u547D\u540D\u7A7A\u95F4\u5462\uFF1F\u4E3B\u8981\u662F\u6EE1\u8DB3\u865A\u62DF\u5316\u7684\u4E00\u4E9B\u9700\u6C42\u3002\u8BD5\u60F3\uFF0C\u5982\u679C\u6709\u4E00\u53F0\u673A\u5668\uFF0C\u4E0D\u7BA1\u5B83\u662F\u4E2A\u4EBApc\u8FD8\u662F\u670D\u52A1\u5668\uFF0C\u6216\u662F \u7F51\u7EDC\u4EA4\u6362\u673A\uFF0C\u8DEF\u7531\u5668\uFF0C\u4E00\u822C\u60C5\u51B5\u4E0B\uFF0C\u5B83\u4E5F\u5C31\u88AB\u4E00\u4E2A\u7528\u6237\u4F7F\u7528\u3002\u4F46\u662F\u5982\u679C\u67D0\u4E00\u5929\uFF0C\u53E6\u5916\u4E00\u4E2A\u7528\u6237\u4E5F\u8981\u4F7F\u7528\u540C\u6837\u7684\u673A\u5668\uFF0C\u4E00\u79CD\u65B9\u6CD5\u662F\u518D\u4E70\u4E00\u4E2A\u673A\u5668\uFF0C\u88C5\u4E0A\u540C\u6837\u7684 linux\u7CFB\u7EDF\uFF0C\u4F46\u662F\u8FD8\u6709\u4E00\u79CD\u66F4\u597D\u7684\u65B9\u6CD5\uFF0C\u5C31\u662F\u4F7F\u7528\u5BB9\u5668\uFF08container\uFF09\uFF0C\u6BCF\u4E2A\u7528\u6237\u6709\u5C5E\u4E8E\u81EA\u5DF1\u7684\u5BB9\u5668\uFF0C\u800C\u4E14\u5BB9\u5668\u4E4B\u95F4\u76F8\u4E92\u9694\u79BB\uFF0C\u800Cnamespace \u5C31\u662F\u5B9E\u73B0\u5BB9\u5668\u7684\u4E00\u79CD\u624B\u6BB5\u3002Namespace\u53EF\u4EE5\u5B9E\u73B0pid\u3001net\u3001ipc\u3001mnt\u3001uts\u3001user\u7B49namespace\u5C06\u5BB9\u5668\u7684\u8FDB\u7A0B\u3001\u7F51\u7EDC\u3001\u6D88\u606F\u3001\u6587\u4EF6\u7CFB\u7EDF\u3001UTS("UNIX Time-sharing System")\u548C\u7528\u6237\u7A7A\u95F4\u9694\u79BB\u5F00\u3002\u5728Docker\u4E2D\uFF0C\u6211\u4EEC\u4F1A\u8BE6\u89E3\u8BB2\u89E3namespace\u3002')],-1),OA=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# vim /etc/neutron/dhcp_agent.ini")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[DEFAULT]")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"interface_driver = linuxbridge")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"dhcp_driver = neutron.agent.linux.dhcp.Dnsmasq")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"enable_isolated_metadata = True")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),MA=s("ol",null,[s("li",null,"Neutron metadata\u914D\u7F6E")],-1),wA=s("p",null,"metadata agent\u4E3A\u5B9E\u4F8B\u63D0\u4F9B\u8BF8\u5982\u51ED\u8BC1\u7684\u914D\u7F6E\u4FE1\u606F\u3002\u9700\u8981\u8BBE\u7F6EKeystone\u7684\u94FE\u63A5\u548Cnova\u7684\u8FDE\u63A5\u53C2\u6570\u3002",-1),KA=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# vim /etc/neutron/metadata_agent.ini")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[DEFAULT]")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"nova_metadata_host = 192.168.56.11")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#\u6CE8\u610F\u8FD9\u4E2A\u662F\u4E3A\u5143\u6570\u636E\u4EE3\u7406\u8BBE\u7F6E\u7684\u5BC6\u7801\uFF0C\u9700\u8981\u548Cnova\u7684\u914D\u7F6E\u76F8\u5BF9\u5E94\u3002")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"metadata_proxy_shared_secret = unixhot.com")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),LA=s("ol",null,[s("li",null,"Neutron\u76F8\u5173\u914D\u7F6E\u5728nova.conf")],-1),UA=s("p",null,"Neutron\u7684\u914D\u7F6E\uFF0C\u9700\u8981\u4FEE\u6539nova\u7684\u914D\u7F6E\u6587\u4EF6\uFF0C\u56E0\u4E3A\u9ED8\u8BA4\u5927\u591A\u6570OpenStack\u53D1\u884C\u7248\u91CCnova.conf\u91CC\u9762\u7684\u7F51\u7EDC\u76F8\u5173\u7684\u914D\u7F6E\u90FD\u662F\u6BD4\u8F83\u8001\u7684\uFF0C\u4F7F\u7528\u7684\u6700\u65E9\u7684nova-network\u7684\u914D\u7F6E\u3002\u6240\u4EE5\u9700\u8981\u8FDB\u884C\u4FEE\u6539\u3002",-1),jA=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# vim /etc/nova/nova.conf ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[neutron]")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"auth_url = http://192.168.56.11:5000")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"auth_type = password")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"project_domain_name = default")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"user_domain_name = default")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"region_name = RegionOne")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"project_name = service")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"username = neutron")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"password = neutron")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"service_metadata_proxy = true")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"metadata_proxy_shared_secret = unixhot.com")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#\u6CE8\u610F\u8FD9\u91CC\u8BBE\u7F6E\u7684\u5171\u4EAB\u79D8\u94A5\u9700\u8981\u548C\u4E4B\u524D\u7684\u5BF9\u5E94\u4E0A\u3002")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),GA=s("ol",null,[s("li",null,"\u914D\u7F6E\u5B8C\u6BD5\u540E\uFF0C\u6211\u4EEC\u9700\u8981\u8BBE\u7F6E\u4E00\u4E2A\u8F6F\u8FDE\u63A5\uFF0C\u56E0\u4E3A\u9ED8\u8BA4\u670D\u52A1\u4F1A\u8BFB\u53D6plugin.ini\u3002")],-1),HA=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# ln -s /etc/neutron/plugins/ml2/ml2_conf.ini /etc/neutron/plugin.ini")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),FA=s("ol",null,[s("li",null,"\u540C\u6B65\u6570\u636E\u5E93")],-1),VA=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'[root@linux-node1 ~]# su -s /bin/sh -c "neutron-db-manage --config-file /etc/neutron/neutron.conf \\')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'--config-file /etc/neutron/plugins/ml2/ml2_conf.ini upgrade head" neutron')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),BA=s("ol",null,[s("li",null,"\u91CD\u542F\u8BA1\u7B97API \u670D\u52A1")],-1),qA=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# systemctl restart openstack-nova-api.service")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),YA=s("ol",null,[s("li",null,"\u542F\u52A8\u7F51\u7EDC\u670D\u52A1\u5E76\u914D\u7F6E\u4ED6\u4EEC\u5F00\u673A\u81EA\u542F\u52A8\u3002")],-1),zA=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# systemctl enable neutron-server.service \\")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  neutron-linuxbridge-agent.service neutron-dhcp-agent.service \\")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  neutron-metadata-agent.service")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# systemctl start neutron-server.service \\")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  neutron-linuxbridge-agent.service neutron-dhcp-agent.service \\")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  neutron-metadata-agent.service")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),$A=s("ol",null,[s("li",null,"Neutron\u670D\u52A1\u6CE8\u518C")],-1),XA=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u521B\u5EFAservice")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'# openstack service create --name neutron --description "OpenStack Networking" network')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u521B\u5EFAendpoint")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# openstack endpoint create --region RegionOne network public http://192.168.56.11:9696")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# openstack endpoint create --region RegionOne network internal http://192.168.56.11:9696")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# openstack endpoint create --region RegionOne network admin http://192.168.56.11:9696")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),JA=s("ol",null,[s("li",null,"\u6D4B\u8BD5Neutron\u5B89\u88C5**")],-1),WA=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@openstack-compute-node1 neutron]# openstack network agent list")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"WARNING: Failed to import plugin orchestration.")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"WARNING: Failed to import plugin data_processing.")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"+--------------------------------------+--------------------+-------------------------------------+-------------------+-------+-------+---------------------------+")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"| ID                                   | Agent Type         | Host                                | Availability Zone | Alive | State | Binary                    |")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"+--------------------------------------+--------------------+-------------------------------------+-------------------+-------+-------+---------------------------+")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"| c4a78188-a3ad-4cda-8c47-41f854aad375 | Linux bridge agent | openstack-compute-node1.dianjoy.com | None              | :-)   | UP    | neutron-linuxbridge-agent |")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"| e2325b10-281b-447c-b46f-7875c0eda1fc | Metadata agent     | openstack-compute-node1.dianjoy.com | None              | :-)   | UP    | neutron-metadata-agent    |")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"| fb73fabc-2825-42c4-ae24-ea50bb1d37b8 | DHCP agent         | openstack-compute-node1.dianjoy.com | nova              | :-)   | UP    | neutron-dhcp-agent        |")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"+--------------------------------------+--------------------+-------------------------------------+-------------------+-------+-------+---------------------------+")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),QA=s("p",null,"\u5982\u679C\u53EF\u4EE5\u6B63\u5E38\u8F93\u51FA\uFF0C\u57FA\u672C\u4E0ANeutron\u7684\u5B89\u88C5\u5C31\u6CA1\u6709\u95EE\u9898\u3002",-1),ZA=s("h3",{id:"neutron\u8BA1\u7B97\u8282\u70B9\u90E8\u7F72",tabindex:"-1"},[n("Neutron\u8BA1\u7B97\u8282\u70B9\u90E8\u7F72 "),s("a",{class:"header-anchor",href:"#neutron\u8BA1\u7B97\u8282\u70B9\u90E8\u7F72","aria-hidden":"true"},"#")],-1),sC=s("ol",null,[s("li",null,"\u5B89\u88C5\u8F6F\u4EF6\u5305")],-1),nC=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}}," [root@linux-node2 ~]# yum install -y openstack-neutron openstack-neutron-linuxbridge ebtables")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),lC=s("ol",null,[s("li",null,[n("\u914D\u7F6E\u8BA1\u7B97\u8282\u70B9Neutron "),s("ul",null,[s("li",null,"Keystone\u8FDE\u63A5\u914D\u7F6E")])])],-1),eC=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node2 ~]# vim /etc/neutron/neutron.conf")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[DEFAULT]")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"auth_strategy = keystone")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[keystone_authtoken]")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"www_authenticate_uri = http://192.168.56.11:5000")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"auth_url = http://192.168.56.11:5000")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"memcached_servers = 192.168.56.11:11211")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"auth_type = password")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"project_domain_name = default")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"user_domain_name = default")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"project_name = service")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"username = neutron")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"password = neutron")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),oC=s("ul",null,[s("li",null,"RabbitMQ\u76F8\u5173\u8BBE\u7F6E")],-1),aC=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# vim /etc/neutron/neutron.conf")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[DEFAULT]")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"transport_url = rabbit://openstack:openstack@192.168.56.11")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#\u8BF7\u6CE8\u610F\u662F\u5728DEFAULT\u914D\u7F6E\u680F\u76EE\u4E0B\uFF0C\u56E0\u4E3A\u8BE5\u914D\u7F6E\u6587\u4EF6\u6709\u591A\u4E2Atransport_url\u7684\u914D\u7F6E")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),tC=s("ul",null,[s("li",null,"\u9501\u8DEF\u5F84")],-1),cC=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[oslo_concurrency]")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"lock_path = /var/lib/neutron/tmp")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),iC=s("ol",null,[s("li",null,"\u914D\u7F6ELinuxBridge\u914D\u7F6E")],-1),rC=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# scp /etc/neutron/plugins/ml2/linuxbridge_agent.ini 192.168.56.12:/etc/neutron/plugins/ml2/")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),pC=s("ol",null,[s("li",null,"\u8BBE\u7F6E\u8BA1\u7B97\u8282\u70B9\u7684nova.conf")],-1),dC=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node2 ~]# vim /etc/nova/nova.conf")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[neutron]")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"auth_url = http://192.168.56.11:5000")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"auth_type = password")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"project_domain_name = default")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"user_domain_name = default")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"region_name = RegionOne")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"project_name = service")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"username = neutron")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"password = neutron")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),AC=s("ol",null,[s("li",null,"\u91CD\u542F\u8BA1\u7B97\u670D\u52A1")],-1),CC=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node2 ~]# systemctl restart openstack-nova-compute.service")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),uC=s("ol",null,[s("li",null,"\u542F\u52A8\u8BA1\u7B97\u8282\u70B9linuxbridge-agent")],-1),yC=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node2 ~]# systemctl enable neutron-linuxbridge-agent.service")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node2 ~]# systemctl start neutron-linuxbridge-agent.service")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),hC=s("ol",null,[s("li",null,"\u5728\u63A7\u5236\u8282\u70B9\u4E0A\u6D4B\u8BD5Neutron\u5B89\u88C5")],-1),_C=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# source admin-openstack.sh ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# openstack network agent list")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"+--------------------------------------+--------------------+-----------------------------+-------------------+-------+-------+---------------------------+")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"| ID                                   | Agent Type         | Host                        | Availability Zone | Alive | State | Binary                    |")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"+--------------------------------------+--------------------+-----------------------------+-------------------+-------+-------+---------------------------+")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"| 11f1de57-836f-412f-b9b4-51dcdc9ae931 | Metadata agent     | linux-node1.example.com | None              | :-)   | UP    | neutron-metadata-agent    |")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"| 197b84cd-7d6e-4ed2-9fa0-46499fe7cdb7 | Linux bridge agent | linux-node2.example.com | None              | :-)   | UP    | neutron-linuxbridge-agent |")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"| 531afd6d-ee81-4b64-a0f4-ec5fd523eff8 | DHCP agent         | linux-node1.example.com | nova              | :-)   | UP    | neutron-dhcp-agent        |")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"| dfc431ff-dede-4a54-8371-653c6e72ffd9 | Linux bridge agent | linux-node1.example.com | None              | :-)   | UP    | neutron-linuxbridge-agent |")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"+--------------------------------------+--------------------+-----------------------------+-------------------+-------+-------+---------------------------+")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),DC=s("p",null,"\u770B\u662F\u5426\u6709linux-node2.example.com\u7684Linux bridge agent",-1),gC=s("h3",{id:"bug\u89E3\u51B3",tabindex:"-1"},[n("Bug\u89E3\u51B3 "),s("a",{class:"header-anchor",href:"#bug\u89E3\u51B3","aria-hidden":"true"},"#")],-1),mC=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"2020-01-29 14:09:22.599 6346 ERROR neutron.plugins.ml2.drivers.agent._common_agent [req-68a7936c-2bbc-454e-bee4-6785cd3dce7b - - - - -] Error in agent loop. Devices info: {'current': set(['tap07dc4c9c-f3']), 'timestamps': {'tap07dc4c9c-f3': 7}, 'removed': set([]), 'added': set(['tap07dc4c9c-f3']), 'updated': set([])}: KeyError: 'gateway'")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"2020-01-29 14:09:22.599 6346 ERROR neutron.plugins.ml2.drivers.agent._common_agent Traceback (most recent call last):")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'2020-01-29 14:09:22.599 6346 ERROR neutron.plugins.ml2.drivers.agent._common_agent   File "/usr/lib/python2.7/site-packages/neutron/plugins/ml2/drivers/agent/_common_agent.py", line 465, in daemon_loop')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"2020-01-29 14:09:22.599 6346 ERROR neutron.plugins.ml2.drivers.agent._common_agent     sync = self.process_network_devices(device_info)")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'2020-01-29 14:09:22.599 6346 ERROR neutron.plugins.ml2.drivers.agent._common_agent   File "/usr/lib/python2.7/site-packages/osprofiler/profiler.py", line 160, in wrapper')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"2020-01-29 14:09:22.599 6346 ERROR neutron.plugins.ml2.drivers.agent._common_agent     result = f(*args, **kwargs)")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'2020-01-29 14:09:22.599 6346 ERROR neutron.plugins.ml2.drivers.agent._common_agent   File "/usr/lib/python2.7/site-packages/neutron/plugins/ml2/drivers/agent/_common_agent.py", line 214, in process_network_devices')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"2020-01-29 14:09:22.599 6346 ERROR neutron.plugins.ml2.drivers.agent._common_agent     resync_a = self.treat_devices_added_updated(devices_added_updated)")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'2020-01-29 14:09:22.599 6346 ERROR neutron.plugins.ml2.drivers.agent._common_agent   File "/usr/lib/python2.7/site-packages/osprofiler/profiler.py", line 160, in wrapper')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"2020-01-29 14:09:22.599 6346 ERROR neutron.plugins.ml2.drivers.agent._common_agent     result = f(*args, **kwargs)")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'2020-01-29 14:09:22.599 6346 ERROR neutron.plugins.ml2.drivers.agent._common_agent   File "/usr/lib/python2.7/site-packages/neutron/plugins/ml2/drivers/agent/_common_agent.py", line 231, in treat_devices_added_updated')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"2020-01-29 14:09:22.599 6346 ERROR neutron.plugins.ml2.drivers.agent._common_agent     self._process_device_if_exists(device_details)")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'2020-01-29 14:09:22.599 6346 ERROR neutron.plugins.ml2.drivers.agent._common_agent   File "/usr/lib/python2.7/site-packages/neutron/plugins/ml2/drivers/agent/_common_agent.py", line 258, in _process_device_if_exists')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"2020-01-29 14:09:22.599 6346 ERROR neutron.plugins.ml2.drivers.agent._common_agent     device, device_details['device_owner'])")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'2020-01-29 14:09:22.599 6346 ERROR neutron.plugins.ml2.drivers.agent._common_agent   File "/usr/lib/python2.7/site-packages/neutron/plugins/ml2/drivers/linuxbridge/agent/linuxbridge_neutron_agent.py", line 585, in plug_interface')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"2020-01-29 14:09:22.599 6346 ERROR neutron.plugins.ml2.drivers.agent._common_agent     network_segment.mtu)")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'2020-01-29 14:09:22.599 6346 ERROR neutron.plugins.ml2.drivers.agent._common_agent   File "/usr/lib/python2.7/site-packages/neutron/plugins/ml2/drivers/linuxbridge/agent/linuxbridge_neutron_agent.py", line 521, in add_tap_interface')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"2020-01-29 14:09:22.599 6346 ERROR neutron.plugins.ml2.drivers.agent._common_agent     return False")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'2020-01-29 14:09:22.599 6346 ERROR neutron.plugins.ml2.drivers.agent._common_agent   File "/usr/lib/python2.7/site-packages/oslo_utils/excutils.py", line 220, in __exit__')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"2020-01-29 14:09:22.599 6346 ERROR neutron.plugins.ml2.drivers.agent._common_agent     self.force_reraise()")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'2020-01-29 14:09:22.599 6346 ERROR neutron.plugins.ml2.drivers.agent._common_agent   File "/usr/lib/python2.7/site-packages/oslo_utils/excutils.py", line 196, in force_reraise')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"2020-01-29 14:09:22.599 6346 ERROR neutron.plugins.ml2.drivers.agent._common_agent     six.reraise(self.type_, self.value, self.tb)")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'2020-01-29 14:09:22.599 6346 ERROR neutron.plugins.ml2.drivers.agent._common_agent   File "/usr/lib/python2.7/site-packages/neutron/plugins/ml2/drivers/linuxbridge/agent/linuxbridge_neutron_agent.py", line 513, in add_tap_interface')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"2020-01-29 14:09:22.599 6346 ERROR neutron.plugins.ml2.drivers.agent._common_agent     tap_device_name, device_owner, mtu)")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'2020-01-29 14:09:22.599 6346 ERROR neutron.plugins.ml2.drivers.agent._common_agent   File "/usr/lib/python2.7/site-packages/neutron/plugins/ml2/drivers/linuxbridge/agent/linuxbridge_neutron_agent.py", line 546, in _add_tap_interface')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"2020-01-29 14:09:22.599 6346 ERROR neutron.plugins.ml2.drivers.agent._common_agent     mtu):")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'2020-01-29 14:09:22.599 6346 ERROR neutron.plugins.ml2.drivers.agent._common_agent   File "/usr/lib/python2.7/site-packages/neutron/plugins/ml2/drivers/linuxbridge/agent/linuxbridge_neutron_agent.py", line 497, in ensure_physical_in_bridge')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"2020-01-29 14:09:22.599 6346 ERROR neutron.plugins.ml2.drivers.agent._common_agent     physical_interface)")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'2020-01-29 14:09:22.599 6346 ERROR neutron.plugins.ml2.drivers.agent._common_agent   File "/usr/lib/python2.7/site-packages/neutron/plugins/ml2/drivers/linuxbridge/agent/linuxbridge_neutron_agent.py", line 286, in ensure_flat_bridge')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"2020-01-29 14:09:22.599 6346 ERROR neutron.plugins.ml2.drivers.agent._common_agent     if self.ensure_bridge(bridge_name, physical_interface):")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'2020-01-29 14:09:22.599 6346 ERROR neutron.plugins.ml2.drivers.agent._common_agent   File "/usr/lib/python2.7/site-packages/neutron/plugins/ml2/drivers/linuxbridge/agent/linuxbridge_neutron_agent.py", line 455, in ensure_bridge')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"2020-01-29 14:09:22.599 6346 ERROR neutron.plugins.ml2.drivers.agent._common_agent     self.update_interface_ip_details(bridge_name, interface)")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'2020-01-29 14:09:22.599 6346 ERROR neutron.plugins.ml2.drivers.agent._common_agent   File "/usr/lib/python2.7/site-packages/neutron/plugins/ml2/drivers/linuxbridge/agent/linuxbridge_neutron_agent.py", line 417, in update_interface_ip_details')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"2020-01-29 14:09:22.599 6346 ERROR neutron.plugins.ml2.drivers.agent._common_agent     gateway)")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'2020-01-29 14:09:22.599 6346 ERROR neutron.plugins.ml2.drivers.agent._common_agent   File "/usr/lib/python2.7/site-packages/neutron/plugins/ml2/drivers/linuxbridge/agent/linuxbridge_neutron_agent.py", line 401, in _update_interface_ip_details')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"2020-01-29 14:09:22.599 6346 ERROR neutron.plugins.ml2.drivers.agent._common_agent     dst_device.route.add_gateway(gateway=gateway['gateway'],")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"2020-01-29 14:09:22.599 6346 ERROR neutron.plugins.ml2.drivers.agent._common_agent KeyError: 'gateway'")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),bC=s("p",null,"\u5206\u522B\u4FEE\u6539\u63A7\u5236\u8282\u70B9\u548C\u8BA1\u7B97\u8282\u70B9\u4E0A\u7684Neutron\u6E90\u7801\uFF0C\u5E76\u91CD\u542F\u670D\u52A1",-1),kC=s("ol",null,[s("li",null,"\u5C06priority\u4FEE\u6539\u4E3Ametric")],-1),vC=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@openstack-compute-node3 ~]# vim +1503 /usr/lib/python2.7/site-packages/neutron/agent/linux/ip_lib.py")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#'priority': get_attr(route, 'RTA_PRIORITY'),")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"'metric': get_attr(route, 'RTA_PRIORITY'),")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),xC=s("ol",null,[s("li",null,"\u5C06gateway\u4FEE\u6539\u4E3Avia")],-1),fC=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@openstack-compute-node3 ~]# vim +402 /usr/lib/python2.7/site-packages/neutron/plugins/ml2/drivers/linuxbridge/agent/linuxbridge_neutron_agent.py")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#dst_device.route.add_gateway(gateway=gateway['gateway'],")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"            dst_device.route.add_gateway(gateway=gateway['via'],")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"                                         metric=metric)")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"            #src_device.route.delete_gateway(gateway=gateway['gateway'])")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"            src_device.route.delete_gateway(gateway=gateway['via'])")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),SC=s("p",null,"\u8BA1\u7B97\u8282\u70B9\u91CD\u542F\u670D\u52A1",-1),EC=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@openstack-compute-node3 ~]# systemctl restart neutron-linuxbridge-agent")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),PC=s("p",null,"\u63A7\u5236\u8282\u70B9\u91CD\u542F\u670D\u52A1",-1),NC=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@openstack-compute-node1 ~]# systemctl restart neutron-server.service   neutron-linuxbridge-agent.s")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),RC=s("h1",{id:"_1-8-\u521B\u5EFA\u7B2C\u4E00\u53F0openstack\u4E91\u4E3B\u673A",tabindex:"-1"},[n("1.8 \u521B\u5EFA\u7B2C\u4E00\u53F0OpenStack\u4E91\u4E3B\u673A "),s("a",{class:"header-anchor",href:"#_1-8-\u521B\u5EFA\u7B2C\u4E00\u53F0openstack\u4E91\u4E3B\u673A","aria-hidden":"true"},"#")],-1),TC=s("p",null,"\u597D\u7684\uFF0C\u5230\u76EE\u524D\u4E3A\u6B62\uFF0C\u4F60\u5DF2\u7ECF\u5B8C\u6210\u4E86\u542F\u52A8\u4E00\u53F0\u865A\u62DF\u673A\u6240\u6709\u7684\u5FC5\u5907\u6761\u4EF6\u3002",-1),IC=s("ul",null,[s("li",null,"MySQL\uFF1A\u4E3A\u5404\u4E2A\u670D\u52A1\u63D0\u4F9B\u6570\u636E\u5B58\u50A8"),s("li",null,"RabbitMQ\uFF1A\u4E3A\u5404\u4E2A\u670D\u52A1\u4E4B\u95F4\u901A\u4FE1\u63D0\u4F9B\u4EA4\u901A\u67A2\u7EBD"),s("li",null,"KeyStone\uFF1A\u4E3A\u5404\u4E2A\u670D\u52A1\u5668\u4E4B\u95F4\u901A\u4FE1\u63D0\u4F9B\u8BA4\u8BC1\u548C\u670D\u52A1\u6CE8\u518C"),s("li",null,"Glance\uFF1A\u4E3A\u865A\u62DF\u673A\u63D0\u4F9B\u955C\u50CF\u7BA1\u7406"),s("li",null,"Nova\uFF1A\u4E3A\u865A\u62DF\u673A\u63D0\u4F9B\u8BA1\u7B97\u8D44\u6E90"),s("li",null,"Neutron\uFF1A\u4E3A\u865A\u62DF\u673A\u63D0\u4F9B\u7F51\u7EDC\u8D44\u6E90\u3002")],-1),OC=s("p",null,"\u73B0\u5728\u4F60\u53EF\u4EE5\u7740\u624B\u542F\u52A8\u4E00\u53F0\u865A\u62DF\u673A\uFF0C\u5269\u4E0B\u7684OpenStack\u670D\u52A1\u90FD\u53EF\u4EE5\u8BA4\u4E3A\u662F\u53EF\u9009\u7684\uFF0C\u4E0D\u8FC7\u901A\u5E38\u6211\u4EEC\u4F1A\u7528\u5230Dashboard\u6765\u901A\u8FC7Web\u754C\u9762\u6765\u7BA1\u7406\uFF0C\u540E\u9762\u7684\u7AE0\u8282\u6211\u4EEC\u4F1A\u8BB2\u5230\uFF0C\u73B0\u5728\u6211\u4EEC\u4F7F\u7528\u547D\u4EE4\u6765\u521B\u5EFA\u6211\u4EEC\u7684\u7B2C\u4E00\u53F0\u865A\u62DF\u673A\u3002",-1),MC=s("h3",{id:"\u521B\u5EFAflat\u7F51\u7EDC",tabindex:"-1"},[n("\u521B\u5EFAFLAT\u7F51\u7EDC "),s("a",{class:"header-anchor",href:"#\u521B\u5EFAflat\u7F51\u7EDC","aria-hidden":"true"},"#")],-1),wC=s("p",null,"\u9996\u5148\u6211\u4EEC\u9700\u8981\u521B\u5EFA\u4E00\u4E2A\u7F51\u7EDC\u3002\u6211\u4EEC\u73B0\u5728\u4E3Ademo\u79DF\u6237\uFF0C\u521B\u5EFA\u4E00\u4E2AFLAT\u7C7B\u578B\u7684\u7F51\u7EDC\u3002\u5982\u4E0B\u56FE\u6240\u793A\u3002",-1),KC=s("ol",null,[s("li",null,"\u521B\u5EFAFlant\u7F51\u7EDC")],-1),LC=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# source admin-openstack.sh")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# openstack network create  --share --external \\")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  --provider-physical-network provider \\")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  --provider-network-type flat provider")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),UC=s("ol",null,[s("li",null,"\u67E5\u770B\u7F51\u7EDC")],-1),jC=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# openstack network list")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),GC=s("ol",null,[s("li",null,"\u521B\u5EFA\u5B50\u7F51")],-1),HC=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# openstack subnet create --network provider \\")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  --allocation-pool start=192.168.56.100,end=192.168.56.200 \\")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  --dns-nameserver 223.5.5.5  --gateway 192.168.56.2 \\")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  --subnet-range 192.168.56.0/24 provider-subnet")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),FC=s("ol",null,[s("li",null,"\u67E5\u770B\u5B50\u7F51")],-1),VC=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# openstack subnet list")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"+--------------------------------------+----------+--------------------------------------+-----------------+")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"| ID                                   | Name     | Network                              | Subnet          |")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"+--------------------------------------+----------+--------------------------------------+-----------------+")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"| 297530f8-62b6-4954-ad33-c8a4ba922a3e | provider | 6cf562b4-0537-4232-a2b9-ce5481e6a505 | 192.168.56.0/24 |")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"+--------------------------------------+----------+--------------------------------------+-----------------+")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),BC=s("h3",{id:"\u521B\u5EFA\u4E91\u4E3B\u673A",tabindex:"-1"},[n("\u521B\u5EFA\u4E91\u4E3B\u673A "),s("a",{class:"header-anchor",href:"#\u521B\u5EFA\u4E91\u4E3B\u673A","aria-hidden":"true"},"#")],-1),qC=s("ol",null,[s("li",null,"\u521B\u5EFA\u4E91\u4E3B\u673A\u7C7B\u578B")],-1),YC=s("p",null,"\u7531\u4E8E\u9ED8\u8BA4\u7684\u4E91\u4E3B\u673A\u5927\u5C0F\u5185\u5B58\u6700\u5C0F\u662F512M\uFF0C\u8003\u8651\u5230\u591A\u6570\u4EBA\u81EA\u5DF1PC\u7684\u5B9E\u9A8C\u73AF\u5883\u5185\u5B58\u6709\u9650\uFF0C\u6211\u4EEC\u521B\u5EFA\u4E00\u4E2A\u6BD4\u8F83\u5C0F\u7684\u4E91\u4E3B\u673A\u7C7B\u578B\u3002",-1),zC=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# openstack flavor create --id 0 --vcpus 1 --ram 64 --disk 1 m1.nano")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),$C=s("ol",null,[s("li",null,"\u521B\u5EFA\u5BC6\u94A5\u5BF9")],-1),XC=s("p",null,"\u5BC6\u94A5\u5BF9\u7528\u6765\u4F7F\u7528\u767B\u5F55\u521B\u5EFA\u540E\u7684\u865A\u62DF\u673A\uFF0COpenStack\u5728\u521B\u5EFA\u865A\u62DF\u673A\u7684\u65F6\u5019\u4F1A\u628A\u516C\u94A5\u653E\u5230\u865A\u62DF\u673A\u91CC\u9762\uFF0C\u8FD9\u6837\u6211\u4EEC\u5C31\u53EF\u4EE5\u4E0D\u4F7F\u7528\u5BC6\u7801\u8FDE\u63A5\u3002 \u6CE8\u610F\u73B0\u5728\u5207\u6362\u5230demo\u7528\u6237\uFF0C\u56E0\u4E3A\u6211\u4EEC\u8981\u4F7F\u7528demo\u7528\u6237\u6765\u521B\u5EFA\u7B2C\u4E00\u53F0\u4E91\u4E3B\u673A",-1),JC=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# source demo-openstack.sh")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'[root@linux-node1 ~]# ssh-keygen -q -N ""')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# openstack keypair create --public-key ~/.ssh/id_rsa.pub mykey")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# openstack keypair list")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"+-------+-------------------------------------------------+")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"| Name  | Fingerprint                                     |")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"+-------+-------------------------------------------------+")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"| mykey | d2:e0:bc:3e:35:58:5f:7b:fd:c1:0a:93:5e:bf:8f:2d |")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"+-------+-------------------------------------------------+")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),WC=s("ol",null,[s("li",null,"\u6DFB\u52A0\u5B89\u5168\u7EC4\u89C4\u5219")],-1),QC=s("p",null,"\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u6709\u4E00\u4E2Adefault\u5B89\u5168\u7EC4\uFF0C\u8FD9\u4E2A\u5B89\u5168\u7EC4\u4F1A\u62D2\u7EDD\u6240\u6709\u8BBF\u95EE\uFF0C\u6240\u4EE5\u4E3A\u4E86\u521B\u5EFA\u865A\u62DF\u673A\u80FD\u591F\u8FDE\u63A5\uFF0C\u6211\u4EEC\u9700\u8981\u8BBE\u7F6E\u8FD0\u884CICMP\u548C22\u7AEF\u53E3\u8BBF\u95EE\u3002",-1),ZC=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# openstack security group rule create --proto icmp default")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# openstack security group rule create --proto tcp --dst-port 22 default")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),su=s("ol",null,[s("li",null,"\u542F\u52A8\u5B9E\u4F8B\u524D\u51C6\u5907")],-1),nu=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# source demo-openstack.sh")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),lu=s("ul",null,[s("li",null,"\u67E5\u770B\u53EF\u7528\u7684\u4E91\u4E3B\u673A\u7C7B\u578B")],-1),eu=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# openstack flavor list")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"+----+---------+-----+------+-----------+-------+-----------+")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"| ID | Name    | RAM | Disk | Ephemeral | VCPUs | Is Public |")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"+----+---------+-----+------+-----------+-------+-----------+")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"| 0  | m1.nano |  64 |    1 |         0 |     1 | True      |")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"+----+---------+-----+------+-----------+-------+-----------+")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),ou=s("ul",null,[s("li",null,"\u67E5\u770B\u53EF\u7528\u7684\u955C\u50CF")],-1),au=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# openstack image list")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"+--------------------------------------+--------+--------+--------+")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"| ID                                   | Name   | Status | Server |")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"+--------------------------------------+--------+--------+--------+")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"| 68615b2c-d10e-422f-9acb-c724808657ab | cirros | ACTIVE |        |")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"+--------------------------------------+--------+--------+--------+")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),tu=s("ul",null,[s("li",null,"\u67E5\u770B\u53EF\u7528\u7684\u7F51\u7EDC")],-1),cu=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# openstack network list")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"+--------------------------------------+--------+--------------------------------------+")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"| ID                                   | Name   | Subnets                              |")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"+--------------------------------------+--------+--------------------------------------+")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"| 557a00fa-f61d-4244-b350-29ffe0a03125 | public | c003b4b5-23d1-4211-ad2d-a62ec07d8853 |")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"+--------------------------------------+--------+--------------------------------------+")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),iu=s("ul",null,[s("li",null,"\u67E5\u770B\u53EF\u7528\u7684\u5B89\u5168\u7EC4")],-1),ru=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# openstack security group list")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"+--------------------------------------+---------+------------------------+----------------------------------+")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"| ID                                   | Name    | Description            | Project                          |")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"+--------------------------------------+---------+------------------------+----------------------------------+")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"| 74d74309-0660-4eb9-abba-e89fb6fd23ae | default | Default security group | aec911c3ae68464ba989213e5f6060b1 |")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),pu=s("ol",null,[s("li",null,"\u521B\u5EFA\u865A\u62DF\u673A")],-1),du=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# openstack server create --flavor m1.nano --image cirros \\")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"--nic net-id=5c4d0706-24cd-4d42-ba78-36a05b6c81c8 --security-group default \\")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"--key-name mykey demo-instance")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Au=s("h1",{id:"\u6CE8\u610F\u6307\u5B9A\u7F51\u7EDC\u7684\u65F6\u5019\u9700\u8981\u4F7F\u7528id\uFF0C\u800C\u4E0D\u662F\u540D\u79F0\u3002",tabindex:"-1"},[n("\u6CE8\u610F\u6307\u5B9A\u7F51\u7EDC\u7684\u65F6\u5019\u9700\u8981\u4F7F\u7528ID\uFF0C\u800C\u4E0D\u662F\u540D\u79F0\u3002 "),s("a",{class:"header-anchor",href:"#\u6CE8\u610F\u6307\u5B9A\u7F51\u7EDC\u7684\u65F6\u5019\u9700\u8981\u4F7F\u7528id\uFF0C\u800C\u4E0D\u662F\u540D\u79F0\u3002","aria-hidden":"true"},"#")],-1),Cu=s("h3",{id:"\u6D4B\u8BD5\u4E91\u4E3B\u673A",tabindex:"-1"},[n("\u6D4B\u8BD5\u4E91\u4E3B\u673A "),s("a",{class:"header-anchor",href:"#\u6D4B\u8BD5\u4E91\u4E3B\u673A","aria-hidden":"true"},"#")],-1),uu=s("ol",null,[s("li",null,"\u67E5\u770B\u4E91\u4E3B\u673A\u72B6\u6001")],-1),yu=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# openstack server list")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"+--------------------------------------+-----------------+--------+------------+-------------+-----------------------+")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"| ID                                   | Name            | Status | Task State | Power State | Networks              |")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"+--------------------------------------+-----------------+--------+------------+-------------+-----------------------+")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"| 7f94df9a-e547-4f56-9887-bbc52c4e0fff | public-instance | ACTIVE | -          | Running     | public=192.168.56.101 |")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"+--------------------------------------+-----------------+--------+------------+-------------+-----------------------+")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),hu=s("ol",null,[s("li",null,"\u6D4B\u8BD5\u865A\u62DF\u673A\u8FDE\u63A5")],-1),_u=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# ping -c 2 192.168.56.101")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"PING 192.168.56.101 (192.168.56.101) 56(84) bytes of data.")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"64 bytes from 192.168.56.101: icmp_seq=1 ttl=64 time=5.90 ms")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"64 bytes from 192.168.56.101: icmp_seq=2 ttl=64 time=0.484 ms")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u8FDE\u63A5\u865A\u62DF\u673A")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# ssh cirros@192.168.56.101")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"The authenticity of host '192.168.56.101 (192.168.56.101)' can't be established.")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"RSA key fingerprint is 29:4d:76:17:05:1a:4e:e6:f9:81:a5:1d:8c:27:ff:2c.")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Are you sure you want to continue connecting (yes/no)? yes")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Warning: Permanently added '192.168.56.101' (RSA) to the list of known hosts.")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"$ ifconfig eth0")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"eth0      Link encap:Ethernet  HWaddr FA:16:3E:E8:B9:C1  ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"          inet addr:192.168.56.101  Bcast:192.168.56.255  Mask:255.255.255.0")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"          inet6 addr: fe80::f816:3eff:fee8:b9c1/64 Scope:Link")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"          RX packets:150 errors:0 dropped:0 overruns:0 frame:0")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"          TX packets:162 errors:0 dropped:0 overruns:0 carrier:0")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"          collisions:0 txqueuelen:1000 ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"          RX bytes:18634 (18.1 KiB)  TX bytes:17264 (16.8 KiB)")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Du=s("p",null,"\u5982\u679C\u65E0\u6CD5ping\u901A\u865A\u62DF\u673A\uFF0C\u8FD8\u53EF\u4EE5\u767B\u9646\u865A\u62DF\u673AWeb\u9875\u9762\u67E5\u770B\uFF0C\u662F\u5426\u542F\u52A8",-1),gu=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# openstack console url show demo-instance")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"+-------+------------------------------------------------------------------------------------+")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"| Type  | Url                                                                                |")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"+-------+------------------------------------------------------------------------------------+")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"| novnc | http://192.168.56.11:6080/vnc_auto.html?token=e97cffb8-cf0c-4c22-8dbc-fa88ff61f453 |")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"+-------+------------------------------------------------------------------------------------+")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),mu=s("p",null,"\u606D\u559C\uFF01\u4F60\u6210\u529F\u7684\u4F7F\u7528OpenStack\u521B\u5EFA\u4E86\u7B2C\u4E00\u53F0\u865A\u62DF\u673A\uFF0C\u53EF\u80FD\u8FD9\u4E00\u8DEF\u8D70\u6765\u6709\u70B9\u574E\u5777\uFF0C\u4F46\u662F\u4F60\u6210\u529F\u4E86\u3002\u4E0D\u8FC7\u8FD9\u53EA\u662F\u4F60\u5728OpenStack\u4E16\u754C\u91CC\u5B8C\u6210\u7684\u7B2C\u4E00\u6B65\uFF01",-1),bu=s("h1",{id:"openstack-dashboard",tabindex:"-1"},[n("OpenStack Dashboard "),s("a",{class:"header-anchor",href:"#openstack-dashboard","aria-hidden":"true"},"#")],-1),ku=s("p",null,"\u76EE\u524D\u6211\u4EEC\u5DF2\u7ECF\u8BB2\u89E3\u5E76\u5B89\u88C5\u4E86OpenStack\u7684Keystone\u3001Glance\u3001Nova\u3001Neutron\u3002\u800C\u4E14\u6211\u4EEC\u5DF2\u7ECF\u4F7F\u7528\u547D\u4EE4\u6210\u529F\u7684\u521B\u5EFA\u4E86\u4E00\u53F0\u865A\u62DF\u673A\uFF0C\u5E76\u4E14\u53EF\u4EE5\u8FDB\u884C\u8FDE\u63A5\u548C\u8BBF\u95EE\u3002\u6211\u76F8\u4FE1\u5927\u5BB6\u5DF2\u7ECF\u8FEB\u4E0D\u53CA\u5F85\u7684\u60F3\u770B\u5230OpenStack\u7684DashBoard\u4E86\u3002 \u90A3\u4E48OpenStack\u7684\u6709\u4E09\u79CD\u7BA1\u7406\u65B9\u6CD5Horizon\u3001CLI\u548CAPI\u3002\u672C\u5C0F\u8282\uFF0C\u6211\u4EEC\u5C31\u6765\u90E8\u7F72Horizon\u3002 Horizon\u662FOpenStack\u7684Dashboard\uFF0C\u662F\u4E00\u4E2A\u53EF\u4EE5\u8BA9\u4E91\u7BA1\u7406\u5458\u548C\u7528\u6237\u7BA1\u7406OpenStack\u5404\u79CD\u8D44\u6E90\u548C\u670D\u52A1\u7684web\u63A5\u53E3\u3002Horizon\u901A\u8FC7OpenStack API\u548C\u5404\u4E2A\u7EC4\u4EF6\u8FDB\u884C\u4EA4\u4E92\u3002 Dashboard\u4F1A\u6839\u636EKeystone\u4E2D\u6CE8\u518C\u7684Service\u53BB\u663E\u793A\u76F8\u5E94\u7684\u529F\u80FD\u3002\u6240\u4EE5\u5982\u679C\u4F60\u6CA1\u6709\u5B89\u88C5\u76F8\u5E94\u7684\u670D\u52A1\uFF0C\u5374\u518DKeystone\u4E2D\u505A\u4E86\u6CE8\u518C\uFF0C\u767B\u9646Dashboard\u662F\u4F1A\u62A5\u9519\u7684\u3002",-1),vu=s("h3",{id:"horizon\u90E8\u7F72",tabindex:"-1"},[n("Horizon\u90E8\u7F72 "),s("a",{class:"header-anchor",href:"#horizon\u90E8\u7F72","aria-hidden":"true"},"#")],-1),xu=s("blockquote",null,[s("p",null,"\u9700\u8981\u5C06Keystone\u548CHoarizon\u5206\u5F00\u90E8\u7F72\uFF0C\u5F7C\u6B64\u4E4B\u95F4\u6709\u51B2\u7A81\u3002\u90E8\u7F72\u5230linux-node2\u8282\u70B9\u4E0A\u3002")],-1),fu=s("ol",null,[s("li",null,"\u5B89\u88C5Horizon")],-1),Su=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node2 ~]# yum install -y openstack-dashboard")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Eu=s("ol",null,[s("li",null,"Horizon\u914D\u7F6E")],-1),Pu=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node2 ~]# vim /etc/openstack-dashboard/local_settings")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#\u5141\u8BB8\u6240\u6709\u4E3B\u673A\u8BBF\u95EE")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"ALLOWED_HOSTS = ['*', ]")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#\u8BBE\u7F6EKeystone\u5730\u5740")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'OPENSTACK_HOST = "192.168.56.11"')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'OPENSTACK_KEYSTONE_URL = "http://%s:5000/v3" % OPENSTACK_HOST')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#\u8BBE\u7F6EAPI\u7248\u672C\uFF0C\u9700\u8981\u65B0\u589E")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"OPENSTACK_API_VERSIONS = {")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'    "identity": 3,')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'    "volume": 2,')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'    "compute": 2,')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"}")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#\u4E3A\u901A\u8FC7\u4EEA\u8868\u76D8\u521B\u5EFA\u7684\u7528\u6237\u914D\u7F6E\u9ED8\u8BA4\u7684 user \u89D2\u8272")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'OPENSTACK_KEYSTONE_DEFAULT_ROLE = "user"')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u5F00\u542F\u591A\u57DF\u652F\u6301")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"OPENSTACK_KEYSTONE_MULTIDOMAIN_SUPPORT = True")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u8BBE\u7F6E\u9ED8\u8BA4\u7684\u57DF")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"OPENSTACK_KEYSTONE_DEFAULT_DOMAIN = 'Default'")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#\u8BBE\u7F6ESession\u5B58\u50A8\u5230Memcached")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"SESSION_ENGINE = 'django.contrib.sessions.backends.cache'")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"CACHES = {")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    'default': {")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        'BACKEND': 'django.core.cache.backends.memcached.MemcachedCache',")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        'LOCATION': '192.168.56.11:11211',")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    }")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"}")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#\u542F\u7528Web\u754C\u9762\u4E0A\u4FEE\u6539\u5BC6\u7801")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"OPENSTACK_HYPERVISOR_FEATURES = {")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    'can_set_mount_point': True,")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    'can_set_password': True,")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    'requires_keypair': False,")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"}")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#\u8BBE\u7F6E\u65F6\u533A")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'TIME_ZONE = "Asia/Shanghai"')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#\u7981\u7528\u81EA\u670D\u52A1\u7F51\u7EDC\u7684\u4E00\u4E9B\u9AD8\u7EA7\u7279\u6027")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"OPENSTACK_NEUTRON_NETWORK = {")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    ...")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    'enable_router': False,")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    'enable_quotas': False,")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    'enable_distributed_router': False,")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    'enable_ha_router': False,")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    'enable_lb': False,")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    'enable_firewall': False,")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    'enable_vpn': False,")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    'enable_fip_topology_check': False,")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"}")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Nu=s("ol",null,[s("li",null,"\u91CD\u65B0\u751F\u4EA7Horizon\u914D\u7F6E\u6587\u4EF6")],-1),Ru=s("p",null,"\u5982\u679C\u6839\u636E\u5B98\u65B9\u6587\u6863\uFF0C\u548C\u9ED8\u8BA4\u5B89\u88C5\u7684\u914D\u7F6E\uFF0C\u8BBF\u95EE/dashboard\u540E\u8DF3\u8F6C\u5230/auth/login\u5E76\u4E14\u4F1A\u63D0\u793A404 Not Found\uFF0C\u9700\u8981\u91CD\u65B0\u751F\u6210\u914D\u7F6E\u6587\u4EF6",-1),Tu=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node2 ~]# cd /usr/share/openstack-dashboard")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node2 ~]# python manage.py make_web_conf --apache > /etc/httpd/conf.d/openstack-dashboard.conf")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Iu=s("ol",null,[s("li",null,"\u542F\u52A8\u670D\u52A1")],-1),Ou=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node2 ~]# systemctl enable httpd.service")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node2 ~]# systemctl restart httpd.service")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Mu=s("p",null,[n("\u597D\u7684\uFF0C\u73B0\u5728\u4F60\u5C31\u53EF\u4EE5\u4F7F\u7528"),s("a",{href:"http://192.168.56.11/%E6%9D%A5%E8%AE%BF%E9%97%AE%E4%BB%AA%E8%A1%A8%E7%9B%98%E4%BA%86%E3%80%82%E7%94%A8%E6%88%B7%E5%90%8D%E5%92%8C%E5%AF%86%E7%A0%81%E5%8F%AF%E4%BB%A5%E4%BD%BF%E7%94%A8admin%E6%88%96%E8%80%85demo%E3%80%82%E9%9C%80%E8%A6%81%E4%BD%A0%E4%BA%B2%E8%87%AA%E6%9D%A5%E4%BD%93%E9%AA%8C%E4%BB%96%E4%BB%AC%E5%88%B0%E5%BA%95%E6%9C%89%E4%BB%80%E4%B9%88%E4%B8%8D%E5%90%8C%E3%80%82",target:"_blank",rel:"noreferrer"},"http://192.168.56.11/\u6765\u8BBF\u95EE\u4EEA\u8868\u76D8\u4E86\u3002\u7528\u6237\u540D\u548C\u5BC6\u7801\u53EF\u4EE5\u4F7F\u7528admin\u6216\u8005demo\u3002\u9700\u8981\u4F60\u4EB2\u81EA\u6765\u4F53\u9A8C\u4ED6\u4EEC\u5230\u5E95\u6709\u4EC0\u4E48\u4E0D\u540C\u3002")],-1),wu=s("h3",{id:"horizon\u7684session\u5B58\u50A8",tabindex:"-1"},[n("Horizon\u7684Session\u5B58\u50A8 "),s("a",{class:"header-anchor",href:"#horizon\u7684session\u5B58\u50A8","aria-hidden":"true"},"#")],-1),Ku=s("p",null,"\u6211\u4EEC\u7ECF\u5E38\u5728\u8D1F\u8F7D\u5747\u8861\u7684\u73AF\u5883\u4E0B\uFF0C\u4F1A\u9047\u5230Session\u7684\u95EE\u9898\uFF0C\u4E00\u822C\u7684\u89E3\u51B3\u529E\u6CD5\u6709\u4E09\u79CD\uFF1A",-1),Lu=s("ul",null,[s("li",null,"Session\u4FDD\u6301"),s("li",null,"Session\u590D\u5236"),s("li",null,"Session\u5171\u4EAB")],-1),Uu=s("p",null,"Horizon\u4F5C\u4E3A\u4E00\u4E2A\u5178\u578B\u7684Django\u5E94\u7528\uFF0C\u662F\u4F7F\u7528 Django session\u67B6\u6784\u6765\u5904\u7406\u7528\u6237\u7684session\u6570\u636E\uFF0C\u76EE\u524Dsession\u652F\u6301\u4EE5\u4E0B\u51E0\u79CD\u5B58\u50A8\u65B9\u5F0F\uFF1A",-1),ju=s("ul",null,[s("li",null,"\u672C\u5730\u5185\u5B58\u7F13\u5B58"),s("li",null,"\u952E\u503C\u5BF9\u5B58\u50A8\uFF08Memcached\u6216\u8005Redis\uFF09"),s("li",null,"\u6570\u636E\u5E93\u5B58\u50A8"),s("li",null,"cookies")],-1),Gu=s("p",null,"\u901A\u8FC7\u4FEE\u6539 local_settings \u6587\u4EF6\u7684 SESSION_ENGINE \u7684\u914D\u7F6E\u503C\u6765\u81EA\u5B9A\u5236session\u540E\u7AEF",-1),Hu=s("p",null,[s("strong",null,"\u672C\u5730\u5185\u5B58\u7F13\u5B58")],-1),Fu=s("p",null,"\u672C\u5730\u5185\u5B58\u7F13\u5B58\u662F\u6700\u5FEB\u901F\u548C\u6700\u7B80\u5355\u7684session\u540E\u7AEF\u914D\u7F6E\u65B9\u6CD5\uFF0C\u56E0\u4E3A\u4ED6\u4E0D\u9700\u8981\u5904\u7406\u4EFB\u4F55\u7684\u4F9D\u8D56\u5173\u7CFB\u3002\u5C3D\u7BA1\u5982\u6B64\uFF0C\u4ED6\u4E5F\u62E5\u6709\u4EE5\u4E0B\u660E\u663E\u7684\u7F3A\u70B9\uFF1A",-1),Vu=s("ul",null,[s("li",null,[s("p",null,"\u5B58\u50A8\u4E3A\u975E\u5171\u4EAB\u7684\uFF0C\u4E0D\u80FD\u8DE8\u8FDB\u7A0B")]),s("li",null,[s("p",null,"\u8FDB\u7A0B\u7EC8\u6B62\u540E\u6CA1\u6709\u6301\u7EED\u6027\u3002 \u5355\u4E00\u7684Horizon\u5B89\u88C5\u7684\u9ED8\u8BA4\u4E3A\u672C\u5730\u5185\u5B58\u540E\u7AEF\uFF0C\u56E0\u4E3A\u4ED6\u6CA1\u6709\u4F9D\u8D56\u6027\u95EE\u9898\u3002\u751F\u4EA7\u73AF\u5883\u662F\u4E0D\u63A8\u8350\u4F7F\u7528\u8FD9\u4E2A\u540E\u7AEF\u7684\uFF0C\u751A\u81F3\u5728\u4E25\u8083\u7684\u5F00\u53D1\u5DE5\u4F5C\u4E2D\u4E5F\u4E0D\u63A8\u8350\u3002\u4F60\u4ECD\u65E7\u53EF\u4EE5\u8FD9\u6837\u542F\u7528\uFF1A"),s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"SESSION_ENGINE = 'django.contrib.sessions.backends.cache'")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"CACHES = {")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  'BACKEND': 'django.core.cache.backends.locmem.LocMemCache'")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"}")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])])])],-1),Bu=s("p",null,[s("strong",null,"\u952E\u503C\u5BF9\u5B58\u50A8")],-1),qu=s("p",null,"\u4F60\u53EF\u4EE5\u4F7F\u7528Memcached \u6216 Redis \u7B49\u5E94\u7528\u7A0B\u5E8F\u4F5C\u4E3Asession\u7684\u5916\u90E8\u7F13\u5B58\u673A\u5236\u3002\u8FD9\u4E9B\u5E94\u7528\u7A0B\u5E8F\u4E3Asession\u63D0\u4F9B\u4E86\u6301\u4E45\u5E76\u53EF\u4EE5\u5171\u4EAB\u7684\u5B58\u50A8\uFF0C\u8FD9\u5728\u5C0F\u89C4\u6A21\u6216\u5F00\u53D1\u73AF\u5883\u4E2D\u7684\u90E8\u7F72\u4E2D\u5341\u5206\u6709\u7528\u3002",-1),Yu=s("ol",null,[s("li",null,"Memcached")],-1),zu=s("p",null,"Memcached \u662F\u4E00\u4E2A\u9AD8\u6027\u80FD\u548C\u5206\u5E03\u5F0F\u7684\u5185\u5B58\u5BF9\u8C61\u7F13\u5B58\u7CFB\u7EDF\uFF0C\u4E3A\u5C0F\u5757\u7684\u4EFB\u610F\u6570\u636E\u63D0\u4F9B\u8FDB\u9A7B\u5185\u5B58\u7684\u952E\u503C\u5BF9\u7684\u5B58\u50A8\u3002 \u9700\u6C42\uFF1A Memcached\u670D\u52A1\u8FD0\u884C\u5E76\u53EF\u4EE5\u8BBF\u95EE\u3002 \u5B89\u88C5\u4E86python-memcached \u7684 Python \u6A21\u5757 \u901A\u8FC7\u4E0B\u9762\u7684\u65B9\u6CD5\u542F\u7528\uFF1A",-1),$u=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"SESSION_ENGINE = 'django.contrib.sessions.backends.cache'")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"CACHES = {")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    'BACKEND': 'django.core.cache.backends.memcached.MemcachedCache'")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    'LOCATION': 'my_memcached_host:11211',")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"}")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Xu=s("ol",null,[s("li",null,"Redis")],-1),Ju=s("p",null,"Redis\u662F\u4E00\u4E2A\u5F00\u6E90\u7684\uFF0CBSD\u8BB8\u53EF\u7684\uFF0C\u9AD8\u7EA7\u952E\u503C\u5BF9\u5B58\u50A8\u3002\u4ED6\u901A\u5E38\u88AB\u79F0\u4E3A\u6570\u636E\u7ED3\u6784\u670D\u52A1\u5668\u3002 \u9700\u6C42\uFF1A Redis\u670D\u52A1\u8FD0\u884C\u5E76\u53EF\u4EE5\u8BBF\u95EE \u5B89\u88C5\u4E86 redis \u4EE5\u53CA django-redis \u7684python\u6A21\u5757 \u901A\u8FC7\u4EE5\u4E0B\u914D\u7F6E\u65B9\u6CD5\u542F\u7528\uFF1A",-1),Wu=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"SESSION_ENGINE = 'django.contrib.sessions.backends.cache'")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"CACHES = {")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'    "default": {')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'        "BACKEND": "redis_cache.cache.RedisCache",')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'        "LOCATION": "127.0.0.1:6379:1",')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'        "OPTIONS": {')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'            "CLIENT_CLASS": "redis_cache.client.DefaultClient",')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        }")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    }")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"}")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Qu=s("h1",{id:"\u7B2C\u4E09\u90E8\u5206-openstack\u8FDB\u9636\u6307\u5357",tabindex:"-1"},[n("\u7B2C\u4E09\u90E8\u5206 OpenStack\u8FDB\u9636\u6307\u5357 "),s("a",{class:"header-anchor",href:"#\u7B2C\u4E09\u90E8\u5206-openstack\u8FDB\u9636\u6307\u5357","aria-hidden":"true"},"#")],-1),Zu=s("p",null,"\u8054\u7CFB\u4F5C\u8005----------------------------------------------------------------------",-1),s1=s("h1",{id:"\u7B2C\u56DB\u90E8\u5206-docker\u548Ckubernetes\u57FA\u7840",tabindex:"-1"},[n("\u7B2C\u56DB\u90E8\u5206 Docker\u548CKubernetes\u57FA\u7840 "),s("a",{class:"header-anchor",href:"#\u7B2C\u56DB\u90E8\u5206-docker\u548Ckubernetes\u57FA\u7840","aria-hidden":"true"},"#")],-1),n1=s("p",null,"1.docker\u57FA\u7840\u5165\u95E8",-1),l1=s("p",null,"\u5728\u5168\u94FE\u8DEF\u81EA\u52A8\u5316\u8FD0\u7EF4\u4F53\u7CFB\u4E2D\uFF0C\u6211\u4EEC\u5DF2\u7ECF\u53EF\u4EE5\u5B8C\u6210\u81EA\u52A8\u5316\u7CFB\u7EDF\u5B89\u88C5\u3001\u81EA\u52A8\u5316\u76D1\u63A7\u3001\u914D\u7F6E\u7BA1\u7406\u3001\u4EE3\u7801\u90E8\u7F72\u3002\u901A\u8FC7SaltStack\u7684\u914D\u7F6E\u7BA1\u7406\u53EF\u4EE5\u4FDD\u8BC1\u5F00\u53D1\u3001\u6D4B\u8BD5\u3001\u751F\u4EA7\u7684\u73AF\u5883\u4E00\u81F4\u6027\uFF1B\u81EA\u52A8\u5316\u4EE3\u7801\u90E8\u7F72\u53EF\u4EE5\u5B9E\u73B0\u4E00\u952E\u90E8\u7F72\u3001\u79D2\u7EA7\u56DE\u6EDA\uFF1B\u4F46\u662F\uFF0C\u4F60\u6709\u6CA1\u6709\u8003\u8651\u8FC7\uFF0CSaltStack\u914D\u7F6E\u7684\u73AF\u5883\u662F\u5F88\u96BE\u56DE\u6EDA\u7684\uFF0C\u5C31\u50CF\u4F60\u5B89\u88C5\u4E86\u4E00\u4E2A\u8F6F\u4EF6\u5305\u66F4\u65B0\u4E86\u5176\u5B83\u7684\u8F6F\u4EF6\u5305\u3002\u60F3\u56DE\u6EDA\u5230\u4F60\u5B89\u88C5\u8F6F\u4EF6\u4E4B\u524D\u7684\u72B6\u6001\uFF0C\u8FD9\u4E2A\u53EF\u80FD\u6709\u70B9\u96BE\u3002\u518D\u6216\u8005\u4F60\u7684\u4EE3\u7801\u548C\u73AF\u5883\u9700\u8981\u4E00\u8D77\u56DE\u6EDA\uFF01",-1),e1=s("p",null,[s("img",{src:"http://k8s.unixhot.com/docker/media/6b19e69aac9d176124a719ad038e3bb2.png",alt:"img"})],-1),o1=s("p",null,"\u90A3\u4E48\u8BA9\u6211\u4EEC\u9A6C\u4E0A\u8FDB\u5165\u5BB9\u5668\u7684\u4E16\u754C\uFF0C\u867D\u7136\u5BB9\u5668\u4E0D\u4EC5\u4EC5\u662F\u89E3\u51B3\u8FD9\u4E9B\u95EE\u9898\uFF0C\u4F46\u662F\u81F3\u5C11\u6211\u4EEC\u9047\u5230\u4E86\u8FD0\u7EF4\u75DB\u70B9\uFF1F\u5F15\u5165\u4E00\u4E2A\u65B0\u7684\u89E3\u51B3\u65B9\u6848\u4E00\u5B9A\u662F\u4E3A\u4E86\u89E3\u51B3\u75DB\u70B9\u3002\u4F5C\u4E3A\u8FD0\u7EF4\uFF0C\u6211\u4EEC\u4E0D\u80FD\u5C40\u9650\u4E8E\u773C\u524D\u7684\u82DF\u4E14\uFF0C\u4E00\u5B9A\u8981\u9AD8\u77BB\u8FDC\u77A9\uFF0C\u53CA\u65F6\u7684\u8DDF\u4E0A\u6F6E\u6D41\u3002\u4F46\u662F\u5BF9\u4E8E\u751F\u4EA7\u73AF\u5883\uFF0C\u6211\u4EEC\u5FC5\u987B\u8981\u614E\u91CD\u7684\u5BF9\u5F85\u3002",-1),a1=s("h2",{id:"docker\u4ECB\u7ECD",tabindex:"-1"},[n("Docker\u4ECB\u7ECD "),s("a",{class:"header-anchor",href:"#docker\u4ECB\u7ECD","aria-hidden":"true"},"#")],-1),t1=s("p",null,"Docker\u662FDocker.Inc\u516C\u53F8\u5F00\u6E90\u7684\u4E00\u4E2A\u57FA\u4E8ELXC\u6280\u672F\u4E4B\u4E0A\u6784\u5EFA\u7684Container\u5BB9\u5668\u5F15\u64CE\uFF0C\u6E90\u4EE3\u7801\u6258\u7BA1\u5728GitHub\u4E0A,\u57FA\u4E8EGo\u8BED\u8A00\u5E76\u9075\u4ECEApache2.0\u534F\u8BAE\u5F00\u6E90\u3002",-1),c1=s("p",null,"Docker\u662F\u901A\u8FC7\u5185\u6838\u865A\u62DF\u5316\u6280\u672F\uFF08namespaces\u53CAcgroups\u7B49\uFF09\u6765\u63D0\u4F9B\u5BB9\u5668\u7684\u8D44\u6E90\u9694\u79BB\u4E0E\u5B89\u5168\u4FDD\u969C\u7B49\u3002\u7531\u4E8EDocker\u5728\u64CD\u4F5C\u7CFB\u7EDF\u5C42\u5B9E\u73B0\u9694\u79BB\uFF0C\u6240\u4EE5Docker\u5BB9\u5668\u5728\u8FD0\u884C\u65F6\uFF0C\u4E0D\u9700\u8981\u7C7B\u4F3C\u865A\u62DF\u673A\uFF08VM\uFF09\u989D\u5916\u7684\u64CD\u4F5C\u7CFB\u7EDF\u5F00\u9500\uFF0C\u63D0\u9AD8\u8D44\u6E90\u5229\u7528\u7387\u3002",-1),i1=s("p",null,[s("strong",null,"Docker\u8FD0\u884C\u7ED3\u6784")],-1),r1=s("p",null,[s("img",{src:"http://k8s.unixhot.com/docker/media/3185f40a56d6a22b714b444d515be3f0.png",alt:"\u8BF4\u660E: Docker Engine Components Flow"})],-1),p1=s("p",null,"Docker\u662F\u4E00\u4E2AC/S\u7ED3\u6784\u7684\u9879\u76EE\uFF0C\u6709Docker Client\u3001RESTAPI\u3001Docker Server\u7EC4\u6210\u3002",-1),d1=s("ul",null,[s("li",null,"Docker Client\uFF1ADocker\u5BA2\u6237\u7AEF\u547D\u4EE4\u5DE5\u5177\u3002"),s("li",null,"REST API\uFF1A\u63D0\u4F9B\u6807\u51C6\u7684RESTful\u63A5\u53E3\u3002"),s("li",null,"Docker Server:\uFF1ADocker daemon\u7684\u4E3B\u8981\u7EC4\u6210\u90E8\u5206\uFF0C\u63A5\u6536\u7528\u6237\u4ECEDocker Client\u8C03\u7528REST API\u53D1\u9001\u8FC7\u6765\u7684\u8BF7\u6C42\u3002")],-1),A1=s("p",null,[s("strong",null,"Docker \u5305\u62EC\u4E09\u4E2A\u57FA\u672C\u6982\u5FF5\uFF1A")],-1),C1=s("ul",null,[s("li",null,"\u955C\u50CF\uFF08Image\uFF09"),s("li",null,"\u5BB9\u5668\uFF08Container\uFF09"),s("li",null,"\u4ED3\u5E93\uFF08Repository\uFF09")],-1),u1=s("p",null,[s("strong",null,"Docker\u955C\u50CF")],-1),y1=s("p",null,"Docker \u955C\u50CF\u5C31\u662F\u4E00\u4E2A\u53EA\u8BFB\u7684\u6A21\u677F\u3002\u4F60\u53EF\u4EE5\u62FFKVM\u865A\u62DF\u673A\u955C\u50CF\u6765\u5BF9\u6BD4\u7406\u89E3\u3002",-1),h1=s("p",null,"\u4F8B\u5982\uFF1A\u4E00\u4E2A\u955C\u50CF\u53EF\u4EE5\u5305\u542B\u4E00\u4E2A\u5B8C\u6574\u7684CentOS\u64CD\u4F5C\u7CFB\u7EDF\u8FD0\u884C\uFF08\u6CE8\u610F\u4E0D\u5305\u542B\u5185\u6838\uFF09\uFF0C\u91CC\u9762\u4EC5\u5B89\u88C5\u4E86Nginx\u6216\u7528\u6237\u9700\u8981\u7684\u5176\u5B83\u5E94\u7528\u7A0B\u5E8F\u3002",-1),_1=s("p",null,"\u955C\u50CF\u53EF\u4EE5\u7528\u6765\u521B\u5EFADocker\u5BB9\u5668\u3002\u5C31\u50CF\u4F60\u4F7F\u7528\u521B\u5EFA\u597D\u7684\u955C\u50CF\u76F4\u63A5\u542F\u52A8\u4E00\u4E2A\u865A\u62DF\u673A\u4E00\u6837\u3002",-1),D1=s("p",null,"Docker \u63D0\u4F9B\u4E86\u4E00\u4E2A\u5F88\u7B80\u5355\u7684\u673A\u5236\u6765\u521B\u5EFA\u955C\u50CF\u6216\u8005\u66F4\u65B0\u73B0\u6709\u7684\u955C\u50CF\uFF0C\u7528\u6237\u751A\u81F3\u53EF\u4EE5\u76F4\u63A5\u4ECE\u5176\u4ED6\u4EBA\u90A3\u91CC\u4E0B\u8F7D\u4E00\u4E2A\u5DF2\u7ECF\u505A\u597D\u7684\u955C\u50CF\u6765\u76F4\u63A5\u4F7F\u7528\u3002",-1),g1=s("p",null,[s("strong",null,"\u5C0F\u63D0\u793A\uFF1A\u4E3A\u4EC0\u4E48\u5728CentOS\u7684\u5BBF\u4E3B\u673A\u4E0A\u53EF\u4EE5\u8FD0\u884C\u4E00\u4E2AUbuntu\u7684Docker\u5BB9\u5668\uFF1F\u56E0\u4E3ADocker\u955C\u50CF\u91CC\u9762\u53EA\u662F\u5305\u542B\u4E86\u5BB9\u5668\u8FD0\u884C\u65F6\u7684\u6587\u4EF6\u3001\u5E93\u6587\u4EF6\u7B49\uFF0C\u5E76\u4E0D\u5305\u542BKernel\uFF0C\u7EDF\u4E00\u4F7F\u7528\u5BBF\u4E3B\u673A\u7684Linux\u5185\u6838\u3002")],-1),m1=s("p",null,[s("strong",null,"Docker\u5BB9\u5668")],-1),b1=s("p",null,"Docker\u5229\u7528\u5BB9\u5668\u6765\u8FD0\u884C\u5E94\u7528\uFF0C\u5C31\u50CF\u4F60\u8FD0\u884C\u4E00\u4E2AKVM\u865A\u62DF\u673A\u4E00\u6837\u3002\u5BB9\u5668\u5C31\u662F\u4ECE\u955C\u50CF\u521B\u5EFA\u7684\u8FD0\u884C\u5B9E\u4F8B\uFF0C\u5C31\u50CF\u6211\u4EEC\u4E0A\u9762\u63D0\u5230\u4E86\u865A\u62DF\u673A\u5B9E\u4F8B\u4E00\u6837\u3002\u5B83\u53EF\u4EE5\u88AB\u542F\u52A8\u3001\u5F00\u59CB\u3001\u505C\u6B62\u3001\u5220\u9664\u3002\u6BCF\u4E2A\u5BB9\u5668\u90FD\u662F\u76F8\u4E92\u72EC\u7ACB\u7684\u3001\u9694\u79BB\u7684\u4E2A\u4F53\u3002\u4F46\u5176\u5B9E\u6CA1\u6709\u865A\u62DF\u673A\u9694\u79BB\u7684\u90A3\u4E48\u5F7B\u5E95\uFF0C\u8FD9\u4E2A\u6211\u4EEC\u540E\u9762\u518D\u8BF4\u3002",-1),k1=s("p",null,"\u4F60\u53EF\u4EE5\u628A\u5BB9\u5668\u770B\u505A\u662F\u4E00\u4E2A\u7B80\u6613\u7248\u7684Linux \u73AF\u5883\uFF08\u5305\u62ECroot\u7528\u6237\u6743\u9650\u3001\u8FDB\u7A0B\u7A7A\u95F4\u3001\u7528\u6237\u7A7A\u95F4\u548C\u7F51\u7EDC\u7A7A\u95F4\u7B49\uFF09\u548C\u8FD0\u884C\u5728\u5176\u4E2D\u7684\u5E94\u7528\u7A0B\u5E8F\u3002",-1),v1=s("p",null,[s("strong",null,"Docker\u4ED3\u5E93")],-1),x1=s("p",null,"Docker\u4ED3\u5E93\u662F\u96C6\u4E2D\u5B58\u653E\u955C\u50CF\u6587\u4EF6\u7684\u573A\u6240\u3002\u5C31\u50CFOpenStack\u7684Glance\u670D\u52A1\uFF0C\u4ED3\u5E93\u5206\u4E3A\u516C\u5F00\u4ED3\u5E93\uFF08Public\uFF09\u548C\u79C1\u6709\u4ED3\u5E93\uFF08Private\uFF09\u4E24\u79CD\u5F62\u5F0F\u3002\u8FD9\u4E2A\u6709\u70B9\u50CFGit\u4EE3\u7801\u6258\u7BA1\uFF0C\u4F60\u53EF\u4EE5\u628A\u4EE3\u7801\u653E\u5728GitHub\u4E0A\u5E76\u516C\u5F00\uFF0C\u4E5F\u53EF\u662F\u4F7F\u7528Gitlab\u521B\u5EFA\u4E00\u4E2A\u79C1\u6709\u7684\u4EE3\u7801\u6258\u7BA1\u5E73\u53F0\u3002",-1),f1=s("p",null,"Docker\u6700\u5927\u7684\u516C\u5F00\u4ED3\u5E93\u662FDocker Hub\uFF0C\u5B58\u653E\u4E86\u6570\u91CF\u5E9E\u5927\u7684\u955C\u50CF\u4F9B\u7528\u6237\u4E0B\u8F7D\uFF0C\u540E\u9762\u4F60\u4E5F\u53EF\u4EE5\u521B\u5EFA\u81EA\u5DF1\u7684\u955C\u50CF\u5206\u4EAB\u5230Docker Hub\u4E2D\u3002",-1),S1=s("p",null,"\u540C\u65F6\u4F60\u53EF\u4EE5\u521B\u5EFA\u81EA\u5DF1\u7684\u955C\u50CF\u6258\u7BA1\u5E73\u53F0\uFF0CDocker\u6709\u4E00\u4E2A\u53EB\u505ARegistry\u7684\u7EC4\u4EF6\uFF0C\u4F7F\u7528Docker Registry\u53EF\u4EE5\u542F\u52A8\u4E00\u4E2A\u79C1\u6709\u7684\u955C\u50CF\u6258\u7BA1\u5E73\u53F0\uFF0C\u8FD9\u4E2A\u5E73\u53F0\u53EF\u4EE5\u5B58\u653E\u591A\u4E2A\u4ED3\u5E93\uFF0C\u6BCF\u4E2A\u4ED3\u5E93\u4E2D\u53C8\u5305\u542B\u4E86\u591A\u4E2A\u955C\u50CF\uFF0C\u6BCF\u4E2A\u955C\u50CF\u6709\u4E0D\u540C\u7684\u6807\u7B7E\uFF08tag\uFF09\u3002",-1),E1=s("p",null,"\u6709\u65F6\u5019\u6211\u4EEC\u4F1A\u628A\u4ED3\u5E93\u548C\u4ED3\u5E93\u6CE8\u518C\u670D\u52A1\u5668\uFF08Registry\uFF09\u6DF7\u4E3A\u4E00\u8C08\uFF0C\u5E76\u4E0D\u4E25\u683C\u533A\u5206\uFF0C\u5B9E\u9645\u4E0A\u4E0D\u4E25\u8C28\u7684\uFF0C\u4E0D\u8FC7\u4E5F\u4E0D\u7528\u592A\u7EA0\u7ED3\u8FD9\u4E9B\u540D\u8BCD\uFF0C\u53EF\u4EE5\u6839\u636E\u4E0A\u4E0B\u6587\u6765\u7406\u89E3\u3002",-1),P1=s("p",null,"\u5F53\u7528\u6237\u521B\u5EFA\u4E86\u81EA\u5DF1\u7684\u955C\u50CF\u4E4B\u540E\u5C31\u53EF\u4EE5\u4F7F\u7528docker push\u547D\u4EE4\u5C06\u5B83\u4E0A\u4F20\u5230\u516C\u6709\u6216\u8005\u79C1\u6709\u4ED3\u5E93\uFF0C\u8FD9\u6837\u4E0B\u6B21\u5728\u53E6\u5916\u4E00\u53F0\u673A\u5668\u4E0A\u4F7F\u7528\u8FD9\u4E2A\u955C\u50CF\u65F6\u5019\uFF0C\u53EA\u9700\u8981\u4ECE\u4ED3\u5E93\u4E0Adocker pull\u4E0B\u6765\u5C31\u53EF\u4EE5\u4E86\u3002\u662F\u7684\uFF0C\u6CA1\u9519\uFF0C\u5C31\u50CF\u4F60\u64CD\u4F5CGit\u90A3\u6837\u3002",-1),N1=s("h3",{id:"docker\u4E0E\u865A\u62DF\u5316",tabindex:"-1"},[n("Docker\u4E0E\u865A\u62DF\u5316 "),s("a",{class:"header-anchor",href:"#docker\u4E0E\u865A\u62DF\u5316","aria-hidden":"true"},"#")],-1),R1=s("p",null,"Docker\u662F\u4E00\u79CD\u5BB9\u5668\u6280\u672F\uFF0C\u5B83\u548C\u865A\u62DF\u5316\u662F\u6709\u533A\u522B\uFF0C\u5C31\u50CF\u4E0B\u56FE\u6240\u793A\uFF1A",-1),T1=s("p",null,[s("img",{src:"http://k8s.unixhot.com/docker/media/50b4ac39d02c080a7e3284e9b078e0c2.jpg",alt:"0731013"})],-1),I1=s("p",null,"\u53EF\u4EE5\u770B\u5230Docker\u7684\u5BB9\u5668\u5E76\u4E0D\u9700\u8981\u8FD0\u884C\u4E00\u4E2AHypervisor\u3002\u76F4\u63A5\u662FDocker Engine\u6765\u7BA1\u7406\u5BB9\u5668\uFF0C\u51CF\u5C11\u4E86Hypervisor\u7684\u5F00\u9500\uFF0C\u4F46\u662F\u7531\u4E8EDocker\u5BB9\u5668\u5E76\u4E0D\u662F\u4E00\u4E2A\u865A\u62DF\u673A\uFF0C\u6240\u4EE5\u4E5F\u65E0\u6CD5\u63D0\u4F9B\u50CF\u865A\u62DF\u673A\u4E00\u6837\u7684\u5B8C\u5168\u7684\u8D44\u6E90\u9694\u79BB\uFF0C\u8FD8\u6709\u5F88\u591A\u9694\u79BB\u5C42\u9762\u7684\u95EE\u9898\u3002\u6240\u4EE5\u5982\u679C\u4F60\u7684\u4E1A\u52A1\u8981\u6C42\u5B8C\u5168\u7684\u8D44\u6E90\u9694\u79BB\uFF0C\u53EF\u80FDDocker\u5E76\u4E0D\u662F\u4E00\u4E2A\u597D\u7684\u9009\u62E9\u3002\u4F8B\u5982\u6211\u4EEC\u4E4B\u524D\u652F\u4ED8\u4E1A\u52A1\uFF0C\u9700\u8981\u5728\u7269\u7406\u673A\u4E0A\u63D2\u5165U Key\uFF0C\u5728\u865A\u62DF\u673A\u7684\u60C5\u51B5\u4E0B\u53EF\u4EE5\u901A\u8FC7USB\u91CD\u5B9A\u5411\u6765\u5B9E\u73B0\uFF0C\u4F46\u662FDocker\u5374\u5E76\u4E0D\u652F\u6301\u3002",-1),O1=s("p",null,"\u6240\u6709\u7684\u6280\u672F\u90FD\u6709\u5B83\u9002\u7528\u7684\u573A\u666F\uFF0C\u53EA\u6709\u6DF1\u5165\u4E86\u89E3Docker\uFF0C\u6211\u4EEC\u624D\u80FD\u53D1\u6325\u5B83\u7684\u4F5C\u7528\uFF0C\u63D0\u9AD8\u5DE5\u4F5C\u6548\u7387\u3002",-1),M1=s("h3",{id:"docker\u4E0Eopenstack\u5BF9\u6BD4",tabindex:"-1"},[n("Docker\u4E0EOpenStack\u5BF9\u6BD4 "),s("a",{class:"header-anchor",href:"#docker\u4E0Eopenstack\u5BF9\u6BD4","aria-hidden":"true"},"#")],-1),w1=s("p",null,"\u5728Docker\u8FD8\u6CA1\u6709\u666E\u53CA\u4E4B\u524D\uFF0C\u4E91\u8BA1\u7B97\u3001OpenStack\u7B49\u6D41\u884C\u7684\u6280\u672F\u94FA\u9762\u800C\u6765\u3002\u4E25\u683C\u6765\u8BF4Docker\u4E0D\u5E94\u8BE5\u548COpenStack\u505A\u5BF9\u6BD4\uFF0C\u4ED6\u4EEC\u6CA1\u6709\u5728\u4E00\u4E2A\u5C42\u7EA7\u4E0A\uFF0C\u548CKVM\u6BD4\u4F1A\u66F4\u597D\u4E00\u4E9B\u3002",-1),K1=s("table",null,[s("thead",null,[s("tr",null,[s("th",null,"\u7C7B\u522B"),s("th",null,"Docker"),s("th",null,"OpenStack/KVM")])]),s("tbody",null,[s("tr",null,[s("td",null,"\u90E8\u7F72\u96BE\u5EA6"),s("td",null,"\u975E\u5E38\u7B80\u5355"),s("td",null,"\u7EC4\u4EF6\u591A\uFF0C\u90E8\u7F72\u590D\u6742")]),s("tr",null,[s("td",null,"\u542F\u52A8\u901F\u5EA6"),s("td",null,"\u79D2\u7EA7"),s("td",null,"\u5206\u949F\u7EA7")]),s("tr",null,[s("td",null,"\u6267\u884C\u6027\u80FD"),s("td",null,"\u548C\u7269\u7406\u7CFB\u7EDF\u51E0\u4E4E\u4E00\u81F4"),s("td",null,"VM\u4F1A\u5360\u7528\u4E00\u4E9B\u8D44\u6E90")]),s("tr",null,[s("td",null,"\u955C\u50CF\u4F53\u79EF"),s("td",null,"\u955C\u50CF\u662FMB\u7EA7\u522B"),s("td",null,"\u865A\u62DF\u673A\u955C\u50CFGB\u7EA7\u522B")]),s("tr",null,[s("td",null,"\u7BA1\u7406\u6548\u7387"),s("td",null,"\u7BA1\u7406\u7B80\u5355"),s("td",null,"\u7EC4\u4EF6\u76F8\u4E92\u4F9D\u8D56\uFF0C\u7BA1\u7406\u590D\u6742")]),s("tr",null,[s("td",null,"\u9694\u79BB\u6027"),s("td",null,"\u9694\u79BB\u6027\u9AD8"),s("td",null,"\u5F7B\u5E95\u9694\u79BB")]),s("tr",null,[s("td",null,"\u53EF\u7BA1\u7406\u6027"),s("td",null,"\u5355\u8FDB\u7A0B\u3001\u4E0D\u5EFA\u8BAE\u542F\u52A8SSH"),s("td",null,"\u5B8C\u6574\u7684\u7CFB\u7EDF\u7BA1\u7406")]),s("tr",null,[s("td",null,"\u7F51\u7EDC\u8FDE\u63A5"),s("td",null,"\u6BD4\u8F83\u5F31"),s("td",null,"\u501F\u52A9Neutron\u53EF\u4EE5\u7075\u6D3B\u7EC4\u4EF6\u5404\u7C7B\u7F51\u7EDC\u67B6\u6784")])])],-1),L1=s("h3",{id:"docker\u6539\u53D8\u4E86\u4EC0\u4E48\uFF1F",tabindex:"-1"},[n("Docker\u6539\u53D8\u4E86\u4EC0\u4E48\uFF1F "),s("a",{class:"header-anchor",href:"#docker\u6539\u53D8\u4E86\u4EC0\u4E48\uFF1F","aria-hidden":"true"},"#")],-1),U1=s("p",null,"\u6211\u89C9\u5F97Docker\u5728\u4E0D\u540C\u7684\u5C42\u9762\u90FD\u6539\u53D8\u4E86\u6211\u7684\u5DE5\u4F5C\u65B9\u5F0F\uFF1A",-1),j1=s("p",null,[s("strong",null,"\u9762\u5411\u4EA7\u54C1")],-1),G1=s("p",null,"\u589E\u52A0\u4E86\u4EA7\u54C1\u4EA4\u4ED8\u6A21\u5F0F\u3002\u5728\u4EA7\u54C1\u4EA4\u4ED8\u65B9\u9762\uFF0C\u4E4B\u524D\u505A\u4EA7\u54C1\u4EA4\u4ED8\u6211\u4EEC\u90FD\u662F\u4EA4\u4ED8\u7684\u8F6F\u4EF6\u5305\u3001\u5B89\u88C5\u64CD\u4F5C\u6587\u6863\u7B49\uFF0C\u9700\u8981\u7528\u6237\u8FDB\u884C\u90E8\u7F72\u3002\u800C\u73B0\u5728\u53EF\u4EE5\u76F4\u63A5\u4EA4\u4ED8Docker\u955C\u50CF\uFF0C\u76F4\u63A5\u542F\u52A8\u5C31\u53EF\u4EE5\u8BBF\u95EE\u3002\u4F8B\u5982\u73B0\u5728\u5F88\u591A\u5F00\u6E90\u7684\u9879\u76EE\u90FD\u63D0\u4F9B\u4E86Docker\u955C\u50CF\u6216\u8005Dockerfile\uFF0C\u5BF9\u4E8E\u53EA\u60F3\u5C1D\u8BD5\u4E00\u4E0B\u7684\u4EBA\u5458\u6765\u8BF4\uFF0C\u518D\u4E5F\u4E0D\u7528\u8FDB\u884C\u7E41\u7410\u7684\u5B89\u88C5\u6B65\u9AA4\u4E86\uFF0C\u800C\u4E14\u5F80\u5F80\u90E8\u7F72\u6210\u529F\u540E\uFF0C\u53D1\u73B0\u5E76\u4E0D\u80FD\u6EE1\u8DB3\u6211\u4EEC\u7684\u8981\u6C42\u3002",-1),H1=s("p",null,[s("strong",null,"\u9762\u5411\u5F00\u53D1")],-1),F1=s("p",null,"\u7B80\u5316\u4E86\u5F00\u53D1\u73AF\u5883\u914D\u7F6E\u3002\u516C\u53F8\u6BCF\u6B21\u6709\u5F00\u53D1\u5165\u804C\uFF0C\u5F53\u5929\u9664\u4E86\u529E\u624B\u7EED\u5C31\u662F\u51C6\u5907\u5F00\u53D1\u73AF\u5883\u4E86\u3002\u5982\u679C\u4F7F\u7528Docker\uFF0C\u6211\u4EEC\u53EF\u4EE5\u7ED9\u4E0D\u540C\u9879\u76EE\uFF0C\u6784\u5EFA\u4E0D\u540C\u7684Docker\u955C\u50CF\u3002\u5F00\u53D1\u5165\u804C\u540E\uFF0C\u5C31\u53EF\u4EE5\u5FEB\u901F\u7684\u8FDB\u5165\u5F00\u53D1\u5DE5\u4F5C\u3002\u800C\u4E14\u8FD9\u4E2A\u955C\u50CF\u4E00\u6B21\u6784\u5EFA\uFF0C\u53EF\u4EE5\u5728\u5F00\u53D1\u3001\u6D4B\u8BD5\u3001\u9884\u751F\u4EA7\u3001\u751F\u4EA7\u90FD\u53EF\u4EE5\u4F7F\u7528\u3002",-1),V1=s("p",null,[s("strong",null,"\u9762\u5411\u6D4B\u8BD5")],-1),B1=s("p",null,"Docker\u5B9E\u73B0\u4E86\u591A\u7248\u672C\u6D4B\u8BD5\u3002\u4E4B\u524D\u6211\u516C\u53F8\u6D4B\u8BD5\u56E2\u961F\uFF0C\u5982\u679C\u60F3\u6D4B\u8BD5\u4E00\u4E2A\u9879\u76EE\u7684\u4E0D\u540C\u5206\u652F\uFF0C\u7531\u4E8E\u6D4B\u8BD5\u73AF\u5883\u7684\u5C40\u9650\u6027\u5927\u5BB6\u8981\u6392\u961F\uFF0C\u4E32\u884C\u7684\u8FDB\u884C\u6D4B\u8BD5\u3002\u6D4B\u8BD5\u4EBA\u5458A\u518D\u4F7F\u7528\u67D0\u4E2A\u9879\u76EE\u7684\u6D4B\u8BD5\u73AF\u5883\u65F6\uFF0C\u5176\u5B83\u4EBA\u8981\u6392\u961F\u3002\u73B0\u5728\u6BCF\u4E2A\u6D4B\u8BD5\u4EBA\u5458\u90FD\u53EF\u4EE5\u521B\u5EFA\u4E0D\u540C\u5206\u652F\u7684Docker\u5BB9\u5668\u3002\u8BA9\u6D4B\u8BD5\u56E2\u961F\u53EF\u4EE5\u5E76\u884C\u6D4B\u8BD5\u3002",-1),q1=s("p",null,[s("strong",null,"\u9762\u5411\u8FD0\u7EF4")],-1),Y1=s("p",null,"\u89E3\u51B3\u73AF\u5883\u4E00\u81F4\u6027\u3001\u5B9E\u73B0\u8FD0\u884C\u73AF\u5883\u56DE\u6EDA\u3002\u6211\u4EEC\u4E5F\u4E0D\u9700\u8981\u4F7F\u7528SaltStack\u8FDB\u884C\u914D\u7F6E\u7BA1\u7406\u4E86\u3002\u505A\u597D\u4E00\u4E2ADocker\u955C\u50CF\u4E4B\u540E\uFF0C\u5F00\u53D1\u3001\u6D4B\u8BD5\u3001\u751F\u4EA7\u90FD\u7528\u4E00\u5957\u8FD0\u884C\u73AF\u5883\uFF0C\u53EA\u662F\u4E0A\u9762\u7684\u4EE3\u7801\u4E0D\u540C\u3002\u5F53\u7136\u8FD9\u4E2A\u865A\u62DF\u673A\u4E5F\u53EF\u4EE5\u5B9E\u73B0\uFF0C\u4F46\u662F\u4E0D\u591F\u654F\u6377\u3002\u800C\u4E14\u5728\u751F\u4EA7\u4EE3\u7801\u90E8\u7F72\u7684\u65F6\u5019\uFF0C\u4EE5Docker\u5BB9\u5668\u4E3A\u5355\u4F4D\u8FDB\u884C\u53D1\u5E03\u3002\u5982\u679C\u8981\u8FDB\u884C\u56DE\u6EDA\uFF0C\u76F4\u63A5\u628A\u4E0A\u4E00\u4E2A\u7248\u672C\u7684Docker\u5BB9\u5668\u542F\u52A8\u5373\u53EF\u3002",-1),z1=s("p",null,[s("strong",null,"\u9762\u5411\u67B6\u6784")],-1),$1=s("p",null,"SOA\u670D\u52A1\u90E8\u7F72\u3001\u5FAE\u670D\u52A1\u90E8\u7F72\u3001\u81EA\u52A8\u5316\u6269\u5BB9\u3002\u4E4B\u524D\u6211\u4EEC\u505ASOA\u3001\u5FAE\u670D\u52A1\u7684\u65F6\u5019\u6700\u591A\u4EE5\u865A\u62DF\u673A\u4E3A\u5355\u4F4D\u8FDB\u884C\u7BA1\u7406\u3002\u4F46\u662F\u73B0\u5728\u542F\u52A8\u4E00\u4E2ADocker\u5BB9\u5668\u8981\u8FDC\u8FDC\u5FEB\u901F\u542F\u52A8\u4E00\u4E2AKVM\u865A\u62DF\u673A\u3002\u800C\u4E14\u4E0D\u9700\u8981\u592A\u590D\u6742\u7684\u64CD\u4F5C\u6B65\u9AA4\uFF0C\u4F60\u5C31\u53EF\u4EE5\u5728\u4E00\u4E2A\u65B0\u7684\u670D\u52A1\u5668\u4E0A\u5B89\u88C5\u4E0ADocker\uFF0C\u5E76\u4E0B\u8F7D\u955C\u50CF\uFF0C\u542F\u52A8\u5BB9\u5668\u3002",-1),X1=s("h2",{id:"docker\u90E8\u7F72",tabindex:"-1"},[n("Docker\u90E8\u7F72 "),s("a",{class:"header-anchor",href:"#docker\u90E8\u7F72","aria-hidden":"true"},"#")],-1),J1=s("p",null,"\u76EE\u524DDocker\u4EC5\u652F\u6301Linux\u548CUnix\u73AF\u5883\uFF0C\u5728Windows Server 2016\u7248\u672C\u652F\u6301Windows\u5BB9\u5668\u3002",-1),W1=s("h3",{id:"docker-for-centos\uFF1A",tabindex:"-1"},[n("Docker for CentOS\uFF1A "),s("a",{class:"header-anchor",href:"#docker-for-centos\uFF1A","aria-hidden":"true"},"#")],-1),Q1=s("p",null,[s("strong",null,"\u7B2C\u4E00\u6B65\uFF1A\u4F7F\u7528\u5B98\u65B9yum\u4ED3\u5E93")],-1),Z1=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# yum install -y yum-utils")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),sy=s("p",null,"\u4F7F\u7528\u56FD\u5185Yum\u6E90",-1),ny=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# cd /etc/yum.repos.d/")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 yum.repos.d]# wget https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),ly=s("p",null,"\u7B2C\u4E8C\u6B65\uFF1ADocker\u5B89\u88C5\uFF1A",-1),ey=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# yum install -y docker-ce")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),oy=s("p",null,"\u7B2C\u4E09\u6B65\uFF1A\u542F\u52A8\u540E\u53F0\u8FDB\u7A0B\uFF1A",-1),ay=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# systemctl start docker")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 yum.repos.d]# docker --version")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Docker version 18.09.2, build 6247962")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),ty=s("h3",{id:"docker-for-windows",tabindex:"-1"},[n("Docker for windows: "),s("a",{class:"header-anchor",href:"#docker-for-windows","aria-hidden":"true"},"#")],-1),cy=s("p",null,[n("\u7B2C\u4E00\u6B65\uFF1A\u4E0B\u8F7Dboot2docker\uFF1A"),s("a",{href:"https://github.com/boot2docker/windows-installer/releases/latest",target:"_blank",rel:"noreferrer"},"https://github.com/boot2docker/windows-installer/releases/latest")],-1),iy=s("p",null,"\u7B2C\u4E8C\u6B65\uFF1A\u8FD0\u884C\u5B89\u88C5\u7A0B\u5E8F\uFF0C",-1),ry=s("p",null,[s("img",{src:"http://k8s.unixhot.com/docker/media/ee82a72fe806ac1ae99ab7fa0aac210c.png",alt:"img"})],-1),py=s("p",null,"\u9009\u62E9\u9700\u8981\u5B89\u88C5\u7684\u7EC4\u4EF6\uFF0C\u5982\u679C\u521D\u6B21\u5B89\u88C5\u8BF7\u9009\u62E9Full installation\u3002",-1),dy=s("p",null,[s("img",{src:"http://k8s.unixhot.com/docker/media/920a1b8c46b133f431f0255197ddb3f8.png",alt:"img"})],-1),Ay=s("p",null,[s("img",{src:"http://k8s.unixhot.com/docker/media/bbe62c1244b68a92383658af3a72b3a0.png",alt:"img"})],-1),Cy=s("p",null,"\u5B89\u88C5\u5B8C\u6BD5\uFF0C\u6253\u5F00Docker\uFF0C\u9ED8\u8BA4\u4F1A\u8FDB\u884C\u521D\u59CB\u5316\uFF0C\u521D\u59CB\u5316\u4F1A\u521B\u5EFA\u4E00\u4E2Avirtualbox\u7684\u865A\u62DF\u673A\u3002",-1),uy=s("h3",{id:"docker-hub",tabindex:"-1"},[n("Docker Hub "),s("a",{class:"header-anchor",href:"#docker-hub","aria-hidden":"true"},"#")],-1),yy=s("p",null,"Docker\u4E4B\u6240\u4EE5\u80FD\u8FD9\u4E48\u5FEB\u7684\u706B\u8D77\u6765\uFF0C\u548CDocker Hub\u7684\u4F5C\u7528\u662F\u5206\u4E0D\u5F00\u7684\u3002Docker\u6784\u5EFA\u4E86\u50CFGitHub\u4E00\u6837\u7684\u4ED3\u5E93\uFF0C\u7528\u6765\u5B58\u653E\u5927\u5BB6\u6784\u5EFA\u597D\u7684Docker\u955C\u50CF\uFF0C\u5176\u4E2D\u5DF2\u7ECF\u5305\u62EC\u4E86\u8D85\u8FC715,000\u7684\u955C\u50CF\u3002\u5927\u90E8\u5206\u9700\u6C42\uFF0C\u90FD\u53EF\u4EE5\u901A\u8FC7\u5728 Docker Hub \u4E2D\u76F4\u63A5\u4E0B\u8F7D\u955C\u50CF\u6765\u5B9E\u73B0\u3002",-1),hy=s("p",null,[s("strong",null,"\u641C\u7D22\u955C\u50CF")],-1),_y=s("p",null,"\u641C\u7D22\uFF0C\u4F60\u61C2\u7684\uFF0C\u60F3\u5BFB\u627E\u4F60\u9700\u8981\u7684Docker\u955C\u50CF\uFF0C\u5148\u641C\u7D22\u5427\uFF0C\u56E0\u4E3A\u53EF\u80FD\u5DF2\u7ECF\u6709\u4EBA\u505A\u597D\u4E86\uFF0C\u5408\u5E76\u91CD\u590D\u9020\u8F6E\u5B50\u5462\uFF0C\u5C24\u5176\u662F\u5F88\u591A\u662F\u5B98\u65B9\u63D0\u4F9B\u7684\uFF0C\u53EF\u4EE5\u975E\u5E38\u653E\u5FC3\u7684\u4F7F\u7528\u3002",-1),Dy=s("p",null,[s("img",{src:"http://k8s.unixhot.com/docker/media/bd38bd717fa1a2f84aa5f62a965a7ecd.png",alt:"img"})],-1),gy=s("p",null,"\u8F93\u51FA\u4F9D\u6B21\u4E3A\u955C\u50CF\u540D\u5B57\u3001\u63CF\u8FF0\u3001\u661F\u7EA7\uFF08\u8868\u793A\u8BE5\u955C\u50CF\u7684\u53D7\u6B22\u8FCE\u7A0B\u5EA6\uFF09\u3001\u662F\u5426\u5B98\u65B9\u521B\u5EFA\u3001\u662F\u5426\u81EA\u52A8\u521B\u5EFA\u3002OFFICIAL\u4E3AOK\u7684\u5C31\u662F\u5B98\u65B9\u955C\u50CF\u3002",-1),my=s("p",null,"\u672C\u7AE0\u5FEB\u901F\u7684\u5E26\u9886\u8BFB\u8005\u4F7F\u7528\u4E0ADocker\uFF0C\u4E86\u89E3Docker\u7684\u57FA\u672C\u64CD\u4F5C\u548C\u7BA1\u7406\u5DE5\u4F5C\u3002\u8BB0\u4F4F\uFF0C\u552F\u6709\u5B9E\u8DF5\u624D\u4F1A\u638C\u63E1\u3002",-1),by=s("h2",{id:"docker\u955C\u50CF\u7BA1\u7406",tabindex:"-1"},[n("Docker\u955C\u50CF\u7BA1\u7406 "),s("a",{class:"header-anchor",href:"#docker\u955C\u50CF\u7BA1\u7406","aria-hidden":"true"},"#")],-1),ky=s("p",null,"\u955C\u50CF\u662FDocker\u5BB9\u5668\u7684\u57FA\u7840\uFF0C\u60F3\u8FD0\u884C\u4E00\u4E2ADocker\u5BB9\u5668\u5C31\u9700\u8981\u6709\u955C\u50CF\u3002\u6211\u4EEC\u4E0A\u9762\u5DF2\u7ECF\u5B66\u4F1A\u4E86\u4F7F\u7528search\u641C\u7D22\u955C\u50CF\u3002\u90A3\u4E48\u8FD9\u4E2A\u955C\u50CF\u662F\u600E\u4E48\u521B\u5EFA\u7684\u5462\uFF1F",-1),vy=s("h3",{id:"\u521B\u5EFA\u955C\u50CF",tabindex:"-1"},[n("\u521B\u5EFA\u955C\u50CF "),s("a",{class:"header-anchor",href:"#\u521B\u5EFA\u955C\u50CF","aria-hidden":"true"},"#")],-1),xy=s("p",null,"\u955C\u50CF\u7684\u521B\u5EFA\u6709\u4EE5\u4E0B\u51E0\u79CD\u65B9\u6CD5\uFF1A",-1),fy=s("p",null,"**\u4F7F\u7528ISO\u955C\u50CF\uFF1A**\u56DE\u987E\u4E0BOpenStack\uFF0C\u6211\u4EEC\u5728\u521B\u5EFA\u865A\u62DF\u673A\u7684\u65F6\u5019\uFF0C\u9996\u5148\u4F7F\u7528iso\u5B89\u88C5\u5B9A\u5236\u4E86\u955C\u50CF\u4E0A\u4F20\u5230Glance\u4E0A\u9762\uFF0C\u5BF9\u4E8EDocker\u6765\u8BF4\uFF0C\u6211\u4EEC\u540C\u6837\u53EF\u4EE5\u4F7F\u7528ISO\u955C\u50CF\u6765\u5236\u4F5C\u57FA\u672C\u955C\u50CF\u3002",-1),Sy=s("p",null,"**\u4F7F\u7528\u5DE5\u5177\u5236\u4F5C\u955C\u50CF\uFF1A**\u4E0D\u540C\u7684\u64CD\u4F5C\u7CFB\u7EDF\u90FD\u63D0\u4F9B\u4E86\u76F8\u5E94\u7684\u5DE5\u5177\u6765\u8BA9\u7528\u6237\u521B\u5EFADocker\u955C\u50CF\uFF0C\u6BD4\u5982Centos\u53EF\u4EE5\u4F7F\u7528febootstrap\u3002debian/ubuntu\u4F7F\u7528debootstrap\u3002",-1),Ey=s("p",null,"**\u57FA\u4E8E\u672C\u5730\u6A21\u677F\u5BFC\u5165\uFF1A**Docker\u652F\u6301\u4ECE\u4E00\u4E2A\u64CD\u4F5C\u7CFB\u7EDF\u6A21\u677F\u6587\u4EF6\u5BFC\u5165\u4E00\u4E2A\u955C\u50CF\u3002",-1),Py=s("p",null,"\u4E00\u822C\u6211\u4EEC\u90FD\u662F\u4F7F\u7528\u4E00\u4E9B\u516C\u5171\u7684\u57FA\u7840\u955C\u50CF\uFF0C\u7136\u540E\u5728\u8FD9\u4E2A\u57FA\u7840\u4E0A\uFF0C\u518D\u6839\u636E\u81EA\u8EAB\u9700\u6C42\u8FDB\u884C\u5B9A\u5236\u3002\u6BD4\u5982\u540E\u9762\u8981\u8BB2\u5230\u7684Docker File\u7684\u65B9\u5F0F\uFF0C\u6765\u521B\u5EFA\u955C\u50CF\u3002",-1),Ny=s("h3",{id:"\u83B7\u53D6\u955C\u50CF",tabindex:"-1"},[n("\u83B7\u53D6\u955C\u50CF "),s("a",{class:"header-anchor",href:"#\u83B7\u53D6\u955C\u50CF","aria-hidden":"true"},"#")],-1),Ry=s("p",null,"\u65E2\u7136\u6709\u4E86Docker Hub\uFF0C\u6211\u4EEC\u5C31\u4E0D\u8981\u91CD\u590D\u9020\u8F6E\u5B50\u4E86\uFF0C\u76F4\u63A5\u4E0B\u8F7D\u4E00\u4E2A\u5B98\u65B9\u63D0\u4F9B\u7684centos\u955C\u50CF\u5427\u3002",-1),Ty=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# docker pull centos")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Using default tag: latest")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"latest: Pulling from library/centos")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"a02a4930cb5d: Pull complete")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Digest: sha256:184e5f35598e333bfa7de10d8fb1cebb5ee4df5bc0f970bf2b1e7c7345136426")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Status: Downloaded newer image for centos:latest")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Iy=s("p",null,"Docker\u955C\u50CF\u6587\u4EF6\u662F\u6709\u82E5\u5E72\u5C42\u7EC4\u6210\u7684\uFF0C\u884C\u9996\u7684\u540D\u79F0\u5C31\u662F\u5404\u5C42\u7684ID\u3002\u8FD9\u5C31\u662FDocker\u955C\u50CF\u7684\u4E00\u4E2A\u7279\u70B9\u3002\u5176\u5B9E\u5206\u5C42\u8BBE\u8BA1\u662F\u5F88\u591A\u8BBE\u8BA1\u7684\u6700\u4F73\u5B9E\u8DF5\u4E4B\u4E00\u3002\u7531\u4E8E\u7F51\u7EDC\u539F\u56E0\uFF0C\u56FD\u5185\u7528\u6237\u53EF\u80FD\u9700\u8981\u7B49\u5F85\u5F88\u4E45\u3002\u5982\u679C\u4E0B\u8F7D\u4E2D\u65AD\u53EF\u4EE5\u518D\u6B21\u6267\u884Cdocker pull centos\u3002",-1),Oy=s("p",null,"\u955C\u50CF\u53EF\u4EE5\u6709\u4E0D\u540C\u7684\u6807\u7B7E\uFF0C\u4F8B\u5982v1.0\u3001v1.1\u8FD9\u6837\uFF0C\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u5982\u679C\u6211\u4EEC\u4E0D\u518Dcentos\u540E\u9762\u589E\u52A0\u4EFB\u4F55\u7684\u6807\u7B7E\u4F1A\u4E0B\u8F7D\u6807\u7B7E\u4E3Alatest\u7684\u955C\u50CF\uFF0C\u4E5F\u5C31\u662F\u6700\u65B0\u7248\u672C\uFF0C\u800C\u4E14\u9ED8\u8BA4\u662F\u4ECEdocker hub\u4E0A\u8FDB\u884C\u4E0B\u8F7D\u3002",-1),My=s("h3",{id:"\u67E5\u770B\u955C\u50CF",tabindex:"-1"},[n("\u67E5\u770B\u955C\u50CF "),s("a",{class:"header-anchor",href:"#\u67E5\u770B\u955C\u50CF","aria-hidden":"true"},"#")],-1),wy=s("p",null,"\u4F7F\u7528docker images\u53EF\u4EE5\u67E5\u770B\u5F53\u524D\u7CFB\u7EDF\u4E2D\u90FD\u6709\u54EA\u4E9B\u955C\u50CF\u3002",-1),Ky=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# docker images")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"REPOSITORY TAG IMAGE ID CREATED SIZE")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"centos latest 1e1148e4cc2c 2 months ago 202MB")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Ly=s("p",null,"\u4F7F\u7528docker images\u53EF\u4EE5\u5217\u51FA\u672C\u5730\u4E3B\u673A\u4E0A\u5DF2\u7ECF\u5B58\u5728\u7684\u955C\u50CF\uFF0C\u6BCF\u4E2A\u955C\u50CF\u90FD\u6709\u4E00\u4E2A\u552F\u4E00\u7684\u955C\u50CFID\uFF0C\u6211\u4EEC\u53EF\u4EE5\u770B\u5230\u6709\u4EE5\u4E0B\u51E0\u4E2A\u680F\u76EE\uFF1A",-1),Uy=s("ul",null,[s("li",null,"REPOSITORY\uFF1A\u955C\u50CF\u6765\u81EA\u4E8E\u54EA\u4E2A\u4ED3\u5E93"),s("li",null,"TAG\uFF1A\u955C\u50CF\u7684\u6807\u7B7E\u3002\u7528\u6765\u6807\u8BB0\u955C\u50CF\u7684\u4E0D\u540C\u7248\u672C\u7B49\u3002"),s("li",null,"IMAGE ID\uFF1A\u955C\u50CF\u7684\u552F\u4E00ID\u3002"),s("li",null,"CREATED\uFF1A\u955C\u50CF\u521B\u5EFA\u65F6\u95F4\u3002"),s("li",null,"VIRTUAL SIZE\uFF1A\u955C\u50CF\u7684\u5927\u5C0F\u3002")],-1),jy=s("h3",{id:"\u955C\u50CF\u7684\u5BFC\u5165\u5BFC\u51FA",tabindex:"-1"},[n("\u955C\u50CF\u7684\u5BFC\u5165\u5BFC\u51FA "),s("a",{class:"header-anchor",href:"#\u955C\u50CF\u7684\u5BFC\u5165\u5BFC\u51FA","aria-hidden":"true"},"#")],-1),Gy=s("p",null,"\u5982\u679C\u4F60\u60F3\u628A\u81EA\u5DF1\u7684\u955C\u50CF\u4F20\u7ED9\u522B\u4EBA\u600E\u4E48\u529E\uFF0CDocker\u63D0\u4F9B\u4E86\u5BFC\u5165\u548C\u5BFC\u51FA\u7684\u547D\u4EE4\uFF1A",-1),Hy=s("p",null,[s("strong",null,"\u5BFC\u51FA\u955C\u50CF")],-1),Fy=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# docker save -o centos.tar centos")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Vy=s("p",null,[s("strong",null,"\u5BFC\u5165\u955C\u50CF")],-1),By=s("p",null,"\u5C06\u5BFC\u51FA\u7684\u955C\u50CFscp\u5230\u53E6\u5916\u7684\u4E00\u53F0\u673A\u5668\u4E0A\u540E\u505A\u5BFC\u5165\u3002",-1),qy=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node2 ~]# docker load --input centos.tar")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Yy=s("p",null,"\u6216\u8005\u4F7F\u7528\u91CD\u5B9A\u5411\u8FDB\u884C\u5BFC\u5165",-1),zy=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node2 ~]# docker load < centos.tar")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),$y=s("p",null,"Docker\u955C\u50CF\u8FD9\u79CD\u5BFC\u5165\u548C\u5BFC\u51FA\u662F\u5B8C\u6574\uFF0C\u53EF\u4EE5\u770B\u5230\u955C\u50CFID\u7B49\u90FD\u6CA1\u6709\u53D1\u751F\u6539\u53D8\u3002",-1),Xy=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node2 ~]# docker images")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"REPOSITORY TAG IMAGE ID CREATED SIZE")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"centos latest 1e1148e4cc2c 2 months ago 202MB")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Jy=s("h3",{id:"\u5220\u9664\u955C\u50CF",tabindex:"-1"},[n("\u5220\u9664\u955C\u50CF "),s("a",{class:"header-anchor",href:"#\u5220\u9664\u955C\u50CF","aria-hidden":"true"},"#")],-1),Wy=s("p",null,"\u4F7F\u7528docker rmi\u547D\u4EE4\u53EF\u4EE5\u5220\u9664\u672C\u5730\u7684\u955C\u50CF\uFF0C\u53EF\u4EE5\u4F7F\u7528\u955C\u50CF\u7684\u6807\u7B7E\u6216\u8005\u955C\u50CF\u7684ID\u3002\u4ED6\u4EEC\u4E24\u8005\u4E4B\u95F4\u662F\u4E0D\u540C\u7684\u3002",-1),Qy=s("p",null,"docker rmi \u6807\u7B7E\uFF1A\u4F1A\u5220\u9664\u6307\u5B9A\u6807\u7B7E\u7684\u955C\u50CF\uFF0C\u4F46\u662F\u955C\u50CF\u672C\u8EAB\u4E0D\u4F1A\u88AB\u5220\u9664\uFF0C\u56E0\u4E3A\u4E00\u4E2A\u955C\u50CF\u5BF9\u8C61\u53EF\u4EE5\u6709\u591A\u4E2A\u6807\u7B7E\uFF0C\u5C31\u50CFLinux\u6587\u4EF6\u7684\u786C\u94FE\u63A5\uFF0C\u5F53\u955C\u50CF\u53EA\u5269\u4E0B\u4E00\u4E2A\u6807\u7B7E\u7684\u65F6\u5019\uFF0C\u4F7F\u7528\u6807\u7B7E\u5220\u9664\u955C\u50CF\uFF0C\u624D\u4F1A\u5220\u9664\u955C\u50CF\u672C\u8EAB\u3002",-1),Zy=s("p",null,"docker rmi ID\uFF1A\u4F7F\u7528\u955C\u50CF\u7684ID\u5220\u9664\u955C\u50CF\uFF0C\u4F1A\u5148\u5220\u9664\u8BE5\u955C\u50CF\u7684\u6240\u6709\u6807\u7B7E\uFF0C\u7136\u540E\u518D\u5220\u9664\u955C\u50CF\u6587\u4EF6\u672C\u8EAB\u3002",-1),s6=s("p",null,"\u6CE8\u610F\uFF1A\u5982\u679C\u955C\u50CF\u521B\u5EFA\u7684\u5BB9\u5668\u5B58\u5728\u65F6\uFF0C\u955C\u50CF\u662F\u65E0\u6CD5\u88AB\u5220\u9664\u7684\u3002\u4E0D\u8FC7\u4F60\u53EF\u4EE5\u4F7F\u7528-f\u7684\u53C2\u6570\u5F3A\u5236\u5220\u9664\u955C\u50CF\uFF0C\u5E76\u4E0D\u5EFA\u8BAE\u8FD9\u4E48\u505A\u3002",-1),n6=s("p",null,"\u770B\u8D77\u6765Docker\u7684\u955C\u50CF\u64CD\u4F5C\u662F\u6BD4\u865A\u62DF\u673A\u8981\u4FBF\u6377\u7684\u591A\uFF0C\u76EE\u524D\u6765\u8BF4\u4F7F\u7528\u51E0\u4E2A\u7B80\u5355\u7684\u547D\u4EE4\uFF0C\u5C31\u53EF\u4EE5\u5B8C\u6210\u955C\u50CF\u7684\u7BA1\u7406\u5DE5\u4F5C\uFF0C\u4E0D\u8FC7\u8FD9\u8FD8\u53EA\u662F\u57FA\u7840\u3002",-1),l6=s("h2",{id:"docker\u5BB9\u5668\u7BA1\u7406",tabindex:"-1"},[n("Docker\u5BB9\u5668\u7BA1\u7406 "),s("a",{class:"header-anchor",href:"#docker\u5BB9\u5668\u7BA1\u7406","aria-hidden":"true"},"#")],-1),e6=s("p",null,"Docker\u5BB9\u5668\u76F8\u5BF9\u4E8EOpenStack\u7684\u4E91\u4E3B\u673A\u5B9E\u4F8B\uFF0C\u867D\u7136\u4ED6\u4EEC\u672C\u8D28\u4E0A\u4E0D\u540C\u3002\u6211\u4EEC\u9700\u8981\u57FA\u4E8E\u955C\u50CF\u6765\u521B\u5EFA\u5BB9\u5668\u3002\u5BB9\u5668\u662F\u72EC\u7ACB\u8FD0\u884C\u7684\u4E00\u4E2A\u6216\u4E00\u7EC4\u5E94\u7528\uFF0C\u4EE5\u53CA\u5B83\u4EEC\u7684\u8FD0\u884C\u73AF\u5883\u3002\u5BF9\u5E94\u7684\uFF0C\u865A\u62DF\u673A\u53EF\u4EE5\u7406\u89E3\u4E3A\u6A21\u62DF\u8FD0\u884C\u7684\u4E00\u6574\u5957\u64CD\u4F5C\u7CFB\u7EDF\u548C\u8DD1\u5728\u4E0A\u9762\u7684\u5E94\u7528\u3002",-1),o6=s("h3",{id:"\u542F\u52A8\u5BB9\u5668",tabindex:"-1"},[n("\u542F\u52A8\u5BB9\u5668 "),s("a",{class:"header-anchor",href:"#\u542F\u52A8\u5BB9\u5668","aria-hidden":"true"},"#")],-1),a6=s("p",null,"\u542F\u52A8\u5BB9\u5668\u5176\u5B9E\u5C31\u662F\u521B\u5EFA\u955C\u50CF\u5E76\u542F\u52A8\uFF0C\u542F\u52A8\u955C\u50CF\u6709\u4E24\u79CD\u65B9\u5F0F\uFF0C\u4E00\u79CD\u662F\u5C06\u5DF2\u7ECF\u5B58\u5728\uFF0C\u4F46\u662F\u662Fstopped\u72B6\u6001\u7684\u955C\u50CF\u542F\u52A8\uFF0C\u4E00\u79CD\u5C31\u662F\u57FA\u4E8E\u4E00\u4E2A\u955C\u50CF\u65B0\u5EFA\u4E00\u4E2A\u65B0\u7684\u5BB9\u5668\u5E76\u542F\u52A8\u3002",-1),t6=s("p",null,[s("strong",null,"\u65B0\u5EFA\u5E76\u542F\u52A8\u5BB9\u5668")],-1),c6=s("p",null,"\u8BA9\u6211\u4EEC\u5148\u8001\u751F\u5E38\u8C08\uFF0C\u8F93\u51FA\u4E00\u4E2AHello World\u5427\u3002",-1),i6=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# docker run centos /bin/echo 'Hello world'")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Hello world")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),r6=s("p",null,"\u5F88\u795E\u5947\uFF0C\u53EF\u4EE5\u5728\u7CBE\u901A\u5404\u79CD\u8BED\u8A00\u7684Hello World\u8BA1\u6570\u5668+1\u4E86\uFF0C\u8FD9\u4E2A\u548C\u4F60\u5728\u672C\u5730\u7CFB\u7EDF\u8FD0\u884C/bin/echo \u2018Hello world\u2019 \u51E0\u4E4E\u6CA1\u6709\u4EFB\u4F55\u533A\u522B\uFF0C\u4F46\u662F\u5B83\u662FDocker\u5BB9\u5668\u8F93\u51FA\u7684\uFF0C\u800C\u4E14\u8F93\u51FA\u540E\uFF0C\u5B83\u5C31\u5B8C\u6210\u4F7F\u547D\uFF0C\u81EA\u52A8\u9000\u51FA\u4E86\u3002",-1),p6=s("blockquote",null,[s("p",null,"\u6CE8\u610F\uFF1A\u8FD9\u91CC\u5C31\u662F\u6211\u4EEC\u5B66\u4E60Docker\u8981\u9762\u4E34\u7684\u7B2C\u4E00\u4E2A\u7591\u60D1\uFF0C\u5C31\u662F\u5BB9\u5668\u53EA\u4F1A\u5728\u524D\u53F0\u8FD0\u884C\u4E00\u4E2A\u4EFB\u52A1\uFF0C\u4EFB\u52A1\u7ED3\u675F\uFF0C\u5BB9\u5668\u5C31\u7EC8\u6B62\u4E86\u3002")],-1),d6=s("p",null,"\u4F7F\u7528docker ps \u2013a\u53EF\u4EE5\u67E5\u770B\u5F53\u524D\u542F\u52A8\u7684\u5BB9\u5668\uFF1A",-1),A6=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# docker ps -a")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},`789de67bb454 centos "/bin/echo 'Hello wor" 30 seconds ago Exited (0) 29 seconds`)]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"ago pedantic_kare")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),C6=s("p",null,"\u521A\u63A5\u89E6Docker\u5230\u8FD9\u91CC\u8FD8\u4F1A\u6709\u7B2C\u4E8C\u4E2A\u7591\u60D1\uFF1A",-1),u6=s("p",null,"Docker\u81EA\u52A8\u5E2E\u4F60\u751F\u6210\u4E86\u4E00\u4E2A\u540D\u5B57\uFF0C\u6BD4\u5982\u672C\u4F8B\u4E2D\u662Fpedantic_kare\u3002",-1),y6=s("p",null,"\u5F88\u56F0\u60D1\uFF1F\u597D\u5427\uFF0C\u8BA9\u6211\u4EEC\u6765\u542F\u52A8\u4E00\u4E2A\u6211\u4EEC\u81EA\u5B9A\u4E49\u540D\u79F0\uFF0C\u540C\u65F6\u53EF\u4EE5\u6709\u7EC8\u7AEF\u7684\u5BB9\u5668\uFF0C\u5C31\u50CF\u542F\u52A8\u4E00\u4E2A\u865A\u62DF\u673A\u4E00\u6837\uFF0C\u4E0D\u8FC7\u53EA\u662F\u50CF\u800C\u5DF2\uFF0C\u5B83\u4EEC\u672C\u8D28\u4E0A\u5B8C\u5168\u4E0D\u540C\u3002",-1),h6=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# docker run --name mydocker -t -i centos /bin/bash")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@1b0cae722fa0 /]#")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@1b0cae722fa0 /]# ls /")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"anaconda-post.log bin dev etc home lib lib64 lost+found media mnt opt proc root")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"run sbin srv sys tmp usr var")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),_6=s("p",null,"\u4E0A\u9762\u6211\u4EEC\u4F7F\u7528\u4E86\u4E24\u4E2A\u9009\u9879\uFF0C-t \u9009\u9879\u8BA9Docker\u5206\u914D\u4E00\u4E2A\u4F2A\u7EC8\u7AEF\u5E76\u7ED1\u5B9A\u5230\u5BB9\u5668\u7684\u6807\u51C6\u8F93\u5165\u4E0A\uFF0C -i \u5219\u8BA9\u5BB9\u5668\u7684\u6807\u51C6\u8F93\u5165\u4FDD\u6301\u6253\u5F00\u3002",-1),D6=s("p",null,"\u5728\u4EA4\u4E92\u6A21\u5F0F\u4E0B\uFF0C\u7528\u6237\u53EF\u4EE5\u901A\u8FC7\u6240\u521B\u5EFA\u7684\u7EC8\u7AEF\u6765\u8F93\u5165\u547D\u4EE4\uFF0C\u4F8B\u5982\u6211\u4EEC\u53EF\u4EE5\u67E5\u770B\u5F53\u524D\u8FD0\u884C\u7684\u8FDB\u7A0B\uFF0C\u53EA\u6709/bin/bash\u548C\u4F60\u8FD0\u884C\u7684\u547D\u4EE4\uFF0C\u6CE8\u610F\u770B/bin/bash\u7684PID\u4E3A1\uFF0C\u6709\u610F\u601D\u3002\u5148\u8BB0\u7740\u8FD9\u4E2A\u7279\u6B8A\u7684\u5730\u65B9\uFF0C\u968F\u7740\u6211\u4EEC\u6DF1\u5165\u5B66\u4E60\uFF0C\u518D\u56DE\u8FC7\u5934\u6765\u7814\u7A76\u5B83\u3002",-1),g6=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@1b0cae722fa0 /]# ps aux")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"USER PID %CPU %MEM VSZ RSS TTY STAT START TIME COMMAND")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"root 1 0.1 0.1 11776 1872 ? Ss 15:30 0:00 /bin/bash")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"root 18 0.0 0.0 47424 1660 ? R+ 15:31 0:00 ps aux")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),m6=s("p",null,"\u5F53\u5229\u7528 docker run \u6765\u521B\u5EFA\u5BB9\u5668\u65F6\uFF0CDocker \u5728\u540E\u53F0\u8FD0\u884C\u7684\u6807\u51C6\u64CD\u4F5C\u5305\u62EC\uFF1A",-1),b6=s("ul",null,[s("li",null,"\u68C0\u67E5\u672C\u5730\u662F\u5426\u5B58\u5728\u6307\u5B9A\u7684\u955C\u50CF\uFF0C\u4E0D\u5B58\u5728\u5C31\u4ECE\u516C\u5171\u4ED3\u5E93\u4E0B\u8F7D\uFF1B"),s("li",null,"\u5229\u7528\u955C\u50CF\u521B\u5EFA\u5E76\u542F\u52A8\u4E00\u4E2A\u5BB9\u5668\uFF1B"),s("li",null,"\u5206\u914D\u4E00\u4E2A\u6587\u4EF6\u7CFB\u7EDF\uFF0C\u5E76\u5728\u53EA\u8BFB\u7684\u955C\u50CF\u5C42\u5916\u9762\u6302\u8F7D\u4E00\u5C42\u53EF\u8BFB\u5199\u5C42\uFF1B"),s("li",null,"\u4ECE\u5BBF\u4E3B\u4E3B\u673A\u914D\u7F6E\u7684\u7F51\u6865\u63A5\u53E3\u4E2D\u6865\u63A5\u4E00\u4E2A\u865A\u62DF\u63A5\u53E3\u5230\u5BB9\u5668\u4E2D\u53BB\uFF1B"),s("li",null,"\u4ECE\u5730\u5740\u6C60\u914D\u7F6E\u4E00\u4E2Aip\u5730\u5740\u7ED9\u5BB9\u5668\uFF1B"),s("li",null,"\u6267\u884C\u7528\u6237\u6307\u5B9A\u7684\u5E94\u7528\u7A0B\u5E8F\uFF1B"),s("li",null,"\u6267\u884C\u5B8C\u6BD5\u540E\u5BB9\u5668\u88AB\u7EC8\u6B62\u3002")],-1),k6=s("p",null,"\u8BA9\u6211\u4EEC\u8F93\u5165exit\u6765\u9000\u51FA\u8FD9\u4E2A\u5BB9\u5668\uFF0C\u9000\u51FA\u540E\uFF0C\u5BB9\u5668\u4F1A\u81EA\u52A8\u7EC8\u6B62\u8FD0\u884C\u3002\u4E3A\u4EC0\u4E48\u5462\uFF1F\u8BF7\u53C2\u8003\u6211\u4EEC\u7B2C\u4E00\u4E2A\u7591\u60D1\uFF0CDocker\u5BB9\u5668\u5728\u524D\u53F0\u8FD0\u884C\u4E00\u4E2A\u5355\u4EFB\u52A1\uFF0C\u4EFB\u52A1\u7ED3\u675F\uFF0C\u5BB9\u5668\u5C31\u7EC8\u6B62\u3002\u8FD9\u5C31\u662FDocker\u5BB9\u5668\u7684\u7279\u6027\uFF01\u540C\u65F6\u4F60\u6709\u6CA1\u6709\u6CE8\u610F\u5230\u4E00\u4E2A\u5C0F\u7EC6\u8282\uFF0C\u9ED8\u8BA4docker\u5BB9\u5668\u7684\u4E3B\u673A\u540D\u5C31\u662FCONTAINER ID\u3002",-1),v6=s("p",null,[s("strong",null,"\u8BA9\u5BB9\u5668\u5BB9\u5668\u540E\u53F0\u8FD0\u884C")],-1),x6=s("p",null,"\u5728\u4F7F\u7528docker run\u8FD0\u884C\u5BB9\u5668\u66F4\u591A\u65F6\u5019\uFF0C\u6211\u4EEC\u662F\u9700\u8981\u5BB9\u5668\u5728\u540E\u53F0\u8FD0\u884C\u7684\uFF0C\u4E5F\u5C31\u662F\u4EE5\u5B88\u62A4\u6001\u5F62\u5F0F\u8FD0\u884C\u3002\u53EF\u4EE5\u901A\u8FC7-d\u53C2\u6570\u6765\u5B9E\u73B0\u3002",-1),f6=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# docker run -d --name mydocker2 centos /bin/bash")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"38e42accfa2226bb6c7da2e28e12dc95f6b6d6717326442131887a24bb321cdd")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),S6=s("p",null,"\u5BB9\u5668\u542F\u52A8\u540E\u5C31\u4F1A\u5728\u540E\u53F0\u8FD0\u884C\uFF0C\u7136\u540E\u8FD4\u56DE\u4E00\u4E2A\u5BB9\u5668ID\u5230\u63A7\u5236\u53F0\uFF0C\u800C\u4E14\u4E0A\u9762\u8FD9\u4E2A\u5BB9\u5668\u4E5F\u7EC8\u6B62\u4E86\uFF0C\u5E26\u7740\u95EE\u9898\u7EE7\u7EED\u524D\u8FDB\u3002",-1),E6=s("h3",{id:"\u7EC8\u6B62\u5BB9\u5668",tabindex:"-1"},[n("\u7EC8\u6B62\u5BB9\u5668 "),s("a",{class:"header-anchor",href:"#\u7EC8\u6B62\u5BB9\u5668","aria-hidden":"true"},"#")],-1),P6=s("p",null,"\u5728\u524D\u9762\u7684\u8F93\u51FAHello World\u7684\u64CD\u4F5C\u4E2D\u6211\u4EEC\u770B\u5230\u4E86\uFF0C\u5F53Docker\u5BB9\u5668\u4E2D\u6307\u5B9A\u7684\u5E94\u7528\u7A0B\u5E8F\u8FD0\u884C\u5B8C\u6BD5\uFF0C\u5BB9\u5668\u4E5F\u5C31\u81EA\u52A8\u7EC8\u6B62\u4E86\u3002\u540C\u65F6\u6211\u4EEC\u53EF\u4EE5\u4F7F\u7528exit\u547D\u4EE4\u9000\u51FA\u8FD0\u884C/bin/bash\u7684\u7EC8\u7AEF\uFF0C\u540C\u65F6\u6211\u4EEC\u4E5F\u53EF\u4EE5\u4F7F\u7528Ctrl+d\u6765\u5B9E\u73B0\u540C\u6837\u7684\u6548\u679C\u3002",-1),N6=s("p",null,"\u4F7F\u7528docker stop\u6765\u505C\u6B62\u4E00\u4E2A\u5BB9\u5668\uFF0C\u9ED8\u8BA4\u662F\u5148\u7ED9\u5BB9\u5668\u53D1\u9001SIGTERM\u4FE1\u53F7\uFF0C\u7136\u540E10\u79D2\u540E\u53D1\u751FSIGKILL\u4FE1\u53F7\u7EC8\u6B62\u5BB9\u5668\uFF0C\u53EF\u4EE5\u4F7F\u7528-t\u6216\u8005\u2014time\u6765\u8BBE\u7F6E\u7B49\u5F85\u7684\u65F6\u95F4\uFF0C\u5355\u4F4D\u662F\u79D2",-1),R6=s("p",null,"docker stop \u5BB9\u5668\u540D\u79F0\u3001\u5BB9\u5668ID",-1),T6=s("p",null,"\u5BF9\u4E8E\u7EC8\u6B62\u7684\u5BB9\u5668\uFF0C\u53EF\u4EE5\u4F7F\u7528docker start\u6765\u542F\u52A8\uFF0C\u6216\u8005\u4F7F\u7528docker restart\u6765\u91CD\u542F\u3002",-1),I6=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@bc419cd0b8fa /]# exit")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Exit")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),O6=s("p",null,"\u53EF\u4EE5\u4F7F\u7528docker ps \u2013a\u6765\u67E5\u770B\u5BB9\u5668\u7684\u72B6\u6001\uFF0C\u53D1\u73B0\u5DF2\u7ECF\u662F\u505C\u6B62\u6A21\u5F0F\u3002",-1),M6=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# docker ps -a")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'38e42accfa22 centos "/bin/bash" 17 seconds ago Exited (0) 16 seconds ago')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"mydocker2")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'a5ef57e8783f centos "/bin/bash" 3 minutes ago Exited (0) About a minute ago')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"mydocker")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},`d132d6e645ad centos "/bin/echo 'Hello wo\u2026" 3 minutes ago Exited (0) 3 minutes`)]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"ago serene_dijkstra")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),w6=s("p",null,[s("strong",null,"\u542F\u52A8\u5DF2\u7EC8\u6B62\u5BB9\u5668")],-1),K6=s("p",null,"\u53EF\u4EE5\u4F7F\u7528docker start\u6765\u5F00\u542F\u5DF2\u7ECF\u7EC8\u6B62\u7684\u5BB9\u5668\uFF0C\u53EF\u4EE5\u901A\u8FC7\u8F93\u5165\u5BB9\u5668\u7684CONTAINER ID\uFF0C\u6216\u8005NAMES\u6765\u8FDB\u884C\u542F\u52A8\u3002",-1),L6=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# docker start mydocker")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"mydocker")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),U6=s("p",null,"\u597D\u7684\uFF0C\u6211\u4EEC\u53C8\u4E00\u6B21\u542F\u52A8\u4E86\u8FD0\u884C/bin/bash\u7684\u5BB9\u5668\uFF0C\u90A3\u4E48\u95EE\u9898\u6765\u4E86\uFF0C\u6211\u4EEC\u600E\u4E48\u8FDB\u53BB\u5462\u3002",-1),j6=s("h3",{id:"\u8FDB\u5165\u5BB9\u5668",tabindex:"-1"},[n("\u8FDB\u5165\u5BB9\u5668 "),s("a",{class:"header-anchor",href:"#\u8FDB\u5165\u5BB9\u5668","aria-hidden":"true"},"#")],-1),G6=s("p",null,[s("strong",null,"Docker attach")],-1),H6=s("p",null,"Docker\u63D0\u4F9B\u4E86docker attach\u7684\u547D\u4EE4\uFF0C\u7528\u6765\u8BA9\u6211\u4EEC\u8FDB\u5165\u5DF2\u7ECF\u542F\u52A8\u7684\u5BB9\u5668\uFF08\u5982\u679C\u5BB9\u5668\u5DF2\u7ECF\u7EC8\u6B62\uFF0C\u4F60\u9700\u8981\u4F7F\u7528docker start\u5C06\u5B83\u542F\u52A8\u3002",-1),F6=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# docker attach mydocker")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@a5ef57e8783f /]#")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),V6=s("p",null,"\u4F60\u53EF\u4EE5\u7EE7\u7EED\u6267\u884C\u4E00\u4E9B\u547D\u4EE4\uFF0C\u6CA1\u9519\uFF0C\u5F88\u591A\u547D\u4EE4\u90FD\u6CA1\u6709\u3002",-1),B6=s("p",null,"\u6CE8\u610F\uFF0C\u5728\u6211\u4EEC\u4F7F\u7528 attach \u8FDB\u5165\u5BB9\u5668\u7684\u65F6\u5019\uFF0C\u5982\u679C\u540C\u65F6\u6709\u591A\u4E2A\u7A97\u53E3 attach \u5230\u540C\u4E00\u4E2A\u5BB9\u5668\u7684\u65F6\u5019\uFF0C\u6240\u6709\u7A97\u53E3\u90FD\u4F1A\u540C\u6B65\u663E\u793A\u3002\u5F53\u67D0\u4E2A\u7A97\u53E3\u56E0\u547D\u4EE4\u963B\u585E\u65F6,\u5176\u4ED6\u7A97\u53E3\u4E5F\u65E0\u6CD5\u6267\u884C\u64CD\u4F5C\u4E86\u3002\u8FD9\u53EF\u600E\u4E48\u529E\uFF0C\u5982\u679C\u6211\u4EEC\u662F\u56E2\u961F\u4F5C\u6218\uFF0C\u53EF\u80FD\u591A\u4E2A\u540C\u4E8B\u9700\u8981\u540C\u65F6\u8FDB\u5165\u5BB9\u5668\u64CD\u4F5C\u5462?\u8FD8\u6709\u4E00\u4E2A\u6700\u5173\u952E\u7684\u95EE\u9898\u3002\u4F60\u8F93\u5165exit\u4EE5\u540E\u5462\uFF1F\u4E4B\u524D\u8FD0\u884C\u7684\u5BB9\u5668\u9000\u51FA\u4E86\u3002",-1),q6=s("p",null,[s("strong",null,"nsenter\u8FDB\u5165\u5BB9\u5668")],-1),Y6=s("p",null,"nsenter\u547D\u4EE4\u88AB\u5305\u542B\u5728util-linux\u8F6F\u4EF6\u5305\u91CC\u9762\uFF0C\u4F7F\u7528nsenter\u53EF\u4EE5\u8BBF\u95EE\u53E6\u4E00\u4E2A\u8FDB\u7A0B\u7684\u540D\u5B57\u7A7A\u95F4,\u5927\u591A\u6570Linux\u53D1\u884C\u7248\u9ED8\u8BA4\u5305\u542B\u4E86\u8BE5\u8F6F\u4EF6\uFF0CCentOS\u9ED8\u8BA4\u662F\u6709\u7684\u3002\u5982\u679C\u4F60\u7684\u7CFB\u7EDF\u91CC\u9762\u6CA1\u6709\u53EF\u4EE5\u4F7F\u7528\u4EE5\u4E0B\u547D\u4EE4\u8FDB\u884C\u5B89\u88C5\uFF1A",-1),z6=s("blockquote",null,[s("p",null,[s("strong",null,"Yum\u5B89\u88C5\uFF1A")])],-1),$6=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@docker ~]# yum install -y util-linux")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),X6=s("p",null,"\u4E3A\u4E86\u8FDE\u63A5\u5230\u5BB9\u5668\uFF0C\u4F60\u8FD8\u9700\u8981\u627E\u5230\u5BB9\u5668\u7684\u7B2C\u4E00\u4E2A\u8FDB\u7A0B\u7684 PID\uFF0C\u53EF\u4EE5\u901A\u8FC7\u4E0B\u9762\u7684\u547D\u4EE4\u83B7\u53D6\u3002",-1),J6=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'# docker inspect --format "{{ .State.Pid }}" <container ID or NAMES>')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),W6=s("p",null,"\u901A\u8FC7\u8FD9\u4E2A PID\uFF0C\u5C31\u53EF\u4EE5\u8FDE\u63A5\u5230\u8FD9\u4E2A\u5BB9\u5668\uFF1A",-1),Q6=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# nsenter --target $PID --mount --uts --ipc --net \u2013pid")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Z6=s("p",null,"\u5982\u679C\u4F60\u521A\u624D\u505C\u6B62\u4E86\u5BB9\u5668\uFF0C\u8BF7\u542F\u52A8\u3002",-1),sh=s("p",null,"\u8FDE\u63A5\u65B9\u5F0F\u5982\u4E0B\uFF1A",-1),nh=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'[root@linux-node1 ~]# PID=$(docker inspect --format "{{ .State.Pid }}"')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"mydocker)")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# echo $PID")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"8029")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),lh=s("p",null,"\u6CE8\u610F\u5982\u679C\u4F60\u7684PID\u53D8\u91CF\u4E3A0\uFF0C\u8BF4\u660Emydocker\u5BB9\u5668\u6CA1\u6709\u542F\u52A8\u3002",-1),eh=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# nsenter --target $PID --mount --uts --ipc --net --pid")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@a5ef57e8783f /]# ps -ef")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"UID PID PPID C STIME TTY TIME CMD")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"root 1 0 0 21:11 pts/0 00:00:00 /bin/bash")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"root 14 0 0 21:12 pts/0 00:00:00 -bash")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"root 27 14 0 21:12 pts/0 00:00:00 ps -ef")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),oh=s("p",null,[s("strong",null,"\u7F16\u5199\u4E00\u4E2A\u811A\u672C\u7528\u6237\u8FDB\u5165\u5BB9\u5668")],-1),ah=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# vim docker_in.sh")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#!/bin/bash")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# Use nsenter to access docker")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"docker_in(){")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"NAME_ID=$1")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'PID=$(docker inspect --format "{{ .State.Pid }}" $NAME_ID)')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"nsenter --target $PID --mount --uts --ipc --net --pid")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"}")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"docker_in $1")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# chmod +x docker_in.sh")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),th=s("p",null,"\u8FD9\u4E48\u540E\u9762\u7684\u5185\u5BB9\uFF0C\u6211\u4EEC\u5C31\u76F4\u63A5\u4F7F\u7528docker_in.sh\u8FD9\u4E2A\u811A\u672C\u6765\u8FDB\u5165Docker\u5BB9\u5668\uFF0C\u53EA\u8981\u4F20\u7ED9\u5B83\u540D\u79F0\u6216\u8005\u5BB9\u5668ID\u5373\u53EF\uFF0C\u5C31\u50CF\u4E0B\u9762\u8FD9\u6837\uFF1A",-1),ch=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# ./docker_in.sh mydocker")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),ih=s("h3",{id:"\u4E0D\u8FDB\u5165\u5BB9\u5668\u6267\u884C\u547D\u4EE4",tabindex:"-1"},[n("\u4E0D\u8FDB\u5165\u5BB9\u5668\u6267\u884C\u547D\u4EE4 "),s("a",{class:"header-anchor",href:"#\u4E0D\u8FDB\u5165\u5BB9\u5668\u6267\u884C\u547D\u4EE4","aria-hidden":"true"},"#")],-1),rh=s("p",null,"\u6216\u8BB8\u4F60\u7684\u672C\u610F\u4E0D\u662F\u60F3\u8FDB\u53BB\u5BB9\u5668\uFF0C\u800C\u662F\u60F3\u8BA9\u5BB9\u5668\u6267\u884C\u4E00\u4E2A\u547D\u4EE4\uFF0Cdocker\u63D0\u4F9B\u4E86exec\uFF0C\u4F7F\u7528exec\u53EF\u4EE5\u5728\u5BB9\u5668\u5185\u8FD0\u884C\u547D\u4EE4\u3002",-1),ph=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# docker exec mydocker whoami")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"root")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),dh=s("p",null,"\u4F7F\u7528exec\u8FDB\u5165\u5BB9\u5668",-1),Ah=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# docker exec -it mydocker /bin/bash")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Ch=s("p",null,"\u6CE8\u610F\uFF0C\u73B0\u5728\u4F60\u8FDB\u5165\u5BB9\u5668\u548C\u5176\u5B83\u65B9\u6CD5\u90FD\u662F\u4E0D\u4E00\u6837\u7684\uFF0C\u5176\u5B9E\u662F\u4F60\u6267\u884C\u4E86\u4E00\u4E2A/bin/bash\u7684\u547D\u4EE4\uFF0C\u6240\u4EE5\u4F60\u73B0\u5728\u62E5\u6709\u4E86\u4E00\u4E2Ashell\uFF0C\u4F60\u73B0\u5728\u6240\u5728\u7684shell\u5E94\u8BE5\u662F\u4E0B\u56FE\u4E2DPID\u4E3A33\u7684\u8FDB\u7A0B\u3002",-1),uh=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@1b0cae722fa0 /]# ps -ef")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"UID PID PPID C STIME TTY TIME CMD")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"root 1 0 0 15:37 ? 00:00:00 /bin/bash")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"root 33 0 0 15:41 ? 00:00:00 /bin/bash")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"root 46 33 0 15:41 ? 00:00:00 ps -ef")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),yh=s("p",null,"\u6216\u8BB8\u4F60\u4E5F\u53D1\u73B0\u4F7F\u7528docker exec\u3001nsenter\u8FDB\u5165\u5BB9\u5668\u540E\uFF0C\u6267\u884Cexit\u9000\u51FA\u5BB9\u5668\uFF0C\u5BB9\u5668\u5E76\u4E0D\u4F1A\u5173\u95ED\u3002\u4F46\u662F\u4F7F\u7528docker attach\u8FDB\u5165\u5BB9\u5668\uFF0C\u8F93\u5165exit\u9000\u51FA\u5BB9\u5668\u540E\uFF0C\u5BB9\u5668\u4E5F\u4F1A\u81EA\u52A8\u7EC8\u6B62\u3002\u4F60\u53EF\u4EE5\u60F3\u60F3\u4E3A\u4EC0\u4E48\u3002\u56E0\u4E3A\u9664\u4E86attach\uFF0Cnsenter\u548Cexec\u5B9E\u9645\u4E2D\u90FD\u662F\u5F00\u4E86\u4E00\u4E2A\u65B0\u7684shell\u5728\u6267\u884C\u3002\u800Cattach\u662F\u4F7F\u7528\u5BB9\u5668\u672C\u8EAB\u542F\u52A8\u7684/bin/bash\uFF0C\u8FD9\u4E2Ashell\u73AF\u5883\u9000\u51FA\u4E86\u3002\u90A3\u4E48\u5BB9\u5668\u5C31\u81EA\u52A8\u9000\u51FA\u4E86\u3002\u6240\u4EE5Docker\u7684\u9B54\u5492\u6765\u4E86\uFF1Adocker\u5BB9\u5668\u53EA\u80FD\u800C\u4E14\u5FC5\u987B\u5728\u524D\u53F0\u8FD0\u884C\u4E00\u4E2A\u8FDB\u7A0B\uFF0C\u5982\u679C\u8FDB\u7A0B\u9000\u51FA\uFF0C\u5BB9\u5668\u5C31\u5173\u95ED\u3002\u5F53\u7136\u5982\u679C\u4F60\u60F3\u5728Docker\u5BB9\u5668\u4E2D\u542F\u52A8\u591A\u8FDB\u7A0B\u4E5F\u662F\u6709\u529E\u6CD5\u7684\uFF0C\u6211\u4EEC\u540E\u9762\u4F1A\u8BB2\u5230\u3002",-1),hh=s("h3",{id:"\u5220\u9664\u5BB9\u5668",tabindex:"-1"},[n("\u5220\u9664\u5BB9\u5668 "),s("a",{class:"header-anchor",href:"#\u5220\u9664\u5BB9\u5668","aria-hidden":"true"},"#")],-1),_h=s("p",null,"\u53EF\u4EE5\u4F7F\u7528 docker rm \u6765\u5220\u9664\u4E00\u4E2A\u5904\u4E8E\u7EC8\u6B62\u72B6\u6001\u7684\u5BB9\u5668\u3002 \u4F8B\u5982",-1),Dh=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@docker ~]# docker rm mydocker")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),gh=s("p",null,"\u5982\u679C\u8981\u5220\u9664\u4E00\u4E2A\u8FD0\u884C\u4E2D\u7684\u5BB9\u5668\uFF0C\u53EF\u4EE5\u6DFB\u52A0-f\u53C2\u6570\u3002Docker\u4F1A\u53D1\u9001 SIGKILL\u4FE1\u53F7\u7ED9\u5BB9\u5668\u3002",-1),mh=s("h3",{id:"\u5B66\u4E60\u4E2D\u7684\u5C0F\u6280\u5DE7",tabindex:"-1"},[n("\u5B66\u4E60\u4E2D\u7684\u5C0F\u6280\u5DE7 "),s("a",{class:"header-anchor",href:"#\u5B66\u4E60\u4E2D\u7684\u5C0F\u6280\u5DE7","aria-hidden":"true"},"#")],-1),bh=s("p",null,"\u5982\u679C\u4F60\u5728\u5B66\u4E60\u548C\u6D4B\u8BD5\u7684\u8FC7\u7A0B\u4E2D\uFF0C\u7ECF\u5E38\u56E0\u4E3A\u542F\u52A8\u975E\u5E38\u591A\u7684\u5BB9\u6613\u60F3\u5220\u9664\u4E5F\u5F88\u96BE\uFF0C\u4E0B\u9762\u5217\u4E3E\u4E86\u51E0\u4E2A\u5C0F\u6280\u5DE7\uFF0C\u53EF\u4EE5\u5FEB\u901F\u7684\u5E2E\u6211\u4EEC\u8FDB\u884C\u5BB9\u5668\u7684\u6E05\u7406\u3002",-1),kh=s("h4",{id:"\u5BB9\u5668\u505C\u6B62\u540E\u5C31\u81EA\u52A8\u5220\u9664\uFF1A",tabindex:"-1"},[n("\u5BB9\u5668\u505C\u6B62\u540E\u5C31\u81EA\u52A8\u5220\u9664\uFF1A "),s("a",{class:"header-anchor",href:"#\u5BB9\u5668\u505C\u6B62\u540E\u5C31\u81EA\u52A8\u5220\u9664\uFF1A","aria-hidden":"true"},"#")],-1),vh=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'docker run --rm centos /bin/echo "One"')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),xh=s("h4",{id:"\u6740\u6B7B\u6240\u6709\u6B63\u5728\u8FD0\u884C\u7684\u5BB9\u5668\uFF1A",tabindex:"-1"},[n("\u6740\u6B7B\u6240\u6709\u6B63\u5728\u8FD0\u884C\u7684\u5BB9\u5668\uFF1A "),s("a",{class:"header-anchor",href:"#\u6740\u6B7B\u6240\u6709\u6B63\u5728\u8FD0\u884C\u7684\u5BB9\u5668\uFF1A","aria-hidden":"true"},"#")],-1),fh=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"docker kill $(docker ps -a -q)")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Sh=s("h4",{id:"\u5220\u9664\u6240\u6709\u5DF2\u7ECF\u505C\u6B62\u7684\u5BB9\u5668\uFF1A",tabindex:"-1"},[n("\u5220\u9664\u6240\u6709\u5DF2\u7ECF\u505C\u6B62\u7684\u5BB9\u5668\uFF1A "),s("a",{class:"header-anchor",href:"#\u5220\u9664\u6240\u6709\u5DF2\u7ECF\u505C\u6B62\u7684\u5BB9\u5668\uFF1A","aria-hidden":"true"},"#")],-1),Eh=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"docker rm $(docker ps -a -q)")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Ph=s("h4",{id:"\u5220\u9664\u6240\u6709\u672A\u6253-dangling-\u6807\u7B7E\u7684\u955C\u50CF",tabindex:"-1"},[n("\u5220\u9664\u6240\u6709\u672A\u6253 dangling \u6807\u7B7E\u7684\u955C\u50CF "),s("a",{class:"header-anchor",href:"#\u5220\u9664\u6240\u6709\u672A\u6253-dangling-\u6807\u7B7E\u7684\u955C\u50CF","aria-hidden":"true"},"#")],-1),Nh=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"docker rmi $(docker images -q -f dangling=true)")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Rh=s("h4",{id:"\u5220\u9664\u6240\u6709\u955C\u50CF",tabindex:"-1"},[n("\u5220\u9664\u6240\u6709\u955C\u50CF "),s("a",{class:"header-anchor",href:"#\u5220\u9664\u6240\u6709\u955C\u50CF","aria-hidden":"true"},"#")],-1),Th=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"docker rmi $(docker images -q)")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Ih=s("p",null,"\u5982\u679C\u4F60\u89C9\u5F97\u540D\u79F0\u5F88\u957F\uFF0C\u4E0D\u5BB9\u6613\u8BB0\uFF0C\u8FD8\u53EF\u4EE5\u4E3A\u8FD9\u4E9B\u547D\u4EE4\u521B\u5EFA\u522B\u540D\u3002",-1),Oh=s("h4",{id:"\u6740\u6B7B\u6240\u6709\u6B63\u5728\u8FD0\u884C\u7684\u5BB9\u5668",tabindex:"-1"},[n("\u6740\u6B7B\u6240\u6709\u6B63\u5728\u8FD0\u884C\u7684\u5BB9\u5668. "),s("a",{class:"header-anchor",href:"#\u6740\u6B7B\u6240\u6709\u6B63\u5728\u8FD0\u884C\u7684\u5BB9\u5668","aria-hidden":"true"},"#")],-1),Mh=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"alias dockerkill='docker kill $(docker ps -a -q)'")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),wh=s("h4",{id:"\u5220\u9664\u6240\u6709\u5DF2\u7ECF\u505C\u6B62\u7684\u5BB9\u5668",tabindex:"-1"},[n("\u5220\u9664\u6240\u6709\u5DF2\u7ECF\u505C\u6B62\u7684\u5BB9\u5668. "),s("a",{class:"header-anchor",href:"#\u5220\u9664\u6240\u6709\u5DF2\u7ECF\u505C\u6B62\u7684\u5BB9\u5668","aria-hidden":"true"},"#")],-1),Kh=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"alias dockerclean='docker rm $(docker ps -a -q)'")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Lh=s("h4",{id:"\u5220\u9664\u6240\u6709\u672A\u6253\u6807\u7B7E\u7684\u955C\u50CF",tabindex:"-1"},[n("\u5220\u9664\u6240\u6709\u672A\u6253\u6807\u7B7E\u7684\u955C\u50CF. "),s("a",{class:"header-anchor",href:"#\u5220\u9664\u6240\u6709\u672A\u6253\u6807\u7B7E\u7684\u955C\u50CF","aria-hidden":"true"},"#")],-1),Uh=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"alias dockercleani='docker rmi $(docker images -q -f dangling=true)'")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),jh=s("h4",{id:"\u5220\u9664\u6240\u6709\u5DF2\u7ECF\u505C\u6B62\u7684\u5BB9\u5668\u548C\u672A\u6253\u6807\u7B7E\u7684\u955C\u50CF",tabindex:"-1"},[n("\u5220\u9664\u6240\u6709\u5DF2\u7ECF\u505C\u6B62\u7684\u5BB9\u5668\u548C\u672A\u6253\u6807\u7B7E\u7684\u955C\u50CF. "),s("a",{class:"header-anchor",href:"#\u5220\u9664\u6240\u6709\u5DF2\u7ECF\u505C\u6B62\u7684\u5BB9\u5668\u548C\u672A\u6253\u6807\u7B7E\u7684\u955C\u50CF","aria-hidden":"true"},"#")],-1),Gh=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"alias dockerclean='dockercleanc || true && dockercleani'")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Hh=s("blockquote",null,[s("p",null,"\u6CE8\u610F\uFF1A\u751F\u4EA7\u73AF\u5883\u4E00\u5B9A\u8981\u614E\u7528\uFF01\uFF01\uFF01")],-1),Fh=s("h2",{id:"docker\u7F51\u7EDC\u8BBF\u95EE",tabindex:"-1"},[n("Docker\u7F51\u7EDC\u8BBF\u95EE "),s("a",{class:"header-anchor",href:"#docker\u7F51\u7EDC\u8BBF\u95EE","aria-hidden":"true"},"#")],-1),Vh=s("p",null,"\u73B0\u5728\u6211\u4EEC\u5DF2\u7ECF\u53EF\u4EE5\u719F\u7EC3\u7684\u4F7F\u7528docker\u547D\u4EE4\u64CD\u4F5C\u955C\u50CF\u548C\u5BB9\u5668\uFF0C\u5E76\u5B66\u4F1A\u4E86\u5982\u4F55\u8FDB\u5165\u5230\u5BB9\u5668\u4E2D\u53BB\uFF0C\u90A3\u4E48\u5B9E\u9645\u7684\u5DE5\u4F5C\u4E2D\uFF0C\u6211\u4EEC\u901A\u5E38\u662F\u5728Docker\u4E2D\u90E8\u7F72\u670D\u52A1\uFF0C\u6211\u4EEC\u9700\u8981\u5728\u5916\u90E8\u901A\u8FC7IP\u548C\u7AEF\u53E3\u8FDB\u884C\u8BBF\u95EE\u7684\uFF0C\u90A3\u4E48\u5982\u4F55\u8BBF\u95EE\u5230Docker\u7684\u5185\u90E8\u670D\u52A1\u5462\uFF1F",-1),Bh=s("p",null,"\u5728\u540E\u9762\u6211\u4EEC\u4F1A\u6709\u4E13\u95E8\u7684\u7AE0\u8282\u6765\u8BB2\u89E3Docker\u7684\u7F51\u7EDC\u914D\u7F6E\uFF0C\u8FD9\u91CC\u6211\u4EEC\u5148\u5B66\u4E60\u4E00\u4E2A\u6BD4\u8F83\u7B80\u5355\u7684\u901A\u8FC7\u7F51\u7EDC\u8BBF\u95EE\u5BB9\u5668\u7684\u65B9\u6CD5\uFF0C\u5C31\u662F\u7AEF\u53E3\u6620\u5C04\u3002",-1),qh=s("p",null,"\u5BB9\u5668\u4E2D\u53EF\u4EE5\u8FD0\u884C\u4E00\u4E9B\u7F51\u7EDC\u5E94\u7528\uFF0C\u8981\u8BA9\u5916\u90E8\u4E5F\u53EF\u4EE5\u8BBF\u95EE\u8FD9\u4E9B\u5E94\u7528\uFF0C\u53EF\u4EE5\u901A\u8FC7 -P \u6216 -p \u53C2\u6570\u6765\u6307\u5B9A\u7AEF\u53E3\u6620\u5C04\u3002",-1),Yh=s("h3",{id:"\u968F\u673A\u6620\u5C04",tabindex:"-1"},[n("\u968F\u673A\u6620\u5C04 "),s("a",{class:"header-anchor",href:"#\u968F\u673A\u6620\u5C04","aria-hidden":"true"},"#")],-1),zh=s("p",null,"\u5F53\u4F7F\u7528 -P \u6807\u8BB0\u65F6\uFF0CDocker \u4F1A\u968F\u673A\u6620\u5C04\u4E00\u4E2A 49000~49900 \u7684\u7AEF\u53E3\u5230\u5185\u90E8\u5BB9\u5668\u5F00\u653E\u7684\u7F51\u7EDC\u7AEF\u53E3\u3002",-1),$h=s("p",null,"\u4E0B\u9762\u6211\u4EEC\u4EE5\u4E00\u4E2Anginx\u7684\u5BB9\u5668\u4E3A\u4F8B\u5B50\u6765\u6D4B\u8BD5\u4E00\u4E0B-P\u7684\u529F\u80FD\uFF0C\u5927\u5BB6\u53EF\u4EE5\u4F7F\u7528search\u641C\u7D22\u4E0Bnginx\u955C\u50CF\uFF0C\u6211\u4EEC\u4F7F\u7528\u5B98\u65B9\u7684nginx\u955C\u50CF\u6765\u542F\u52A8\u4E00\u4E2A\u5BB9\u5668\u3002",-1),Xh=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# docker search nginx")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Jh=s("p",null,"\u8FD9\u6B21\u6211\u4EEC\u4E0D\u6267\u884Cdocker pull\u3002\u76F4\u63A5\u6765\u542F\u52A8\u5BB9\u5668\uFF0C\u4F60\u4F1A\u53D1\u73B0docker\u4F1A\u5148\u67E5\u627E\u4F60\u672C\u5730\u662F\u5426\u6709\u8BE5\u955C\u50CF\uFF0C\u5982\u679C\u6CA1\u6709\u5B83\u4F1A\u81EA\u52A8\u4E0B\u8F7D\u540E\uFF0C\u7136\u540E\u542F\u52A8\u5BB9\u5668\u3002",-1),Wh=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# docker run -d -P nginx")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Unable to find image 'nginx:latest' locally")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"latest: Pulling from library/nginx")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"6ae821421a7d: Pull complete")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"da4474e5966c: Pull complete")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"eb2aec2b9c9f: Pull complete")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Digest: sha256:dd2d0ac3fff2f007d99e033b64854be0941e19a2ad51f174d9240dda20d9f534")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Status: Downloaded newer image for nginx:latest")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"ecf14adb9dec09555ae31673753093e03941c41d917669dd1f254b51fdec7b51")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Qh=s("p",null,"\u6211\u4EEC\u53C8\u5B66\u4E60\u4E86\u4E00\u4E2A\u65B0\u7684\u53C2\u6570-d\u53EF\u4EE5\u8BA9\u5BB9\u5668\u76F4\u63A5\u5728\u540E\u53F0\u8FD0\u884C",-1),Zh=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# docker ps -l")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},`6819734a680c nginx "nginx -g 'daemon off" About an hour ago Up About an hour`)]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"0.0.0.0:32769->80/tcp, 0.0.0.0:32768->443/tcp hungry_mayer")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),s_=s("p",null,"\u53EF\u4EE5\u770B\u5230\uFF0C\u968F\u673A\u6620\u5C04\u4E86\u4E00\u4E2A32769\u7AEF\u53E3\u5230\u5BB9\u5668\u768480\u7AEF\u53E3\u3002\u4E0B\u9762\u5C31\u53EF\u4EE5\u76F4\u63A5\u8BBF\u95EE\u4E86\u3002",-1),n_=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# curl --head http://192.168.56.11:32769/")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"HTTP/1.1 200 OK")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Server: nginx/1.11.3")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Date: Fri, 02 Sep 2016 17:44:14 GMT")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Content-Type: text/html")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Content-Length: 612")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Last-Modified: Tue, 26 Jul 2016 14:54:48 GMT")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Connection: keep-alive")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'ETag: "579779b8-264"')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Accept-Ranges: bytes")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),l_=s("p",null,"\u540C\u6837\u7684\uFF0C\u53EF\u4EE5\u901A\u8FC7 docker logs \u547D\u4EE4\u6765\u67E5\u770B\u5E94\u7528\u7684\u65E5\u5FD7\u4FE1\u606F\u3002",-1),e_=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# docker logs hungry_mayer")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'192.168.56.11 - - [02/Sep/2016:17:44:01 +0000] "HEAD / HTTP/1.1" 200 0 "-"')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'"curl/7.29.0" "-"')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'192.168.56.11 - - [02/Sep/2016:17:44:06 +0000] "GET / HTTP/1.1" 200 612 "-"')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'"curl/7.29.0" "-"')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'192.168.56.11 - - [02/Sep/2016:17:44:14 +0000] "HEAD / HTTP/1.1" 200 0 "-"')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'"curl/7.29.0" "-"')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),o_=s("p",null,"\u662F\u4E0D\u662F\u8001\u4F7F\u7528\u968F\u673A\u7684\u540D\u5B57\u548CID\u64CD\u4F5C\u5BB9\u5668\u5F88\u4E0D\u65B9\u9762\uFF0C\u90A3\u4E48\u4E0B\u9762\u6211\u4EEC\u518D\u521B\u5EFA\u5BB9\u5668\u7684\u65F6\u5019\uFF0C\u4E00\u5B9A\u8981\u7ED9\u5B83\u5B9A\u4E49\u4E00\u4E2A\u53EF\u8BFB\u7684\u540D\u5B57\u3002",-1),a_=s("h3",{id:"\u6307\u5B9A\u7AEF\u53E3\u6620\u5C04",tabindex:"-1"},[n("\u6307\u5B9A\u7AEF\u53E3\u6620\u5C04 "),s("a",{class:"header-anchor",href:"#\u6307\u5B9A\u7AEF\u53E3\u6620\u5C04","aria-hidden":"true"},"#")],-1),t_=s("p",null,"-p\uFF08\u5C0F\u5199\u7684\uFF09\u5219\u53EF\u4EE5\u6307\u5B9A\u8981\u6620\u5C04\u7684\u7AEF\u53E3\uFF0C\u5E76\u4E14\uFF0C\u5728\u4E00\u4E2A\u6307\u5B9A\u7AEF\u53E3\u4E0A\u53EA\u53EF\u4EE5\u7ED1\u5B9A\u4E00\u4E2A\u5BB9\u5668\u3002\u652F\u6301\u7684\u683C\u5F0F\u6709\u4EE5\u4E0B\u4E09\u79CD\uFF1A",-1),c_=s("ul",null,[s("li",null,"hostPort:containerPort\u3002"),s("li",null,"ip:hostPort:containerPort"),s("li",null,"ip::containerPort")],-1),i_=s("p",null,[s("strong",null,"\u6620\u5C04\u6240\u6709IP\u5730\u5740\u7684\u6307\u5B9A\u7AEF\u53E3")],-1),r_=s("p",null,"\u4F7F\u7528 hostPort:containerPort\uFF0C\u5C06\u672C\u5730\u7684 80 \u7AEF\u53E3\u6620\u5C04\u5230Nginx\u5BB9\u5668\u7684 80 \u7AEF\u53E3",-1),p_=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# docker run -d -p 80:80 --name nginx-demo1 nginx")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),d_=s("p",null,"\u6B64\u65F6\u9ED8\u8BA4\u4F1A\u7ED1\u5B9A\u672C\u5730\u6240\u6709\u63A5\u53E3\u4E0A\u7684\u6240\u6709\u5730\u5740\u3002\u6CE8\u610F\u955C\u50CF\u540D\u79F0\u9700\u8981\u653E\u5230\u6700\u540E\u3002",-1),A_=s("p",null,[s("strong",null,"\u6620\u5C04\u5230\u6307\u5B9A\u5730\u5740\u7684\u6307\u5B9A\u7AEF\u53E3")],-1),C_=s("p",null,"\u5982\u679C\u4F60\u5BBF\u4E3B\u673A\u62E5\u6709\u591A\u4E2AIP\u5730\u5740\uFF0C\u53EF\u4EE5\u4F7F\u7528 ip:hostPort:containerPort \u683C\u5F0F\u6307\u5B9A\u6620\u5C04\u4F7F\u7528\u4E00\u4E2A\u7279\u5B9A\u5730\u5740\uFF0C\u6BD4\u5982\u5C06Nginx\u768480\u7AEF\u53E3\u7ED1\u5B9A\u5230\u672C\u5730IP\u5730\u5740\u768481\u7AEF\u53E3\u3002",-1),u_=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# docker run -d -p 192.168.56.11:81:80 --name nginx-demo2")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"nginx")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),y_=s("p",null,[s("strong",null,"\u6620\u5C04\u5230\u6307\u5B9A\u5730\u5740\u7684\u4EFB\u610F\u7AEF\u53E3")],-1),h_=s("p",null,"\u4F7F\u7528 ip::containerPort \u7ED1\u5B9ANginx80\u7AEF\u53E3\u5230\u672C\u5730192.168.56.11\u7684\u4EFB\u610F\u7AEF\u53E3\uFF0C\u672C\u5730\u4E3B\u673A\u4F1A\u81EA\u52A8\u5206\u914D\u4E00\u4E2A\u7AEF\u53E3\u3002",-1),__=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# docker run -d -p 192.168.56.11::80 --name nginx-demo3 nginx")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),D_=s("p",null,[s("strong",null,"\u4F7F\u7528 udp \u6807\u8BB0\u6765\u6307\u5B9A udp \u7AEF\u53E3")],-1),g_=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# docker run -d -p 192.168.56.11:53:53/udp \u2013name dns-udp")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),m_=s("p",null,[s("strong",null,"\u7ED1\u5B9A\u591A\u4E2A\u7AEF\u53E3")],-1),b_=s("p",null,"\u5982\u679C\u4F60\u60F3\u7ED1\u5B9ADocker\u5BB9\u5668\u91CC\u9762\u7684\u591A\u4E2A\u7AEF\u53E3\uFF0C\u53EF\u4EE5\u4F7F\u7528\u591A\u6B21\u4F7F\u7528-p \u6807\u8BB0\u3002",-1),k_=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# docker run -d -p 80:80 -p 443:443 nginx")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),v_=s("p",null,[s("strong",null,"\u67E5\u770B\u6620\u5C04\u7AEF\u53E3\u914D\u7F6E")],-1),x_=s("p",null,"\u4F7F\u7528 docker port \u6765\u67E5\u770B\u5F53\u524D\u6620\u5C04\u7684\u7AEF\u53E3\u914D\u7F6E\uFF0C\u4E5F\u53EF\u4EE5\u67E5\u770B\u5230\u7ED1\u5B9A\u7684\u5730\u5740",-1),f_=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# docker port nginx-demo1")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"80/tcp -> 0.0.0.0:80 ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),S_=s("h2",{id:"docker\u6570\u636E\u7BA1\u7406",tabindex:"-1"},[n("Docker\u6570\u636E\u7BA1\u7406 "),s("a",{class:"header-anchor",href:"#docker\u6570\u636E\u7BA1\u7406","aria-hidden":"true"},"#")],-1),E_=s("p",null,"\u4E3A\u4E86\u80FD\u591F\u5B58\u50A8\u6301\u4E45\u5316\u6570\u636E\u4EE5\u53CA\u5171\u4EAB\u5BB9\u5668\u95F4\u7684\u6570\u636E\uFF0CDocker\u63D0\u51FA\u4E86Volume\u7684\u6982\u5FF5\u3002\u8BA9\u6211\u4EEC\u901A\u8FC7\u7C7B\u4F3Cmount\u7684\u65B9\u5F0F\u5C06\u5BBF\u4E3B\u673A\u7684\u6587\u4EF6\u6216\u8005\u76EE\u5F55\u6302\u8F7D\u5230\u5BB9\u5668\u4E2D\u3002",-1),P_=s("p",null,"\u5728\u5BB9\u5668\u4E2D\u7BA1\u7406\u6570\u636E\u4E3B\u8981\u6709\u4E24\u79CD\u65B9\u5F0F\uFF1A",-1),N_=s("ul",null,[s("li",null,"\u6570\u636E\u5377\uFF08Data volumes\uFF09"),s("li",null,"\u6570\u636E\u5377\u5BB9\u5668\uFF08Data volume containers\uFF09")],-1),R_=s("h3",{id:"\u6570\u636E\u5377",tabindex:"-1"},[n("\u6570\u636E\u5377 "),s("a",{class:"header-anchor",href:"#\u6570\u636E\u5377","aria-hidden":"true"},"#")],-1),T_=s("p",null,[s("strong",null,"\u521B\u5EFA\u4E00\u4E2A\u6570\u636E\u5377")],-1),I_=s("p",null,"\u5728\u4F7F\u7528docker run\u547D\u4EE4\u7684\u65F6\u5019\uFF0C\u4F7F\u7528-v\u9009\u9879\u521B\u5EFA\u4E00\u4E2A\u6570\u636E\u5377\u5E76\u6302\u8F7D\u5230\u5BB9\u5668\u91CC\u3002",-1),O_=s("p",null,"\u4E0B\u9762\u521B\u5EFA\u4E00\u4E2A\u6D4B\u8BD5\u5BB9\u5668nginx\uFF0C\u5E76\u52A0\u8F7D\u4E00\u4E2A\u6570\u636E\u5377\u5230\u5BB9\u5668\u7684/data\u76EE\u5F55\u3002",-1),M_=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# docker run -d --name nginx-volume-test1 -v /data nginx")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),w_=s("p",null,"\u5BB9\u5668\u542F\u52A8\u540E\uFF0C\u767B\u5F55\u5230\u5BB9\u5668\u4F1A\u53D1\u73B0/data\u76EE\u5F55\u662F\u7A7A\u7684\u3002",-1),K_=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# ./docker_in.sh nginx-volume-test1")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"root@00741a2a44ad:/# ls -l /data")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"total 0")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),L_=s("p",null,"\u4E0A\u9762\u7684\u547D\u4EE4\u4F1A\u6302\u8F7D\u4E00\u4E2Adata\u76EE\u5F55\u5230\u5BB9\u5668\u4E2D\uFF0C\u5E76\u7ED5\u8FC7\u8054\u5408\u6587\u4EF6\u7CFB\u7EDF\uFF0C\u6211\u4EEC\u53EF\u4EE5\u5728\u4E3B\u673A\u4E0A\u76F4\u63A5\u64CD\u4F5C\u8BE5\u76EE\u5F55\u3002\u4EFB\u4F55\u5728\u8BE5\u955C\u50CF/data \u8DEF\u5F84\u7684\u6587\u4EF6\u4F1A\u5C06\u88AB\u590D\u5236\u5230Volume\u3002\u90A3\u4E48\u5728\u6211\u4EEC\u5BBF\u4E3B\u673A\u4E0A\uFF0C\u8FD9\u4E2A\u76EE\u5F55\u5230\u5E95\u5728\u54EA\u91CC\u5462\u3002",-1),U_=s("p",null,"\u6211\u4EEC\u53EF\u4EE5\u4F7F\u7528 docker inspect \u547D\u4EE4\u627E\u5230Volume\u5728\u4E3B\u673A\u4E0A\u7684\u5B58\u50A8\u4F4D\u7F6E\uFF1A",-1),j_=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# docker inspect -f {{.Mounts}} nginx-volume-test1")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[{861cbee5b650461490633fc60bd94a0df0f8b01e4a4dcc4adff4825dff509159")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"/var/lib/docker/volumes/861cbee5b650461490633fc60bd94a0df0f8b01e4a4dcc4adff4825dff509159/_data")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"/data local true }]")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),G_=s("p",null,"\u4F60\u4F1A\u53D1\u73B0\uFF0C\u5BB9\u5668\u4E2D\u7684/data\u76EE\u5F55\u5B9E\u9645\u4E0A\u6302\u8F7D\u5230\u4E86/var/lib/docker/volumes/\u5BB9\u5668ID/_data\u7684\u76EE\u5F55\u4E0B\u3002",-1),H_=s("p",null,"\u6211\u4EEC\u73B0\u5728\u5728\u5BBF\u4E3B\u673A\u8BE5\u76EE\u5F55\u4E0B\u521B\u5EFA\u4E00\u4E2A\u6587\u4EF6\u3002",-1),F_=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 _data]# touch mount-test")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),V_=s("p",null,"\u6211\u4EEC\u518D\u6B21\u5728\u5BB9\u5668\u4E2D\u67E5\u770B\uFF0C\u53D1\u73B0\u5DF2\u7ECF\u6709\u4E86\u3002",-1),B_=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# ./docker_in.sh nginx-volume-test1")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"root@00741a2a44ad:/# ls -l /data")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"total 0")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"-rw-r--r-- 1 root root 0 Sep 2 18:58 mount-test")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),q_=s("p",null,[s("strong",null,"\u6307\u5B9A\u4E00\u4E2A\u5BBF\u4E3B\u673A\u76EE\u5F55\u4F5C\u4E3A\u6570\u636E\u5377")],-1),Y_=s("p",null,"\u6709\u7684\u65F6\u5019\uFF0C\u6211\u4EEC\u9700\u8981\u5C06\u5BBF\u4E3B\u673A\u7684\u67D0\u4E2A\u76EE\u5F55\u6302\u8F7D\u5230\u5BB9\u5668\u4E2D\u6765\u8FDB\u884C\u8BBF\u95EE\uFF0C\u53EF\u4EE5\u901A\u8FC7-v \u6E90\u8DEF\u5F84\uFF1A\u76EE\u6807\u76EE\u5F55\u7684\u65B9\u5F0F\u8FDB\u884C\u3002",-1),z_=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# mkdir -p /data/docker-volume-nginx")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# docker run -d --name nginx-volume-test2 \\")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"-v /data/docker-volume-nginx:/data nginx")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),$_=s("p",null,"\u4F60\u4F1A\u53D1\u73B0\uFF0C\u76EE\u524D\u5BB9\u5668\u4E2D\u7684/data\u76EE\u5F55\u548C\u5BBF\u4E3B\u673A\u4E2D\u7684/data/ docker-volume-nginx\u76EE\u5F55\u662F\u76F8\u540C\u7684\u3002",-1),X_=s("p",null,[s("strong",null,"\u6587\u4EF6\u6302\u8F7D")],-1),J_=s("p",null,"\u6570\u636E\u5377\u4E5F\u53EF\u4EE5\u6302\u8F7D\u4E00\u4E2A\u5BBF\u4E3B\u673A\u7684\u6587\u4EF6\u4F5C\u5230\u5BB9\u5668\u4E2D\u4F5C\u4E3A\u6570\u636E\u5377\u3002",-1),W_=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# docker run -d --name nginx-volume-test3 \\")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"-v /$HOME/.bash_history:/root/.bash_history nginx")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Q_=s("p",null,"\u4E0A\u9762\u6848\u4F8B\u5C06\u5BBF\u4E3B\u673A\u7684.bash_history\u6302\u8F7D\u5230\u4E86\u5BB9\u5668\u4E2D\uFF0C\u8FD9\u6837\u5C31\u53EF\u4EE5\u8BB0\u5F55\u5BB9\u5668\u4E2D\u7684\u547D\u4EE4\u5386\u53F2\u8BB0\u5F55\u3002",-1),Z_=s("p",null,[s("strong",null,"\u53EA\u8BFB\u6302\u8F7D")],-1),sD=s("p",null,"Docker \u6302\u8F7D\u6570\u636E\u5377\u7684\u9ED8\u8BA4\u6743\u9650\u662F\u8BFB\u5199\uFF0C\u7528\u6237\u4E5F\u53EF\u4EE5\u901A\u8FC7 :ro \u6307\u5B9A\u4E3A\u53EA\u8BFB\u3002",-1),nD=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# docker run -d --name nginx-volume-test \\")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"-v /data/docker-volume-nginx:/data:ro nginx")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),lD=s("h3",{id:"\u6570\u636E\u5377\u751F\u4EA7\u5B9E\u8DF5",tabindex:"-1"},[n("\u6570\u636E\u5377\u751F\u4EA7\u5B9E\u8DF5 "),s("a",{class:"header-anchor",href:"#\u6570\u636E\u5377\u751F\u4EA7\u5B9E\u8DF5","aria-hidden":"true"},"#")],-1),eD=s("p",null,"\u90A3\u4E48\u8FD9\u79CD\u5C06\u672C\u5730\u7684\u76EE\u5F55\u6302\u8F7D\u5230\u5BB9\u5668\u4E2D\u7684\u65B9\u6CD5\uFF0C\u5728\u751F\u4EA7\u4E2D\u6709\u54EA\u4E9B\u5E94\u7528\u573A\u666F\u5462\uFF1F",-1),oD=s("p",null,[s("strong",null,"\u5728\u5F00\u53D1\u73AF\u5883\u4E2D")],-1),aD=s("p",null,"\u5728\u57FA\u4E8EDocker\u7684\u5F00\u53D1\u73AF\u5883\u4E2D\uFF0C\u4F8B\u5982\u6211\u4EEC\u5C06\u672C\u5730\u7684/home/code\u76EE\u5F55\u6302\u8F7D\u5230\u5BB9\u5668\u4E2D\u7684/data/webroot\uFF0C\u7136\u540E\u5BB9\u5668\u7684\u5E94\u7528\u7684webroot\u540C\u6837\u8BBE\u7F6E\u4E3A/data/webroot\uFF0C\u90A3\u4E48\u5BB9\u5668\u542F\u52A8\u540E\uFF0C\u6211\u4EEC\u5C31\u53EF\u4EE5\u81EA\u7531\u7684\u672C\u5730\u8FDB\u884C\u4EE3\u7801\u7684\u7F16\u5199\u548C\u8C03\u8BD5\uFF0C\u5BF9\u4E8E\u89E3\u91CA\u6027\u7684\u8BED\u8A00\uFF0C\u5C31\u6BD4\u8F83\u65B9\u4FBF\u4E86\u3002\u5982\u679C\u4F60\u7684Docker\u8FD0\u884C\u5728\u865A\u62DF\u673A\u4E2D\uFF0C\u53EF\u4EE5\u5148\u5C06\u672C\u5730\u4F8B\u5982D:code\u76EE\u5F55\u901A\u8FC7\u865A\u62DF\u673A\u8F6F\u4EF6\u5171\u4EAB\u5230\u865A\u62DF\u673A\u91CC\uFF0C\u76EE\u524DVirtualBox\u548CVmware workstation\u90FD\u652F\u6301\u76EE\u5F55\u6620\u5C04\u3002\u5728Vmware\u4E2D\u9700\u8981\u5728\u865A\u62DF\u673A\u4E2D\u5B89\u88C5Vmware Tools\u3002",-1),tD=s("p",null,[s("img",{src:"http://k8s.unixhot.com/docker/media/03822b520894cafdde1dbbc64b8b99e6.png",alt:"img"})],-1),cD=s("p",null,[s("strong",null,"\u5728\u751F\u4EA7\u73AF\u5883\u4E2D")],-1),iD=s("p",null,"\u5982\u679C\u6211\u4EEC\u7684\u5BB9\u5668\u91CC\u9762\u8FD0\u884C\u7684\u7A0B\u5E8F\u9700\u8981\u5199\u4E00\u4E9B\u6301\u4E45\u5316\u7684\u6570\u636E\u5230\u786C\u76D8\uFF0C\u6216\u8005\u5171\u4EAB\u5BBF\u4E3B\u673A\u7684\u4E00\u4E9B\u6587\u4EF6\u6216\u8005\u76EE\u5F55\uFF0C\u663E\u7136\u8FD9\u79CD\u6570\u636E\u5377\u7684\u6302\u8F7D\u975E\u5E38\u7684\u65B9\u4FBF\u3002",-1),rD=s("p",null,"\u4E0D\u8FC7\u6570\u636E\u5377\u6700\u5927\u7684\u7F3A\u9677\u5E94\u8BE5\u662F\u4E0D\u7075\u6D3B\u4E86\uFF0C\u56E0\u4E3ADocker\u7684\u7406\u5FF5\u662FBuild\u3001Ship\u3001Run\u3002\u56E0\u4E3A\u6709\u8FD9\u4E2A\u6302\u8F7D\u76EE\u5F55\u7684\u4F9D\u8D56\uFF0C\u90A3\u4E48\u8FD9\u4E2ADocker\u955C\u50CF\u5728\u65B0\u7684\u5BBF\u4E3B\u673A\u4E0A\u8FD0\u884C\u5C31\u9700\u8981\u8003\u8651\u6302\u8F7D\u7684\u76EE\u5F55\u662F\u5426\u5B58\u5728\u7B49\u95EE\u9898\u3002",-1),pD=s("h3",{id:"\u6570\u636E\u5377\u5BB9\u5668",tabindex:"-1"},[n("\u6570\u636E\u5377\u5BB9\u5668 "),s("a",{class:"header-anchor",href:"#\u6570\u636E\u5377\u5BB9\u5668","aria-hidden":"true"},"#")],-1),dD=s("p",null,"Docker\u8FD8\u652F\u6301\u8BA9\u4E00\u4E2A\u5BB9\u5668\u8BBF\u95EE\u53E6\u4E00\u4E2A\u5BB9\u5668\u7684Volume\uFF0C\u6211\u4EEC\u53EF\u4EE5\u4F7F\u7528 -volumes-from \u53C2\u6570\u6302\u8F7D\u5176\u5B83\u5BB9\u5668\u7684\u5377\u3002",-1),AD=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# docker run -d --name nginx-volume-test4 \\")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"--volumes-from nginx-volume-test1 nginx")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"7d650d332e3d9bf4086be35ae5a04b618f9d8e1df03fa2fef5f5766318a4ca12")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# ./docker_in.sh nginx-volume-test4")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"root@7d650d332e3d:~# ls /data")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"mount-test")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),CD=s("p",null,"\u6CE8\u610F\uFF1A\u4E0D\u7BA1\u6570\u636E\u5377\u5BB9\u5668nginx-volume-test1\u662F\u5426\u8FD0\u884C\uFF0Cnginx-volume-test4\u90FD\u53EF\u4EE5\u8BBF\u95EE\u5230nginx-volume-test1\u91CC\u9762\u6302\u8F7D\u7684\u6570\u636E\u5377\u3002\u6240\u4EE5\u8BF4\u6570\u636E\u5377\u5BB9\u5668\uFF0C\u5176\u5B9E\u5C31\u662F\u4E00\u4E2A\u666E\u901A\u7684\u5BB9\u5668\uFF0C\u53EA\u4E0D\u8FC7\u662F\u4E13\u95E8\u7528\u6765\u63D0\u4F9B\u6570\u636E\u5377\u4F9B\u5176\u5B83\u5BB9\u5668\u6302\u8F7D\u4F7F\u7528\u7684\u3002",-1),uD=s("h3",{id:"\u6570\u636E\u5377\u5BB9\u5668\u751F\u4EA7\u5B9E\u8DF5",tabindex:"-1"},[n("\u6570\u636E\u5377\u5BB9\u5668\u751F\u4EA7\u5B9E\u8DF5 "),s("a",{class:"header-anchor",href:"#\u6570\u636E\u5377\u5BB9\u5668\u751F\u4EA7\u5B9E\u8DF5","aria-hidden":"true"},"#")],-1),yD=s("p",null,"\u5728\u751F\u4EA7\u4E2D\u4F7F\u7528\u6570\u636E\u5377\u5BB9\u5668\u7684\u65B9\u6848\u6709\u5F88\u591A\uFF0C\u4E00\u4E2A\u975E\u5E38\u5178\u578B\u7684\u5C31\u662F\u5728\u8FDB\u884C\u65E5\u5FD7\u6536\u96C6\u7684\u65F6\u5019\u3002\u6211\u4EEC\u53EF\u4EE5\u5728\u4E00\u53F0\u670D\u52A1\u5668\u4E0A\u542F\u52A8\u4E00\u4E2Alogstash\u6216\u8005filebeat\u7684\u5BB9\u5668log-volume\uFF0C\u7136\u540E\u5176\u5B83\u6240\u6709\u5E94\u7528\u5BB9\u5668\u542F\u52A8\u90FD\u4F7F\u7528--volumes-from log-volume\uFF0C\u5C06\u65E5\u5FD7\u5199\u5165\u5BF9\u5E94\u8DEF\u5F84\uFF0C\u7136\u540E\u4F7F\u7528\u7EDF\u4E00\u6536\u96C6\uFF0C\u8FD9\u6837\u5C31\u907F\u514D\u5728\u6240\u6709\u9700\u8981\u8FDB\u884C\u65E5\u5FD7\u6536\u96C6\u7684\u5BB9\u5668\u4E2D\u53BB\u90E8\u7F72logstash\u3002\u76F8\u5BF9\u4E8E\u76F4\u63A5\u6302\u8F7D\u672C\u5730\u76EE\u5F55\u4E5F\u66F4\u52A0\u7684\u65B9\u4FBF\u3002",-1),hD=s("h1",{id:"docker\u955C\u50CF\u751F\u4EA7\u6784\u5EFA",tabindex:"-1"},[n("Docker\u955C\u50CF\u751F\u4EA7\u6784\u5EFA "),s("a",{class:"header-anchor",href:"#docker\u955C\u50CF\u751F\u4EA7\u6784\u5EFA","aria-hidden":"true"},"#")],-1),_D=s("p",null,"\u6211\u4EEC\u5DF2\u7ECF\u4E86\u89E3\u4E86Docker\u7684\u57FA\u672C\u6982\u5FF5\u548C\u7BA1\u7406\uFF0C\u4E0B\u9762\u5C31\u5F00\u59CB\u7740\u624B\u521B\u5EFA\u81EA\u5DF1\u7684\u7B2C\u4E00\u4E2ADocker\u955C\u50CF\uFF0C\u8FD9\u91CC\u6211\u4EEC\u9009\u7528\u6700\u65E9pull\u4E0B\u6765\u7684centos\u4F5C\u4E3A\u57FA\u7840\u955C\u50CF\uFF0C\u7136\u540E\u5728\u4E0A\u9762\u90E8\u7F72Nginx\u6765\u505A\u6848\u4F8B\u8BB2\u89E3\u3002",-1),DD=s("h2",{id:"\u624B\u52A8\u6784\u5EFA\u955C\u50CF",tabindex:"-1"},[n("\u624B\u52A8\u6784\u5EFA\u955C\u50CF "),s("a",{class:"header-anchor",href:"#\u624B\u52A8\u6784\u5EFA\u955C\u50CF","aria-hidden":"true"},"#")],-1),gD=s("p",null,"\u624B\u52A8\u6784\u5EFA\u955C\u50CF\uFF0C\u7B80\u5355\u7684\u8BF4\u5C31\u662F\u6211\u4EEC\u57FA\u4E8E\u4E00\u4E2A\u57FA\u7840\u955C\u50CF\u542F\u52A8\u4E00\u4E2A\u5BB9\u5668\uFF0C\u7136\u540E\u5BF9\u8FD9\u4E2A\u5BB9\u5668\u8FDB\u884C\u66F4\u6539\uFF0C\u66F4\u6539\u5B8C\u6BD5\u540E\uFF0C\u8FDB\u884C\u63D0\u4EA4\u3002",-1),mD=s("h3",{id:"\u542F\u52A8\u5BB9\u5668-1",tabindex:"-1"},[n("\u542F\u52A8\u5BB9\u5668 "),s("a",{class:"header-anchor",href:"#\u542F\u52A8\u5BB9\u5668-1","aria-hidden":"true"},"#")],-1),bD=s("p",null,"\u8FD0\u884C\u4E00\u4E2ACentOS\u5BB9\u5668\uFF0C\u547D\u540D\u4E3Amynginx",-1),kD=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# docker pull centos")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# docker run --name mynginx -it centos")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),vD=s("p",null,"\u5728\u5BB9\u5668\u91CC\u9762\u5B89\u88C5Nginx",-1),xD=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@2e110e00eef4 /]# rpm -ivh http://mirrors.aliyun.com/epel/epel-release-latest-7.noarch.rpm")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@2e110e00eef4 /]# yum install -y nginx")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),fD=s("p",null,"\u60F3\u8981Docker\u5BB9\u5668\u4FDD\u6301\u6D3B\u8DC3\u7684\u72B6\u6001\uFF0C\u9700\u8981\u5176\u4E2D\u8FD0\u884C\u7684\u8FDB\u7A0B\u4E0D\u80FD\u4E2D\u65AD\uFF0C\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0CNginx\u4F1A\u4EE5\u5B88\u62A4\u8FDB\u7A0B\u7684\u65B9\u5F0F\u542F\u52A8\uFF0C\u8FD9\u4F1A\u5BFC\u81F4\u5BB9\u5668\u53EA\u662F\u77ED\u6682\u8FD0\u884C\uFF0C\u5728\u5B88\u62A4\u8FDB\u7A0B\u88ABfork\u542F\u52A8\u540E\uFF0C\u53D1\u8D77\u5B88\u62A4\u8FDB\u7A0B\u7684\u539F\u59CB\u8FDB\u7A0B\u5C31\u4F1A\u9000\u51FA\uFF0C\u8FD9\u65F6\u5BB9\u5668\u5C31\u4F1A\u505C\u6B62\u8FD0\u884C\u4E86\u3002\u6240\u4EE5\u6211\u4EEC\u9700\u8981\u5C06Nginx\u653E\u5728\u524D\u7AEF\u8FD0\u884C\u3002",-1),SD=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@2e110e00eef4 /]# vi /etc/nginx/nginx.conf")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#\u5728\u914D\u7F6E\u6587\u4EF6\u6700\u4E0A\u9762\u589E\u52A0\u4E0B\u9762\u914D\u7F6E")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"daemon off;")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@2e110e00eef4 /]# exit")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),ED=s("h3",{id:"\u63D0\u4EA4\u955C\u50CF",tabindex:"-1"},[n("\u63D0\u4EA4\u955C\u50CF "),s("a",{class:"header-anchor",href:"#\u63D0\u4EA4\u955C\u50CF","aria-hidden":"true"},"#")],-1),PD=s("p",null,[s("strong",null,"\u83B7\u53D6\u5BB9\u5668ID")],-1),ND=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# docker ps -a | grep mynginx")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'2e110e00eef4 centos "/bin/bash" 8 minutes ago Exited (0) 2 minutes ago mynginx')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),RD=s("p",null,[s("strong",null,"\u63D0\u4EA4\u4FEE\u6539\u540E\u7684\u5BB9\u5668\u4E3A\u955C\u50CF")],-1),TD=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'[root@linux-node1 ~]# docker commit -m "My Nginx" 2e110e00eef4 test/mynginx:v1')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"sha256:cfd25da2c9c5dd2bcce9e5d2ef4e316b46b5f03617176b97b60a34f2958a6d70")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),ID=s("ul",null,[s("li",null,"-m\uFF1A\u6307\u5B9A\u63D0\u4EA4\u7684\u8BF4\u660E\u4FE1\u606F\uFF0C\u7C7B\u4F3CSVN\u548CGit\u3002"),s("li",null,"\u4E4B\u540E\u662F\u7528\u6765\u521B\u5EFA\u955C\u50CF\u7684\u5BB9\u5668\u7684 ID\uFF1B"),s("li",null,"\u6700\u540E\u6307\u5B9A\u76EE\u6807\u955C\u50CF\u7684\u4ED3\u5E93\u540D\u548C\u6807\u7B7E\u4FE1\u606F\u3002")],-1),OD=s("p",null,[s("strong",null,"\u67E5\u770B\u955C\u50CF")],-1),MD=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# docker images")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"REPOSITORY TAG IMAGE ID CREATED SIZE")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"test/mynginx v1 cfd25da2c9c5 49 seconds ago 373MB")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"nginx latest f09fe80eb0e7 2 weeks ago 109MB")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"centos latest 1e1148e4cc2c 2 months ago 202MB")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),wD=s("p",null,[s("strong",null,"\u4ECE\u6211\u4EEC\u521B\u5EFA\u7684\u955C\u50CF\u8FD0\u884C\u4E00\u4E2A\u5BB9\u5668")],-1),KD=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# docker run -d -p 91:80 test/mynginx:v1 nginx")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),LD=s("p",null,"\u73B0\u5728\u4F60\u7684\u624B\u52A8\u6784\u5EFA\u7684\u7B2C\u4E00\u4E2A\u955C\u50CF\u5C31\u5B8C\u6210\u4E86\u3002\u4F60\u53EF\u4EE5\u7528\u540C\u6837\u7684\u65B9\u5F0F\u5B89\u88C5\u4EFB\u610F\u4F60\u9700\u8981\u7684\u8F6F\u4EF6\u5230\u955C\u50CF\u91CC\u9762\uFF0C\u7136\u540E\u4F7F\u7528\u955C\u50CF\u6765\u542F\u52A8\u4E00\u4E2A\u5BB9\u5668\uFF0C\u53EA\u8981\u8BB0\u4F4F\u5BB9\u5668\u542F\u52A8\u5FC5\u987B\u8981\u6709\u4E00\u4E2A\u4E0D\u4F1A\u9000\u51FA\u7684\u8FDB\u7A0B\u5728\u6267\u884C\u5373\u53EF\u3002",-1),UD=s("h2",{id:"dockerfile\u6784\u5EFA",tabindex:"-1"},[n("Dockerfile\u6784\u5EFA "),s("a",{class:"header-anchor",href:"#dockerfile\u6784\u5EFA","aria-hidden":"true"},"#")],-1),jD=s("p",null,"Dockerfile\u662F\u4E3A\u5FEB\u901F\u6784\u5EFAdocker image\u800C\u8BBE\u8BA1\u7684\uFF0C\u5F53\u4F60\u4F7F\u7528docker build\u547D\u4EE4\u7684\u65F6\u5019\uFF0Cdocker \u4F1A\u8BFB\u53D6\u5F53\u524D\u76EE\u5F55\u4E0B\u7684\u547D\u540D\u4E3ADockerfile(\u9996\u5B57\u6BCD\u5927\u5199)\u7684\u7EAF\u6587\u672C\u6587\u4EF6\u5E76\u6267\u884C\u91CC\u9762\u7684\u6307\u4EE4\u6784\u5EFA\u51FA\u4E00\u4E2Adocker image\u3002\u8FD9\u6BD4SaltStack\u7684\u914D\u7F6E\u7BA1\u7406\u8981\u7B80\u5355\u7684\u591A\uFF0C\u4E0D\u8FC7\u8FD8\u662F\u8981\u638C\u63E1\u4E00\u4E9B\u7B80\u5355\u7684\u6307\u4EE4\u3002",-1),GD=s("p",null,"Dockerfile \u7531\u4E00\u884C\u884C\u547D\u4EE4\u8BED\u53E5\u7EC4\u6210\uFF0C\u5E76\u4E14\u652F\u6301\u4EE5#\u5F00\u5934\u7684\u6CE8\u91CA\u884C\u3002\u6307\u4EE4\u662F\u4E0D\u533A\u5206\u5927\u5C0F\u5199\u7684\uFF0C\u4F46\u662F\u901A\u5E38\u6211\u4EEC\u90FD\u5927\u5199\u3002",-1),HD=s("p",null,"\u4E0B\u9762\u6211\u4EEC\u901A\u8FC7\u6784\u5EFA\u4E00\u4E2ANginx\u7684\u955C\u50CF\u6765\u5B66\u4E60Dockerfile\u7684\u7F16\u5199\u3002",-1),FD=s("h3",{id:"nginx-dockerfile\u5B9E\u6218",tabindex:"-1"},[n("Nginx Dockerfile\u5B9E\u6218 "),s("a",{class:"header-anchor",href:"#nginx-dockerfile\u5B9E\u6218","aria-hidden":"true"},"#")],-1),VD=s("p",null,[s("strong",null,"\u6CE8\u610F\uFF1A\u7B2C\u4E00\u4E2A\u6307\u4EE4\u5FC5\u987B\u662FFROM\u3002")],-1),BD=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# mkdir -p /opt/dockerfile/mynginx")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# cd /opt/dockerfile/mynginx/")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@test-node1 nginx]# vim Dockerfile")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# This docker file uses the centos image")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# VERSION 1")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# Author: Jason Zhao")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# Base image")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"FROM centos")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# Maintainer")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"MAINTAINER shundong.zhao zhaoshundong@gmail.com")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#Commands to update the image")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"RUN rpm -ivh http://mirrors.aliyun.com/epel/epel-release-latest-7.noarch.rpm")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"RUN yum install -y nginx --enablerepo=epel")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"ADD index.html /usr/share/nginx/html/index.html")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'RUN echo "daemon off;" >> /etc/nginx/nginx.conf')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"EXPOSE 80")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'CMD ["nginx"]')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),qD=s("p",null,"\u4E3A\u4E86\u5927\u5BB6\u66F4\u5BB9\u6613\u5B66\u4E60\uFF0C\u6211\u8FD9\u91CC\u603B\u7ED3\u4E00\u4E2A\u547D\u4EE4\u7684\u4ECB\u7ECD\uFF1A",-1),YD=s("p",null,"\u4E00\u822C\u7684\uFF0C\u6211\u4EEC\u5C06Dockerfile \u5206\u4E3A\u56DB\u90E8\u5206\uFF1A",-1),zD=s("ul",null,[s("li",null,"\u57FA\u7840\u955C\u50CF\u4FE1\u606F"),s("li",null,"\u7EF4\u62A4\u8005\u4FE1\u606F"),s("li",null,"\u955C\u50CF\u64CD\u4F5C\u6307\u4EE4"),s("li",null,"\u5BB9\u5668\u542F\u52A8\u65F6\u6267\u884C\u6307\u4EE4")],-1),$D=s("h3",{id:"\u5E38\u7528\u6307\u4EE4\u7684\u4ECB\u7ECD",tabindex:"-1"},[n("\u5E38\u7528\u6307\u4EE4\u7684\u4ECB\u7ECD "),s("a",{class:"header-anchor",href:"#\u5E38\u7528\u6307\u4EE4\u7684\u4ECB\u7ECD","aria-hidden":"true"},"#")],-1),XD=s("p",null,[s("img",{src:"http://k8s.unixhot.com/docker/media/74da151d98647093a4d1ade4f222fbe7.png",alt:"img"})],-1),JD=s("p",null,[s("strong",null,"\u6784\u5EFADockerfile")],-1),WD=s("p",null,"\u6CE8\u610F\uFF1AADD index.html\u5C31\u662F\u653E\u4E00\u4E2A\u6587\u4EF6\u8FDB\u53BB\uFF0C\u8FD9\u4E2A\u6587\u4EF6\u9700\u8981\u5927\u5BB6\u81EA\u5DF1\u51C6\u5907\u4E00\u4E0B\u3002\u4F8B\u5982\uFF1A",-1),QD=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'[root@linux-node1 mynginx]# echo "nginx in docker test" > index.html')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),ZD=s("p",null,"\u4F7F\u7528dokcer build\u547D\u4EE4\u6784\u5EFA\u955C\u50CF\uFF0C\u6700\u540E\u7684.\u8868\u793A\u5F53\u524D\u8DEF\u5F84",-1),sg=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 mynginx]# docker build -t mynginx:v2 .")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),ng=s("p",null,"\u6784\u5EFA\u5B8C\u6BD5\u4E4B\u540E\uFF0C\u6211\u4EEC\u5C31\u53EF\u4EE5Run\u8D77\u6765\u3002",-1),lg=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# docker run -d -p 92:80 mynginx:v2 nginx")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),eg=s("p",null,"\u6D4B\u8BD5\u8BBF\u95EE",-1),og=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 mynginx]# curl http://192.168.56.11:92")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"nginx in docker test")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),ag=s("p",null,"\u73B0\u5728\u4F60\u5E94\u8BE5\u53D1\u73B0\u7F16\u5199Dockerfile\u6709\u591A\u4E48\u7684\u7B80\u5355\u4E86\u5427\uFF0C\u4E0D\u8FC7\u6211\u4EEC\u8FD8\u662F\u8981\u7CFB\u7EDF\u7684\u518D\u6765\u5B66\u4E60\u4E00\u904D\u3002",-1),tg=s("h3",{id:"dockerfile\u547D\u4EE4\u8BE6\u89E3",tabindex:"-1"},[n("Dockerfile\u547D\u4EE4\u8BE6\u89E3 "),s("a",{class:"header-anchor",href:"#dockerfile\u547D\u4EE4\u8BE6\u89E3","aria-hidden":"true"},"#")],-1),cg=s("p",null,"\u4E0B\u9762\u6211\u4EEC\u6765\u5206\u522B\u4ECB\u7ECD\u4E0B\u4E0A\u9762\u4F7F\u7528\u5230\u7684\u547D\u4EE4\uFF1A",-1),ig=s("p",null,[s("strong",null,"FROM")],-1),rg=s("p",null,[n("\u683C\u5F0F\uFF1AFROM "),s("img",{src:"",alt:"img"}),n("\u6216FROM "),s("img",{src:"",alt:"img"}),n(":\u3002 \u89E3\u91CA\uFF1AFROM\u5FC5\u987B\u662FDockerfile\u91CC\u7684\u7B2C\u4E00\u6761\u6307\u4EE4\uFF08\u6CE8\u89C6\u9664\u5916\uFF09\uFF0C\u540E\u9762\u8DDF\u6709\u6548\u7684\u955C\u50CF\u540D\uFF08\u5982\u679C\u8BE5\u955C\u50CF\u4F60\u7684\u672C\u5730\u4ED3\u5E93\u6CA1\u6709\u5219\u4F1A\u4ECE\u8FDC\u7A0B\u4ED3\u5E93Pull\u53D6\uFF09\u3002\u7136\u540E\u540E\u9762\u7684\u5176\u5B83\u6307\u4EE4FROM\u7684\u955C\u50CF\u4E2D\u6267\u884C\u3002")],-1),pg=s("p",null,[s("strong",null,"MAINTAINER")],-1),dg=s("p",null,"\u683C\u5F0F\uFF1AMAINTAINER \u89E3\u91CA\uFF1A\u6307\u5B9A\u7EF4\u62A4\u8005\u7684\u4FE1\u606F\u3002",-1),Ag=s("p",null,[s("strong",null,"RUN")],-1),Cg=s("p",null,'\u683C\u5F0F\uFF1ARUN \u6216 RUN ["executable", "param1", "param2"]\u3002 \u89E3\u91CA\uFF1A\u8FD0\u884C\u547D\u4EE4\uFF0C\u547D\u4EE4\u8F83\u957F\u4F7F\u53EF\u4EE5\u4F7F\u7528\u6765\u6362\u884C\u3002\u63A8\u8350\u4F7F\u7528\u4E0A\u9762\u6570\u7EC4\u7684\u683C\u5F0F',-1),ug=s("p",null,[s("strong",null,"CMD")],-1),yg=s("p",null,"\u683C\u5F0F\uFF1A",-1),hg=s("p",null,'CMD ["executable","param1","param2"] \u4F7F\u7528 exec \u6267\u884C\uFF0C\u63A8\u8350\u65B9\u5F0F\uFF1B CMD command param1 param2 \u5728 /bin/sh \u4E2D\u6267\u884C\uFF0C\u63D0\u4F9B\u7ED9\u9700\u8981\u4EA4\u4E92\u7684\u5E94\u7528\uFF1B CMD ["param1","param2"] \u63D0\u4F9B\u7ED9ENTRYPOINT\u7684\u9ED8\u8BA4\u53C2\u6570\uFF1B',-1),_g=s("p",null,"\u89E3\u91CA\uFF1A",-1),Dg=s("p",null,"CMD\u6307\u5B9A\u5BB9\u5668\u542F\u52A8\u662F\u6267\u884C\u7684\u547D\u4EE4\uFF0C\u6BCF\u4E2ADockerfile\u53EA\u80FD\u6709\u4E00\u6761CMD\u547D\u4EE4\uFF0C\u5982\u679C\u6307\u5B9A\u4E86\u591A\u6761\uFF0C\u53EA\u6709\u6700\u540E\u4E00\u6761\u4F1A\u88AB\u6267\u884C\u3002\u5982\u679C\u4F60\u5728\u542F\u52A8\u5BB9\u5668\u7684\u65F6\u5019\u4E5F\u6307\u5B9A\u7684\u547D\u4EE4\uFF0C\u90A3\u4E48\u4F1A\u8986\u76D6Dockerfile\u6784\u5EFA\u7684\u955C\u50CF\u91CC\u9762\u7684CMD\u547D\u4EE4\u3002",-1),gg=s("p",null,[s("strong",null,"ENTRYPOINT")],-1),mg=s("p",null,"\u683C\u5F0F\uFF1A",-1),bg=s("p",null,'ENTRYPOINT ["executable", "param1", "param2"] ENTRYPOINT command param1 param2\uFF08shell\u4E2D\u6267\u884C\uFF09\u3002 \u89E3\u91CA\uFF1A\u548CCMD\u7C7B\u4F3C\u90FD\u662F\u914D\u7F6E\u5BB9\u5668\u542F\u52A8\u540E\u6267\u884C\u7684\u547D\u4EE4\uFF0C\u5E76\u4E14\u4E0D\u53EF\u88AB docker run\u63D0\u4F9B\u7684\u53C2\u6570\u8986\u76D6\u3002',-1),kg=s("p",null,"\u6BCF\u4E2A Dockerfile \u4E2D\u53EA\u80FD\u6709\u4E00\u4E2AENTRYPOINT\uFF0C\u5F53\u6307\u5B9A\u591A\u4E2A\u65F6\uFF0C\u53EA\u6709\u6700\u540E\u4E00\u4E2A\u8D77\u6548\u3002ENTRYPOINT\u6CA1\u6709CMD\u7684\u53EF\u66FF\u6362\u7279\u6027\uFF0C\u4E5F\u5C31\u662F\u4F60\u542F\u52A8\u5BB9\u5668\u7684\u65F6\u5019\u589E\u52A0\u8FD0\u884C\u7684\u547D\u4EE4\u4E0D\u4F1A\u8986\u76D6ENTRYPOINT\u6307\u5B9A\u7684\u547D\u4EE4\u3002",-1),vg=s("p",null,"\u6240\u4EE5\u751F\u4EA7\u5B9E\u8DF5\u4E2D\u6211\u4EEC\u53EF\u4EE5\u540C\u65F6\u4F7F\u7528ENTRYPOINT\u548CCMD\uFF0C\u4F8B\u5982\uFF1A",-1),xg=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'ENTRYPOINT ["/usr/bin/rethinkdb"]')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'CMD ["--help"]')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),fg=s("p",null,[s("strong",null,"USER")],-1),Sg=s("p",null,"\u683C\u5F0F\uFF1AUSER daemon \u89E3\u91CA\uFF1A\u6307\u5B9A\u8FD0\u884C\u5BB9\u5668\u65F6\u7684\u7528\u6237\u540D\u548CUID\uFF0C\u540E\u7EED\u7684RUN\u6307\u4EE4\u4E5F\u4F1A\u4F7F\u7528\u8FD9\u91CC\u6307\u5B9A\u7684\u7528\u6237\u3002",-1),Eg=s("p",null,[s("strong",null,"EXPOSE")],-1),Pg=s("p",null,"\u683C\u5F0F\uFF1AEXPOSE [...] \u89E3\u91CA\uFF1A\u8BBE\u7F6EDocker\u5BB9\u5668\u5185\u90E8\u66B4\u9732\u7684\u7AEF\u53E3\u53F7\uFF0C\u5982\u679C\u9700\u8981\u5916\u90E8\u8BBF\u95EE\uFF0C\u8FD8\u9700\u8981\u542F\u52A8\u5BB9\u5668\u65F6\u589E\u52A0-p\u6216\u8005-P\u53C2\u6570\u8FDB\u884C\u5206\u914D\u3002",-1),Ng=s("p",null,[s("strong",null,"ENV")],-1),Rg=s("p",null,"\u683C\u5F0F\uFF1AENV ENV = ... \u89E3\u91CA\uFF1A\u8BBE\u7F6E\u73AF\u5883\u53D8\u91CF\uFF0C\u53EF\u4EE5\u5728RUN\u4E4B\u524D\u4F7F\u7528\uFF0C\u7136\u540ERUN\u547D\u4EE4\u65F6\u8C03\u7528\uFF0C\u5BB9\u5668\u542F\u52A8\u65F6\u8FD9\u4E9B\u73AF\u5883\u53D8\u91CF\u90FD\u4F1A\u88AB\u6307\u5B9A",-1),Tg=s("p",null,[s("strong",null,"ADD")],-1),Ig=s("p",null,'\u683C\u5F0F\uFF1A ADD ... ADD ["",... ""] \u89E3\u91CA\uFF1A\u5C06\u6307\u5B9A\u7684\u590D\u5236\u5230\u5BB9\u5668\u6587\u4EF6\u7CFB\u7EDF\u4E2D\u7684',-1),Og=s("p",null,"\u6240\u6709\u62F7\u8D1D\u5230container\u4E2D\u7684\u6587\u4EF6\u548C\u6587\u4EF6\u5939\u6743\u9650\u4E3A0755,uid\u548Cgid\u4E3A0 \u5982\u679C\u6587\u4EF6\u662F\u53EF\u8BC6\u522B\u7684\u538B\u7F29\u683C\u5F0F\uFF0C\u5219docker\u4F1A\u5E2E\u5FD9\u89E3\u538B\u7F29",-1),Mg=s("p",null,[s("strong",null,"VOLUME")],-1),wg=s("p",null,'\u683C\u5F0F\uFF1AVOLUME ["/data"] \u89E3\u91CA\uFF1A\u53EF\u4EE5\u5C06\u672C\u5730\u6587\u4EF6\u5939\u6216\u8005\u5176\u4ED6container\u7684\u6587\u4EF6\u5939\u6302\u8F7D\u5230container\u4E2D\u3002',-1),Kg=s("p",null,[s("strong",null,"WORKDIR")],-1),Lg=s("p",null,"\u683C\u5F0F\uFF1AWORKDIR /path/to/workdir \u89E3\u91CA\uFF1A\u5207\u6362\u76EE\u5F55\uFF0C\u4E3A\u540E\u7EED\u7684 RUN\u3001CMD\u3001ENTRYPOINT \u6307\u4EE4\u914D\u7F6E\u5DE5\u4F5C\u76EE\u5F55\u3002\u53EF\u4EE5\u591A\u6B21\u5207\u6362(\u76F8\u5F53\u4E8Ecd\u547D\u4EE4)\uFF0C\u4E5F\u53EF\u4EE5\u4F7F\u7528\u591A\u4E2A WORKDIR\u6307\u4EE4\uFF0C\u540E\u7EED\u547D\u4EE4\u5982\u679C\u53C2\u6570\u662F\u76F8\u5BF9\u8DEF\u5F84\uFF0C\u5219\u4F1A\u57FA\u4E8E\u4E4B\u524D\u547D\u4EE4\u6307\u5B9A\u7684\u8DEF\u5F84\u3002 \u4F8B\u5982\uFF1A",-1),Ug=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"WORKDIR /a")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"WORKDIR b")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"WORKDIR c")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"RUN pwd")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),jg=s("p",null,"\u5219\u6700\u7EC8\u8DEF\u5F84\u4E3A /a/b/c\u3002",-1),Gg=s("p",null,[s("strong",null,"ONBUILD")],-1),Hg=s("p",null,"ONBUILD \u6307\u5B9A\u7684\u547D\u4EE4\u5728\u6784\u5EFA\u955C\u50CF\u65F6\u5E76\u4E0D\u6267\u884C\uFF0C\u800C\u662F\u5728\u5B83\u7684\u5B50\u955C\u50CF\u4E2D\u6267\u884C",-1),Fg=s("p",null,[s("strong",null,"ARG")],-1),Vg=s("p",null,"\u683C\u5F0F\uFF1AARG [=] \u89E3\u91CA\uFF1AARG\u6307\u5B9A\u4E86\u4E00\u4E2A\u53D8\u91CF\u5728docker build\u7684\u65F6\u5019\u4F7F\u7528\uFF0C\u53EF\u4EE5\u4F7F\u7528--build-arg =\u6765\u6307\u5B9A\u53C2\u6570\u7684\u503C\uFF0C\u4E0D\u8FC7\u5982\u679C\u6784\u5EFA\u7684\u65F6\u5019\u4E0D\u6307\u5B9A\u5C31\u4F1A\u62A5\u9519\u3002",-1),Bg=s("h2",{id:"docker\u955C\u50CF\u751F\u4EA7\u89C4\u5212\u5B9E\u8DF5",tabindex:"-1"},[n("Docker\u955C\u50CF\u751F\u4EA7\u89C4\u5212\u5B9E\u8DF5 "),s("a",{class:"header-anchor",href:"#docker\u955C\u50CF\u751F\u4EA7\u89C4\u5212\u5B9E\u8DF5","aria-hidden":"true"},"#")],-1),qg=s("p",null,"\u73B0\u5728\u6211\u4EEC\u5B66\u4F1A\u4E86\u5982\u4F55\u4F7F\u7528Dockerfile\u6765\u6784\u5EFA\u955C\u50CF\uFF0C\u6CA1\u9519\uFF0C\u771F\u6B63\u751F\u4EA7\u73AF\u5883\u6211\u4EEC\u4E5F\u662F\u5927\u89C4\u6A21\u7684\u4F7F\u7528Dockerfile\u3002\u90A3\u4E48\u6211\u4EEC\u5E94\u8BE5\u5982\u4F55\u5165\u624B\u5462\uFF1F",-1),Yg=s("p",null,[n("\u9996\u5148\u6211\u4EEC\u9700\u8981\u53C2\u8003\u4E00\u4E9B\u522B\u4EBA\u7F16\u5199\u7684Dockerfile\uFF0C\u5B66\u4E60\u4E00\u4E9B\u89C4\u8303\u548C\u6280\u5DE7\uFF0C\u53EF\u4EE5\u6765\u8FD9\u91CC\u627E\u627E\u7B54\u6848\uFF1A"),s("a",{href:"https://github.com/dockerfile%E3%80%82",target:"_blank",rel:"noreferrer"},"https://github.com/dockerfile\u3002")],-1),zg=s("p",null,"\u53EF\u4EE5\u53C2\u8003\u7F51\u53CB\u7F16\u5199\u7684Dockerfile\u7684\u6280\u5DE7\u548C\u65B9\u6CD5\uFF0C\u90A3\u4E48\u771F\u6B63\u7684\u751F\u4EA7\u73AF\u5883\uFF0C\u80AF\u5B9A\u8981\u6839\u636E\u81EA\u5DF1\u516C\u53F8\u6216\u8005\u56E2\u961F\u7684\u6280\u672F\u6808\u6765\u6784\u5EFA\u4E0D\u540C\u7684Docker\u955C\u50CF\uFF0C\u6839\u636EDocker\u955C\u50CF\u7684\u5206\u5C42\u89C2\u5FF5\uFF0C\u6211\u4EEC\u53EF\u4EE5\u5728\u8FD9\u4E2A\u57FA\u7840\u4E0A\u5BF9\u6211\u4EEC\u7684\u955C\u50CF\u8FDB\u884C\u5206\u5C42\u3002",-1),$g=s("ul",null,[s("li",null,"\u7CFB\u7EDF\u5C42"),s("li",null,"\u8FD0\u884C\u73AF\u5883\u5C42"),s("li",null,"\u5E94\u7528\u670D\u52A1\u5C42")],-1),Xg=s("p",null,"\u6848\u4F8B\u5982\u4E0B\uFF1A",-1),Jg=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# mkdir /opt/dockerfile")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# cd /opt/dockerfile/")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 dockerfile]# mkdir system runtime app")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 dockerfile]# tree")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},".")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u251C\u2500\u2500 app")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u251C\u2500\u2500 runtime")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u2514\u2500\u2500 system")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Wg=s("h2",{id:"\u57FA\u7840\u7CFB\u7EDF\u955C\u50CF",tabindex:"-1"},[n("\u57FA\u7840\u7CFB\u7EDF\u955C\u50CF "),s("a",{class:"header-anchor",href:"#\u57FA\u7840\u7CFB\u7EDF\u955C\u50CF","aria-hidden":"true"},"#")],-1),Qg=s("h3",{id:"centos\u7CFB\u7EDF\u955C\u50CF",tabindex:"-1"},[n("CentOS\u7CFB\u7EDF\u955C\u50CF "),s("a",{class:"header-anchor",href:"#centos\u7CFB\u7EDF\u955C\u50CF","aria-hidden":"true"},"#")],-1),Zg=s("p",null,"\u9ED8\u8BA4\u7684\u5B98\u65B9CentOS\u955C\u50CF\u6709\u5F88\u591A\u5E38\u7528\u7684\u547D\u4EE4\u5E76\u4E0D\u63D0\u4F9B\uFF0C\u53EF\u4EE5\u6839\u636E\u4F01\u4E1A\u9700\u6C42\u8FDB\u884C\u5B9A\u5236\u3002\u9700\u8981\u6CE8\u610F\u7684\u662F\u4F7F\u7528yum\u5B89\u88C5\u5B8C\u6BD5\u540E\uFF0C\u8BB0\u5F97\u6267\u884Cyum clean all\u3002",-1),sm=s("p",null,"\u56E0\u4E3Ayum\u4F1A\u628A\u4E0B\u8F7D\u7684\u8F6F\u4EF6\u5305\u548Cheader\u5B58\u50A8\u5728cache\u4E2D\uFF0C\u800C\u4E0D\u4F1A\u81EA\u52A8\u5220\u9664\u3002\u5982\u679C\u6211\u4EEC\u89C9\u5F97\u5B83\u4EEC\u5360\u7528\u4E86\u78C1\u76D8\u7A7A\u95F4\uFF0C\u53EF\u4EE5\u4F7F\u7528yum clean all\u6307\u4EE4\u8FDB\u884C\u6E05\u9664\uFF0C\u53EF\u4EE5\u51CF\u5C11\u955C\u50CF\u7684\u5927\u5C0F\u3002",-1),nm=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# cd /opt/dockerfile/system/")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 system]# mkdir centos")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),lm=s("p",null,[s("strong",null,"1.\u7F16\u5199Dockerfile")],-1),em=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 system]# vim centos/Dockerfile")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# Docker for CentOS")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#Base image")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"**FROM** centos")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#Who")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"**MAINTAINER** Jason.Zhao xxx@gmail.com")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#Base pkg")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"**RUN** rpm -ivh http://mirrors.aliyun.com/epel/epel-release-latest-7.noarch.rpm")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"**RUN** yum install -y wget mysql-devel supervisor git redis tree net-tools sudo")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"psmisc && yum clean all")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),om=s("p",null,[s("strong",null,"2.\u6784\u5EFA\u955C\u50CF")],-1),am=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 system]# docker build -t unixhot/centos ./centos/")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),tm=s("p",null,[s("strong",null,"3.\u67E5\u770B\u955C\u50CF")],-1),cm=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 system]# docker images | grep unixhot")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"unixhot/centos latest 4edcb790dacf 24 seconds ago 303 MB")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),im=s("p",null,[s("strong",null,"4.\u4F7F\u7528\u955C\u50CF\u521B\u5EFA\u5BB9\u5668")],-1),rm=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 system]# docker run --name mycentos -it unixhot/centos")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"/bin/bash")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@b137b1cdd3ac /]# ps aux")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"USER PID %CPU %MEM VSZ RSS TTY STAT START TIME COMMAND")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"root 1 0.3 0.0 11776 1872 ? Ss 03:56 0:00 /bin/bash")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"root 15 0.0 0.0 47424 1668 ? R+ 03:56 0:00 ps aux")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),pm=s("h3",{id:"centos\u7CFB\u7EDF\u955C\u50CF\u5305\u542Bssh",tabindex:"-1"},[n("CentOS\u7CFB\u7EDF\u955C\u50CF\u5305\u542BSSH "),s("a",{class:"header-anchor",href:"#centos\u7CFB\u7EDF\u955C\u50CF\u5305\u542Bssh","aria-hidden":"true"},"#")],-1),dm=s("p",null,"\u5728\u5F88\u591A\u65F6\u5019\u5982\u679C\u4F60\u9700\u8981\u5728CentOS\u91CC\u9762\u542F\u52A8sshd\u670D\u52A1\uFF0C\u90A3\u4E48\u5C31\u9700\u8981\u5B89\u88C5openssh-server\u5E76\u4E14\u91CD\u65B0\u751F\u6210SSH\u7684\u4E3B\u673A\u5BC6\u94A5\u3002\u540C\u65F6\u5982\u679C\uFF0C\u4F60\u9700\u8981\u7ED9\u955C\u50CF\u8BBE\u7F6E\u4E00\u4E2A\u5BC6\u7801\uFF0C\u53EF\u4EE5\u4F7F\u7528chpasswd\u975E\u4EA4\u4E92\u7684\u65B9\u5F0F\u6765\u8FDB\u884C\u3002",-1),Am=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# cd /opt/dockerfile/system/")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 system]# mkdir centos-ssh")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Cm=s("p",null,[s("strong",null,"1.\u7F16\u5199Dockerfile")],-1),um=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 system]# vim centos-ssh/Dockerfile")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# Docker for CentOS")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#Base image")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"FROM centos")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#Who")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"MAINTAINER Jason.Zhao xxx@gmail.com")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#EPEL")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"RUN rpm -ivh http://mirrors.aliyun.com/epel/epel-release-latest-7.noarch.rpm")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#Base pkg")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"RUN yum install -y openssh-clients openssl-devel openssh-server wget mysql-devel")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"supervisor git redis tree net-tools sudo psmisc && yum clean all")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# For SSHD")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"RUN ssh-keygen -t rsa -f /etc/ssh/ssh_host_rsa_key")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"RUN ssh-keygen -t ecdsa -f /etc/ssh/ssh_host_ecdsa_key")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"RUN ssh-keygen -A -t dsa -f /etc/ssh/ssh_host_dsa_key")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# Set root password")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'RUN echo "root:unixhot.com" | chpasswd')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),ym=s("p",null,[s("strong",null,"2.\u6784\u5EFA\u955C\u50CF")],-1),hm=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 system]# docker build -t unixhot/centos-ssh:v1 ./centos-ssh/")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Sending build context to Docker daemon 2.048 kB")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Step 1 : FROM centos")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"---> 980e0e4c79ec")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Step 2 : MAINTAINER Jason.Zhao xxx@gmail.com")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"---> **Using cache**")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"---> d08da8648d91")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Step 3 : RUN rpm -ivh")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"http://mirrors.aliyun.com/epel/epel-release-latest-7.noarch.rpm")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"---> **Using cache**")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"---> ad9a05bcfb78")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u2026\uFF08\u7701\u7565\u540E\u9762\u8F93\u51FA\uFF09")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),_m=s("blockquote",null,[s("p",null,"\u8FD9\u91CC\u6709\u4E00\u4E2A\u5C0F\u6280\u5DE7\uFF0C\u4E3A\u4E86\u52A0\u5FEB\u6784\u5EFA\u7684\u901F\u5EA6\uFF0C\u6CE8\u610F\u5230\u4E0A\u9762\u524D\u4E09\u6B65\u7684\u8F93\u51FAUsing cache\uFF0C\u56E0\u4E3ADocker\u955C\u50CF\u7684\u5206\u5C42\u539F\u7406\uFF0C\u5DF2\u7ECF\u6784\u5EFA\u8FC7\u7684layer\u4E0D\u4F1A\u91CD\u590D\u6784\u5EFA\u3002")],-1),Dm=s("p",null,[s("strong",null,"3.\u67E5\u770B\u955C\u50CF")],-1),gm=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 system]# docker images | grep unixhot")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"unixhot/centos-ssh v1 ff1ab7d7e7f4 19 seconds ago 304 MB")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"unixhot/centos latest 4edcb790dacf 2 hours ago 303 MB")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),mm=s("p",null,[s("strong",null,"4.\u4F7F\u7528\u955C\u50CF\u521B\u5EFA\u5BB9\u5668")],-1),bm=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 system]# docker run -d --name centos-ssh-demo -p 8022:22")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"unixhot/centos-ssh:v1 /usr/sbin/sshd -D")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"5f5bbe98a17c620f91a7d3e68a605a4bcbd48621f32aaa095245e59a8691e229")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 system]# docker ps -l")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'5f5bbe98a17c unixhot/centos-ssh:v1 "/usr/sbin/sshd -D" 5 seconds ago Up 2')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"seconds 0.0.0.0:8022->22/tcp centos-ssh-demo")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),km=s("p",null,[s("strong",null,"5.\u4F7F\u7528ssh\u8FDE\u63A5\u5BB9\u5668")],-1),vm=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# ssh -p 8022 root@192.168.56.11")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"root@192.168.56.11's password:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@5f5bbe98a17c ~]# ps aux")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"USER PID %CPU %MEM VSZ RSS TTY STAT START TIME COMMAND")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"root 1 0.0 0.0 82560 3600 ? Ss 05:46 0:00 /usr/sbin/sshd -D")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"root 7 0.0 0.0 11636 1116 ? Ss 05:47 0:00 /bin/bash")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"root 13 0.0 0.0 11636 1116 ? Ss 05:48 0:00 /bin/bash")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"root 63 0.7 0.0 139272 5424 ? Ss 05:51 0:00 sshd: root@pts/0")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"root 65 0.5 0.0 13376 1988 pts/0 Ss 05:51 0:00 -bash")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"root 78 0.0 0.0 49024 1808 pts/0 R+ 05:51 0:00 ps aux")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),xm=s("p",null,[n("Good Job\uFF0C\u4F60\u73B0\u5728\u53EF\u4EE5\u901A\u8FC7ssh\u8FDE\u63A5\u5230\u81EA\u5DF1\u521B\u5EFA\u7684Docker\u5BB9\u5668\u4E0A\u4E86\u3002\u4F46\u662F\u6709\u6CA1\u6709\u53D1\u73B0\u4E00\u4E2A\u95EE\u9898\uFF0CDocker\u53EA\u5141\u8BB8\u5728\u524D\u53F0\u8FD0\u884C\u4E00\u4E2A\u8FDB\u7A0B\uFF0C\u90A3\u5DF2\u7ECF\u8FD0\u884C\u4E86sshd\u3002\u90A3\u4E48\u5982\u4F55\u8FD0\u884C\u522B\u7684\u8FDB\u7A0B\u5462\u3002\u663E\u7136\u6211\u4EEC\u505A\u4E00\u4E2A\u80FDssh\u7684\u955C\u50CF\uFF0C\u76EE\u7684\u5C31\u662F\u4E3A\u4E86\u5728\u4E0A\u9762\u8FD0\u884C\u5404\u79CD\u670D\u52A1\u3002\u600E\u4E48\u529E\u5462\uFF1F\u6709\u5F88\u591A\u89E3\u51B3\u65B9\u6848\u3002"),s("a",{href:"http://xn--start-fg1hyjn9fbll9onm0app1b175dr5f.sh",target:"_blank",rel:"noreferrer"},"\u4F8B\u5982\u4F60\u7F16\u5199\u4E00\u4E2A\u811A\u672Cstart.sh"),n("\u3002\u53EF\u4EE5\u5728\u91CC\u9762\u5199\u591A\u4E2A\u670D\u52A1\u7684\u542F\u52A8\u547D\u4EE4\uFF0C\u53EA\u8981start.sh\u4E0D\u6267\u884C\u5B8C\u6BD5\uFF0C\u5373\u53EF\u3002\u5F53\u7136\u771F\u6B63\u751F\u4EA7\u63A8\u8350\u7684\u662F\u4F7F\u7528Supervisor\u3002")],-1),fm=s("h3",{id:"\u4F7F\u7528supervisor\u7BA1\u7406\u8FDB\u7A0B",tabindex:"-1"},[n("\u4F7F\u7528Supervisor\u7BA1\u7406\u8FDB\u7A0B "),s("a",{class:"header-anchor",href:"#\u4F7F\u7528supervisor\u7BA1\u7406\u8FDB\u7A0B","aria-hidden":"true"},"#")],-1),Sm=s("p",null,[n("Supervisor ("),s("a",{href:"http://supervisord.org/",target:"_blank",rel:"noreferrer"},"http://supervisord.org"),n(") \u662F\u4E00\u4E2A\u7528 Python \u5199\u7684\u8FDB\u7A0B\u7BA1\u7406\u5DE5\u5177\uFF0C\u53EF\u4EE5\u5F88\u65B9\u4FBF\u7684\u7528\u6765\u542F\u52A8\u3001\u91CD\u542F\u3001\u5173\u95ED\u8FDB\u7A0B\uFF08\u4E0D\u4EC5\u4EC5\u662F Python \u8FDB\u7A0B\uFF09\u3002\u9664\u4E86\u5BF9\u5355\u4E2A\u8FDB\u7A0B\u7684\u63A7\u5236\uFF0C\u8FD8\u53EF\u4EE5\u540C\u65F6\u542F\u52A8\u3001\u5173\u95ED\u591A\u4E2A\u8FDB\u7A0B\u3002")],-1),Em=s("p",null,"Supervisor \u53EF\u4EE5\u8FD0\u884C\u5728 Linux\u3001Mac OS X \u4E0A\u3002\u5982\u524D\u6240\u8FF0\uFF0Csupervisor \u662F Python \u7F16\u5199\u7684\uFF0C\u6240\u4EE5\u5B89\u88C5\u8D77\u6765\u4E5F\u5F88\u65B9\u4FBF\uFF0C\u53EF\u4EE5\u76F4\u63A5\u7528 pip :",-1),Pm=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"pip install supervisor")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Nm=s("p",null,"\u73B0\u5728\u8BA9\u6211\u4EEC\u91CD\u65B0\u521B\u5EFA\u4E00\u4E2A\u65B0\u7684\u4E0D\u542F\u52A8ssh\u7684\u5BB9\u5668\uFF0C\u6765\u5B9E\u9A8C\u4E0Bsupervisor\u7684\u5B89\u88C5\u548C\u76F8\u5173\u914D\u7F6E\u3002\u4EE5\u4FBF\u4E8E\uFF0C\u6211\u4EEC\u7F16\u5199Dockerfile\u3002",-1),Rm=s("p",null,[s("strong",null,"1.\u542F\u52A8\u6D4B\u8BD5supervisor\u7684docker\u5BB9\u5668")],-1),Tm=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 system]# docker run --rm -it unixhot/centos-ssh:v1 /bin/bash")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@98aced104917 /]# ls -l /etc/supervisord*")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"-rw-r--r-- 1 root root 7953 Aug 20 2015 /etc/supervisord.conf")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"/etc/supervisord.d:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"total 0")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Im=s("p",null,"\u6CE8\u610F\uFF0C\u5728\u4E0A\u4E00\u5C0F\u8282\u7684\u955C\u50CF\u6784\u5EFA\u4E2D\uFF0C\u6211\u4EEC\u5DF2\u7ECF\u4F7F\u7528yum\u5B89\u88C5\u4E86supervisord\u3002supervisor\u7684\u914D\u7F6E\u6587\u4EF6\u4E3A/etc/supervisord.conf\u3002",-1),Om=s("p",null,[s("strong",null,"2.Supervisor\u914D\u7F6E")],-1),Mm=s("p",null,"Supervisor \u76F8\u5F53\u5F3A\u5927\uFF0C\u63D0\u4F9B\u4E86\u5F88\u4E30\u5BCC\u7684\u529F\u80FD\uFF0C\u4E0D\u8FC7\u6211\u4EEC\u53EF\u80FD\u53EA\u9700\u8981\u7528\u5230\u5176\u4E2D\u4E00\u5C0F\u90E8\u5206\u3002\u5B89\u88C5\u5B8C\u6210\u4E4B\u540E\uFF0C\u53EF\u4EE5\u7F16\u5199\u914D\u7F6E\u6587\u4EF6\uFF0C\u6765\u6EE1\u8DB3\u81EA\u5DF1\u7684\u9700\u6C42\u3002\u4E3A\u4E86\u65B9\u4FBF\uFF0C\u6211\u4EEC\u628A\u914D\u7F6E\u5206\u6210\u4E24\u90E8\u5206\uFF1Asupervisord\uFF08supervisor \u662F\u4E00\u4E2A C/S \u6A21\u578B\u7684\u7A0B\u5E8F\uFF0C\u8FD9\u662F server \u7AEF\uFF0C\u5BF9\u5E94\u7684\u6709 client \u7AEF\uFF1Asupervisorctl\uFF09\u548C\u5E94\u7528\u7A0B\u5E8F\uFF08\u5373\u6211\u4EEC\u8981\u7BA1\u7406\u7684\u7A0B\u5E8F\uFF09\u3002",-1),wm=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@98aced104917 /]# vi /etc/supervisord.conf")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#\u4E0B\u9762\u5E76\u6CA1\u6709\u5217\u51FA\u5B8C\u6574\u7684supervisord.conf\u7684\u914D\u7F6E\uFF0C\u9ED8\u8BA4\u6CE8\u91CA\u6389\u7684\u5185\u5BB9\uFF0C\u8BF7\u81EA\u884C\u67E5\u770B\u3002")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"**[unix_http_server]**")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# file=/var/run/supervisor/supervisor.sock #UNIX socket \u6587\u4EF6\uFF0Csupervisorctl")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u4F1A\u4F7F\u7528")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"**[supervisord]**")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"logfile=/var/log/supervisor/supervisord.log #\u4E3B\u8981\u65E5\u5FD7\u6587\u4EF6\uFF0C\u9ED8\u8BA4\u4F4D\u7F6E\u662F")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"$CWD/supervisord.log")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"logfile_maxbytes=50MB #\u65E5\u5FD7\u6587\u4EF6\u5927\u5C0F\uFF0C\u8D85\u51FA\u4F1A rotate\uFF0C\u9ED8\u8BA4 50MB")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"logfile_backups=10 #\u65E5\u5FD7\u6587\u4EF6\u4FDD\u7559\u5907\u4EFD\u6570\u91CF\u9ED8\u8BA4 10")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"loglevel=info #\u65E5\u5FD7\u7EA7\u522B\uFF0C\u9ED8\u8BA4 info\uFF0C\u5176\u5B83: debug,warn,trace")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"pidfile=/var/run/supervisord.pid #pid\u6587\u4EF6\u4F4D\u7F6E")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"**nodaemon=true #\u6CE8\u610F\u9700\u8981\u4FEE\u6539\u7684\u4E3A\u6B64\u5904\uFF0C\u5C06supervisor\u653E\u5728\u524D\u53F0\u8FD0\u884C\u3002**")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"minfds=1024 #\u53EF\u4EE5\u6253\u5F00\u7684\u6587\u4EF6\u63CF\u8FF0\u7B26\u7684\u6700\u5C0F\u503C\uFF0C\u9ED8\u8BA4 1024")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"minprocs=200 #\u53EF\u4EE5\u6253\u5F00\u7684\u8FDB\u7A0B\u6570\u7684\u6700\u5C0F\u503C\uFF0C\u9ED8\u8BA4 200")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"**[supervisorctl]**")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#\u901A\u8FC7 UNIX socket \u8FDE\u63A5 supervisord\uFF0C\u8DEF\u5F84\u4E0E unix_http_server \u90E8\u5206\u7684 file \u4E00\u81F4")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"serverurl=unix:///var/run/supervisor/supervisor.sock ; use a unix:// URL for a")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"unix socket")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"**[include]**")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#\u5305\u542Bsupervisord.d\u76EE\u5F55\u4E0B*.ini\u6587\u4EF6\uFF0C\u4E5F\u5C31\u662F\u8BF4\uFF0C\u6211\u4EEC\u53EF\u4EE5\u5C06\u9700\u8981\u542F\u52A8\u5E94\u7528\u7A0B\u5E8F\u7684\u914D\u7F6E\u653E\u5728\u8FD9\u4E2A\u76EE\u5F55\u4E0B\uFF0C\u8FD9\u5C31\u662F\u8FD0\u7EF4\u6807\u51C6\u5316\u3002")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"files = supervisord.d/*.ini")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Km=s("p",null,[s("strong",null,"3. program \u914D\u7F6E")],-1),Lm=s("p",null,"supervisor\u4E3B\u914D\u7F6E\u6587\u4EF6\u7684\u53D8\u66F4\u53EA\u9700\u8981\u4FEE\u6539nodaemon=true\uFF0C\u53EF\u4EE5\u770B\u5230\u5173\u4E8E\u7A0B\u5E8F\u7684\u914D\u7F6E\u5728\u4E3B\u914D\u7F6E\u6587\u4EF6\u91CC\u9762\u90FD\u662F\u6CE8\u91CA\u6389\u7684\uFF1A",-1),Um=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},";[program:theprogramname]")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},";command=/bin/cat ; the program (relative uses PATH, can take args)")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},";process_name=%(program_name)s ; process_name expr (default %(program_name)s)")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},";numprocs=1 ; number of processes copies to start (def 1)")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},";directory=/tmp ; directory to cwd to before exec (def no cwd)")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},";umask=022 ; umask for process (default None)")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},";priority=999 ; the relative start priority (default 999)")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},";autostart=true ; start at supervisord start (default: true)")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},";autorestart=true ; retstart at unexpected quit (default: true)")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\uFF08\u7701\u7565\u90E8\u5206\u8F93\u51FA\uFF09")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),jm=s("p",null,"\u6211\u4EEC\u73B0\u5728\u8981\u505A\u7684\u4E8B\u60C5\uFF0C\u5C31\u662F\u7F16\u5199\u4E00\u4E2Asshd\u7684\u7A0B\u5E8F\u7BA1\u7406\u914D\u7F6E\uFF0C\u653E\u7F6E\u5230/etc/supervisord.d\u76EE\u5F55\u4E0B\uFF0C\u6CE8\u610F\u6587\u4EF6\u540E\u7F00\u662F.ini\uFF0C\u4F60\u53EF\u4EE5\u590D\u5236\u4E0A\u9762\u6CE8\u91CA\u6389\u7684\u5185\u5BB9\u8FDB\u884C\u4FEE\u6539\uFF1A",-1),Gm=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@98aced104917 /]# vi /etc/supervisord.d/sshd.ini")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[program:sshd]")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"command=/usr/sbin/sshd -D")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"process_name=%(program_name)s")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"autostart=true")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"stdout_logfile_maxbytes=100MB")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"stdout_logfile_backups=10")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Hm=s("p",null,[s("strong",null,"4.\u542F\u52A8supervisord")],-1),Fm=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@98aced104917 ~]# /usr/bin/supervisord -c /etc/supervisord.conf")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@98aced104917 ~]# netstat -ntlp")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Active Internet connections (only servers)")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Proto Recv-Q Send-Q Local Address Foreign Address State PID/Program name")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"tcp 0 0 0.0.0.0:22 0.0.0.0:* LISTEN 31/sshd")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"tcp6 0 0 :::22 :::* LISTEN 31/sshd")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Vm=s("p",null,"\u53EF\u4EE5\u770B\u5230sshd\u5DF2\u7ECF\u542F\u52A8\u4E86\u3002\u662F\u7531supervisor\u8FDB\u884C\u542F\u52A8\u7684\u3002",-1),Bm=s("p",null,[s("strong",null,"5. \u4F7F\u7528 supervisorctl")],-1),qm=s("p",null,"Supervisorctl \u662F supervisord \u7684\u4E00\u4E2A\u547D\u4EE4\u884C\u5BA2\u6237\u7AEF\u5DE5\u5177\uFF0C\u53EF\u4EE5\u7528\u6765\u7BA1\u7406supervisord\u542F\u52A8\u7684\u8FDB\u7A0B\u3002",-1),Ym=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@98aced104917 ~]# supervisorctl status")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"sshd RUNNING pid 31, uptime 0:02:35")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),zm=s("p",null,[s("strong",null,"\u505C\u6B62\u4E0E\u542F\u52A8sshd")],-1),$m=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@98aced104917 ~]# supervisorctl stop sshd")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"sshd: stopped")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@98aced104917 ~]# supervisorctl status")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"sshd STOPPED Oct 14 06:45 AM")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@98aced104917 ~]# supervisorctl start sshd")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"sshd: started")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@98aced104917 ~]# supervisorctl status")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"sshd RUNNING pid 42, uptime 0:00:03")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Xm=s("p",null,[s("strong",null,"6..\u5C06supervisord.conf\u914D\u7F6E\u6587\u4EF6scp\u5230\u5BBF\u4E3B\u673A\u76EE\u5F55\u4E0B\uFF0C\u548CDockerfile\u540C\u76EE\u5F55")],-1),Jm=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@98aced104917 /]# scp /etc/supervisord.conf")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"192.168.56.11:/opt/dockerfile/system/centos-ssh/")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@98aced104917 ~]# scp /etc/supervisord.d/sshd.ini")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"192.168.56.11:/opt/dockerfile/system/centos-ssh/")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Wm=s("p",null,"\u597D\u7684\uFF0C\u53EF\u4EE5\u9000\u51FA\u5BB9\u5668\uFF0C\u8FD9\u4E2A\u5BB9\u5668\u7684\u751F\u547D\u5468\u671F\u7ED3\u675F\u3002",-1),Qm=s("h3",{id:"\u6807\u51C6\u5316centos\u7CFB\u7EDF\u955C\u50CF",tabindex:"-1"},[n("\u6807\u51C6\u5316CentOS\u7CFB\u7EDF\u955C\u50CF "),s("a",{class:"header-anchor",href:"#\u6807\u51C6\u5316centos\u7CFB\u7EDF\u955C\u50CF","aria-hidden":"true"},"#")],-1),Zm=s("p",null,"\u73B0\u5728\u6211\u4EEC\u6765\u6784\u5EFA\u4E00\u4E2A\u5168\u65B0\u7684\u5305\u542Bssh\u7684centos\u7CFB\u7EDF\u955C\u50CF\u3002\u540C\u65F6\u5982\u679C\u4F60\u4E0D\u9700\u8981ssh\u3002\u4F60\u4F9D\u7136\u53EF\u4EE5\u4F7F\u7528supervisor\u8FDE\u8FDB\u884C\u8FDB\u7A0B\u7BA1\u7406\u3002",-1),sb=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# cd /opt/dockerfile/system/centos-ssh/")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 centos-ssh]# ls -l")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"total 16")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"-rw-r--r-- 1 root root 554 Oct 14 01:40 Dockerfile")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"-rw-r--r-- 1 root root 142 Oct 14 02:53 sshd.ini")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"-rw-r--r-- 1 root root 7953 Oct 14 02:30 supervisord.conf")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),nb=s("p",null,[s("strong",null,"1.\u91CD\u65B0\u7F16\u5199Dockerfile")],-1),lb=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 centos-ssh]# vim Dockerfile")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# Docker for CentOS")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#Base image")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"FROM centos")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#Who")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"MAINTAINER Jason.Zhao xxx@gmail.com")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#EPEL")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"RUN rpm -ivh http://mirrors.aliyun.com/epel/epel-release-latest-7.noarch.rpm")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#Base pkg")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"RUN yum install -y openssh-clients openssl-devel openssh-server wget mysql-devel")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"supervisor git redis tree net-tools sudo psmisc && yum clean all")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# For SSHD")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"RUN ssh-keygen -t rsa -f /etc/ssh/ssh_host_rsa_key")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"RUN ssh-keygen -t ecdsa -f /etc/ssh/ssh_host_ecdsa_key")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"RUN ssh-keygen -A -t dsa -f /etc/ssh/ssh_host_dsa_key")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# Set root password")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'RUN echo "root:unixhot.com" | chpasswd')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#Supervisord config")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"ADD supervisord.conf /etc/supervisord.conf")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"ADD sshd.ini /etc/supervisord.d/sshd.ini")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# Outside Port")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"EXPOSE 22")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#supervisord start")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'CMD ["/usr/bin/supervisord", "-c", "/etc/supervisord.conf"]')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),eb=s("p",null,[s("strong",null,"2.\u6784\u5EFA\u955C\u50CF")],-1),ob=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 centos-ssh]# docker build -t unixhot/centos-ssh:latest .")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),ab=s("p",null,[s("strong",null,"3.\u67E5\u770B\u955C\u50CF")],-1),tb=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 centos-ssh]# docker images | grep unixhot")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"unixhot/centos-ssh latest 0d4b39f9100e 31 seconds ago 304 MB")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"unixhot/centos-ssh v1 ff1ab7d7e7f4 About an hour ago 304 MB")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"unixhot/centos latest 4edcb790dacf 3 hours ago 303 MB")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),cb=s("p",null,[s("strong",null,"4.\u6784\u5EFA\u5BB9\u5668")],-1),ib=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# docker run -d --name centos-ssh-supervisor -p 2222:22")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"unixhot/centos-ssh")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"9ebf53b3cacd093c11a9b5773c5fc62875626061f3f3fe0b5380013c78f2f15b")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# docker ps -l")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'9ebf53b3cacd unixhot/centos-ssh "/usr/bin/supervisord" 6 seconds ago Up 3')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"seconds 0.0.0.0:2222->22/tcp centos-ssh-supervisor")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),rb=s("p",null,[s("strong",null,"5.\u4F7F\u7528ssh\u8FDE\u63A5\u5BB9\u5668")],-1),pb=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# ssh root@192.168.56.11 -p 2222")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"root@192.168.56.11's password:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@9ebf53b3cacd ~]# ps aux")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"USER PID %CPU %MEM VSZ RSS TTY STAT START TIME COMMAND")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"root 1 0.3 0.0 117248 14668 ? Ss 07:25 0:00 /usr/bin/python /usr/bin/supervisord")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"-c /etc/supervisord.conf")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"root 9 0.0 0.0 82560 3608 ? S 07:25 0:00 /usr/sbin/sshd -D")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"root 25 1.2 0.0 139272 5428 ? Ss 07:26 0:00 sshd: root@pts/0")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"root 27 0.0 0.0 13376 1984 pts/0 Ss 07:27 0:00 -bash")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"root 40 0.0 0.0 49024 1808 pts/0 R+ 07:27 0:00 ps aux")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),db=s("p",null,[s("strong",null,"\u64CD\u4F5C\u7CFB\u7EDF\u6807\u51C6\u5316\u7EA6\u5B9A\uFF1A")],-1),Ab=s("p",null,"\u7EDF\u4E00\u4F7F\u7528supervisor\u8FDB\u884C\u8FDB\u7A0B\u7684\u7BA1\u7406",-1),Cb=s("p",null,"\u6240\u6709Docker\u5BB9\u5668\uFF0C\u4F7F\u7528centos-ssh\u955C\u50CF\u65F6\u63D0\u4F9Bsupervisor\u7684ini\u914D\u7F6E\u6587\u4EF6\u3002",-1),ub=s("h2",{id:"\u8FD0\u884C\u73AF\u5883\u955C\u50CF",tabindex:"-1"},[n("\u8FD0\u884C\u73AF\u5883\u955C\u50CF "),s("a",{class:"header-anchor",href:"#\u8FD0\u884C\u73AF\u5883\u955C\u50CF","aria-hidden":"true"},"#")],-1),yb=s("p",null,"\u73B0\u5728\u6709\u4E86\u7CFB\u7EDF\u955C\u50CF\uFF0C\u5F53\u7136\u6587\u4E2D\u7684\u77E5\u8BC6\u6848\u4F8B\uFF0C\u5177\u4F53\u7684\u60C5\u51B5\u53EF\u4EE5\u6839\u636E\u4F60\u6240\u5728\u4F01\u4E1A\u7684\u5177\u4F53\u60C5\u51B5\u8FDB\u884C\u76F8\u5173\u7684\u914D\u7F6E\uFF0C\u73B0\u5728\u6211\u4EEC\u53EF\u4EE5\u5728\u7CFB\u7EDF\u955C\u50CF\u7684\u57FA\u7840\u4E0A\u6765\u6784\u5EFA\u8FD0\u884C\u73AF\u5883\u3002",-1),hb=s("h3",{id:"java-\u8FD0\u884C\u73AF\u5883",tabindex:"-1"},[n("Java \u8FD0\u884C\u73AF\u5883 "),s("a",{class:"header-anchor",href:"#java-\u8FD0\u884C\u73AF\u5883","aria-hidden":"true"},"#")],-1),_b=s("p",null,"Java\u73AF\u5883\u5728\u751F\u4EA7\u4E2D\u975E\u5E38\u5E38\u89C1\uFF0C\u4F8B\u5982\u4F1A\u542F\u52A8\u4E00\u4E2A\u5355\u4E00\u7684Java\u5C0F\u8FDB\u7A0B\u5904\u7406\u961F\u5217\u91CC\u9762\u7684\u5185\u5BB9\uFF0C\u53EA\u9700\u8981\u6709JDK\u5373\u53EF\u3002\u90A3\u9996\u5148\u6211\u4EEC\u5148\u6784\u5EFA\u4E00\u4E2A\u53EA\u5305\u542BJDK\u7684\u8FD0\u884C\u73AF\u5883\uFF1A",-1),Db=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# cd /opt/dockerfile/runtime/")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 runtime]# mkdir java")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),gb=s("p",null,"Java\u8FD0\u884C\u73AF\u5883\u8981\u57FA\u4E8Ecentos-ssh\u7684\u955C\u50CF\u6765\u64CD\u4F5C\uFF0C\u6240\u4EE5\u5148\u8FD0\u884C\u4E00\u4E2A\u4E34\u65F6\u5BB9\u5668\u6765\u6784\u5EFAJava\u8FD0\u884C\u73AF\u5883\uFF0C\u7136\u540E\u628A\u64CD\u4F5C\u6B65\u9AA4\u8F6C\u6362\u4E3ADockerfile\u3002",-1),mb=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# docker run --rm -it unixhot/centos-ssh /bin/bash")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@ec2696c0f9f4 /]# yum install -y java-1.8.0-openjdk")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"java-1.8.0-openjdk-devel")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),bb=s("p",null,"\u4F7F\u7528yum\u5B89\u88C5\u7684openjdk\uFF0C\u9ED8\u8BA4\u53EF\u4EE5\u4E0D\u8BBE\u7F6EJAVA_HOME\uFF0C\u5373\u53EF\u6267\u884C\u76F8\u5173\u7684java\u7A0B\u5E8F\u3002",-1),kb=s("p",null,[s("strong",null,"1.\u7F16\u5199Dockerfile")],-1),vb=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 runtime]# vim java/Dockerfile")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# Docker for CentOS")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#Base image")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"FROM unixhot/centos-ssh")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#Who")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"MAINTAINER Jason.Zhao xxx@gmail.com")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#Base pkg")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"RUN yum install -y java-1.8.0-openjdk java-1.8.0-openjdk-devel && yum clean all")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# JAVA_HOME")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"ENV JAVA_HOME /usr/lib/jvm/java-1.8.0-openjdk")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# Outside Port")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"EXPOSE 22")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#supervisord start")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'CMD ["/usr/bin/supervisord", "-c", "/etc/supervisord.conf"]')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),xb=s("p",null,[s("strong",null,"2.\u6784\u5EFA\u955C\u50CF")],-1),fb=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 runtime]# docker build -t unixhot/runtime-java ./java/")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Sb=s("p",null,[s("strong",null,"3.\u67E5\u770B\u955C\u50CF")],-1),Eb=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# docker images | grep unixhot")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"unixhot/runtime-java latest ff3a2bb0b2a9 2 minutes ago 505.1 MB")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"unixhot/centos-ssh latest 02d375a33cd1 38 minutes ago 304 MB")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"unixhot/centos-ssh v1 ff1ab7d7e7f4 2 hours ago 304 MB")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"unixhot/centos latest 4edcb790dacf 4 hours ago 303 MB")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Pb=s("p",null,"\u5F53\u7136\u5341\u5206\u53EF\u4EE5\u4F7F\u7528\uFF0C\u9700\u8981\u5927\u5BB6\u53BB\u8FD0\u884C\u4E00\u4E2A\u5C0F\u7A0B\u5E8F\u8FDB\u884C\u6D4B\u8BD5\uFF0C\u8FD9\u91CC\u5C31\u4E0D\u6F14\u793A\u4E86\u3002",-1),Nb=s("h3",{id:"tomcat\u8FD0\u884C\u73AF\u5883",tabindex:"-1"},[n("Tomcat\u8FD0\u884C\u73AF\u5883 "),s("a",{class:"header-anchor",href:"#tomcat\u8FD0\u884C\u73AF\u5883","aria-hidden":"true"},"#")],-1),Rb=s("p",null,[s("strong",null,"\u76F8\u5BF9\u4E8E\u5355\u4E00\u4F7F\u7528Java\u547D\u4EE4\u542F\u52A8Java\u670D\u52A1\uFF0CTomcat")],-1),Tb=s("p",null,[s("strong",null,"1.\u542F\u52A8centos-ssh\u955C\u50CF\u7684\u5B9E\u4F8B")],-1),Ib=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# docker run --rm -it unixhot/centos-ssh /bin/bash")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@80f529b965ef /]# yum install -y java-1.8.0-openjdk")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"java-1.8.0-openjdk-devel")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Ob=s("p",null,[s("strong",null,"\u4E3A\u4EC0\u4E48\u4E0D\u76F4\u63A5\u4F7F\u7528Java\u7684\u8FD0\u884C\u73AF\u5883\u6784\u5EFATomcat\uFF1F")],-1),Mb=s("p",null,"\u9996\u5148\uFF0C\u786E\u5B9E\u53EF\u4EE5\u76F4\u63A5\u4F7F\u7528Java\u7684\u8FD0\u884C\u73AF\u5883\u6765\u8FDB\u884CTomcat\u7684\u6784\u5EFA\uFF0C\u4F46\u662F\u4F1A\u7834\u574F\u6211\u4EEC\u7CFB\u7EDF\u5C42\u3001\u8FD0\u884C\u73AF\u5883\u5C42\u3001\u4E1A\u52A1\u5C42\u7684\u67B6\u6784\uFF0C\u4E5F\u5C31\u662F\u5C06\u4F9D\u8D56\u5173\u7CFB\u590D\u6742\u8BDD\u4E86\uFF0C\u8FD9\u8981\u6839\u636E\u4F01\u4E1A\u81EA\u8EAB\u60C5\u51B5\u6765\u505A\u3002\u6211\u5148\u8BF4\u8BF4\u6211\u7684\u7406\u7531\uFF1A",-1),wb=s("p",null,"\u5982\u679CTomcat\u4F7F\u7528\u7684Java\u7248\u672C\u8981\u5347\u7EA7\u5230JDK 1.8\u7248\u672C\uFF0C\u800CJava\u8FD0\u884C\u73AF\u5883\u7684\u7248\u672C\u662F1.7\uFF0C\u4E0D\u80FD\u5347\u7EA7\uFF0C\u56E0\u4E3A\u6709\u5F88\u591A\u670D\u52A1\u5C31\u662F\u5728JDK 1.7\u7684\u73AF\u5883\u4E0B\u5F00\u53D1\u7684\uFF0C\u672A\u8FDB\u884C\u8FC1\u79FB\u3002\u8FD9\u4E2A\u65F6\u5019\uFF0C\u5982\u679CTomcat\u662F\u57FA\u4E8EJava 1.7\u7684\u8FD0\u884C\u73AF\u5883\u6784\u5EFA\u7684\uFF0C\u5C31\u51FA\u73B0\u4F9D\u8D56\u5173\u7CFB\u4E86\u3002\u6240\u4EE5\uFF0C\u4EC5\u4EC5\u662F\u4E2A\u4EBA\u7684\u5EFA\u8BAE\uFF1A\u8BA9\u95EE\u9898\u7B80\u5355\u5316\uFF01",-1),Kb=s("p",null,[s("strong",null,"2.\u5B89\u88C5\u90E8\u7F72Tomcat 8")],-1),Lb=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@80f529b965ef /]# cd /usr/local/src")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@80f529b965ef src]# wget http://mirrors.cnnic.cn/apache/tomcat/tomcat-8/v8.5.6/bin/apache-tomcat-8.5.6.tar.gz")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@80f529b965ef src]# tar zxf apache-tomcat-8.5.6.tar")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@80f529b965ef src]# mv apache-tomcat-8.5.6 /usr/local/")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@80f529b965ef src]# ln -s /usr/local/apache-tomcat-8.5.6/")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"/usr/local/tomcat")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Ub=s("p",null,[s("strong",null,"3.\u4F7F\u7528supervisor\u542F\u52A8tomcat")],-1),jb=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@897cc10b8adf ~]# cd /etc/supervisord.d/")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@897cc10b8adf supervisord.d]# vi tomcat.ini")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[program:tomcat]")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"command=/usr/local/tomcat/bin/catalina.sh run")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"process_name=%(program_name)s")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"autostart=true")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"stdout_logfile_maxbytes=100MB")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"stdout_logfile_backups=10")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Gb=s("p",null,[s("strong",null,"\u66F4\u65B0supervisor\u5E76\u67E5\u770Btomcat\u72B6\u6001")],-1),Hb=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@897cc10b8adf supervisord.d]# supervisorctl update")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"tomcat: stopped")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"tomcat: updated process group")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@897cc10b8adf supervisord.d]# supervisorctl status")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"sshd RUNNING pid 408, uptime 0:06:00")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"tomcat RUNNING pid 704, uptime 0:00:03")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Fb=s("p",null,[s("strong",null,"4.\u51C6\u5907Dockerfile\u7684\u6784\u5EFA\u73AF\u5883")],-1),Vb=s("p",null,"\u73B0\u5728\u6211\u4EEC\u5F00\u59CB\u7F16\u5199Dockerfile\uFF0C\u5728\u7F16\u5199\u4E4B\u524D\uFF0C\u6211\u4EEC\u5148\u51B3\u5B9A\u4E00\u4EF6\u4E8B\u60C5\uFF0Capache-tomcat\u7684\u5305\uFF0C\u6211\u4EEC\u5E94\u8BE5\u662F\u50CF\u5B9E\u9A8C\u4E2D\u4F7F\u7528wget\u8FDB\u884C\u4E0B\u8F7D\u5E76\u89E3\u538B\u5462\uFF0C\u8FD8\u662F\u5E94\u8BE5\u63D0\u524D\u5C06\u5305\u653E\u5728\u5BBF\u4E3B\u673A\uFF0C\u6784\u5EFA\u7684\u65F6\u5019\u4F7F\u7528Dockerfile ADD\u8FDB\u884C\u5462\u3002",-1),Bb=s("p",null,"\u6211\u5EFA\u8BAE\u9009\u62E9\u540E\u8005\uFF0C\u56E0\u4E3A\u5B9E\u9645\u7684\u5DE5\u4F5C\u4E2D\uFF0C\u6211\u4EEC\u901A\u5E38\u8981\u5BF9Tomcat\u8FDB\u884C\u5F88\u591A\u5B9A\u5236\u5316\u7684\u914D\u7F6E\uFF0C\u4F8B\u5982\u8FDB\u884C\u5B89\u5168\u89C4\u8303\u7684\u8C03\u6574\u7B49\u3002",-1),qb=s("p",null,"\u8FD9\u91CC\u6211\u4EEC\u80FD\u6F14\u793A\u7684\u5C31\u662F\u76F4\u63A5\u4E0B\u8F7D\uFF0C\u53EF\u4EE5\u60F3\u8C61\u4E00\u4E0B\uFF0C\u8FD9\u4E2A\u5DF2\u7ECF\u662F\u4F60\u4FEE\u6539\u8FC7\u7684\u8F6F\u4EF6\u5305\u3002",-1),Yb=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# cd /opt/dockerfile/runtime/")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 runtime]# mkdir tomcat")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 runtime]# cd tomcat/")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 tomcat]# wget http://mirrors.cnnic.cn/apache/tomcat/tomcat-8/v8.5.6/bin/apache-tomcat-8.5.6.tar.gz")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),zb=s("p",null,[s("strong",null,"5.\u7F16\u5199Dockerfile")],-1),$b=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# Docker for CentOS")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#Base image")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"FROM unixhot/centos-ssh")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#Who")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"MAINTAINER Jason.Zhao xxx@gmail.com")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#Base pkg")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"RUN yum install -y java-1.8.0-openjdk java-1.8.0-openjdk-devel && yum clean all")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# JAVA_HOME")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"ENV JAVA_HOME /usr/lib/jvm/java-1.8.0-openjdk")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# Tomcat")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"ADD apache-tomcat-8.5.6.tar.gz /usr/local/")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"RUN ln -s /usr/local/apache-tomcat-8.5.6 /usr/local/tomcat")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"ADD tomcat.ini /etc/supervisord.d/tomcat.ini")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"ENV TOMCAT_HOME /usr/local/tomcat")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# Outside Port")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"EXPOSE 22 8080")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#supervisord start")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'CMD ["/usr/bin/supervisord", "-c", "/etc/supervisord.conf"]')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Xb=s("p",null,[s("strong",null,"6.\u6784\u5EFAtomcat\u955C\u50CF")],-1),Jb=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 tomcat]# ls -l")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"total 9096")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"-rw-r--r-- 1 root root 9304958 Oct 6 16:39 apache-tomcat-8.5.6.tar.gz")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"-rw-r--r-- 1 root root 546 Oct 14 05:51 Dockerfile")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"-rw-r--r-- 1 root root 165 Oct 14 06:33 tomcat.ini")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 tomcat]# docker build -t unixhot/runtime-tomcat .")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Wb=s("p",null,[s("strong",null,"7.\u67E5\u770B\u955C\u50CF")],-1),Qb=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 tomcat]# docker images | grep unixhot")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"unixhot/runtime-tomcat latest ef8372a88ad4 6 minutes ago 518.2 MB")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"unixhot/runtime-java latest ff3a2bb0b2a9 2 hours ago 505.1 MB")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"unixhot/centos-ssh latest 02d375a33cd1 3 hours ago 304 MB")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"unixhot/centos-ssh v1 ff1ab7d7e7f4 4 hours ago 304 MB")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"unixhot/centos latest 4edcb790dacf 6 hours ago 303 MB")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Zb=s("p",null,[s("strong",null,"8.\u6784\u5EFAtomcat-demo\u5BB9\u5668")],-1),sk=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 tomcat]# docker run -d --name tomcat-demo -p 88:8080 -p")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"89:22 unixhot/runtime-tomcat")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"8cea3ef85634210eb0cfab0f65a63b0ebd6961b5a67fc765b762785c01cd2c18")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 tomcat]# docker ps -l")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'8cea3ef85634 unixhot/runtime-tomcat "/usr/bin/supervisord" 5 seconds ago Up 2')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"seconds 0.0.0.0:89->22/tcp, 0.0.0.0:88->8080/tcp tomcat-demo")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),nk=s("p",null,[s("strong",null,"9.\u8BBF\u95EEtomcat")],-1),lk=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"http://192.168.56.11:88/")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),ek=s("h2",{id:"\u5E94\u7528\u955C\u50CF",tabindex:"-1"},[n("\u5E94\u7528\u955C\u50CF "),s("a",{class:"header-anchor",href:"#\u5E94\u7528\u955C\u50CF","aria-hidden":"true"},"#")],-1),ok=s("p",null,"\u6700\u4E0A\u5C42\u7684\u4E1A\u52A1\u955C\u50CF\u5C31\u662F\u5728\u8FD0\u884C\u73AF\u5883\u7684\u57FA\u7840\u4E0A\uFF0C\u76F4\u63A5\u4F7F\u7528\u6216\u8005\u6839\u636E\u4E1A\u52A1\u60C5\u51B5\u518D\u6B21\u8FDB\u884C\u4E8C\u6B21\u5B9A\u5236\u3002\u4F8B\u5982\u5BF9\u4E8EPHP\u8FD0\u884C\u73AF\u5883\uFF0C\u9ED8\u8BA4\u53EA\u5B89\u88C5\u57FA\u7840\u901A\u7528\u7684\u6A21\u5757\uFF0C\u5BF9\u4E8E\u4E1A\u52A1\u9700\u8981\u7684\u65F6\u5019\u518D\u6B21\u8FDB\u884C\u4E8C\u6B21\u6784\u5EFA\u3002\u8FD9\u91CC\u6211\u4EEC\u62FF\u4E00\u4E2A\u6BD4\u8F83\u7B80\u5355\u7684Jenkins\u6765\u6A21\u62DF\u3002",-1),ak=s("h3",{id:"jenkins\u955C\u50CF\u6784\u5EFA",tabindex:"-1"},[n("Jenkins\u955C\u50CF\u6784\u5EFA "),s("a",{class:"header-anchor",href:"#jenkins\u955C\u50CF\u6784\u5EFA","aria-hidden":"true"},"#")],-1),tk=s("p",null,"JenkinsJenkins\u662F\u57FA\u4E8EJava\u5F00\u53D1\u7684\u4E00\u79CD\u6301\u7EED\u96C6\u6210\u5DE5\u5177\uFF0C\u5B83\u6709\u81EA\u5DF1\u7684yum\u5B89\u88C5\u65B9\u5F0F\uFF0C\u4F46\u662F\u6700\u76F4\u63A5\u7684\u8FD8\u662F\u76F4\u63A5\u4E0B\u8F7Dwar\u5305\u5B58\u653E\u5230tomcat\u76EE\u5F55\u4E0B\u3002",-1),ck=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# cd /opt/dockerfile/app/")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 app]# mkdir jenkins")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 app]# cd jenkins/")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 jenkins]# wget http://mirrors.jenkins-ci.org/war/latest/jenkins.war")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),ik=s("p",null,[s("strong",null,"2.\u7F16\u5199Dockerfile")],-1),rk=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# Docker for CentOS")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#Base image")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"FROM unixhot/runtime-tomcat")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#Who")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"MAINTAINER Jason.Zhao xxx@gmail.com")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# Jenkins")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"ADD jenkins.war /usr/local/tomcat/webapps/")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# Outside Port")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"EXPOSE 22 8080")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#supervisord start")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'CMD ["/usr/bin/supervisord", "-c", "/etc/supervisord.conf"]')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),pk=s("p",null,[s("strong",null,"3.\u6784\u5EFAjenkins\u955C\u50CF")],-1),dk=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 jenkins]# docker build -t unixhot/jenkins .")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Ak=s("p",null,[s("strong",null,"4.\u67E5\u770B\u955C\u50CF")],-1),Ck=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 jenkins]# docker images | grep unixhot")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"unixhot/jenkins latest a7b16bc093ed 40 seconds ago 588.7 MB")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"unixhot/runtime-tomcat latest 3b596c9a7696 2 hours ago 518.8 MB")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"unixhot/runtime-java latest 476a6a2fc074 2 hours ago 505.8 MB")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"unixhot/centos-ssh latest d85aa8a9dfd4 3 hours ago 304.6 MB")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"unixhot/centos-ssh v1 3309208ed679 4 hours ago 300.9 MB")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"unixhot/centos latest 83f0491a30e1 4 hours ago 282.3 MB")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),uk=s("p",null,[s("strong",null,"5.\u521B\u5EFAjenkins-demo\u5BB9\u5668")],-1),yk=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 jenkins]# docker run -d --name jenkins-demo -p 91:22 -p")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"92:8080 unixhot/jenkins")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"6d88ba756befc84ef1820818994be028c12ac13825c2b439d680358d101e922e")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 jenkins]# docker ps -l")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'6d88ba756bef unixhot/jenkins "/usr/bin/supervisord" 7 seconds ago Up 2 seconds')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"0.0.0.0:91->22/tcp, 0.0.0.0:92->8080/tcp jenkins-demo")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),hk=s("p",null,[s("strong",null,"6.\u8BBF\u95EEjenkins\u5E76\u8FDB\u884C\u521D\u59CB\u5316\u5B89\u88C5")],-1),_k=s("p",null,[s("img",{src:"http://k8s.unixhot.com/docker/media/e59722d6316d2cc9702c1989e1c9f3f1.png",alt:"img"})],-1),Dk=s("p",null,"\u5F53\u7136\u5982\u679C\u4F60\u60F3\u6784\u5EFA\u4E00\u4E2A\u542F\u52A8\u540E\u76F4\u63A5\u5C31\u53EF\u4EE5\u4F7F\u7528\u7684Jenkins\uFF0C\u53EF\u4EE5\u5728\u5B89\u88C5\u5B8C\u6BD5\u540E\uFF0C\u628A\u521A\u624D\u7684\u5BB9\u5668\u91CD\u65B0\u63D0\u4EA4\u6210\u4E3A\u955C\u50CF\u3002",-1),gk=s("p",null,[s("strong",null,"7.\u5B89\u88C5Jenkins\u5E76\u63D0\u4EA4\u6210\u4E3Ajenkins-login\u955C\u50CF\u3002")],-1),mk=s("p",null,"\u8FDB\u5165\u955C\u50CF\u6216\u8005\u5B89\u88C5\u7684\u5BC6\u7801\uFF0C\u586B\u5165\u5BC6\u7801\u6846\u5E76\u7EE7\u7EED\u3002\u540E\u9762\u6B65\u9AA4\u7701\u7565\u3002\u5168\u90E8\u5B89\u88C5\u9ED8\u8BA4\u5373\u53EF\u3002\u6CE8\u610F\u5B89\u88C5\u63D2\u4EF6\u65F6\u65F6\u95F4\u4F1A\u6BD4\u8F83\u957F\u3002",-1),bk=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# ./docker_in.sh jenkins-demo")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@b3bbada66693 /]# cat /root/.jenkins/secrets/initialAdminPassword")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"b5257b8891464ebf890b38c00d24de71")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),kk=s("p",null,[s("strong",null,"\u83B7\u53D6Container ID\uFF1A")],-1),vk=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# docker ps -l")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'b3bbada66693 unixhot/jenkins "/usr/bin/supervisord" 9 minutes ago Up 9 minutes')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"0.0.0.0:91->22/tcp, 0.0.0.0:92->8080/tcp jenkins-demo")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),xk=s("p",null,[s("strong",null,"\u63D0\u4EA4\u65B0\u7684\u955C\u50CF")],-1),fk=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'[root@linux-node1 ~]# docker commit -m "jenkins login" b3bbada66693')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"unixhot/jenkins-login")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# docker images | grep jenkins")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"unixhot/jenkins-login latest c453363bb9f7 22 seconds ago 776.6 MB")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"unixhot/jenkins latest a7b16bc093ed 13 minutes ago 588.7 MB")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Sk=s("p",null,[s("strong",null,"8.\u4F7F\u7528jenkins-login\u955C\u50CF\u6784\u5EFA\u5BB9\u5668")],-1),Ek=s("p",null,"\u73B0\u5728\u53EF\u4EE5\u4F7F\u7528\u7684Jenkins\u5BB9\u5668\u8BDE\u751F\u4E86\uFF0C\u8D76\u7D27\u521B\u5EFA\u4E00\u4E2A\u5BB9\u5668\u6765\u8FDB\u884C\u4F7F\u7528\u5427\u3002",-1),Pk=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# docker run -d --name jenkins-login -p 93:22 -p 94:8080")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"unixhot/jenkins-login")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"af421b4d5b076c756ab58ed8cc95c615a321f9517d30b755667d5d80d1336a63")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# docker ps -l")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'af421b4d5b07 unixhot/jenkins-login "/usr/bin/supervisord" 4 seconds ago Up 2')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"seconds 0.0.0.0:93->22/tcp, 0.0.0.0:94->8080/tcp jenkins-login")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Nk=s("p",null,[s("strong",null,"9.\u8BBF\u95EEJenkins\u5BB9\u5668\uFF0C\u5F00\u59CB\u6301\u7EED\u96C6\u6210\u4E4B\u8DEF")],-1),Rk=s("p",null,[s("img",{src:"http://k8s.unixhot.com/docker/media/04b8b149d6c7ce1e18f67796998be9b5.png",alt:"img"})],-1),Tk=s("h1",{id:"_3-docker\u79C1\u6709\u4ED3\u5E93\u5B9E\u8DF5",tabindex:"-1"},[n("3 Docker\u79C1\u6709\u4ED3\u5E93\u5B9E\u8DF5 "),s("a",{class:"header-anchor",href:"#_3-docker\u79C1\u6709\u4ED3\u5E93\u5B9E\u8DF5","aria-hidden":"true"},"#")],-1),Ik=s("h2",{id:"docker-registry",tabindex:"-1"},[n("Docker Registry "),s("a",{class:"header-anchor",href:"#docker-registry","aria-hidden":"true"},"#")],-1),Ok=s("h3",{id:"\u521B\u5EFAdocker-registry",tabindex:"-1"},[n("\u521B\u5EFADocker Registry "),s("a",{class:"header-anchor",href:"#\u521B\u5EFAdocker-registry","aria-hidden":"true"},"#")],-1),Mk=s("p",null,"\u5728\u5B89\u88C5\u4E86 Docker \u540E\uFF0C\u53EF\u4EE5\u901A\u8FC7\u83B7\u53D6\u5B98\u65B9 registry \u955C\u50CF\u6765\u8FD0\u884C\u3002",-1),wk=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# docker run -d --name docker-registry -p 5000:5000 registry")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"b822d0a3e77e6a3144408119ccc2e7344f60f7404651adc025ce84561245b2d2")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Kk=s("h3",{id:"\u914D\u7F6Edocker\u4FE1\u4EFB\u4ED3\u5E93",tabindex:"-1"},[n("\u914D\u7F6EDocker\u4FE1\u4EFB\u4ED3\u5E93 "),s("a",{class:"header-anchor",href:"#\u914D\u7F6Edocker\u4FE1\u4EFB\u4ED3\u5E93","aria-hidden":"true"},"#")],-1),Lk=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# vim /etc/docker/daemon.json")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"{")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'"registry-mirrors": ["https://tdimi5q1.mirror.aliyuncs.com"],')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'"insecure-registries" : ["http://192.168.56.11:5000"]')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"}")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# systemctl restart docker")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Uk=s("h3",{id:"push\u955C\u50CF\u5230docker-registry",tabindex:"-1"},[n("Push\u955C\u50CF\u5230Docker Registry "),s("a",{class:"header-anchor",href:"#push\u955C\u50CF\u5230docker-registry","aria-hidden":"true"},"#")],-1),jk=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# docker tag system/centos 192.168.56.11:5000/system/centos")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# docker push 192.168.56.11:5000/system/centos")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Gk=s("h2",{id:"registry\u9879\u76EEharbor",tabindex:"-1"},[n("Registry\u9879\u76EEHarbor "),s("a",{class:"header-anchor",href:"#registry\u9879\u76EEharbor","aria-hidden":"true"},"#")],-1),Hk=s("p",null,"\u4E0A\u9762\u6211\u4EEC\u7B80\u5355\u7684\u4ECB\u7ECD\u4E86Docker Registry\u7684\u4F7F\u7528\uFF0C\u4F46\u662F\u771F\u6B63\u751F\u4EA7\u73AF\u5883\uFF0C\u6211\u4EEC\u65E0\u6CD5\u6709\u6548\u7684\u7BA1\u7406Docker Regisry\u3002\u5B98\u65B9\u63D0\u4F9B\u4E86\u6536\u8D39\u7248\u7684Registry\uFF0C\u793E\u533A\u6709\u5F00\u6E90\u7248\u672C\u7684Harbor\u3002",-1),Fk=s("p",null,[s("strong",null,"Harbor\u7B80\u4ECB")],-1),Vk=s("p",null,"Harbor\u662F\u4E00\u4E2A\u7528\u4E8E\u5B58\u50A8\u548C\u5206\u53D1Docker\u955C\u50CF\u7684\u4F01\u4E1A\u7EA7Registry\u670D\u52A1\u5668\uFF0C\u901A\u8FC7\u6DFB\u52A0\u4E00\u4E9B\u4F01\u4E1A\u5FC5\u9700\u7684\u529F\u80FD\u7279\u6027\uFF0C\u4F8B\u5982\u5B89\u5168\u3001\u6807\u8BC6\u548C\u7BA1\u7406\u7B49\uFF0C\u6269\u5C55\u4E86\u5F00\u6E90Docker Distribution\u3002\u4F5C\u4E3A\u4E00\u4E2A\u4F01\u4E1A\u7EA7\u79C1\u6709Registry\u670D\u52A1\u5668\uFF0CHarbor\u63D0\u4F9B\u4E86\u66F4\u597D\u7684\u6027\u80FD\u548C\u5B89\u5168\u3002\u63D0\u5347\u7528\u6237\u4F7F\u7528Registry\u6784\u5EFA\u548C\u8FD0\u884C\u73AF\u5883\u4F20\u8F93\u955C\u50CF\u7684\u6548\u7387\u3002Harbor\u652F\u6301\u5B89\u88C5\u5728\u591A\u4E2ARegistry\u8282\u70B9\u7684\u955C\u50CF\u8D44\u6E90\u590D\u5236\uFF0C\u955C\u50CF\u5168\u90E8\u4FDD\u5B58\u5728\u79C1\u6709Registry\u4E2D\uFF0C \u786E\u4FDD\u6570\u636E\u548C\u77E5\u8BC6\u4EA7\u6743\u5728\u516C\u53F8\u5185\u90E8\u7F51\u7EDC\u4E2D\u7BA1\u63A7\u3002\u53E6\u5916\uFF0CHarbor\u4E5F\u63D0\u4F9B\u4E86\u9AD8\u7EA7\u7684\u5B89\u5168\u7279\u6027\uFF0C\u8BF8\u5982\u7528\u6237\u7BA1\u7406\uFF0C\u8BBF\u95EE\u63A7\u5236\u548C\u6D3B\u52A8\u5BA1\u8BA1\u7B49\u3002",-1),Bk=s("p",null,"\u57FA\u4E8E\u89D2\u8272\u7684\u8BBF\u95EE\u63A7\u5236 - \u7528\u6237\u4E0EDocker\u955C\u50CF\u4ED3\u5E93\u901A\u8FC7\u201C\u9879\u76EE\u201D\u8FDB\u884C\u7EC4\u7EC7\u7BA1\u7406\uFF0C\u4E00\u4E2A\u7528\u6237\u53EF\u4EE5\u5BF9\u591A\u4E2A\u955C\u50CF\u4ED3\u5E93\u5728\u540C\u4E00\u547D\u540D\u7A7A\u95F4\uFF08project\uFF09\u91CC\u6709\u4E0D\u540C\u7684\u6743\u9650\u3002",-1),qk=s("p",null,"\u955C\u50CF\u590D\u5236 - \u955C\u50CF\u53EF\u4EE5\u5728\u591A\u4E2ARegistry\u5B9E\u4F8B\u4E2D\u590D\u5236\uFF08\u540C\u6B65\uFF09\u3002\u5C24\u5176\u9002\u5408\u4E8E\u8D1F\u8F7D\u5747\u8861\uFF0C\u9AD8\u53EF\u7528\uFF0C\u6DF7\u5408\u4E91\u548C\u591A\u4E91\u7684\u573A\u666F\u3002",-1),Yk=s("p",null,"\u56FE\u5F62\u5316\u7528\u6237\u754C\u9762 - \u7528\u6237\u53EF\u4EE5\u901A\u8FC7\u6D4F\u89C8\u5668\u6765\u6D4F\u89C8\uFF0C\u68C0\u7D22\u5F53\u524DDocker\u955C\u50CF\u4ED3\u5E93\uFF0C\u7BA1\u7406\u9879\u76EE\u548C\u547D\u540D\u7A7A\u95F4\u3002",-1),zk=s("p",null,"AD/LDAP \u652F\u6301 - Harbor\u53EF\u4EE5\u96C6\u6210\u4F01\u4E1A\u5185\u90E8\u5DF2\u6709\u7684AD/LDAP\uFF0C\u7528\u4E8E\u9274\u6743\u8BA4\u8BC1\u7BA1\u7406\u3002",-1),$k=s("p",null,"\u5BA1\u8BA1\u7BA1\u7406 - \u6240\u6709\u9488\u5BF9\u955C\u50CF\u4ED3\u5E93\u7684\u64CD\u4F5C\u90FD\u53EF\u4EE5\u88AB\u8BB0\u5F55\u8FFD\u6EAF\uFF0C\u7528\u4E8E\u5BA1\u8BA1\u7BA1\u7406\u3002",-1),Xk=s("p",null,"\u56FD\u9645\u5316 - \u5DF2\u62E5\u6709\u82F1\u6587\u3001\u4E2D\u6587\u3001\u5FB7\u6587\u3001\u65E5\u6587\u548C\u4FC4\u6587\u7684\u672C\u5730\u5316\u7248\u672C\u3002\u66F4\u591A\u7684\u8BED\u8A00\u5C06\u4F1A\u6DFB\u52A0\u8FDB\u6765\u3002",-1),Jk=s("p",null,"RESTful API - RESTful API \u63D0\u4F9B\u7ED9\u7BA1\u7406\u5458\u5BF9\u4E8EHarbor\u66F4\u591A\u7684\u64CD\u63A7, \u4F7F\u5F97\u4E0E\u5176\u5B83\u7BA1\u7406\u8F6F\u4EF6\u96C6\u6210\u53D8\u5F97\u66F4\u5BB9\u6613\u3002",-1),Wk=s("p",null,"\u90E8\u7F72\u7B80\u5355 - \u63D0\u4F9B\u5728\u7EBF\u548C\u79BB\u7EBF\u4E24\u79CD\u5B89\u88C5\u5DE5\u5177\uFF0C \u4E5F\u53EF\u4EE5\u5B89\u88C5\u5230vSphere\u5E73\u53F0(OVA\u65B9\u5F0F)\u865A\u62DF\u8BBE\u5907\u3002",-1),Qk=s("h3",{id:"harbor\u90E8\u7F72",tabindex:"-1"},[n("Harbor\u90E8\u7F72 "),s("a",{class:"header-anchor",href:"#harbor\u90E8\u7F72","aria-hidden":"true"},"#")],-1),Zk=s("p",null,[n("Harbor\u4E3A\u8FD0\u7EF4\u63D0\u4F9B\u4E86\u591A\u79CD\u90E8\u7F72\u65B9\u6CD5\uFF0C\u4F60\u53EF\u4EE5\u76F4\u63A5clone\u6700\u65B0\u4EE3\u7801\uFF0C\u4E5F\u53EF\u4EE5\u652F\u6301offline\u7684\u90E8\u7F72\u65B9\u6CD5\uFF0C\u76F4\u63A5\u4E0B\u8F7D\u5B98\u65B9\u6784\u5EFA\u597D\u7684\u955C\u50CF\u6765\u8FDB\u884C\u4F7F\u7528\u3002\u53EF\u4EE5\u5728github\u7684releases\u67E5\u770B\u6700\u65B0\u7248\u672C\uFF0C\u672C\u6587\u662F1.7.1\u7248\u672C\u3002"),s("em",null,[s("a",{href:"https://github.com/vmware/harbor/releases",target:"_blank",rel:"noreferrer"},"https://github.com/vmware/harbor/releases")])],-1),s2=s("p",null,"\u5EFA\u8BAE\u4E0B\u8F7Doffline\u7684\u538B\u7F29\u5305\uFF0C\u91CC\u9762\u5305\u542B\u4E86harbor\u542F\u52A8\u6240\u7528\u7684\u6240\u6709docker\u955C\u50CF\uFF0C\u53EF\u4EE5\u5FEB\u901F\u7684\u90E8\u7F72harbor\u3002",-1),n2=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# cd /usr/local/src")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# wget https://storage.googleapis.com/harbor-releases/release-1.7.0/harbor-offline-installer-v1.7.1.tgz")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# tar zxf harbor-offline-installer-v1.7.1.tgz")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),l2=s("p",null,"Harbor\u7684\u6BCF\u4E2A\u7EC4\u4EF6\u90FD\u662F\u4EE5Docker\u5BB9\u5668\u7684\u5F62\u5F0F\u6784\u5EFA\u7684\uFF0C\u4F7F\u7528Docker Compose\u6765\u5BF9\u5B83\u8FDB\u884C\u90E8\u7F72\uFF0C\u4F60\u53EF\u4EE5\u67E5\u770Bdocker-compose.yml\u6587\u4EF6\u3002",-1),e2=s("h3",{id:"harbor\u914D\u7F6E",tabindex:"-1"},[n("Harbor\u914D\u7F6E "),s("a",{class:"header-anchor",href:"#harbor\u914D\u7F6E","aria-hidden":"true"},"#")],-1),o2=s("p",null,[s("strong",null,"\u4E3AHarbor\u914D\u7F6EHTTP\u8BBF\u95EE")],-1),a2=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# cd harbor")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 harbor]# vim harbor.cfg")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"hostname = 192.168.56.11")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),t2=s("p",null,[s("strong",null,"\u914D\u7F6EDocker\u4FE1\u4EFB\u4ED3\u5E93")],-1),c2=s("p",null,"\u5982\u679C\u4F7F\u7528http\u7684\u65B9\u5F0F\u914D\u7F6Eharbor\u9700\u8981\u4E3A\u6240\u6709Docker\u6DFB\u52A0\u4FE1\u4EFB\u914D\u7F6E\u3002",-1),i2=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# vim /etc/docker/daemon.json")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"{")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'"registry-mirrors": ["https://tdimi5q1.mirror.aliyuncs.com"],')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'"insecure-registries" : ["http://192.168.56.11"]')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"}")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# systemctl restart docker")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),r2=s("p",null,[s("strong",null,"\u4E3AHarbor\u914D\u7F6Ehttps\u8BBF\u95EE")],-1),p2=s("p",null,"\u9ED8\u8BA4\u60C5\u51B5\u4E0BHarbor\u662F\u4F7F\u7528http\u8FDB\u884C\u8BBF\u95EE\uFF0C\u5B98\u65B9\u63D0\u4F9B\u4E86\u81EA\u7B7E\u540D\u8BC1\u4E66\u7684\u65B9\u6CD5\uFF0C\u4E0D\u8FC7\u751F\u4EA7\u73AF\u5883\u8FD8\u662F\u5EFA\u8BAE\u8D2D\u4E70SSL\u8BC1\u4E66\u3002",-1),d2=s("p",null,[s("strong",null,"1.\u7533\u8BF7\u8BC1\u4E66")],-1),A2=s("p",null,"\u5982\u679C\u4F60\u6CA1\u6709SSL\u8BC1\u4E66\uFF0C\u90A3\u4E48\u4E5F\u4E0D\u8981\u4F7F\u7528\u7F51\u4E0A\u590D\u6742\u7684\u81EA\u7B7E\u540D\u8BC1\u4E66\u7684\u6B65\u9AA4\u4E86\u3002\u76EE\u524D\u963F\u91CC\u4E91\u63D0\u4F9BSymantec \u514D\u8D39\u578BDV SSL\u8BC1\u4E66\u3002\u7533\u8BF7\u6210\u529F\u540E\uFF0C\u4E0B\u8F7DNginx\u7248\u672C\u7684\u8BC1\u4E66\u6587\u4EF6\u3002",-1),C2=s("p",null,[s("strong",null,"2.Harbor\u914D\u7F6E")],-1),u2=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@docker-node1 harbor]# cd /usr/local/src/harbor/")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@docker-node1 harbor]# vim harbor.cfg")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"hostname = reg.unixhot.com")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"ui_url_protocol = https")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"ssl_cert = /usr/local/src/harbor/1_registry.linuxhot.com_bundle.crt")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"ssl_cert_key = /usr/local/src/harbor/2_registry.linuxhot.com.key")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),y2=s("p",null,"\u8BF7\u5C06\u8BC1\u4E66\u653E\u7F6E\u5728\u5BBF\u4E3B\u673A\u4E0A\uFF0C\u5E76\u914D\u7F6E\u6B63\u786E\u7684\u8BC1\u4E66\u8DEF\u5F84\u3002",-1),h2=s("p",null,[s("strong",null,"Docker Compose\u5B89\u88C5")],-1),_2=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]#yum install -y docker-compose")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# docker-compose --version")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"docker-compose version 1.8.0, build 94f7016")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),D2=s("p",null,[s("strong",null,"\u5B89\u88C5Harbor")],-1),g2=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@k8s-harbor-1 ~]# cd /usr/local/src/harbor/")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@k8s-harbor-1 harbor]# ./install.sh")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),m2=s("p",null,[s("strong",null,"\u67E5\u770BHarbor\u72B6\u6001")],-1),b2=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@k8s-harbor-1 harbor]# docker-compose ps")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Name Command State Ports")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"------------------------------------------------------------------------------------------------------------------------------")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"harbor-adminserver /harbor/start.sh Up")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"harbor-core /harbor/start.sh Up")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"harbor-db /entrypoint.sh postgres Up 5432/tcp")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"harbor-jobservice /harbor/start.sh Up")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"harbor-log /bin/sh -c /usr/local/bin/ ... Up 127.0.0.1:1514->10514/tcp")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"harbor-portal nginx -g daemon off; Up 80/tcp")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"nginx nginx -g daemon off; Up 0.0.0.0:443->443/tcp, 0.0.0.0:4443->4443/tcp,")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"0.0.0.0:80->80/tcp")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"redis docker-entrypoint.sh redis ... Up 6379/tcp")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"registry /entrypoint.sh /etc/regist ... Up 5000/tcp")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"registryctl /harbor/start.sh Up")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),k2=s("h3",{id:"\u4F7F\u7528harbor\u7BA1\u7406registry",tabindex:"-1"},[n("\u4F7F\u7528Harbor\u7BA1\u7406Registry "),s("a",{class:"header-anchor",href:"#\u4F7F\u7528harbor\u7BA1\u7406registry","aria-hidden":"true"},"#")],-1),v2=s("p",null,[n("\u73B0\u5728\u4F60\u5C31\u53EF\u4EE5\u8BBF\u95EE\u4F60\u7684\u57DF\u540D"),s("a",{href:"http://reg.linuxhot.xn--com-vj3fu53h4lw8bl.xn--admin%2Charbor12345-8l75a8z3f3f3fwrmtj9hrk9d./",target:"_blank",rel:"noreferrer"},"http://reg.linuxhot.com\u8FDB\u884C\u767B\u5F55\u3002\u9ED8\u8BA4\u7528\u6237admin\uFF0C\u5BC6\u7801Harbor12345\u3002")],-1),x2=s("p",null,[s("img",{src:"http://k8s.unixhot.com/docker/media/366c20c68d5e6467434fb8108baa6081.png",alt:"img"})],-1),f2=s("p",null,"\u767B\u5F55\u540E\u7684\u7B2C\u4E00\u4EF6\u4E8B\u60C5\u6C38\u8FDC\u90FD\u662F\u4FEE\u6539\u9ED8\u8BA4\u5BC6\u7801\u3002\u7136\u540E\u4F60\u5C31\u53EF\u4EE5\u5728\u9879\u76EE\u7BA1\u7406\u4E2D\uFF0C\u65B0\u5EFA\u548C\u7BA1\u7406\u9879\u76EE\u4E86\u3002\u4E0D\u8FC7\u9ED8\u8BA4\u60C5\u51B5\u4E0B\u521B\u5EFA\u7684\u9879\u76EElibrary\u662F\u516C\u5F00\u7684\uFF0C\u5982\u679C\u4F60\u8981\u4F7F\u7528\u8FD9\u4E2A\u9879\u76EE\uFF0C\u800C\u4E14\u57DF\u540D\u653E\u5728\u516C\u7F51\u4E0A\uFF0C\u8BF7\u53D6\u6D88\u516C\u5F00\u3002",-1),S2=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# docker login reg.linuxhot.com")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Username: admin")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Password:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"WARNING! Your password will be stored unencrypted in /root/.docker/config.json.")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Configure a credential helper to remove this warning. See")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"https://docs.docker.com/engine/reference/commandline/login/#credentials-store")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Login Succeeded")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),E2=s("p",null,[s("strong",null,"\u63D0\u4EA4\u955C\u50CF\u5230Registry")],-1),P2=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# docker tag centos:latest reg.linuxhot.com/system/centos:latest")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# docker push reg.linuxhot.com/system/centos:latest")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),N2=s("h1",{id:"kubernetes\u5FEB\u901F\u5165\u95E8",tabindex:"-1"},[n("Kubernetes\u5FEB\u901F\u5165\u95E8 "),s("a",{class:"header-anchor",href:"#kubernetes\u5FEB\u901F\u5165\u95E8","aria-hidden":"true"},"#")],-1),R2=s("p",null,"\u5B66\u4E60Kubernetes\u6700\u6743\u5A01\u7684\u77E5\u8BC6\u6765\u6E90\u5C31\u662FKubernetes\u5B98\u65B9\u6587\u6863\uFF0C\u800C\u4E14\u5BF9\u4E8E\u521D\u5B66\u8005\u6765\u8BF4\uFF0C\u5B98\u65B9\u6587\u6863\u53EF\u80FD\u4E0D\u662F\u6700\u4F73\u9009\u62E9\u3002\u672C\u7AE0\u5C06\u5E26\u4F60\u5FAA\u5FAA\u5E8F\u6E10\u8FDB\u7684\u5B66\u4E60Kubernetes\uFF0C\u540E\u9762\u7AE0\u8282\u4F1A\u901A\u8FC7\u5927\u91CF\u7684\u5B9E\u8DF5\u6848\u4F8B\u6765\u7406\u89E3\u548C\u638C\u63E1Kubernetes\u7684\u77E5\u8BC6\u3002",-1),T2=s("ul",null,[s("li",null,[n("Kubernetes\u5B98\u65B9\u6587\u6863\uFF1A"),s("a",{href:"https://kubernetes.io/docs/home/",target:"_blank",rel:"noreferrer"},"https://kubernetes.io/docs/home/")]),s("li",null,[n("Kuernetes Github\uFF1A"),s("a",{href:"https://github.com/kubernetes/",target:"_blank",rel:"noreferrer"},"https://github.com/kubernetes/")])],-1),I2=s("h2",{id:"kubernetes\u67B6\u6784\u4ECB\u7ECD",tabindex:"-1"},[n("Kubernetes\u67B6\u6784\u4ECB\u7ECD "),s("a",{class:"header-anchor",href:"#kubernetes\u67B6\u6784\u4ECB\u7ECD","aria-hidden":"true"},"#")],-1),O2=s("p",null,"Kubernetes \u6E90\u4E8E\u5E0C\u814A\u8BED\uFF0C\u610F\u4E3A \u201C\u8235\u624B\u201D \u6216 \u201C\u98DE\u884C\u5458\u201D\uFF0C\u662F\u7528\u4E8E\u81EA\u52A8\u90E8\u7F72\uFF0C\u6269\u5C55\u548C\u7BA1\u7406\u5BB9\u5668\u5316\u5E94\u7528\u7A0B\u5E8F\u7684\u5F00\u6E90\u7CFB\u7EDF\uFF0C\u7531\u4E8EK\u548CS\u4E4B\u95F4\u67098\u4E2A\u5B57\u6BCD\uFF0C\u88AB\u7B80\u79F0\u4E3AK8S\u3002Kubernetes \u6784\u5EFA\u5728 Google 15 \u5E74\u751F\u4EA7\u73AF\u5883\u7ECF\u9A8C\u57FA\u7840\u4E4B\u4E0A\uFF0C\u53EF\u4EE5\u5C06Kubernetes\u770B\u4F5C\u4E3AGoogle\u5185\u90E8\u7684\u5BB9\u5668\u7BA1\u7406\u5E73\u53F0Brog\u7684\u5F00\u6E90\u7248\u672C\uFF0C\u5F53\u7136\u4ED6\u4EEC\u4E4B\u95F4\u662F\u6709\u4E00\u4E9B\u5DEE\u5F02\u7684\u3002",-1),M2=s("h3",{id:"kubernetes\u7CFB\u7EDF\u67B6\u6784",tabindex:"-1"},[n("Kubernetes\u7CFB\u7EDF\u67B6\u6784 "),s("a",{class:"header-anchor",href:"#kubernetes\u7CFB\u7EDF\u67B6\u6784","aria-hidden":"true"},"#")],-1),w2=s("p",null,"Kubernetes\u88AB\u8BBE\u8BA1\u4E3AMaster\u548CNode\u4E24\u4E2A\u89D2\u8272\uFF0C\u8FD9\u7C7B\u4F3C\u4E8EOpenStack\u7684\u67B6\u6784\u7406\u5FF5\uFF0CMaster\u4E3A\u63A7\u5236\u8282\u70B9\uFF0CNode\u4E3A\u8BA1\u7B97\u8282\u70B9\u6216\u8005\u53EB\u5DE5\u4F5C\u8282\u70B9\uFF0C\u5728Master\u8282\u70B9\u4E0A\u6709\u4E00\u4E2AAPI Server\u670D\u52A1\uFF0C\u5BF9\u5916\u63D0\u4F9B\u6807\u51C6\u7684RestAPI\uFF0C\u8FD9\u4E5F\u662FKubernetes\u96C6\u7FA4\u7684\u5165\u53E3\uFF0C\u610F\u5916\u7740\u53EA\u8981\u548C\u96C6\u7FA4\u8FDB\u884C\u4EA4\u4E92\u5FC5\u987B\u8FDE\u63A5\u5230API Server\u4E0A\u3002",-1),K2=s("p",null,[s("img",{src:"http://k8s.unixhot.com/kubernetes/media/4f93fc22b605a967fa54a2491557c04e.png",alt:"img"})],-1),L2=s("p",null,[s("strong",null,"Master\u8282\u70B9\u4ECB\u7ECD")],-1),U2=s("p",null,"Kubernetes Master\u8282\u70B9\u4E3B\u8981\u67094\u4E2A\u7EC4\u4EF6\uFF0CAPI Server\u3001Scheduler\u3001Controller\u3001etcd\u3002\u5982\u4E0B\u56FE\u6240\u793A\uFF1A",-1),j2=s("p",null,[s("img",{src:"http://k8s.unixhot.com/kubernetes/media/0786901c59be2f756d7b979619a048b2.png",alt:"img"})],-1),G2=s("ul",null,[s("li",null,[s("strong",null,"API Server"),n("\uFF1A\u63D0\u4F9BKubernetes API\u63A5\u53E3\uFF0C\u4E3B\u8981\u5904\u7406 Rest\u64CD\u4F5C\u4EE5\u53CA\u66F4\u65B0Etcd\u4E2D\u7684\u5BF9\u8C61\u3002\u662F\u6240\u6709\u8D44\u6E90\u589E\u5220\u6539\u67E5\u7684\u552F\u4E00\u5165\u53E3\u3002")]),s("li",null,[s("strong",null,"Scheduler"),n("\uFF1A\u7ED1\u5B9APod\u5230Node\u4E0A\uFF0C\u4E3B\u8981\u505A\u8D44\u6E90\u8C03\u5EA6\u3002")]),s("li",null,[s("strong",null,"Controller Manager"),n("\uFF1A\u6240\u6709\u5176\u4ED6\u7FA4\u96C6\u7EA7\u522B\u7684\u529F\u80FD\uFF0C\u76EE\u524D\u7531\u63A7\u5236\u5668Manager\u6267\u884C\u3002\u8D44\u6E90\u5BF9\u8C61\u7684\u81EA\u52A8\u5316\u63A7\u5236\u4E2D\u5FC3\uFF0CKubernetes\u96C6\u7FA4\u6709\u5F88\u591A\u63A7\u5236\u5668\u3002")]),s("li",null,[s("strong",null,"Etcd"),n("\uFF1A\u6240\u6709\u6301\u4E45\u5316\u7684\u72B6\u6001\u4FE1\u606F\u5B58\u50A8\u5728Etcd\u4E2D\uFF0C\u8FD9\u4E2A\u662FKubernetes\u96C6\u7FA4\u7684\u6570\u636E\u5E93\u3002")])],-1),H2=s("p",null,[s("strong",null,"Node\u8282\u70B9\u4ECB\u7ECD")],-1),F2=s("p",null,"Node\u8282\u70B9\u662FKubernetes\u96C6\u7FA4\u7684\u5DE5\u4F5C\u8282\u70B9\uFF0C\u5728Node\u8282\u70B9\u4E0A\u4E3B\u8981\u8FD0\u884C\u4E86Docker\u3001Kubelet\u3001kube-proxy\u4E09\u4E2A\u670D\u52A1\uFF08Fluentd\u8BF7\u5148\u5FFD\u7565\uFF09\uFF0C\u5982\u4E0B\u56FE\u6240\u793A\uFF1A",-1),V2=s("p",null,[s("img",{src:"http://k8s.unixhot.com/kubernetes/media/ff26ae9ea18c1a93e50b8226abfa2fa7.png",alt:"img"})],-1),B2=s("ul",null,[s("li",null,[s("strong",null,"Docker Engine"),n("\uFF1A\u8D1F\u8D23\u8282\u70B9\u7684\u5BB9\u5668\u7684\u7BA1\u7406\u5DE5\u4F5C\uFF0C\u6700\u7EC8\u521B\u5EFA\u51FA\u6765\u7684\u662F\u4E00\u4E2ADocker\u5BB9\u5668\u3002")]),s("li",null,[s("strong",null,"Kubelet"),n("\uFF1A\u5B89\u88C5\u5728Node\u4E0A\u7684\u4EE3\u7406\u670D\u52A1\uFF0C\u7528\u6765\u7BA1\u7406Pods\u4EE5\u53CA\u5BB9\u5668\u3001\u955C\u50CF\u3001Volume\u7B49\uFF0C\u5B9E\u73B0\u5BF9\u96C6\u7FA4\u5BF9\u8282\u70B9\u7684\u7BA1\u7406\u3002")]),s("li",null,[s("strong",null,"Kube-proxy"),n("\uFF1A\u5B89\u88C5\u5728Node\u4E0A\u7684\u7F51\u7EDC\u4EE3\u7406\u670D\u52A1\uFF0C\u63D0\u4F9B\u7F51\u7EDC\u4EE3\u7406\u4EE5\u53CA\u8D1F\u8F7D\u5747\u8861\uFF0C\u5B9E\u73B0\u4E0EService\u901A\u8BAF\u3002")])],-1),q2=s("h3",{id:"kubernetes\u903B\u8F91\u67B6\u6784",tabindex:"-1"},[n("Kubernetes\u903B\u8F91\u67B6\u6784 "),s("a",{class:"header-anchor",href:"#kubernetes\u903B\u8F91\u67B6\u6784","aria-hidden":"true"},"#")],-1),Y2=s("p",null,"\u5728\u4E0A\u9762\u7684\u4ECB\u7ECD\u4E2D\u63D0\u5230\u50CFPod\u3001Service\u8FD9\u4E9B\u6982\u5FF5\uFF0C\u5728Kubernetes\u7684\u7CFB\u7EDF\u67B6\u6784\u56FE\u4E2D\u5E76\u6CA1\u6709\u4F53\u73B0\u51FA\u6765\uFF0C\u8FD9\u4E9B\u53EF\u4EE5\u7406\u89E3\u4E3AKubernetes\u903B\u8F91\u67B6\u6784\u4E2D\u7684\u7EC4\u4EF6\u3002\u4E5F\u5C31\u662F\u5728Master\u548CNode\u4E0A\u5E76\u4E0D\u5177\u4F53\u5B58\u5728\u7684\u4E00\u4E2A\u670D\u52A1\u6216\u8005\u8FDB\u7A0B\uFF0C\u4F46\u5374\u662FKubernetes\u7684\u7EC4\u4EF6\uFF0C\u4E5F\u662F\u6211\u4EEC\u7684\u7BA1\u7406\u5BF9\u8C61\u3002\u4E3B\u8981\u6709Pod\u3001Service\u548C\u5404\u79CD\u63A7\u5236\u5668\u7B49\u3002",-1),z2=s("p",null,[s("strong",null,"Pod")],-1),$2=s("p",null,"Pod\u662FKubernetes\u7684\u6700\u5C0F\u7BA1\u7406\u5355\u5143\uFF0C\u4E00\u4E2APod\u53EF\u4EE5\u5305\u542B\u4E00\u7EC4\u5BB9\u5668\u548C\u5377\u3002\u867D\u7136\u4E00\u4E2APod\u91CC\u9762\u53EF\u4EE5\u5305\u542B\u4E00\u4E2A\u6216\u8005\u591A\u4E2A\u5BB9\u5668\uFF0C\u4F46\u662FPod\u53EA\u6709\u4E00\u4E2AIP\u5730\u5740\uFF0C\u800C\u4E14Pod\u91CD\u542F\u540E\uFF0CIP\u5730\u5740\u4F1A\u53D1\u751F\u53D8\u5316\u3002",-1),X2=s("p",null,[s("img",{src:"http://k8s.unixhot.com/kubernetes/media/e2a89d5ac819b578808e62d8fee0e960.png",alt:"img"})],-1),J2=s("p",null,[s("strong",null,"Controller")],-1),W2=s("p",null,"\u4E00\u4E2A\u5E94\u7528\u5982\u679C\u53EF\u4EE5\u6709\u4E00\u4E2A\u6216\u8005\u591A\u4E2APod\uFF0C\u5C31\u50CF\u4F60\u7ED9\u67D0\u4E00\u4E2A\u5E94\u7528\u505A\u96C6\u7FA4\uFF0C\u96C6\u7FA4\u4E2D\u7684\u6240\u6709Pod\u662F\u4E00\u6A21\u4E00\u6837\u7684\u3002Kubernetes\u4E2D\u6709\u5F88\u591A\u63A7\u5236\u5668\u53EF\u4EE5\u6765\u7BA1\u7406Pod\uFF0C\u4F8B\u5982\u4E0B\u56FE\u7684Replication Controller\u53EF\u4EE5\u63A7\u5236Pod\u7684\u526F\u672C\u6570\u91CF\uFF0C\u4ECE\u800C\u5B9E\u73B0\u6A2A\u5411\u6269\u5C55\u3002",-1),Q2=s("p",null,[s("img",{src:"http://k8s.unixhot.com/kubernetes/media/c4ae2886ff4fdb51b9a0dd20a14c8e50.png",alt:"img"})],-1),Z2=s("p",null,"Kubernetes\u4E2D\u6709\u5F88\u591A\u63A7\u5236\u5668\uFF0C\u540E\u9762\u7684\u7AE0\u8282\u6211\u4EEC\u4F1A\u4E00\u4E00\u8BB2\u5230\uFF0C\u5E38\u7528\u7684\u63A7\u5236\u5668\u5982\u4E0B\uFF1A",-1),sv=s("ul",null,[s("li",null,"Replication Controller\uFF08\u65B0\u7248\u672C\u5DF2\u7ECF\u88ABReplicaSet\u6240\u66FF\u4EE3\uFF09"),s("li",null,"ReplicaSet\uFF08\u65B0\u7248\u672C\u88AB\u5C01\u88C5\u5728Deployment\u4E2D\uFF09"),s("li",null,"Deployment\uFF1A\u5C01\u88C5\u4E86Pod\u7684\u526F\u672C\u7BA1\u7406\u3001\u90E8\u7F72\u66F4\u65B0\u3001\u56DE\u6EDA\u3001\u6269\u5BB9\u3001\u7F29\u5BB9\u7B49\u529F\u80FD\u3002"),s("li",null,"DaemonSet\uFF1A\u4FDD\u8BC1\u6240\u6709\u7684Node\u4E0A\u6709\u4E14\u53EA\u6709\u4E00\u4E2APod\u5728\u8FD0\u884C\u3002"),s("li",null,"StatefulSet\uFF1A\u6709\u72B6\u6001\u7684\u5E94\u7528\uFF0C\u4E3A Pod \u63D0\u4F9B\u552F\u4E00\u7684\u6807\u8BC6\uFF0C\u5B83\u53EF\u4EE5\u4FDD\u8BC1\u90E8\u7F72\u548C scale \u7684\u987A\u5E8F\u3002"),s("li",null,"Job\uFF1A\u4F7F\u7528Kubernetes\u8FD0\u884C\u5355\u4E00\u4EFB\u52A1\u3002"),s("li",null,"CronJob\uFF1A\u4F7F\u7528Kubernetes\u8FD0\u884C\u5B9A\u65F6\u4EFB\u52A1\u3002")],-1),nv=s("p",null,[s("strong",null,"Service")],-1),lv=s("p",null,"\u7531\u4E8EPod\u7684\u751F\u547D\u5468\u671F\u662F\u77ED\u6682\u7684\uFF0C\u800C\u4E14\u6BCF\u6B21\u91CD\u542FPod\u7684IP\u5730\u5740\u90FD\u4F1A\u53D1\u751F\u53D8\u5316\uFF0C\u800C\u4E14\u4E00\u4E2APod\u6709\u591A\u4E2A\u526F\u672C\uFF0C\u4E5F\u5C31\u662F\u8BF4\u4E00\u4E2A\u96C6\u7FA4\u4E2D\u6709\u4E86\u591A\u4E2A\u8282\u70B9\uFF0C\u5C31\u9700\u8981\u8003\u8651\u8D1F\u8F7D\u5747\u8861\u7684\u95EE\u9898\u3002Kubernetes\u4F7F\u7528Service\u6765\u5B9E\u73B0Pod\u7684\u8BBF\u95EE\uFF0C\u800C\u4E14Service\u6709\u4E00\u4E2ACluster IP\uFF0C\u901A\u5E38\u4E5F\u79F0\u4E4B\u4E3AVIP\uFF0C\u662F\u56FA\u5B9A\u4E0D\u53D8\u7684\u3002",-1),ev=s("p",null,[s("img",{src:"http://k8s.unixhot.com/kubernetes/media/2e61328894d1eaf548ad6ff06d85a6a3.png",alt:"img"})],-1),ov=s("h3",{id:"kubernetes\u7F51\u7EDC\u4ECB\u7ECD",tabindex:"-1"},[n("Kubernetes\u7F51\u7EDC\u4ECB\u7ECD "),s("a",{class:"header-anchor",href:"#kubernetes\u7F51\u7EDC\u4ECB\u7ECD","aria-hidden":"true"},"#")],-1),av=s("p",null,"\u5728Kubernetes\u96C6\u7FA4\u4E2D\u5B58\u5728\u7740\u4E09\u79CD\u7F51\u7EDC\uFF0C\u5206\u522B\u662FNode\u7F51\u7EDC\u3001Pod\u7F51\u7EDC\u548CService\u7F51\u7EDC\uFF0C\u8FD9\u51E0\u79CD\u7F51\u7EDC\u4E4B\u95F4\u7684\u901A\u4FE1\u9700\u8981\u4F9D\u9760\u7F51\u7EDC\u63D2\u4EF6\uFF0CKubernetes\u672C\u8EAB\u5E76\u6CA1\u6709\u63D0\u4F9B\uFF0C\u793E\u533A\u63D0\u4F9B\u4E86\u50CFFlannel\u3001Calico\u3001Cannal\u7B49\uFF0C\u540E\u9762\u7AE0\u8282\u4F1A\u8BE6\u8FF0\u3002",-1),tv=s("p",null,[s("strong",null,"Node\u7F51\u7EDC")],-1),cv=s("p",null,"Node\u7F51\u7EDC\u6307\u7684\u662FKubernetes Node\u8282\u70B9\u672C\u5730\u7684\u7F51\u7EDC\uFF0C\u5728\u672C\u5B9E\u9A8C\u73AF\u5883\u4E2D\u4F7F\u7528\u7684\u662F192.168.56.0/24\u8FD9\u4E2A\u7F51\u6BB5\uFF0C\u6240\u6709\u7684Node\u548CMaster\u5728\u8BE5\u7F51\u6BB5\u90FD\u53EF\u4EE5\u6B63\u5E38\u901A\u4FE1\u3002",-1),iv=s("p",null,[s("strong",null,"Pod\u7F51\u7EDC")],-1),rv=s("p",null,"\u540E\u9762\u521B\u5EFA\u7684Pod\uFF0C\u6BCF\u4E00\u4E2APod\u90FD\u4F1A\u6709\u4E00\u4E2AIP\u5730\u5740\uFF0C\u8FD9\u4E2AIP\u5730\u5740\u7F51\u7EDC\u6BB5\u88AB\u79F0\u4E4B\u4E3APod\u7F51\u7EDC\uFF0C\u5982\u4E0B\u56FE\u6240\u793A\u3002",-1),pv=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# kubectl get pod -o wide")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"NAME READY STATUS RESTARTS AGE IP NODE NOMINATED NODE READINESS GATES")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"nginx-54458cd494-hpn68 1/1 Running 0 9m7s 10.2.1.2 linux-node2.linuxhot.com")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"<none> <none>")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"nginx-54458cd494-r4mfq 1/1 Running 0 7m46s 10.2.1.3 linux-node2.linuxhot.com")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"<none> <none>")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),dv=s("p",null,[s("strong",null,"Service\u7F51\u7EDC")],-1),Av=s("p",null,"Service\u662F\u4E3APod\u63D0\u4F9B\u8BBF\u95EE\u548C\u8D1F\u8F7D\u5747\u8861\u7684\u7F51\u7EDC\u5730\u5740\u6BB5\uFF0C\u5982\u4E0B\u56FE\u6240\u793A\u3002",-1),Cv=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# kubectl get service")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"kubernetes ClusterIP 10.1.0.1 <none> 443/TCP 64m")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"nginx NodePort 10.1.216.23 <none> 80:30893/TCP 8m3s")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),uv=s("p",null,"Kubernetes\u7684\u7EC4\u4EF6\u548C\u77E5\u8BC6\u7EDD\u975E\u5982\u6B64\uFF0C\u5FEB\u901F\u5165\u95E8\u53EF\u4EE5\u5148\u4E86\u89E3\u8FD9\u4E48\u591A\uFF0C\u4E0B\u4E00\u7AE0\u8282\uFF0C\u6211\u4EEC\u5148\u5FEB\u901F\u7684\u90E8\u7F72\u4E00\u4E2AKubernetes\u96C6\u7FA4\u3002",-1),yv=s("h2",{id:"\u4F7F\u7528kubeadm\u90E8\u7F72kubernetes-v1-16-4",tabindex:"-1"},[n("\u4F7F\u7528kubeadm\u90E8\u7F72Kubernetes v1.16.4 "),s("a",{class:"header-anchor",href:"#\u4F7F\u7528kubeadm\u90E8\u7F72kubernetes-v1-16-4","aria-hidden":"true"},"#")],-1),hv=s("p",null,"\u60F3\u8981\u5FEB\u901F\u7684\u4F53\u9A8CKubernetes\u7684\u529F\u80FD\uFF0C\u5B98\u65B9\u63D0\u4F9B\u4E86\u975E\u5E38\u591A\u7684\u90E8\u7F72\u65B9\u6848\uFF0C\u53EF\u4EE5\u4F7F\u7528\u5B98\u65B9\u63D0\u4F9B\u7684kubeadm\u4EE5\u5BB9\u5668\u7684\u65B9\u5F0F\u8FD0\u884CKubernetes\u96C6\u7FA4\uFF0C\u4E5F\u53EF\u4EE5\u4F7F\u7528\u4E8C\u8FDB\u5236\u65B9\u5F0F\u90E8\u7F72\u66F4\u6709\u5229\u4E8E\u7406\u89E3Kubernetes\u7684\u67B6\u6784\uFF0C\u6211\u4EEC\u5148\u4F7F\u7528kubeadm\u5FEB\u901F\u7684\u90E8\u7F72\u4E00\u4E2AKubernetes\u96C6\u7FA4\u540E\uFF0C\u5B66\u4E60Kubernetes\u7684\u4F7F\u7528\uFF0C\u7136\u540E\u52A8\u624B\u4F7F\u7528\u4E8C\u8FDB\u5236\u7684\u65B9\u5F0F\u6765\u6DF1\u5165\u7406\u89E3Kubernetes\u67B6\u6784\u3002",-1),_v=s("blockquote",null,[s("p",null,"\u6CE8\u610F\uFF1A\u8BF7\u4E0D\u8981\u628A\u76EE\u5149\u4EC5\u4EC5\u653E\u5728\u90E8\u7F72\u4E0A\uFF0C\u8981\u6162\u6162\u7684\u4E86\u89E3\u5176\u672C\u8D28\u3002")],-1),Dv=s("p",null,"Kubernetesv1.13\u7248\u672C\u53D1\u5E03\u540E\uFF0Ckubeadm\u624D\u6B63\u5F0F\u8FDB\u5165GA\uFF0C\u53EF\u4EE5\u751F\u4EA7\u4F7F\u7528\u3002\u76EE\u524DKubernetes\u7684\u5BF9\u5E94\u955C\u50CF\u4ED3\u5E93\uFF0C\u5728\u56FD\u5185\u963F\u91CC\u4E91\u4E5F\u6709\u4E86\u955C\u50CF\u7AD9\u70B9\uFF0C\u4F7F\u7528kubeadm\u90E8\u7F72Kubernetes\u96C6\u7FA4\u53D8\u5F97\u7B80\u5355\u5E76\u4E14\u5BB9\u6613\u4E86\u5F88\u591A\uFF0C\u672C\u6587\u4F7F\u7528kubeadm\u5E26\u9886\u5927\u5BB6\u5FEB\u901F\u90E8\u7F72Kubernetes v1.16.2\u7248\u672C\u3002",-1),gv=s("p",null,[s("strong",null,"\u5B9E\u9A8C\u73AF\u5883\u51C6\u5907")],-1),mv=s("p",null,"\u5728\u672C\u4E66\u7684\u5B9E\u9A8C\u73AF\u5883\u7684\u57FA\u7840\u4E0A\uFF0C\u6211\u4EEC\u5982\u4E0B\u6765\u5206\u914D\u89D2\u8272\uFF1A",-1),bv=s("table",null,[s("thead",null,[s("tr",null,[s("th",null,"\u4E3B\u673A\u540D"),s("th",null,"IP\u5730\u5740\uFF08NAT\uFF09"),s("th",null,"\u6700\u4F4E\u914D\u7F6E"),s("th",null,"\u63CF\u8FF0")])]),s("tbody",null,[s("tr",null,[s("td",null,[s("a",{href:"http://linux-node1.linuxhot.com",target:"_blank",rel:"noreferrer"},"linux-node1.linuxhot.com")]),s("td",null,"eth0:192.168.56.11"),s("td",null,"1CPU/1G\u5185\u5B58"),s("td",null,"Kubernets Master/Etcd\u8282\u70B9")]),s("tr",null,[s("td",null,[s("a",{href:"http://linux-node2.linuxhot.com",target:"_blank",rel:"noreferrer"},"linux-node2.linuxhot.com")]),s("td",null,"eth0:192.168.56.12"),s("td",null,"1CPU/1G\u5185\u5B58"),s("td",null,"Kubernets Node\u8282\u70B9")]),s("tr",null,[s("td",null,[s("a",{href:"http://linux-node3.linuxhot.com",target:"_blank",rel:"noreferrer"},"linux-node3.linuxhot.com")]),s("td",null,"eth0:192.168.56.13"),s("td",null,"1CPU/1G\u5185\u5B58"),s("td",null,"Kubernets Node\u8282\u70B9")]),s("tr",null,[s("td",null,"Service\u7F51\u6BB5"),s("td",null,"10.1.0.0/16"),s("td"),s("td")]),s("tr",null,[s("td",null,"Pod\u7F51\u6BB5"),s("td",null,"10.2.0.0/16"),s("td"),s("td")]),s("tr",null,[s("td",null,"\u5907\u6CE8"),s("td",null,"\u5982\u679C\u6709\u6761\u4EF6\u53EF\u4EE5\u90E8\u7F72\u591A\u4E2AKubernets node\uFF0C\u5B9E\u9A8C\u6548\u679C\u66F4\u4F73\u3002"),s("td"),s("td")])])],-1),kv=s("h3",{id:"\u90E8\u7F72docker",tabindex:"-1"},[n("\u90E8\u7F72Docker "),s("a",{class:"header-anchor",href:"#\u90E8\u7F72docker","aria-hidden":"true"},"#")],-1),vv=s("p",null,"\u9996\u5148\u9700\u8981\u5728\u6240\u6709Kubernetes\u96C6\u7FA4\u7684\u8282\u70B9\u4E2D\u5B89\u88C5Docker\u548Ckubeadm\u3002",-1),xv=s("p",null,[s("strong",null,"1.\u8BBE\u7F6E\u4F7F\u7528\u56FD\u5185Yum\u6E90")],-1),fv=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# cd /etc/yum.repos.d/")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 yum.repos.d]# wget https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Sv=s("p",null,[s("strong",null,"2.\u5B89\u88C5\u6307\u5B9A\u7684Docker\u7248\u672C")],-1),Ev=s("p",null,[n("\u7531\u4E8Ekubeadm\u5BF9Docker\u7684\u7248\u672C\u662F\u6709\u8981\u6C42\u7684\uFF0C\u9700\u8981\u5B89\u88C5\u4E0EKubernetes\u5339\u914D\u7684\u7248\u672C\uFF0C\u8FD9\u4E2A\u5BF9\u5E94\u5173\u7CFB\u4E00\u822C\u5728\u6BCF\u6B21\u53D1\u5E03\u7684Changlog\u4E2D\u53EF\u4EE5\u627E\u5230\uFF0C\u4F8B\u59821.16.2\u7684CHANGELOG\u5982\u4E0B\uFF1A"),s("a",{href:"https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG-1.16.md",target:"_blank",rel:"noreferrer"},"CHANGELOG")],-1),Pv=s("p",null,"\u5F53\u524Dv1.16.2\u652F\u6301\u7684Docker\u7248\u672C\u6709v1.13.1, 17.03, 17.06, 17.09, 18.06, 18.09,\u53EF\u4EE5\u901A\u8FC7\u4E0B\u9762\u547D\u4EE4\u67E5\u770B\uFF1A",-1),Nv=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# yum list docker-ce.x86_64 --showduplicates | sort -r")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}}," * updates: mirror.jdcloud.com")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Loading mirror speeds from cached hostfile")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Loaded plugins: fastestmirror")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}}," * extras: mirror.jdcloud.com")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}}," * epel: mirrors.njupt.edu.cn")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"docker-ce.x86_64            3:19.03.4-3.el7                     docker-ce-stable")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"docker-ce.x86_64            3:19.03.3-3.el7                     docker-ce-stable")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"docker-ce.x86_64            3:19.03.2-3.el7                     docker-ce-stable")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"docker-ce.x86_64            3:19.03.1-3.el7                     docker-ce-stable")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"docker-ce.x86_64            3:19.03.0-3.el7                     docker-ce-stable")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"docker-ce.x86_64            3:18.09.9-3.el7                     docker-ce-stable")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"docker-ce.x86_64            3:18.09.8-3.el7                     docker-ce-stable")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"docker-ce.x86_64            3:18.09.7-3.el7                     docker-ce-stable")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"docker-ce.x86_64            3:18.09.6-3.el7                     docker-ce-stable")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"docker-ce.x86_64            3:18.09.5-3.el7                     docker-ce-stable")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"docker-ce.x86_64            3:18.09.4-3.el7                     docker-ce-stable")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"docker-ce.x86_64            3:18.09.3-3.el7                     docker-ce-stable")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"docker-ce.x86_64            3:18.09.2-3.el7                     docker-ce-stable")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"docker-ce.x86_64            3:18.09.1-3.el7                     docker-ce-stable")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"docker-ce.x86_64            3:18.09.0-3.el7                     docker-ce-stable")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"docker-ce.x86_64            18.06.3.ce-3.el7                    docker-ce-stable")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"docker-ce.x86_64            18.06.2.ce-3.el7                    docker-ce-stable")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"docker-ce.x86_64            18.06.1.ce-3.el7                    docker-ce-stable")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"docker-ce.x86_64            18.06.0.ce-3.el7                    docker-ce-stable")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"docker-ce.x86_64            18.03.1.ce-1.el7.centos             docker-ce-stable")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"docker-ce.x86_64            18.03.0.ce-1.el7.centos             docker-ce-stable")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"docker-ce.x86_64            17.12.1.ce-1.el7.centos             docker-ce-stable")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"docker-ce.x86_64            17.12.0.ce-1.el7.centos             docker-ce-stable")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"docker-ce.x86_64            17.09.1.ce-1.el7.centos             docker-ce-stable")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"docker-ce.x86_64            17.09.0.ce-1.el7.centos             docker-ce-stable")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"docker-ce.x86_64            17.06.2.ce-1.el7.centos             docker-ce-stable")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"docker-ce.x86_64            17.06.1.ce-1.el7.centos             docker-ce-stable")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"docker-ce.x86_64            17.06.0.ce-1.el7.centos             docker-ce-stable")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"docker-ce.x86_64            17.03.3.ce-1.el7                    docker-ce-stable")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"docker-ce.x86_64            17.03.2.ce-1.el7.centos             docker-ce-stable")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"docker-ce.x86_64            17.03.1.ce-1.el7.centos             docker-ce-stable")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"docker-ce.x86_64            17.03.0.ce-1.el7.centos             docker-ce-stable")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}}," * base: mirrors.neusoft.edu.cn")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Available Packages")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Rv=s("p",null,[s("strong",null,"3.\u5B89\u88C5Docker18.09\u7248\u672C")],-1),Tv=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# yum -y install docker-ce-18.09.9-3.el7 docker-ce-cli-18.09.9-3.el7")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Iv=s("p",null,[s("strong",null,"4.\u8BBE\u7F6Ecgroup\u9A71\u52A8\u4F7F\u7528systemd")],-1),Ov=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# mkdir /etc/docker")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# cat > /etc/docker/daemon.json <<EOF")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    {")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'      "registry-mirrors": ["https://dx5z2hy7.mirror.aliyuncs.com"],')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'      "exec-opts": ["native.cgroupdriver=systemd"]')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    }")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"EOF")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Mv=s("p",null,[s("strong",null,"5.\u542F\u52A8\u540E\u53F0\u8FDB\u7A0B")],-1),wv=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# systemctl enable docker && systemctl start docker")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Kv=s("p",null,[s("strong",null,"6.\u67E5\u770BDocker\u7248\u672C")],-1),Lv=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# docker --version")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Docker version 18.09.9, build 039a7df9ba")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Uv=s("h3",{id:"\u90E8\u7F72kubadm\u548Ckubelet",tabindex:"-1"},[n("\u90E8\u7F72kubadm\u548Ckubelet "),s("a",{class:"header-anchor",href:"#\u90E8\u7F72kubadm\u548Ckubelet","aria-hidden":"true"},"#")],-1),jv=s("p",null,"\u5728Kubernetes\u96C6\u7FA4\u7684\u6240\u6709\u8282\u70B9\u4E0A\u90E8\u7F72\u5B8C\u6BD5Docker\u540E\uFF0C\u8FD8\u9700\u8981\u5168\u90E8\u90E8\u7F72kubeadm\u548Ckubelet\uFF0C\u5176\u4E2Dkubeadm\u662F\u7BA1\u7406\u5DE5\u5177\uFF0Ckubelet\u662F\u4E00\u4E2A\u670D\u52A1\uFF0C\u7528\u4E8E\u542F\u52A8Kubernetes\u5BF9\u5E94\u7684\u670D\u52A1\u3002",-1),Gv=s("p",null,[s("strong",null,"1.\u8BBE\u7F6Ekubernetes YUM\u4ED3\u5E93")],-1),Hv=s("p",null,"\u8FD9\u91CC\u5728\u5B98\u65B9\u6587\u6863\u7684\u57FA\u7840\u4E0A\u4FEE\u6539\u4E3A\u4E86\u56FD\u5185\u963F\u91CC\u4E91\u7684yum\u4ED3\u5E93\uFF0C",-1),Fv=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# vim /etc/yum.repos.d/kubernetes.repo")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[kubernetes]")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"name=Kubernetes")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"baseurl=https://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64/")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"enabled=1")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"gpgcheck=1")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"repo_gpgcheck=1")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"gpgkey=https://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg https://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Vv=s("blockquote",null,[s("p",null,"\u6CE8\u610F\uFF1A\u6700\u4E0B\u9762\u4E00\u884Cgpgkey\u7684\u4E24\u4E2AURL\u5730\u5740\u4E4B\u95F4\u662F\u7A7A\u683C\uFF0C\u56E0\u4E3A\u6392\u7248\u95EE\u9898\u53EF\u80FD\u5BFC\u81F4\u6362\u884C\u3002")],-1),Bv=s("p",null,[s("strong",null,"2.\u5B89\u88C5\u8F6F\u4EF6\u5305")],-1),qv=s("p",null,"\u7531\u4E8E\u7248\u672C\u66F4\u65B0\u9891\u7E41\uFF0C\u8BF7\u6307\u5B9A\u5BF9\u5E94\u7684\u7248\u672C\u53F7\uFF0C\u672C\u6587\u91C7\u75281.16.2\u7248\u672C\uFF0C\u5176\u5B83\u7248\u672C\u672A\u7ECF\u6D4B\u8BD5\uFF0C\u5982\u679C\u4E0D\u6307\u5B9A\u7248\u672C\u9ED8\u8BA4\u5B89\u88C5\u6700\u65B0\u7248\u672C\u3002",-1),Yv=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# yum install -y kubelet-1.16.2 kubeadm-1.16.2 kubectl-1.16.2 ipvsadm")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),zv=s("p",null,[s("strong",null,"3.\u914D\u7F6Ekubelet")],-1),$v=s("p",null,"\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0CKubelet\u4E0D\u5141\u8BB8\u6240\u5728\u7684\u4E3B\u673A\u5B58\u5728\u4EA4\u6362\u5206\u533A\uFF0C\u540E\u671F\u89C4\u5212\u7684\u65F6\u5019\uFF0C\u53EF\u4EE5\u8003\u8651\u5728\u7CFB\u7EDF\u5B89\u88C5\u7684\u65F6\u5019\u4E0D\u521B\u5EFA\u4EA4\u6362\u5206\u533A\uFF0C\u9488\u5BF9\u5DF2\u7ECF\u5B58\u5728\u4EA4\u6362\u5206\u533A\u7684\u53EF\u4EE5\u8BBE\u7F6E\u5FFD\u7565\u7981\u6B62\u4F7F\u7528Swap\u7684\u9650\u5236\uFF0C\u4E0D\u7136\u65E0\u6CD5\u542F\u52A8Kubelet\u3002",-1),Xv=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# vim /etc/sysconfig/kubelet")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'KUBELET_CGROUP_ARGS="--cgroup-driver=systemd"')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'KUBELET_EXTRA_ARGS="--fail-swap-on=false"')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Jv=s("p",null,"\u5728\u6240\u6709\u8282\u70B9\u4E0A\u5173\u95EDSWAP",-1),Wv=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# swapoff -a")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Qv=s("p",null,[s("strong",null,"4.\u8BBE\u7F6E\u5185\u6838\u53C2\u6570")],-1),Zv=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# cat <<EOF >  /etc/sysctl.d/k8s.conf")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"net.bridge.bridge-nf-call-ip6tables = 1")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"net.bridge.bridge-nf-call-iptables = 1")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"net.ipv4.ip_forward = 1")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"EOF")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),s0=s("p",null,"\u4F7F\u914D\u7F6E\u751F\u6548",-1),n0=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# sysctl --system")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),l0=s("p",null,[s("strong",null,"5.\u542F\u52A8kubelet\u5E76\u8BBE\u7F6E\u5F00\u673A\u542F\u52A8")],-1),e0=s("p",null,"\u6CE8\u610F\uFF0C\u6B64\u65F6kubelet\u662F\u65E0\u6CD5\u6B63\u5E38\u542F\u52A8\u7684\uFF0C\u53EF\u4EE5\u67E5\u770B/var/log/messages\u6709\u62A5\u9519\u4FE1\u606F\uFF0C\u7B49\u5F85\u6267\u884C\u521D\u59CB\u5316\u4E4B\u540E\u5373\u53EF\u6B63\u5E38\uFF0C\u4E3A\u6B63\u5E38\u73B0\u8C61\u3002",-1),o0=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# systemctl enable kubelet && systemctl start kubelet")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),a0=s("p",null,[s("strong",null,"6.\u4F7F\u7528IPVS\u8FDB\u884C\u8D1F\u8F7D\u5747\u8861")],-1),t0=s("p",null,"\u5728Kubernetes\u96C6\u7FA4\u4E2DKube-Proxy\u7EC4\u4EF6\u8D1F\u8F7D\u5747\u8861\u7684\u529F\u80FD\uFF0C\u9ED8\u8BA4\u4F7F\u7528iptables\uFF0C\u751F\u4EA7\u73AF\u5883\u5EFA\u8BAE\u4F7F\u7528ipvs\u8FDB\u884C\u8D1F\u8F7D\u5747\u8861\u3002\u5728\u6240\u6709\u8282\u70B9\u542F\u7528ipvs\u6A21\u5757",-1),c0=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# vim /etc/sysconfig/modules/ipvs.modules")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#!/bin/bash")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"modprobe -- ip_vs")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"modprobe -- ip_vs_rr")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"modprobe -- ip_vs_wrr")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"modprobe -- ip_vs_sh")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"modprobe -- nf_conntrack_ipv4")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# chmod +x /etc/sysconfig/modules/ipvs.modules")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# source /etc/sysconfig/modules/ipvs.modules")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),i0=s("p",null,"\u67E5\u770B\u6A21\u5757\u662F\u5426\u52A0\u8F7D\u6B63\u5E38",-1),r0=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# lsmod | grep -e ip_vs -e nf_conntrack_ipv4")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"ip_vs_sh               12688  0 ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"ip_vs_wrr              12697  0 ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"ip_vs_rr               12600  0 ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"ip_vs                 145497  6 ip_vs_rr,ip_vs_sh,ip_vs_wrr")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"nf_conntrack_ipv4      15053  15 ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"nf_defrag_ipv4         12729  1 nf_conntrack_ipv4")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"nf_conntrack          133095  7 ip_vs,nf_nat,nf_nat_ipv4,xt_conntrack,nf_nat_masquerade_ipv4,nf_conntrack_netlink,nf_conntrack_ipv4")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"libcrc32c              12644  4 xfs,ip_vs,nf_nat,nf_conntrack")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),p0=s("ul",null,[s("li",null,[n("\u4EE5\u4E0A\u6B65\u9AA4\u8BF7\u5728Kubernetes\u7684\u6240\u6709\u8282\u70B9\u4E0A\u6267\u884C\uFF0C\u672C\u5B9E\u9A8C\u73AF\u5883\u662F\u9700\u8981\u5728linux-node1\u3001linux-node2\u3001linux-node3\u8FD9\u4E09\u53F0\u673A\u5668\u4E0A\u5747\u5B89\u88C5Docker\u3001kubeadm\u3001kubelet\uFF0C\u5BF9\u4E8E\u4EE5\u4E0A\u64CD\u4F5C\u9700\u8981\u81EA\u52A8\u5316\u53EF\u4EE5\u53C2\u8003\u6211\u4F7F\u7528SaltStack\u5B8C\u6210\u7684salt-kubeadm\u9879\u76EE\uFF1A"),s("a",{href:"https://github.com/unixhot/salt-kubeadm",target:"_blank",rel:"noreferrer"},"https://github.com/unixhot/salt-kubeadm")])],-1),d0=s("h3",{id:"\u521D\u59CB\u5316\u96C6\u7FA4\u90E8\u7F72master",tabindex:"-1"},[n("\u521D\u59CB\u5316\u96C6\u7FA4\u90E8\u7F72Master "),s("a",{class:"header-anchor",href:"#\u521D\u59CB\u5316\u96C6\u7FA4\u90E8\u7F72master","aria-hidden":"true"},"#")],-1),A0=s("p",null,"\u5728\u6240\u6709\u8282\u70B9\u4E0A\u5B89\u88C5\u5B8C\u6BD5\u540E\uFF0C\u5728linux-node1\u8FD9\u53F0Master\u8282\u70B9\u4E0A\u8FDB\u884C\u96C6\u7FA4\u7684\u521D\u59CB\u5316\u5DE5\u4F5C\u3002",-1),C0=s("p",null,[s("strong",null,"1.\u5BFC\u51FA\u6240\u6709\u9ED8\u8BA4\u7684\u914D\u7F6E")],-1),u0=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# kubeadm config print init-defaults > kubeadm.yaml")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),y0=s("p",null,"\u4E0A\u9762\u7684\u547D\u4EE4\u4F1A\u751F\u6210\u4E00\u4E2A\u9ED8\u8BA4\u914D\u7F6E\u7684kubeadm\u914D\u7F6E\u6587\u4EF6\uFF0C\u7136\u540E\u5728\u6B64\u57FA\u7840\u4E0A\u8FDB\u884C\u4FEE\u6539\u5373\u53EF\u3002",-1),h0=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# cat kubeadm.yaml ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"apiVersion: kubeadm.k8s.io/v1beta2")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"bootstrapTokens:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"- groups:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  - system:bootstrappers:kubeadm:default-node-token")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  token: abcdef.0123456789abcdef")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  ttl: 24h0m0s")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  usages:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  - signing")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  - authentication")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"kind: InitConfiguration")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"localAPIEndpoint:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  advertiseAddress: 192.168.56.11  #\u4FEE\u6539\u4E3AAPI Server\u7684\u5730\u5740")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  bindPort: 6443")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"nodeRegistration:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  criSocket: /var/run/dockershim.sock")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  name: linux-node1.example.com")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  taints:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  - effect: NoSchedule")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    key: node-role.kubernetes.io/master")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"---")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"apiServer:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  timeoutForControlPlane: 4m0s")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"apiVersion: kubeadm.k8s.io/v1beta2")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"certificatesDir: /etc/kubernetes/pki")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"clusterName: kubernetes")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"controllerManager: {}")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"dns:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  type: CoreDNS")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"etcd:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  local:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    dataDir: /var/lib/etcd")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"imageRepository: registry.aliyuncs.com/google_containers  #\u4FEE\u6539\u4E3A\u963F\u91CC\u4E91\u955C\u50CF\u4ED3\u5E93")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"kind: ClusterConfiguration")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"kubernetesVersion: v1.16.2  #\u4FEE\u6539\u4E3A\u5177\u4F53\u7684\u7248\u672C")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"networking:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  dnsDomain: cluster.local")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  serviceSubnet: 10.1.0.0/16   #\u4FEE\u6539Service\u7684\u7F51\u7EDC")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  podSubnet: 10.2.0.0/16      #\u65B0\u589EPod\u7684\u7F51\u7EDC")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"scheduler: {}")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"---   #\u4E0B\u9762\u6709\u589E\u52A0\u7684\u4E09\u884C\u914D\u7F6E\uFF0C\u7528\u4E8E\u8BBE\u7F6EKubeproxy\u4F7F\u7528LVS")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"apiVersion: kubeproxy.config.k8s.io/v1alpha1")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"kind: KubeProxyConfiguration")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"mode: ipvs")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),_0=s("p",null,[s("strong",null,"2. \u6267\u884C\u521D\u59CB\u5316\u64CD\u4F5C")],-1),D0=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# kubeadm init --config kubeadm.yaml")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[init] Using Kubernetes version: v1.16.2")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[preflight] Running pre-flight checks")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"error execution phase preflight: [preflight] Some fatal errors occurred:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        [ERROR NumCPU]: the number of available CPUs 1 is less than the required 2")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        [ERROR Swap]: running with swap on is not supported. Please disable swa")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[preflight] If you know what you are doing, you can make a check non-fatal with `--ignore-preflight-errors=...`")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"To see the stack trace of this error execute with --v=5 or higher")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),g0=s("p",null,"\u5982\u679C\u9047\u5230\u4E0A\u9762\u8FD9\u6837\u7684\u62A5\u9519\uFF0C\u662F\u56E0\u4E3A\u5728\u5B9E\u9A8C\u73AF\u5883\u5F00\u542F\u4E86\u4EA4\u6362\u5206\u533A\uFF0C\u4EE5\u53CACPU\u7684\u6838\u6570\u5C0F\u4E8E2\u9020\u6210\u7684\uFF0C\u53EF\u4EE5\u4F7F\u7528--ignore-preflight-errors=\u8FDB\u884C\u5FFD\u7565\u3002 --ignore-preflight-errors=\uFF1A\u5FFD\u7565\u8FD0\u884C\u65F6\u7684\u9519\u8BEF\uFF0C\u4F8B\u5982\u4E0A\u9762\u76EE\u524D\u5B58\u5728[ERROR NumCPU]\u548C[ERROR Swap]\uFF0C\u5FFD\u7565\u8FD9\u4E24\u4E2A\u62A5\u9519\u5C31\u662F\u589E\u52A0--ignore-preflight-errors=NumCPU \u548C--ignore-preflight-errors=Swap\u7684\u914D\u7F6E\u5373\u53EF\u3002",-1),m0=s("p",null,"\u518D\u6B21\u6267\u884C\u521D\u59CB\u5316\u64CD\u4F5C\uFF1A",-1),b0=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# kubeadm init --config kubeadm.yaml \\")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  --ignore-preflight-errors=Swap,NumCPU ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[init] Using Kubernetes version: v1.16.2")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[preflight] Running pre-flight checks")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        [WARNING NumCPU]: the number of available CPUs 1 is less than the required 2")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        [WARNING Swap]: running with swap on is not supported. Please disable swap")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[preflight] Pulling images required for setting up a Kubernetes cluster")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[preflight] This might take a minute or two, depending on the speed of your internet connection")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[preflight] You can also perform this action in beforehand using 'kubeadm config images pull'")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),k0=s("p",null,"\u6267\u884C\u5B8C\u6BD5\u540E\uFF0C\u4F1A\u5728\u5F53\u524D\u8F93\u51FA\u4E0B\u505C\u7559\uFF0C\u7B49\u5F85\u4E0B\u8F7DKubernetes\u7EC4\u4EF6\u7684Docker\u955C\u50CF\u3002\u6839\u636E\u4F60\u7684\u7F51\u7EDC\u60C5\u51B5\uFF0C\u53EF\u4EE5\u6301\u7EED1-5\u5206\u949F\uFF0C\u4F60\u4E5F\u53EF\u4EE5\u4F7F\u7528docker images\u67E5\u770B\u4E0B\u8F7D\u7684\u955C\u50CF\u3002\u955C\u50CF\u4E0B\u8F7D\u5B8C\u6BD5\u4E4B\u540E\uFF0C\u5C31\u4F1A\u8FDB\u884C\u521D\u59CB\u64CD\u4F5C\uFF1A",-1),v0=s("p",null,"\u8FD9\u91CC\u7701\u7565\u4E86\u6240\u6709\u8F93\u51FA\uFF0C\u521D\u59CB\u5316\u64CD\u4F5C\u4E3B\u8981\u7ECF\u5386\u4E86\u4E0B\u976215\u4E2A\u6B65\u9AA4\uFF0C\u6BCF\u4E2A\u9636\u6BB5\u5747\u8F93\u51FA\u5747\u4F7F\u7528[\u6B65\u9AA4\u540D\u79F0]\u4F5C\u4E3A\u5F00\u5934\uFF1A",-1),x0=s("ol",null,[s("li",null,"[init]\uFF1A\u6307\u5B9A\u7248\u672C\u8FDB\u884C\u521D\u59CB\u5316\u64CD\u4F5C"),s("li",null,"[preflight] \uFF1A\u521D\u59CB\u5316\u524D\u7684\u68C0\u67E5\u548C\u4E0B\u8F7D\u6240\u9700\u8981\u7684Docker\u955C\u50CF\u6587\u4EF6\u3002"),s("li",null,"[kubelet-start]\uFF1A\u751F\u6210kubelet\u7684\u914D\u7F6E\u6587\u4EF6\u201D/var/lib/kubelet/config.yaml\u201D\uFF0C\u6CA1\u6709\u8FD9\u4E2A\u6587\u4EF6kubelet\u65E0\u6CD5\u542F\u52A8\uFF0C\u6240\u4EE5\u521D\u59CB\u5316\u4E4B\u524D\u7684kubelet\u5B9E\u9645\u4E0A\u542F\u52A8\u5931\u8D25\u3002"),s("li",null,"[certificates]\uFF1A\u751F\u6210Kubernetes\u4F7F\u7528\u7684\u8BC1\u4E66\uFF0C\u5B58\u653E\u5728/etc/kubernetes/pki\u76EE\u5F55\u4E2D\u3002"),s("li",null,"[kubeconfig] \uFF1A\u751F\u6210 KubeConfig\u6587\u4EF6\uFF0C\u5B58\u653E\u5728/etc/kubernetes\u76EE\u5F55\u4E2D\uFF0C\u7EC4\u4EF6\u4E4B\u95F4\u901A\u4FE1\u9700\u8981\u4F7F\u7528\u5BF9\u5E94\u6587\u4EF6\u3002"),s("li",null,"[control-plane]\uFF1A\u4F7F\u7528/etc/kubernetes/manifest\u76EE\u5F55\u4E0B\u7684YAML\u6587\u4EF6\uFF0C\u5B89\u88C5 Master\u7EC4\u4EF6\u3002"),s("li",null,"[etcd]\uFF1A\u4F7F\u7528/etc/kubernetes/manifest/etcd.yaml\u5B89\u88C5Etcd\u670D\u52A1\u3002"),s("li",null,"[wait-control-plane]\uFF1A\u7B49\u5F85control-plan\u90E8\u7F72\u7684Master\u7EC4\u4EF6\u542F\u52A8\u3002"),s("li",null,"[apiclient]\uFF1A\u68C0\u67E5Master\u7EC4\u4EF6\u670D\u52A1\u72B6\u6001\u3002"),s("li",null,"[uploadconfig]\uFF1A\u66F4\u65B0\u914D\u7F6E"),s("li",null,"[kubelet]\uFF1A\u4F7F\u7528configMap\u914D\u7F6Ekubelet\u3002"),s("li",null,"[patchnode]\uFF1A\u66F4\u65B0CNI\u4FE1\u606F\u5230Node\u4E0A\uFF0C\u901A\u8FC7\u6CE8\u91CA\u7684\u65B9\u5F0F\u8BB0\u5F55\u3002"),s("li",null,"[mark-control-plane]\uFF1A\u4E3A\u5F53\u524D\u8282\u70B9\u6253\u6807\u7B7E\uFF0C\u6253\u4E86\u89D2\u8272Master\uFF0C\u548C\u4E0D\u53EF\u8C03\u5EA6\u6807\u7B7E\uFF0C\u8FD9\u6837\u9ED8\u8BA4\u5C31\u4E0D\u4F1A\u4F7F\u7528Master\u8282\u70B9\u6765\u8FD0\u884CPod\u3002"),s("li",null,"[bootstrap-token]\uFF1A\u751F\u6210token\u8BB0\u5F55\u4E0B\u6765\uFF0C\u540E\u8FB9\u4F7F\u7528kubeadm join\u5F80\u96C6\u7FA4\u4E2D\u6DFB\u52A0\u8282\u70B9\u65F6\u4F1A\u7528\u5230"),s("li",null,"[addons]\uFF1A\u5B89\u88C5\u9644\u52A0\u7EC4\u4EF6CoreDNS\u548Ckube-proxy")],-1),f0=s("p",null,"\u6210\u529F\u6267\u884C\u4E4B\u540E\uFF0C\u4F60\u4F1A\u770B\u5230\u4E0B\u9762\u7684\u8F93\u51FA\uFF1A",-1),S0=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Your Kubernetes master has initialized successfully!")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"To start using your cluster, you need to run the following as a regular user:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"mkdir -p $HOME/.kube")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"sudo chown $(id -u):$(id -g) $HOME/.kube/config")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"You should now deploy a pod network to the cluster.")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'Run "kubectl apply -f [podnetwork].yaml" with one of the options listed at:')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"https://kubernetes.io/docs/concepts/cluster-administration/addons/")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"You can now join any number of machines by running the following on each node")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"as root:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"kubeadm join 192.168.56.11:6443 --token 19fhhl.3mzkyk16tcgp6vga --discovery-token-ca-cert-hash sha256:76a88c38b673d3b2ac73e33127a809688cb3e58c533512ac6d92ecb66aa57a45")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),E0=s("p",null,"\u5982\u679C\u6267\u884C\u5931\u8D25\uFF0C\u90A3\u610F\u5473\u7740\u4E4B\u524D\u7684\u64CD\u4F5C\u5B58\u5728\u95EE\u9898\uFF0C\u68C0\u67E5\u987A\u5E8F\u5982\u4E0B\uFF1A",-1),P0=s("ul",null,[s("li",null,"\u57FA\u7840\u73AF\u5883"),s("li",null,"\u4E3B\u673A\u540D\u662F\u5426\u53EF\u4EE5\u89E3\u6790\uFF0CSELinux\uFF0Ciptables\u662F\u5426\u5173\u95ED\u3002"),s("li",null,"\u4EA4\u6362\u5206\u533A\u662F\u5426\u5B58\u5728free -m\u67E5\u770B"),s("li",null,"\u5185\u6838\u53C2\u6570\u662F\u5426\u4FEE\u6539\u3001IPVS\u662F\u5426\u4FEE\u6539\uFF08\u76EE\u524D\u9636\u6BB5\u4E0D\u4F1A\u9020\u6210\u5931\u8D25\uFF09"),s("li",null,"\u57FA\u7840\u8F6F\u4EF6"),s("li",null,"Docker\u662F\u5426\u5B89\u88C5\u5E76\u542F\u52A8"),s("li",null,"Kubelet\u662F\u5426\u5B89\u88C5\u5E76\u542F\u52A8"),s("li",null,"\u6267\u884Ckubeadm\u662F\u5426\u6709\u522B\u7684\u62A5\u9519\u662F\u5426\u5FFD\u7565"),s("li",null,"systemctl status kubelet\u67E5\u770Bkubelet\u662F\u5426\u542F\u52A8"),s("li",null,"\u5982\u679Ckubelet\u65E0\u6CD5\u542F\u52A8\uFF0C\u67E5\u770B\u65E5\u5FD7\u6709\u4EC0\u4E48\u62A5\u9519\uFF0C\u5E76\u89E3\u51B3\u62A5\u9519\u3002"),s("li",null,"\u4EE5\u4E0A\u90FD\u89E3\u51B3\u5B8C\u6BD5\uFF0C\u9700\u8981\u91CD\u65B0\u521D\u59CB\u5316"),s("li",null,"kubeadm reset \u8FDB\u884C\u91CD\u7F6E\uFF08\u751F\u4EA7\u5343\u4E07\u4E0D\u8981\u6267\u884C\uFF0C\u4F1A\u76F4\u63A5\u5220\u9664\u96C6\u7FA4\uFF09"),s("li",null,"\u6839\u636Ekubeadm reset \u63D0\u5347\uFF0C\u6E05\u695Aiptables\u548CLVS\u3002")],-1),N0=s("p",null,"\u8BF7\u6839\u636E\u4E0A\u9762\u8F93\u51FA\u7684\u8981\u6C42\u914D\u7F6Ekubectl\u547D\u4EE4\u6765\u8BBF\u95EE\u96C6\u7FA4\u3002",-1),R0=s("p",null,[s("strong",null,"3.\u4E3Akubectl\u51C6\u5907Kubeconfig\u6587\u4EF6\u3002")],-1),T0=s("p",null,"kubectl\u9ED8\u8BA4\u4F1A\u5728\u6267\u884C\u7684\u7528\u6237\u5BB6\u76EE\u5F55\u4E0B\u9762\u7684.kube\u76EE\u5F55\u4E0B\u5BFB\u627Econfig\u6587\u4EF6\u3002\u8FD9\u91CC\u662F\u5C06\u5728\u521D\u59CB\u5316\u65F6[kubeconfig]\u6B65\u9AA4\u751F\u6210\u7684admin.conf\u62F7\u8D1D\u5230.kube/config\u3002",-1),I0=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# mkdir -p $HOME/.kube")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# cp -i /etc/kubernetes/admin.conf $HOME/.kube/config")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# chown $(id -u):$(id -g) $HOME/.kube/config")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),O0=s("p",null,"\u5728\u8BE5\u914D\u7F6E\u6587\u4EF6\u4E2D\uFF0C\u8BB0\u5F55\u4E86API Server\u7684\u8BBF\u95EE\u5730\u5740\uFF0C\u6240\u4EE5\u540E\u9762\u76F4\u63A5\u6267\u884Ckubectl\u547D\u4EE4\u5C31\u53EF\u4EE5\u6B63\u5E38\u8FDE\u63A5\u5230API Server\u4E2D\u3002",-1),M0=s("p",null,[s("strong",null,"4.\u4F7F\u7528kubectl\u547D\u4EE4\u67E5\u770B\u7EC4\u4EF6\u72B6\u6001")],-1),w0=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# kubectl get cs")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"NAME STATUS MESSAGE ERROR")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"scheduler Healthy ok")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"controller-manager Healthy ok")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'etcd-0 Healthy {"health": "true"}')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),K0=s("p",null,"**\u77E5\u8BC6\u56DE\u987E\uFF1A\u4E3A\u4EC0\u4E48\u4E0A\u9762\u7684\u8F93\u51FA\u6CA1\u6709\u663E\u793AAPI Server\u7EC4\u4EF6\u7684\u72B6\u6001",-1),L0=s("p",null,"\u56E0\u4E3AAPI Server\u662FKubernetes\u96C6\u7FA4\u7684\u5165\u53E3\uFF0C\u6240\u6709\u548CKubernetes\u96C6\u7FA4\u7684\u4EA4\u4E92\u90FD\u5FC5\u987B\u7ECF\u8FC7APIServer\uFF0Ckubectl\u547D\u4EE4\u4E5F\u662F\u8FDE\u63A5\u5230API Server\u4E0A\u8FDB\u884C\u4EA4\u4E92\uFF0C\u6240\u4EE5\u5982\u679C\u80FD\u591F\u6B63\u5E38\u4F7F\u7528kubectl\u6267\u884C\u547D\u4EE4\uFF0C\u610F\u5473\u7740API Server\u8FD0\u884C\u6B63\u5E38\u3002",-1),U0=s("p",null,[s("strong",null,"5.\u4F7F\u7528kubectl\u83B7\u53D6Node\u4FE1\u606F")],-1),j0=s("p",null,"\u76EE\u524D\u53EA\u6709\u4E00\u4E2A\u8282\u70B9\uFF0C\u89D2\u8272\u662FMaster\uFF0C\u72B6\u6001\u662FNotReady\u3002",-1),G0=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# kubectl get node")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"NAME STATUS ROLES AGE VERSION")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"linux-node1.unixhot.com NotReady master 14m v1.16.2")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),H0=s("h3",{id:"\u90E8\u7F72\u7F51\u7EDC\u63D2\u4EF6",tabindex:"-1"},[n("\u90E8\u7F72\u7F51\u7EDC\u63D2\u4EF6 "),s("a",{class:"header-anchor",href:"#\u90E8\u7F72\u7F51\u7EDC\u63D2\u4EF6","aria-hidden":"true"},"#")],-1),F0=s("p",null,"Master\u8282\u70B9NotReady\u7684\u539F\u56E0\u5C31\u662F\u56E0\u4E3A\u6CA1\u6709\u4F7F\u7528\u4EFB\u4F55\u7684\u7F51\u7EDC\u63D2\u4EF6\uFF0C\u6B64\u65F6Node\u548CMaster\u7684\u8FDE\u63A5\u8FD8\u4E0D\u6B63\u5E38\u3002\u76EE\u524D\u6700\u6D41\u884C\u7684Kubernetes\u7F51\u7EDC\u63D2\u4EF6\u6709Flannel\u3001Calico\u3001Canal\uFF0C\u8FD9\u91CC\u5206\u522B\u5217\u4E3E\u4E86Canal\u548CFlannel\uFF0C\u4F60\u53EF\u4EE5\u9009\u62E9\u5176\u4E2D\u4E4B\u4E00\u8FDB\u884C\u90E8\u7F72\u3002 \u56E0\u4E3A\u57FA\u7840\u7684Kubernetes\u96C6\u7FA4\u5DF2\u7ECF\u914D\u7F6E\u5B8C\u6BD5\uFF0C\u540E\u9762\u7684\u589E\u52A0\u7EC4\u4EF6\u7B49\u64CD\u4F5C\uFF0C\u51E0\u4E4E\u90FD\u53EF\u4EE5\u4F7F\u7528kubectl\u548C\u4E00\u4E2AYAML\u914D\u7F6E\u6587\u4EF6\u6765\u5B8C\u6210\u3002",-1),V0=s("p",null,"\u3010\u90E8\u7F72canal\u7F51\u7EDC\u63D2\u4EF6\u3011",-1),B0=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# kubectl apply -f https://docs.projectcalico.org/v3.3/getting-started/kubernetes/installation/hosted/canal/rbac.yaml")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# kubectl apply -f https://docs.projectcalico.org/v3.3/getting-started/kubernetes/installation/hosted/canal/canal.yaml")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),q0=s("p",null,"\u3010\u90E8\u7F72Flannel\u7F51\u7EDC\u63D2\u4EF6\u3011\uFF08\u63A8\u8350\uFF09 \u90E8\u7F72Flannel\u7F51\u7EDC\u63D2\u4EF6\u9700\u8981\u4FEE\u6539Pod\u7684IP\u5730\u5740\u6BB5\uFF0C\u4FEE\u6539\u4E3A\u548C\u4F60\u521D\u59CB\u5316\u4E00\u76F4\u7684\u7F51\u6BB5\uFF0C\u53EF\u4EE5\u5148\u4E0B\u8F7DFlannel\u7684YAML\u6587\u4EF6\u4FEE\u6539\u540E\uFF0C\u518D\u6267\u884C\u3002",-1),Y0=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# git clone --depth 1 https://github.com/coreos/flannel.git")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# cd flannel/Documentation/")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 Documentation]# vim kube-flannel.yml")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'# \u4FEE\u6539"Network": "10.244.0.0/16"\u4E3A"Network": "10.2.0.0/16",')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"74   net-conf.json: |")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"75     {")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'76       "Network": "10.2.0.0/16",')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'77       "Backend": {')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'78         "Type": "vxlan"')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"79       }")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"80     }")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# \u8BF7\u6CE8\u610F\uFF0CFlannel\u7684\u955C\u50CF\u62C9\u53D6\u901F\u5EA6\u4F1A\u6BD4\u8F83\u6162\uFF0C\u53EF\u4EE5\u66FF\u6362\u4E3A\u56FD\u5185\u955C\u50CF")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# image: quay.io/coreos/flannel:v0.10.0-amd64")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"image: quay-mirror.qiniu.com/coreos/flannel:v0.11.0-amd64")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# \u5982\u679CNode\u4E2D\u6709\u591A\u4E2A\u7F51\u5361\uFF0C\u53EF\u4EE5\u4F7F\u7528--iface\u6765\u6307\u5B9A\u5BF9\u5E94\u7684\u7F51\u5361\u53C2\u6570\u3002")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"containers:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"      - name: kube-flannel")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        image: quay-mirror.qiniu.com/coreos/flannel:v0.11.0-amd64")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        command:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        - /opt/bin/flanneld")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        args:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        - --ip-masq")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        - --kube-subnet-mgr")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        - --iface=eth0")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),z0=s("p",null,"\u90E8\u7F72Flannel",-1),$0=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 Documentation]# kubectl create -f kube-flannel.yml")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),X0=s("p",null,"\u67E5\u770BPod\u72B6\u6001",-1),J0=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 Documentation]# kubectl get pod -n kube-system")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"NAME                                              READY   STATUS     RESTARTS   AGE")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"coredns-58cc8c89f4-cjhdv                          0/1     Pending    0          41m")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"coredns-58cc8c89f4-vdfn2                          0/1     Pending    0          41m")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"etcd-linux-node1.unixhot.com                      1/1     Running    0          41m")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"kube-apiserver-linux-node1.unixhot.com            1/1     Running    0          40m")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"kube-controller-manager-linux-node1.unixhot.com   1/1     Running    1          40m")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"kube-flannel-ds-amd64-bwsxl                       0/1     Init:0/1   0          20s")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"kube-proxy-5qrmh                                  1/1     Running    0          41m")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"kube-scheduler-linux-node1.unixhot.com            1/1     Running    1          41m")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),W0=s("p",null,"\u53EF\u4EE5\u770B\u5230\u6B64\u65F6CoreDNS\u5904\u4E8EPending\u72B6\u6001\uFF0C\u9700\u8981\u7B49\u5F85\u7F51\u7EDC\u63D2\u4EF6canal\u6216\u8005Flannel\u7684Pod\u72B6\u6001\u53D8\u6210Running\u4E4B\u540ECoreDNS\u4E5F\u4F1A\u6B63\u5E38\u3002\u6240\u6709Pod\u7684\u72B6\u6001\u90FD\u53D8\u6210Running\u4E4B\u540E\uFF0C\u8FD9\u4E2A\u65F6\u5019\u518D\u6B21\u83B7\u53D6Node\uFF0C\u4F1A\u53D1\u73B0\u8282\u70B9\u53D8\u6210\u4E86Ready\u72B6\u6001\u3002",-1),Q0=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# kubectl get node")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"NAME STATUS ROLES AGE VERSION")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"linux-node1.unixhot.com Ready master 29m v1.16.2")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Z0=s("p",null,[s("em",null,"kubeadm\u5176\u5B9E\u4F7F\u7528Kubernetes\u90E8\u7F72Kubernetes\uFF0C\u8FD9\u6837\u5C31\u5B58\u5728\u5148\u6709\u9E21\u8FD8\u662F\u5148\u6709\u86CB\u7684\u95EE\u9898\uFF0C\u6240\u4EE5\uFF0C\u6211\u4EEC\u9996\u5148\u624B\u52A8\u90E8\u7F72\u4E86Docker\u548Ckubelet\uFF0C\u7136\u540Ekubeadm\u8C03\u7528kubelet\u4EE5\u9759\u6001Pod\u7684\u65B9\u5F0F\u90E8\u7F72\u4E86Kubernetes\u96C6\u7FA4\u4E2D\u7684\u5176\u5B83\u7EC4\u4EF6\u3002\u9759\u6001Pod\u5728\u540E\u9762\u7684\u7AE0\u8282\u4F1A\u8BB2\u5230\u3002")],-1),s3=s("h3",{id:"\u90E8\u7F72node\u8282\u70B9",tabindex:"-1"},[n("\u90E8\u7F72Node\u8282\u70B9 "),s("a",{class:"header-anchor",href:"#\u90E8\u7F72node\u8282\u70B9","aria-hidden":"true"},"#")],-1),n3=s("p",null,"Master\u8282\u70B9\u90E8\u7F72\u5B8C\u6BD5\u4E4B\u540E\uFF0C\u5C31\u53EF\u4EE5\u90E8\u7F72Node\u8282\u70B9\uFF0C\u9996\u5148\u8BF7\u9075\u5FAA\u90E8\u7F72Docker\u548Ckubeadm\u7AE0\u8282\u4E3ANode\u8282\u70B9\u90E8\u7F72\u5B89\u88C5\u597Ddocker\u3001kubeadm\u548Ckubelet\uFF0C\u6B64\u8FC7\u7A0B\u8FD9\u91CC\u4E0D\u518D\u91CD\u590D\u5217\u51FA\u3002",-1),l3=s("p",null,[s("strong",null,"1.\u5728Master\u8282\u70B9\u8F93\u51FA\u589E\u52A0\u8282\u70B9\u7684\u547D\u4EE4")],-1),e3=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# kubeadm token create --print-join-command")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"kubeadm join 192.168.56.11:6443 --token isggqa.xjwsm3i6nex91d2x --discovery-token-ca-cert-hash sha256:718827895a9a5e63dfa9ff54e16ad6dc0c493139c9c573b67ad66968036cd569")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),o3=s("p",null,[s("strong",null,"2.\u5728Node\u8282\u70B9\u6267\u884C")],-1),a3=s("p",null,"\u6CE8\u610F\u5982\u679C\u8282\u70B9\u6709\u4EA4\u6362\u5206\u533A\uFF0C\u9700\u8981\u589E\u52A0--ignore-preflight-errors=Swap\u3002",-1),t3=s("p",null,"\u90E8\u7F72linux-node2",-1),c3=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node2 ~]# kubeadm join 192.168.56.11:6443 --token isggqa.xjwsm3i6nex91d2x --discovery-token-ca-cert-hash sha256:718827895a9a5e63dfa9ff54e16ad6dc0c493139c9c573b67ad66968036cd569 --ignore-preflight-errors=Swap")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),i3=s("p",null,"\u90E8\u7F72linux-node3",-1),r3=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node3 ~]# kubeadm join 192.168.56.11:6443 --tokenisggqa.xjwsm3i6nex91d2x --discovery-token-ca-cert-hash sha256:718827895a9a5e63dfa9ff54e16ad6dc0c493139c9c573b67ad66968036cd569 --ignore-preflight-errors=Swap")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),p3=s("p",null,"\u8FD9\u4E2A\u65F6\u5019kubernetes\u4F1A\u4F7F\u7528DaemonSet\u5728\u6240\u6709\u8282\u70B9\u4E0A\u90FD\u90E8\u7F72canal/flannel\u548Ckube-proxy\u3002\u90E8\u7F72\u5B8C\u6BD5\u4E4B\u540E\u8282\u70B9\u5373\u90E8\u7F72\u5B8C\u6BD5\u3002DaemonSet\u7684\u5185\u5BB9\u540E\u9762\u4F1A\u8BB2\u89E3\u3002",-1),d3=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    [root@linux-node1 ~]# kubectl get daemonset --all-namespaces")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    NAMESPACE NAME DESIRED CURRENT READY UP-TO-DATE AVAILABLE NODE SELECTOR AGE")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    kube-system canal 2 2 1 2 1 beta.kubernetes.io/os=linux 17m")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    kube-system kube-proxy 2 2 2 2 2 <none> 47m")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),A3=s("p",null,"\u5F85\u6240\u6709Pod\u5168\u90E8\u542F\u52A8\u5B8C\u6BD5\u4E4B\u540E\uFF0C\u8282\u70B9\u5C31\u6062\u590DReady\u72B6\u6001\u3002",-1),C3=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    [root@linux-node1 ~]# kubectl get pod --all-namespaces")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    NAMESPACE NAME READY STATUS RESTARTS AGE")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    kube-system canal-lv92w 3/3 Running 0 8m45s")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    kube-system canal-rq5n5 3/3 Running 0 23m")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    kube-system coredns-78d4cf999f-5k4sg 1/1 Running 0 53m")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    kube-system coredns-78d4cf999f-bnbgf 1/1 Running 0 53m")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    kube-system etcd-linux-node1.linuxhot.com 1/1 Running 0 52m")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    kube-system kube-apiserver-linux-node1.linuxhot.com 1/1 Running 0 52m")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    kube-system kube-controller-manager-linux-node1.linuxhot.com 1/1 Running 0 52m")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    kube-system kube-proxy-sddlp 1/1 Running 0 53m")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    kube-system kube-proxy-tw96b 1/1 Running 0 8m45s")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    kube-system kube-scheduler-linux-node1.linuxhot.com 1/1 Running 0 52m")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),u3=s("p",null,[s("strong",null,"\u67E5\u770B\u6240\u6709\u8282\u70B9"),n(" `` [root@linux-node1 ~]# kubectl get node NAME STATUS ROLES AGE VERSION "),s("a",{href:"http://linux-node1.linuxhot.com",target:"_blank",rel:"noreferrer"},"linux-node1.linuxhot.com"),n(" Ready master 49m v1.13.2 "),s("a",{href:"http://linux-node2.linuxhot.com",target:"_blank",rel:"noreferrer"},"linux-node2.linuxhot.com"),n(" Ready 4m48s v1.13.2")],-1),y3=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"**\u5982\u4F55\u7ED9Node\u52A0\u4E0ARoles\u6807\u7B7E**")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u4F7F\u7528kubectl get node\u80FD\u591F\u770B\u5230linux-node1.linuxhot.com\u7684ROLES\u662Fmaster\u8FD9\u4E2A\u662F\u5728\u8FDB\u884C\u96C6\u7FA4\u521D\u59CB\u5316\u7684\u65F6\u5019[mark-control-plane]\u8FDB\u884C\u6807\u8BB0\u7684\u3002")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[mark-control-plane] Marking the node linux-node1.linuxhot.com as control-plane")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},`by adding the label "node-role.kubernetes.io/master=''"`)]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[mark-control-plane] Marking the node linux-node1.linuxhot.com as control-plane")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"by adding the taints [node-role.kubernetes.io/master:NoSchedule]")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"1.\u67E5\u770B\u8282\u70B9\u7684\u6807\u7B7E")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# kubectl get nodes --show-labels")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"NAME STATUS ROLES AGE VERSION LABELS")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"linux-node1.linuxhot.com Ready master 48m v1.13.3")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"beta.kubernetes.io/arch=amd64,beta.kubernetes.io/os=linux,kubernetes.io/hostname=linux-node1.linuxhot.com,node-role.kubernetes.io/master=")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"linux-node2.linuxhot.com Ready <none> 7m13s v1.13.3")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"beta.kubernetes.io/arch=amd64,beta.kubernetes.io/os=linux,kubernetes.io/hostname=linux-node2.linuxhot.com")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"2.\u589E\u52A0\u6807\u7B7E")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# kubectl label nodes linux-node2.linuxhot.com")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"node-role.kubernetes.io/node=")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"node/linux-node2.linuxhot.com labeled")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"3.\u67E5\u770B\u6548\u679C")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# kubectl get nodes")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"NAME STATUS ROLES AGE VERSION")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"linux-node1.linuxhot.com Ready master 50m v1.13.3")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"linux-node2.linuxhot.com Ready node 8m41s v1.13.3")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"### \u6D4B\u8BD5Kubernetes\u96C6\u7FA4 {#test}")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u5728\u4E0A\u9762\u7684\u6B65\u9AA4\u4E2D\uFF0C\u6211\u4EEC\u521B\u5EFA\u4E86\u4E00\u4E2AKubernetes\u96C6\u7FA4\uFF0C1\u4E2AMaster\u548C2\u4E2ANode\u8282\u70B9\uFF0C\u5728\u751F\u4EA7\u73AF\u5883\u9700\u8981\u8003\u8651Master\u7684\u9AD8\u53EF\u7528\uFF0C\u8FD9\u91CC\u5148\u4E0D\u7528\u8003\u8651\uFF0C\u540E\u9762\u4F1A\u8BB2\u5230\u3002")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"**1.\u521B\u5EFA\u4E00\u4E2A\u5355Pod\u7684Nginx\u5E94\u7528**")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# kubectl create deployment nginx --image=nginx:alpine")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"deployment.apps/nginx created")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# kubectl get pod")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"NAME READY STATUS RESTARTS AGE")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"nginx-54458cd494-9j7ql 0/1 ContainerCreating 0 10s")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"**2.\u67E5\u770BPod\u8BE6\u7EC6\u4FE1\u606F**")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u5F85Pod\u7684\u72B6\u6001\u4E3ARunning\u540E\uFF0C\u53EF\u4EE5\u83B7\u53D6Pod\u7684IP\u5730\u5740\uFF0C\u8FD9\u4E2AIP\u5730\u5740\u662F\u4ECEMaster\u8282\u70B9\u521D\u59CB\u5316\u7684--pod-network-cidr=10.2.0.0/16\u5730\u5740\u6BB5\u4E2D\u5206\u914D\u7684\u3002")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# kubectl get pod -o wide")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"NAME READY STATUS RESTARTS AGE IP NODE NOMINATED NODE READINESS GATES")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"nginx-54458cd494-9j7ql 1/1 Running 0 59s 10.2.1.2 linux-node2.linuxhot.com")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"<none> <none>")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"**3.\u6D4B\u8BD5Nginx\u8BBF\u95EE**")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# curl --head http://10.2.1.2")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"HTTP/1.1 200 OK")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Server: nginx/1.15.8")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Date: Sun, 13 Jan 2019 01:16:36 GMT")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Content-Type: text/html")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Content-Length: 612")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Last-Modified: Wed, 26 Dec 2018 23:21:49 GMT")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Connection: keep-alive")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'ETag: "5c240d0d-264"')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Accept-Ranges: bytes")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"**4.\u6D4B\u8BD5\u6269\u5BB9**")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u73B0\u5728\u5C06Nginx\u5E94\u7528\u7684Pod\u526F\u672C\u6570\u91CF\u62D3\u5C55\u52302\u4E2A\u8282\u70B9")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# kubectl scale deployment nginx --replicas=2")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"deployment.extensions/nginx scaled")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# kubectl get pod")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"NAME READY STATUS RESTARTS AGE")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"nginx-54458cd494-9j7ql 1/1 Running 0 2m13s")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"nginx-54458cd494-vnm4f 1/1 Running 0 5s")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"**5.\u4E3ANginx\u589E\u52A0Service**")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u4E3ANginx\u589E\u52A0Service\uFF0C\u4F1A\u521B\u5EFA\u4E00\u4E2ACluster")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"IP\uFF0C\u4ECEMaster\u521D\u59CB\u5316\u7684--service-cidr=10.1.0.0/16\u5730\u5740\u6BB5\u4E2D\u8FDB\u884C\u5206\u914D\uFF0C")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u5E76\u5F00\u542FNodePort\u662F\u5728Node\u8282\u70B9\u4E0A\u8FDB\u884C\u7AEF\u53E3\u6620\u5C04\uFF0C\u8FDB\u884C\u5916\u90E8\u8BBF\u95EE\u3002")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# kubectl expose deployment nginx --port=80")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"--type=NodePort")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"service/nginx exposed")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# kubectl get service")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"kubernetes ClusterIP 10.1.0.1 <none> 443/TCP 88m")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"nginx NodePort 10.1.147.204 <none> 80:30599/TCP 67m")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"**6.\u6D4B\u8BD5Service\u7684VIP**")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# curl --head http://10.1.147.204/")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"HTTP/1.1 200 OK ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Server: nginx/1.15.8")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Date: Sun, 13 Jan 2019 01:26:21 GMT")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Content-Type: text/html")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Content-Length: 612")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Last-Modified: Wed, 26 Dec 2018 23:21:49 GMT")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Connection: keep-alive")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'ETag: "5c240d0d-264"')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Accept-Ranges: bytes")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),h3=s("p",null,[n("``` "),s("strong",null,"7.\u6D4B\u8BD5NodePort\uFF0C\u5916\u90E8\u8BBF\u95EE\u3002")],-1),_3=s("p",null,[s("img",{src:"http://k8s.unixhot.com/kubernetes/media/1f9d523f359ce6d49515d04703d8e941.png",alt:"img"})],-1),D3=s("p",null,"\u8FD9\u4E00\u5207\u770B\u8D77\u6765\u4F3C\u4E4E\u4E0D\u662F\u5341\u5206\u5B8C\u7F8E\uFF0C\u4F46\u662F\u73B0\u5728\u4F60\u5DF2\u7ECF\u62E5\u6709\u4E86\u4E00\u4E2AKubernetes\u96C6\u7FA4\uFF0C\u63A5\u4E0B\u6765\u5C31\u53EF\u4EE5\u7EE7\u7EED\u63A2\u7D22Kubernetes\u7684\u4E16\u754C\u4E86\u3002",-1),g3=s("h2",{id:"\u516C\u6709\u4E91\u4E2D\u7684kubernetes",tabindex:"-1"},[n("\u516C\u6709\u4E91\u4E2D\u7684Kubernetes "),s("a",{class:"header-anchor",href:"#\u516C\u6709\u4E91\u4E2D\u7684kubernetes","aria-hidden":"true"},"#")],-1),m3=s("p",null,"\u622A\u6B622019\u5E742\u6708\uFF0C\u5927\u591A\u6570\u516C\u6709\u4E91\u5DF2\u7ECF\u63D0\u4F9B\u4E86\u5BB9\u5668Kubernetes\u7684\u4EA7\u54C1\u670D\u52A1\uFF0C\u5BF9\u4E8E\u4F7F\u7528\u516C\u6709\u4E91\u7684\u7528\u6237\u6765\u8BF4\uFF0C\u6700\u4F73\u5B9E\u8DF5\u662F\u76F4\u63A5\u8D2D\u4E70\u516C\u6709\u4E91\u4EA7\u54C1\uFF0C\u800C\u975E\u81EA\u5DF1\u90E8\u7F72Kubernetes\u96C6\u7FA4\uFF0C\u4E3B\u8981\u662F\u56E0\u4E3A\u516C\u6709\u4E91\u5DF2\u7ECF\u5C06\u7F51\u7EDC\u548C\u5B58\u50A8\u4E0EKubernetes\u96C6\u6210\u597D\u4E86\uFF0C\u89E3\u51B3\u4E86\u751F\u4EA7\u5E94\u7528\u7684\u96BE\u9898\u3002",-1),b3=s("h3",{id:"\u963F\u91CC\u4E91\u4E2D\u7684kubernetes",tabindex:"-1"},[n("\u963F\u91CC\u4E91\u4E2D\u7684Kubernetes "),s("a",{class:"header-anchor",href:"#\u963F\u91CC\u4E91\u4E2D\u7684kubernetes","aria-hidden":"true"},"#")],-1),k3=s("p",null,"\u56FD\u5185\u963F\u91CC\u4E91\u63D0\u4F9B\u4E86\u5BB9\u5668\u670D\u52A1 Kubernetes \u7248\uFF08\u7B80\u79F0 ACK\uFF09\u63D0\u4F9B\u9AD8\u6027\u80FD\u53EF\u4F38\u7F29\u7684\u5BB9\u5668\u5E94\u7528\u7BA1\u7406\u80FD\u529B\uFF0C\u652F\u6301\u4F01\u4E1A\u7EA7 Kubernetes \u5BB9\u5668\u5316\u5E94\u7528\u7684\u5168\u751F\u547D\u5468\u671F\u7BA1\u7406\u3002\u5BB9\u5668\u670D\u52A1 Kubernetes \u7248\u7B80\u5316\u96C6\u7FA4\u7684\u642D\u5EFA\u548C\u6269\u5BB9\u7B49\u5DE5\u4F5C\uFF0C\u6574\u5408\u963F\u91CC\u4E91\u865A\u62DF\u5316\u3001\u5B58\u50A8\u3001\u7F51\u7EDC\u548C\u5B89\u5168\u80FD\u529B\uFF0C\u6253\u9020\u4E91\u7AEF\u6700\u4F73\u7684 Kubernetes \u5BB9\u5668\u5316\u5E94\u7528\u8FD0\u884C\u73AF\u5883\u3002",-1),v3=s("p",null,[s("strong",null,"\u963F\u91CC\u4E91Kubernetes\u6A21\u5F0F")],-1),x3=s("p",null,"\u5BB9\u5668\u670D\u52A1Kubernetes\u7248\u5305\u542B\u4E86\u7ECF\u5178Dedicated Kubernetes\u4EE5\u53CAServerless\u4E24\u79CD\u5F62\u6001\uFF0C\u65B9\u4FBF\u60A8\u6309\u9700\u9009\u62E9\u3002",-1),f3=s("ul",null,[s("li",null,"\u7ECF\u5178Dedicated Kubernetes\u6A21\u5F0F\uFF1A\u60A8\u53EF\u4EE5\u5BF9\u96C6\u7FA4\u57FA\u7840\u8BBE\u65BD\u548C\u5BB9\u5668\u5E94\u7528\u8FDB\u884C\u66F4\u7EC6\u7C92\u5EA6\u7684\u63A7\u5236\uFF0C\u6BD4\u5982\u9009\u62E9\u5BBF\u4E3B\u673A\u5B9E\u4F8B\u89C4\u683C\u548C\u64CD\u4F5C\u7CFB\u7EDF\uFF0C\u6307\u5B9AKubernetes \u7248\u672C\u3001\u81EA\u5B9A\u4E49 Kubernetes \u7279\u6027\u5F00\u5173\u8BBE\u7F6E\u7B49\u3002\u963F\u91CC\u4E91 Kubernetes \u670D\u52A1\u8D1F\u8D23\u4E3A\u96C6\u7FA4\u521B\u5EFA\u5E95\u5C42\u4E91\u8D44\u6E90\uFF0C\u5347\u7EA7\u7B49\u81EA\u52A8\u5316\u8FD0\u7EF4\u64CD\u4F5C\u3002\u800C\u60A8\u9700\u8981\u89C4\u5212\u3001\u7EF4\u62A4\u3001\u5347\u7EA7\u670D\u52A1\u5668\u96C6\u7FA4\uFF0C\u624B\u52A8\u6216\u81EA\u52A8\u5728\u96C6\u7FA4\u4E2D\u6DFB\u52A0\u6216\u5220\u9664\u670D\u52A1\u5668\u3002"),s("li",null,"Serverless \u6A21\u5F0F\uFF1A\u60A8\u65E0\u9700\u521B\u5EFA\u5E95\u5C42\u865A\u62DF\u5316\u8D44\u6E90\uFF0C\u53EF\u4EE5\u5229\u7528 Kubernetes \u547D\u4EE4\u6307\u660E\u5E94\u7528\u5BB9\u5668\u955C\u50CF\u3001CPU \u548C\u5185\u5B58\u8981\u6C42\u4EE5\u53CA\u5BF9\u5916\u670D\u52A1\u65B9\u5F0F\uFF0C\u76F4\u63A5\u542F\u52A8\u3002")],-1),S3=s("p",null,[s("strong",null,"\u963F\u91CC\u4E91Kubernetes\u4EA7\u54C1\u67B6\u6784")],-1),E3=s("p",null,[s("img",{src:"http://k8s.unixhot.com/kubernetes/media/43688d33a81f2bd6af354d0715b6b297.png",alt:"C:UsersjasonDesktop15447553537457_zh-CN.png"})],-1),P3=s("p",null,[s("strong",null,"\u963F\u91CC\u4E91Kubernetes\u521B\u5EFA")],-1),N3=s("p",null,"\u9ED8\u8BA4\u60C5\u51B5\u4E0B\u53EF\u4EE5\u5728\u963F\u91CC\u4E91\u4E2D\u81EA\u884C\u521B\u5EFA5\u4E2A\u96C6\u7FA4\uFF0C\u6BCF\u4E2A\u96C6\u7FA4\u6700\u591A\u53EF\u4EE5\u6DFB\u52A0 40 \u4E2A\u8282\u70B9\u3002\u5982\u9700\u66F4\u9AD8\u914D\u989D\uFF0C\u9700\u8981\u63D0\u4EA4\u5DE5\u5355\u7533\u8BF7\u3002",-1),R3=s("p",null,[s("img",{src:"http://k8s.unixhot.com/kubernetes/media/4c165d0ebc842862595f9fd0f4650d43.png",alt:"img"})],-1),T3=s("p",null,"\u963F\u91CC\u4E91\u5C06\u7F51\u7EDC\u3001\u5B58\u50A8\u3001\u5B89\u5168\u7B49\u65B9\u9762\u5DF2\u7ECF\u8FDB\u884C\u4E86\u6DF1\u5EA6\u96C6\u6210\uFF0C\u5728\u521B\u5EFAKubernetes\u96C6\u7FA4\u65F6\uFF0C\u963F\u91CC\u4E91\u5BB9\u5668\u670D\u52A1\u63D0\u4F9B\u4E24\u79CD\u7F51\u7EDC\u63D2\u4EF6\uFF1ATerway\u548CFlannel\uFF1A",-1),I3=s("ul",null,[s("li",null,"Flannel\uFF1A\u4F7F\u7528\u7684\u662F\u7B80\u5355\u7A33\u5B9A\u7684\u793E\u533A\u7684Flannel CNI\u63D2\u4EF6\uFF0C\u914D\u5408\u963F\u91CC\u4E91\u7684VPC\u7684\u9AD8\u901F\u7F51\u7EDC\uFF0C\u80FD\u7ED9\u96C6\u7FA4\u9AD8\u6027\u80FD\u548C\u7A33\u5B9A\u7684\u5BB9\u5668\u7F51\u7EDC\u4F53\u9A8C\uFF0C\u4F46\u529F\u80FD\u504F\u7B80\u5355\uFF0C\u652F\u6301\u7684\u7279\u6027\u5C11\uFF0C\u4F8B\u5982\uFF1A\u4E0D\u652F\u6301\u57FA\u4E8EKubernetes\u6807\u51C6\u7684Network Policy\u3002"),s("li",null,"Terway\uFF1A\u662F\u963F\u91CC\u4E91\u5BB9\u5668\u670D\u52A1\u81EA\u7814\u7684\u7F51\u7EDC\u63D2\u4EF6\uFF0C\u529F\u80FD\u4E0A\u5B8C\u5168\u517C\u5BB9Flannel\uFF0C\u652F\u6301\u5C06\u963F\u91CC\u4E91\u7684\u5F39\u6027\u7F51\u5361\u5206\u914D\u7ED9\u5BB9\u5668\uFF0C\u652F\u6301\u57FA\u4E8EKubernetes\u6807\u51C6\u7684NetworkPolicy\u6765\u5B9A\u4E49\u5BB9\u5668\u95F4\u7684\u8BBF\u95EE\u7B56\u7565\uFF0C\u652F\u6301\u5BF9\u5355\u4E2A\u5BB9\u5668\u505A\u5E26\u5BBD\u7684\u9650\u6D41\u3002\u5BF9\u4E8E\u4E0D\u9700\u8981\u4F7F\u7528Network Policy\u7684\u7528\u6237\uFF0C\u53EF\u4EE5\u9009\u62E9Flannel\uFF0C\u5176\u4ED6\u60C5\u51B5\u5EFA\u8BAE\u9009\u62E9Terway\u3002\u4E86\u89E3\u66F4\u591ATerway\u7F51\u7EDC\u63D2\u4EF6\u7684\u76F8\u5173\u5185\u5BB9\uFF0C\u8BF7\u53C2\u89C1Terway\u7F51\u7EDC\u63D2\u4EF6\u3002")],-1),O3=s("p",null,"\u6700\u7EC8\u963F\u91CC\u4E91\u4F1A\u4F7F\u7528kubeadm\u5E2E\u4F60\u521B\u5EFA\u4E00\u4E2A\u6307\u5B9A\u7248\u672C\u7684Kubernetes\u96C6\u7FA4\u3002",-1),M3=s("h3",{id:"\u79C1\u6709\u4E91\u4E2D\u7684kubernetes",tabindex:"-1"},[n("\u79C1\u6709\u4E91\u4E2D\u7684Kubernetes "),s("a",{class:"header-anchor",href:"#\u79C1\u6709\u4E91\u4E2D\u7684kubernetes","aria-hidden":"true"},"#")],-1),w3=s("p",null,[s("strong",null,"\u5185\u7F51\u90E8\u7F72Kubernetes")],-1),K3=s("p",null,"\u5F88\u591A\u4F01\u4E1A\u9700\u8981\u5185\u7F51\u90E8\u7F72Kubernetes\u4F46\u662F\u5185\u7F51\u53C8\u65E0\u6CD5\u8BBF\u95EE\u5916\u7F51\uFF0C\u5C31\u9700\u8981\u672C\u5730\u5316\u90E8\u7F72\uFF0C\u65E0\u5FD8\u4E86\u672C\u5730\u8BDD\u90E8\u7F72\u4E3B\u8981\u5305\u62EC\u4E24\u4E2A\u65B9\u9762\uFF0C\u4E00\u4E2A\u662F\u8F6F\u4EF6\u4ED3\u5E93\u7684\u51C6\u5907\uFF0C\u4E00\u4E2A\u662FKubernetes\u955C\u50CF\u7684\u51C6\u5907\u3002",-1),L3=s("ol",null,[s("li",null,"\u51C6\u5907\u5185\u7F51YUM\u4ED3\u5E93\uFF08\u7565\uFF09"),s("li",null,"\u51C6\u5907Docker Registry\uFF08\u8BF7\u53C2\u8003Harbor\u7AE0\u8282\uFF09"),s("li",null,"\u4E0B\u8F7D\u5E76\u63D0\u4EA4\u955C\u50CF\u5230Harbor\u4E2D\uFF0C\u7136\u540E\u5C06Harbor\u7684\u955C\u50CF\u90E8\u7F72\u76F4\u63A5COPY\u5230\u751F\u4EA7\u73AF\u5883\u4E2D")],-1),U3=s("p",null,"\u4E0B\u8F7D\u811A\u672C\u5982\u4E0B\uFF0C\u8BF7\u6839\u636E\u9700\u6C42\u81EA\u884C\u4FEE\u6539\uFF1A",-1),j3=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# vim k8s-images.sh")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#!/bin/bash")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# EVN")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'ALIYUN_REG="registry.aliyuncs.com/google_containers"')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'FLANNEL_REG="quay-mirror.qiniu.com/coreos"')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'LOCAL_REG="192.168.56.11/kubernetes"')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"K8S_VER=v1.15.5")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"PAUSE_VER=3.1")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"ETCD_VER=3.3.10")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"COREDNS_VER=1.3.1")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"FLANNEL_VER=v0.11.0-amd64")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# Kubernetes Docker Images")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"IMAGES=(")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  kube-proxy:${K8S_VER}")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  kube-scheduler:${K8S_VER}")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  kube-controller-manager:${K8S_VER}")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  kube-apiserver:${K8S_VER}")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  pause:${PAUSE_VER}")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  etcd-amd64:${ETCD_VER}")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  coredns:${COREDNS_VER}")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},")")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"for IMAGE in ${IMAGES[@]}")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"do")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  docker pull ${ALIYUN_REG}/${IMAGE}")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  docker tag ${ALIYUN_REG}/${IMAGE} ${LOCAL_REG}/${IMAGE}")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  #docker push ${LOCAL_REG}/${IMAGES}")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"done")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# Flannel")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"docker pull ${FLANNEL_REG}/flannel:${FLANNEL_VER}")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"docker tag ${FLANNEL_REG}/flannel:${FLANNEL_VER} ${LOCAL_REG}/flannel:${FLANNEL_VER}")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),G3=s("h1",{id:"\u7B2C\u4E94\u90E8\u5206-\u5C06\u5E94\u7528\u8FC1\u79FB\u81F3kubernetes",tabindex:"-1"},[n("\u7B2C\u4E94\u90E8\u5206 \u5C06\u5E94\u7528\u8FC1\u79FB\u81F3Kubernetes "),s("a",{class:"header-anchor",href:"#\u7B2C\u4E94\u90E8\u5206-\u5C06\u5E94\u7528\u8FC1\u79FB\u81F3kubernetes","aria-hidden":"true"},"#")],-1),H3=s("h1",{id:"_6-\u7B2C\u4E00\u6B65\uFF1A\u5C06\u5E94\u7528\u5C01\u88C5\u8FDB\u5BB9\u5668\u4E2D",tabindex:"-1"},[n("6 \u7B2C\u4E00\u6B65\uFF1A\u5C06\u5E94\u7528\u5C01\u88C5\u8FDB\u5BB9\u5668\u4E2D "),s("a",{class:"header-anchor",href:"#_6-\u7B2C\u4E00\u6B65\uFF1A\u5C06\u5E94\u7528\u5C01\u88C5\u8FDB\u5BB9\u5668\u4E2D","aria-hidden":"true"},"#")],-1),F3=s("h2",{id:"\u7B2C\u4E00\u6B65\uFF1A\u5C06\u5E94\u7528\u5C01\u88C5\u8FDB\u5BB9\u5668\u4E2D",tabindex:"-1"},[n("\u7B2C\u4E00\u6B65\uFF1A\u5C06\u5E94\u7528\u5C01\u88C5\u8FDB\u5BB9\u5668\u4E2D "),s("a",{class:"header-anchor",href:"#\u7B2C\u4E00\u6B65\uFF1A\u5C06\u5E94\u7528\u5C01\u88C5\u8FDB\u5BB9\u5668\u4E2D","aria-hidden":"true"},"#")],-1),V3=s("p",null,"\u5728\u4E4B\u524D\u7684\u5BB9\u5668\u955C\u50CF\u5B9E\u6218\u4E2D\uFF0C\u6211\u4EEC\u5DF2\u7ECF\u5B66\u4E60\u4E86\u5982\u4F55\u5C06\u5E94\u7528\u5BB9\u5668\u5316\uFF0C\u8FD9\u91CC\u6211\u4EEC\u5C06\u4E0B\u8F7D\u4F7F\u7528\u4E24\u4E2A\u5B98\u65B9\u7684Nginx\u955C\u50CF\u6765\u5B8C\u6210\u63A5\u4E0B\u6765\u7684\u5B9E\u9A8C\u3002",-1),B3=s("h3",{id:"\u90E8\u7F72harbor\u955C\u50CF\u4ED3\u5E93",tabindex:"-1"},[n("\u90E8\u7F72Harbor\u955C\u50CF\u4ED3\u5E93 "),s("a",{class:"header-anchor",href:"#\u90E8\u7F72harbor\u955C\u50CF\u4ED3\u5E93","aria-hidden":"true"},"#")],-1),q3=s("p",null,"\u751F\u4EA7\u73AF\u5883\u4E2D\u53EF\u4EE5\u4F7F\u7528Harbor\u6765\u7BA1\u7406Docker\u955C\u50CF\uFF0C\u8BF7\u53C2\u8003\u4E4B\u524D\u7AE0\u8282\u7684\u5185\u5BB9\u5B8C\u6210Harbor\u955C\u50CF\u4ED3\u5E93\u7684\u90E8\u7F72\u5DE5\u4F5C\uFF0C\u5E76\u5728Harbor\u4E2D\u521B\u5EFA\u4E00\u4E2Adevopsedu\u7684\u9879\u76EE\u3002",-1),Y3=s("p",null,[s("img",{src:"http://k8s.unixhot.com/kubernetes/media/093b4b731c05b54a1b8426e924f93d45.png",alt:"img"})],-1),z3=s("h3",{id:"\u5236\u4F5C\u5B9E\u9A8C\u7528\u7684docker\u955C\u50CF",tabindex:"-1"},[n("\u5236\u4F5C\u5B9E\u9A8C\u7528\u7684Docker\u955C\u50CF "),s("a",{class:"header-anchor",href:"#\u5236\u4F5C\u5B9E\u9A8C\u7528\u7684docker\u955C\u50CF","aria-hidden":"true"},"#")],-1),$3=s("p",null,"\u8FD9\u91CC\u4E0D\u518D\u6F14\u793ADocker\u955C\u50CF\u7684\u6784\u5EFA\uFF0C\u76F4\u63A5\u4E0B\u8F7D\u4E24\u4E2A\u5B98\u65B9\u955C\u50CF\u4F5C\u4E3A\u6848\u4F8B\u3002",-1),X3=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# docker pull nginx:1.13.12")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# docker pull nginx:1.14.0")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),J3=s("h3",{id:"\u914D\u7F6Edocker\u4ED3\u5E93",tabindex:"-1"},[n("\u914D\u7F6EDocker\u4ED3\u5E93 "),s("a",{class:"header-anchor",href:"#\u914D\u7F6Edocker\u4ED3\u5E93","aria-hidden":"true"},"#")],-1),W3=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root\\@linux-node1 ~]# vim /etc/docker/daemon.json")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"{")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'    "registry-mirrors": ["https://tdimi5q1.mirror.aliyuncs.com"],')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'    "insecure-registries" : ["http://192.168.56.11"]')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"}")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# systemctl restart docker")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Q3=s("h3",{id:"\u767B\u5F55harbor\u955C\u50CF\u4ED3\u5E93",tabindex:"-1"},[n("\u767B\u5F55Harbor\u955C\u50CF\u4ED3\u5E93 "),s("a",{class:"header-anchor",href:"#\u767B\u5F55harbor\u955C\u50CF\u4ED3\u5E93","aria-hidden":"true"},"#")],-1),Z3=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# docker login 192.168.56.11")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Username: admin")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Password:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"WARNING! Your password will be stored unencrypted in /root/.docker/config.json.")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    Configure a credential helper to remove this warning. See")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    https://docs.docker.com/engine/reference/commandline/login/\\#credentials-store")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    Login Succeeded")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),sx=s("h3",{id:"\u63D0\u4EA4\u955C\u50CF\u5230registry",tabindex:"-1"},[n("\u63D0\u4EA4\u955C\u50CF\u5230Registry "),s("a",{class:"header-anchor",href:"#\u63D0\u4EA4\u955C\u50CF\u5230registry","aria-hidden":"true"},"#")],-1),nx=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# docker tag nginx:1.13.12")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"192.168.56.11/devopsedu/nginx:1.13.12")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# docker tag nginx:1.14.0")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"192.168.56.11/devopsedu/nginx:1.14.0")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# docker push 192.168.56.11/devopsedu/nginx:1.13.12")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# docker push 192.168.56.11/devopsedu/nginx:1.14.0")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),lx=s("p",null,"\u5728\u4E0A\u9762\u7684\u6B65\u9AA4\u4E2D\uFF0C\u6A21\u62DF\u4E86\u751F\u4EA7\u73AF\u5883\u5982\u4F55\u6784\u5EFA\u548C\u63D0\u4EA4\u955C\u50CF\uFF0C\u5982\u679C\u5BF9\u4E8E\u6784\u5EFA\u548C\u63D0\u4EA4\u955C\u50CF\u6709\u7591\u95EE\u53EF\u4EE5\u590D\u4E60\u7B2C3\u7AE0\u7684\u5185\u5BB9\u3002",-1),ex=s("h1",{id:"_7-\u7B2C\u4E8C\u6B65\uFF1A\u5C06\u5BB9\u5668\u5C01\u88C5\u5230pod\u4E2D",tabindex:"-1"},[n("7 \u7B2C\u4E8C\u6B65\uFF1A\u5C06\u5BB9\u5668\u5C01\u88C5\u5230Pod\u4E2D "),s("a",{class:"header-anchor",href:"#_7-\u7B2C\u4E8C\u6B65\uFF1A\u5C06\u5BB9\u5668\u5C01\u88C5\u5230pod\u4E2D","aria-hidden":"true"},"#")],-1),ox=s("p",null,"Pod\u662FKubernetes\u6700\u5C0F\u7684\u7BA1\u7406\u5355\u5143\uFF0C\u4E00\u4E2APod\u53EF\u4EE5\u4EE3\u8868\u4E00\u4E2A\u8FD0\u884C\u5728\u96C6\u7FA4\u91CC\u7684\u8FDB\u7A0B\u3002\u4E4B\u524D\u662F\u5728\u5BBF\u4E3B\u673A\u4E0A\u8FD0\u884C\u4E0D\u540C\u7684\u8FDB\u7A0B\uFF0C\u73B0\u5728\u662F\u8FD0\u884C\u4E0D\u540C\u7684Pod\u3002\u524D\u9762\u4ECB\u7ECD\u8FC7Pod\u662F\u4E00\u4E2A\u903B\u8F91\u67B6\u6784\u7684\u7EC4\u4EF6\uFF0CPod\u91CC\u5C01\u88C5\u4E86\u4E00\u4E2A\uFF08\u6216\u8005\u591A\u4E2A\uFF09\u5E94\u7528\u5BB9\u5668\uFF0C\u5B58\u50A8\u8D44\u6E90\u548CIP\u5730\u5740\u3002",-1),ax=s("p",null,[s("strong",null,"\u4E3A\u4EC0\u4E48\u8981\u9020\u4E00\u4E2APod\u51FA\u6765\uFF1F"),n(" \u5B66\u4E60Kubernetes\u9047\u5230\u7684\u6700\u591A\u7684\u540D\u79F0\u53EF\u80FD\u5C31\u662FPod\u4E86\uFF0C\u5176\u5B83\u5F00\u6E90\u7684\u5BB9\u5668\u7BA1\u7406\u5E73\u53F0\u4F8B\u5982Mesos\u76F4\u63A5\u7BA1\u7406\u548C\u8C03\u5EA6\u7684\u662F\u5BB9\u5668\uFF0C\u4F46\u662FKubernetes\u786E\u662FPod\uFF0C\u5B83\u5728\u5BB9\u5668\u4E0A\u9762\u505A\u4E86\u4E00\u5C42\u5C01\u88C5\uFF0C\u65B9\u4FBF\u7528\u6237\u5C06\u4E00\u7EC4\u7D27\u8026\u5408\u7684\u5BB9\u5668\uFF0C\u653E\u7F6E\u5728\u4E00\u4E2A\u5171\u4EAB\u8D44\u6E90\u7684\u5355\u5143\u4E2D\u3002\u5BF9\u4E8E\u5F88\u591A\u6CA1\u6709\u6B64\u7C7B\u573A\u666F\u7684\u521D\u5B66\u8005\uFF0C\u53EF\u4EE5\u6682\u65F6\u5C06Pod\u770B\u505A\u662F\u5BB9\u5668\u7684\u4E00\u4E2A\u58F3\uFF0C\u4F60\u4E5F\u5B8C\u5168\u53EF\u4EE5\u53EA\u5728Pod\u4E2D\u8FD0\u884C\u4E00\u4E2A\u5BB9\u5668\uFF0C\u968F\u7740\u5B66\u4E60\u7684\u6DF1\u5165\u518D\u6162\u6162\u7406\u89E3\u3002 Kubernetes\u8FD0\u884CPod\u7684\u4E24\u79CD\u65B9\u5F0F\uFF1A")],-1),tx=s("ul",null,[s("li",null,"Pod\u91CC\u53EA\u8FD0\u884C\u4E00\u4E2A\u5355\u72EC\u5BB9\u5668\uFF0C\u662FKubernetes\u6700\u5E38\u89C1\u7684\u4F7F\u7528\u573A\u666F\uFF1B\u5728\u8FD9\u79CD\u60C5\u51B5\u4E0B\uFF0C\u53EF\u4EE5\u628APod\u770B\u505A\u662F\u4E00\u4E2A\u5355\u72EC\u5BB9\u5668\u7684\u8FDE\u63A5\u5668\uFF0CKubernetes\u901A\u8FC7Pod\u53BB\u7BA1\u7406\u5BB9\u5668\uFF0C\u4F5C\u4E3A\u4F7F\u7528\u8005\u51E0\u4E4E\u4E0D\u7528\u5173\u5FC3\u5BB9\u5668\u3002"),s("li",null,"Pod\u91CC\u8FD0\u884C\u591A\u4E2A\u6709\u5173\u7CFB\u5BB9\u5668\u3002\u4F8B\u5982\u5982\u679C\u4F7F\u7528Nginx+Tomcat\u8FD0\u884CJava\u5E94\u7528\uFF0C\u53EF\u4EE5\u5236\u4F5C\u4E00\u4E2A\u955C\u50CF\u91CC\u9762\u5305\u542B\u4E86Nginx+Tomcat\uFF0C\u4E5F\u53EF\u4EE5\u5206\u522B\u5236\u4F5C\u4E24\u4E2A\u955C\u50CFNginx\u955C\u50CF\u548CTomcat\u955C\u50CF\uFF0C\u5982\u679C\u4F7F\u7528Kubernetes\u5C31\u9700\u8981\u4F7F\u7528Pod\uFF0C\u5982\u679C\u5C06Nginx\u548CTomcat\u5355\u72EC\u653E\u5728\u4E24\u4E2APod\u91CC\u9762\u6765\u7BA1\u7406\uFF0C\u5C31\u4F1A\u9762\u4E34\u5F88\u591A\u5F88\u591A\u95EE\u9898\u3002\u8FD9\u4E2A\u65F6\u5019\uFF0C\u5C31\u53EF\u4EE5\u628A\u8FD9\u4E24\u4E2A\u5BB9\u5668\u653E\u7F6E\u5728\u4E00\u4E2APod\u4E2D\u3002")],-1),cx=s("h2",{id:"pod\u7BA1\u7406",tabindex:"-1"},[n("Pod\u7BA1\u7406 "),s("a",{class:"header-anchor",href:"#pod\u7BA1\u7406","aria-hidden":"true"},"#")],-1),ix=s("p",null,"\u5728Kubernetes\u4E2D\u4F7F\u7528YAML\u683C\u5F0F\u6765\u63CF\u8FF0\u4E00\u4E2APod\u3002",-1),rx=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# vim nginx-pod.yaml ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"apiVersion: v1")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"kind: Pod")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"metadata:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  name: nginx-pod")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  labels:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    app: nginx")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"spec:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  containers:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  - name: nginx")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    image: nginx:1.13.12")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    ports:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"- containerPort: 80")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),px=s("p",null,"Pod\u7684YAML\u63CF\u8FF0\u5185\u5BB9\u8FD8\u6709\u5F88\u591A\uFF0C\u5728\u4F7F\u7528kubeadm\u90E8\u7F72Kubernetes\u7684\u65F6\u5019\uFF0C\u5C31\u662F\u4F7F\u7528\u9759\u6001Pod\u7684\u65B9\u5F0F\u8FD0\u884C\u7684\u76F8\u5173\u670D\u52A1\uFF0CYAML\u6587\u4EF6\u5B58\u653E\u5728\uFF0C\u5F53\u7136\u73B0\u5728\u5F88\u591A\u914D\u7F6E\u8FD8\u662F\u770B\u4E0D\u61C2\u7684\uFF0C\u5E26\u7740\u95EE\u9898\u7EE7\u7EED\u5B66\u4E60\u3002",-1),dx=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# ls -l /etc/kubernetes/manifests/")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"total 16")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"-rw------- 1 root root 2041 Feb 11 20:33 etcd.yaml")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"-rw------- 1 root root 2700 Feb 11 20:33 kube-apiserver.yaml")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"-rw------- 1 root root 2345 Feb 11 20:33 kube-controller-manager.yaml")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"-rw------- 1 root root 1080 Feb 11 20:33 kube-scheduler.yaml")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Ax=s("p",null,"\u521B\u5EFAPod",-1),Cx=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# kubectl create -f nginx-pod.yaml ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'pod "nginx-pod" created')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),ux=s("p",null,"\u67E5\u770BPod",-1),yx=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# kubectl get pod")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"NAME                                READY     STATUS    RESTARTS   AGE")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"nginx-pod                           1/1       Running   0          49s")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),hx=s("p",null,"\u67E5\u770BPod\u66F4\u591A\u4FE1\u606F",-1),_x=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# kubectl get pod -o wide")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"NAME                                READY     STATUS    RESTARTS   AGE       IP           NODE")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"nginx-pod  1/1       Running   0          1m        10.2.53.18   192.168.56.13")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Dx=s("p",null,"\u67E5\u770BPod\u8BE6\u60C5",-1),gx=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# kubectl describe pod nginx-pod")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Name:         nginx-pod")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Namespace:    default")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Node:         192.168.56.13/192.168.56.13")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Start Time:   Sat, 02 Jun 2018 06:42:53 +0800")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Labels:       app=nginx")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Annotations:  <none>")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Status:       Running")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"IP:           10.2.53.18")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),mx=s("p",null,"\u67E5\u770BPod\u65E5\u5FD7",-1),bx=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# kubectl logs pod/nginx-pod")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),kx=s("p",null,[s("strong",null,"Pod\u4E2D\u7684\u955C\u50CF\u62C9\u53D6\u7B56\u7565"),n(" \u5F53kubelet\u5C1D\u8BD5\u62C9\u53D6\u6307\u5B9A\u7684\u955C\u50CF\u65F6\uFF0C[imagePullPolicy]\u548C\u955C\u50CF\u7684\u6807\u7B7E\u4F1A\u751F\u6548\u3002")],-1),vx=s("ul",null,[s("li",null,"imagePullPolicy: IfNotPresent\uFF1A\u4EC5\u5F53\u955C\u50CF\u5728\u672C\u5730\u4E0D\u5B58\u5728\u65F6\u955C\u50CF\u624D\u88AB\u62C9\u53D6\u3002"),s("li",null,"imagePullPolicy: Always\uFF1A\u6BCF\u6B21\u542F\u52A8 pod \u7684\u65F6\u5019\u90FD\u4F1A\u62C9\u53D6\u955C\u50CF\u3002")],-1),xx=s("p",null,"\u7701\u7565imagePullPolicy\uFF0C\u955C\u50CF\u6807\u7B7E\u4E3A:latest\u6216\u88AB\u7701\u7565\uFF0CAlways\u88AB\u5E94\u7528\u3002 imagePullPolicy\u88AB\u7701\u7565\uFF0C\u5E76\u4E14\u955C\u50CF\u7684\u6807\u7B7E\u88AB\u6307\u5B9A\u4E14\u4E0D\u662F:latest\uFF0CIfNotPresent\u88AB\u5E94\u7528\u3002 imagePullPolicy: Never\uFF1A\u955C\u50CF\u88AB\u5047\u8BBE\u5B58\u5728\u4E8E\u672C\u5730\u3002 \u6CA1\u6709\u5C1D\u8BD5\u62C9\u53D6\u955C\u50CF\u3002",-1),fx=s("h1",{id:"_7-3-\u7B2C\u4E09\u6B65\uFF1A\u4F7F\u7528controllers\u7BA1\u7406pod",tabindex:"-1"},[n("7.3 \u7B2C\u4E09\u6B65\uFF1A\u4F7F\u7528Controllers\u7BA1\u7406Pod "),s("a",{class:"header-anchor",href:"#_7-3-\u7B2C\u4E09\u6B65\uFF1A\u4F7F\u7528controllers\u7BA1\u7406pod","aria-hidden":"true"},"#")],-1),Sx=s("p",null,"\u5728\u5B9E\u9645\u7684\u751F\u4EA7\u73AF\u5883\u4E2D\uFF0C\u6211\u4EEC\u5176\u5B9E\u5F88\u5C11\u5355\u72EC\u521B\u5EFAPod\uFF0C\u800C\u662F\u901A\u8FC7\u63A7\u5236\u5668\u6765\u8FDB\u884CPod\u7684\u7BA1\u7406\uFF0CKubernetes\u63D0\u4F9B\u4E86\u5F88\u591A\u7684\u63A7\u5236\u5668\uFF0C\u4E00\u4E2A Controllers \u53EF\u4EE5\u521B\u5EFA\u548C\u7BA1\u7406\u5F88\u591A\u4E2A Pod, \u4E5F\u63D0\u4F9B\u590D\u5236\u3001\u521D\u59CB\u5316\uFF0C\u4EE5\u53CA\u63D0\u4F9B\u96C6\u7FA4\u8303\u56F4\u7684\u81EA\u6211\u6062\u590D\u7684\u529F\u80FD\u3002\u6BD4\u5982\u8BF4\uFF1A \u5982\u679C\u4E00\u4E2A\u8282\u70B9\u5B95\u673A\uFF0CController \u5C06\u8C03\u5EA6\u4E00\u4E2A\u5728\u5176\u4ED6\u8282\u70B9\u4E0A\u5B8C\u5168\u76F8\u540C\u7684 pod \u6765\u81EA\u52A8\u53D6\u4EE3\u5F53\u524D\u7684 pod\u3002",-1),Ex=s("h1",{id:"_8-1-replication-controller\u63A7\u5236\u5668",tabindex:"-1"},[n("8.1 Replication Controller\u63A7\u5236\u5668 "),s("a",{class:"header-anchor",href:"#_8-1-replication-controller\u63A7\u5236\u5668","aria-hidden":"true"},"#")],-1),Px=s("h1",{id:"_8-2-replica-sets\u63A7\u5236\u5668",tabindex:"-1"},[n("8.2 Replica Sets\u63A7\u5236\u5668 "),s("a",{class:"header-anchor",href:"#_8-2-replica-sets\u63A7\u5236\u5668","aria-hidden":"true"},"#")],-1),Nx=s("h1",{id:"_8-3-deployment\u63A7\u5236\u5668",tabindex:"-1"},[n("8.3 Deployment\u63A7\u5236\u5668 "),s("a",{class:"header-anchor",href:"#_8-3-deployment\u63A7\u5236\u5668","aria-hidden":"true"},"#")],-1),Rx=s("h1",{id:"_8-4-daemonset\u63A7\u5236\u5668",tabindex:"-1"},[n("8.4 DaemonSet\u63A7\u5236\u5668 "),s("a",{class:"header-anchor",href:"#_8-4-daemonset\u63A7\u5236\u5668","aria-hidden":"true"},"#")],-1),Tx=s("p",null,"DaemonSet \u786E\u4FDD\u5168\u90E8\uFF08\u6216\u8005\u4E00\u4E9B\uFF09Node \u4E0A\u8FD0\u884C\u4E00\u4E2A Pod \u7684\u526F\u672C\u3002\u5F53\u6709 Node \u52A0\u5165\u96C6\u7FA4\u65F6\uFF0C\u4E5F\u4F1A\u4E3A\u4ED6\u4EEC\u65B0\u589E\u4E00\u4E2A Pod \u3002\u5F53\u6709 Node \u4ECE\u96C6\u7FA4\u79FB\u9664\u65F6\uFF0C\u8FD9\u4E9B Pod \u4E5F\u4F1A\u88AB\u56DE\u6536\u3002\u5220\u9664 DaemonSet \u5C06\u4F1A\u5220\u9664\u5B83\u521B\u5EFA\u7684\u6240\u6709 Pod\u3002 \u4F7F\u7528 DaemonSet \u7684\u4E00\u4E9B\u5178\u578B\u7528\u6CD5\uFF1A",-1),Ix=s("ul",null,[s("li",null,"\u8FD0\u884C\u96C6\u7FA4\u5B58\u50A8 daemon\uFF0C\u4F8B\u5982\u5728\u6BCF\u4E2A Node \u4E0A\u8FD0\u884C glusterd\u3001ceph\u3002"),s("li",null,"\u5728\u6BCF\u4E2A Node \u4E0A\u8FD0\u884C\u65E5\u5FD7\u6536\u96C6 daemon\uFF0C\u4F8B\u5982filebeat\u3001logstash\u3002"),s("li",null,"\u5728\u6BCF\u4E2A Node \u4E0A\u8FD0\u884C\u76D1\u63A7 daemon\uFF0C\u4F8B\u5982 Prometheus Node Exporter\u3001collectd\u3001Datadog \u4EE3\u7406\u3001Zabbix Agent\u3002")],-1),Ox=s("p",null,[s("strong",null,"\u521B\u5EFADaemonSet")],-1),Mx=s("p",null,"DaemonSet\u7684\u63CF\u8FF0\u6587\u4EF6\u548CDeployment\u975E\u5E38\u76F8\u4F3C\uFF0C\u53EA\u9700\u8981\u4FEE\u6539Kind\uFF0C\u5E76\u53BB\u6389\u526F\u672C\u6570\u91CF\u7684\u914D\u7F6E\u5373\u53EF",-1),wx=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 example]# vim nginx-daemonset.yaml")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"apiVersion: apps/v1")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"kind: DaemonSet")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"metadata:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  name: nginx-daemonset")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  labels:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    app: nginx")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"spec:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  selector:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    matchLabels:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"      app: nginx")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  template:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    metadata:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"      labels:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        app: nginx")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    spec:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"      containers:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"      - name: nginx")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        image: nginx:1.13.12")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        ports:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        - containerPort: 80")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Kx=s("p",null,"\u67E5\u770BPod\u5728Node\u4E0A\u7684\u5206\u5E03",-1),Lx=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# kubectl get pod -o wide")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"NAME                    READY     STATUS    RESTARTS   AGE       IP           NODE")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"nginx-daemonset-hk28q   1/1       Running   0          1m        10.2.56.10   192.168.56.12")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"nginx-daemonset-wtt68   1/1       Running   0          1m        10.2.53.10   192.168.56.13")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# kubectl get daemonset")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"NAME              DESIRED   CURRENT   READY     UP-TO-DATE   AVAILABLE   NODE SELECTOR   AGE")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"nginx-daemonset   2         2         2         2            2           <none>          1m")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Ux=s("h1",{id:"_7-4-\u7B2C\u56DB\u6B65\uFF1A\u4F7F\u7528service\u7BA1\u7406pod\u8BBF\u95EE",tabindex:"-1"},[n("7.4 \u7B2C\u56DB\u6B65\uFF1A\u4F7F\u7528Service\u7BA1\u7406Pod\u8BBF\u95EE "),s("a",{class:"header-anchor",href:"#_7-4-\u7B2C\u56DB\u6B65\uFF1A\u4F7F\u7528service\u7BA1\u7406pod\u8BBF\u95EE","aria-hidden":"true"},"#")],-1),jx=s("p",null,"\u5728\u4E0A\u9762\u7684\u5C0F\u8282\uFF0C\u6211\u4EEC\u901A\u8FC7Deployment\u53EF\u4EE5\u4E3A\u4E00\u4E2A\u5E94\u7528\u521B\u5EFA\u591A\u4E2APod\uFF0C\u800C\u4E14\u53EF\u4EE5\u52A8\u6001\u7684\u8FDB\u884C\u589E\u52A0\u3001\u6216\u8005\u5220\u9664\u591A\u4F59\u7684Pod\uFF0CKubernetes Pod \u662F\u6709\u751F\u547D\u5468\u671F\u7684\uFF0C\u5B83\u4EEC\u53EF\u4EE5\u88AB\u521B\u5EFA\uFF0C\u4E5F\u53EF\u4EE5\u88AB\u9500\u6BC1\uFF0C\u4F46\u662F\u6BCF\u6B21Pod\u7684IP\u5730\u5740\u5C31\u4F1A\u53D1\u751F\u53D8\u5316\uFF0C\u5916\u9762\u5982\u4F55\u8BBF\u95EE\u5230\u8BE5Pod\u5462\uFF1F\u603B\u4E0D\u80FD\u6BCF\u6B21Pod\u91CD\u542F\u5C31\u4FEE\u6539\u8BBF\u95EE\u7684IP\u5730\u5740\u5427\u3002 \u6BCF\u4E2A Pod \u90FD\u4F1A\u83B7\u53D6\u5B83\u81EA\u5DF1\u7684 IP \u5730\u5740\uFF0C\u4F46\u662F\u6BCF\u6B21\u5373\u4F7F\u8FD9\u4E9B IP \u5730\u5740\u4E0D\u603B\u662F\u7A33\u5B9A\u53EF\u4F9D\u8D56\u7684\u3002 \u8FD9\u4F1A\u5BFC\u81F4\u4E00\u4E2A\u95EE\u9898\uFF1A\u5728 Kubernetes \u96C6\u7FA4\u4E2D\uFF0C\u5982\u679C\u4E00\u7EC4 Pod\uFF08\u79F0\u4E3A backend\uFF09\u4E3A\u5176\u5B83 Pod \uFF08\u79F0\u4E3A frontend\uFF09\u63D0\u4F9B\u670D\u52A1\uFF0C\u90A3\u4E48\u90A3\u4E9B frontend \u8BE5\u5982\u4F55\u53D1\u73B0\uFF0C\u5E76\u8FDE\u63A5\u5230\u8FD9\u7EC4 Pod \u4E2D\u7684\u54EA\u4E9B backend \u5462\uFF1F",-1),Gx=s("h1",{id:"_9-1-service\u4ECB\u7ECD\u548C\u7BA1\u7406",tabindex:"-1"},[n("9.1 Service\u4ECB\u7ECD\u548C\u7BA1\u7406 "),s("a",{class:"header-anchor",href:"#_9-1-service\u4ECB\u7ECD\u548C\u7BA1\u7406","aria-hidden":"true"},"#")],-1),Hx=s("h3",{id:"\u521B\u5EFAservice",tabindex:"-1"},[n("\u521B\u5EFAService "),s("a",{class:"header-anchor",href:"#\u521B\u5EFAservice","aria-hidden":"true"},"#")],-1),Fx=s("p",null,"\u7EE7\u7EED\u6211\u4EECNginx\u7684\u6848\u4F8B\uFF0C\u6211\u4EEC\u4E3A\u4E4B\u524D\u7684\u5E94\u7528\u521B\u5EFA\u4E00\u4E2AService",-1),Vx=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# cat nginx-service.yaml ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"kind: Service")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"apiVersion: v1")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"metadata:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  name: nginx-service")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"spec:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  selector:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    app: nginx")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  ports:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  - protocol: TCP")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    port: 80")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    targetPort: 80")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Bx=s("ul",null,[s("li",null,"\u7B2C1\u884C\uFF1A\u5B9A\u4E49\u8D44\u6E90\u7C7B\u578B\u4E3AService"),s("li",null,"\u7B2C2\u884C\uFF1A\u5B9A\u4E49\u5F53\u524DService API\u7684\u7248\u672C"),s("li",null,"\u7B2C3\u884C\uFF1Ametadata\u8BBE\u7F6E"),s("li",null,"\u7B2C4\u884C\uFF1A\u8BBE\u7F6EService\u7684\u540D\u79F0\u4E3Anginx-service"),s("li",null,"\u7B2C5\u884C\uFF1Aspec: \u5F00\u59CB\u8BBE\u7F6EService\u7684\u5185\u5BB9"),s("li",null,"\u7B2C6\u884C\uFF1Aselector: \u4E3A\u8BE5Service\u6307\u5B9A\u4E00\u4E2A\u5339\u914D\u7684\u6807\u7B7E"),s("li",null,"\u7B2C7\u884C\uFF1Aapp: nginx \u6240\u6709\u5E26\u6709\u6807\u7B7Eapp \uFF1Anginx\u7684Pod\u5C06\u4F7F\u7528\u8BE5Service"),s("li",null,"\u7B2C8\u884C\uFF1Aports: \u6307\u5B9AService\u9700\u8981\u5BF9\u5916\u7684\u7AEF\u53E3"),s("li",null,"\u7B2C9\u884C\uFF1A\u8BBE\u7F6E\u7AEF\u53E3\u534F\u8BAE\uFF1A\u652F\u6301TCP\u548CUDP"),s("li",null,"\u7B2C10\u884C\uFF1A\u8BBE\u7F6EService\u7684\u7AEF\u53E3"),s("li",null,"\u7B2C11\u884C\uFF1A\u8BBE\u7F6EPod\u7684\u7AEF\u53E3\uFF0CKubernetes\u4F1A\u5C06\u53D1\u9001\u7ED9Service\u7AEF\u53E3\u7684\u8FDE\u63A5\uFF0C\u8F6C\u53D1\u5230Pod\u7684\u7AEF\u53E3\u4E0A\u3002")],-1),qx=s("p",null,"\u521B\u5EFANginx Service",-1),Yx=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# kubectl create -f nginx-service.yaml ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'service "nginx-service" created')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),zx=s("p",null,"\u67E5\u770BNginx Service",-1),$x=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# kubectl get service")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"NAME            TYPE        CLUSTER-IP    EXTERNAL-IP   PORT(S)   AGE")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"kubernetes      ClusterIP   10.1.0.1      <none>        443/TCP   7h")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"nginx-service   ClusterIP   10.1.184.53   <none>        80/TCP    25s")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Xx=s("p",null,"\u8BBF\u95EEServce IP",-1),Jx=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# curl --head 10.1.181.45")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"HTTP/1.1 200 OK")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Server: nginx/1.11.10")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Date: Tue, 21 Feb 2017 08:20:42 GMT")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Content-Type: text/html")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Content-Length: 612")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Last-Modified: Tue, 14 Feb 2017 15:36:04 GMT")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Connection: keep-alive")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'ETag: "58a323e4-264"')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Accept-Ranges: bytes")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Wx=s("h1",{id:"_9-2-service\u548Cendpoint",tabindex:"-1"},[n("9.2 Service\u548CEndpoint "),s("a",{class:"header-anchor",href:"#_9-2-service\u548Cendpoint","aria-hidden":"true"},"#")],-1),Qx=s("p",null,"Service\u4F5C\u4E3AKubernetes\u4E2D\u4E3APod\u5B9E\u73B0\u8D1F\u8F7D\u5747\u8861\u7684\u7EC4\u4EF6\uFF0C\u51E0\u4E4E\u5728\u6240\u6709\u7684\u6587\u7AE0\u4E2D\u4E3A\u4E86\u65B9\u4FBF\u521D\u5B66\u8005\u7406\u89E3\uFF0C\u57FA\u672C\u4E0A\u8BF4\u7684\u662FService\u4F1A\u6765\u76D1\u542CPod\u7684\u53D8\u5316\uFF0C\u7136\u540E\u6765\u66F4\u65B0Pod\u7684IP\u5730\u5740\u3002\u5176\u5B9E\u8FD9\u4E2A\u4E8B\u60C5\u4E0D\u662FService\u5E72\u7684\uFF0C\u800C\u662F\u6709\u4E00\u4E2A\u5E55\u540E\u82F1\u96C4\uFF1AEndpoint Endpoints\u8868\u793A\u4E86\u4E00\u4E2AService\u5BF9\u5E94\u7684\u6240\u6709Pod\u526F\u672C\u7684\u8BBF\u95EE\u5730\u5740\uFF0C\u800CEndpoints Controller\u8D1F\u8D23\u751F\u6210\u548C\u7EF4\u62A4\u6240\u6709Endpoints\u5BF9\u8C61\u7684\u63A7\u5236\u5668\u3002\u5B83\u8D1F\u8D23\u76D1\u542CService\u548C\u5BF9\u5E94\u7684Pod\u526F\u672C\u7684\u53D8\u5316\u3002",-1),Zx=s("ul",null,[s("li",null,"\u5982\u679C\u76D1\u6D4B\u5230Service\u88AB\u5220\u9664\uFF0C\u5219\u5220\u9664\u548C\u8BE5Service\u540C\u540D\u7684Endpoints\u5BF9\u8C61\uFF1B"),s("li",null,"\u5982\u679C\u76D1\u6D4B\u5230\u65B0\u7684Service\u88AB\u521B\u5EFA\u6216\u4FEE\u6539\uFF0C\u5219\u6839\u636E\u8BE5Service\u4FE1\u606F\u83B7\u5F97\u76F8\u5173\u7684Pod\u5217\u8868\uFF0C\u7136\u540E\u521B\u5EFA\u6216\u66F4\u65B0Service\u5BF9\u5E94\u7684Endpoints\u5BF9\u8C61\u3002"),s("li",null,"\u5982\u679C\u76D1\u6D4B\u5230Pod\u7684\u4E8B\u4EF6\uFF0C\u5219\u66F4\u65B0\u5B83\u5BF9\u5E94\u7684Service\u7684Endpoints\u5BF9\u8C61\u3002")],-1),sf=s("p",null,"kube-proxy\u8FDB\u7A0B\u83B7\u53D6\u6BCF\u4E2AService\u7684Endpoints\uFF0C\u5B9E\u73B0Service\u7684\u8D1F\u8F7D\u5747\u8861\u529F\u80FD\u3002",-1),nf=s("h3",{id:"\u521B\u5EFA\u4E00\u4E2Aheadless-service",tabindex:"-1"},[n("\u521B\u5EFA\u4E00\u4E2AHeadless Service "),s("a",{class:"header-anchor",href:"#\u521B\u5EFA\u4E00\u4E2Aheadless-service","aria-hidden":"true"},"#")],-1),lf=s("p",null,"\u7F16\u5199\u4E00\u4E2AService\u4E0D\u4F7F\u7528clusterip",-1),ef=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# cat mysql-service.yaml ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"kind: Service")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"apiVersion: v1")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"metadata:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  name: mysql-service")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"spec:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  ports:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  - protocol: TCP")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    port: 3306")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    targetPort: 3306")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  clusterIP: None")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# kubectl create -f mysql-service.yaml ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'service "mysql-service" created')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),of=s("p",null,"\u67E5\u770BService\uFF0C\u53EF\u4EE5\u653E\u5FC3CLUSTER-IP\u4E3ANone",-1),af=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# kubectl get service mysql-service")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"NAME            TYPE        CLUSTER-IP   EXTERNAL-IP   PORT(S)    AGE")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"mysql-service   ClusterIP   None         <none>        3306/TCP   17s")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),tf=s("p",null,"2.\u521B\u5EFA\u4E00\u4E2AEndpoint",-1),cf=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# vim mysql-endpoint.yaml ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"apiVersion: v1")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"kind: Endpoints")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"metadata:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}}," name: mysql-service")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"subsets:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"- addresses:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  - ip: 192.168.56.13")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  ports:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  - port: 3306")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    protocol: TCP")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# kubectl create -f mysql-endpoint.yaml ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'endpoints "mysql-service" created')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),rf=s("p",null,"3.\u67E5\u770BService\u548CEndpoint\u7684\u5173\u8054",-1),pf=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# kubectl get ep mysql-service")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"NAME            ENDPOINTS            AGE")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"mysql-service   192.168.56.13:3306   42s")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# kubectl describe svc mysql-service")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Name:              mysql-service")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Namespace:         default")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Labels:            <none>")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Annotations:       <none>")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Selector:          <none>")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Type:              ClusterIP")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"IP:                None")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Port:              <unset>  3306/TCP")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"TargetPort:        3306/TCP")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Endpoints:         192.168.56.13:3306")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Session Affinity:  None")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Events:            <none>")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),df=s("h1",{id:"_7-5-\u7B2C\u4E94\u6B65\uFF1A\u4F7F\u7528ingress\u63D0\u4F9B\u5916\u90E8\u8BBF\u95EE",tabindex:"-1"},[n("7.5 \u7B2C\u4E94\u6B65\uFF1A\u4F7F\u7528Ingress\u63D0\u4F9B\u5916\u90E8\u8BBF\u95EE "),s("a",{class:"header-anchor",href:"#_7-5-\u7B2C\u4E94\u6B65\uFF1A\u4F7F\u7528ingress\u63D0\u4F9B\u5916\u90E8\u8BBF\u95EE","aria-hidden":"true"},"#")],-1),Af=s("p",null,"\u901A\u8FC7Service\u53EF\u4EE5\u5C06Kubernetes\u96C6\u7FA4\u4E2D\u7684\u670D\u52A1\u4EE5IP\uFF1APort\u7684\u65B9\u5F0F\u66B4\u9732\u51FA\u6765\uFF0C\u6211\u4EEC\u79F0\u4E4B\u4E3A4\u5C42\u7684\u8D1F\u8F7D\u5747\u8861\uFF0C\u56E0\u4E3A\u8FD9\u4E2A\u662FOSI\u4E03\u5C42\u6A21\u578B\u4E2D\u4F20\u8F93\u5C42\u7684\u529F\u80FD\u3002",-1),Cf=s("p",null,"\u90A3\u4E48\u5982\u4F55\u5B9E\u73B0\u4E03\u5C42\u7684\u8D1F\u8F7D\u5747\u8861\u5462\uFF0C\u4F8B\u5982\u50CFNginx\u90A3\u6837\uFF0C\u53EF\u4EE5\u7075\u6D3B\u7684\u8FDB\u884C\u53CD\u5411\u4EE3\u7406\u7684\u8BBE\u7F6E\uFF0C\u6839\u636E\u4E0D\u540C\u7684URL\u8FDB\u884C\u8F6C\u53D1\u7B49\uFF0C\u96BE\u9053\u6211\u9700\u8981\u81EA\u5DF1\u90E8\u7F72\u4E00\u4E2ANginx\u6765\u505A\u8FD9\u4E2A\u4E8B\u60C5\u5417\uFF1F\u9996\u5148\uFF0C\u5982\u679C\u4F60\u6709\u8FD9\u4E2A\u60F3\u6CD5\uFF0C\u5E76\u6CA1\u6709\u9519\uFF0C\u751A\u81F3\u4F60\u5B8C\u5168\u53EF\u4EE5\u81EA\u5DF1\u72EC\u7ACB\u90E8\u7F72\u4E00\u4E2ANginx\u6765\u5B8C\u6210\uFF0C\u4F46\u662FKubernetes\u63D0\u4F9B\u4E86\u66F4\u597D\u7684\u89E3\u51B3\u65B9\u6848\u5C31\u662FIngress\u3002 Ingress\u5C31\u662F\u4ECEkubernetes\u96C6\u7FA4\u5916\u8BBF\u95EE\u96C6\u7FA4\u7684\u5165\u53E3\uFF0C\u5C06\u7528\u6237\u7684URL\u8BF7\u6C42\u8F6C\u53D1\u5230\u4E0D\u540C\u7684service\u4E0A\u3002ingress\u76F8\u5F53\u4E8Enginx\u53CD\u5411\u4EE3\u7406\u670D\u52A1\u5668\uFF0C\u5B83\u5305\u62EC\u7684\u89C4\u5219\u5B9A\u4E49\u5C31\u662FURL\u7684\u8DEF\u7531\u4FE1\u606F\u3002",-1),uf=s("h2",{id:"_10-1-ingress-controller",tabindex:"-1"},[n("10.1 Ingress Controller "),s("a",{class:"header-anchor",href:"#_10-1-ingress-controller","aria-hidden":"true"},"#")],-1),yf=s("p",null,"\u5728\u5B66\u4E60Service\u7684\u65F6\u5019\uFF0C\u6211\u4EEC\u77E5\u9053\u6700\u7EC8\u7684\u8D1F\u8F7D\u5747\u8861\u7531kube-proxy\u548CLVS\u6765\u5B8C\u6210\uFF0C\u90A3\u4E48Ingress\u9760\u4EC0\u4E48\u6765\u5B9E\u73B07\u5C42\u7684\u8DEF\u7531\u673A\u5236\u5462\uFF1F\u7B54\u6848\u662FIngress Controller\u3002",-1),hf=s("p",null,"Ingress Controller \u5B9E\u8D28\u4E0A\u53EF\u4EE5\u7406\u89E3\u4E3A\u662F\u4E2A\u76D1\u89C6\u5668\uFF0CIngress Controller \u901A\u8FC7\u4E0D\u65AD\u5730\u8DDF kubernetes API \u6253\u4EA4\u9053\uFF0C\u5B9E\u65F6\u7684\u611F\u77E5\u540E\u7AEF service\u3001pod \u7B49\u53D8\u5316\uFF0C\u6BD4\u5982\u65B0\u589E\u548C\u51CF\u5C11 pod\uFF0Cservice \u589E\u52A0\u4E0E\u51CF\u5C11\u7B49\uFF1B\u5F53\u5F97\u5230\u8FD9\u4E9B\u53D8\u5316\u4FE1\u606F\u540E\uFF0CIngress Controller \u518D\u7ED3\u5408\u4E0B\u6587\u7684 Ingress \u751F\u6210\u914D\u7F6E\uFF0C\u7136\u540E\u66F4\u65B0\u53CD\u5411\u4EE3\u7406\u8D1F\u8F7D\u5747\u8861\u5668\uFF0C\u5E76\u5237\u65B0\u5176\u914D\u7F6E\uFF0C\u8FBE\u5230\u670D\u52A1\u53D1\u73B0\u7684\u4F5C\u7528\u3002",-1),_f=s("p",null,"Ingress Controller\u76EE\u524D\u6709\u4E24\u5927\u5F00\u6E90\u9879\u76EE\uFF0C\u4E00\u4E2A\u662FNginx Controller\uFF0C\u4E00\u4E2A\u662F\u76EE\u524D\u6BD4\u8F83\u6D41\u884C\u7684Traefik\uFF0CTraefik\u662F\u4E00\u6B3E\u5F00\u6E90\u7684\u53CD\u5411\u4EE3\u7406\u4E0E\u8D1F\u8F7D\u5747\u8861\u5DE5\u5177\u3002\u5B83\u6700\u5927\u7684\u4F18\u70B9\u662F\u80FD\u591F\u4E0E\u5E38\u89C1\u7684\u5FAE\u670D\u52A1\u7CFB\u7EDF\u76F4\u63A5\u6574\u5408\uFF0C\u53EF\u4EE5\u5B9E\u73B0\u81EA\u52A8\u5316\u52A8\u6001\u914D\u7F6E\u3002\u76EE\u524D\u652F\u6301Docker, Swarm, Mesos/Marathon, Mesos, Kubernetes, Consul, Etcd, Zookeeper, BoltDB, Rest API\u7B49\u7B49\u540E\u7AEF\u6A21\u578B\u3002",-1),Df=s("h2",{id:"ingress-controller-traefik",tabindex:"-1"},[n("Ingress Controller Traefik "),s("a",{class:"header-anchor",href:"#ingress-controller-traefik","aria-hidden":"true"},"#")],-1),gf=s("h3",{id:"\u90E8\u7F72treafik",tabindex:"-1"},[n("\u90E8\u7F72Treafik "),s("a",{class:"header-anchor",href:"#\u90E8\u7F72treafik","aria-hidden":"true"},"#")],-1),mf=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# kubectl label nodes 192.168.56.12 edgenode=true")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'node "192.168.56.12" labeled')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# kubectl create -f /srv/addons/ingress/")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),bf=s("h1",{id:"_11-\u7B2C\u516D\u6B65\uFF1A\u4F7F\u7528pv\u548Cpvc\u7BA1\u7406\u6570\u636E\u5B58\u50A8",tabindex:"-1"},[n("11 \u7B2C\u516D\u6B65\uFF1A\u4F7F\u7528PV\u548CPVC\u7BA1\u7406\u6570\u636E\u5B58\u50A8 "),s("a",{class:"header-anchor",href:"#_11-\u7B2C\u516D\u6B65\uFF1A\u4F7F\u7528pv\u548Cpvc\u7BA1\u7406\u6570\u636E\u5B58\u50A8","aria-hidden":"true"},"#")],-1),kf=s("p",null,"\u622A\u6B62\u76EE\u524D\u6211\u4EEC\u6240\u542F\u52A8Pod\u7684\u5BB9\u5668\u4E2D\u7684\u6570\u636E\u5B58\u50A8\u90FD\u662F\u4E34\u65F6\u7684\uFF0C\u56E0\u6B64Pod\u91CD\u542F\u6216\u8005\u88AB\u5220\u9664\u7684\u65F6\u5019\uFF0C\u4EA7\u751F\u5728\u5BB9\u5668\u4E2D\u7684\u6570\u636E\u4F1A\u53D1\u751F\u4E22\u5931\u3002\u5B9E\u9645\u5E94\u7528\u4E2D\uFF0C\u6211\u4EEC\u6709\u4E9B\u5E94\u7528\u662F\u65E0\u72B6\u6001\uFF0C\u6709\u4E9B\u5E94\u7528\u5219\u9700\u8981\u4FDD\u6301\u72B6\u6001\u6570\u636E\uFF0C\u786E\u4FDDPod\u91CD\u542F\u4E4B\u540E\u80FD\u591F\u8BFB\u53D6\u5230\u4E4B\u524D\u7684\u72B6\u6001\u6570\u636E\uFF0C\u6709\u4E9B\u5E94\u7528\u5219\u4F5C\u4E3A\u96C6\u7FA4\u63D0\u4F9B\u670D\u52A1\u3002\u8FD9\u4E09\u79CD\u670D\u52A1\u5F52\u7EB3\u4E3A\u65E0\u72B6\u6001\u670D\u52A1\u3001\u6709\u72B6\u6001\u670D\u52A1\u4EE5\u53CA\u6709\u72B6\u6001\u7684\u96C6\u7FA4\u670D\u52A1\uFF0C\u5176\u4E2D\u540E\u9762\u4E24\u4E2A\u5B58\u5728\u6570\u636E\u4FDD\u5B58\u4E0E\u5171\u4EAB\u7684\u9700\u6C42\uFF0C\u56E0\u6B64\u5C31\u8981\u91C7\u7528\u5BB9\u5668\u5916\u7684\u5B58\u50A8\u65B9\u6848\u3002 Kubernetes\u4E2D\u5B58\u50A8\u4E2D\u6709\u56DB\u4E2A\u91CD\u8981\u7684\u6982\u5FF5\uFF1AVolume\u3001PersistentVolume\uFF08PV\uFF09\u3001PersistentVolumeClaim \uFF08PVC\uFF09\u3001StorageClass\u3002\u638C\u63E1\u4E86\u8FD9\u56DB\u4E2A\u6982\u5FF5\uFF0C\u5C31\u638C\u63E1\u4E86Kubernetes\u4E2D\u5B58\u50A8\u7CFB\u7EDF\u7684\u6838\u5FC3\u3002",-1),vf=s("h1",{id:"_11-1-kubernetes-volume",tabindex:"-1"},[n("11.1 Kubernetes Volume "),s("a",{class:"header-anchor",href:"#_11-1-kubernetes-volume","aria-hidden":"true"},"#")],-1),xf=s("h1",{id:"_11-2-persistentvolume\uFF08pv\uFF09",tabindex:"-1"},[n("11.2 PersistentVolume\uFF08PV\uFF09 "),s("a",{class:"header-anchor",href:"#_11-2-persistentvolume\uFF08pv\uFF09","aria-hidden":"true"},"#")],-1),ff=s("p",null,"PersistentVolume\uFF08PV\uFF09\u662F\u7531\u7BA1\u7406\u5458\u8BBE\u7F6E\u7684\u5B58\u50A8\uFF0C\u5B83\u662F\u7FA4\u96C6\u7684\u4E00\u90E8\u5206\u3002\u5C31\u50CF\u8282\u70B9\u662F\u96C6\u7FA4\u4E2D\u7684\u8D44\u6E90\u4E00\u6837\uFF0CPV \u4E5F\u662F\u96C6\u7FA4\u4E2D\u7684\u8D44\u6E90\u3002 PV \u662F Volume \u4E4B\u7C7B\u7684\u5377\u63D2\u4EF6\uFF0C\u4F46\u5177\u6709\u72EC\u7ACB\u4E8E\u4F7F\u7528 PV \u7684 Pod \u7684\u751F\u547D\u5468\u671F\u3002\u6B64 API \u5BF9\u8C61\u5305\u542B\u5B58\u50A8\u5B9E\u73B0\u7684\u7EC6\u8282\uFF0C\u5373 NFS\u3001iSCSI \u6216\u7279\u5B9A\u4E8E\u4E91\u4F9B\u5E94\u5546\u7684\u5B58\u50A8\u7CFB\u7EDF\u3002",-1),Sf=s("p",null,[s("strong",null,"1.\u5B89\u88C5\u5E76\u914D\u7F6ENFS")],-1),Ef=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# yum install -y nfs-utils rpcbind")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# mkdir -p /data/k8s-nfs")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# vim /etc/exports")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"/data/k8s-nfs *(rw,sync,no_root_squash)")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Pf=s("p",null,"\u542F\u52A8NFS",-1),Nf=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# systemctl enable rpcbind nfs")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# systemctl start rpcbind nfs")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Rf=s("p",null,[s("strong",null,"2.\u521B\u5EFA\u5E76\u67E5\u770BPV")],-1),Tf=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# vim nfs-pv.yaml")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"apiVersion: v1")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"kind: PersistentVolume")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"metadata:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  name: pv-demo")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"spec:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  capacity:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"storage: 1Gi")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  volumeMode: Filesystem")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  accessModes:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    - ReadWriteOnce")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  persistentVolumeReclaimPolicy: Recycle")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  storageClassName: nfs")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  nfs:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    path: /data/k8s-nfs/pv-demo")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    server: 192.168.56.11")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# kubectl create -f nfs-pv.yaml ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'persistentvolume "pv-demo" created')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),If=s("p",null,"\u67E5\u770B\u521B\u5EFA\u7684PV",-1),Of=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# kubectl get pv")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"NAME      CAPACITY   ACCESS MODES   RECLAIM POLICY   STATUS      CLAIM     STORAGECLASS   REASON    AGE")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"pv-demo   1Gi        RWO            Recycle          Available             nfs                      15s")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Mf=s("h1",{id:"_11-3-persistentvolumeclaim\uFF08pvc\uFF09",tabindex:"-1"},[n("11.3 PersistentVolumeClaim\uFF08PVC\uFF09 "),s("a",{class:"header-anchor",href:"#_11-3-persistentvolumeclaim\uFF08pvc\uFF09","aria-hidden":"true"},"#")],-1),wf=s("p",null,"PersistentVolumeClaim\uFF08PVC\uFF09\u662F\u7528\u6237\u5B58\u50A8\u7684\u8BF7\u6C42\u3002\u5B83\u4E0E Pod \u76F8\u4F3C\u3002Pod \u6D88\u8017\u8282\u70B9\u8D44\u6E90\uFF0CPVC \u6D88\u8017 PV \u8D44\u6E90\u3002Pod \u53EF\u4EE5\u8BF7\u6C42\u7279\u5B9A\u7EA7\u522B\u7684\u8D44\u6E90\uFF08CPU \u548C\u5185\u5B58\uFF09\u3002\u58F0\u660E\u53EF\u4EE5\u8BF7\u6C42\u7279\u5B9A\u7684\u5927\u5C0F\u548C\u8BBF\u95EE\u6A21\u5F0F\uFF08\u4F8B\u5982\uFF0C\u53EF\u4EE5\u4EE5\u8BFB/\u5199\u4E00\u6B21\u6216 \u53EA\u8BFB\u591A\u6B21\u6A21\u5F0F\u6302\u8F7D\uFF09\u3002",-1),Kf=s("p",null,"1.\u521B\u5EFAPVC",-1),Lf=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# vim nfs-pvc.yaml")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"apiVersion: v1")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"kind: PersistentVolumeClaim")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"metadata:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  name: pvc-demo")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"spec:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  accessModes:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    - ReadWriteOnce")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  resources:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    requests:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"      storage: 1Gi")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  storageClassName: nfs")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Uf=s("p",null,"\u521B\u5EFA\u5E76\u67E5\u770BPVC",-1),jf=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# kubectl create -f nfs-pvc.yaml ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'persistentvolumeclaim "pvc-demo" created')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# kubectl get pvc")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"NAME       STATUS    VOLUME    CAPACITY   ACCESS MODES   STORAGECLASS   AGE")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"pvc-demo   Bound     pv-demo   1Gi        RWO            nfs            6s")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Gf=s("p",null,"2.\u4F7F\u7528PVC",-1),Hf=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# vim nginx-deployment-pvc.yaml")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"apiVersion: apps/v1")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"kind: Deployment")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"metadata:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  name: nginx-deployment")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  labels:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    app: nginx")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"spec:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  replicas: 3")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  selector:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    matchLabels:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"      app: nginx")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  template:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    metadata:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"      labels:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        app: nginx")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    spec:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"      containers:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"      - name: nginx")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        image: nginx:1.13.12")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        ports:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        - containerPort: 80")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        volumeMounts:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'        - mountPath: "/usr/share/nginx/html"')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"          name: pvc-demo")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"      volumes:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"      - name: pvc-demo")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        persistentVolumeClaim:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"          claimName: pvc-demo")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Ff=s("h1",{id:"_11-4-storageclass",tabindex:"-1"},[n("11.4 StorageClass "),s("a",{class:"header-anchor",href:"#_11-4-storageclass","aria-hidden":"true"},"#")],-1),Vf=s("h1",{id:"_7-\u7B2C\u4E03\u6B65\uFF1A\u4F7F\u7528rancher\u7BA1\u7406kubernetes\u96C6\u7FA4",tabindex:"-1"},[n("7 \u7B2C\u4E03\u6B65\uFF1A\u4F7F\u7528Rancher\u7BA1\u7406Kubernetes\u96C6\u7FA4 "),s("a",{class:"header-anchor",href:"#_7-\u7B2C\u4E03\u6B65\uFF1A\u4F7F\u7528rancher\u7BA1\u7406kubernetes\u96C6\u7FA4","aria-hidden":"true"},"#")],-1),Bf=s("p",null,"\u73B0\u5728\u6211\u4EEC\u5DF2\u7ECF\u5177\u5907\u628A\u5E94\u7528\u8FC1\u79FB\u5230Kubernetes\u4E2D\u6765\u7684\u80FD\u529B\uFF0C\u90A3\u4E48\u73B0\u5728\uFF0C\u8FC1\u79FB\u540E\uFF0C\u65E5\u5E38\u7684\u8FD0\u7EF4\u5DE5\u4F5C\u5C31\u53D1\u751F\u7684\u53D8\u5316\uFF0C\u622A\u6B62\u76EE\u524D\uFF0C\u5728\u751F\u4EA7\u73AF\u5883\u4E2D\uFF0C\u6211\u4EEC\u5F88\u5C11\u4F7F\u7528\u5B98\u65B9\u81EA\u5E26\u7684Dashbaord\u6765\u5B8C\u6210\u65E5\u5E38\u7684\u8FD0\u7EF4\u5DE5\u4F5C\uFF0C\u800C\u662F\u4F7F\u7528\u7B2C\u4E09\u65B9\u7684\u8FD0\u7EF4\u5DE5\u5177Rancher\u3002",-1),qf=s("h2",{id:"_7-1-rancher\u5FEB\u901F\u5165\u95E8",tabindex:"-1"},[n("7.1 Rancher\u5FEB\u901F\u5165\u95E8 "),s("a",{class:"header-anchor",href:"#_7-1-rancher\u5FEB\u901F\u5165\u95E8","aria-hidden":"true"},"#")],-1),Yf=s("p",null,"\u5FEB\u901F\u90E8\u7F72\u5355\u673A\u7248Rancher",-1),zf=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# mkdir /opt/rancher")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# docker run -d --restart=unless-stopped -v /opt/rancher:/var/lib/rancher/ -p 80:80 -p 443:443 rancher/rancher")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),$f=s("h2",{id:"_7-2-\u4F7F\u7528rancher\u8FDB\u884C\u65E5\u5E38\u7BA1\u7406",tabindex:"-1"},[n("7.2 \u4F7F\u7528Rancher\u8FDB\u884C\u65E5\u5E38\u7BA1\u7406 "),s("a",{class:"header-anchor",href:"#_7-2-\u4F7F\u7528rancher\u8FDB\u884C\u65E5\u5E38\u7BA1\u7406","aria-hidden":"true"},"#")],-1),Xf=s("h2",{id:"_7-3-rancher\u751F\u4EA7\u96C6\u7FA4\u90E8\u7F72",tabindex:"-1"},[n("7.3 Rancher\u751F\u4EA7\u96C6\u7FA4\u90E8\u7F72 "),s("a",{class:"header-anchor",href:"#_7-3-rancher\u751F\u4EA7\u96C6\u7FA4\u90E8\u7F72","aria-hidden":"true"},"#")],-1),Jf=s("h1",{id:"\u7B2C\u516D\u90E8\u5206-\u7BA1\u7406kubernetes\u4E2D\u7684\u5E94\u7528",tabindex:"-1"},[n("\u7B2C\u516D\u90E8\u5206 \u7BA1\u7406Kubernetes\u4E2D\u7684\u5E94\u7528 "),s("a",{class:"header-anchor",href:"#\u7B2C\u516D\u90E8\u5206-\u7BA1\u7406kubernetes\u4E2D\u7684\u5E94\u7528","aria-hidden":"true"},"#")],-1),Wf=s("h1",{id:"_13-\u5E94\u7528\u7684\u8D44\u6E90\u9650\u5236\u548C\u5065\u5EB7\u68C0\u67E5",tabindex:"-1"},[n("13 \u5E94\u7528\u7684\u8D44\u6E90\u9650\u5236\u548C\u5065\u5EB7\u68C0\u67E5 "),s("a",{class:"header-anchor",href:"#_13-\u5E94\u7528\u7684\u8D44\u6E90\u9650\u5236\u548C\u5065\u5EB7\u68C0\u67E5","aria-hidden":"true"},"#")],-1),Qf=s("h1",{id:"_13-1-\u5E94\u7528\u7684\u8D44\u6E90\u9650\u5236",tabindex:"-1"},[n("13.1 \u5E94\u7528\u7684\u8D44\u6E90\u9650\u5236 "),s("a",{class:"header-anchor",href:"#_13-1-\u5E94\u7528\u7684\u8D44\u6E90\u9650\u5236","aria-hidden":"true"},"#")],-1),Zf=s("h1",{id:"_13-2-\u5E94\u7528\u7684\u5065\u5EB7\u68C0\u67E5",tabindex:"-1"},[n("13.2 \u5E94\u7528\u7684\u5065\u5EB7\u68C0\u67E5 "),s("a",{class:"header-anchor",href:"#_13-2-\u5E94\u7528\u7684\u5065\u5EB7\u68C0\u67E5","aria-hidden":"true"},"#")],-1),s8=s("h3",{id:"liveness\u63A2\u6D4B",tabindex:"-1"},[n("Liveness\u63A2\u6D4B "),s("a",{class:"header-anchor",href:"#liveness\u63A2\u6D4B","aria-hidden":"true"},"#")],-1),n8=s("p",null,"Kubernetes\u6709\u4E24\u79CD\u63A2\u6D4B\u673A\u5236\uFF0CLiveness\u548CReadiness\uFF0C\u914D\u7F6E\u90FD\u662F\u76F8\u4F3C\u7684\uFF0C\u53EA\u662F\u5B9E\u73B0\u7684\u529F\u80FD\u4E0D\u540C\u3002 Liveness\u63A2\u6D4B\u662F\u9488\u5BF9Pod\u5065\u5EB7\u72B6\u6001\u7684\u63A2\u6D4B\uFF0C\u7C7B\u4F3C\u4E8E\u96C6\u7FA4\u4E2D\u7684\u5065\u5EB7\u68C0\u67E5\uFF0C\u7528\u6237\u53EF\u4EE5\u81EA\u5B9A\u4E49\u8FD9\u4E2A\u5065\u5EB7\u68C0\u67E5\u7684\u6761\u4EF6\uFF0C\u5982\u679C\u63A2\u6D4B\u5931\u8D25\uFF0CKubernetes\u5C06\u4F1A\u91CD\u542F\u5BB9\u5668\u3002 \u5982\u679C\u60A8\u5E0C\u671B\u5BB9\u5668\u5728\u63A2\u6D4B\u5931\u8D25\u65F6\u88AB\u6740\u6B7B\u5E76\u91CD\u65B0\u542F\u52A8\uFF0C\u90A3\u4E48\u8BF7\u6307\u5B9A\u4E00\u4E2ALiveness\u914D\u7F6E\uFF0C\u5E76\u6307\u5B9ArestartPolicy \u4E3A Always \u6216 OnFailure\u3002 \u914D\u7F6E\u6848\u4F8B",-1),l8=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"livenessProbe:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"exec:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    command:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    - ps aux | grep nginx")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"initialDelaySeconds: 10")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"periodSeconds: 5")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"timeoutSeconds: 3")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),e8=s("h3",{id:"readiness\u63A2\u6D4B",tabindex:"-1"},[n("Readiness\u63A2\u6D4B "),s("a",{class:"header-anchor",href:"#readiness\u63A2\u6D4B","aria-hidden":"true"},"#")],-1),o8=s("p",null,"Readiness\u63A2\u6D4B\u662F\u63A2\u6D4BPod\u662F\u5426\u51C6\u5907\u597D\u5BF9\u5916\u63D0\u4F9B\u8BBF\u95EE\uFF0C\u4F8B\u5982\u6211\u4EEC\u5728Pod\u91CC\u9762\u8FD0\u884C\u4E00\u4E2ATomcat\u7684\u5BB9\u5668\uFF0C\u91CC\u9762\u8FD0\u884C\u4E86\u4E00\u4E2AJenkins\u7684\u5E94\u7528\uFF0C\u90A3\u4E48\u7B49Jenkins\u5B8C\u5168\u542F\u52A8\u80FD\u63D0\u4F9B\u670D\u52A1\u53EF\u80FD\u9700\u89811\u5206\u949F\uFF0C\u6240\u4EE5\u5728\u57281\u5206\u949F\u4E4B\u524D\u662F\u4E0D\u80FD\u63D0\u4F9B\u7ED9\u7528\u6237\u8BBF\u95EE\u7684\uFF0C\u4E5F\u5C31\u662F\u4E0D\u80FD\u52A0\u5165Service\u7684\u8D1F\u8F7D\u5747\u8861\u4E2D\uFF0C\u8FD9\u4E2A\u5C31\u9760Readiness\u63A2\u6D4B\u6765\u63A7\u5236\u3002 Readiness\u7528\u6765\u63A7\u5236\u544A\u8BC9Kubernetes\u4EC0\u4E48\u65F6\u95F4\u53EF\u4EE5\u5C06\u5BB9\u5668\u52A0\u5165\u5230Service\u7684\u8D1F\u8F7D\u5747\u8861\u4E2D\uFF0C\u914D\u7F6E\u65B9\u6CD5\u548CLiveness\u4E00\u6837\uFF0C\u53EA\u9700\u8981\u4FEE\u6539livennessProbe\u66FF\u6362\u4E3AreadinessProbe\u5373\u53EF\u3002",-1),a8=s("h2",{id:"\u5065\u5EB7\u68C0\u67E5\u7684\u65B9\u6CD5",tabindex:"-1"},[n("\u5065\u5EB7\u68C0\u67E5\u7684\u65B9\u6CD5 "),s("a",{class:"header-anchor",href:"#\u5065\u5EB7\u68C0\u67E5\u7684\u65B9\u6CD5","aria-hidden":"true"},"#")],-1),t8=s("p",null,"Kubernetes\u7684\u5065\u5EB7\u68C0\u67E5\u662F\u7531\u8FD0\u884C\u5728\u5404\u4E2ANode\u4E0A\u7684kubelet\u6765\u5B8C\u6210\u7684\uFF0Ckubelet\u76EE\u524D\u652F\u6301\u4EE5\u4E0B\u4E09\u79CD\u5065\u5EB7\u68C0\u67E5\u7684\u65B9\u6CD5\uFF1A",-1),c8=s("ul",null,[s("li",null,"ExecAction\uFF1A\u5728\u5BB9\u5668\u4E2D\u6267\u884C\u6307\u5B9A\u7684\u547D\u4EE4\u3002\u5982\u679C\u547D\u4EE4\u9000\u51FA\u65F6\u72B6\u6001\u7801\u4E3A0\uFF0C\u5219\u8BA4\u4E3A\u8BCA\u65AD\u6210\u529F\u3002"),s("li",null,"TCPSocketAction:\u5BF9\u6307\u5B9A\u7AEF\u53E3\u4E0A\u5BB9\u5668\u7684IP\u5730\u5740\u6267\u884CTCP\u68C0\u67E5\u3002\u5982\u679C\u7AEF\u53E3\u662F\u6253\u5F00\u7684\uFF0C\u5219\u8BA4\u4E3A\u8BCA\u65AD\u662F\u6210\u529F\u7684\u3002"),s("li",null,"HTTPGetAction:\u5BF9\u6307\u5B9A\u7AEF\u53E3\u548C\u8DEF\u5F84\u4E0A\u5BB9\u5668\u7684IP\u5730\u5740\u6267\u884CHTTP Get\u8BF7\u6C42\u3002\u5982\u679C\u54CD\u5E94\u7684\u72B6\u6001\u7801\u5927\u4E8E\u6216\u7B49\u4E8E200\uFF0C\u5C0F\u4E8E400\uFF0C\u5219\u8BA4\u4E3A\u8BCA\u65AD\u662F\u6210\u529F\u7684\u3002")],-1),i8=s("p",null,"\u4EE5\u4E0A\u4E09\u79CD\u5065\u5EB7\u68C0\u67E5\u7684\u65B9\u6CD5\u4F1A\u6709\u4E09\u79CD\u8FD4\u56DE\u7ED3\u679C\uFF1A",-1),r8=s("ul",null,[s("li",null,[s("p",null,"Success\uFF1A\u6210\u529F\uFF0C\u5BB9\u5668\u901A\u8FC7\u8BCA\u65AD\u3002")]),s("li",null,[s("p",null,"Failure\uFF1A\u5931\u8D25\uFF0C\u5BB9\u5668\u8BCA\u65AD\u5931\u8D25\u3002")]),s("li",null,[s("p",null,"Unknown\uFF1A\u63A2\u6D4B\u5931\u8D25\uFF0C\u65E0\u6CD5\u6267\u884C\u63A2\u6D4B\uFF0C\u6240\u4EE5\u4E0D\u5E94\u8BE5\u91C7\u53D6\u4EFB\u4F55\u884C\u52A8\u3002"),s("p",null,"\u9488\u5BF9\u4E8E\u63A2\u9488\u6709\u4EE5\u4E0B\u914D\u7F6E\u53C2\u6570\uFF0C\u9700\u8981\u6CE8\u610F\u4E0D\u7BA1\u662FLiveness\u8FD8\u662FReadiness\u63A2\u6D4B\uFF0C\u63A2\u9488\u7684\u4F7F\u7528\u90FD\u662F\u76F8\u540C\u7684\uFF0C\u552F\u4E00\u7684\u4E0D\u540C\u662F\u63A2\u6D4B\u5B8C\u6BD5\u540E\uFF0C\u6267\u884C\u64CD\u4F5C\u7684\u4E0D\u540C\u3002")]),s("li",null,[s("p",null,"initialDelaySeconds: \u63A2\u6D4B\u7684\u5EF6\u8FDF\u65F6\u95F4\uFF0C\u5355\u4F4D\u662F\u79D2\u3002\u4E5F\u5C31\u662F\u8BF4\u5728\u5BB9\u5668\u542F\u52A8\u591A\u5C11\u79D2\u4E4B\u540E\u5F00\u59CB\u8FDB\u884C\u7B2C\u4E00\u6B21\u63A2\u6D4B\uFF0C\u4F8B\u5982\u4F60\u542F\u52A8\u4E00\u4E2AJava\u7684\u5E94\u7528\u9700\u898150\u79D2\uFF0C\u90A3\u4E48\u8FD9\u4E2A\u503C\u5C31\u9700\u8981\u5927\u4E8E50s\u3002\u6240\u4EE5\u8FD9\u4E2A\u503C\u662F\u9700\u8981\u6839\u636E\u5E94\u7528\u7684\u5177\u4F53\u60C5\u51B5\u6765\u8BBE\u7F6E\u3002")]),s("li",null,[s("p",null,"periodSeconds\uFF1A\u63A2\u6D4B\u6267\u884C\u7684\u5468\u671F\u65F6\u95F4\uFF0C\u5355\u4F4D\u662F\u79D2\u3002\u662F\u6307\u6BCF\u9694\u591A\u957F\u65F6\u95F4\u6267\u884C\u4E00\u6B21\u63A2\u6D4B\uFF0C\u9891\u7387\u8D8A\u9AD8\uFF0C\u53D1\u73B0\u6545\u969C\u7684\u65F6\u95F4\u4E5F\u5C31\u8D8A\u77ED\uFF0C\u5E76\u4E0D\u662F\u8D8A\u77ED\u8D8A\u597D\u3002\u5982\u679C\u5E94\u7528\u670D\u52A1\u4E0D\u591F\u7A33\u5B9A\uFF0C\u592A\u9AD8\u7684\u9891\u7387\u53CD\u800C\u4F1A\u5BFC\u81F4\u5F88\u591A\u4F60\u8BA4\u4E3A\u7684\u201C\u8BEF\u62A5\u201D\u3002\u9ED8\u8BA4\u662F10\u79D2\uFF0C\u6700\u5C0F\u503C\u662F1\u79D2\u3002")]),s("li",null,[s("p",null,"timeoutSeconds: \u63A2\u6D4B\u8D85\u65F6\u65F6\u95F4\uFF0C\u5355\u4F4D\u662F\u79D2\uFF0C\u6267\u884C\u63A2\u6D4B\u5982\u679C\u8D85\u8FC7\u8FD9\u4E2A\u65F6\u95F4\u6CA1\u6709\u8FD4\u56DE\u7ED3\u679C\uFF0C\u53D8\u610F\u5473\u7740\u63A2\u6D4B\u7684\u7ED3\u679C\u662F\u5931\u8D25\u3002\u9ED8\u8BA4\u4E3A1\u79D2\u3002\u6700\u5C0F\u503C\u662F1\u79D2\u3002")]),s("li",null,[s("p",null,"failureThreshold\uFF1A\u63A2\u6D4B\u6210\u529F\u540E\uFF0C\u6700\u5C11\u8FDE\u7EED\u63A2\u6D4B\u5931\u8D25\u591A\u5C11\u6B21\u624D\u88AB\u8BA4\u5B9A\u4E3A\u5931\u8D25\u3002\u8FD9\u4E2A\u662FKubernetes\u5C06\u5728\u653E\u5F03\u4E4B\u524D\u5C1D\u8BD5\u5931\u8D25\u9608\u503C\u65F6\u95F4\u3002\u653E\u5F03\u751F\u547D\u63A2\u6D4B\u610F\u5473\u7740\u91CD\u65B0\u542F\u52A8Pod\u3002\u4E00\u65E6\u51C6\u5907\u5C31\u7EEA\uFF0CPod\u5C06\u88AB\u6807\u8BB0\u4E3A\u672A\u51C6\u5907\u5C31\u7EEA\u3002\u9ED8\u8BA4\u4E3A3\u3002\u6700\u5C0F\u503C\u662F1\u3002")]),s("li",null,[s("p",null,"successThreshold: \u5728\u63A2\u6D4B\u5931\u8D25\u540E\uFF0C\u6700\u5C11\u8FDE\u7EED\u63A2\u6D4B\u6210\u529F\u591A\u5C11\u6B21\u624D\u88AB\u8BA4\u5B9A\u4E3A\u6210\u529F\u3002\u9ED8\u8BA4\u4E3A1\uFF0C\u4E5F\u5C31\u662F\u5FC5\u987B\u63A2\u6D4B\u6210\u529F1\u6B21\uFF0C\u624D\u80FD\u8BA4\u4E3A\u72B6\u6001\u6062\u590D\uFF0C\u6700\u5C0F\u503C\u662F1\u3002"),s("h1",{id:"\u7BA1\u7406\u5E94\u7528\u7684dns\u8BBF\u95EE",tabindex:"-1"},[n("\u7BA1\u7406\u5E94\u7528\u7684DNS\u8BBF\u95EE "),s("a",{class:"header-anchor",href:"#\u7BA1\u7406\u5E94\u7528\u7684dns\u8BBF\u95EE","aria-hidden":"true"},"#")])])],-1),p8=s("h1",{id:"_14-1-kubernetes\u4E2D\u7684dns",tabindex:"-1"},[s("a",{href:"http://k8s.unixhot.com/",target:"_blank",rel:"noreferrer"},"14.1 Kubernetes\u4E2D\u7684DNS"),n(),s("a",{class:"header-anchor",href:"#_14-1-kubernetes\u4E2D\u7684dns","aria-hidden":"true"},"#")],-1),d8=s("h1",{id:"\u5E94\u7528\u7684dns\u7BA1\u7406",tabindex:"-1"},[n("\u5E94\u7528\u7684DNS\u7BA1\u7406 "),s("a",{class:"header-anchor",href:"#\u5E94\u7528\u7684dns\u7BA1\u7406","aria-hidden":"true"},"#")],-1),A8=s("h3",{id:"pod\u7684\u57DF\u540D\u89E3\u6790\u7B56\u7565",tabindex:"-1"},[n("Pod\u7684\u57DF\u540D\u89E3\u6790\u7B56\u7565 "),s("a",{class:"header-anchor",href:"#pod\u7684\u57DF\u540D\u89E3\u6790\u7B56\u7565","aria-hidden":"true"},"#")],-1),C8=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# kubectl run dns-test --generator=run-pod/v1 --image=alpine --replicas=1 sleep 360000")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"pod/dns-test created")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),u8=s("p",null,"\u67E5\u770BPod",-1),y8=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# kubectl get pod dns-test")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"NAME       READY   STATUS    RESTARTS   AGE")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"dns-test   1/1     Running   0          79s")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),h8=s("p",null,"Pod\u9ED8\u8BA4\u7684DNS\u914D\u7F6E",-1),_8=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# kubectl exec -it dns-test /bin/sh")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"/ # cat /etc/resolv.conf ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"nameserver 10.1.0.10")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"search default.svc.cluster.local svc.cluster.local cluster.local")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"options ndots:5")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),D8=s("p",null,"\u5982\u4F55\u8BBF\u95EEService\u540D\u79F0",-1),g8=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"/ # ping -c 3 wordpress-service.default.svc.cluster.local")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"PING wordpress-service.default.svc.cluster.local (10.1.92.244): 56 data bytes")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"64 bytes from 10.1.92.244: seq=0 ttl=64 time=0.074 ms")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"64 bytes from 10.1.92.244: seq=1 ttl=64 time=0.141 ms")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"64 bytes from 10.1.92.244: seq=2 ttl=64 time=0.187 ms")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"--- wordpress-service.default.svc.cluster.local ping statistics ---")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"3 packets transmitted, 3 packets received, 0% packet loss")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"round-trip min/avg/max = 0.074/0.134/0.187 ms")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),m8=s("p",null,"DNS\u67E5\u8BE2\u7B56\u7565",-1),b8=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# kubectl get pod dns-test -o yaml | grep dnsPolicy")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  dnsPolicy: ClusterFirst")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),k8=s("ul",null,[s("li",null,"Default: Pod\u4ECE\u5176\u8FD0\u884C\u7684\u8282\u70B9\u4E2D\u7EE7\u627F\u540D\u79F0\u89E3\u6790\u914D\u7F6E\u3002"),s("li",null,"ClusterFirst:\uFF08\u9ED8\u8BA4\u7B56\u7565\uFF09\u4E0E\u914D\u7F6E\u7684\u7FA4\u96C6\u57DF\u540D\u540E\u7F00\u4E0D\u5339\u914D\u7684\u4EFB\u4F55DNS\u67E5\u8BE2\u90FD\u5C06\u8F6C\u53D1\u5230\u4ECE\u8282\u70B9\u7EE7\u627F\u7684\u4E0A\u6E38\u540D\u79F0\u670D\u52A1\u5668\u3002"),s("li",null,"ClusterFirstWithHostNet: \u5982\u679CPod\u4F7F\u7528\u4E86hostNetwork\uFF08\u4F8B\u5982Ingress Controller Treafik\u5C31\u662F\u4F7F\u7528\u4E86hostNetwok\uFF09\uFF0C\u5E94\u663E\u5F0F\u8BBE\u7F6E\u5176DNS\u7B56\u7565\u4E3A\u201CClusterFirstWithHostNet\u201D\u3002"),s("li",null,"None: \u5B83\u5141\u8BB8Pod\u5FFD\u7565Kubernetes\u73AF\u5883\u4E2D\u7684DNS\u8BBE\u7F6E\uFF0C\u8FD9\u65F6\u5019\u4F1A\u4F7F\u7528Pod Spec\u4E2D\u7684dnsConfig\u5B57\u6BB5\u63D0\u4F9B\u7684DNS\u8BBE\u7F6E\u3002")],-1),v8=s("h2",{id:"\u5E94\u7528\u7684dns\u7BA1\u7406-1",tabindex:"-1"},[n("\u5E94\u7528\u7684DNS\u7BA1\u7406 "),s("a",{class:"header-anchor",href:"#\u5E94\u7528\u7684dns\u7BA1\u7406-1","aria-hidden":"true"},"#")],-1),x8=s("h2",{id:"_15-1-\u4F7F\u7528configmap\u7BA1\u7406\u5E94\u7528\u914D\u7F6E",tabindex:"-1"},[n("15.1 \u4F7F\u7528ConfigMap\u7BA1\u7406\u5E94\u7528\u914D\u7F6E "),s("a",{class:"header-anchor",href:"#_15-1-\u4F7F\u7528configmap\u7BA1\u7406\u5E94\u7528\u914D\u7F6E","aria-hidden":"true"},"#")],-1),f8=s("h3",{id:"\u901A\u8FC7kubectl\u547D\u4EE4\u521B\u5EFAconfigmap",tabindex:"-1"},[n("\u901A\u8FC7kubectl\u547D\u4EE4\u521B\u5EFAConfigMap "),s("a",{class:"header-anchor",href:"#\u901A\u8FC7kubectl\u547D\u4EE4\u521B\u5EFAconfigmap","aria-hidden":"true"},"#")],-1),S8=s("p",null,[s("strong",null,"\u521B\u5EFA\u4E00\u4E2A\u540D\u79F0\u4E3Acmd-config\u7684ConfigMap")],-1),E8=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@k8s-master1 ~]# kubectl create configmap cmd-config --from-literal=host=www.unixhot.com")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"configmap/cmd-config created")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),P8=s("p",null,[s("strong",null,"\u67E5\u770BConfigMap")],-1),N8=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@k8s-master1 ~]# kubectl get configmap")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"NAME         DATA   AGE")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"cmd-config   1      63s")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),R8=s("p",null,[s("strong",null,"\u67E5\u770BConfigMap\u5185\u5BB9")],-1),T8=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@k8s-master1 ~]# kubectl describe configmap cmd-config")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Name:         cmd-config")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Namespace:    default")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Labels:       <none>")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Annotations:  <none>")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Data")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"====")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"host:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"----")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"www.unixhot.com")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Events:  <none>")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),I8=s("p",null,[s("strong",null,"ConfigMap\u4E2D\u5305\u542B\u591A\u4E2A\u952E\u503C\u5BF9"),n(" \u53EF\u4EE5\u591A\u6B21\u4F7F\u7528--from-literal\u4E3A\u4E00\u4E2AConfigMap\u521B\u5EFA\u591A\u4E2A\u952E\u503C\u5BF9\uFF0C\u4E2D\u95F4\u7528\u7A7A\u683C\u5206\u9694")],-1),O8=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@k8s-master1 ~]# kubectl create configmap mcmd-config --from-literal=host=www.unixhot.com --from-literal=port=443 --from-literal=ssl=on")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"configmap/mcmd-config created")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),M8=s("h3",{id:"\u901A\u8FC7yaml\u6587\u4EF6\u521B\u5EFAconfigmap",tabindex:"-1"},[n("\u901A\u8FC7YAML\u6587\u4EF6\u521B\u5EFAConfigMap "),s("a",{class:"header-anchor",href:"#\u901A\u8FC7yaml\u6587\u4EF6\u521B\u5EFAconfigmap","aria-hidden":"true"},"#")],-1),w8=s("p",null,"\u67E5\u770B\u5DF2\u521B\u5EFA\u7684ConfigMap\u751F\u6210\u7684YAML\u6587\u4EF6",-1),K8=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@k8s-master1 ~]# kubectl get configmap mcmd-config -o yaml")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"apiVersion: v1")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"data:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  host: www.unixhot.com")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'  port: "443"')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'  ssl: "on"')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"kind: ConfigMap")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"metadata:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'  creationTimestamp: "2019-11-05T01:45:13Z"')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  name: mcmd-config")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  namespace: default")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'  resourceVersion: "5394993"')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  selfLink: /api/v1/namespaces/default/configmaps/mcmd-config")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  uid: 02012d69-e324-4e9d-ba04-7132e9f6ecd8")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),L8=s("p",null,"\u53EA\u9700\u8981\u5C06metadata\u4E2D\u65E0\u9700\u6307\u5B9A\u7684\u5B57\u6BB5\u53BB\u6389\u5373\u53EF\u751F\u6210\u4E00\u4E2AYAML\u6587\u4EF6\u3002",-1),U8=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@k8s-master1 ~]# kubectl get configmap mcmd-config -o yaml > mcmd-config-v2.yaml")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@k8s-master1 ~]# vim mcmd-config-v2.yaml ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"apiVersion: v1")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"data:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  host: www.unixhot.com")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'  port: "443"')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'  ssl: "on"')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"kind: ConfigMap")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"metadata:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  name: mcmd-config-v2")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  namespace: default")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),j8=s("p",null,[s("a",{href:"http://xn--metadata-0n3mp82lcujlhxj58f8qvb.name",target:"_blank",rel:"noreferrer"},"\u6CE8\u610F\u9700\u8981\u4FEE\u6539metadata.name"),n(",\u4FEE\u6539\u5B8C\u6BD5\u540E\u76F4\u63A5\u521B\u5EFA\u5373\u53EF")],-1),G8=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@k8s-master1 ~]# kubectl create -f mcmd-config-v2.yaml ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"configmap/mcmd-config-v2 created")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@k8s-master1 ~]# kubectl get configmap")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"NAME             DATA   AGE")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"cmd-config       1      24m")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"mcmd-config      3      16m")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"mcmd-config-v2   3      9s")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),H8=s("h3",{id:"\u901A\u8FC7\u6587\u4EF6\u521B\u5EFAconfigmap",tabindex:"-1"},[n("\u901A\u8FC7\u6587\u4EF6\u521B\u5EFAConfigMap "),s("a",{class:"header-anchor",href:"#\u901A\u8FC7\u6587\u4EF6\u521B\u5EFAconfigmap","aria-hidden":"true"},"#")],-1),F8=s("p",null,"ConfigMap\u9664\u4E86\u53EF\u4EE5\u5B58\u50A8\u5355\u4E2A\u6216\u8005\u591A\u4E2A\u952E\u503C\u5BF9\u4E4B\u5916\uFF0C\u53EF\u4EE5\u5B58\u50A8\u5B8C\u6574\u7684\u914D\u7F6E\u6587\u4EF6\uFF0C\u5C06\u5355\u4E2A\u914D\u7F6E\u6587\u4EF6\u76F4\u63A5\u8F6C\u6362\u4E3AConfigMap\u5728\u751F\u4EA7\u4E2D\u5341\u5206\u5E38\u7528",-1),V8=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@k8s-master1 ~]# kubectl create configmap file-config --from-file=/etc/hosts")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"configmap/file-config created")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),B8=s("p",null,"\u53EF\u4EE5\u770B\u5230ConfigMap\u76F4\u63A5\u5B58\u50A8\u4E86\u6587\u4EF6\u7684\u5185\u5BB9\uFF0CKey\u540D\u79F0\u4E3A\u6587\u4EF6\u540Dhosts\uFF0C\u4E5F\u53EF\u4EE5\u624B\u52A8\u6307\u5B9AKey\u7684\u540D\u79F0\u3002",-1),q8=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@k8s-master1 ~]# kubectl describe configmap file-config")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Name:         file-config")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Namespace:    default")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Labels:       <none>")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Annotations:  <none>")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Data")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"====")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"hosts:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"----")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"::1         localhost localhost.localdomain localhost6 localhost6.localdomain6")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"192.168.99.27 k8s-master1 k8s-master1.dianjoy.com ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"192.168.99.28 k8s-master2 k8s-master2.dianjoy.com")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"192.168.99.29 k8s-master3 k8s-master3.dianjoy.com")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Events:  <none>")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Y8=s("p",null,"\u5C06Key\u624B\u52A8\u6307\u5B9A\u4E3Ahost-hosts",-1),z8=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@k8s-master1 ~]# kubectl create configmap file-config-v2 --from-file=host-hosts=/etc/hosts")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"configmap/file-config-v2 created")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@k8s-master1 ~]# kubectl describe configmap file-config-v2")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Name:         file-config-v2")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Namespace:    default")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Labels:       <none>")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Annotations:  <none>")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Data")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"====")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"host-hosts:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"----")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"::1         localhost localhost.localdomain localhost6 localhost6.localdomain6")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"192.168.99.27 k8s-master1 k8s-master1.dianjoy.com ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"192.168.99.28 k8s-master2 k8s-master2.dianjoy.com")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"192.168.99.29 k8s-master3 k8s-master3.dianjoy.com")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Events:  <none>")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),$8=s("h3",{id:"\u4ECE\u76EE\u5F55\u521B\u5EFAconfigmap",tabindex:"-1"},[n("\u4ECE\u76EE\u5F55\u521B\u5EFAConfigMap "),s("a",{class:"header-anchor",href:"#\u4ECE\u76EE\u5F55\u521B\u5EFAconfigmap","aria-hidden":"true"},"#")],-1),X8=s("p",null,"ConfigMap\u8FD8\u652F\u6301\u901A\u8FC7\u76EE\u5F55\u521B\u5EFA\uFF0Ckubectl\u4F1A\u4E3A\u76EE\u5F55\u4E2D\u7684\u6BCF\u4E2A\u6587\u4EF6\u5355\u72EC\u521B\u5EFA\u6761\u76EE\uFF0C\u9700\u8981\u6CE8\u610F\u7684\u662F\u5982\u679C\u76EE\u5F55\u4E0B\u9762\u5305\u542B\u5B50\u76EE\u5F55\uFF0C\u4F1A\u5FFD\u7565\u8FD9\u4E9B\u5B50\u76EE\u5F55\u548C\u5B50\u76EE\u5F55\u91CC\u9762\u7684\u5185\u5BB9\u3002",-1),J8=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@k8s-master1 ~]# kubectl create configmap dir-config --from-file=/etc/kubernetes")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"configmap/dir-config created")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),W8=s("h3",{id:"\u6DF7\u5408\u9009\u9879\u521B\u5EFAconfigmap",tabindex:"-1"},[n("\u6DF7\u5408\u9009\u9879\u521B\u5EFAConfigMap "),s("a",{class:"header-anchor",href:"#\u6DF7\u5408\u9009\u9879\u521B\u5EFAconfigmap","aria-hidden":"true"},"#")],-1),Q8=s("p",null,"\u540C\u65F6\u4F7F\u7528\u547D\u4EE4\u884C\u3001\u6587\u4EF6\u3001\u76EE\u5F55\u521B\u5EFAConfigMap\u4E5F\u662F\u652F\u6301\u7684\uFF0C\u53EA\u9700\u8981\u4F7F\u7528\u4E0D\u540C\u7684\u9009\u9879\u5373\u53EF\u3002",-1),Z8=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@k8s-master1 ~]# kubectl create configmap mycp --from-literal=env=test \\")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}}," --from-file=/etc/hosts \\")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}}," --from-file=myhosts=/etc/hosts \\")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}}," --from-file=/etc/kubernetes")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"configmap/mycp created")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),s4=s("p",null,"ConfigMap\u7684\u5185\u5BB9\u53EF\u4EE5\u901A\u8FC7\u73AF\u5883\u53D8\u91CF\u7684\u5F62\u6210\u4F20\u9012\u7ED9\u5BB9\u5668\uFF0C\u4E5F\u53EF\u901A\u8FC7\u548CVolume\u7684\u5F62\u5F0F\u6302\u8F7D\u5230\u5BB9\u5668\u4E2D\u3002",-1),n4=s("h3",{id:"\u901A\u8FC7\u73AF\u5883\u53D8\u91CF\u7ED9\u5BB9\u5668\u4F20\u9012configmap",tabindex:"-1"},[n("\u901A\u8FC7\u73AF\u5883\u53D8\u91CF\u7ED9\u5BB9\u5668\u4F20\u9012ConfigMap "),s("a",{class:"header-anchor",href:"#\u901A\u8FC7\u73AF\u5883\u53D8\u91CF\u7ED9\u5BB9\u5668\u4F20\u9012configmap","aria-hidden":"true"},"#")],-1),l4=s("p",null,"\u53EF\u4EE5\u5C06ConfigMap\u4E2D\u7684\u952E\u503C\u5BF9\u6570\u636E\u901A\u8FC7\u73AF\u5883\u53D8\u91CF\u7684\u5F62\u5F0F\u4F20\u9012\u5230\u5BB9\u5668\u4E2D\uFF0C\u8FD9\u6837\u5728\u914D\u7F6E\u5BB9\u5668\u7684\u65F6\u5019\u6709\u4E00\u4E9B\u6570\u636E\u53EF\u4EE5\u4F7F\u7528\u73AF\u5883\u53D8\u91CF\uFF0C\u7136\u540E\u4F7F\u7528ConfigMap\u8FDB\u884C\u586B\u5145\uFF0C\u8FD9\u6837\u5C31\u53EF\u4EE5\u5B9E\u73B0\u914D\u7F6E\u548CPod\u7684\u5206\u79BB\u3002",-1),e4=s("h2",{id:"_15-2-\u4F7F\u7528secret\u7BA1\u7406\u654F\u611F\u6570\u636E",tabindex:"-1"},[n("15.2 \u4F7F\u7528Secret\u7BA1\u7406\u654F\u611F\u6570\u636E "),s("a",{class:"header-anchor",href:"#_15-2-\u4F7F\u7528secret\u7BA1\u7406\u654F\u611F\u6570\u636E","aria-hidden":"true"},"#")],-1),o4=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u5728\u5E94\u7528\u542F\u52A8\u8FC7\u7A0B\u4E2D\u7ECF\u5E38\u4F1A\u6709\u4E00\u4E9B\u654F\u611F\u4FE1\u606F\u9700\u8981\u5B58\u50A8\uFF0C\u4F8B\u5982\u7528\u6237\u540D\u548C\u5BC6\u7801\u7B49\uFF0C\u5982\u679C\u76F4\u63A5\u660E\u6587\u7684\u65B9\u5F0F\u4FDD\u5B58\u4F1A\u6709\u5B89\u5168\u98CE\u9669\u3002\u5728Kubernetes\u4E2DSecret\u8FD9\u4E2A\u8D44\u6E90\u5BF9\u8C61\u7C7B\u578B\u7528\u6765\u4FDD\u5B58\u654F\u611F\u4FE1\u606F\uFF0C\u4F8B\u5982\u5BC6\u7801\u3001\u5BC6\u94A5\u3001\u8BBF\u95EE\u4EE4\u724C\u3001SSH Key\u7B49\u4F60\u8BA4\u4E3A\u9700\u8981\u4FDD\u5BC6\u7684\u654F\u611F\u4FE1\u606F\u3002\u76F8\u5BF9\u4E8E\u5C06\u8FD9\u4E9B\u5185\u5BB9\u4FDD\u5B58\u5230\u5BB9\u5668\u955C\u50CF\u6216\u8005Pod\u7684\u5B9A\u4E49\u6587\u4EF6\u4E2D\uFF0C\u66F4\u52A0\u7684\u7075\u6D3B\u548C\u5B89\u5168\u3002")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),a4=s("h3",{id:"\u914D\u7F6Epod\u4F7F\u7528harbor\u955C\u50CF",tabindex:"-1"},[n("\u914D\u7F6EPod\u4F7F\u7528Harbor\u955C\u50CF "),s("a",{class:"header-anchor",href:"#\u914D\u7F6Epod\u4F7F\u7528harbor\u955C\u50CF","aria-hidden":"true"},"#")],-1),t4=s("p",null,"1\uFF0Edocker login\u5F97\u5230 docker\u5BC6\u7801\u6587\u4EF6",-1),c4=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# docker login 192.168.56.11")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),i4=s("p",null,"2.\u5BF9\u5BC6\u7801\u6587\u4EF6\u8FDB\u884C\u52A0\u5BC6",-1),r4=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# cat /root/.docker/config.json |base64")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),p4=s("p",null,"3.\u521B\u5EFAharbor\u4F7F\u7528\u7684Secret YAML\u6587\u4EF6\uFF1A",-1),d4=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# vim harbor-secret.yaml ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"apiVersion: v1")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"kind: Secret")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"metadata:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  name: harbor-secret")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  namespace: default")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"data:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  .dockerconfigjson: 'ewoJImF1dGhzIjogewoJCSJyZWcuZ3JlYXRvcHMubmV0IjogewoJCQkiYXV0aCI6ICJZV1J0YVc0Nk1YRmhlbmh6ZHpJPSIKCQl9Cgl9Cn0='")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"type: kubernetes.io/dockerconfigjson")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),A4=s("p",null,"4.\u521B\u5EFASecret",-1),C4=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@jenkins k8s-deploy]# kubectl create -f reg-harbor.yaml ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'secret "reg-harbor" created')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),u4=s("p",null,"5.\u521B\u5EFApod\u5E76\u6302\u8F7D\u8D44\u6E90",-1),y4=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"apiVersion: v1")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"kind: Pod")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"metadata:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  name: sectest")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"spec:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  containers:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  - name: sectest")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    image: 123.207.154.16/base/redis:alpine")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    ports:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    - containerPort: 6379")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  imagePullSecrets:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    - name: harbor-secret")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),h4=s("h1",{id:"\u4F7F\u7528helm\u7BA1\u7406kubernetes\u5E94\u7528",tabindex:"-1"},[n("\u4F7F\u7528Helm\u7BA1\u7406Kubernetes\u5E94\u7528 "),s("a",{class:"header-anchor",href:"#\u4F7F\u7528helm\u7BA1\u7406kubernetes\u5E94\u7528","aria-hidden":"true"},"#")],-1),_4=s("p",null,"\u901A\u8FC7\u524D\u9762\u7684\u5B66\u4E60\uFF0C\u638C\u63E1\u4E86\u5C06\u5E94\u7528\u8FC1\u79FB\u81F3Kubernetes\u7684\u6B65\u9AA4\u548C\u6280\u5DE7\uFF0C\u8FC7\u7A0B\u6BD4\u8F83\u8270\u8F9B\u3002\u4F8B\u5982\u6211\u4EEC\u521B\u5EFA\u4E00\u4E2A\u5E94\u7528\uFF0C\u6D89\u53CA\u5230Deployment\u3001Service\u3001Ingress\u3001PV\u3001PVC\uFF0C\u5982\u4F55\u6709\u6548\u7684\u7BA1\u7406\u8FD9\u4E9B\u8D44\u6E90\u5462\uFF0CKubernetes\u7ED9\u51FA\u4E86\u4E00\u4E2A\u6700\u4F73\u5B9E\u8DF5\u5C31\u662FHelm\u3002 Helm\u662F\u4E00\u4E2Akubernetes\u5E94\u7528\u7684\u5305\u7BA1\u7406\u5DE5\u5177\uFF0C\u7528\u6765\u7BA1\u7406charts\u2014\u2014\u9884\u5148\u914D\u7F6E\u597D\u7684\u5B89\u88C5\u5305\u8D44\u6E90\uFF0C\u6709\u70B9\u7C7B\u4F3C\u4E8EUbuntu\u7684APT\u548CCentOS\u4E2D\u7684yum\u3002 Helm chart\u662F\u7528\u6765\u5C01\u88C5kubernetes\u539F\u751F\u5E94\u7528\u7A0B\u5E8F\u7684yaml\u6587\u4EF6\uFF0C\u53EF\u4EE5\u5728\u4F60\u90E8\u7F72\u5E94\u7528\u7684\u65F6\u5019\u81EA\u5B9A\u4E49\u5E94\u7528\u7A0B\u5E8F\u7684\u4E00\u4E9Bmetadata\uFF0C\u4FBF\u4E0E\u5E94\u7528\u7A0B\u5E8F\u7684\u5206\u53D1\u3002",-1),D4=s("p",null,"Helm\u548Ccharts\u7684\u4E3B\u8981\u4F5C\u7528\uFF1A",-1),g4=s("ul",null,[s("li",null,"\u5E94\u7528\u7A0B\u5E8F\u5C01\u88C5"),s("li",null,"\u7248\u672C\u7BA1\u7406"),s("li",null,"\u4F9D\u8D56\u68C0\u67E5"),s("li",null,"\u4FBF\u4E8E\u5E94\u7528\u7A0B\u5E8F\u5206\u53D1")],-1),m4=s("h2",{id:"helm\u90E8\u7F72",tabindex:"-1"},[n("Helm\u90E8\u7F72 "),s("a",{class:"header-anchor",href:"#helm\u90E8\u7F72","aria-hidden":"true"},"#")],-1),b4=s("h3",{id:"\u5B89\u88C5helm",tabindex:"-1"},[n("\u5B89\u88C5Helm "),s("a",{class:"header-anchor",href:"#\u5B89\u88C5helm","aria-hidden":"true"},"#")],-1),k4=s("p",null,"1.\u90E8\u7F72Helm\u5BA2\u6237\u7AEF",-1),v4=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# cd /usr/local/src")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 src]# wget https://get.helm.sh/helm-v3.0.2-linux-amd64.tar.gz")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 src]# tar zxf helm-v3.0.2-linux-amd64.tar.gz")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 src]# mv linux-amd64/helm /usr/local/bin/")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),x4=s("p",null,"2.\u9A8C\u8BC1\u5B89\u88C5\u662F\u5426\u6210\u529F",-1),f4=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# helm version")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'version.BuildInfo{Version:"v3.0.2", GitCommit:"19e47ee3283ae98139d98460de796c1be1e3975f", GitTreeState:"clean", GoVersion:"go1.13.5"}')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),S4=s("h3",{id:"\u4F7F\u7528helm\u90E8\u7F72\u7B2C\u4E00\u4E2A\u5E94\u7528",tabindex:"-1"},[n("\u4F7F\u7528Helm\u90E8\u7F72\u7B2C\u4E00\u4E2A\u5E94\u7528 "),s("a",{class:"header-anchor",href:"#\u4F7F\u7528helm\u90E8\u7F72\u7B2C\u4E00\u4E2A\u5E94\u7528","aria-hidden":"true"},"#")],-1),E4=s("p",null,"4.\u641C\u7D22Helm\u5E94\u7528",-1),P4=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# helm search jenkins")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"NAME              CHART VERSION    APP VERSION    DESCRIPTION                                       ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"stable/jenkins    0.13.5           2.73           Open source continuous integration server. It s...")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),N4=s("p",null,"5.\u67E5\u770B\u4ED3\u5E93",-1),R4=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# helm repo list")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"NAME      URL                                                   ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"stable    https://kubernetes.oss-cn-hangzhou.aliyuncs.com/charts")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"local     http://127.0.0.1:8879/charts")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),T4=s("p",null,"6.\u5B89\u88C5\u7B2C\u4E00\u4E2A\u5E94\u7528",-1),I4=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# helm install stable/jenkins")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"NAME:   viable-seal")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"LAST DEPLOYED: Thu Jul 26 19:21:07 2018")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"NAMESPACE: default")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"STATUS: DEPLOYED")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"RESOURCES:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"==> v1/ConfigMap")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"NAME                       DATA  AGE")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"viable-seal-jenkins        3     1s")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"viable-seal-jenkins-tests  1     1s")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"==> v1/PersistentVolumeClaim")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"NAME                 STATUS   VOLUME  CAPACITY  ACCESS MODES  STORAGECLASS  AGE")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"viable-seal-jenkins  Pending  1s")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"==> v1/Service")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"NAME                       TYPE          CLUSTER-IP   EXTERNAL-IP  PORT(S)         AGE")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"viable-seal-jenkins-agent  ClusterIP     10.1.154.54  <none>       50000/TCP       1s")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"viable-seal-jenkins        LoadBalancer  10.1.63.24   <pending>    8080:20031/TCP  0s")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"==> v1beta1/Deployment")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"NAME                 DESIRED  CURRENT  UP-TO-DATE  AVAILABLE  AGE")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"viable-seal-jenkins  1        1        1           0          0s")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"==> v1/Pod(related)")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"NAME                                  READY  STATUS   RESTARTS  AGE")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"viable-seal-jenkins-7f5c7bd8d4-gc5hv  0/1    Pending  0         0s")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"==> v1/Secret")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"NAME                 TYPE    DATA  AGE")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"viable-seal-jenkins  Opaque  2     1s")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"NOTES:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"1. Get your 'admin' user password by running:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'  printf $(kubectl get secret --namespace default viable-seal-jenkins -o jsonpath="{.data.jenkins-admin-password}" | base64 --decode);echo')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"2. Get the Jenkins URL to visit by running these commands in the same shell:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  NOTE: It may take a few minutes for the LoadBalancer IP to be available.")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        You can watch the status of by running 'kubectl get svc --namespace default -w viable-seal-jenkins'")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'  export SERVICE_IP=$(kubectl get svc --namespace default viable-seal-jenkins --template "{{ range (index .status.loadBalancer.ingress 0) }}{{ . }}{{ end }}")')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  echo http://$SERVICE_IP:8080/login")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"3. Login with the password from step 1 and the username: admin")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"For more information on running Jenkins on Kubernetes, visit:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"https://cloud.google.com/solutions/jenkins-on-container-engine")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),O4=s("h1",{id:"_15-2-\u6DF1\u5165\u7406\u89E3helm",tabindex:"-1"},[n("15.2 \u6DF1\u5165\u7406\u89E3Helm "),s("a",{class:"header-anchor",href:"#_15-2-\u6DF1\u5165\u7406\u89E3helm","aria-hidden":"true"},"#")],-1),M4=s("h3",{id:"helm\u7EC4\u4EF6",tabindex:"-1"},[n("Helm\u7EC4\u4EF6 "),s("a",{class:"header-anchor",href:"#helm\u7EC4\u4EF6","aria-hidden":"true"},"#")],-1),w4=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# tree ~/.helm/")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"/root/.helm/")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u251C\u2500\u2500 cache")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u2502   \u2514\u2500\u2500 archive")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u2502       \u2514\u2500\u2500 jenkins-0.13.5.tgz")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u251C\u2500\u2500 plugins")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u251C\u2500\u2500 repository")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u2502   \u251C\u2500\u2500 cache")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u2502   \u2502   \u251C\u2500\u2500 local-index.yaml -> /root/.helm/repository/local/index.yaml")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u2502   \u2502   \u2514\u2500\u2500 stable-index.yaml")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u2502   \u251C\u2500\u2500 local")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u2502   \u2502   \u2514\u2500\u2500 index.yaml")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u2502   \u2514\u2500\u2500 repositories.yaml")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u2514\u2500\u2500 starters")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"7 directories, 5 files")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),K4=s("p",null,"\u9ED8\u8BA4\u7F13\u5B58\u7684\u6587\u4EF6",-1),L4=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# cd .helm/cache/archive/")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 archive]# ls -l")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"total 16")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"-rw-r--r-- 1 root root 12650 Jul 26 19:21 jenkins-0.13.5.tgz")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 archive]# tar zxf jenkins-0.13.5.tgz")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 archive]# mv jenkins ~/.helm/repository/local/")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# cd ~/.helm/repository/local/jenkins/")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 jenkins]# tree")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},".")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u251C\u2500\u2500 Chart.yaml")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u251C\u2500\u2500 OWNERS")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u251C\u2500\u2500 README.md")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u251C\u2500\u2500 templates")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u2502   \u251C\u2500\u2500 config.yaml")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u2502   \u251C\u2500\u2500 _helpers.tpl")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u2502   \u251C\u2500\u2500 home-pvc.yaml")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u2502   \u251C\u2500\u2500 jenkins-agent-svc.yaml")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u2502   \u251C\u2500\u2500 jenkins-master-deployment.yaml")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u2502   \u251C\u2500\u2500 jenkins-master-ingress.yaml")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u2502   \u251C\u2500\u2500 jenkins-master-networkpolicy.yaml")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u2502   \u251C\u2500\u2500 jenkins-master-svc.yaml")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u2502   \u251C\u2500\u2500 jenkins-test.yaml")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u2502   \u251C\u2500\u2500 jobs.yaml")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u2502   \u251C\u2500\u2500 NOTES.txt")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u2502   \u251C\u2500\u2500 rbac.yaml")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u2502   \u251C\u2500\u2500 secret.yaml")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u2502   \u251C\u2500\u2500 service-account.yaml")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u2502   \u2514\u2500\u2500 test-config.yaml")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u2514\u2500\u2500 values.yaml")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"1 directory, 19 files")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),U4=s("h3",{id:"\u81EA\u5B9A\u4E49jenkins\u7684chart",tabindex:"-1"},[n("\u81EA\u5B9A\u4E49Jenkins\u7684Chart "),s("a",{class:"header-anchor",href:"#\u81EA\u5B9A\u4E49jenkins\u7684chart","aria-hidden":"true"},"#")],-1),j4=s("p",null,"\u4FEE\u6539\u4E3ANodePort",-1),G4=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 jenkins]# vim values.yaml")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"ServiceType: NodePort")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),H4=s("p",null,"\u68C0\u67E5",-1),F4=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# helm lint ~/.helm/repository/local/jenkins/")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"==> Linting /root/.helm/repository/local/jenkins/")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Lint OK")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"1 chart(s) linted, no failures")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),V4=s("p",null,"\u67E5\u770B\u6709\u54EA\u4E9B\u5E94\u7528",-1),B4=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# helm list")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"NAME           REVISION    UPDATED                     STATUS      CHART          NAMESPACE")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"viable-seal    1           Thu Jul 26 19:21:07 2018    DEPLOYED    jenkins-0.13.5 default")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# helm delete --purge viable-seal")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'release "viable-seal" deleted')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# helm install ~/.helm/repository/local/jenkins/ --name devops-jenkins ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"NAME:   devops-jenkins")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"LAST DEPLOYED: Thu Jul 26 19:36:10 2018")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"NAMESPACE: default")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"STATUS: DEPLOYED")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"RESOURCES:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"==> v1/Secret")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"NAME            TYPE    DATA  AGE")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"devops-jenkins  Opaque  2     0s")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"==> v1/ConfigMap")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"NAME                  DATA  AGE")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"devops-jenkins        3     0s")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"devops-jenkins-tests  1     0s")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"==> v1/PersistentVolumeClaim")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"NAME            STATUS   VOLUME  CAPACITY  ACCESS MODES  STORAGECLASS  AGE")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"devops-jenkins  Pending  0s")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"==> v1/Service")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"NAME                  TYPE       CLUSTER-IP   EXTERNAL-IP  PORT(S)         AGE")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"devops-jenkins-agent  ClusterIP  10.1.74.175  <none>       50000/TCP       0s")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"devops-jenkins        NodePort   10.1.3.112   <none>       8080:23558/TCP  0s")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"==> v1beta1/Deployment")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"NAME            DESIRED  CURRENT  UP-TO-DATE  AVAILABLE  AGE")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"devops-jenkins  1        1        1           0          0s")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"==> v1/Pod(related)")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"NAME                            READY  STATUS   RESTARTS  AGE")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"devops-jenkins-64d54b79c-pwjfb  0/1    Pending  0         0s")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"NOTES:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"1. Get your 'admin' user password by running:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'  printf $(kubectl get secret --namespace default devops-jenkins -o jsonpath="{.data.jenkins-admin-password}" | base64 --decode);echo')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"2. Get the Jenkins URL to visit by running these commands in the same shell:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'  export NODE_PORT=$(kubectl get --namespace default -o jsonpath="{.spec.ports[0].nodePort}" services devops-jenkins)')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'  export NODE_IP=$(kubectl get nodes --namespace default -o jsonpath="{.items[0].status.addresses[0].address}")')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  echo http://$NODE_IP:$NODE_PORT/login")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"3. Login with the password from step 1 and the username: admin")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"For more information on running Jenkins on Kubernetes, visit:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"https://cloud.google.com/solutions/jenkins-on-container-engine")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),q4=s("p",null,"\u67E5\u770B\u72B6\u6001",-1),Y4=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# helm status devops-jenkins")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),z4=s("h2",{id:"\u521B\u5EFA\u81EA\u5DF1\u7684chart",tabindex:"-1"},[n("\u521B\u5EFA\u81EA\u5DF1\u7684Chart "),s("a",{class:"header-anchor",href:"#\u521B\u5EFA\u81EA\u5DF1\u7684chart","aria-hidden":"true"},"#")],-1),$4=s("h3",{id:"\u521B\u5EFA\u81EA\u5B9A\u4E49nginx\u7684chart",tabindex:"-1"},[n("\u521B\u5EFA\u81EA\u5B9A\u4E49Nginx\u7684Chart "),s("a",{class:"header-anchor",href:"#\u521B\u5EFA\u81EA\u5B9A\u4E49nginx\u7684chart","aria-hidden":"true"},"#")],-1),X4=s("p",null,"1.\u521B\u5EFA\u81EA\u5B9A\u4E49Chart Nginx\u7684\u7ED3\u6784",-1),J4=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# helm create helm-nginx")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Creating helm-nginx")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}}," [root@linux-node1 ~]# tree helm-nginx/")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"opencmdb/")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u251C\u2500\u2500 charts       #\u4F9D\u8D56\u7684chart")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u251C\u2500\u2500 Chart.yaml   #\u672Cchart\u7684\u4FE1\u606F")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u251C\u2500\u2500 templates    #\u6A21\u677F\u76EE\u5F55")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u2502   \u251C\u2500\u2500 deployment.yaml")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u2502   \u251C\u2500\u2500 _helpers.tpl")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u2502   \u251C\u2500\u2500 ingress.yaml")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u2502   \u251C\u2500\u2500 NOTES.txt")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u2502   \u2514\u2500\u2500 service.yaml")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u2514\u2500\u2500 values.yaml   #\u6A21\u677F\u8D4B\u503C")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),W4=s("p",null,"2.\u7F16\u8F91Chart\u914D\u7F6E",-1),Q4=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# cd helm-nginx/")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 helm-nginx]# vim values.yaml")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Z4=s("p",null,"3.\u9A8C\u8BC1Chart\u914D\u7F6E\uFF0C\u6700\u540E\u9762\u7684\u70B9\u8868\u793A\u5F53\u524D\u76EE\u5F55",-1),s5=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 helm-nginx]# helm install --dry-run --debug --name helm-nginx .")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),n5=s("p",null,"4.\u5B89\u88C5\u81EA\u5B9A\u4E49Chart\uFF0C\u6700\u540E\u9762\u7684\u70B9\u8868\u793A\u5F53\u524D\u76EE\u5F55",-1),l5=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 helm-nginx]# helm install --name helm-nginx .")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),e5=s("h3",{id:"\u67E5\u770Bhelm\u5B9E\u4F8B",tabindex:"-1"},[n("\u67E5\u770BHelm\u5B9E\u4F8B "),s("a",{class:"header-anchor",href:"#\u67E5\u770Bhelm\u5B9E\u4F8B","aria-hidden":"true"},"#")],-1),o5=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# helm list")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"NAME          REVISION    UPDATED                     STATUS      CHART                 NAMESPACE")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"helm-nginx    1           Sun Sep 16 19:32:19 2018    DEPLOYED    helm-nginx-0.1.0      default  ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# kubectl get pod")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"NAME                          READY     STATUS    RESTARTS   AGE")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"helm-nginx-6975f8dbcd-htvtd   1/1       Running   0          51s")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# kubectl get ingress")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"NAME         HOSTS                ADDRESS   PORTS     AGE")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"helm-nginx   www.helm-nginx.com             80        1m")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),a5=s("h1",{id:"_17-\u5E94\u7528\u7684\u65E5\u5FD7\u91C7\u96C6\u4E0E\u5206\u6790",tabindex:"-1"},[n("17 \u5E94\u7528\u7684\u65E5\u5FD7\u91C7\u96C6\u4E0E\u5206\u6790 "),s("a",{class:"header-anchor",href:"#_17-\u5E94\u7528\u7684\u65E5\u5FD7\u91C7\u96C6\u4E0E\u5206\u6790","aria-hidden":"true"},"#")],-1),t5=s("h2",{id:"prometheus\u5FEB\u901F\u5165\u95E8",tabindex:"-1"},[n("Prometheus\u5FEB\u901F\u5165\u95E8 "),s("a",{class:"header-anchor",href:"#prometheus\u5FEB\u901F\u5165\u95E8","aria-hidden":"true"},"#")],-1),c5=s("h3",{id:"prometheus\u67B6\u6784\u4ECB\u7ECD",tabindex:"-1"},[n("Prometheus\u67B6\u6784\u4ECB\u7ECD "),s("a",{class:"header-anchor",href:"#prometheus\u67B6\u6784\u4ECB\u7ECD","aria-hidden":"true"},"#")],-1),i5=s("p",null,"\u5728\u5B66\u4E60Prometheus\u4E4B\u524D\u6211\u4EEC\u9700\u8981\u6E05\u6670\u7684\u638C\u63E1\u5176\u67B6\u6784\uFF0CPrometheus\u662F\u7531\u591A\u4E2A\u7EC4\u4EF6\u7EC4\u6210\u7684\u7684\u76D1\u63A7\u7CFB\u7EDF\uFF0C\u4E3B\u8981\u6709\uFF1APrometheus Server\u3001Alertmanager\u3001Pushgateway\u7EC4\u6210\uFF0C\u8FD9\u4E09\u4E2A\u7EC4\u4EF6\u5747\u4E3A\u72EC\u7ACB\u7684\u5E94\u7528\u670D\u52A1\uFF0C\u72EC\u7ACB\u90E8\u7F72\u548C\u8FD0\u884C\uFF0C\u5176\u4E2DPrometheus Server\u4E2D\u5185\u7F6E\u4E86Prometheus web UI\u3002",-1),r5=s("p",null,[s("img",{src:"http://k8s.unixhot.com/kubernetes/media/2ada1ece66fcc81d704c2ba46f9dd7d3.png",alt:"architecture"})],-1),p5=s("p",null,[s("strong",null,"Prometheus Server\uFF1A")],-1),d5=s("p",null,"Promethedus Server\u662F\u6838\u5FC3\u7EC4\u4EF6\uFF0C\u8D1F\u8D23\u6570\u636E\u7684\u83B7\u53D6\u3001\u5B58\u50A8\u3001\u67E5\u8BE2\u3002Prometheus\u901A\u8FC7Pull\u7684\u65B9\u5F0F\u5B9A\u671F\u7684\u4ECEJobs/Exporters\u4E2D\u83B7\u53D6\u6570\u636E\uFF0C\u5E76\u4FDD\u5B58\u5728\u5185\u7F6E\u7684TSDB\u4E2D\uFF1B\u5185\u7F6E\u7684Prometheus web UI\u53EF\u4EE5\u8BA9\u7528\u6237\u901A\u8FC7PromQL\u7684\u65B9\u5F0F\u8FDB\u884C\u6570\u636E\u7684\u68C0\u7D22\u3002",-1),A5=s("p",null,[s("strong",null,"Exporters\uFF1A")],-1),C5=s("p",null,"Exporters\u4E5F\u662F\u4E00\u4E2A\u72EC\u7ACB\u7684\u7EC4\u4EF6\uFF0C\u6709\u5B98\u65B9\u63D0\u4F9B\u7684Exporters\u4E5F\u6709\u793E\u533A\u8D21\u732E\u7684Exportes\uFF0C\u5B83\u5C06\u76D1\u63A7\u91C7\u96C6\u7684\u6570\u636E\u901A\u8FC7HTTP\u7684\u65B9\u5F0F\u66B4\u9732\u7ED9Prometheus Server\uFF0CServer\u5B9A\u671F\u83B7\u53D6\u6570\u636E\u3002\u4F8B\u5982\u6709\u4E00\u4E2AExporters\u53EB\u505ANode Exporter\uFF0C\u5B83\u5B89\u88C5\u5728\u53D7\u91C7\u96C6\u7684\u4E3B\u673A\u4E0A\uFF0C\u4E3AServer\u63D0\u4F9B\u6570\u636E\uFF0C\u6709\u70B9\u7C7B\u4F3C\u4E8EZabbix\u76D1\u63A7\u7CFB\u7EDF\u4E2D\u7684Zabbix Agent\u3002",-1),u5=s("p",null,[s("strong",null,"Prometheus web UI\uFF1A")],-1),y5=s("p",null,"Prometheus web UI\u662FServer\u542F\u52A8\u540E\u5185\u7F6E\u7684\u4E00\u4E2AWeb\u754C\u9762\uFF0C\u901A\u8FC7\u8BE5Web\u754C\u9762\u6211\u4EEC\u53EF\u4EE5\u8FDB\u884C\u6570\u636E\u67E5\u8BE2\u5DE5\u4F5C\uFF0C\u4E0D\u5305\u542B\u8BBE\u7F6E\u7684\u76F8\u5173\u529F\u80FD\u3002",-1),h5=s("p",null,[s("img",{src:"http://k8s.unixhot.com/kubernetes/media/cc11e0cf02ff729fb905ac3648af18f7.png",alt:"img"})],-1),_5=s("p",null,[s("strong",null,"PromQL\uFF1A")],-1),D5=s("p",null,"PromQL\u662FPrometheus\u5185\u7F6E\u7684\u81EA\u5B9A\u4E49\u7684\u67E5\u8BE2\u8BED\u8A00\uFF0C\u63D0\u4F9B\u5BF9Prometheus Server\u4E2D\u7684TSDB\u8FD9\u4E2A\u65F6\u95F4\u5E8F\u5217\u6570\u636E\u5E93\u8FDB\u884C\u6570\u636E\u67E5\u8BE2\uFF0C\u652F\u6301\u6570\u636E\u805A\u5408\u548C\u4E00\u4E9B\u903B\u8F91\u8FD0\u7B97\uFF0C\u662F\u4E00\u4E2A\u76F8\u5BF9\u7B80\u5355\u7684\u67E5\u8BE2\u8BED\u8A00\uFF0C\u800C\u4E14PromQL\u4E5F\u63D0\u4F9B\u4E86\u4E00\u4E9B\u5185\u7F6E\u51FD\u6570\uFF0C\u5E2E\u52A9\u6211\u4EEC\u8FDB\u884C\u6570\u636E\u5904\u7406\u3002",-1),g5=s("p",null,[s("strong",null,"Alertmanager\uFF1A")],-1),m5=s("p",null,"Alertmanager\u662FPromethedus\u7684\u544A\u8B66\u7BA1\u7406\u7EC4\u4EF6\uFF0C\u5B83\u652F\u6301\u57FA\u4E8EPromQL\u6765\u521B\u5EFA\u544A\u8B66\u89C4\u5219\uFF0C\u7C7B\u4F3C\u4E8EZabbix\u4E2D\u7684\u544A\u8B66\u8868\u8FBE\u5F0F\uFF0C\u5BF9\u83B7\u53D6\u5230\u7684\u6570\u636E\u8FDB\u884C\u8BA1\u7B97\u548C\u6BD4\u8F83\uFF0C\u5982\u679C\u6EE1\u8DB3PromQL\u5B9A\u4E49\u7684\u89C4\u5219\u6761\u4EF6\uFF0C\u5C31\u4F1A\u4EA7\u751F\u62A5\u8B66\u3002",-1),b5=s("p",null,[s("strong",null,"Pushgateway\uFF1A")],-1),k5=s("p",null,"Pushgateway\u53EF\u4EE5\u7406\u89E3\u4E3A\u6570\u636E\u7684\u4E00\u4E2A\u4E2D\u8F6C\u7AD9\uFF0C\u4F8B\u5982\u5F53Prometheus Server\u4E0D\u80FD\u76F4\u63A5\u548CExporters\u8FDB\u884C\u901A\u4FE1\u7684\u573A\u666F\u4E0B\u3002",-1),v5=s("h3",{id:"\u5B89\u88C5prometheus",tabindex:"-1"},[n("\u5B89\u88C5Prometheus "),s("a",{class:"header-anchor",href:"#\u5B89\u88C5prometheus","aria-hidden":"true"},"#")],-1),x5=s("p",null,"\u5B66\u4E60Prometheus\u7684\u7B2C\u4E00\u6B65\u5C31\u662F\u5148\u90E8\u7F72\u4E00\u4E2A\u5B9E\u9A8C\u73AF\u5883\uFF0C\u5B98\u65B9\u63D0\u4F9B\u4E86\u591A\u79CD\u65B9\u5F0F\u8FDB\u884CPrometheus\u5B89\u88C5\uFF1A",-1),f5=s("ul",null,[s("li",null,"\u6E90\u7801\u7F16\u8BD1\u5B89\u88C5"),s("li",null,"\u4E0B\u8F7D\u9884\u7F16\u8BD1\u597D\u7684\u4E8C\u8FDB\u5236\u6587\u4EF6"),s("li",null,"\u4F7F\u7528Docker\u90E8\u7F72"),s("li",null,"\u4F7F\u7528\u7B2C\u4E09\u65B9\u5DE5\u5177\uFF1AAnsible\u3001SaltStack\u3001Puppet\u3001Chef\u3002")],-1),S5=s("p",null,[n("\u4E3A\u4E86\u65B9\u4FBF\u5B66\u4E60\uFF0C\u9996\u5148\u6211\u4EEC\u4F7F\u7528\u4E8C\u8FDB\u5236\u65B9\u5F0F\u90E8\u7F72\uFF0C\u53EF\u4EE5\u5728\u8FD9\u91CC"),s("a",{href:"https://prometheus.io/download/%E4%B8%8B%E8%BD%BD%E5%AF%B9%E5%BA%94%E7%9A%84%E9%A2%84%E7%BC%96%E8%AF%91%E7%9A%84%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%96%87%E4%BB%B6%E3%80%82",target:"_blank",rel:"noreferrer"},"https://prometheus.io/download/\u4E0B\u8F7D\u5BF9\u5E94\u7684\u9884\u7F16\u8BD1\u7684\u4E8C\u8FDB\u5236\u6587\u4EF6\u3002")],-1),E5=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# cd /usr/local/src")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 src]# wget")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"https://github.com/prometheus/prometheus/releases/download/v2.7.1/prometheus-2.7.1.linux-amd64.tar.gz")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 src]# tar zxf prometheus-2.7.1.linux-amd64.tar.gz")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 src]# mv prometheus-2.7.1.linux-amd64 /usr/local/")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 src]# ln -s /usr/local/prometheus-2.7.1.linux-amd64/")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"/usr/local/prometheus")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),P5=s("p",null,[s("strong",null,"Prometheus\u914D\u7F6E")],-1),N5=s("p",null,"Prometheus\u7684\u914D\u7F6E\u6587\u4EF6\u5728prometheus.yml\u4E2D\uFF0C\u76F4\u63A5\u542F\u52A8\u4E5F\u4F1A\u5230\u547D\u4EE4\u7684\u5F53\u524D\u76EE\u5F55\u4E0B\u5BFB\u627E\u8BE5\u6587\u4EF6\u3002",-1),R5=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# cd /usr/local/prometheus")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 prometheus]# vim prometheus.yml")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# my global config")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"global:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"scrape_interval: 15s # Set the scrape interval to every 15 seconds. Default is every 1 minute.")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"evaluation_interval: 15s # Evaluate rules every 15 seconds. The default is every 1 minute.")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# scrape_timeout is set to the global default (10s).")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# Alertmanager configuration")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"alerting:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"alertmanagers:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"- static_configs:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"- targets:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# - alertmanager:9093")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# Load rules once and periodically evaluate them according to the global")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"'evaluation_interval'.")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"rule_files:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'# - "first_rules.yml"')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'# - "second_rules.yml"')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# A scrape configuration containing exactly one endpoint to scrape:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# Here it's Prometheus itself.")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"scrape_configs:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# The job name is added as a label `job=<job_name>` to any timeseries")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"scraped from this config.")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"- job_name: 'prometheus'")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# metrics_path defaults to '/metrics'")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# scheme defaults to 'http'.")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"static_configs:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"- targets: ['localhost:9090']")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),T5=s("p",null,[s("strong",null,"\u542F\u52A8Prometheus")],-1),I5=s("p",null,'\u9ED8\u8BA4\u60C5\u51B5\u4E0BPrometheus\u4F1A\u628A\u6570\u636E\u5199\u5728\u542F\u52A8\u76EE\u5F55\u7684./data\u76EE\u5F55\u4E0B\uFF0C\u53EF\u4EE5\u901A\u8FC7\u542F\u52A8\u53C2\u6570\u6307\u5B9A\u76EE\u5F55\uFF1A--storage.tsdb.path="data/"\uFF0C\u66F4\u591A\u53C2\u6570\u53EF\u4EE5\u901A\u8FC7\u2014help\u67E5\u770B',-1),O5=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 prometheus]# ./prometheus \u2013help")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 prometheus]# ./prometheus")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"\u2026")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'level=info ts=2019-02-12T08:04:03.799169159Z caller=main.go:620 msg="Starting')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'TSDB ..."')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'level=info ts=2019-02-12T08:04:03.835497463Z caller=main.go:635 msg="TSDB')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'started"')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'level=info ts=2019-02-12T08:04:03.835598421Z caller=main.go:695 msg="Loading')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'configuration file" filename=prometheus.yml')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'level=info ts=2019-02-12T08:04:03.83756508Z caller=main.go:722 msg="Completed')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'loading of configuration file" filename=prometheus.yml')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'level=info ts=2019-02-12T08:04:03.83760078Z caller=main.go:589 msg="Server is')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'ready to receive web requests."')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"level=info ts=2019-02-12T08:04:03.837641772Z caller=web.go:416 component=web")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'msg="Start listening for connections" address=0.0.0.0:9090')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),M5=s("p",null,"\u9ED8\u8BA4\u4F1A\u5728\u524D\u53F0\u542F\u52A8\uFF0C\u5E76\u76D1\u542C9090\u7AEF\u53E3\uFF0C\u4F1A\u81EA\u52A8\u521B\u5EFAdata\u76EE\u5F55\uFF0C\u5E76\u5B58\u653E\u6570\u636E\u3002\u6CE8\u610F\u5982\u4F55\u670D\u52A1\u5668\u65F6\u95F4\u4E0D\u6B63\u786E\u4F1A\u6709\u8B66\u544A\u63D0\u793A\uFF0C\u8BF7\u4FDD\u8BC1\u670D\u52A1\u5668\u65F6\u95F4\u540C\u6B65\u3002",-1),w5=s("p",null,[s("img",{src:"http://k8s.unixhot.com/kubernetes/media/266a101825cbabc2782820895e161f59.png",alt:"img"})],-1),K5=s("p",null,[s("strong",null,"\u653E\u7F6E\u5728\u540E\u53F0\u8FD0\u884C")],-1),L5=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# groupadd prometheus")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# useradd -g prometheus -d /var/lib/prometheus -s")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"/sbin/nologin prometheus")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# vim /usr/lib/systemd/system/prometheus.service")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[Unit]")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Description=prometheus")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"After=network.target")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[Service]")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Type=simple")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"User=prometheus")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"ExecStart=/usr/local/prometheus/prometheus")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"--config.file=/usr/local/prometheus/prometheus.yml")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"--storage.tsdb.path=/var/lib/prometheus")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Restart=on-failure")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[Install]")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"WantedBy=multi-user.target")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),U5=s("p",null,"\u540E\u53F0\u542F\u52A8",-1),j5=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# systemctl enable prometheus")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# systemctl start prometheus")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),G5=s("p",null,"\u67E5\u770B\u542F\u52A8\u72B6\u6001",-1),H5=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# netstat -ntlp | grep 9090")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"tcp6 0 0 :::9090 :::* LISTEN 61333/prometheus")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),F5=s("h3",{id:"\u4F7F\u7528node-exporter\u91C7\u96C6\u4E3B\u673A\u6570\u636E",tabindex:"-1"},[n("\u4F7F\u7528Node Exporter\u91C7\u96C6\u4E3B\u673A\u6570\u636E "),s("a",{class:"header-anchor",href:"#\u4F7F\u7528node-exporter\u91C7\u96C6\u4E3B\u673A\u6570\u636E","aria-hidden":"true"},"#")],-1),V5=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# cd /usr/local/src")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 src]# wget")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"<https://github.com/prometheus/node_exporter/releases/download/v0.17.0/node_exporter-0.17.0.linux-amd64.tar.gz>")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 src]# tar zxf node_exporter-0.17.0.linux-amd64.tar.gz")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 src]# mv node_exporter-0.17.0.linux-amd64 /usr/local/")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 src]# ln -s /usr/local/node_exporter-0.17.0.linux-amd64/")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"/usr/local/node_exporter")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# vim /usr/lib/systemd/system/node_exporter.service")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[Unit]")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Description=node_exporter")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"After=network.target")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[Service]")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Type=simple")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"User=prometheus")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"ExecStart=/usr/local/prometheus/node_exporter/node_exporter")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Restart=on-failure")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[Install]")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"WantedBy=multi-user.target")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),B5=s("p",null,"\u542F\u52A8Node Exporter",-1),q5=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# systemctl enable node_exporter")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# systemctl start node_exporter")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Y5=s("p",null,"\u67E5\u770B\u72B6\u6001 [root@linux-node1 ~]# netstat -ntlp | grep 9100",-1),z5=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"tcp6 0 0 :::9100 :::* LISTEN 66239/node_exporter")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),$5=s("p",null,"\u9ED8\u8BA4\u60C5\u51B5\u4E0BNode Exporter\u76D1\u542C9100\u7AEF\u53E3\uFF0C\u901A\u8FC7/metrics\u66B4\u9732\u91C7\u96C6\u5230\u7684\u76D1\u63A7\u6570\u636E\uFF0CPrometheus\u9ED8\u8BA4\u4E5F\u4ECE\u8BE5\u5730\u5740\u83B7\u53D6\u6570\u636E\u3002",-1),X5=s("p",null,[s("img",{src:"http://k8s.unixhot.com/kubernetes/media/1004a69a33423c72a2989005be5a790e.png",alt:"img"})],-1),J5=s("p",null,[s("strong",null,"\u914D\u7F6EPrometheus\u8BFB\u53D6Node Exporter\u6570\u636E")],-1),W5=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# vim /usr/local/prometheus/prometheus.yml")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"scrape_configs:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# The job name is added as a label `job=<job_name>` to any timeseries")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"scraped from this config.")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"- job_name: 'prometheus'")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# metrics_path defaults to '/metrics'")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"# scheme defaults to 'http'.")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"static_configs:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"- targets: ['localhost:9090']")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"- job_name: 'linux-node1'")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"static_configs:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"- targets: ['192.168.56.11:9100']")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"labels:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"instance: linux-node1")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Q5=s("p",null,[s("strong",null,"\u91CD\u542Fprometheus")],-1),Z5=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# systemctl restart prometheus")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),s9=s("p",null,[s("strong",null,"\u67E5\u770B\u76D1\u63A7\u72B6\u6001")],-1),n9=s("p",null,"\u767B\u5F55Prometheus\u7684Web\u63A7\u5236\u53F0\uFF0CStatusTargets\u5982\u679C\u53EF\u4EE5linux-node1\u5E76\u4E14\u72B6\u6001\u662FUP\u7684\u72B6\u6001\u5373\u4E3A\u914D\u7F6E\u6210\u529F\u3002",-1),l9=s("p",null,[s("img",{src:"http://k8s.unixhot.com/kubernetes/media/8c3da60dbf5558dc649de1fd6ce43bf0.png",alt:"img"})],-1),e9=s("h3",{id:"\u4F7F\u7528prometheus-ui\u67E5\u770B\u6570\u636E",tabindex:"-1"},[n("\u4F7F\u7528Prometheus UI\u67E5\u770B\u6570\u636E "),s("a",{class:"header-anchor",href:"#\u4F7F\u7528prometheus-ui\u67E5\u770B\u6570\u636E","aria-hidden":"true"},"#")],-1),o9=s("p",null,[n("\u73B0\u5728Prometheus\u4F1A\u5B9A\u671F\u7684\u4ECE"),s("a",{href:"http://192.168.56.11:9100/metrics%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE%EF%BC%8C%E5%B9%B6%E5%AD%98%E5%82%A8%EF%BC%8C%E6%88%91%E4%BB%AC%E5%8F%AF%E4%BB%A5%E4%BD%BF%E7%94%A8Prometheus",target:"_blank",rel:"noreferrer"},"http://192.168.56.11:9100/metrics\u83B7\u53D6\u6570\u636E\uFF0C\u5E76\u5B58\u50A8\uFF0C\u6211\u4EEC\u53EF\u4EE5\u4F7F\u7528Prometheus"),n(" UI\u6765\u67E5\u770B\u76D1\u63A7\u6570\u636E\u3002")],-1),a9=s("h3",{id:"\u4F7F\u7528grafana\u8FDB\u884C\u6570\u636E\u53EF\u89C6\u5316",tabindex:"-1"},[n("\u4F7F\u7528Grafana\u8FDB\u884C\u6570\u636E\u53EF\u89C6\u5316 "),s("a",{class:"header-anchor",href:"#\u4F7F\u7528grafana\u8FDB\u884C\u6570\u636E\u53EF\u89C6\u5316","aria-hidden":"true"},"#")],-1),t9=s("p",null,[s("strong",null,"1.\u5B89\u88C5Grafana")],-1),c9=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# vim /etc/yum.repos.d/grafana.repo")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[grafana]")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"name=grafana")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"baseurl=https://packages.grafana.com/oss/rpm")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"repo_gpgcheck=1")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"enabled=1")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"gpgcheck=1")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"gpgkey=https://packages.grafana.com/gpg.key")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"sslverify=1")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"sslcacert=/etc/pki/tls/certs/ca-bundle.crt")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# yum install -y grafana")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),i9=s("p",null,[s("strong",null,"2.\u914D\u7F6EGrafana")],-1),r9=s("p",null,"Grafana\u7684\u914D\u7F6E\u6587\u4EF6\u5728/etc/grafana/grafana.ini\uFF0C\u9ED8\u8BA4\u60C5\u51B5\u4E0BGrafana\u76D1\u542C3000\u7AEF\u53E3",-1),p9=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# vim /etc/grafana/grafana.ini")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),d9=s("p",null,[s("strong",null,"3.\u542F\u52A8Grafana")],-1),A9=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# systemctl enable grafana-server")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# systemctl start grafana-server")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# netstat -ntlp | grep 3000")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"tcp6 0 0 :::3000 :::* LISTEN 81427/grafana-serve")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),C9=s("p",null,[s("strong",null,"4.\u8BBF\u95EEGrafana")],-1),u9=s("p",null,[n("\u8BBF\u95EE"),s("a",{href:"http://192.168.56.11:3000/",target:"_blank",rel:"noreferrer"},"http://192.168.56.11:3000"),n("\uFF0C\u7528\u6237\u540D\u548C\u5BC6\u7801\u9ED8\u8BA4\u4E3Aadmin/admin\uFF0C\u7B2C\u4E00\u6B21\u767B\u9646\u4F1A\u8981\u6C42\u4FEE\u6539\u5BC6\u7801\uFF0C\u8BF7\u4F7F\u7528\u5B89\u5168\u5BC6\u7801\u3002")],-1),y9=s("p",null,[s("strong",null,"5.\u589E\u52A0Prometheus\u6570\u636E\u6E90")],-1),h9=s("p",null,"\u70B9\u51FB",-1),_9=s("p",null,[s("img",{src:"http://k8s.unixhot.com/kubernetes/media/b681a9b528d2ff21ba66666ce2452e51.png",alt:"img"})],-1),D9=s("p",null,"\uFF0C\u7136\u540E\u9009\u62E9",-1),g9=s("p",null,[s("img",{src:"http://k8s.unixhot.com/kubernetes/media/d3e83ac4f090a51c5b5e0c341b99dda5.png",alt:"img"})],-1),m9=s("p",null,"\u3002",-1),b9=s("p",null,[n("\u914D\u7F6EURL\u4E3A\uFF1A"),s("a",{href:"http://192.168.56.11:9090/",target:"_blank",rel:"noreferrer"},"http://192.168.56.11:9090"),n("\uFF0C\u5E76\u70B9\u51FBSave&Test\u3002")],-1),k9=s("p",null,[s("img",{src:"http://k8s.unixhot.com/kubernetes/media/e35d8aaebedd7e168ebd1b29b65b30bb.png",alt:"img"})],-1),v9=s("p",null,[s("strong",null,"6.\u8BBE\u7F6EDashboard")],-1),x9=s("p",null,"\u6570\u636E\u6E90\u8BBE\u7F6E\u5B8C\u6BD5\u540E\uFF0C\u5C31\u53EF\u4EE5\u8BBE\u7F6EDashboard\u56FE\u5F62\u5C55\u793A\uFF0C\u53EF\u4EE5\u624B\u52A8\u6DFB\u52A0\uFF0C\u4E5F\u53EF\u4EE5\u76F4\u63A5\u4E0B\u8F7D\u522B\u4EBA\u914D\u7F6E\u597D\u4FDD\u6301\u7684Json\u6587\u4EF6\u76F4\u63A5\u5BFC\u5165\u5373\u53EF\u3002",-1),f9=s("p",null,[n("\u4E0B\u8F7D\u5730\u5740\uFF1A"),s("a",{href:"https://grafana.com/dashboards/405%EF%BC%8C%E5%9C%A8%E5%8F%B3%E4%BE%A7%E6%9C%89Download",target:"_blank",rel:"noreferrer"},"https://grafana.com/dashboards/405\uFF0C\u5728\u53F3\u4FA7\u6709Download"),n(" Json\u6309\u94AE\uFF0C\u4E0B\u8F7D\u8BE5Json\u6587\u4EF6\u3002")],-1),S9=s("p",null,[s("img",{src:"http://k8s.unixhot.com/kubernetes/media/d9ab69b29a964a12df52512a7b128b5b.png",alt:"img"})],-1),E9=s("p",null,"\u70B9\u51FBHome\u4E0B\u7684Import Dashboard",-1),P9=s("p",null,[s("img",{src:"http://k8s.unixhot.com/kubernetes/media/53ffc0e739ca7b9421f9568ae4cbf117.png",alt:"img"})],-1),N9=s("p",null,"\u7136\u540E\u76F4\u63A5\u4E0A\u4F20\u521A\u624D\u4E0B\u8F7D\u7684JSON\u6587\u4EF6\u3002",-1),R9=s("p",null,[s("img",{src:"http://k8s.unixhot.com/kubernetes/media/500958891a82067b0c987d514239ffb0.png",alt:"img"})],-1),T9=s("p",null,"\u5BFC\u5165\u5B8C\u6BD5\u540E\uFF0C\u5C31\u53EF\u4EE5\u5728Grafana\u4E0A\u67E5\u770B\u5BF9\u5E94\u8282\u70B9\u7684\u76D1\u63A7\u6570\u636E\u56FE\u8868\u3002\u4F60\u53EF\u4EE5\u901A\u8FC7\u9F20\u6807\u62D6\u62FD\u8FDB\u884C\u56FE\u8868\u7684\u81EA\u5B9A\u4E49\u5927\u5C0F\u548C\u4F4D\u7F6E\u7684\u4FEE\u6539\uFF0C\u6548\u679C\u5982\u4E0B\uFF1A",-1),I9=s("p",null,[s("img",{src:"http://k8s.unixhot.com/kubernetes/media/698a6241faa0adc1af6c09cc369b259b.png",alt:"img"})],-1),O9=s("h1",{id:"\u7B2C\u4E03\u90E8\u5206-kubernetes\u9AD8\u7EA7\u8FDB\u9636",tabindex:"-1"},[n("\u7B2C\u4E03\u90E8\u5206 Kubernetes\u9AD8\u7EA7\u8FDB\u9636 "),s("a",{class:"header-anchor",href:"#\u7B2C\u4E03\u90E8\u5206-kubernetes\u9AD8\u7EA7\u8FDB\u9636","aria-hidden":"true"},"#")],-1),M9=s("h1",{id:"kubernetes\u7684\u6743\u9650\u63A7\u5236rbac",tabindex:"-1"},[n("Kubernetes\u7684\u6743\u9650\u63A7\u5236RBAC "),s("a",{class:"header-anchor",href:"#kubernetes\u7684\u6743\u9650\u63A7\u5236rbac","aria-hidden":"true"},"#")],-1),w9=s("p",null,[s("strong",null,"\u89D2\u8272")],-1),K9=s("ul",null,[s("li",null,[s("p",null,"Role: \u89D2\u8272\uFF0C\u547D\u540D\u7A7A\u95F4\u8303\u56F4\u5185\u7684\u4E00\u4E2A\u6743\u9650\u96C6\u5408\u3002")]),s("li",null,[s("p",null,"ClusterRole\uFF1A\u96C6\u7FA4\u89D2\u8272\uFF0C\u96C6\u7FA4\u8303\u56F4\u5185\u7684\u4E00\u4E2A\u6743\u9650\u7684\u96C6\u5408\uFF0C"),s("p",null,"Role\u548CClusterROle\u5728Kubernetes\u4E2D\u90FD\u88AB\u5B9A\u4E49\u4E3A\u96C6\u7FA4\u5185\u90E8\u7684 API \u8D44\u6E90\uFF0C\u548C\u6211\u4EEC\u524D\u9762\u5B66\u4E60\u8FC7\u7684 Pod\u3001ConfigMap \u8FD9\u4E9B\u7C7B\u4F3C\uFF0C\u90FD\u662F\u6211\u4EEC\u96C6\u7FA4\u7684\u8D44\u6E90\u5BF9\u8C61\uFF0C\u6240\u4EE5\u540C\u6837\u7684\u53EF\u4EE5\u4F7F\u7528\u6211\u4EEC\u524D\u9762\u7684kubectl\u76F8\u5173\u7684\u547D\u4EE4\u6765\u8FDB\u884C\u64CD\u4F5C Subject\uFF1A\u4E3B\u9898\uFF0C\u5BF9\u5E94\u5728\u96C6\u7FA4\u4E2D\u5C1D\u8BD5\u64CD\u4F5C\u7684\u5BF9\u8C61\uFF0C\u96C6\u7FA4\u4E2D\u5B9A\u4E49\u4E863\u79CD\u7C7B\u578B\u7684\u4E3B\u9898\u8D44\u6E90\uFF1A")])],-1),L9=s("p",null,"User Account\uFF1A\u7528\u6237\uFF0C\u8FD9\u662F\u6709\u5916\u90E8\u72EC\u7ACB\u670D\u52A1\u8FDB\u884C\u7BA1\u7406\u7684\uFF0C\u7BA1\u7406\u5458\u8FDB\u884C\u79C1\u94A5\u7684\u5206\u914D\uFF0C\u7528\u6237\u53EF\u4EE5\u4F7F\u7528 KeyStone\u6216\u8005 Goolge \u5E10\u53F7\uFF0C\u751A\u81F3\u4E00\u4E2A\u7528\u6237\u540D\u548C\u5BC6\u7801\u7684\u6587\u4EF6\u5217\u8868\u4E5F\u53EF\u4EE5\u3002\u5BF9\u4E8E\u7528\u6237\u7684\u7BA1\u7406\u96C6\u7FA4\u5185\u90E8\u6CA1\u6709\u4E00\u4E2A\u5173\u8054\u7684\u8D44\u6E90\u5BF9\u8C61\uFF0C\u6240\u4EE5\u7528\u6237\u4E0D\u80FD\u901A\u8FC7\u96C6\u7FA4\u5185\u90E8\u7684 API \u6765\u8FDB\u884C\u7BA1\u7406 Group\uFF1A\u7EC4\uFF0C\u8FD9\u662F\u7528\u6765\u5173\u8054\u591A\u4E2A\u8D26\u6237\u7684\uFF0C\u96C6\u7FA4\u4E2D\u6709\u4E00\u4E9B\u9ED8\u8BA4\u521B\u5EFA\u7684\u7EC4\uFF0C\u6BD4\u5982cluster-admin Service Account\uFF1A\u670D\u52A1\u5E10\u53F7\uFF0C\u901A\u8FC7Kubernetes API \u6765\u7BA1\u7406\u7684\u4E00\u4E9B\u7528\u6237\u5E10\u53F7\uFF0C\u548C namespace \u8FDB\u884C\u5173\u8054\u7684\uFF0C\u9002\u7528\u4E8E\u96C6\u7FA4\u5185\u90E8\u8FD0\u884C\u7684\u5E94\u7528\u7A0B\u5E8F\uFF0C\u9700\u8981\u901A\u8FC7 API \u6765\u5B8C\u6210\u6743\u9650\u8BA4\u8BC1\uFF0C\u6240\u4EE5\u5728\u96C6\u7FA4\u5185\u90E8\u8FDB\u884C\u6743\u9650\u64CD\u4F5C\uFF0C\u6211\u4EEC\u90FD\u9700\u8981\u4F7F\u7528\u5230 ServiceAccount\uFF0C\u8FD9\u4E5F\u662F\u6211\u4EEC\u8FD9\u8282\u8BFE\u7684\u91CD\u70B9 RoleBinding \u548C ClusterRoleBinding\uFF1A\u89D2\u8272\u7ED1\u5B9A\u548C\u96C6\u7FA4\u89D2\u8272\u7ED1\u5B9A\uFF0C\u7B80\u5355\u6765\u8BF4\u5C31\u662F\u628A\u58F0\u660E\u7684 Subject \u548C\u6211\u4EEC\u7684 Role \u8FDB\u884C\u7ED1\u5B9A\u7684\u8FC7\u7A0B(\u7ED9\u67D0\u4E2A\u7528\u6237\u7ED1\u5B9A\u4E0A\u64CD\u4F5C\u7684\u6743\u9650)\uFF0C\u4E8C\u8005\u7684\u533A\u522B\u4E5F\u662F\u4F5C\u7528\u8303\u56F4\u7684\u533A\u522B\uFF1ARoleBinding \u53EA\u4F1A\u5F71\u54CD\u5230\u5F53\u524D namespace \u4E0B\u9762\u7684\u8D44\u6E90\u64CD\u4F5C\u6743\u9650\uFF0C\u800C ClusterRoleBinding \u4F1A\u5F71\u54CD\u5230\u6240\u6709\u7684 namespace\u3002",-1),U9=s("p",null,[s("strong",null,"\u521B\u5EFA\u7528\u6237\u51ED\u8BC1")],-1),j9=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# openssl genrsa -out jenkins.key 2048")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'[root@linux-node1 ~]# openssl req -new -key jenkins.key -out jenkins.csr -subj "/CN=jenkins/O=vmware"')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# openssl x509 -req -in jenkins.csr -CA /etc/kubernetes/pki/ca.crt -CAkey /etc/kubernetes/pki/ca.key -CAcreateserial -out jenkins.crt -days 365")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# kubectl config set-credentials jenkins --client-certificate=jenkins.crt  --client-key=jenkins.key")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# kubectl config set-context jenkins-context --cluster=kubernetes --namespace=jenkins --user=jenkins  ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# kubectl get pods --context=jenkins-context")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),G9=s("p",null,[s("strong",null,"\u521B\u5EFA\u89D2\u8272")],-1),H9=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# vim jenkins-role.yml")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"apiVersion: rbac.authorization.k8s.io/v1")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"kind: Role")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"metadata:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  name: jenkins-role")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  namespace: jenkins")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"rules:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'- apiGroups: ["", "extensions", "apps"]')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'  resources: ["deployments", "replicasets", "pods"]')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'  verbs: ["get", "list", "watch", "create", "update", "patch", "delete"]')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),F9=s("p",null,[s("strong",null,"\u521B\u5EFA\u89D2\u8272\u7ED1\u5B9A")],-1),V9=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# vim jenkins-role-binding.yml")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"apiVersion: rbac.authorization.k8s.io/v1")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"kind: RoleBinding")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"metadata:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  name: jenkins-rolebinding")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  namespace: jenkins")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"subjects:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"- kind: User")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  name: jenkins")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'  apiGroup: ""')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"roleRef:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  kind: Role")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  name: jenkins-role")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'  apiGroup: ""')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),B9=s("h1",{id:"_22-\u6DF1\u5165\u7406\u89E3pod\u8C03\u5EA6",tabindex:"-1"},[n("22 \u6DF1\u5165\u7406\u89E3Pod\u8C03\u5EA6 "),s("a",{class:"header-anchor",href:"#_22-\u6DF1\u5165\u7406\u89E3pod\u8C03\u5EA6","aria-hidden":"true"},"#")],-1),q9=s("h1",{id:"\u6DF1\u5165\u7406\u89E3pod\u8C03\u5EA6",tabindex:"-1"},[n("\u6DF1\u5165\u7406\u89E3Pod\u8C03\u5EA6 "),s("a",{class:"header-anchor",href:"#\u6DF1\u5165\u7406\u89E3pod\u8C03\u5EA6","aria-hidden":"true"},"#")],-1),Y9=s("p",null,"\u5728\u524D\u9762\u7684\u7AE0\u8282\u6211\u4EEC\u5DF2\u7ECF\u77E5\u9053\u5728Kubernetes\u4E2D\u4F7F\u7528kube-scheduler\u8FDB\u884CPod\u8C03\u5EA6\uFF0C\u5B83\u7684\u76EE\u6807\u662F\u5C06Pod\u7ED1\u5B9A\u5230\u5BF9\u5E94\u7684Node\u4E0A\uFF0C\u7ECF\u8FC7\u4E00\u7CFB\u5217\u7684\u6761\u4EF6\u548C\u7B97\u6CD5\u5C3D\u53EF\u80FD\u7684\u8BA9\u6BCF\u4E2APod\u90FD\u6EE1\u610F\u3002kube-scheduler\u662FKubernetes\u9ED8\u8BA4\u7684\u8C03\u5EA6\u5668\u3002",-1),z9=s("p",null,[n("kube-scheduler\u7684\u4EE3\u7801\u4F4D\u4E8E"),s("a",{href:"https://github.com/kubernetes/kubernetes/tree/master/pkg/scheduler",target:"_blank",rel:"noreferrer"},"GitHub")],-1),$9=s("p",null,"\u53EF\u4EE5\u5C06\u4EE3\u7801\u514B\u9686\u5230\u672C\u5730\u65B9\u4FBF\u67E5\u770B",-1),X9=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# git clone --depth 1 https://github.com/kubernetes/kubernetes.git")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),J9=s("p",null,"\u5728algorithm\u4E0B\u6709\u8C03\u5EA6\u7B97\u6CD5\uFF0C\u8C03\u5EA6\u7B97\u6CD5\u5206\u4E3A\u4E24\u4E2A\u9636\u6BB5\uFF1APredicates\u548Cpriorities\uFF0C\u9996\u5148\u5BF9Node\u8FDB\u884C\u8FC7\u6EE4\u770B\u54EA\u4E9BNode\u7B26\u5408\u8C03\u5EA6\u8981\u6C42\uFF0C\u7136\u540E\u5728\u7B26\u5408\u8C03\u5EA6\u8981\u6C42\u7684Node\u4E0A\u8FDB\u884C\u4F18\u5148\u7EA7\u8BA1\u7B97\uFF0C\u5224\u65AD\u8C03\u5EA6\u5230\u54EA\u4E2ANode\u6700\u5408\u9002\u3002",-1),W9=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 algorithm]# pwd")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"/root/kubernetes/pkg/scheduler/algorithm")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 algorithm]# ls -l")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"total 20")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"-rw-r--r-- 1 root root 1256 Dec 17 22:52 BUILD")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"-rw-r--r-- 1 root root  735 Dec 17 22:52 doc.go")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"drwxr-xr-x 2 root root  276 Dec 17 22:52 predicates")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"drwxr-xr-x 3 root root 4096 Dec 17 22:52 priorities")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"-rw-r--r-- 1 root root 3278 Dec 17 22:52 scheduler_interface.go")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"-rw-r--r-- 1 root root 3383 Dec 17 22:52 types.go")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),Q9=s("p",null,[n("\u5B98\u65B9\u6587\u6863\u8BE6\u7EC6\u7684\u4ECB\u7ECD\u4E86\u6240\u6709\u7684\u6B65\u9AA4\uFF1A"),s("a",{href:"https://kubernetes.io/docs/concepts/scheduling/kube-scheduler/",target:"_blank",rel:"noreferrer"},"https://kubernetes.io/docs/concepts/scheduling/kube-scheduler/")],-1),Z9=s("p",null,[s("strong",null,"\u8BBE\u7F6E\u8C03\u5EA6\u5668")],-1),sS=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# kubectl get pod kube-proxy-5wbtf -n kube-system -o yaml | grep schedulerName")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  schedulerName: default-scheduler")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),nS=s("h2",{id:"taints\uFF08\u6C61\u70B9\uFF09",tabindex:"-1"},[n("Taints\uFF08\u6C61\u70B9\uFF09 "),s("a",{class:"header-anchor",href:"#taints\uFF08\u6C61\u70B9\uFF09","aria-hidden":"true"},"#")],-1),lS=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# kubectl describe node linux-node1.unixhot.com | grep Taints")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Taints:             node-role.kubernetes.io/master:NoSchedule")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),eS=s("p",null,"Taints\u7684\u8868\u73B0\u5F62\u5F0F\u4E3A",-1),oS=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"<key>=<value>:<effect>")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),aS=s("p",null,"effect\u7684\u4E09\u79CD\u7C7B\u578B\uFF1A",-1),tS=s("ul",null,[s("li",null,"NoSchedule: \u5982\u679CPod\u6CA1\u6709\u5BB9\u5FCD\u8BE5\u6C61\u70B9\uFF0C\u4E0D\u8C03\u5EA6\u5230\u8BE5\u8282\u70B9\u4E0A\u3002"),s("li",null,"PreferNoSchedule\uFF1A\u5C3D\u91CF\u963B\u6B62Pod\u88AB\u8C03\u5EA6\u5230\u8FD9\u4E2A\u8282\u70B9\u4E0A\uFF0C\u4F46\u662F\u5982\u679C\u6CA1\u6709\u5176\u5B83\u8282\u70B9\u80FD\u591F\u8C03\u5EA6\uFF0C\u53EF\u4EE5\u8C03\u5EA6\u5230\u8BE5\u8282\u70B9\u3002"),s("li",null,"NoExecute\uFF1A NoScheduler\u548CPreferNoSchedule\u53EA\u662F\u5728\u8C03\u5EA6\u9636\u6BB5\u8D77\u4F5C\u7528\uFF0C\u4F46\u662FNoExecute\u4F1A\u5F71\u54CD\u6B63\u5E38\u8FD0\u884C\u7684Pod\uFF0C\u5982\u679C\u4E00\u4E2A\u8282\u70B9\u88AB\u6253\u4E86NoExecute\u7684\u6C61\u70B9\uFF0C\u800C\u8FD0\u884C\u5728\u8BE5\u8282\u70B9\u7684Pod\u6CA1\u6709\u5BB9\u5FCD\u4F1A\u76F4\u63A5\u88AB\u8FD9\u4E2A\u8282\u70B9\u79FB\u9664\u3002")],-1),cS=s("p",null,"\u67E5\u770BFlannel\u4E3A\u4F55\u80FD\u8C03\u5EA6\u5230Master\u8282\u70B9",-1),iS=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# kubectl get po -n kube-system | grep flannel")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"kube-flannel-ds-amd64-f2jrk                       1/1     Running   2          22h")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"kube-flannel-ds-amd64-mh75v                       1/1     Running   2          22h")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"kube-flannel-ds-amd64-n52zm                       1/1     Running   4          22h")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# kubectl describe pod kube-flannel-ds-amd64-f2jrk -n kube-system")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"...")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Tolerations:     :NoSchedule")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"                 node.kubernetes.io/disk-pressure:NoSchedule")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"                 node.kubernetes.io/memory-pressure:NoSchedule")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"                 node.kubernetes.io/network-unavailable:NoSchedule")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"                 node.kubernetes.io/not-ready:NoExecute")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"                 node.kubernetes.io/pid-pressure:NoSchedule")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"                 node.kubernetes.io/unreachable:NoExecute")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"                 node.kubernetes.io/unschedulable:NoSchedule")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),rS=s("h3",{id:"\u81EA\u5B9A\u4E49\u6C61\u70B9",tabindex:"-1"},[n("\u81EA\u5B9A\u4E49\u6C61\u70B9 "),s("a",{class:"header-anchor",href:"#\u81EA\u5B9A\u4E49\u6C61\u70B9","aria-hidden":"true"},"#")],-1),pS=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 ~]# kubectl taint node linux-node2.example.com node-ytpe=gpu:NoSchedule       ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"node/linux-node2.example.com tainted")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 example]# cat nginx-deployment-taint.yaml    ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"apiVersion: apps/v1")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"kind: Deployment")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"metadata:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  name: nginx-deployment")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  labels:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    app: nginx")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"spec:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  replicas: 3")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  selector:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    matchLabels:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"      app: nginx")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  template:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    metadata:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"      labels:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        app: nginx")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    spec:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"      containers:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"      - name: nginx")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        image: nginx:1.13.12")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        ports:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        - containerPort: 80")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"      tolerations:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"      - key: node-type")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        operator: Equal")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        value: gpu")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        effect: Noschedule")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@linux-node1 example]# kubectl get po -o wide")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"NAME                                READY   STATUS    RESTARTS   AGE     IP          NODE                      NOMINATED NODE   READINESS GATES")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"dns-test                            1/1     Running   1          6h15m   10.2.2.23   linux-node3.example.com   <none>           <none>")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"nginx-deployment-77564d4546-2jkw9   1/1     Running   0          13s     10.2.2.26   linux-node3.example.com   <none>           <none>")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"nginx-deployment-77564d4546-4hrbf   1/1     Running   0          13s     10.2.2.24   linux-node3.example.com   <none>           <none>")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"nginx-deployment-77564d4546-s2r4h   1/1     Running   0          13s     10.2.2.25   linux-node3.example")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),dS=s("h2",{id:"\u4EB2\u7F18\u6027\u8C03\u5EA6",tabindex:"-1"},[n("\u4EB2\u7F18\u6027\u8C03\u5EA6 "),s("a",{class:"header-anchor",href:"#\u4EB2\u7F18\u6027\u8C03\u5EA6","aria-hidden":"true"},"#")],-1),AS=s("h1",{id:"_23-kubernetes-api\u4ECB\u7ECD",tabindex:"-1"},[n("23 Kubernetes API\u4ECB\u7ECD "),s("a",{class:"header-anchor",href:"#_23-kubernetes-api\u4ECB\u7ECD","aria-hidden":"true"},"#")],-1),CS=s("p",null,"\u67E5\u770B\u96C6\u7FA4\u72B6\u6001",-1),uS=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@k8s-master1 ~]# kubectl cluster-info")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Kubernetes master is running at https://192.168.56.11:6443")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"KubeDNS is running at https://192.168.56.11:6443/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"To further debug and diagnose cluster problems, use 'kubectl cluster-info dump'.")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),yS=s("p",null,"\u76F4\u63A5\u8BBF\u95EEKubernetes API\u9700\u8981\u9A8C\u8BC1\uFF0C\u65E0\u6CD5\u76F4\u63A5\u8BBF\u95EE\u3002",-1),hS=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@k8s-master1 ~]# curl -k https://192.168.56.11:6443")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"{")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'  "kind": "Status",')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'  "apiVersion": "v1",')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'  "metadata": {')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  },")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'  "status": "Failure",')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'  "message": "forbidden: User \\"system:anonymous\\" cannot get path \\"/\\"",')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'  "reason": "Forbidden",')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'  "details": {')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  },")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'  "code": 403')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"}")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),_S=s("p",null,[s("strong",null,"\u901A\u8FC7Proxy\u8BBF\u95EEKubernetes API")],-1),DS=s("p",null,"\u4F7F\u7528kubectl proxy\u53EF\u4EE5\u5728Master\u672C\u5730\u542F\u52A8\u4E00\u4E2A\u4EE3\u7406",-1),gS=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@k8s-master1 ~]# kubectl proxy")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Starting to serve on 127.0.0.1:8001")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),mS=s("p",null,"\u53EF\u4EE5\u901A\u8FC7127.0.0.1:8001\u4E0EAPI Server\u8FDB\u884C\u4EA4\u4E92",-1),bS=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@k8s-master1 ~]# curl http://127.0.0.1:8001")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"{")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'  "paths": [')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'    "/api",')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'    "/api/v1",')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'    "/apis",')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'    "/apis/",')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'    "/apis/admissionregistration.k8s.io",')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'    "/apis/admissionregistration.k8s.io/v1beta1",')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'    "/apis/apiextensions.k8s.io",')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'    "/apis/apiextensions.k8s.io/v1beta1",')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'    "/apis/apiregistration.k8s.io",')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'    "/apis/apiregistration.k8s.io/v1",')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'    "/apis/apiregistration.k8s.io/v1beta1",')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'    "/apis/apps",')]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"...\uFF08\u7701\u7565\u5176\u5B83\u8F93\u51FA\uFF09")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),kS=s("p",null,"\u53EF\u4EE5\u901A\u8FC7\u4FEE\u6539\u76D1\u542C\u5730\u5740\uFF0C\u5E76\u5173\u95ED\u8FC7\u6EE4\uFF0C\u5B9E\u73B0\u5728\u5176\u5B83\u5730\u65B9\u767B\u5F55\u548C\u67E5\u770B\uFF0C\u8FD9\u6837\u5C31\u53EF\u4EE5\u5728\u672C\u5730\u6D4F\u89C8\u5668\u8BBF\u95EEAPI\u3002\u5207\u8BB0\u4E0D\u8981\u518D\u751F\u4EA7\u73AF\u5883\u5C06\u4EE3\u7406\u5730\u5740\u66B4\u9732\u5728\u5916\u7F51\u3002",-1),vS=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@k8s-master1 ~]# kubectl proxy --address=0.0.0.0 --disable-filter=true")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"W1105 16:18:45.669591   16730 proxy.go:142] Request filter disabled, your proxy is vulnerable to XSRF attacks, please be cautious")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Starting to serve on [::]:8001")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),xS=s("h3",{id:"\u4F7F\u7528swagger-ui\u8FDB\u884Capi\u4EA4\u4E92",tabindex:"-1"},[n("\u4F7F\u7528Swagger UI\u8FDB\u884CAPI\u4EA4\u4E92 "),s("a",{class:"header-anchor",href:"#\u4F7F\u7528swagger-ui\u8FDB\u884Capi\u4EA4\u4E92","aria-hidden":"true"},"#")],-1),fS=s("p",null,"Kubernetes\u652F\u6301Swagger UI\u8BBF\u95EEAPI\uFF0C\u9700\u8981\u5728API Server\u5F00\u542F\uFF0C\u5982\u679C\u5DF2\u7ECF\u6839\u636E\u672C\u4E66\u4F7F\u7528kubeadm\u90E8\u7F72\u7684\u96C6\u7FA4\uFF0C\u53EF\u4EE5\u901A\u8FC7\u4FEE\u6539Pod\u7684YAML\u6587\u4EF6\uFF0C\u91CD\u5EFAPod\u6765\u5F00\u542F",-1),SS=s("p",null,[s("strong",null,"\u4FEE\u6539API Server\u7684Pod\u5B9A\u4E49\u6587\u4EF6")],-1),ES=s("p",null,"\u5728- kube-apiserver\u4E0B\u9762\u4E00\u884C\u589E\u52A0--enable-swagger-ui=true",-1),PS=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@k8s-master1 ~]# vim /etc/kubernetes/manifests/kube-apiserver.yaml ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"apiVersion: v1")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"kind: Pod")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"metadata:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  creationTimestamp: null")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  labels:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    component: kube-apiserver")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    tier: control-plane")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  name: kube-apiserver")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  namespace: kube-system")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"spec:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  containers:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  - command:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    - kube-apiserver")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    - --enable-swagger-ui=true")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    - --advertise-address=192.168.56.11")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    - --allow-privileged=true")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),NS=s("p",null,"\u5220\u9664Pod\uFF0Ckubelet\u4F1A\u901A\u8FC7\u8BE5YAML\u91CD\u5EFAPod",-1),RS=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@k8s-master1 ~]# kubectl get pod -n kube-system | grep api")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"kube-apiserver-linux-node1.unixhot.com            1/1     Running   0          55m")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@k8s-master1 ~]# kubectl delete pod kube-apiserver-linux-node1.unixhot.com -n kube-system")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),TS=s("p",null,"\u53EF\u4EE5\u770B\u5230\u914D\u7F6E\u5DF2\u7ECF\u751F\u6548",-1),IS=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@k8s-master1 ~]# kubectl describe pod kube-apiserver-linux-node1.unixhot.com -n kube-system ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"...")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    Command:")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"      kube-apiserver")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"      --enable-swagger-ui=true")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"      --advertise-address=192.168.99.27")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"....")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),OS=s("p",null,"\u90E8\u7F72\u4E00\u4E2ASwagger UI\u670D\u52A1\u67E5\u770BAPI",-1),MS=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@k8s-master1 ~]# kubectl run swagger-ui --image=swaggerapi/swagger-ui:latest")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@k8s-master1 ~]# kubectl expose deployment swagger-ui --port=8080 --type=NodePort")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"[root@k8s-master1 ~]# kubectl get service")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"NAME         TYPE        CLUSTER-IP    EXTERNAL-IP     PORT(S)          AGE")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"kubernetes   ClusterIP   10.1.0.1      <none>          443/TCP          43d")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"swagger-ui   NodePort    10.1.205.94   <none>   8080:30410/TCP   34s")]),n(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),wS=s("p",null,"\u56E0\u4E3A\u6211\u4EEC\u90E8\u7F72\u7684Swagger UI\u548CAPI Server\u4E0D\u5728\u4E00\u4E2A\u57DF\u540D\u4E0B\uFF0C\u6240\u4EE5\u4F1A\u6709\u8DE8\u57DF\u7684\u95EE\u9898\uFF0CChrome\u6D4F\u89C8\u5668\u9700\u8981\u63D0\u524D\u5B89\u88C5Allow CROS\u63D2\u4EF6\u89E3\u51B3",-1),KS=s("hr",null,null,-1),LS=s("hr",null,null,-1),US=s("p",null,"\u6458\u5F55\u81EA\u8D75\u73ED\u957F--------",-1);function jS(e,GS,HS,FS,t,VS){const c=i;return d(),p(c,{frontmatter:t.frontmatter,data:t.data},{"main-content-md":l(()=>[u,y,h,_,D,g,m,b,k,v,x,f,S,E,P,N,R,T,I,O,M,w,K,L,U,j,G,H,F,V,B,q,Y,z,$,X,J,W,Q,Z,ss,ns,ls,es,os,as,ts,cs,is,rs,ps,ds,As,Cs,us,ys,hs,_s,Ds,gs,ms,bs,ks,vs,xs,fs,Ss,Es,Ps,Ns,Rs,Ts,Is,Os,Ms,ws,Ks,Ls,Us,js,Gs,Hs,Fs,Vs,Bs,qs,Ys,zs,$s,Xs,Js,Ws,Qs,Zs,sn,nn,ln,en,on,an,tn,cn,rn,pn,dn,An,Cn,un,yn,hn,_n,Dn,gn,mn,bn,kn,vn,xn,fn,Sn,En,Pn,Nn,Rn,Tn,In,On,Mn,wn,Kn,Ln,Un,jn,Gn,Hn,Fn,Vn,Bn,qn,Yn,zn,$n,Xn,Jn,Wn,Qn,Zn,sl,nl,ll,el,ol,al,tl,cl,il,rl,pl,dl,Al,Cl,ul,yl,hl,_l,Dl,gl,ml,bl,kl,vl,xl,fl,Sl,El,Pl,Nl,Rl,Tl,Il,Ol,Ml,wl,Kl,Ll,Ul,jl,Gl,Hl,Fl,Vl,Bl,ql,Yl,zl,$l,Xl,Jl,Wl,Ql,Zl,se,ne,le,ee,oe,ae,te,ce,ie,re,pe,de,Ae,Ce,ue,ye,he,_e,De,ge,me,be,ke,ve,xe,fe,Se,Ee,Pe,Ne,Re,Te,Ie,Oe,Me,we,Ke,Le,Ue,je,Ge,He,Fe,Ve,Be,qe,Ye,ze,$e,Xe,Je,We,Qe,Ze,so,no,lo,eo,oo,ao,to,co,io,ro,po,Ao,Co,uo,yo,ho,_o,Do,go,mo,bo,ko,vo,xo,fo,So,Eo,Po,No,Ro,To,Io,Oo,Mo,wo,Ko,Lo,Uo,jo,Go,Ho,Fo,Vo,Bo,qo,Yo,zo,$o,Xo,Jo,Wo,Qo,Zo,sa,na,la,ea,oa,aa,ta,ca,ia,ra,pa,da,Aa,Ca,ua,ya,ha,_a,Da,ga,ma,ba,ka,va,xa,fa,Sa,Ea,Pa,Na,Ra,Ta,Ia,Oa,Ma,wa,Ka,La,Ua,ja,Ga,Ha,Fa,Va,Ba,qa,Ya,za,$a,Xa,Ja,Wa,Qa,Za,st,nt,lt,et,ot,at,tt,ct,it,rt,pt,dt,At,Ct,ut,yt,ht,_t,Dt,gt,mt,bt,kt,vt,xt,ft,St,Et,Pt,Nt,Rt,Tt,It,Ot,Mt,wt,Kt,Lt,Ut,jt,Gt,Ht,Ft,Vt,Bt,qt,Yt,zt,$t,Xt,Jt,Wt,Qt,Zt,sc,nc,lc,ec,oc,ac,tc,cc,ic,rc,pc,dc,Ac,Cc,uc,yc,hc,_c,Dc,gc,mc,bc,kc,vc,xc,fc,Sc,Ec,Pc,Nc,Rc,Tc,Ic,Oc,Mc,wc,Kc,Lc,Uc,jc,Gc,Hc,Fc,Vc,Bc,qc,Yc,zc,$c,Xc,Jc,Wc,Qc,Zc,si,ni,li,ei,oi,ai,ti,ci,ii,ri,pi,di,Ai,Ci,ui,yi,hi,_i,Di,gi,mi,bi,ki,vi,xi,fi,Si,Ei,Pi,Ni,Ri,Ti,Ii,Oi,Mi,wi,Ki,Li,Ui,ji,Gi,Hi,Fi,Vi,Bi,qi,Yi,zi,$i,Xi,Ji,Wi,Qi,Zi,sr,nr,lr,er,or,ar,tr,cr,ir,rr,pr,dr,Ar,Cr,ur,yr,hr,_r,Dr,gr,mr,br,kr,vr,xr,fr,Sr,Er,Pr,Nr,Rr,Tr,Ir,Or,Mr,wr,Kr,Lr,Ur,jr,Gr,Hr,Fr,Vr,Br,qr,Yr,zr,$r,Xr,Jr,Wr,Qr,Zr,sp,np,lp,ep,op,ap,tp,cp,ip,rp,pp,dp,Ap,Cp,up,yp,hp,_p,Dp,gp,mp,bp,kp,vp,xp,fp,Sp,Ep,Pp,Np,Rp,Tp,Ip,Op,Mp,wp,Kp,Lp,Up,jp,Gp,Hp,Fp,Vp,Bp,qp,Yp,zp,$p,Xp,Jp,Wp,Qp,Zp,sd,nd,ld,ed,od,ad,td,cd,id,rd,pd,dd,Ad,Cd,ud,yd,hd,_d,Dd,gd,md,bd,kd,vd,xd,fd,Sd,Ed,Pd,Nd,Rd,Td,Id,Od,Md,wd,Kd,Ld,Ud,jd,Gd,Hd,Fd,Vd,Bd,qd,Yd,zd,$d,Xd,Jd,Wd,Qd,Zd,sA,nA,lA,eA,oA,aA,tA,cA,iA,rA,pA,dA,AA,CA,uA,yA,hA,_A,DA,gA,mA,bA,kA,vA,xA,fA,SA,EA,PA,NA,RA,TA,IA,OA,MA,wA,KA,LA,UA,jA,GA,HA,FA,VA,BA,qA,YA,zA,$A,XA,JA,WA,QA,ZA,sC,nC,lC,eC,oC,aC,tC,cC,iC,rC,pC,dC,AC,CC,uC,yC,hC,_C,DC,gC,mC,bC,kC,vC,xC,fC,SC,EC,PC,NC,RC,TC,IC,OC,MC,wC,KC,LC,UC,jC,GC,HC,FC,VC,BC,qC,YC,zC,$C,XC,JC,WC,QC,ZC,su,nu,lu,eu,ou,au,tu,cu,iu,ru,pu,du,Au,Cu,uu,yu,hu,_u,Du,gu,mu,bu,ku,vu,xu,fu,Su,Eu,Pu,Nu,Ru,Tu,Iu,Ou,Mu,wu,Ku,Lu,Uu,ju,Gu,Hu,Fu,Vu,Bu,qu,Yu,zu,$u,Xu,Ju,Wu,Qu,Zu,s1,n1,l1,e1,o1,a1,t1,c1,i1,r1,p1,d1,A1,C1,u1,y1,h1,_1,D1,g1,m1,b1,k1,v1,x1,f1,S1,E1,P1,N1,R1,T1,I1,O1,M1,w1,K1,L1,U1,j1,G1,H1,F1,V1,B1,q1,Y1,z1,$1,X1,J1,W1,Q1,Z1,sy,ny,ly,ey,oy,ay,ty,cy,iy,ry,py,dy,Ay,Cy,uy,yy,hy,_y,Dy,gy,my,by,ky,vy,xy,fy,Sy,Ey,Py,Ny,Ry,Ty,Iy,Oy,My,wy,Ky,Ly,Uy,jy,Gy,Hy,Fy,Vy,By,qy,Yy,zy,$y,Xy,Jy,Wy,Qy,Zy,s6,n6,l6,e6,o6,a6,t6,c6,i6,r6,p6,d6,A6,C6,u6,y6,h6,_6,D6,g6,m6,b6,k6,v6,x6,f6,S6,E6,P6,N6,R6,T6,I6,O6,M6,w6,K6,L6,U6,j6,G6,H6,F6,V6,B6,q6,Y6,z6,$6,X6,J6,W6,Q6,Z6,sh,nh,lh,eh,oh,ah,th,ch,ih,rh,ph,dh,Ah,Ch,uh,yh,hh,_h,Dh,gh,mh,bh,kh,vh,xh,fh,Sh,Eh,Ph,Nh,Rh,Th,Ih,Oh,Mh,wh,Kh,Lh,Uh,jh,Gh,Hh,Fh,Vh,Bh,qh,Yh,zh,$h,Xh,Jh,Wh,Qh,Zh,s_,n_,l_,e_,o_,a_,t_,c_,i_,r_,p_,d_,A_,C_,u_,y_,h_,__,D_,g_,m_,b_,k_,v_,x_,f_,S_,E_,P_,N_,R_,T_,I_,O_,M_,w_,K_,L_,U_,j_,G_,H_,F_,V_,B_,q_,Y_,z_,$_,X_,J_,W_,Q_,Z_,sD,nD,lD,eD,oD,aD,tD,cD,iD,rD,pD,dD,AD,CD,uD,yD,hD,_D,DD,gD,mD,bD,kD,vD,xD,fD,SD,ED,PD,ND,RD,TD,ID,OD,MD,wD,KD,LD,UD,jD,GD,HD,FD,VD,BD,qD,YD,zD,$D,XD,JD,WD,QD,ZD,sg,ng,lg,eg,og,ag,tg,cg,ig,rg,pg,dg,Ag,Cg,ug,yg,hg,_g,Dg,gg,mg,bg,kg,vg,xg,fg,Sg,Eg,Pg,Ng,Rg,Tg,Ig,Og,Mg,wg,Kg,Lg,Ug,jg,Gg,Hg,Fg,Vg,Bg,qg,Yg,zg,$g,Xg,Jg,Wg,Qg,Zg,sm,nm,lm,em,om,am,tm,cm,im,rm,pm,dm,Am,Cm,um,ym,hm,_m,Dm,gm,mm,bm,km,vm,xm,fm,Sm,Em,Pm,Nm,Rm,Tm,Im,Om,Mm,wm,Km,Lm,Um,jm,Gm,Hm,Fm,Vm,Bm,qm,Ym,zm,$m,Xm,Jm,Wm,Qm,Zm,sb,nb,lb,eb,ob,ab,tb,cb,ib,rb,pb,db,Ab,Cb,ub,yb,hb,_b,Db,gb,mb,bb,kb,vb,xb,fb,Sb,Eb,Pb,Nb,Rb,Tb,Ib,Ob,Mb,wb,Kb,Lb,Ub,jb,Gb,Hb,Fb,Vb,Bb,qb,Yb,zb,$b,Xb,Jb,Wb,Qb,Zb,sk,nk,lk,ek,ok,ak,tk,ck,ik,rk,pk,dk,Ak,Ck,uk,yk,hk,_k,Dk,gk,mk,bk,kk,vk,xk,fk,Sk,Ek,Pk,Nk,Rk,Tk,Ik,Ok,Mk,wk,Kk,Lk,Uk,jk,Gk,Hk,Fk,Vk,Bk,qk,Yk,zk,$k,Xk,Jk,Wk,Qk,Zk,s2,n2,l2,e2,o2,a2,t2,c2,i2,r2,p2,d2,A2,C2,u2,y2,h2,_2,D2,g2,m2,b2,k2,v2,x2,f2,S2,E2,P2,N2,R2,T2,I2,O2,M2,w2,K2,L2,U2,j2,G2,H2,F2,V2,B2,q2,Y2,z2,$2,X2,J2,W2,Q2,Z2,sv,nv,lv,ev,ov,av,tv,cv,iv,rv,pv,dv,Av,Cv,uv,yv,hv,_v,Dv,gv,mv,bv,kv,vv,xv,fv,Sv,Ev,Pv,Nv,Rv,Tv,Iv,Ov,Mv,wv,Kv,Lv,Uv,jv,Gv,Hv,Fv,Vv,Bv,qv,Yv,zv,$v,Xv,Jv,Wv,Qv,Zv,s0,n0,l0,e0,o0,a0,t0,c0,i0,r0,p0,d0,A0,C0,u0,y0,h0,_0,D0,g0,m0,b0,k0,v0,x0,f0,S0,E0,P0,N0,R0,T0,I0,O0,M0,w0,K0,L0,U0,j0,G0,H0,F0,V0,B0,q0,Y0,z0,$0,X0,J0,W0,Q0,Z0,s3,n3,l3,e3,o3,a3,t3,c3,i3,r3,p3,d3,A3,C3,u3,y3,h3,_3,D3,g3,m3,b3,k3,v3,x3,f3,S3,E3,P3,N3,R3,T3,I3,O3,M3,w3,K3,L3,U3,j3,G3,H3,F3,V3,B3,q3,Y3,z3,$3,X3,J3,W3,Q3,Z3,sx,nx,lx,ex,ox,ax,tx,cx,ix,rx,px,dx,Ax,Cx,ux,yx,hx,_x,Dx,gx,mx,bx,kx,vx,xx,fx,Sx,Ex,Px,Nx,Rx,Tx,Ix,Ox,Mx,wx,Kx,Lx,Ux,jx,Gx,Hx,Fx,Vx,Bx,qx,Yx,zx,$x,Xx,Jx,Wx,Qx,Zx,sf,nf,lf,ef,of,af,tf,cf,rf,pf,df,Af,Cf,uf,yf,hf,_f,Df,gf,mf,bf,kf,vf,xf,ff,Sf,Ef,Pf,Nf,Rf,Tf,If,Of,Mf,wf,Kf,Lf,Uf,jf,Gf,Hf,Ff,Vf,Bf,qf,Yf,zf,$f,Xf,Jf,Wf,Qf,Zf,s8,n8,l8,e8,o8,a8,t8,c8,i8,r8,p8,d8,A8,C8,u8,y8,h8,_8,D8,g8,m8,b8,k8,v8,x8,f8,S8,E8,P8,N8,R8,T8,I8,O8,M8,w8,K8,L8,U8,j8,G8,H8,F8,V8,B8,q8,Y8,z8,$8,X8,J8,W8,Q8,Z8,s4,n4,l4,e4,o4,a4,t4,c4,i4,r4,p4,d4,A4,C4,u4,y4,h4,_4,D4,g4,m4,b4,k4,v4,x4,f4,S4,E4,P4,N4,R4,T4,I4,O4,M4,w4,K4,L4,U4,j4,G4,H4,F4,V4,B4,q4,Y4,z4,$4,X4,J4,W4,Q4,Z4,s5,n5,l5,e5,o5,a5,t5,c5,i5,r5,p5,d5,A5,C5,u5,y5,h5,_5,D5,g5,m5,b5,k5,v5,x5,f5,S5,E5,P5,N5,R5,T5,I5,O5,M5,w5,K5,L5,U5,j5,G5,H5,F5,V5,B5,q5,Y5,z5,$5,X5,J5,W5,Q5,Z5,s9,n9,l9,e9,o9,a9,t9,c9,i9,r9,p9,d9,A9,C9,u9,y9,h9,_9,D9,g9,m9,b9,k9,v9,x9,f9,S9,E9,P9,N9,R9,T9,I9,O9,M9,w9,K9,L9,U9,j9,G9,H9,F9,V9,B9,q9,Y9,z9,$9,X9,J9,W9,Q9,Z9,sS,nS,lS,eS,oS,aS,tS,cS,iS,rS,pS,dS,AS,CS,uS,yS,hS,_S,DS,gS,mS,bS,kS,vS,xS,fS,SS,ES,PS,NS,RS,TS,IS,OS,MS,wS,KS,LS,US]),"main-header":l(()=>[o(e.$slots,"main-header")]),"main-header-after":l(()=>[o(e.$slots,"main-header-after")]),"main-nav":l(()=>[o(e.$slots,"main-nav")]),"main-content":l(()=>[o(e.$slots,"main-content")]),"main-content-after":l(()=>[o(e.$slots,"main-content-after")]),"main-nav-before":l(()=>[o(e.$slots,"main-nav-before")]),"main-nav-after":l(()=>[o(e.$slots,"main-nav-after")]),comment:l(()=>[o(e.$slots,"comment")]),footer:l(()=>[o(e.$slots,"footer")]),aside:l(()=>[o(e.$slots,"aside")]),"aside-custom":l(()=>[o(e.$slots,"aside-custom")]),default:l(()=>[o(e.$slots,"default")]),_:3},8,["frontmatter","data"])}const JS=r(C,[["render",jS]]);export{XS as __pageData,JS as default};
