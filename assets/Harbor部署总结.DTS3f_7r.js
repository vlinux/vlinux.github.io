import{_ as m}from"./ValaxyMain.vue_vue_type_style_index_0_lang.C2bsXNP9.js";import"./chunks/@vueuse/motion.BITvz5PP.js";import{e as b,u as d,a as g}from"./chunks/vue-router.DESBU8cS.js";import{aa as f,ap as e,ag as l,af as a,ai as s,P as k,ab as v,a1 as y}from"./framework.GHZxz7jq.js";import"./index.fe-YlSh0.js";import"./chunks/dayjs.BldX5ftQ.js";import"./chunks/vue-i18n.C7V8WoQZ.js";import"./chunks/pinia.BfAlK2F6.js";import"./chunks/nprogress.BZwbcB2O.js";/* empty css                    */import"./YunComment.vue_vue_type_style_index_0_lang.Bfmmp6N5.js";import"./index.C5okkQwF.js";import"./YunPageHeader.vue_vue_type_script_setup_true_lang.fblE3Fel.js";import"./post.Dv7YwUny.js";const H=b("/posts/Harbor部署总结",async r=>JSON.parse('{"title":"Harbor部署总结","description":"","frontmatter":{"title":"Harbor部署总结","categories":"DevOps","tags":["Harbor"],"date":"2021-01-13 14:14:44"},"headers":[],"relativePath":"pages/posts/Harbor部署总结.md","lastUpdated":null}'),{lazy:(r,t)=>r.name===t.name}),w={__name:"Harbor部署总结",setup(r,{expose:t}){const{data:i}=H(),p=g(),u=d(),o=Object.assign(u.meta.frontmatter||{},i.value?.frontmatter||{});return p.currentRoute.value.data=i.value,y("valaxy:frontmatter",o),globalThis.$frontmatter=o,t({frontmatter:{title:"Harbor部署总结",categories:"DevOps",tags:["Harbor"],date:"2021-01-13 14:14:44"}}),(n,c)=>{const h=m;return v(),f(h,{frontmatter:k(o)},{"main-content-md":e(()=>[...c[0]||(c[0]=[a("h1",{id:"harbor部署总结",tabindex:"-1"},[s("Harbor部署总结 "),a("a",{class:"header-anchor",href:"#harbor部署总结","aria-label":'Permalink to "Harbor部署总结"'},"​")],-1),a("h3",{id:"简介概述",tabindex:"-1"},[s("简介概述 "),a("a",{class:"header-anchor",href:"#简介概述","aria-label":'Permalink to "简介概述"'},"​")],-1),a("p",null,"Harbor是由VMWare公司开源的容器镜像仓库。事实上，Harbor是在Docker Registry上进行了相应的企业级扩展，",-1),a("p",null,"从而获得了更加广泛的应用，这些新的企业级特性包括：管理用户界面，基于角色的访问控制 ，AD/LDAP集成以及",-1),a("p",null,"审计日志等，足以满足基本企业需求。",-1),a("p",null,[s("官方："),a("a",{href:"https://goharbor.io/",target:"_blank",rel:"noreferrer"},"https://goharbor.io/")],-1),a("p",null,[s("Github："),a("a",{href:"https://github.com/goharbor/harbor",target:"_blank",rel:"noreferrer"},"https://github.com/goharbor/harbor")],-1),a("h3",{id:"部署条件",tabindex:"-1"},[s("部署条件 "),a("a",{class:"header-anchor",href:"#部署条件","aria-label":'Permalink to "部署条件"'},"​")],-1),a("p",null,[a("strong",null,"服务器硬件配置：")],-1),a("p",null,"• 最低要求：CPU2核/内存4G/硬盘40GB",-1),a("p",null,"• 推荐：CPU4核/内存8G/硬盘160GB",-1),a("p",null,[a("strong",null,"软件：")],-1),a("p",null,"• Docker CE 17.06版本+",-1),a("p",null,"• Docker Compose 1.18版本+",-1),a("p",null,[a("strong",null,"Harbor安装有2种方式：")],-1),a("p",null,"• 在线安装：从Docker Hub下载Harbor相关镜像，因此安装软件包非常小",-1),a("p",null,"• 离线安装：安装包包含部署的相关镜像，因此安装包比较大",-1),a("h3",{id:"部署",tabindex:"-1"},[s("部署 "),a("a",{class:"header-anchor",href:"#部署","aria-label":'Permalink to "部署"'},"​")],-1),a("p",null,[a("strong",null,"1、先安装Docker和Docker Compose")],-1),a("p",null,[a("a",{href:"https://github.com/docker/compose/releases",target:"_blank",rel:"noreferrer"},"https://github.com/docker/compose/releases")],-1),a("p",null,[a("strong",null,"2、部署Harbor HTTP")],-1),a("div",{class:"language-"},[a("button",{title:"Copy code",class:"copy"}),a("span",{class:"lang"}),a("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[a("code",{"v-pre":""},[a("span",{class:"line"},[a("span",null,"# tar zxvf harbor-offline-installer-v*.tgz")]),s(`
`),a("span",{class:"line"},[a("span")]),s(`
`),a("span",{class:"line"},[a("span",null,"# cd harbor")]),s(`
`),a("span",{class:"line"},[a("span")]),s(`
`),a("span",{class:"line"},[a("span",null,"# cp harbor.yml.tmpl harbor.yml")]),s(`
`),a("span",{class:"line"},[a("span")]),s(`
`),a("span",{class:"line"},[a("span",null,"# vi harbor.yml")]),s(`
`),a("span",{class:"line"},[a("span",null,"hostname: reg.ctnrs.com")]),s(`
`),a("span",{class:"line"},[a("span",null,"https: # 先注释https相关配置")]),s(`
`),a("span",{class:"line"},[a("span",null,"harbor_admin_password: Harbor12345")]),s(`
`),a("span",{class:"line"},[a("span",null,"# ./prepare")]),s(`
`),a("span",{class:"line"},[a("span",null,"# ./install.sh")])])]),a("button",{class:"code-block-unfold-btn"})],-1),a("h3",{id:"基本使用",tabindex:"-1"},[s("基本使用 "),a("a",{class:"header-anchor",href:"#基本使用","aria-label":'Permalink to "基本使用"'},"​")],-1),a("p",null,[a("strong",null,"1、配置http镜像仓库可信任")],-1),a("div",{class:"language-"},[a("button",{title:"Copy code",class:"copy"}),a("span",{class:"lang"}),a("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[a("code",{"v-pre":""},[a("span",{class:"line"},[a("span",null,"# vi /etc/docker/daemon.json ")]),s(`
`),a("span",{class:"line"},[a("span")]),s(`
`),a("span",{class:"line"},[a("span",null,'{"insecure-registries":["reg.ctnrs.com"]}')]),s(`
`),a("span",{class:"line"},[a("span")]),s(`
`),a("span",{class:"line"},[a("span",null,"# systemctl restart docker")])])]),a("button",{class:"code-block-unfold-btn"})],-1),a("p",null,[a("strong",null,"2、打标签")],-1),a("div",{class:"language-"},[a("button",{title:"Copy code",class:"copy"}),a("span",{class:"lang"}),a("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[a("code",{"v-pre":""},[a("span",{class:"line"},[a("span",null,"# docker tag centos:7 reg.ctnrs.com/library/centos:7")])])]),a("button",{class:"code-block-unfold-btn"})],-1),a("p",null,[a("strong",null,"3、上传")],-1),a("div",{class:"language-"},[a("button",{title:"Copy code",class:"copy"}),a("span",{class:"lang"}),a("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[a("code",{"v-pre":""},[a("span",{class:"line"},[a("span",null,"# docker push reg.ctnrs.com/library/centos:7")])])]),a("button",{class:"code-block-unfold-btn"})],-1),a("p",null,[a("strong",null,"4、下载")],-1),a("div",{class:"language-"},[a("button",{title:"Copy code",class:"copy"}),a("span",{class:"lang"}),a("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[a("code",{"v-pre":""},[a("span",{class:"line"},[a("span",null,"# docker pull reg.ctnrs.com/library/centos:7")])])]),a("button",{class:"code-block-unfold-btn"})],-1)])]),"main-header":e(()=>[l(n.$slots,"main-header")]),"main-header-after":e(()=>[l(n.$slots,"main-header-after")]),"main-nav":e(()=>[l(n.$slots,"main-nav")]),"main-content-before":e(()=>[l(n.$slots,"main-content-before")]),"main-content":e(()=>[l(n.$slots,"main-content")]),"main-content-after":e(()=>[l(n.$slots,"main-content-after")]),"main-nav-before":e(()=>[l(n.$slots,"main-nav-before")]),"main-nav-after":e(()=>[l(n.$slots,"main-nav-after")]),comment:e(()=>[l(n.$slots,"comment")]),footer:e(()=>[l(n.$slots,"footer")]),aside:e(()=>[l(n.$slots,"aside")]),"aside-custom":e(()=>[l(n.$slots,"aside-custom")]),default:e(()=>[l(n.$slots,"default")]),_:3},8,["frontmatter"])}}};export{w as default,H as usePageData};
