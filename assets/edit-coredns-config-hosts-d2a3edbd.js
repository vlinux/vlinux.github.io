import{_ as c}from"./ValaxyMain.vue_vue_type_style_index_0_lang-0662cb8e.js";import{_ as p,c as i,w as l,o as D,a as y,r as a,b as s,d as o,p as C}from"./app-79ddcd9b.js";import"./YunFooter.vue_vue_type_script_setup_true_lang-ffbb3f5a.js";import"./YunCard.vue_vue_type_style_index_0_lang-9812589a.js";import"./YunPageHeader.vue_vue_type_script_setup_true_lang-7ab74174.js";const w=JSON.parse('{"title":"合理配置Coredns的Hosts","description":"","frontmatter":{"title":"合理配置Coredns的Hosts","date":"2023-02-16T18:42:00.000Z","tags":"coredns","categories":"Kubernetes"},"headers":[],"relativePath":"pages/posts/edit-coredns-config-hosts.md","path":"/Users/vlinux/vlinux/blog/valaxy/vlinux.github.io/pages/posts/edit-coredns-config-hosts.md","lastUpdated":1675749064000}'),n=JSON.parse('{"title":"合理配置Coredns的Hosts","description":"","frontmatter":{"title":"合理配置Coredns的Hosts","date":"2023-02-16T18:42:00.000Z","tags":"coredns","categories":"Kubernetes"},"headers":[],"relativePath":"pages/posts/edit-coredns-config-hosts.md","path":"/Users/vlinux/vlinux/blog/valaxy/vlinux.github.io/pages/posts/edit-coredns-config-hosts.md","lastUpdated":1675749064000}'),d={name:"pages/posts/edit-coredns-config-hosts.md",data(){return{data:n,frontmatter:n.frontmatter}},setup(){C("pageData",n)}},m=s("p",null,"在日常运维Kubernetes中经常会遇到很多网络问题，比如在一个Pod中常常需要访问一些业务域名，或者别的集群的域名，如果想要解决那就要搭建一整套DNS系统，来让所有集群跟环境统一使用，但这样未免太麻烦，有时候我们只是想简单的实现Pod能把这个域名解析到某个IP即可，我记得Coredns支持自定义Hosts文件，在配置更新后，Pod可以优先使用coredns定义好的hosts，话不多说，开始修改。",-1),F=s("hr",null,null,-1),A=s("p",null,"直接编辑coredns的cm更改即可",-1),u=s("div",{class:"language-bash"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"kubectl"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"edit"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"cm"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-n"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"kube-system"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"coredns")]),o(`
`),s("span",{class:"line"})])])],-1),h=s("div",{class:"language-yaml"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"apiVersion"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"v1")]),o(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"data"),s("span",{style:{color:"#89DDFF"}},":")]),o(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#F07178"}},"Corefile"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"|"),s("span",{style:{color:"#C792EA"}},"-")]),o(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C3E88D"}},"    .:5353 {")]),o(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C3E88D"}},"        bind {$POD_IP}")]),o(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C3E88D"}},"        cache 30")]),o(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C3E88D"}},"        errors")]),o(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C3E88D"}},"        health {$POD_IP}:8080")]),o(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C3E88D"}},"        kubernetes cluster.local in-addr.arpa ip6.arpa {")]),o(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C3E88D"}},"          pods insecure")]),o(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C3E88D"}},"          fallthrough in-addr.arpa ip6.arpa")]),o(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C3E88D"}},"        }")]),o(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C3E88D"}},"        #加入下方hosts字段即可")]),o(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C3E88D"}},"        hosts {")]),o(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C3E88D"}},"          192.168.1.1 www.example.com")]),o(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C3E88D"}},"          fallthrough")]),o(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C3E88D"}},"        }")]),o(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C3E88D"}},"        loadbalance round_robin")]),o(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C3E88D"}},"        prometheus {$POD_IP}:9153")]),o(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C3E88D"}},"        forward . /etc/resolv.conf")]),o(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C3E88D"}},"        reload")]),o(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C3E88D"}},"    }")]),o(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"kind"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"ConfigMap")]),o(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"metadata"),s("span",{style:{color:"#89DDFF"}},":")]),o(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#F07178"}},"labels"),s("span",{style:{color:"#89DDFF"}},":")]),o(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    "),s("span",{style:{color:"#F07178"}},"app"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"coredns")]),o(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    "),s("span",{style:{color:"#F07178"}},"k8s-app"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"coredns")]),o(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    "),s("span",{style:{color:"#F07178"}},"kubernetes.io/cluster-service"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"true"),s("span",{style:{color:"#89DDFF"}},'"')]),o(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    "),s("span",{style:{color:"#F07178"}},"kubernetes.io/name"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"CoreDNS")]),o(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    "),s("span",{style:{color:"#F07178"}},"release"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"cceaddon-coredns")]),o(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#F07178"}},"name"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"coredns")]),o(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#F07178"}},"namespace"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"kube-system")]),o(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#F07178"}},"resourceVersion"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"460"),s("span",{style:{color:"#89DDFF"}},'"')]),o(`
`),s("span",{class:"line"})])])],-1);function f(e,E,g,b,t,v){const r=c;return D(),i(r,{frontmatter:t.frontmatter,data:t.data},{"main-content-md":l(()=>[m,y(" more "),F,A,u,h]),"main-header":l(()=>[a(e.$slots,"main-header")]),"main-header-after":l(()=>[a(e.$slots,"main-header-after")]),"main-nav":l(()=>[a(e.$slots,"main-nav")]),"main-content":l(()=>[a(e.$slots,"main-content")]),"main-content-after":l(()=>[a(e.$slots,"main-content-after")]),"main-nav-before":l(()=>[a(e.$slots,"main-nav-before")]),"main-nav-after":l(()=>[a(e.$slots,"main-nav-after")]),comment:l(()=>[a(e.$slots,"comment")]),footer:l(()=>[a(e.$slots,"footer")]),aside:l(()=>[a(e.$slots,"aside")]),"aside-custom":l(()=>[a(e.$slots,"aside-custom")]),default:l(()=>[a(e.$slots,"default")]),_:3},8,["frontmatter","data"])}const H=p(d,[["render",f]]);export{w as __pageData,H as default};
