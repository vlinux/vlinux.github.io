import{_ as r}from"./ValaxyMain-56eaee8c.js";import{_ as i,p,c as D,w as e,o as d,r as o,b as s,R as l}from"./app-275f6332.js";import"./YunFooter-f6a2c496.js";import"./YunCard-317d6aea.js";import"./YunPageHeader-4fc472d3.js";const Fe=JSON.parse('{"title":"KVM-未完","description":"","frontmatter":{"title":"KVM-未完","categories":"DevOps","tags":["KVM"],"date":"2020-03-19T15:26:00.000Z"},"headers":[{"level":2,"title":"1.VM虚拟机开启CPU虚拟化功能","slug":"_1-vm虚拟机开启cpu虚拟化功能","link":"#_1-vm虚拟机开启cpu虚拟化功能","children":[]},{"level":2,"title":"2.安装软件","slug":"_2-安装软件","link":"#_2-安装软件","children":[]},{"level":2,"title":"3.创建虚拟机","slug":"_3-创建虚拟机","link":"#_3-创建虚拟机","children":[]},{"level":2,"title":"4.连接虚拟机","slug":"_4-连接虚拟机","link":"#_4-连接虚拟机","children":[]},{"level":2,"title":"1.查看虚拟机","slug":"_1-查看虚拟机","link":"#_1-查看虚拟机","children":[]},{"level":2,"title":"2.启动虚拟机","slug":"_2-启动虚拟机","link":"#_2-启动虚拟机","children":[]},{"level":2,"title":"3.重启虚拟机","slug":"_3-重启虚拟机","link":"#_3-重启虚拟机","children":[]},{"level":2,"title":"4.关闭虚拟机","slug":"_4-关闭虚拟机","link":"#_4-关闭虚拟机","children":[]},{"level":2,"title":"5.查看配置文件","slug":"_5-查看配置文件","link":"#_5-查看配置文件","children":[]},{"level":2,"title":"6.导出配置文件","slug":"_6-导出配置文件","link":"#_6-导出配置文件","children":[]},{"level":2,"title":"7.删除虚拟机","slug":"_7-删除虚拟机","link":"#_7-删除虚拟机","children":[]},{"level":2,"title":"8.导入虚拟机","slug":"_8-导入虚拟机","link":"#_8-导入虚拟机","children":[]},{"level":2,"title":"9.虚拟机重命名","slug":"_9-虚拟机重命名","link":"#_9-虚拟机重命名","children":[]},{"level":2,"title":"10.主机挂起","slug":"_10-主机挂起","link":"#_10-主机挂起","children":[]},{"level":2,"title":"11.恢复主机","slug":"_11-恢复主机","link":"#_11-恢复主机","children":[]},{"level":2,"title":"12.kvm虚拟机开机启动","slug":"_12-kvm虚拟机开机启动","link":"#_12-kvm虚拟机开机启动","children":[]},{"level":2,"title":"13.小项目：","slug":"_13-小项目：","link":"#_13-小项目：","children":[{"level":3,"title":"13.1.停止要迁移的虚拟机","slug":"_13-1-停止要迁移的虚拟机","link":"#_13-1-停止要迁移的虚拟机","children":[]},{"level":3,"title":"13.2.创建数据目录并移动磁盘文件","slug":"_13-2-创建数据目录并移动磁盘文件","link":"#_13-2-创建数据目录并移动磁盘文件","children":[]},{"level":3,"title":"13.3.使用edit命令修改配置文件","slug":"_13-3-使用edit命令修改配置文件","link":"#_13-3-使用edit命令修改配置文件","children":[]},{"level":3,"title":"13.4.启动虚拟机","slug":"_13-4-启动虚拟机","link":"#_13-4-启动虚拟机","children":[]}]},{"level":2,"title":"1.VNC","slug":"_1-vnc","link":"#_1-vnc","children":[]},{"level":2,"title":"2.SSH","slug":"_2-ssh","link":"#_2-ssh","children":[]},{"level":2,"title":"3.console显示","slug":"_3-console显示","link":"#_3-console显示","children":[]},{"level":2,"title":"1.虚拟机磁盘格式介绍","slug":"_1-虚拟机磁盘格式介绍","link":"#_1-虚拟机磁盘格式介绍","children":[]},{"level":2,"title":"2.查看磁盘信息","slug":"_2-查看磁盘信息","link":"#_2-查看磁盘信息","children":[]},{"level":2,"title":"3.创建磁盘","slug":"_3-创建磁盘","link":"#_3-创建磁盘","children":[]},{"level":2,"title":"4.查看磁盘信息","slug":"_4-查看磁盘信息","link":"#_4-查看磁盘信息","children":[]},{"level":2,"title":"5.调整磁盘容量: 只能加不能减","slug":"_5-调整磁盘容量-只能加不能减","link":"#_5-调整磁盘容量-只能加不能减","children":[]},{"level":2,"title":"6.磁盘格式转换","slug":"_6-磁盘格式转换","link":"#_6-磁盘格式转换","children":[{"level":3,"title":"6.1.将虚拟机关机","slug":"_6-1-将虚拟机关机","link":"#_6-1-将虚拟机关机","children":[]},{"level":3,"title":"6.2.转换磁盘格式","slug":"_6-2-转换磁盘格式","link":"#_6-2-转换磁盘格式","children":[]},{"level":3,"title":"6.3.编辑配置文件修改为qcow2格式","slug":"_6-3-编辑配置文件修改为qcow2格式","link":"#_6-3-编辑配置文件修改为qcow2格式","children":[]},{"level":3,"title":"6.4.重新启动","slug":"_6-4-重新启动","link":"#_6-4-重新启动","children":[]}]},{"level":2,"title":"1.查看快照","slug":"_1-查看快照","link":"#_1-查看快照","children":[]},{"level":2,"title":"2.创建快照","slug":"_2-创建快照","link":"#_2-创建快照","children":[]},{"level":2,"title":"3.恢复快照","slug":"_3-恢复快照","link":"#_3-恢复快照","children":[]},{"level":2,"title":"4.删除快照","slug":"_4-删除快照","link":"#_4-删除快照","children":[]},{"level":2,"title":"1.完整克隆","slug":"_1-完整克隆","link":"#_1-完整克隆","children":[]},{"level":2,"title":"2.链接克隆","slug":"_2-链接克隆","link":"#_2-链接克隆","children":[{"level":3,"title":"2.1 生成虚拟机磁盘文件","slug":"_2-1-生成虚拟机磁盘文件","link":"#_2-1-生成虚拟机磁盘文件","children":[]},{"level":3,"title":"2.2 查看磁盘信息","slug":"_2-2-查看磁盘信息","link":"#_2-2-查看磁盘信息","children":[]},{"level":3,"title":"2.3 生成虚拟机配置文件","slug":"_2-3-生成虚拟机配置文件","link":"#_2-3-生成虚拟机配置文件","children":[]},{"level":3,"title":"2.3 导入配置文件","slug":"_2-3-导入配置文件","link":"#_2-3-导入配置文件","children":[]},{"level":3,"title":"2.4 启动虚拟机","slug":"_2-4-启动虚拟机","link":"#_2-4-启动虚拟机","children":[]}]},{"level":2,"title":"1.创建桥接网卡","slug":"_1-创建桥接网卡","link":"#_1-创建桥接网卡","children":[]},{"level":2,"title":"2.连接克隆新磁盘","slug":"_2-连接克隆新磁盘","link":"#_2-连接克隆新磁盘","children":[]},{"level":2,"title":"3.创建新虚拟机","slug":"_3-创建新虚拟机","link":"#_3-创建新虚拟机","children":[]},{"level":2,"title":"4.登录虚拟机查看网卡信息","slug":"_4-登录虚拟机查看网卡信息","link":"#_4-登录虚拟机查看网卡信息","children":[]},{"level":2,"title":"5.在其他主机ping测试","slug":"_5-在其他主机ping测试","link":"#_5-在其他主机ping测试","children":[]},{"level":2,"title":"1.热添加硬盘","slug":"_1-热添加硬盘","link":"#_1-热添加硬盘","children":[{"level":3,"title":"1.1 创建磁盘","slug":"_1-1-创建磁盘","link":"#_1-1-创建磁盘","children":[]},{"level":3,"title":"1.2 临时生效添加","slug":"_1-2-临时生效添加","link":"#_1-2-临时生效添加","children":[]},{"level":3,"title":"1.3 虚拟机格式化并挂载","slug":"_1-3-虚拟机格式化并挂载","link":"#_1-3-虚拟机格式化并挂载","children":[]},{"level":3,"title":"1.4 永久生效添加","slug":"_1-4-永久生效添加","link":"#_1-4-永久生效添加","children":[]}]},{"level":2,"title":"2.剥离磁盘","slug":"_2-剥离磁盘","link":"#_2-剥离磁盘","children":[{"level":3,"title":"2.1 临时剥离","slug":"_2-1-临时剥离","link":"#_2-1-临时剥离","children":[]},{"level":3,"title":"2.2 永久剥离","slug":"_2-2-永久剥离","link":"#_2-2-永久剥离","children":[]}]},{"level":2,"title":"3.调整磁盘大小","slug":"_3-调整磁盘大小","link":"#_3-调整磁盘大小","children":[{"level":3,"title":"3.1 调整磁盘大小","slug":"_3-1-调整磁盘大小","link":"#_3-1-调整磁盘大小","children":[]},{"level":3,"title":"3.2 添加到虚拟机并查看","slug":"_3-2-添加到虚拟机并查看","link":"#_3-2-添加到虚拟机并查看","children":[]},{"level":3,"title":"3.3 调整磁盘信息","slug":"_3-3-调整磁盘信息","link":"#_3-3-调整磁盘信息","children":[]}]},{"level":2,"title":"1.临时添加","slug":"_1-临时添加","link":"#_1-临时添加","children":[]},{"level":2,"title":"2.永久生效","slug":"_2-永久生效","link":"#_2-永久生效","children":[]},{"level":2,"title":"3,临时剥离","slug":"_3-临时剥离","link":"#_3-临时剥离","children":[]},{"level":2,"title":"4.永久剥离","slug":"_4-永久剥离","link":"#_4-永久剥离","children":[]},{"level":2,"title":"1.创建虚拟机时直接添加最大内存参数","slug":"_1-创建虚拟机时直接添加最大内存参数","link":"#_1-创建虚拟机时直接添加最大内存参数","children":[]},{"level":2,"title":"2.如果创建虚拟机的时候没有设置最大内存限制，执行如下操作添加配置","slug":"_2-如果创建虚拟机的时候没有设置最大内存限制，执行如下操作添加配置","link":"#_2-如果创建虚拟机的时候没有设置最大内存限制，执行如下操作添加配置","children":[]},{"level":2,"title":"3.临时添加","slug":"_3-临时添加","link":"#_3-临时添加","children":[]},{"level":2,"title":"4.永久增大内存","slug":"_4-永久增大内存","link":"#_4-永久增大内存","children":[]},{"level":2,"title":"1.编辑配置文件","slug":"_1-编辑配置文件","link":"#_1-编辑配置文件","children":[]},{"level":2,"title":"2.添加cpu核数","slug":"_2-添加cpu核数","link":"#_2-添加cpu核数","children":[]},{"level":2,"title":"3.永久添加cpu核数","slug":"_3-永久添加cpu核数","link":"#_3-永久添加cpu核数","children":[]}],"relativePath":"pages/posts/KVM-未完.md","path":"/Users/vlinux/vlinux/blog/valaxy/vlinux.github.io/pages/posts/KVM-未完.md","lastUpdated":1671091756000}'),a=JSON.parse('{"title":"KVM-未完","description":"","frontmatter":{"title":"KVM-未完","categories":"DevOps","tags":["KVM"],"date":"2020-03-19T15:26:00.000Z"},"headers":[{"level":2,"title":"1.VM虚拟机开启CPU虚拟化功能","slug":"_1-vm虚拟机开启cpu虚拟化功能","link":"#_1-vm虚拟机开启cpu虚拟化功能","children":[]},{"level":2,"title":"2.安装软件","slug":"_2-安装软件","link":"#_2-安装软件","children":[]},{"level":2,"title":"3.创建虚拟机","slug":"_3-创建虚拟机","link":"#_3-创建虚拟机","children":[]},{"level":2,"title":"4.连接虚拟机","slug":"_4-连接虚拟机","link":"#_4-连接虚拟机","children":[]},{"level":2,"title":"1.查看虚拟机","slug":"_1-查看虚拟机","link":"#_1-查看虚拟机","children":[]},{"level":2,"title":"2.启动虚拟机","slug":"_2-启动虚拟机","link":"#_2-启动虚拟机","children":[]},{"level":2,"title":"3.重启虚拟机","slug":"_3-重启虚拟机","link":"#_3-重启虚拟机","children":[]},{"level":2,"title":"4.关闭虚拟机","slug":"_4-关闭虚拟机","link":"#_4-关闭虚拟机","children":[]},{"level":2,"title":"5.查看配置文件","slug":"_5-查看配置文件","link":"#_5-查看配置文件","children":[]},{"level":2,"title":"6.导出配置文件","slug":"_6-导出配置文件","link":"#_6-导出配置文件","children":[]},{"level":2,"title":"7.删除虚拟机","slug":"_7-删除虚拟机","link":"#_7-删除虚拟机","children":[]},{"level":2,"title":"8.导入虚拟机","slug":"_8-导入虚拟机","link":"#_8-导入虚拟机","children":[]},{"level":2,"title":"9.虚拟机重命名","slug":"_9-虚拟机重命名","link":"#_9-虚拟机重命名","children":[]},{"level":2,"title":"10.主机挂起","slug":"_10-主机挂起","link":"#_10-主机挂起","children":[]},{"level":2,"title":"11.恢复主机","slug":"_11-恢复主机","link":"#_11-恢复主机","children":[]},{"level":2,"title":"12.kvm虚拟机开机启动","slug":"_12-kvm虚拟机开机启动","link":"#_12-kvm虚拟机开机启动","children":[]},{"level":2,"title":"13.小项目：","slug":"_13-小项目：","link":"#_13-小项目：","children":[{"level":3,"title":"13.1.停止要迁移的虚拟机","slug":"_13-1-停止要迁移的虚拟机","link":"#_13-1-停止要迁移的虚拟机","children":[]},{"level":3,"title":"13.2.创建数据目录并移动磁盘文件","slug":"_13-2-创建数据目录并移动磁盘文件","link":"#_13-2-创建数据目录并移动磁盘文件","children":[]},{"level":3,"title":"13.3.使用edit命令修改配置文件","slug":"_13-3-使用edit命令修改配置文件","link":"#_13-3-使用edit命令修改配置文件","children":[]},{"level":3,"title":"13.4.启动虚拟机","slug":"_13-4-启动虚拟机","link":"#_13-4-启动虚拟机","children":[]}]},{"level":2,"title":"1.VNC","slug":"_1-vnc","link":"#_1-vnc","children":[]},{"level":2,"title":"2.SSH","slug":"_2-ssh","link":"#_2-ssh","children":[]},{"level":2,"title":"3.console显示","slug":"_3-console显示","link":"#_3-console显示","children":[]},{"level":2,"title":"1.虚拟机磁盘格式介绍","slug":"_1-虚拟机磁盘格式介绍","link":"#_1-虚拟机磁盘格式介绍","children":[]},{"level":2,"title":"2.查看磁盘信息","slug":"_2-查看磁盘信息","link":"#_2-查看磁盘信息","children":[]},{"level":2,"title":"3.创建磁盘","slug":"_3-创建磁盘","link":"#_3-创建磁盘","children":[]},{"level":2,"title":"4.查看磁盘信息","slug":"_4-查看磁盘信息","link":"#_4-查看磁盘信息","children":[]},{"level":2,"title":"5.调整磁盘容量: 只能加不能减","slug":"_5-调整磁盘容量-只能加不能减","link":"#_5-调整磁盘容量-只能加不能减","children":[]},{"level":2,"title":"6.磁盘格式转换","slug":"_6-磁盘格式转换","link":"#_6-磁盘格式转换","children":[{"level":3,"title":"6.1.将虚拟机关机","slug":"_6-1-将虚拟机关机","link":"#_6-1-将虚拟机关机","children":[]},{"level":3,"title":"6.2.转换磁盘格式","slug":"_6-2-转换磁盘格式","link":"#_6-2-转换磁盘格式","children":[]},{"level":3,"title":"6.3.编辑配置文件修改为qcow2格式","slug":"_6-3-编辑配置文件修改为qcow2格式","link":"#_6-3-编辑配置文件修改为qcow2格式","children":[]},{"level":3,"title":"6.4.重新启动","slug":"_6-4-重新启动","link":"#_6-4-重新启动","children":[]}]},{"level":2,"title":"1.查看快照","slug":"_1-查看快照","link":"#_1-查看快照","children":[]},{"level":2,"title":"2.创建快照","slug":"_2-创建快照","link":"#_2-创建快照","children":[]},{"level":2,"title":"3.恢复快照","slug":"_3-恢复快照","link":"#_3-恢复快照","children":[]},{"level":2,"title":"4.删除快照","slug":"_4-删除快照","link":"#_4-删除快照","children":[]},{"level":2,"title":"1.完整克隆","slug":"_1-完整克隆","link":"#_1-完整克隆","children":[]},{"level":2,"title":"2.链接克隆","slug":"_2-链接克隆","link":"#_2-链接克隆","children":[{"level":3,"title":"2.1 生成虚拟机磁盘文件","slug":"_2-1-生成虚拟机磁盘文件","link":"#_2-1-生成虚拟机磁盘文件","children":[]},{"level":3,"title":"2.2 查看磁盘信息","slug":"_2-2-查看磁盘信息","link":"#_2-2-查看磁盘信息","children":[]},{"level":3,"title":"2.3 生成虚拟机配置文件","slug":"_2-3-生成虚拟机配置文件","link":"#_2-3-生成虚拟机配置文件","children":[]},{"level":3,"title":"2.3 导入配置文件","slug":"_2-3-导入配置文件","link":"#_2-3-导入配置文件","children":[]},{"level":3,"title":"2.4 启动虚拟机","slug":"_2-4-启动虚拟机","link":"#_2-4-启动虚拟机","children":[]}]},{"level":2,"title":"1.创建桥接网卡","slug":"_1-创建桥接网卡","link":"#_1-创建桥接网卡","children":[]},{"level":2,"title":"2.连接克隆新磁盘","slug":"_2-连接克隆新磁盘","link":"#_2-连接克隆新磁盘","children":[]},{"level":2,"title":"3.创建新虚拟机","slug":"_3-创建新虚拟机","link":"#_3-创建新虚拟机","children":[]},{"level":2,"title":"4.登录虚拟机查看网卡信息","slug":"_4-登录虚拟机查看网卡信息","link":"#_4-登录虚拟机查看网卡信息","children":[]},{"level":2,"title":"5.在其他主机ping测试","slug":"_5-在其他主机ping测试","link":"#_5-在其他主机ping测试","children":[]},{"level":2,"title":"1.热添加硬盘","slug":"_1-热添加硬盘","link":"#_1-热添加硬盘","children":[{"level":3,"title":"1.1 创建磁盘","slug":"_1-1-创建磁盘","link":"#_1-1-创建磁盘","children":[]},{"level":3,"title":"1.2 临时生效添加","slug":"_1-2-临时生效添加","link":"#_1-2-临时生效添加","children":[]},{"level":3,"title":"1.3 虚拟机格式化并挂载","slug":"_1-3-虚拟机格式化并挂载","link":"#_1-3-虚拟机格式化并挂载","children":[]},{"level":3,"title":"1.4 永久生效添加","slug":"_1-4-永久生效添加","link":"#_1-4-永久生效添加","children":[]}]},{"level":2,"title":"2.剥离磁盘","slug":"_2-剥离磁盘","link":"#_2-剥离磁盘","children":[{"level":3,"title":"2.1 临时剥离","slug":"_2-1-临时剥离","link":"#_2-1-临时剥离","children":[]},{"level":3,"title":"2.2 永久剥离","slug":"_2-2-永久剥离","link":"#_2-2-永久剥离","children":[]}]},{"level":2,"title":"3.调整磁盘大小","slug":"_3-调整磁盘大小","link":"#_3-调整磁盘大小","children":[{"level":3,"title":"3.1 调整磁盘大小","slug":"_3-1-调整磁盘大小","link":"#_3-1-调整磁盘大小","children":[]},{"level":3,"title":"3.2 添加到虚拟机并查看","slug":"_3-2-添加到虚拟机并查看","link":"#_3-2-添加到虚拟机并查看","children":[]},{"level":3,"title":"3.3 调整磁盘信息","slug":"_3-3-调整磁盘信息","link":"#_3-3-调整磁盘信息","children":[]}]},{"level":2,"title":"1.临时添加","slug":"_1-临时添加","link":"#_1-临时添加","children":[]},{"level":2,"title":"2.永久生效","slug":"_2-永久生效","link":"#_2-永久生效","children":[]},{"level":2,"title":"3,临时剥离","slug":"_3-临时剥离","link":"#_3-临时剥离","children":[]},{"level":2,"title":"4.永久剥离","slug":"_4-永久剥离","link":"#_4-永久剥离","children":[]},{"level":2,"title":"1.创建虚拟机时直接添加最大内存参数","slug":"_1-创建虚拟机时直接添加最大内存参数","link":"#_1-创建虚拟机时直接添加最大内存参数","children":[]},{"level":2,"title":"2.如果创建虚拟机的时候没有设置最大内存限制，执行如下操作添加配置","slug":"_2-如果创建虚拟机的时候没有设置最大内存限制，执行如下操作添加配置","link":"#_2-如果创建虚拟机的时候没有设置最大内存限制，执行如下操作添加配置","children":[]},{"level":2,"title":"3.临时添加","slug":"_3-临时添加","link":"#_3-临时添加","children":[]},{"level":2,"title":"4.永久增大内存","slug":"_4-永久增大内存","link":"#_4-永久增大内存","children":[]},{"level":2,"title":"1.编辑配置文件","slug":"_1-编辑配置文件","link":"#_1-编辑配置文件","children":[]},{"level":2,"title":"2.添加cpu核数","slug":"_2-添加cpu核数","link":"#_2-添加cpu核数","children":[]},{"level":2,"title":"3.永久添加cpu核数","slug":"_3-永久添加cpu核数","link":"#_3-永久添加cpu核数","children":[]}],"relativePath":"pages/posts/KVM-未完.md","path":"/Users/vlinux/vlinux/blog/valaxy/vlinux.github.io/pages/posts/KVM-未完.md","lastUpdated":1671091756000}'),C={name:"pages/posts/KVM-未完.md",data(){return{data:a,frontmatter:a.frontmatter}},setup(){p("pageData",a)}},y=s("h1",{id:"第1章-kvm介绍",tabindex:"-1"},[l("第1章 KVM介绍 "),s("a",{class:"header-anchor",href:"#第1章-kvm介绍","aria-hidden":"true"},"#")],-1),h=s("h1",{id:"第2章-创建一个kvm虚拟机",tabindex:"-1"},[l("第2章 创建一个KVM虚拟机 "),s("a",{class:"header-anchor",href:"#第2章-创建一个kvm虚拟机","aria-hidden":"true"},"#")],-1),A=s("h2",{id:"_1-vm虚拟机开启cpu虚拟化功能",tabindex:"-1"},[l("1.VM虚拟机开启CPU虚拟化功能 "),s("a",{class:"header-anchor",href:"#_1-vm虚拟机开启cpu虚拟化功能","aria-hidden":"true"},"#")],-1),_=s("p",null,"设置-处理器-虚拟化",-1),F=s("h2",{id:"_2-安装软件",tabindex:"-1"},[l("2.安装软件 "),s("a",{class:"header-anchor",href:"#_2-安装软件","aria-hidden":"true"},"#")],-1),u=s("div",{class:"language-bash"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"yum"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"install"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"libvirt"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"virt-install"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"qemu-kvm"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-y")]),l(`
`),s("span",{class:"line"})])])],-1),v=s("h2",{id:"_3-创建虚拟机",tabindex:"-1"},[l("3.创建虚拟机 "),s("a",{class:"header-anchor",href:"#_3-创建虚拟机","aria-hidden":"true"},"#")],-1),g=s("div",{class:"language-go"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"systemctl start libvirtd"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#A6ACCD"}},"service ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"systemctl status libvirtd"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#A6ACCD"}},"service")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virt"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"install "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"virt"),s("span",{style:{color:"#89DDFF"}},"-type"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"kvm"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"os"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"type"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}},"linux "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"os"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"variant rhel7 "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"name centos7 "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"memory "),s("span",{style:{color:"#F78C6C"}},"1024"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"vcpus "),s("span",{style:{color:"#F78C6C"}},"1"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"disk "),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"opt"),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"centos7"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#A6ACCD"}},"raw"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}},"format"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}},"raw"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}},"size"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#F78C6C"}},"10"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"cdrom "),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"opt"),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"CentOS"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#F78C6C"}},"7"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"x86_64"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"DVD"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"1810.iso "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"network network"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"default"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"graphics vnc"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}},"listen"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}},"0.0.0.0 "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"noautoconsole")]),l(`
`),s("span",{class:"line"})])])],-1),k=s("h2",{id:"_4-连接虚拟机",tabindex:"-1"},[l("4.连接虚拟机 "),s("a",{class:"header-anchor",href:"#_4-连接虚拟机","aria-hidden":"true"},"#")],-1),b=s("p",null,"安装VNC工具连接",-1),m=s("h1",{id:"第3章-kvm常用管理命令",tabindex:"-1"},[l("第3章 KVM常用管理命令 "),s("a",{class:"header-anchor",href:"#第3章-kvm常用管理命令","aria-hidden":"true"},"#")],-1),f=s("h2",{id:"_1-查看虚拟机",tabindex:"-1"},[l("1.查看虚拟机 "),s("a",{class:"header-anchor",href:"#_1-查看虚拟机","aria-hidden":"true"},"#")],-1),B=s("div",{class:"language-cpp"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh list")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh list "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"all")]),l(`
`),s("span",{class:"line"})])])],-1),x=s("h2",{id:"_2-启动虚拟机",tabindex:"-1"},[l("2.启动虚拟机 "),s("a",{class:"header-anchor",href:"#_2-启动虚拟机","aria-hidden":"true"},"#")],-1),E=s("div",{class:"language-bash"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"virsh"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"start"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"centos7")]),l(`
`),s("span",{class:"line"})])])],-1),w=s("h2",{id:"_3-重启虚拟机",tabindex:"-1"},[l("3.重启虚拟机 "),s("a",{class:"header-anchor",href:"#_3-重启虚拟机","aria-hidden":"true"},"#")],-1),q=s("div",{class:"language-bash"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"virsh"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"reboot"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"centos7")]),l(`
`),s("span",{class:"line"})])])],-1),V=s("h2",{id:"_4-关闭虚拟机",tabindex:"-1"},[l("4.关闭虚拟机 "),s("a",{class:"header-anchor",href:"#_4-关闭虚拟机","aria-hidden":"true"},"#")],-1),M=s("div",{class:"language-bash"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"virsh"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"shutdown"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"centos7")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"virsh"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"destroy"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"centos7")]),l(`
`),s("span",{class:"line"})])])],-1),K=s("h2",{id:"_5-查看配置文件",tabindex:"-1"},[l("5.查看配置文件 "),s("a",{class:"header-anchor",href:"#_5-查看配置文件","aria-hidden":"true"},"#")],-1),$=s("div",{class:"language-bash"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"virsh"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"dumpxml"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"centos7")]),l(`
`),s("span",{class:"line"})])])],-1),S=s("h2",{id:"_6-导出配置文件",tabindex:"-1"},[l("6.导出配置文件 "),s("a",{class:"header-anchor",href:"#_6-导出配置文件","aria-hidden":"true"},"#")],-1),U=s("div",{class:"language-css"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh dumpxml centos7 "),s("span",{style:{color:"#89DDFF"}},">"),s("span",{style:{color:"#A6ACCD"}}," centos7"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#FFCB6B"}},"xml")]),l(`
`),s("span",{class:"line"})])])],-1),N=s("h2",{id:"_7-删除虚拟机",tabindex:"-1"},[l("7.删除虚拟机 "),s("a",{class:"header-anchor",href:"#_7-删除虚拟机","aria-hidden":"true"},"#")],-1),O=s("div",{class:"language-bash"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"virsh"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"destroy"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"centos7")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"virsh"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"undefine"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"centos7")]),l(`
`),s("span",{class:"line"})])])],-1),P=s("h2",{id:"_8-导入虚拟机",tabindex:"-1"},[l("8.导入虚拟机 "),s("a",{class:"header-anchor",href:"#_8-导入虚拟机","aria-hidden":"true"},"#")],-1),j=s("div",{class:"language-css"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh define centos7"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#FFCB6B"}},"xml")]),l(`
`),s("span",{class:"line"})])])],-1),T=s("h2",{id:"_9-虚拟机重命名",tabindex:"-1"},[l("9.虚拟机重命名 "),s("a",{class:"header-anchor",href:"#_9-虚拟机重命名","aria-hidden":"true"},"#")],-1),z=s("div",{class:"language-bash"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"virsh"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"domrename"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"panghu"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"shouhu")]),l(`
`),s("span",{class:"line"})])])],-1),G=s("h2",{id:"_10-主机挂起",tabindex:"-1"},[l("10.主机挂起 "),s("a",{class:"header-anchor",href:"#_10-主机挂起","aria-hidden":"true"},"#")],-1),H=s("div",{class:"language-bash"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"virsh"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"suspend"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"centos7")]),l(`
`),s("span",{class:"line"})])])],-1),J=s("h2",{id:"_11-恢复主机",tabindex:"-1"},[l("11.恢复主机 "),s("a",{class:"header-anchor",href:"#_11-恢复主机","aria-hidden":"true"},"#")],-1),L=s("div",{class:"language-bash"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"virsh"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"resume"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"centos7")]),l(`
`),s("span",{class:"line"})])])],-1),Z=s("h2",{id:"_12-kvm虚拟机开机启动",tabindex:"-1"},[l("12.kvm虚拟机开机启动 "),s("a",{class:"header-anchor",href:"#_12-kvm虚拟机开机启动","aria-hidden":"true"},"#")],-1),R=s("div",{class:"language-bash"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"virsh"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"autostart"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"centos7")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"ll"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"/etc/libvirt/qemu/autostart/")]),l(`
`),s("span",{class:"line"})])])],-1),I=s("h2",{id:"_13-小项目：",tabindex:"-1"},[l("13.小项目： "),s("a",{class:"header-anchor",href:"#_13-小项目：","aria-hidden":"true"},"#")],-1),Q=s("p",null,"把虚拟机磁盘迁移到/data目录并且启动",-1),W=s("h3",{id:"_13-1-停止要迁移的虚拟机",tabindex:"-1"},[l("13.1.停止要迁移的虚拟机 "),s("a",{class:"header-anchor",href:"#_13-1-停止要迁移的虚拟机","aria-hidden":"true"},"#")],-1),X=s("div",{class:"language-bash"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"virsh"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"shutdown"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"centos7")]),l(`
`),s("span",{class:"line"})])])],-1),Y=s("h3",{id:"_13-2-创建数据目录并移动磁盘文件",tabindex:"-1"},[l("13.2.创建数据目录并移动磁盘文件 "),s("a",{class:"header-anchor",href:"#_13-2-创建数据目录并移动磁盘文件","aria-hidden":"true"},"#")],-1),ss=s("div",{class:"language-kotlin"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"mkdir "),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#C792EA"}},"data"),s("span",{style:{color:"#A6ACCD"}}," ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"mv "),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"opt"),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"centos7"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#A6ACCD"}},"raw "),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#C792EA"}},"data"),s("span",{style:{color:"#A6ACCD"}}," ")]),l(`
`),s("span",{class:"line"})])])],-1),ls=s("h3",{id:"_13-3-使用edit命令修改配置文件",tabindex:"-1"},[l("13.3.使用edit命令修改配置文件 "),s("a",{class:"header-anchor",href:"#_13-3-使用edit命令修改配置文件","aria-hidden":"true"},"#")],-1),es=s("div",{class:"language-bash"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"virsh"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"edit"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"centos7")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"--------------------")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#82AAFF"}},"source"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"file="),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"/data/centos7.raw"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#A6ACCD"}},"/"),s("span",{style:{color:"#89DDFF"}},">")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"--------------------")]),l(`
`),s("span",{class:"line"})])])],-1),ns=s("h3",{id:"_13-4-启动虚拟机",tabindex:"-1"},[l("13.4.启动虚拟机 "),s("a",{class:"header-anchor",href:"#_13-4-启动虚拟机","aria-hidden":"true"},"#")],-1),os=s("div",{class:"language-cpp"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh start centos7")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh list ")]),l(`
`),s("span",{class:"line"})])])],-1),as=s("h1",{id:"第4章-kvm连接方式",tabindex:"-1"},[l("第4章 KVM连接方式 "),s("a",{class:"header-anchor",href:"#第4章-kvm连接方式","aria-hidden":"true"},"#")],-1),cs=s("h2",{id:"_1-vnc",tabindex:"-1"},[l("1.VNC "),s("a",{class:"header-anchor",href:"#_1-vnc","aria-hidden":"true"},"#")],-1),ts=s("div",{class:"language-bash"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"virsh"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"vncdisplay"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"centos7")]),l(`
`),s("span",{class:"line"})])])],-1),rs=s("h2",{id:"_2-ssh",tabindex:"-1"},[l("2.SSH "),s("a",{class:"header-anchor",href:"#_2-ssh","aria-hidden":"true"},"#")],-1),is=s("div",{class:"language-css"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"ssh 192"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#FFCB6B"}},"168"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#FFCB6B"}},"122"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#FFCB6B"}},"77")]),l(`
`),s("span",{class:"line"})])])],-1),ps=s("h2",{id:"_3-console显示",tabindex:"-1"},[l("3.console显示 "),s("a",{class:"header-anchor",href:"#_3-console显示","aria-hidden":"true"},"#")],-1),Ds=s("p",null,"登录进需要开启console的虚拟机并添加参数",-1),ds=s("div",{class:"language-jsx"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"ssh "),s("span",{style:{color:"#F78C6C"}},"192.168"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F78C6C"}},"122.77")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"grubby "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"update"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"kernel"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}},"ALL "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"args"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"console=ttyS0,115200n8"),s("span",{style:{color:"#89DDFF"}},'"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"grep "),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"115200"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"boot"),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"grub2"),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"grub"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#A6ACCD"}},"cfg ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"reboot")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh destroy centos7")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh start centos7")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh console centos7")]),l(`
`),s("span",{class:"line"})])])],-1),Cs=s("p",null,"退出",-1),ys=s("div",{class:"language-bash"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"ctrl"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"+"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"]")]),l(`
`),s("span",{class:"line"})])])],-1),hs=s("h1",{id:"第5章-kvm磁盘管理",tabindex:"-1"},[l("第5章 KVM磁盘管理 "),s("a",{class:"header-anchor",href:"#第5章-kvm磁盘管理","aria-hidden":"true"},"#")],-1),As=s("h2",{id:"_1-虚拟机磁盘格式介绍",tabindex:"-1"},[l("1.虚拟机磁盘格式介绍 "),s("a",{class:"header-anchor",href:"#_1-虚拟机磁盘格式介绍","aria-hidden":"true"},"#")],-1),_s=s("div",{class:"language-bash"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"raw：不支持做快照，性能好")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"qcow2：支持快照，性能不如raw好")]),l(`
`),s("span",{class:"line"})])])],-1),Fs=s("h2",{id:"_2-查看磁盘信息",tabindex:"-1"},[l("2.查看磁盘信息 "),s("a",{class:"header-anchor",href:"#_2-查看磁盘信息","aria-hidden":"true"},"#")],-1),us=s("div",{class:"language-css"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"qemu-img"),s("span",{style:{color:"#A6ACCD"}}," info centos7"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#FFCB6B"}},"raw"),s("span",{style:{color:"#A6ACCD"}}," ")]),l(`
`),s("span",{class:"line"})])])],-1),vs=s("h2",{id:"_3-创建磁盘",tabindex:"-1"},[l("3.创建磁盘 "),s("a",{class:"header-anchor",href:"#_3-创建磁盘","aria-hidden":"true"},"#")],-1),gs=s("div",{class:"language-kotlin"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"qemu"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"img create "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"f qcow2 "),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#C792EA"}},"data"),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"centos7"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#A6ACCD"}},"qcow2 1G")]),l(`
`),s("span",{class:"line"})])])],-1),ks=s("h2",{id:"_4-查看磁盘信息",tabindex:"-1"},[l("4.查看磁盘信息 "),s("a",{class:"header-anchor",href:"#_4-查看磁盘信息","aria-hidden":"true"},"#")],-1),bs=s("div",{class:"language-css"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"qemu-img"),s("span",{style:{color:"#A6ACCD"}}," info centos7"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#FFCB6B"}},"qcow2")]),l(`
`),s("span",{class:"line"})])])],-1),ms=s("h2",{id:"_5-调整磁盘容量-只能加不能减",tabindex:"-1"},[l("5.调整磁盘容量: 只能加不能减 "),s("a",{class:"header-anchor",href:"#_5-调整磁盘容量-只能加不能减","aria-hidden":"true"},"#")],-1),fs=s("div",{class:"language-kotlin"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"qemu"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"img resize "),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#C792EA"}},"data"),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"centos7"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#A6ACCD"}},"qcow2 1T")]),l(`
`),s("span",{class:"line"})])])],-1),Bs=s("h2",{id:"_6-磁盘格式转换",tabindex:"-1"},[l("6.磁盘格式转换 "),s("a",{class:"header-anchor",href:"#_6-磁盘格式转换","aria-hidden":"true"},"#")],-1),xs=s("h3",{id:"_6-1-将虚拟机关机",tabindex:"-1"},[l("6.1.将虚拟机关机 "),s("a",{class:"header-anchor",href:"#_6-1-将虚拟机关机","aria-hidden":"true"},"#")],-1),Es=s("div",{class:"language-bash"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"virsh"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"destroy"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"centos7")]),l(`
`),s("span",{class:"line"})])])],-1),ws=s("h3",{id:"_6-2-转换磁盘格式",tabindex:"-1"},[l("6.2.转换磁盘格式 "),s("a",{class:"header-anchor",href:"#_6-2-转换磁盘格式","aria-hidden":"true"},"#")],-1),qs=s("div",{class:"language-css"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"qemu-img"),s("span",{style:{color:"#A6ACCD"}}," convert -f raw -O qcow2 centos7"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#FFCB6B"}},"raw"),s("span",{style:{color:"#A6ACCD"}}," centos7"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#FFCB6B"}},"qcow2"),s("span",{style:{color:"#A6ACCD"}},"  ")]),l(`
`),s("span",{class:"line"})])])],-1),Vs=s("h3",{id:"_6-3-编辑配置文件修改为qcow2格式",tabindex:"-1"},[l("6.3.编辑配置文件修改为qcow2格式 "),s("a",{class:"header-anchor",href:"#_6-3-编辑配置文件修改为qcow2格式","aria-hidden":"true"},"#")],-1),Ms=s("div",{class:"language-bash"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"virsh"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"edit"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"centos7")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"------------------------------------------")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"      "),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#FFCB6B"}},"driver"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"name="),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"qemu"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"type="),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"qcow2"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#A6ACCD"}},"/"),s("span",{style:{color:"#89DDFF"}},">")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"      "),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#82AAFF"}},"source"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"file="),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"/opt/centos7.qcow2"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#A6ACCD"}},"/"),s("span",{style:{color:"#89DDFF"}},">")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"------------------------------------------")]),l(`
`),s("span",{class:"line"})])])],-1),Ks=s("h3",{id:"_6-4-重新启动",tabindex:"-1"},[l("6.4.重新启动 "),s("a",{class:"header-anchor",href:"#_6-4-重新启动","aria-hidden":"true"},"#")],-1),$s=s("div",{class:"language-jsx"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh start centos7")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh console centos7")]),l(`
`),s("span",{class:"line"})])])],-1),Ss=s("h1",{id:"第6章-kvm快照管理",tabindex:"-1"},[l("第6章 KVM快照管理 "),s("a",{class:"header-anchor",href:"#第6章-kvm快照管理","aria-hidden":"true"},"#")],-1),Us=s("h2",{id:"_1-查看快照",tabindex:"-1"},[l("1.查看快照 "),s("a",{class:"header-anchor",href:"#_1-查看快照","aria-hidden":"true"},"#")],-1),Ns=s("div",{class:"language-cpp"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh snapshot"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"list centos7")]),l(`
`),s("span",{class:"line"})])])],-1),Os=s("h2",{id:"_2-创建快照",tabindex:"-1"},[l("2.创建快照 "),s("a",{class:"header-anchor",href:"#_2-创建快照","aria-hidden":"true"},"#")],-1),Ps=s("div",{class:"language-php"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh snapshot"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"create"),s("span",{style:{color:"#89DDFF"}},"-as"),s("span",{style:{color:"#A6ACCD"}}," centos7 snap1")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh snapshot"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"list centos7")]),l(`
`),s("span",{class:"line"})])])],-1),js=s("h2",{id:"_3-恢复快照",tabindex:"-1"},[l("3.恢复快照 "),s("a",{class:"header-anchor",href:"#_3-恢复快照","aria-hidden":"true"},"#")],-1),Ts=s("div",{class:"language-bash"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"virsh"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"snapshot-revert"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"centos7"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"snap1")]),l(`
`),s("span",{class:"line"})])])],-1),zs=s("h2",{id:"_4-删除快照",tabindex:"-1"},[l("4.删除快照 "),s("a",{class:"header-anchor",href:"#_4-删除快照","aria-hidden":"true"},"#")],-1),Gs=s("div",{class:"language-cpp"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh snapshot"),s("span",{style:{color:"#89DDFF"}},"-delete"),s("span",{style:{color:"#A6ACCD"}}," centos7 snap1")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh snapshot"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"list centos7")]),l(`
`),s("span",{class:"line"})])])],-1),Hs=s("h1",{id:"第7章-kvm克隆虚拟机",tabindex:"-1"},[l("第7章 KVM克隆虚拟机 "),s("a",{class:"header-anchor",href:"#第7章-kvm克隆虚拟机","aria-hidden":"true"},"#")],-1),Js=s("h2",{id:"_1-完整克隆",tabindex:"-1"},[l("1.完整克隆 "),s("a",{class:"header-anchor",href:"#_1-完整克隆","aria-hidden":"true"},"#")],-1),Ls=s("div",{class:"language-php"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh shutdown centos7")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virt"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#F78C6C"}},"clone"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"auto"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#F78C6C"}},"clone"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"o centos7 "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"n centos7"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"backup")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh list "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"all")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh dumpxml web"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"blog"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"backup "),s("span",{style:{color:"#89DDFF"}},"|"),s("span",{style:{color:"#A6ACCD"}},"grep "),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"qcow2"),s("span",{style:{color:"#89DDFF"}},'"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh snapshot"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"list centos7")]),l(`
`),s("span",{class:"line"})])])],-1),Zs=s("h2",{id:"_2-链接克隆",tabindex:"-1"},[l("2.链接克隆 "),s("a",{class:"header-anchor",href:"#_2-链接克隆","aria-hidden":"true"},"#")],-1),Rs=s("h3",{id:"_2-1-生成虚拟机磁盘文件",tabindex:"-1"},[l("2.1 生成虚拟机磁盘文件 "),s("a",{class:"header-anchor",href:"#_2-1-生成虚拟机磁盘文件","aria-hidden":"true"},"#")],-1),Is=s("div",{class:"language-css"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"qemu-img"),s("span",{style:{color:"#A6ACCD"}}," create -f qcow2 -b centos7"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#FFCB6B"}},"qcow2"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"centos7-clone"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#FFCB6B"}},"qcow2"),s("span",{style:{color:"#A6ACCD"}}," ")]),l(`
`),s("span",{class:"line"})])])],-1),Qs=s("h3",{id:"_2-2-查看磁盘信息",tabindex:"-1"},[l("2.2 查看磁盘信息 "),s("a",{class:"header-anchor",href:"#_2-2-查看磁盘信息","aria-hidden":"true"},"#")],-1),Ws=s("div",{class:"language-css"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"qemu-img"),s("span",{style:{color:"#A6ACCD"}}," info "),s("span",{style:{color:"#FFCB6B"}},"centos7-clone"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#FFCB6B"}},"qcow2"),s("span",{style:{color:"#A6ACCD"}}," ")]),l(`
`),s("span",{class:"line"})])])],-1),Xs=s("h3",{id:"_2-3-生成虚拟机配置文件",tabindex:"-1"},[l("2.3 生成虚拟机配置文件 "),s("a",{class:"header-anchor",href:"#_2-3-生成虚拟机配置文件","aria-hidden":"true"},"#")],-1),Ys=s("div",{class:"language-php"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh dumpxml centos7 "),s("span",{style:{color:"#89DDFF"}},">"),s("span",{style:{color:"#A6ACCD"}}," centos7"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#F78C6C"}},"clone"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#A6ACCD"}},"xml")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"sed "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"i "),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"/uuid/d"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#A6ACCD"}}," centos7"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#F78C6C"}},"clone"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#A6ACCD"}},"xml")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"sed "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"i "),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"/mac address/d"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#A6ACCD"}}," centos7"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#F78C6C"}},"clone"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#A6ACCD"}},"xml")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"sed "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"i "),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"s#centos7.qcow2#centos7-clone.qcow2#g"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#A6ACCD"}}," centos7"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#F78C6C"}},"clone"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#A6ACCD"}},"xml")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"sed "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"i "),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"/\\<nam/s#centos7#centos7-clone#g"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#A6ACCD"}}," centos7"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#F78C6C"}},"clone"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#A6ACCD"}},"xml")]),l(`
`),s("span",{class:"line"})])])],-1),sl=s("h3",{id:"_2-3-导入配置文件",tabindex:"-1"},[l("2.3 导入配置文件 "),s("a",{class:"header-anchor",href:"#_2-3-导入配置文件","aria-hidden":"true"},"#")],-1),ll=s("div",{class:"language-php"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh define centos7"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#F78C6C"}},"clone"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#A6ACCD"}},"xml ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh list "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"all ")]),l(`
`),s("span",{class:"line"})])])],-1),el=s("h3",{id:"_2-4-启动虚拟机",tabindex:"-1"},[l("2.4 启动虚拟机 "),s("a",{class:"header-anchor",href:"#_2-4-启动虚拟机","aria-hidden":"true"},"#")],-1),nl=s("div",{class:"language-php"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh start centos7"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#F78C6C"}},"clone")]),l(`
`),s("span",{class:"line"})])])],-1),ol=s("h1",{id:"第8章-kvm桥接网络",tabindex:"-1"},[l("第8章 KVM桥接网络 "),s("a",{class:"header-anchor",href:"#第8章-kvm桥接网络","aria-hidden":"true"},"#")],-1),al=s("h2",{id:"_1-创建桥接网卡",tabindex:"-1"},[l("1.创建桥接网卡 "),s("a",{class:"header-anchor",href:"#_1-创建桥接网卡","aria-hidden":"true"},"#")],-1),cl=s("div",{class:"language-bash"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"virsh"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"iface-bridge"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"eth0"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"br0")]),l(`
`),s("span",{class:"line"})])])],-1),tl=s("h2",{id:"_2-连接克隆新磁盘",tabindex:"-1"},[l("2.连接克隆新磁盘 "),s("a",{class:"header-anchor",href:"#_2-连接克隆新磁盘","aria-hidden":"true"},"#")],-1),rl=s("div",{class:"language-bash"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#82AAFF"}},"cd"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"/opt")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"qemu-img"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"create"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-f"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"qcow2"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-b"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"centos7.qcow2"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"bridge.qcow2")]),l(`
`),s("span",{class:"line"})])])],-1),il=s("h2",{id:"_3-创建新虚拟机",tabindex:"-1"},[l("3.创建新虚拟机 "),s("a",{class:"header-anchor",href:"#_3-创建新虚拟机","aria-hidden":"true"},"#")],-1),pl=s("div",{class:"language-go"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virt"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"install "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"virt"),s("span",{style:{color:"#89DDFF"}},"-type"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"kvm"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"os"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"type"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}},"linux "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"os"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"variant rhel7 "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"name centos7"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"bridge "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"memory "),s("span",{style:{color:"#F78C6C"}},"1024"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"vcpus "),s("span",{style:{color:"#F78C6C"}},"1"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"disk "),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"opt"),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"bridge"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#A6ACCD"}},"qcow2 "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"boot hd "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"network bridge"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}},"br0 "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"graphics vnc"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}},"listen"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}},"0.0.0.0 "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"noautoconsole")]),l(`
`),s("span",{class:"line"})])])],-1),Dl=s("h2",{id:"_4-登录虚拟机查看网卡信息",tabindex:"-1"},[l("4.登录虚拟机查看网卡信息 "),s("a",{class:"header-anchor",href:"#_4-登录虚拟机查看网卡信息","aria-hidden":"true"},"#")],-1),dl=s("div",{class:"language-jsx"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh console centos7"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"bridge")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"ip a")]),l(`
`),s("span",{class:"line"})])])],-1),Cl=s("h2",{id:"_5-在其他主机ping测试",tabindex:"-1"},[l("5.在其他主机ping测试 "),s("a",{class:"header-anchor",href:"#_5-在其他主机ping测试","aria-hidden":"true"},"#")],-1),yl=s("div",{class:"language-bash"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"ping"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"xxxx")]),l(`
`),s("span",{class:"line"})])])],-1),hl=s("h1",{id:"第9章-kvm虚拟机热添加磁盘",tabindex:"-1"},[l("第9章 KVM虚拟机热添加磁盘 "),s("a",{class:"header-anchor",href:"#第9章-kvm虚拟机热添加磁盘","aria-hidden":"true"},"#")],-1),Al=s("h2",{id:"_1-热添加硬盘",tabindex:"-1"},[l("1.热添加硬盘 "),s("a",{class:"header-anchor",href:"#_1-热添加硬盘","aria-hidden":"true"},"#")],-1),_l=s("h3",{id:"_1-1-创建磁盘",tabindex:"-1"},[l("1.1 创建磁盘 "),s("a",{class:"header-anchor",href:"#_1-1-创建磁盘","aria-hidden":"true"},"#")],-1),Fl=s("div",{class:"language-csharp"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"qemu"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"img create "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"f qcow2 centos7"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"add"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#A6ACCD"}},"qcow2 10G")]),l(`
`),s("span",{class:"line"})])])],-1),ul=s("h3",{id:"_1-2-临时生效添加",tabindex:"-1"},[l("1.2 临时生效添加 "),s("a",{class:"header-anchor",href:"#_1-2-临时生效添加","aria-hidden":"true"},"#")],-1),vl=s("div",{class:"language-csharp"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh attach"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"disk centos7 "),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"opt"),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"centos7"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"add"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#A6ACCD"}},"qcow2 vdb "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"subdriver qcow2")]),l(`
`),s("span",{class:"line"})])])],-1),gl=s("h3",{id:"_1-3-虚拟机格式化并挂载",tabindex:"-1"},[l("1.3 虚拟机格式化并挂载 "),s("a",{class:"header-anchor",href:"#_1-3-虚拟机格式化并挂载","aria-hidden":"true"},"#")],-1),kl=s("div",{class:"language-jsx"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh console centos7")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"fdisk "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"l")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"mkfs"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#A6ACCD"}},"xfs "),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"dev"),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"vdb")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"mount  "),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"dev"),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"vdb  "),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"mnt"),s("span",{style:{color:"#89DDFF"}},"/")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"df "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"h")]),l(`
`),s("span",{class:"line"})])])],-1),bl=s("h3",{id:"_1-4-永久生效添加",tabindex:"-1"},[l("1.4 永久生效添加 "),s("a",{class:"header-anchor",href:"#_1-4-永久生效添加","aria-hidden":"true"},"#")],-1),ml=s("div",{class:"language-csharp"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh attach"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"disk centos7 "),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"opt"),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"centos7"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"add"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#A6ACCD"}},"qcow2 vdb "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"subdriver qcow2")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh attach"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"disk centos7 "),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"opt"),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"centos7"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"add"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#A6ACCD"}},"qcow2 vdb "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"subdriver qcow2 "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"config")]),l(`
`),s("span",{class:"line"})])])],-1),fl=s("h2",{id:"_2-剥离磁盘",tabindex:"-1"},[l("2.剥离磁盘 "),s("a",{class:"header-anchor",href:"#_2-剥离磁盘","aria-hidden":"true"},"#")],-1),Bl=s("h3",{id:"_2-1-临时剥离",tabindex:"-1"},[l("2.1 临时剥离 "),s("a",{class:"header-anchor",href:"#_2-1-临时剥离","aria-hidden":"true"},"#")],-1),xl=s("div",{class:"language-bash"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"virsh"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"detach-disk"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"centos7"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"vdb")]),l(`
`),s("span",{class:"line"})])])],-1),El=s("h3",{id:"_2-2-永久剥离",tabindex:"-1"},[l("2.2 永久剥离 "),s("a",{class:"header-anchor",href:"#_2-2-永久剥离","aria-hidden":"true"},"#")],-1),wl=s("div",{class:"language-bash"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"virsh"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"detach-disk"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"centos7"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"vdb")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"virsh"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"detach-disk"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"centos7"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"vdb"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"--config")]),l(`
`),s("span",{class:"line"})])])],-1),ql=s("h2",{id:"_3-调整磁盘大小",tabindex:"-1"},[l("3.调整磁盘大小 "),s("a",{class:"header-anchor",href:"#_3-调整磁盘大小","aria-hidden":"true"},"#")],-1),Vl=s("h3",{id:"_3-1-调整磁盘大小",tabindex:"-1"},[l("3.1 调整磁盘大小 "),s("a",{class:"header-anchor",href:"#_3-1-调整磁盘大小","aria-hidden":"true"},"#")],-1),Ml=s("div",{class:"language-csharp"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"qemu"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"img info "),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"opt"),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"centos7"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"add"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#A6ACCD"}},"qcow2")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"qemu"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"img resize "),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"opt"),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"centos7"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"add"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#A6ACCD"}},"qcow2 "),s("span",{style:{color:"#89DDFF"}},"+"),s("span",{style:{color:"#A6ACCD"}},"10G")]),l(`
`),s("span",{class:"line"})])])],-1),Kl=s("h3",{id:"_3-2-添加到虚拟机并查看",tabindex:"-1"},[l("3.2 添加到虚拟机并查看 "),s("a",{class:"header-anchor",href:"#_3-2-添加到虚拟机并查看","aria-hidden":"true"},"#")],-1),$l=s("div",{class:"language-csharp"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh attach"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"disk centos7 "),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"opt"),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"centos7"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"add"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#A6ACCD"}},"qcow2 vdb "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"subdriver qcow2")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh console centos7")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"fdisk "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"l "),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"dev"),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"vdb")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"mount "),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"dev"),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"vdb "),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"mnt"),s("span",{style:{color:"#89DDFF"}},"/")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"df "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"h"),s("span",{style:{color:"#89DDFF"}},"|"),s("span",{style:{color:"#A6ACCD"}},"tail "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#F78C6C"}},"1"),s("span",{style:{color:"#A6ACCD"}}," ")]),l(`
`),s("span",{class:"line"})])])],-1),Sl=s("h3",{id:"_3-3-调整磁盘信息",tabindex:"-1"},[l("3.3 调整磁盘信息 "),s("a",{class:"header-anchor",href:"#_3-3-调整磁盘信息","aria-hidden":"true"},"#")],-1),Ul=s("div",{class:"language-bash"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"xfs_growfs"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"/dev/vdb")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"df"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-h"),s("span",{style:{color:"#89DDFF"}},"|"),s("span",{style:{color:"#FFCB6B"}},"tail"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"-1")]),l(`
`),s("span",{class:"line"})])])],-1),Nl=s("h1",{id:"第10章-kvm热添加网卡",tabindex:"-1"},[l("第10章 KVM热添加网卡 "),s("a",{class:"header-anchor",href:"#第10章-kvm热添加网卡","aria-hidden":"true"},"#")],-1),Ol=s("h2",{id:"_1-临时添加",tabindex:"-1"},[l("1.临时添加 "),s("a",{class:"header-anchor",href:"#_1-临时添加","aria-hidden":"true"},"#")],-1),Pl=s("div",{class:"language-css"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh "),s("span",{style:{color:"#FFCB6B"}},"attach-interface"),s("span",{style:{color:"#A6ACCD"}}," centos7 --type bridge --mac 52:54:00:b1:b5:8a --source br0 --model virtio detachinterface")]),l(`
`),s("span",{class:"line"})])])],-1),jl=s("h2",{id:"_2-永久生效",tabindex:"-1"},[l("2.永久生效 "),s("a",{class:"header-anchor",href:"#_2-永久生效","aria-hidden":"true"},"#")],-1),Tl=s("div",{class:"language-css"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh "),s("span",{style:{color:"#FFCB6B"}},"attach-interface"),s("span",{style:{color:"#A6ACCD"}}," centos7 --type bridge --mac 52:54:00:b1:b5:8a --source br0 --model virtio detachinterface --config ")]),l(`
`),s("span",{class:"line"})])])],-1),zl=s("h2",{id:"_3-临时剥离",tabindex:"-1"},[l("3,临时剥离 "),s("a",{class:"header-anchor",href:"#_3-临时剥离","aria-hidden":"true"},"#")],-1),Gl=s("div",{class:"language-kotlin"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh detach"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#C792EA"}},"interface"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"centos7"),s("span",{style:{color:"#A6ACCD"}}," bridge")]),l(`
`),s("span",{class:"line"})])])],-1),Hl=s("h2",{id:"_4-永久剥离",tabindex:"-1"},[l("4.永久剥离 "),s("a",{class:"header-anchor",href:"#_4-永久剥离","aria-hidden":"true"},"#")],-1),Jl=s("div",{class:"language-kotlin"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh detach"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#C792EA"}},"interface"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"centos7"),s("span",{style:{color:"#A6ACCD"}}," bridge")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh detach"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#C792EA"}},"interface"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"centos7"),s("span",{style:{color:"#A6ACCD"}}," bridge "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"config")]),l(`
`),s("span",{class:"line"})])])],-1),Ll=s("h1",{id:"第11章-kvm热添加内存",tabindex:"-1"},[l("第11章 KVM热添加内存 "),s("a",{class:"header-anchor",href:"#第11章-kvm热添加内存","aria-hidden":"true"},"#")],-1),Zl=s("h2",{id:"_1-创建虚拟机时直接添加最大内存参数",tabindex:"-1"},[l("1.创建虚拟机时直接添加最大内存参数 "),s("a",{class:"header-anchor",href:"#_1-创建虚拟机时直接添加最大内存参数","aria-hidden":"true"},"#")],-1),Rl=s("div",{class:"language-go"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virt"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"install "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"virt"),s("span",{style:{color:"#89DDFF"}},"-type"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"kvm"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"os"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"type"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}},"linux "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"os"),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"variant rhel7 "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"name centos7 "),s("span",{style:{color:"#89DDFF"}},"--")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"memory 512"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}},"maxmemory"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#F78C6C"}},"2048"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"vcpus "),s("span",{style:{color:"#F78C6C"}},"1"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"disk "),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"opt"),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}},"centos7"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#A6ACCD"}},"qcow2 "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"boot hd "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"network bridge"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}},"br0 "),s("span",{style:{color:"#89DDFF"}},"--")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"graphics vnc"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}},"listen"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}},"0.0.0.0 "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"noautoconsole")]),l(`
`),s("span",{class:"line"})])])],-1),Il=s("h2",{id:"_2-如果创建虚拟机的时候没有设置最大内存限制，执行如下操作添加配置",tabindex:"-1"},[l("2.如果创建虚拟机的时候没有设置最大内存限制，执行如下操作添加配置 "),s("a",{class:"header-anchor",href:"#_2-如果创建虚拟机的时候没有设置最大内存限制，执行如下操作添加配置","aria-hidden":"true"},"#")],-1),Ql=s("div",{class:"language-cpp"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh destroy centos7")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh setmaxmem centos7 "),s("span",{style:{color:"#F78C6C"}},"4096M")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh start centos7 ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh console centos7")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"free "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"h ")]),l(`
`),s("span",{class:"line"})])])],-1),Wl=s("h2",{id:"_3-临时添加",tabindex:"-1"},[l("3.临时添加 "),s("a",{class:"header-anchor",href:"#_3-临时添加","aria-hidden":"true"},"#")],-1),Xl=s("div",{class:"language-cpp"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh setmem centos7 "),s("span",{style:{color:"#F78C6C"}},"2048M"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"live ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh console centos7")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"free "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"h ")]),l(`
`),s("span",{class:"line"})])])],-1),Yl=s("h2",{id:"_4-永久增大内存",tabindex:"-1"},[l("4.永久增大内存 "),s("a",{class:"header-anchor",href:"#_4-永久增大内存","aria-hidden":"true"},"#")],-1),se=s("div",{class:"language-cpp"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh setmem centos7 "),s("span",{style:{color:"#F78C6C"}},"2048M"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"--"),s("span",{style:{color:"#A6ACCD"}},"config")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh console centos7")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"free "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}},"h ")]),l(`
`),s("span",{class:"line"})])])],-1),le=s("h1",{id:"第12章-kvm冷添加cpu",tabindex:"-1"},[l("第12章 KVM冷添加CPU "),s("a",{class:"header-anchor",href:"#第12章-kvm冷添加cpu","aria-hidden":"true"},"#")],-1),ee=s("h2",{id:"_1-编辑配置文件",tabindex:"-1"},[l("1.编辑配置文件 "),s("a",{class:"header-anchor",href:"#_1-编辑配置文件","aria-hidden":"true"},"#")],-1),ne=s("div",{class:"language-jsx"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"virsh edit centos7")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"------------------------------------------------")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#F07178"}},"vcpu"),s("span",{style:{color:"#89DDFF"}}," "),s("span",{style:{color:"#C792EA"}},"placement"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"static"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}}," "),s("span",{style:{color:"#C792EA"}},"current"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"2"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},">"),s("span",{style:{color:"#A6ACCD"}},"4"),s("span",{style:{color:"#89DDFF"}},"</"),s("span",{style:{color:"#F07178"}},"vcpu"),s("span",{style:{color:"#89DDFF"}},">")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"------------------------------------------------")]),l(`
`),s("span",{class:"line"})])])],-1),oe=s("h2",{id:"_2-添加cpu核数",tabindex:"-1"},[l("2.添加cpu核数 "),s("a",{class:"header-anchor",href:"#_2-添加cpu核数","aria-hidden":"true"},"#")],-1),ae=s("div",{class:"language-bash"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"virsh"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"setvcpus"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"centos7"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"4"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"--live"),s("span",{style:{color:"#A6ACCD"}}," ")]),l(`
`),s("span",{class:"line"})])])],-1),ce=s("h2",{id:"_3-永久添加cpu核数",tabindex:"-1"},[l("3.永久添加cpu核数 "),s("a",{class:"header-anchor",href:"#_3-永久添加cpu核数","aria-hidden":"true"},"#")],-1),te=s("div",{class:"language-bash"},[s("span",{class:"copy"}),s("pre",null,[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"setvcpus"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"centos7"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"4"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C3E88D"}},"--config")]),l(`
`),s("span",{class:"line"})])])],-1);function re(n,ie,pe,De,c,de){const t=r;return d(),D(t,{frontmatter:c.frontmatter,data:c.data},{"main-content-md":e(()=>[y,h,A,_,F,u,v,g,k,b,m,f,B,x,E,w,q,V,M,K,$,S,U,N,O,P,j,T,z,G,H,J,L,Z,R,I,Q,W,X,Y,ss,ls,es,ns,os,as,cs,ts,rs,is,ps,Ds,ds,Cs,ys,hs,As,_s,Fs,us,vs,gs,ks,bs,ms,fs,Bs,xs,Es,ws,qs,Vs,Ms,Ks,$s,Ss,Us,Ns,Os,Ps,js,Ts,zs,Gs,Hs,Js,Ls,Zs,Rs,Is,Qs,Ws,Xs,Ys,sl,ll,el,nl,ol,al,cl,tl,rl,il,pl,Dl,dl,Cl,yl,hl,Al,_l,Fl,ul,vl,gl,kl,bl,ml,fl,Bl,xl,El,wl,ql,Vl,Ml,Kl,$l,Sl,Ul,Nl,Ol,Pl,jl,Tl,zl,Gl,Hl,Jl,Ll,Zl,Rl,Il,Ql,Wl,Xl,Yl,se,le,ee,ne,oe,ae,ce,te]),"main-header":e(()=>[o(n.$slots,"main-header")]),"main-header-after":e(()=>[o(n.$slots,"main-header-after")]),"main-nav":e(()=>[o(n.$slots,"main-nav")]),"main-content":e(()=>[o(n.$slots,"main-content")]),"main-content-after":e(()=>[o(n.$slots,"main-content-after")]),"main-nav-before":e(()=>[o(n.$slots,"main-nav-before")]),"main-nav-after":e(()=>[o(n.$slots,"main-nav-after")]),comment:e(()=>[o(n.$slots,"comment")]),footer:e(()=>[o(n.$slots,"footer")]),aside:e(()=>[o(n.$slots,"aside")]),"aside-custom":e(()=>[o(n.$slots,"aside-custom")]),default:e(()=>[o(n.$slots,"default")]),_:3},8,["frontmatter","data"])}const ue=i(C,[["render",re],["__file","/Users/vlinux/vlinux/blog/valaxy/vlinux.github.io/pages/posts/KVM-未完.md"]]);export{Fe as __pageData,ue as default};
